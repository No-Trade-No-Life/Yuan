---
sidebar_position: 4
---

# 如何计算盈亏（PnL）

> $\text{PnL} = \text{标准盈亏} + \text{盈亏修正}$

## 标准盈亏

这个**标准盈亏公式**可以应用于**所有产品**的盈亏计算。它适用于现货、期货和期权合约，包括股票、外汇、债券、商品、加密货币、贵金属等。

$$
\text{标准盈亏} = \text{数量} \times \text{价值尺度} \times (P(B, C, t_2) - P(B, C, t_1)) \\
                      \times P(C, A, t_2) \times P(\text{价值尺度单位}, B, t_1)
$$

其中：

- $A$ 是账户的保证金货币；$B$ 是产品本身；$C$ 是产品的报价货币；
- 对于任何资产 $x$、$y$ 和时间 $t$，$P(x, y, t)$ 是资产 $x$ 对 $y$ 在时间 $t$ 的价格，$t_1$ 是持仓进入时间；$t_2$ 是持仓退出时间；
- $P(B, C, t)$ 是产品在时间 $t$ 的价格；你可以在市场上直接看到它；
- 数量是合约的数量，做多时为正，做空时为负；
- 平仓价格 $P(B, C, t_2)$ 是产品在持仓退出时的价格；
- 开仓价格 $P(B, C, t_1)$ 是产品在持仓进入时的价格；
- 价值尺度是一个常数倍数项，现货通常为 1，期货或期权合约中称为“合约大小”。
- $P(C, A, t)$ 是报价货币对保证金货币在时间 $t$ 的汇率；
  - 如果报价货币与保证金货币相同，则 $P(C, A, t) = 1$，可以忽略此项；
- 价值尺度单位通常指的是产品本身 ($B$) 或产品的报价货币 ($C$)；
  - 如果指的是产品本身，则 $P(\text{价值尺度单位}, B, t_1) = P(B, B, t_1) = 1$；
  - 如果指的是产品的报价货币，则 $P(\text{价值尺度单位}, B, t_1) = P(C, B, t_1) = \frac{1}{P(B, C, t_1)} = \frac{1}{\text{开仓价格}}$；
  - 例如，如果产品规定 1 合约=100 股股票，则价值尺度单位是股票本身，价值尺度是 100；
  - 另一个例子，如果产品规定 1 合约=价值 1000 美元的股票，则价值尺度单位是报价货币，价值尺度是 1000；
- 浮动盈亏是通过将“平仓价格=当前可平仓价格”代入公式计算的盈亏。
- 实际上，当报价货币和保证金货币不同时，无法直接获得精确的汇率 $P(C, A, t_2)$。然而，交易所通常直接在历史订单中显示精确的标准盈亏。因此，我们可以从标准盈亏中推导出汇率 $P(C, A, t_2)$。

[了解更多](../reference/elementary-math-in-trading) 关于数学技术过程和计算案例。

## 盈亏修正

“盈亏修正”主要指的是交易成本，通常在投机交易中占比较小。盈亏修正的计算实际上非常复杂，不同的交易所可能有不同的规则格式来规范交易行为。

以下是一些规则：

1. 根据交易量：例如，上海期货交易所的有色金属期货手续费是根据每手固定金额计算的；
2. 根据成交额：例如，中国金融期货交易所的股指期货手续费是按成交额的 2.3%计算的；
3. 单向双向：某些产品的手续费只在开仓时收取，有些则在开仓和平仓时都收取；
4. 今日持仓/昨日持仓：中国期货通常指定平今仓和平昨仓来收取不同的费用；
5. 隔夜利息：当外汇差价合约持仓过夜（通常在东欧时间 0:00）时，会产生利息，但不会收取隔夜利息；
6. 每周交替利息：通常在周三，隔夜利息会一次性收取 3 天的利息；
7. 分红：在交易股票时，持仓分红会增加盈亏修正值；
8. 政策调整：交易所改变其费用系数的变动。

已经发现，使用标准方程计算交易成本很困难。

然而，交易所必须在结算中给出最终的真实盈亏。因此，可以通过最终的真实盈亏推导出盈亏修正值。

因此，我们可以使用以下方程来计算盈亏修正：

$$\text{盈亏修正} = \text{盈亏} - \text{标准盈亏}$$
