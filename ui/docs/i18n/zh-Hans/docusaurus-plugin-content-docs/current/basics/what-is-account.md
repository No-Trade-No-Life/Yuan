---
sidebar_position: 3
---

# 什么是账户

您可能以前使用过“银行账户”。它实际上是账户的一个简化版本，只涉及余额的变化。

现在我们介绍一个更广泛的**账户**概念：

账户包含 **货币 (Currency)** 和 **持仓 (Position)**。

- 货币是一种可以直接转账，并用于交易的资产；因为货币可能是通过转账得来的，没有办法知道其成本，也就无法计算其盈亏。
- 持仓包括外汇、股票、商品、债券等。所有您认为最终转换为货币出售的资产都属于您的持仓。持仓的生命周期短于货币，可以知晓成本，可以计算盈亏属性。

## 货币

货币被描述为一种货币和几种不同的金额。一个账户同时可以拥有多个货币。

| 字段名称   | 描述                                     | 示例值  |
| :--------- | :--------------------------------------- | :------ |
| `currency` | 货币名称                                 | `"USD"` |
| `balance`  | 余额                                     | `10000` |
| `free`     | 可用余额，可以通过转账转出的部分         | `9000`  |
| `equity`   | 净值、权益，如果退出所有持仓后预期的余额 | `15000` |
| `profit`   | 相关头寸的浮动盈亏                       | `5000`  |
| `used`     | 已用保证金，无法通过转账转出的冻结部分   | `6000`  |

这个等式始终成立：`equity` = `balance` + `profit` = `used` + `free`

账户的浮动盈亏一定是账户中每个持仓的浮动盈亏之和。

账户的已用保证金通常是账户中每个持仓的已用保证金之和 (联合保证金制度下通常不是如此)，由交易清算所直接给出。

计算方法通常是：

1. 使用持仓计算浮动盈亏
2. 使用余额和浮动盈亏计算净值
3. 使用净值和已用保证金计算可用余额

**只有两种方式改变账户余额**：

1. **交易 (Trading)**：账户的持仓会因市场价格变化而获利或亏损，开仓、平仓、结息事件都可能改变账户余额。
2. **转账 (Transferring)**：账户与其他账户之间的货币转移。具体来说，就是存款和取款。

### 本位货币 (Standard Currency)

账户可以持有多种不同的货币。在对账户进行总估值时，往往会采取一种本位视角，将所有不同的货币根据市场价格折算成某个单一的货币计价的估值。

我们认为，本位是在前端视角下才需要被合计的，因此在账户信息的生产过程中，不需要提前指定哪一种货币是本位货币。

## 持仓

每个账户可以拥有若干个持仓。持仓也可以叫做头寸。

| 字段名称                  | 描述                           | 示例值              |
| :------------------------ | :----------------------------- | :------------------ |
| `position_id`             | 持仓 ID (必填)                 | `"1235123"`         |
| `product_id`              | 产品 ID (必填)                 | `XAUUSD`            |
| `direction`               | 持仓方向 (必填)                | `"SHORT"`           |
| `volume`                  | 持仓量 (必填)                  | `5`                 |
| `free_volume`             | 可用于交易的持仓量             | `1`                 |
| `position_price`          | 持仓成本价 (必填)              | `1490`              |
| `closable_price`          | 市场可平价 (必填)              | `2500`              |
| `floating_profit`         | 浮动盈亏 (必填)                | `149`               |
| `comment`                 | 持仓备注                       | `"Powered by Yuan"` |
| `valuation`               | 持仓估值 (必填)                | `1250000`           |
| `settlement_scheduled_at` | 下次结算时间戳 (Unix 毫秒风格) | `1722104965015`     |
| `interest_to_settle`      | 下次结算预期获得的利息         | `-2.21`             |

## 交易

账户交易涉及五个基本变量：余额、浮动盈亏（浮动 PnL）、净值、已用保证金和可用保证金。

1. 首先，账户会有一个余额，这是一个基本变量，不依赖于其他变量。
2. 然后选择一个[产品](./what-is-product.md)。
3. 您可以向交易所提交交易订单，准备建立持仓。
4. 建立持仓时，您需要支付一定数量的保证金。（**可用保证金**将转换为**已用保证金**）
5. 在价格变化过程中，由价格差异引起的浮动盈亏会实时变化。
6. 然后您可以选择在某个市场价格和某个时间退出持仓，浮动盈亏将转换为余额。
7. 通过这种方式可以累积账户余额。

### 如何计算保证金

原则是持仓越大，风险越大，所需的保证金越多，通常与持仓数量线性正相关。当可用保证金不足时，交易所将**拒绝**开仓。具体计算方法取决于交易所规则。

参见 [如何计算保证金](../reference/how-to-calculate-margin.md)

### 如何计算盈亏

盈亏通常是由市值变化和结息事件导致的。

参见 [如何计算盈亏](../reference/how-to-calculate-pnl.md)
