# 数据记录

**数据是对事物的观察记录。**
系统从某种视角去观察事物时，就会得到数据记录；数据是观察的产物；观察的具体视角通常被称为建模或者数据模型。

**数据记录 (Data Record) 则是数据的另外一种便于数据库访问的表现形式。**

## 数据记录和数据的关系

数据记录 = 数据 + 访问上下文。

**访问上下文 (Access Context)** 是用于提示数据库应当如何对数据进行存储和访问的信息，包括如何判定数据的唯一性、如何索引数据等。

```mermaid
graph LR
    数据库 <--->|存/取| 数据记录
    数据记录 -->|解包| 数据
    数据 -->|封包| 数据记录
```

## 数据记录的类型

数据记录的类型 `type` 是一个**非常重要**的字符串，用于标识数据记录的类型。

**相同类型的数据记录具有相同的访问上下文。**

同一个类型的数据记录会被集中存储在一起，通常是因为它们是同一类事物的不同实例。

因为，如果将不同类型的数据记录混合在一起，那么在读写时都会变得比较低效率。

## 数据记录的存取

数据记录只有存/取的操作，并不是增/删/改/查。

## 访问上下文

### 标识符 (ID)

数据记录的标识符 `id` 是一个**非常重要**的字符串，用于标识数据记录的唯一性。

两个数据记录如果具有相同的标识符，则它们是同一个数据记录，新的数据记录会覆盖旧的数据记录。

## 完整的数据记录结构

```ts
export interface IDataRecord<T> {
  origin: T;
  type: string;

  id: string;
  updated_at: number;

  tags?: Record<string, string>;
  paths?: Record<string, string>;
  created_at?: number;
  frozen_at?: number;
  expired_at?: number;
}
```
