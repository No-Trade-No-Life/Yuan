## API Report File for "@yuants/protocol"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { IAccountInfo } from '@yuants/data-model';
import { IDataRecord } from '@yuants/data-model';
import { IDataRecordTypes } from '@yuants/data-model';
import { IOrder } from '@yuants/data-model';
import { IPeriod } from '@yuants/data-model';
import { IProduct } from '@yuants/data-model';
import { ITick } from '@yuants/data-model';
import { ITransferOrder } from '@yuants/data-model';
import { JSONSchema7 } from 'json-schema';
import { NativeSubject } from '@yuants/utils';
import { ObservableInput } from 'rxjs';
import { Registry } from '@yuants/prometheus-client';

// Warning: (ae-forgotten-export) The symbol "IAccountTransferAddressContext" needs to be exported by the entry point index.d.ts
//
// @public
export const addAccountTransferAddress: (ctx: IAccountTransferAddressContext) => void;

// @public
export const cancelOrder: (terminal: Terminal, order: IOrder) => AsyncIterable<IResponse<void> & IResponse<unknown>>;

// Warning: (ae-forgotten-export) The symbol "ICopyDataRecordsRequest" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export const copyDataRecords: (terminal: Terminal, req: ICopyDataRecordsRequest) => AsyncIterable<undefined>;

// @public
export function createConnectionJson<T = any>(URL: string): IConnection<T>;

// @public
export function createConnectionWs<T = any>(URL: string): IConnection<T>;

// @public
export const escapeRegExp: (string: string) => string;

// @public
export interface IConnection<T> {
    connection$: AsyncIterable<unknown>;
    input$: AsyncIterable<T>;
    output$: NativeSubject<T>;
}

// @public
export interface IResponse<T = void> {
    // (undocumented)
    code: number;
    // (undocumented)
    data?: T;
    // (undocumented)
    message: string;
}

// @public
export interface IService {
}

// @public
export interface ITerminalInfo {
    channelIdSchemas?: JSONSchema7[];
    created_at?: number;
    name?: string;
    serviceInfo?: Record<string, {
        method: string;
        schema: JSONSchema7;
    }>;
    // @deprecated
    status?: string;
    subscriptions?: Record<string, string[]>;
    terminal_id: string;
    updated_at?: number;
}

// @public
export interface ITerminalMessage {
    // (undocumented)
    channel_id?: string;
    // (undocumented)
    frame?: unknown;
    // (undocumented)
    method?: string;
    // (undocumented)
    req?: unknown;
    // (undocumented)
    res?: IResponse<unknown>;
    // (undocumented)
    source_terminal_id: string;
    // (undocumented)
    target_terminal_id: string;
    // (undocumented)
    trace_id: string;
}

// @public
export const modifyOrder: (terminal: Terminal, order: IOrder) => AsyncIterable<IResponse<void> & IResponse<unknown>>;

// @public
export const PromRegistry: Registry;

// @public
export const provideAccountInfo: (terminal: Terminal, accountInfo$: ObservableInput<IAccountInfo>) => void;

// @public
export const providePeriods: (terminal: Terminal, datasource_id: string, usePeriods: (product_id: string, period_in_sec: number) => ObservableInput<IPeriod[]>) => void;

// @public
export const provideTicks: (terminal: Terminal, datasource_id: string, useTicks: (product_id: string) => ObservableInput<ITick>) => void;

// Warning: (ae-forgotten-export) The symbol "IQueryDataRecordsRequest" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export const queryDataRecords: <T>(terminal: Terminal, req: IQueryDataRecordsRequest) => AsyncIterable<IDataRecord<T>>;

// Warning: (ae-forgotten-export) The symbol "IQueryHistoryOrdersRequest" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export const queryHistoryOrders: (terminal: Terminal, req: IQueryHistoryOrdersRequest) => AsyncIterable<IOrder[]>;

// Warning: (ae-forgotten-export) The symbol "IQueryPeriodsRequest" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export const queryPeriods: (terminal: Terminal, req: IQueryPeriodsRequest) => AsyncIterable<IPeriod[]>;

// Warning: (ae-forgotten-export) The symbol "IQueryProductsRequest" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export const queryProducts: (terminal: Terminal, req: IQueryProductsRequest) => AsyncIterable<IProduct[]>;

// @public (undocumented)
export const readDataRecords: <T extends keyof IDataRecordTypes>(terminal: Terminal, request: IQueryDataRecordsRequest & {
    type: T;
}) => AsyncIterable<IDataRecord<IDataRecordTypes[T]>[]>;

// Warning: (ae-forgotten-export) The symbol "IRemoveDataRecordsRequest" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export const removeDataRecords: (terminal: Terminal, req: IRemoveDataRecordsRequest) => AsyncIterable<void>;

// @public
export const requestSharedKey: (terminal: Terminal, ed25519_public_key: string) => Promise<string>;

// @public
export const setupHandShakeService: (terminal: Terminal, private_key: string) => Map<string, string>;

// @public
export const submitOrder: (terminal: Terminal, order: IOrder) => AsyncIterable<IResponse<void> & IResponse<unknown>>;

// @public
export class Terminal {
    constructor(host_url: string, terminalInfo: ITerminalInfo, connection?: IConnection<ITerminalMessage>);
    consumeChannel: <T>(channel_id: string) => AsyncIterable<T>;
    dispose$: AsyncIterable<void>;
    dispose(): void;
    // (undocumented)
    host_url: string;
    input$: AsyncIterable<ITerminalMessage>;
    output$: AsyncIterable<ITerminalMessage>;
    provideChannel: <T>(channelIdSchema: JSONSchema7, handler: (channel_id: string) => ObservableInput<T>) => void;
    // Warning: (ae-forgotten-export) The symbol "IServiceHandler" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "IServiceOptions" needs to be exported by the entry point index.d.ts
    provideService: <T extends string>(method: T, requestSchema: JSONSchema7, handler: IServiceHandler<T>, options?: IServiceOptions) => void;
    request<T extends string>(method: T, target_terminal_id: string, req: T extends keyof IService ? IService[T]['req'] : ITerminalMessage['req']): AsyncIterable<T extends keyof IService ? Partial<IService[T]> & ITerminalMessage : ITerminalMessage>;
    requestService: <T extends string>(method: T, req: T extends keyof IService ? IService[T]["req"] : unknown) => AsyncIterable<T extends keyof IService ? Partial<IService[T]> & ITerminalMessage : ITerminalMessage>;
    resolveTargetTerminalIds: (method: string, req: ITerminalMessage['req']) => Promise<string[]>;
    terminal_id: string;
    // (undocumented)
    terminalInfo: ITerminalInfo;
    terminalInfos$: AsyncIterable<ITerminalInfo[]>;
}

// @public
export const useAccountInfo: (terminal: Terminal, account_id: string) => AsyncIterable<IAccountInfo>;

// @public
export const usePeriod: (terminal: Terminal, datasource_id: string, product_id: string, period_in_sec: number) => AsyncIterable<IPeriod[]>;

// @public (undocumented)
export const useProducts: (terminal: Terminal, datasource_id: string) => AsyncIterable<IProduct[]>;

// @public
export const useTick: (terminal: Terminal, datasource_id: string, product_id: string) => AsyncIterable<ITick>;

// @public (undocumented)
export const writeDataRecords: <T extends keyof IDataRecordTypes>(terminal: Terminal, data: IDataRecord<IDataRecordTypes[T]>[]) => AsyncIterable<undefined>;

```
