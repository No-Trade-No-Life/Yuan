{
  "range": {
    "old": "9b6f0cec20a135c643e7d253cdc95a27f04aa5f2",
    "new": "f41c302e49952b56517c44a5f38e5cb37f4943cf",
    "label": "9b6f0cec2..f41c302e4",
    "startDate": "2026-01-05",
    "endDate": "2026-01-05",
    "commitCount": 2,
    "generatedAt": "2026-01-06T00:06:34.076Z"
  },
  "contributors": [
    {
      "name": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Siyuan Wang",
      "email": "c.one@thrimbda.com",
      "commits": 1
    }
  ],
  "directoryAnalysis": {
    "topLevel": [
      {
        "dir": "apps",
        "fileCount": 4
      },
      {
        "dir": ".legion",
        "fileCount": 3
      },
      {
        "dir": "common",
        "fileCount": 1
      }
    ],
    "projects": [
      {
        "project": "apps/vendor-okx",
        "fileCount": 4,
        "marker": "package.json"
      },
      {
        "project": ".legion",
        "fileCount": 3,
        "marker": null
      },
      {
        "project": "common",
        "fileCount": 1,
        "marker": null
      }
    ],
    "markersUsed": [
      "package.json",
      "Cargo.toml",
      "go.mod",
      "requirements.txt",
      "pyproject.toml",
      "setup.py",
      "pom.xml",
      "build.gradle",
      "build.gradle.kts",
      "CMakeLists.txt",
      "Makefile",
      "pubspec.yaml",
      "mix.exs",
      "Gemfile",
      "composer.json"
    ]
  },
  "commits": [
    {
      "hash": "50afccf76fcdf052714625db77d53caa1989e979",
      "short": "50afccf76",
      "author": "Siyuan Wang",
      "email": "c.one@thrimbda.com",
      "authoredAt": "2026-01-05 15:01:35 +0800",
      "subject": "feat: æ·»åŠ å¯¹ ohlc_v2 è¡¨çš„åŒå†™æ”¯æŒï¼Œæ›´æ–° publishChannel é€»è¾‘ä»¥å®ç°æ•°æ®åŒæ­¥ (#2471)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 62,
          "deletions": 0,
          "path": ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/context.md",
          "changeType": "added",
          "patch": "commit 50afccf76fcdf052714625db77d53caa1989e979\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Mon Jan 5 15:01:35 2026 +0800\n\n    feat: æ·»åŠ å¯¹ ohlc_v2 è¡¨çš„åŒå†™æ”¯æŒï¼Œæ›´æ–° publishChannel é€»è¾‘ä»¥å®ç°æ•°æ®åŒæ­¥ (#2471)\n\ndiff --git a/.legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/context.md b/.legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/context.md\nnew file mode 100644\nindex 000000000..c9e47f79e\n--- /dev/null\n+++ b/.legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/context.md\n@@ -0,0 +1,62 @@\n+# OKX OHLCï¼špublishChannel('ohlc') æ¢³ç† + å†™å…¥ ohlc_v2 åŒå†™ - ä¸Šä¸‹æ–‡\n+\n+## ä¼šè¯è¿›å±• (2026-01-05)\n+\n+### âœ… å·²å®Œæˆ\n+\n+- å…¨ä»“ç¡®è®¤ publishChannel('ohlc') ä»…å‡ºç° 1 å¤„ï¼šapps/vendor-okx/src/public-data/ohlc.ts\n+- é˜…è¯» apps/vendor-okx çš„ OHLC å®æ—¶é“¾è·¯ï¼šuseOHLC â†’ map(IOHLC) â†’ writeToSQL({tableName:'ohlc'})\n+- é˜…è¯» @yuants/sql çš„ writeToSQL/createSQLWriter/bufferWriterï¼šå†™å…¥å¤±è´¥ä¸æŠ›å‡ºåˆ°ä¸Šæ¸¸ã€ä¼šä¿ç•™ buffer å¹¶å‘¨æœŸé‡è¯•\n+- ï¼ˆè®°å½•ï¼‰legion_update_tasks æ›¾è¯¯å°† tasks.md å…¨éƒ¨ä»»åŠ¡æ ‡ä¸ºå®Œæˆï¼Œå·²æ‰‹å·¥æ›´æ­£ä¸ºâ€œä»…è°ƒç ”å®Œæˆï¼Œè®¾è®¡è¿›è¡Œä¸­â€ã€‚\n+- å·²åœ¨ apps/vendor-okx/src/public-data/ohlc.ts çš„ publishChannel('ohlc') é“¾è·¯å®ç°åŒå†™ï¼šå…ˆå†™å…¥ ohlc_v2ï¼ˆå½’ä¸€åŒ– series_idï¼‰ï¼Œå†å†™å…¥æ—§è¡¨ ohlcï¼ˆä¸æ”¹å˜å¯¹å¤–è¿”å› IOHLCï¼‰ã€‚\n+- å·²è¿è¡Œ prettier æ ¼å¼åŒ–ç›¸å…³æ–‡ä»¶ã€‚\n+- å·²è¿è¡Œ `node common/scripts/install-run-rush.js build -t @yuants/vendor-okx`ï¼Œæ„å»ºé€šè¿‡ã€‚\n+\n+### ğŸŸ¡ è¿›è¡Œä¸­\n+\n+- è¡¥â€œçº¿ä¸Šå¯å¤ç°â€çš„æœ€å°éªŒè¯ï¼šè·‘ OKX OHLC è®¢é˜…å¹¶ç¡®è®¤åŒä¸€æ¡ K çº¿åŒæ—¶å†™å…¥ ohlc ä¸ ohlc_v2ï¼ˆseries_id å½¢æ€ä¸åŒä½†å¯å‘½ä¸­è¯»å–ä¾§ï¼‰ã€‚\n+\n+### âš ï¸ é˜»å¡/å¾…å®š\n+\n+(æš‚æ— )\n+\n+---\n+\n+## å…³é”®æ–‡ä»¶\n+\n+- `apps/vendor-okx/src/public-data/ohlc.ts`ï¼šOKX OHLC å®æ—¶è®¢é˜… + `publishChannel('ohlc')` å‘å¸ƒç‚¹ï¼ˆæœ¬ä»»åŠ¡ä¸»è¦æ”¹åŠ¨ä½ç½®ï¼‰ã€‚\n+- `libraries/sql/src/index.ts`ï¼š`writeToSQL/createSQLWriter/buildInsertManyIntoTableSQL` å®ç°ï¼ˆç¡®è®¤åŒå†™å¯ç”¨ columns é™å®šåˆ—é›†åˆï¼‰ã€‚\n+- `libraries/sql/src/bufferWriter.ts`ï¼šbuffer writer é‡è¯•/é”™è¯¯è¡Œä¸ºï¼ˆè¯„ä¼°åŒå†™å¤±è´¥çš„å½±å“ï¼‰ã€‚\n+- `tools/sql-migration/sql/ohlc_v2.sql`ï¼š`ohlc_v2` è¡¨ç»“æ„ï¼ˆå­—æ®µ/ä¸»é”®/ç´¢å¼•ï¼‰ã€‚\n+- `tools/sql-migration/sql/ohlc.sql`ï¼šæ—§è¡¨ `ohlc` è¡¨ç»“æ„ï¼ˆå¯¹æ¯”å·®å¼‚ï¼‰ã€‚\n+- `libraries/data-ohlc/src/loadOHLC.ts`ï¼šè¯»å–ä¾§å¯¹ `ohlc_v2` çš„ `series_id` ç¼–ç çº¦å®šï¼ˆå†³å®šäº†å†™å…¥ v2 æ—¶éœ€è¦å½’ä¸€åŒ– legacy series_idï¼‰ã€‚\n+- `libraries/data-ohlc/src/series_id.ts`ï¼š`encodeOHLCSeriesId/decodeOHLCSeriesId`ï¼ˆseries_id ç¼–ç è§„åˆ™ï¼‰ã€‚\n+- `libraries/exchange/src/ohlc.ts`ï¼šå†™å…¥ `ohlc_v2` çš„å‚è€ƒå®ç°ï¼ˆcolumns åˆ—è¡¨ + conflictKeysï¼‰ã€‚\n+\n+---\n+\n+## å…³é”®å†³ç­–\n+\n+| å†³ç­–                                                                                                                                                                | åŸå›                                                                                                                                                                                                                                                                               | æ›¿ä»£æ–¹æ¡ˆ                                                                                                                                                     | æ—¥æœŸ       |\n+| ------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------- |\n+| å†™å…¥ ohlc_v2 æ—¶å¯¹ OKX legacy series_id åšå½’ä¸€åŒ–ï¼ˆseries_id_v2 = `${encodePath(datasource_id, instType, instId)}/${duration}`ï¼‰ï¼Œè€Œä¸æ˜¯åŸæ ·å†™å…¥ legacy series_idã€‚   | è¯»å–ä¾§ï¼ˆlibraries/data-ohlc/src/loadOHLC.tsï¼‰æŸ¥è¯¢ ohlc_v2 ä½¿ç”¨ encodeOHLCSeriesId(product_id, duration)ï¼Œå…¶ä¸­ product_id çº¦å®šä¸º encodePath(datasource_id, instType, instId) çš„â€œå±•å¼€å¤šæ®µâ€å½¢å¼ï¼›è‹¥åŸæ ·å†™ legacyï¼ˆåŒ…å« %2F çš„å•æ®µ product_idï¼‰ï¼Œè¯»å–ä¾§å°†æ— æ³•å‘½ä¸­ï¼ŒåŒå†™ä»·å€¼å¤§å¹…ä¸‹é™ã€‚ | åŸæ ·å†™å…¥ legacy series_idï¼ˆå®ç°æ›´ç®€å•ï¼Œä½†ä¼šäº§ç”Ÿä¸è¯»å–ä¾§ä¸ä¸€è‡´çš„ keyï¼Œéœ€è¦é¢å¤–å…¼å®¹/è¿ç§»ï¼‰,åŒæ—¶å†™å…¥ä¸¤ä»½ series_idï¼ˆlegacy + v2ï¼Œæ•°æ®ç¿»å€ä¸”å»é‡/æŸ¥è¯¢æ›´å¤æ‚ï¼‰    | 2026-01-05 |\n+| åœ¨ publishChannel('ohlc') çš„åŒä¸€è®¢é˜…é“¾è·¯å†…å®ŒæˆåŒå†™ï¼šé€šè¿‡â€œæºå¸¦ \\_\\_origin + columns é™å®šâ€å®ç° `writeToSQL(ohlc_v2)` ä¸ `writeToSQL(ohlc)` ä¸²è”ï¼Œé¿å…é¢å¤– subscribeã€‚ | publishChannel å›è°ƒåº”è¿”å›å¯è¢« Terminal ç®¡æ§ç”Ÿå‘½å‘¨æœŸçš„ Observableï¼›è‹¥ä¸ºåŒå†™é¢å¤– subscribeï¼Œä¼šå¯¼è‡´å³ä½¿æ— äººè®¢é˜… channel ä¹ŸæŒç»­å ç”¨ WS è¿æ¥/å†™åº“ã€‚ä¸²è”ä¸¤ä¸ª writeToSQL ä¸æ”¹å˜å¯¹å¤–æµç±»å‹ï¼Œä¸”å¤ç”¨ç°æœ‰ bufferWriter è¡Œä¸ºã€‚                                                                | åˆ†å‰æµå¹¶å¯¹ä¸¤ä¸ªåˆ†æ”¯å„è‡ª subscribeï¼ˆå®ç°ç›´è§‚ä½†ç”Ÿå‘½å‘¨æœŸä¸å¯æ§ï¼Œæ˜“æ³„éœ²è¿æ¥ï¼‰,åœ¨ tap å†…ç›´æ¥ requestSQL å†™å…¥ v2ï¼ˆç»•å¼€ writeToSQLï¼Œå¤±å»ç»Ÿä¸€ bufferWriter/çŠ¶æ€ç›‘æ§ï¼‰ | 2026-01-05 |\n+\n+---\n+\n+## å¿«é€Ÿäº¤æ¥\n+\n+**ä¸‹æ¬¡ç»§ç»­ä»è¿™é‡Œå¼€å§‹ï¼š**\n+\n+1. åšä¸€æ¬¡å¯å¤ç°éªŒè¯ï¼šè·‘ OKX OHLC è®¢é˜…å¹¶è§‚å¯ŸåŒä¸€æ‰¹æ•°æ®åŒæ—¶å†™å…¥ `ohlc` ä¸ `ohlc_v2`ã€‚\n+2. è‹¥éœ€è¦çº¿ä¸Šå¯æ§å›æ»šï¼šå†³å®šæ˜¯å¦è¦åœ¨ `apps/vendor-okx/src/public-data/ohlc.ts` å¢åŠ  `WRITE_OHLC_V2_TO_SQL` ä¹‹ç±»çš„å¼€å…³ï¼ˆå½“å‰å®ç°ä¸ºé»˜è®¤åŒå†™ï¼‰ã€‚\n+\n+**æ³¨æ„äº‹é¡¹ï¼š**\n+\n+- `ohlc_v2` ç›®å‰è¯»å–ä¾§åŸºäº `encodeOHLCSeriesId(product_id, duration)` æŸ¥è¯¢ï¼›è‹¥ v2 å†™å…¥ä»ä½¿ç”¨ legacy series_idï¼ˆåŒ…å« `%2F` çš„å•æ®µ product_idï¼‰ï¼Œè¯»å–ä¾§å¤§æ¦‚ç‡æ— æ³•å‘½ä¸­ã€‚\n+- å½“å‰å®ç°å†™å…¥ `ohlc_v2` ä¼šæŠŠ legacy `series_id` å½’ä¸€åŒ–ä¸ºå±•å¼€è·¯å¾„ï¼ˆä¾‹å¦‚ `OKX/SWAP/BTC-USDT-SWAP/PT1M`ï¼‰ï¼Œè€Œæ—§è¡¨ `ohlc` ä»ä¿ç•™ legacy å½¢æ€ï¼ˆä¾‹å¦‚ `OKX/SWAP%2FBTC-USDT-SWAP/PT1M`ï¼‰ã€‚\n+- æœ¬ä»»åŠ¡åªåšâ€œæ•°æ®è¡ŒåŒå†™â€ï¼Œä¸è´Ÿè´£ç»´æŠ¤ `series_data_range`ï¼ˆæ˜¯å¦éœ€è¦å¦èµ·ä»»åŠ¡è¡¥é½èŒƒå›´è¡¨ï¼Œç”±ä¸šåŠ¡å†³å®šï¼‰ã€‚\n+\n+---\n+\n+_æœ€åæ›´æ–°: 2026-01-05 15:03 by Claude_\n",
          "codeSnippets": []
        },
        {
          "additions": 131,
          "deletions": 0,
          "path": ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/plan.md",
          "changeType": "added",
          "patch": "commit 50afccf76fcdf052714625db77d53caa1989e979\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Mon Jan 5 15:01:35 2026 +0800\n\n    feat: æ·»åŠ å¯¹ ohlc_v2 è¡¨çš„åŒå†™æ”¯æŒï¼Œæ›´æ–° publishChannel é€»è¾‘ä»¥å®ç°æ•°æ®åŒæ­¥ (#2471)\n\ndiff --git a/.legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/plan.md b/.legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/plan.md\nnew file mode 100644\nindex 000000000..7b2b0c019\n--- /dev/null\n+++ b/.legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/plan.md\n@@ -0,0 +1,131 @@\n+# OKX OHLCï¼špublishChannel('ohlc') æ¢³ç† + å†™å…¥ ohlc_v2 åŒå†™\n+\n+## ç›®æ ‡\n+\n+æŸ¥æ‰¾æ‰€æœ‰ publishChannel å‘å¸ƒ 'ohlc' çš„ä½ç½®ï¼Œå¹¶åœ¨ writeToSQL æ—¶å°† OHLC æ•°æ®åŒæ—¶å†™å…¥ ohlc_v2 è¡¨ï¼ˆæŒ‰è¡¨ç»“æ„åšæ˜ å°„ï¼‰ã€‚\n+\n+## è¦ç‚¹\n+\n+- å…ˆå…¨ä»“æœç´¢å¹¶åˆ—å‡ºæ‰€æœ‰ publishChannel('ohlc') çš„å‘å¸ƒç‚¹ã€payload ç»“æ„ä¸æ¥æºï¼ˆvendor/æœåŠ¡/è°ƒåº¦å™¨ï¼‰\n+- å®šä½ writeToSQL è°ƒç”¨é“¾ä¸æ—§è¡¨ç»“æ„ï¼ˆohlc/ohlc_interest_rate ç­‰ï¼‰ï¼Œç¡®è®¤å“ªäº›è·¯å¾„éœ€è¦åŒå†™\n+- è¯»å– ohlc_v2 è¡¨ç»“æ„ï¼ˆè¿ç§» SQL/ç±»å‹å®šä¹‰ï¼‰ï¼Œè®¾è®¡å­—æ®µæ˜ å°„ä¸ä¸»é”®/å»é‡ç­–ç•¥\n+- å…ˆå†™ .legion è¯¦ç»†è®¾è®¡å¹¶ç­‰å¾… reviewï¼›é€šè¿‡åå†è½ä»£ç æ”¹åŠ¨ä¸æœ€å°éªŒè¯\n+\n+## èŒƒå›´\n+\n+- apps/vendor-okx/src/public-data/ohlc.ts\n+- \\**/*writeToSQL\\*\n+- \\**/*publishChannel\\*\n+- tools/sql-migration/\\*\\*\n+- supabase/migrations/\\*\\*\n+- .legion/tasks/<new-task>/{plan,context,tasks}.md\n+\n+## é˜¶æ®µæ¦‚è§ˆ\n+\n+1. **è°ƒç ”** - 2 ä¸ªä»»åŠ¡\n+2. **è®¾è®¡ï¼ˆå…ˆå†™æ–‡æ¡£ï¼Œç­‰å¾… reviewï¼‰** - 1 ä¸ªä»»åŠ¡\n+3. **å®ç°** - 1 ä¸ªä»»åŠ¡\n+4. **éªŒè¯ä¸äº¤æ¥** - 1 ä¸ªä»»åŠ¡\n+\n+## ç°çŠ¶æ¢³ç†\n+\n+### 1) publishChannel('ohlc') å‘å¸ƒç‚¹ï¼ˆå…¨ä»“æœç´¢ç»“æœï¼‰\n+\n+- ä»…å‘ç° 1 å¤„ï¼š`apps/vendor-okx/src/public-data/ohlc.ts` å†…çš„ `terminal.channel.publishChannel('ohlc', { pattern: '^OKX/' }, ...)`\n+- è¯¥å›è°ƒä»¥ `series_id` ä½œä¸º channel keyï¼Œè®¢é˜… OKX WebSocket çš„ K çº¿å¹¶è¿”å› `Observable<IOHLC>`\n+- åœ¨ `pipe` å†…è°ƒç”¨ `writeToSQL({ tableName: 'ohlc', ... })` å†™å…¥æ—§è¡¨ `ohlc`\n+\n+> å¤‡æ³¨ï¼šå…¶å®ƒ vendor çš„ OHLC ç›®å‰ä½¿ç”¨ `createSeriesProvider`ï¼ˆæœåŠ¡ç«¯å†™åº“ï¼Œä¸ç»è¿‡ `publishChannel`ï¼‰ï¼Œä¸åœ¨æœ¬ä»»åŠ¡ä¿®æ”¹èŒƒå›´å†…ã€‚\n+\n+### 2) å½“å‰ SQL å†™å…¥è¡Œä¸ºï¼ˆwriteToSQLï¼‰\n+\n+- `writeToSQL` å®ç°ä½äº `libraries/sql/src/index.ts`ï¼šä½¿ç”¨ `bufferWriter` ä»¥å›ºå®šé—´éš”æ‰¹é‡ INSERT/UPSERT\n+- å†™å…¥å¤±è´¥ä¸ä¼šå‘ä¸Šæ¸¸æŠ›é”™ï¼šä¼šä¿ç•™ buffer å¹¶åœ¨åç»­ interval å‘¨æœŸé‡è¯•ï¼ˆè§ `libraries/sql/src/bufferWriter.ts`ï¼‰\n+- å› æ­¤â€œæ–°å¢ ohlc_v2 åŒå†™â€ä¸åº”å½±å“ç°æœ‰ channel å‘å¸ƒï¼ˆæœ€å¤šå¯¼è‡´ v2 å†™å…¥ä¾§ buffer ç§¯å‹/é‡å¤é‡è¯•ï¼‰\n+\n+## è¯¦ç»†è®¾è®¡ï¼ˆå…ˆæ–‡æ¡£ï¼Œreview é€šè¿‡åå†åŠ¨ä»£ç ï¼‰\n+\n+### 1) ohlc_v2 è¡¨ç»“æ„ï¼ˆæ¥æºï¼‰\n+\n+æ¥è‡ª `tools/sql-migration/sql/ohlc_v2.sql`ï¼š\n+\n+- ä¸»é”®ï¼š`(series_id, created_at)`\n+- åˆ—ï¼š\n+  - `series_id` (TEXT, NOT NULL)\n+  - `created_at` (TIMESTAMPTZ, NOT NULL)\n+  - `closed_at` (TIMESTAMPTZ, NOT NULL)\n+  - `open/high/low/close` (TEXT, NOT NULLï¼›SQL ä¸­å†™ä½œ `CLOSE`ï¼ŒPostgres å®é™…ä¸º `close`)\n+  - `volume/open_interest` (TEXT, nullable)\n+  - `updated_at` (TIMESTAMPTZ, DEFAULT CURRENT_TIMESTAMP)\n+- ä¸æ—§è¡¨ `ohlc` çš„å·®å¼‚ï¼šç§»é™¤äº† `datasource_id/product_id/duration` ä¸‰åˆ—ï¼ˆè¿™äº›ä¿¡æ¯åº”å¯ç”± `series_id` åæ¨ï¼‰\n+\n+### 2) å†™å…¥ ohlc_v2 çš„ series_id ç¼–ç ç­–ç•¥ï¼ˆå…³é”®ï¼‰\n+\n+è¯»å–ä¾§ï¼ˆ`libraries/data-ohlc/src/loadOHLC.ts`ï¼‰åœ¨æŸ¥è¯¢ `ohlc_v2` æ—¶ä½¿ç”¨ï¼š\n+\n+- `series_id = encodeOHLCSeriesId(product_id, duration)`ï¼ˆå³ `${product_id}/${duration}`ï¼‰\n+- å…¶ä¸­ `product_id` çº¦å®šä¸º `encodePath(datasource_id, instType, instId)` è¿™ç§â€œå±•å¼€åçš„å¤šæ®µè·¯å¾„â€\n+\n+è€Œ OKX çš„ `publishChannel('ohlc')` å½“å‰æ”¶åˆ°çš„ `series_id` é‡‡ç”¨â€œæŠŠ product_id ä½œä¸ºå•æ®µâ€çš„æ—§ç¼–ç ï¼š\n+\n+- å½¢å¦‚ï¼š`OKX/<product_id_legacy>/<duration>`ï¼Œå…¶ä¸­ `<product_id_legacy>` æœ¬èº«é€šå¸¸æ˜¯ `encodePath(instType, instId)`ï¼Œä¼šè¢«ä½œä¸ºä¸€ä¸ª segment å†™å…¥ï¼ˆå› æ­¤åœ¨ `series_id` ä¸­ä¼šå‡ºç° `%2F`ï¼‰\n+\n+ä¸ºäº†è®©åŒå†™çš„ `ohlc_v2` æ•°æ®èƒ½è¢«ç°æœ‰è¯»å–ä¾§ç›´æ¥å‘½ä¸­ï¼Œæœ¬ä»»åŠ¡å»ºè®®åœ¨å†™å…¥ v2 æ—¶ **å½’ä¸€åŒ–** `series_id`ï¼š\n+\n+1. ä» channel key è§£ææ—§å­—æ®µï¼š\n+   - `[datasource_id, product_id_legacy, duration] = decodePath(series_id_legacy)`\n+   - `[instType, instId] = decodePath(product_id_legacy)`\n+2. æ„é€  v2 ä½¿ç”¨çš„ product_id ä¸ series_idï¼š\n+   - `product_id_v2 = encodePath(datasource_id, instType, instId)`\n+   - `series_id_v2 = `${product_id_v2}/${duration}``\n+\n+ç¤ºä¾‹ï¼ˆä¾¿äº review æ—¶å¿«é€Ÿå¯¹é½ï¼‰ï¼š\n+\n+- legacyï¼š`OKX/SWAP%2FBTC-USDT-SWAP/PT1M`\n+- v2ï¼š`OKX/SWAP/BTC-USDT-SWAP/PT1M`\n+\n+### 3) å­—æ®µæ˜ å°„ï¼ˆIOHLC â†’ ohlc_v2 rowï¼‰\n+\n+å†™å…¥ ohlc_v2 æ—¶ä»…ä¿ç•™è¡¨ä¸­å­˜åœ¨çš„åˆ—ï¼ˆå…¶ä½™åˆ—ä¸¢å¼ƒï¼‰ï¼š\n+\n+| ohlc_v2 åˆ—            | æ¥æºå­—æ®µ                    | å¤‡æ³¨                                                    |\n+| --------------------- | --------------------------- | ------------------------------------------------------- |\n+| `series_id`           | `series_id_v2`              | ä½¿ç”¨ä¸ŠèŠ‚çš„å½’ä¸€åŒ–ç»“æœ                                    |\n+| `created_at`          | `IOHLC.created_at`          | `formatTime(ms)` äº§å‡ºçš„æ—¶é—´å­—ç¬¦ä¸²å¯ç›´æ¥å†™å…¥ TIMESTAMPTZ |\n+| `closed_at`           | `IOHLC.closed_at`           | åŒä¸Š                                                    |\n+| `open/high/low/close` | `IOHLC.open/high/low/close` | å‡ä¸º string                                             |\n+| `volume`              | `IOHLC.volume`              | OKX ç°æœ‰å®ç°ä¸º string                                   |\n+| `open_interest`       | `IOHLC.open_interest`       | OKX ç°æœ‰å®ç°å†™æ­»ä¸º `'0'`                                |\n+\n+### 4) åŒå†™è½ç‚¹ä¸å®ç°å½¢æ€ï¼ˆä¸æ”¹è¡Œä¸ºã€å•è®¢é˜…ï¼‰\n+\n+ç›®æ ‡ï¼šä¿æŒ publishChannel è¿”å›çš„ Observable ç±»å‹ä¸æ•°æ®ä¸å˜ï¼ˆä»ä¸º `IOHLC`ï¼‰ï¼ŒåŒæ—¶åœ¨åŒä¸€è®¢é˜…é“¾è·¯å†…å®ŒæˆåŒå†™ï¼Œé¿å…é¢å¤– `subscribe()` å¯¼è‡´ç”Ÿå‘½å‘¨æœŸä¸å¯æ§ã€‚\n+\n+æ¨èå®ç°å½¢æ€ï¼ˆä¼ªä»£ç ï¼Œreview é€šè¿‡åå†è½ç›˜ï¼‰ï¼š\n+\n+1. å…ˆæŠŠ WS payload map æˆ `IOHLC`ï¼ˆä¿æŒç°çŠ¶ï¼‰\n+2. è¿½åŠ ä¸€æ­¥ mapï¼šç”Ÿæˆ `{ ...ohlc_v2_row, __origin: IOHLC }`\n+3. `writeToSQL({ tableName: 'ohlc_v2', columns: [...], conflictKeys: ['series_id','created_at'] })`\n+   - ä»…æ’å…¥ v2 éœ€è¦çš„åˆ—ï¼Œé¿å…æŠŠ `__origin` ç­‰è¾…åŠ©å­—æ®µå†™è¿› SQL\n+4. `map(x => x.__origin)` è¿˜åŸå› `IOHLC`\n+5. ç»§ç»­ç°æœ‰ `writeToSQL({ tableName: 'ohlc', conflictKeys: ['series_id','created_at'] })`ï¼ˆå¯ä¿ç•™ç°çŠ¶æˆ–é¡ºæ‰‹æŠŠ conflictKeys è°ƒæ•´ä¸ºä¸»é”®é¡ºåºï¼‰\n+\n+### 5) å†²çªé”®/å»é‡ç­–ç•¥\n+\n+- `ohlc_v2`ï¼šä½¿ç”¨ `conflictKeys: ['series_id', 'created_at']`ï¼Œä¸ä¸»é”®ä¸€è‡´ï¼›å†²çªæ—¶æŒ‰ `writeToSQL` é»˜è®¤è¡Œä¸ºæ›´æ–°æ‰€æœ‰åˆ—\n+- `ohlc`ï¼šä¸»é”®åŒä¸º `(series_id, created_at)`ï¼›å½“å‰ OKX ä»£ç ä½¿ç”¨ `['created_at', 'series_id']`ï¼Œå»ºè®®å®ç°æ—¶ç»Ÿä¸€ä¸º `['series_id', 'created_at']` ä»¥åŒ¹é…å…¶å®ƒå†™å…¥ä¾§ä¸è¿ç§»å®šä¹‰\n+\n+### 6) å›æ»š/å¼€å…³ï¼ˆå»ºè®®åœ¨ review æ—¶ç¡®è®¤ï¼‰\n+\n+æœ¬ä»»åŠ¡æœ€ä¿å®ˆçš„å›æ»šæ–¹å¼æ˜¯ç›´æ¥å›é€€ä»£ç æ”¹åŠ¨å³å¯ï¼›å¦‚æœå¸Œæœ›çº¿ä¸Šå¯æ§ï¼Œå¯è€ƒè™‘å¢åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡å¼€å…³ï¼ˆä¾‹å¦‚ `WRITE_OHLC_V2_TO_SQL`ï¼‰ï¼Œé»˜è®¤å¼€å¯/å…³é—­éœ€è¦äº§å“ä¾§å†³å®šã€‚\n+\n+### 7) éªŒè¯æ–¹æ¡ˆï¼ˆæœ€å°å¯å¤ç°ï¼‰\n+\n+å»ºè®®åœ¨å®ç°åè¡¥ä¸€ä¸ªæœ€å°è„šæœ¬/å•æµ‹ï¼ˆä¼˜å…ˆå•æµ‹ï¼‰éªŒè¯ï¼š\n+\n+- æ˜ å°„å‡½æ•°ï¼šlegacy series_id â†’ v2 series_id çš„è½¬æ¢ç¬¦åˆé¢„æœŸï¼ˆè‡³å°‘è¦†ç›– 1 ä¸ª spot + 1 ä¸ª swapï¼‰\n+- åŒå†™åˆ—é›†åˆï¼šç¡®ä¿å†™å…¥ v2 æ—¶ä¸åŒ…å« `datasource_id/product_id/duration` ç­‰æ—§åˆ—\n+\n+---\n+\n+_åˆ›å»ºäº: 2026-01-05 | æœ€åæ›´æ–°: 2026-01-05_\n",
          "codeSnippets": []
        },
        {
          "additions": 42,
          "deletions": 0,
          "path": ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/tasks.md",
          "changeType": "added",
          "patch": "commit 50afccf76fcdf052714625db77d53caa1989e979\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Mon Jan 5 15:01:35 2026 +0800\n\n    feat: æ·»åŠ å¯¹ ohlc_v2 è¡¨çš„åŒå†™æ”¯æŒï¼Œæ›´æ–° publishChannel é€»è¾‘ä»¥å®ç°æ•°æ®åŒæ­¥ (#2471)\n\ndiff --git a/.legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/tasks.md b/.legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/tasks.md\nnew file mode 100644\nindex 000000000..49b03ea7d\n--- /dev/null\n+++ b/.legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/tasks.md\n@@ -0,0 +1,42 @@\n+# OKX OHLCï¼špublishChannel('ohlc') æ¢³ç† + å†™å…¥ ohlc_v2 åŒå†™ - ä»»åŠ¡æ¸…å•\n+\n+## å¿«é€Ÿæ¢å¤\n+\n+**å½“å‰é˜¶æ®µ**: é˜¶æ®µ 4 - éªŒè¯ä¸äº¤æ¥\n+**å½“å‰ä»»åŠ¡**: è¡¥æœ€å°éªŒè¯ï¼šå•æµ‹/è„šæœ¬å¯¹æ¯”åŒä¸€æ‰¹ OHLC åœ¨ä¸¤å¼ è¡¨çš„å­—æ®µå€¼ä¸æ•°é‡ï¼›è¿è¡Œç›¸å…³ package çš„ tsc/æµ‹è¯•ï¼›æ›´æ–° context.md å¿«é€Ÿäº¤æ¥ã€‚\n+**è¿›åº¦**: 4/5 ä»»åŠ¡å®Œæˆ\n+\n+---\n+\n+## é˜¶æ®µ 1: è°ƒç ” âœ… COMPLETE\n+\n+- [x] å…¨ä»“æœç´¢ publishChannel å‘å¸ƒ 'ohlc' çš„ä½ç½®ï¼Œè®°å½•æ¯ä¸ªå‘å¸ƒç‚¹çš„æ¥æºã€channel keyã€payload å­—æ®µã€ä»¥åŠä¸‹æ¸¸æ¶ˆè´¹è€…/å†™å…¥ç‚¹ã€‚ | éªŒæ”¶: context.md ä¸­æœ‰å®Œæ•´æ¸…å•ï¼ˆæ–‡ä»¶è·¯å¾„+å‡½æ•°å+ç®€è¦ payload schemaï¼‰ï¼Œå¹¶æ ‡æ³¨å“ªäº›ä¸ OKX ç›¸å…³ã€å“ªäº›æ˜¯å…¬å…±é“¾è·¯ã€‚\n+- [x] å®šä½ writeToSQL çš„å®ç°ä¸è°ƒç”¨è·¯å¾„ï¼šå“ªäº›åœ°æ–¹æŠŠ OHLC å†™å…¥ SQLã€å†™å…¥å“ªå¼ è¡¨ã€ä¸»é”®/å”¯ä¸€çº¦æŸæ˜¯ä»€ä¹ˆã€‚ | éªŒæ”¶: context.md è®°å½• writeToSQL è°ƒç”¨é“¾ä¸å½“å‰è¡¨ç»“æ„/ç´¢å¼•è¦ç‚¹ï¼Œå¹¶ç¡®è®¤éœ€è¦åŒå†™çš„æ’å…¥ç‚¹ã€‚\n+\n+---\n+\n+## é˜¶æ®µ 2: è®¾è®¡ï¼ˆå…ˆå†™æ–‡æ¡£ï¼Œç­‰å¾… reviewï¼‰ âœ… COMPLETE\n+\n+- [x] é˜…è¯» ohlc_v2 è¡¨ç»“æ„ï¼ˆè¿ç§» SQL/ç±»å‹å®šä¹‰ï¼‰ï¼Œè®¾è®¡ä»ç°æœ‰ OHLC payload â†’ ohlc_v2 å­—æ®µçš„æ˜ å°„ã€æ•°æ®ç±»å‹è½¬æ¢ã€ä»¥åŠå†²çªå¤„ç†ï¼ˆupsert/ignoreï¼‰ã€‚ | éªŒæ”¶: plan.md å†™æ¸…å­—æ®µæ˜ å°„è¡¨ã€å†²çªé”®ã€ç¤ºä¾‹è®°å½•ï¼›åˆ—å‡ºå¾…ç¡®è®¤çš„ä¸ç¡®å®šç‚¹ï¼›å¯ç›´æ¥æ®æ­¤è¿›å…¥å®ç°ã€‚\n+\n+---\n+\n+## é˜¶æ®µ 3: å®ç° âœ… COMPLETE\n+\n+- [x] åœ¨ writeToSQL å†™å…¥ OHLC çš„ä½ç½®å¢åŠ  ohlc_v2 çš„åŒå†™ï¼šä¿æŒåŸè¡¨ä¸å˜ï¼ŒåŒæ—¶å†™å…¥ ohlc_v2ï¼ˆå¿…è¦æ—¶è¡¥é½ encodePath/decodePath ç­‰å·¥å…·ï¼‰ã€‚ | éªŒæ”¶: æ‰€æœ‰ OHLC å†™å…¥éƒ½ä¼šåŒæ—¶è½åˆ°æ—§è¡¨ä¸ ohlc_v2ï¼›åŒå†™å¤±è´¥çš„é”™è¯¯å¤„ç†ç¬¦åˆç°æœ‰æ¨¡å¼ï¼›ä¸ä¼šå½±å“åŸé“¾è·¯ã€‚\n+\n+---\n+\n+## é˜¶æ®µ 4: éªŒè¯ä¸äº¤æ¥ ğŸŸ¡ IN PROGRESS\n+\n+- [ ] è¡¥æœ€å°éªŒè¯ï¼šå•æµ‹/è„šæœ¬å¯¹æ¯”åŒä¸€æ‰¹ OHLC åœ¨ä¸¤å¼ è¡¨çš„å­—æ®µå€¼ä¸æ•°é‡ï¼›è¿è¡Œç›¸å…³ package çš„ tsc/æµ‹è¯•ï¼›æ›´æ–° context.md å¿«é€Ÿäº¤æ¥ã€‚ | éªŒæ”¶: éªŒè¯å‘½ä»¤å¯å¤ç°ï¼›å…³é”®æ˜ å°„è¦†ç›–ï¼›context.md æœ‰å›æ»šå¼€å…³ä¸æ’éšœæŒ‡å¼•ã€‚ â† CURRENT\n+\n+---\n+\n+## å‘ç°çš„æ–°ä»»åŠ¡\n+\n+(æš‚æ— )\n+\n+---\n+\n+_æœ€åæ›´æ–°: 2026-01-05 15:00_\n",
          "codeSnippets": []
        },
        {
          "additions": 47,
          "deletions": 4,
          "path": "apps/vendor-okx/src/public-data/ohlc.ts",
          "changeType": "modified",
          "patch": "commit 50afccf76fcdf052714625db77d53caa1989e979\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Mon Jan 5 15:01:35 2026 +0800\n\n    feat: æ·»åŠ å¯¹ ohlc_v2 è¡¨çš„åŒå†™æ”¯æŒï¼Œæ›´æ–° publishChannel é€»è¾‘ä»¥å®ç°æ•°æ®åŒæ­¥ (#2471)\n\ndiff --git a/apps/vendor-okx/src/public-data/ohlc.ts b/apps/vendor-okx/src/public-data/ohlc.ts\nindex 0b5a568e3..121c7ccca 100644\n--- a/apps/vendor-okx/src/public-data/ohlc.ts\n+++ b/apps/vendor-okx/src/public-data/ohlc.ts\n@@ -5 +5 @@ import { writeToSQL } from '@yuants/sql';\n-import { convertDurationToOffset, decodePath, formatTime } from '@yuants/utils';\n+import { convertDurationToOffset, decodePath, encodePath, formatTime } from '@yuants/utils';\n@@ -53,0 +54,17 @@ const DURATION_TO_OKX_CANDLE_TYPE: Record<string, string> = {\n+type IOHLCV2WriteRow = Pick<\n+  IOHLC,\n+  'series_id' | 'created_at' | 'closed_at' | 'open' | 'high' | 'low' | 'close' | 'volume' | 'open_interest'\n+> & { __origin: IOHLC };\n+\n+const OHLC_V2_WRITE_COLUMNS: Array<keyof IOHLCV2WriteRow> = [\n+  'series_id',\n+  'created_at',\n+  'closed_at',\n+  'open',\n+  'high',\n+  'low',\n+  'close',\n+  'volume',\n+  'open_interest',\n+];\n+\n@@ -120 +137 @@ terminal.channel.publishChannel('ohlc', { pattern: `^OKX/` }, (series_id) => {\n-  const [, instId] = decodePath(product_id);\n+  const [instType, instId] = decodePath(product_id);\n@@ -127,0 +145,3 @@ terminal.channel.publishChannel('ohlc', { pattern: `^OKX/` }, (series_id) => {\n+  if (!instType || !instId) {\n+    throw `invalid product_id: ${product_id}`;\n+  }\n@@ -130,0 +151 @@ terminal.channel.publishChannel('ohlc', { pattern: `^OKX/` }, (series_id) => {\n+  const series_id_v2 = `${encodePath(datasource_id, instType, instId)}/${duration}`;\n@@ -157,0 +179,22 @@ terminal.channel.publishChannel('ohlc', { pattern: `^OKX/` }, (series_id) => {\n+    map(\n+      (x): IOHLCV2WriteRow => ({\n+        __origin: x,\n+        series_id: series_id_v2,\n+        created_at: x.created_at,\n+        closed_at: x.closed_at,\n+        open: x.open,\n+        high: x.high,\n+        low: x.low,\n+        close: x.close,\n+        volume: x.volume,\n+        open_interest: x.open_interest,\n+      }),\n+    ),\n+    writeToSQL({\n+      tableName: 'ohlc_v2',\n+      columns: OHLC_V2_WRITE_COLUMNS,\n+      conflictKeys: ['series_id', 'created_at'],\n+      writeInterval: 1000,\n+      terminal,\n+    }),\n+    map((x) => x.__origin),\n@@ -160 +203 @@ terminal.channel.publishChannel('ohlc', { pattern: `^OKX/` }, (series_id) => {\n-      conflictKeys: ['created_at', 'series_id'],\n+      conflictKeys: ['series_id', 'created_at'],\n@@ -162 +205 @@ terminal.channel.publishChannel('ohlc', { pattern: `^OKX/` }, (series_id) => {\n-      terminal: Terminal.fromNodeEnv(),\n+      terminal,\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "OHLC_V2_WRITE_COLUMNS",
              "code": "const OHLC_V2_WRITE_COLUMNS: Array<keyof IOHLCV2WriteRow> = [\n  'series_id',\n  'created_at',\n  'closed_at',\n  'open',\n  'high',\n  'low',\n  'close',\n  'volume',\n  'open_interest',\n];\n\n  const [instType, instId] = decodePath(product_id);\n  if (!instType || !instId) {\n    throw `invalid product_id: ${product_id}`;",
              "lineStart": 59,
              "lineEnd": 150
            },
            {
              "type": "function",
              "name": "series_id_v2",
              "code": "const series_id_v2 = `${encodePath(datasource_id, instType, instId)}/${duration}`;\n  map(\n    (x): IOHLCV2WriteRow => ({\n      __origin: x,\n      series_id: series_id_v2,\n      created_at: x.created_at,\n      closed_at: x.closed_at,\n      open: x.open,\n      high: x.high,\n      low: x.low,\n      close: x.close,\n      volume: x.volume,\n      open_interest: x.open_interest,\n    }),\n  ),",
              "lineStart": 151,
              "lineEnd": 206
            }
          ]
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx/2026-01-05-06-59.json",
          "changeType": "added",
          "patch": "commit 50afccf76fcdf052714625db77d53caa1989e979\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Mon Jan 5 15:01:35 2026 +0800\n\n    feat: æ·»åŠ å¯¹ ohlc_v2 è¡¨çš„åŒå†™æ”¯æŒï¼Œæ›´æ–° publishChannel é€»è¾‘ä»¥å®ç°æ•°æ®åŒæ­¥ (#2471)\n\ndiff --git a/common/changes/@yuants/vendor-okx/2026-01-05-06-59.json b/common/changes/@yuants/vendor-okx/2026-01-05-06-59.json\nnew file mode 100644\nindex 000000000..2abac0245\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-okx/2026-01-05-06-59.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-okx\",\n+      \"comment\": \"double write ohlc to ohlc_v2 table\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-okx\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "f41c302e49952b56517c44a5f38e5cb37f4943cf",
      "short": "f41c302e4",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2026-01-05 15:03:26 +0800",
      "subject": "chore: bump version (#2472)",
      "conventionalCommit": {
        "type": "chore",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-okx/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit f41c302e49952b56517c44a5f38e5cb37f4943cf\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Jan 5 15:03:26 2026 +0800\n\n    chore: bump version (#2472)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\nindex 8f0f1bf24..34a95d525 100644\n--- a/apps/vendor-okx/CHANGELOG.json\n+++ b/apps/vendor-okx/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.31.10\",\n+      \"tag\": \"@yuants/vendor-okx_v0.31.10\",\n+      \"date\": \"Mon, 05 Jan 2026 07:03:01 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"double write ohlc to ohlc_v2 table\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-okx/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit f41c302e49952b56517c44a5f38e5cb37f4943cf\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Jan 5 15:03:26 2026 +0800\n\n    chore: bump version (#2472)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\nindex c1ab0ff28..588ef7b4a 100644\n--- a/apps/vendor-okx/CHANGELOG.md\n+++ b/apps/vendor-okx/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Sun, 04 Jan 2026 18:08:06 GMT and should not be manually modified.\n+This log was last generated on Mon, 05 Jan 2026 07:03:01 GMT and should not be manually modified.\n+\n+## 0.31.10\n+Mon, 05 Jan 2026 07:03:01 GMT\n+\n+### Patches\n+\n+- double write ohlc to ohlc_v2 table\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-okx/package.json",
          "changeType": "modified",
          "patch": "commit f41c302e49952b56517c44a5f38e5cb37f4943cf\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Jan 5 15:03:26 2026 +0800\n\n    chore: bump version (#2472)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\nindex 99b1054d1..22c3d2a7f 100644\n--- a/apps/vendor-okx/package.json\n+++ b/apps/vendor-okx/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.31.9\",\n+  \"version\": \"0.31.10\",\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-okx/2026-01-05-06-59.json",
          "changeType": "deleted",
          "patch": "commit f41c302e49952b56517c44a5f38e5cb37f4943cf\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Jan 5 15:03:26 2026 +0800\n\n    chore: bump version (#2472)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-okx/2026-01-05-06-59.json b/common/changes/@yuants/vendor-okx/2026-01-05-06-59.json\ndeleted file mode 100644\nindex 2abac0245..000000000\n--- a/common/changes/@yuants/vendor-okx/2026-01-05-06-59.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-okx\",\n-      \"comment\": \"double write ohlc to ohlc_v2 table\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-okx\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx/{main_2026-01-04-18-08.json => main_2026-01-05-07-03.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        }
      ]
    }
  ],
  "analysis": {
    "domains": [
      {
        "name": "APIè¯·æ±‚ä¼˜åŒ–ä¸é™é€Ÿ",
        "commits": [
          "50afccf76"
        ],
        "files": [
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/context.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/plan.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/tasks.md",
          "apps/vendor-okx/src/public-data/ohlc.ts",
          "common/changes/@yuants/vendor-okx/2026-01-05-06-59.json"
        ]
      },
      {
        "name": "å®‰å…¨ä¸é‰´æƒ",
        "commits": [
          "50afccf76"
        ],
        "files": [
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/context.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/plan.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/tasks.md",
          "apps/vendor-okx/src/public-data/ohlc.ts",
          "common/changes/@yuants/vendor-okx/2026-01-05-06-59.json"
        ]
      },
      {
        "name": "è®¢å•ä¸äº¤æ˜“",
        "commits": [
          "50afccf76"
        ],
        "files": [
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/context.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/plan.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/tasks.md",
          "apps/vendor-okx/src/public-data/ohlc.ts",
          "common/changes/@yuants/vendor-okx/2026-01-05-06-59.json"
        ]
      },
      {
        "name": "è´¦æˆ·ç®¡ç†",
        "commits": [
          "50afccf76"
        ],
        "files": [
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/context.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/plan.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/tasks.md",
          "apps/vendor-okx/src/public-data/ohlc.ts",
          "common/changes/@yuants/vendor-okx/2026-01-05-06-59.json"
        ]
      },
      {
        "name": "å¸‚åœºæ•°æ®",
        "commits": [
          "50afccf76"
        ],
        "files": [
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/context.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/plan.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/tasks.md",
          "apps/vendor-okx/src/public-data/ohlc.ts",
          "common/changes/@yuants/vendor-okx/2026-01-05-06-59.json"
        ]
      },
      {
        "name": "é…ç½®ä¸ç¯å¢ƒ",
        "commits": [
          "50afccf76",
          "f41c302e4"
        ],
        "files": [
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/context.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/plan.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/tasks.md",
          "apps/vendor-okx/src/public-data/ohlc.ts",
          "common/changes/@yuants/vendor-okx/2026-01-05-06-59.json",
          "apps/vendor-okx/CHANGELOG.json",
          "apps/vendor-okx/CHANGELOG.md",
          "apps/vendor-okx/package.json",
          "common/changes/@yuants/vendor-okx/{main_2026-01-04-18-08.json => main_2026-01-05-07-03.json}"
        ]
      },
      {
        "name": "æ–‡æ¡£",
        "commits": [
          "50afccf76",
          "f41c302e4"
        ],
        "files": [
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/context.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/plan.md",
          ".legion/tasks/okx-ohlcpublishchannelohlc-ohlc-v2/tasks.md",
          "apps/vendor-okx/src/public-data/ohlc.ts",
          "common/changes/@yuants/vendor-okx/2026-01-05-06-59.json",
          "apps/vendor-okx/CHANGELOG.json",
          "apps/vendor-okx/CHANGELOG.md",
          "apps/vendor-okx/package.json",
          "common/changes/@yuants/vendor-okx/{main_2026-01-04-18-08.json => main_2026-01-05-07-03.json}"
        ]
      }
    ],
    "riskIndicators": [
      {
        "type": "no_tests",
        "severity": "medium",
        "details": "åŒ…å«åŠŸèƒ½æˆ–ä¿®å¤æäº¤ä½†æœªè§æµ‹è¯•æ–‡ä»¶æ›´æ–°",
        "commits": []
      }
    ]
  },
  "metadata": {
    "tool": "git-changes-reporter",
    "version": "3.0.0",
    "repository": "/home/runner/work/Yuan/Yuan"
  }
}