{
  "range": {
    "old": "a126bbb4025a5e602bf4f1f50f6ca225c5f96573",
    "new": "c36262caddee5b4ee9ada840501c81e554b5de6a",
    "label": "a126bbb40..c36262cad",
    "startDate": "2025-12-04",
    "endDate": "2025-12-05",
    "commitCount": 12,
    "generatedAt": "2025-12-05T00:06:04.490Z"
  },
  "contributors": [
    {
      "name": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "commits": 5
    },
    {
      "name": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "commits": 4
    },
    {
      "name": "Siyuan Wang",
      "email": "c.one@thrimbda.com",
      "commits": 3
    }
  ],
  "topDirs": [
    {
      "dir": "apps",
      "fileCount": 49
    },
    {
      "dir": "common",
      "fileCount": 7
    }
  ],
  "commits": [
    {
      "hash": "52651345fdf859c9d0198c4f26f1e50aa2e3ddd0",
      "short": "52651345f",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-04 10:53:32 +0800",
      "subject": "feat: enhance order submission logic to round volume for close positions (#2189)",
      "files": [
        {
          "additions": 3,
          "deletions": 2,
          "path": "apps/vendor-turboflow/src/services/orders/submitOrder.ts",
          "patch": "commit 52651345fdf859c9d0198c4f26f1e50aa2e3ddd0\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Thu Dec 4 10:53:32 2025 +0800\n\n    feat: enhance order submission logic to round volume for close positions (#2189)\n\ndiff --git a/apps/vendor-turboflow/src/services/orders/submitOrder.ts b/apps/vendor-turboflow/src/services/orders/submitOrder.ts\nindex e2bba4841..d7f2d601b 100644\n--- a/apps/vendor-turboflow/src/services/orders/submitOrder.ts\n+++ b/apps/vendor-turboflow/src/services/orders/submitOrder.ts\n@@ -2 +2 @@ import { IOrder } from '@yuants/data-order';\n-import { decodePath, newError } from '@yuants/utils';\n+import { decodePath, newError, roundToStep } from '@yuants/utils';\n@@ -50 +50,2 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\n-  const size = order.order_direction.includes('CLOSE') ? order.volume.toString() : undefined; // 头寸名义价值\n+  // 平仓时，剩余小于 1 USDC 时会自动平仓\n+  const size = order.order_direction.includes('CLOSE') ? Math.floor(order.volume).toString() : undefined; // 头寸名义价值\n"
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json",
          "patch": "commit 52651345fdf859c9d0198c4f26f1e50aa2e3ddd0\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Thu Dec 4 10:53:32 2025 +0800\n\n    feat: enhance order submission logic to round volume for close positions (#2189)\n\ndiff --git a/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json b/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\nnew file mode 100644\nindex 000000000..68d6bcf2d\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-turboflow\",\n+      \"comment\": \"fix close position\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-turboflow\"\n+}\n\\ No newline at end of file\n"
        }
      ]
    },
    {
      "hash": "7737136846486c3710874a554a7e3d3392e4fe1f",
      "short": "773713684",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-04 11:11:56 +0800",
      "subject": "chore: bump version (#2190)",
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-turboflow/CHANGELOG.json",
          "patch": "commit 7737136846486c3710874a554a7e3d3392e4fe1f\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 11:11:56 2025 +0800\n\n    chore: bump version (#2190)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-turboflow/CHANGELOG.json b/apps/vendor-turboflow/CHANGELOG.json\nindex fe3de1a15..530f445eb 100644\n--- a/apps/vendor-turboflow/CHANGELOG.json\n+++ b/apps/vendor-turboflow/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"1.2.9\",\n+      \"tag\": \"@yuants/vendor-turboflow_v1.2.9\",\n+      \"date\": \"Thu, 04 Dec 2025 03:10:55 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"fix close position\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n"
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-turboflow/CHANGELOG.md",
          "patch": "commit 7737136846486c3710874a554a7e3d3392e4fe1f\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 11:11:56 2025 +0800\n\n    chore: bump version (#2190)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-turboflow/CHANGELOG.md b/apps/vendor-turboflow/CHANGELOG.md\nindex 1685f0091..f5095878f 100644\n--- a/apps/vendor-turboflow/CHANGELOG.md\n+++ b/apps/vendor-turboflow/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\n+This log was last generated on Thu, 04 Dec 2025 03:10:55 GMT and should not be manually modified.\n+\n+## 1.2.9\n+Thu, 04 Dec 2025 03:10:55 GMT\n+\n+### Patches\n+\n+- fix close position\n"
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-turboflow/package.json",
          "patch": "commit 7737136846486c3710874a554a7e3d3392e4fe1f\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 11:11:56 2025 +0800\n\n    chore: bump version (#2190)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-turboflow/package.json b/apps/vendor-turboflow/package.json\nindex 7c584f57e..36afa6ee1 100644\n--- a/apps/vendor-turboflow/package.json\n+++ b/apps/vendor-turboflow/package.json\n@@ -3 +3 @@\n-  \"version\": \"1.2.8\",\n+  \"version\": \"1.2.9\",\n"
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json",
          "patch": "commit 7737136846486c3710874a554a7e3d3392e4fe1f\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 11:11:56 2025 +0800\n\n    chore: bump version (#2190)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json b/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\ndeleted file mode 100644\nindex 68d6bcf2d..000000000\n--- a/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-turboflow\",\n-      \"comment\": \"fix close position\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-turboflow\"\n-}\n\\ No newline at end of file\n"
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-turboflow/{main_2025-12-03-18-20.json => main_2025-12-04-03-10.json}",
          "patch": ""
        }
      ]
    },
    {
      "hash": "65358bffab9382823fc92ec877897bb4ee296182",
      "short": "65358bffa",
      "author": "Siyuan Wang",
      "email": "c.one@thrimbda.com",
      "authoredAt": "2025-12-04 14:29:30 +0800",
      "subject": "refactor(vendor-bitget) API integration for futures and spot markets (#2183)",
      "files": [
        {
          "additions": 1,
          "deletions": 0,
          "path": "apps/vendor-bitget/AGENTS.md",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/AGENTS.md b/apps/vendor-bitget/AGENTS.md\nindex 79485d60c..30c06b0a9 100644\n--- a/apps/vendor-bitget/AGENTS.md\n+++ b/apps/vendor-bitget/AGENTS.md\n@@ -93,0 +94 @@\n+- UTA v3 API 已替换旧 spot/margin/futures v2 接口，所有新增/维护需使用 `src/api/private-api.ts` 与 `src/api/public-api.ts` 的 UTA 端点，避免回退旧版。\n"
        },
        {
          "additions": 32,
          "deletions": 2,
          "path": "apps/vendor-bitget/SESSION_NOTES.md",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/SESSION_NOTES.md b/apps/vendor-bitget/SESSION_NOTES.md\nindex 00e2300b1..a7ef4101f 100644\n--- a/apps/vendor-bitget/SESSION_NOTES.md\n+++ b/apps/vendor-bitget/SESSION_NOTES.md\n@@ -101,0 +102,26 @@\n+### 2025-12-04 — Codex\n+\n+- **本轮摘要**：\n+  - product 服务新增对 SPOT 产品的获取与写库，`listProducts` 现在返回 futures + spot 并定期写入 `product` 表。\n+  - 账户服务合并 futures/spot，统一通过 `getAccountAssets` + `getCurrentPosition` 获取资产与持仓，并用 SPOT tickers 估算 `closable_price`。\n+  - 修正 UTA 下单参数：去除 futures 下单的 `reduceOnly`，避免与 `posSide` 并存触发 25238 错误。\n+  - 支持下单 Post-only（MAKER）：当 `order_type === 'MAKER'` 时传 `timeInForce: post_only`；product margin_rate 使用 `maxLeverage`，修正 coin futures `market_id`。\n+- **运行的测试 / 检查**：\n+  - 命令：`npx -y typescript@5.6.3 --noEmit --project apps/vendor-bitget/tsconfig.json`\n+  - 结果：失败（npm 报错 could not determine executable to run；本地未能通过 npx 拉起 tsc）\n+\n+### 2025-12-09 — Codex\n+\n+- **本轮摘要**：\n+  - 全量切换到 UTA v3 API：删除旧版 `api/private-api.ts`、`api/public-api.ts`，用新版 UTA 接口（账户/订单/行情/资金费率/产品）替代并重命名。\n+  - 重构账户、订单、行情服务以适配 UTA：账户配置改用 `getAccountSettings`，持仓/挂单改用 `getCurrentPosition`/`getUnfilledOrders`，下撤改单统一走 `postPlaceOrder`/`postCancelOrder`/`postModifyOrder`，现货资产用 `getAccountFundingAssets`，行情/产品/利率改用 UTA 公共端点。\n+  - 清理根目录 `node_modules`，用 `npx -y node@22.12.0 common/scripts/install-run-rush.js build --to @yuants/vendor-bitget` 通过构建。\n+  - 补充合约账户余额为 position：`services/accounts/futures.ts` 将 UTA 账户资产（USDT 等）映射为 balance position，与持仓列表合并输出。\n+- **修改的文件**：\n+  - 删除 `apps/vendor-bitget/src/api/private-api.ts`, `apps/vendor-bitget/src/api/public-api.ts`；重命名并扩充 UTA 版本。\n+  - 更新 `services/accounts/*`, `services/orders/*`, `services/markets/*` 依赖新的 UTA API。\n+  - `apps/vendor-bitget/SESSION_NOTES.md`, `apps/vendor-bitget/AGENTS.md`（指令同步）。\n+- **运行的测试 / 检查**：\n+  - 命令：`npx -y node@22.12.0 common/scripts/install-run-rush.js build --to @yuants/vendor-bitget`\n+  - 结果：通过\n+\n@@ -325 +351 @@\n-### 2025-11-17 12:21 — Codex\n+### 2025-12-08 — Codex\n@@ -327 +353,5 @@\n-- 草稿内容已结算至各章节，本节暂留空。\n+- 新增 UTA “Get Account Assets” API helper（GET `/api/v3/account/assets`，20/s UID），类型对齐文档，仅返回非零余额；已从 `private-api.ts` 拆出单独文件 `src/api/uta-account-api.ts`，尚未接入账户服务。\n+- 在 `src/api/private-api` 中补充 UTA 资产/交易接口：资金账户资产 `getAccountFundingAssets`、持仓 `getCurrentPosition`、未成交订单 `getUnfilledOrders`、下单 `postPlaceOrder`、改单 `postModifyOrder`、撤单 `postCancelOrder`、账户设置 `getAccountSettings`；保留转账/提现相关接口以兼容 transfer 服务。\n+- 新增 `src/api/public-api` 覆盖 UTA 公共接口：`getInstruments`、`getTickers`、`getOpenInterestV3`、`getCurrentFundingRate`、`getHistoryFundingRate`、`getHistoryCandles`。\n+- 删除老版 `api/private-api.ts`、`api/public-api.ts`，并重构账户/订单/行情服务依赖 UTA 接口。\n+- 运行 `npx tsc --noEmit --project apps/vendor-bitget/tsconfig.json` ✅。\n"
        },
        {
          "additions": 209,
          "deletions": 420,
          "path": "apps/vendor-bitget/src/api/private-api.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/api/private-api.ts b/apps/vendor-bitget/src/api/private-api.ts\nindex 910b6e098..b716b1bd7 100644\n--- a/apps/vendor-bitget/src/api/private-api.ts\n+++ b/apps/vendor-bitget/src/api/private-api.ts\n@@ -11 +11,51 @@ type ApiResponse<T> = {\n-interface IFuturePendingOrder {\n+export interface IUtaAccountAsset {\n+  coin: string;\n+  equity: string;\n+  usdValue: string;\n+  balance: string;\n+  available: string;\n+  debt: string;\n+  locked: string;\n+}\n+\n+export interface IUtaFundingAsset {\n+  coin: string;\n+  balance: string;\n+  available: string;\n+  frozen: string;\n+}\n+\n+export interface IUtaPosition {\n+  category: string;\n+  symbol: string;\n+  marginCoin: string;\n+  holdMode: string;\n+  posSide: string;\n+  marginMode: string;\n+  positionBalance: string;\n+  available: string;\n+  frozen: string;\n+  total: string;\n+  leverage: string;\n+  curRealisedPnl: string;\n+  avgPrice: string;\n+  positionStatus: string;\n+  unrealisedPnl: string;\n+  liquidationPrice: string;\n+  mmr: string;\n+  profitRate: string;\n+  markPrice: string;\n+  breakEvenPrice: string;\n+  totalFunding: string;\n+  openFeeTotal: string;\n+  closeFeeTotal: string;\n+  createdTime: string;\n+  updatedTime: string;\n+}\n+\n+export interface IUtaPendingOrderFeeDetail {\n+  feeCoin: string | null;\n+  fee: string | null;\n+}\n+\n+export interface IUtaPendingOrder {\n@@ -13,0 +64 @@ interface IFuturePendingOrder {\n+  category: string;\n@@ -15,7 +65,0 @@ interface IFuturePendingOrder {\n-  productType: string;\n-  marginCoin: string;\n-  size: string;\n-  filledQty: string;\n-  price: string;\n-  priceAvg: string;\n-  state: string;\n@@ -24,3 +68,11 @@ interface IFuturePendingOrder {\n-  tradeSide?: string;\n-  posSide?: string;\n-  marginMode?: string;\n+  price: string;\n+  qty: string;\n+  amount: string;\n+  cumExecQty: string;\n+  cumExecValue: string;\n+  avgPrice: string;\n+  timeInForce: string;\n+  orderStatus: string;\n+  posSide: string;\n+  holdMode: string;\n+  stpMode?: string;\n@@ -28,3 +80,3 @@ interface IFuturePendingOrder {\n-  createdTime?: string;\n-  cTime?: string;\n-  uTime?: string;\n+  feeDetail: IUtaPendingOrderFeeDetail[];\n+  createdTime: string;\n+  updatedTime: string;\n@@ -33,18 +85,5 @@ interface IFuturePendingOrder {\n-interface ISpotPendingOrder {\n-  orderId?: string;\n-  clientOid?: string;\n-  symbol?: string;\n-  instId?: string;\n-  orderType?: string;\n-  side?: string;\n-  size?: string;\n-  quantity?: string;\n-  baseSz?: string;\n-  baseAmount?: string;\n-  fillSz?: string;\n-  filledQty?: string;\n-  baseFilled?: string;\n-  cTime?: string;\n-  createTime?: string;\n-  createdTime?: string;\n-  price?: string;\n+export interface IUtaSymbolConfig {\n+  category: string;\n+  symbol: string;\n+  marginMode: string;\n+  leverage: string;\n@@ -53,3 +92 @@ interface ISpotPendingOrder {\n-interface IWithdrawalRecord {\n-  orderId: string;\n-  tradeId: string;\n+export interface IUtaCoinConfig {\n@@ -57,9 +94 @@ interface IWithdrawalRecord {\n-  clientOid: string;\n-  type: string;\n-  dest: string;\n-  size: string;\n-  status: string;\n-  fromAddress: string;\n-  toAddress: string;\n-  chain: string;\n-  cTime: string;\n+  leverage: string;\n@@ -68,12 +97,8 @@ interface IWithdrawalRecord {\n-interface IDepositRecord {\n-  orderId: string;\n-  tradeId: string;\n-  coin: string;\n-  type: string;\n-  dest: string;\n-  size: string;\n-  status: string;\n-  fromAddress: string;\n-  toAddress: string;\n-  chain: string;\n-  cTime: string;\n+export interface IUtaAccountSettings {\n+  uid: string;\n+  accountMode: string;\n+  assetMode: string;\n+  holdMode: string;\n+  stpMode: string;\n+  symbolConfigList: IUtaSymbolConfig[];\n+  coinConfigList: IUtaCoinConfig[];\n@@ -83 +108 @@ interface IDepositRecord {\n- * 资产概览\n+ * 获取统一账户资产\n@@ -85,18 +110 @@ interface IDepositRecord {\n- * 限速规则: 1次/1s (Uid)\n- *\n- * https://www.bitget.com/zh-CN/api-doc/common/account/All-Account-Balance\n- */\n-export const getAllAccountBalance = (credential: ICredential) =>\n-  requestPrivate<\n-    ApiResponse<\n-      {\n-        accountType: string;\n-        usdtBalance: string;\n-      }[]\n-    >\n-  >(credential, 'GET', '/api/v2/account/all-account-balance');\n-\n-/**\n- * 获取账户信息\n- *\n- * 限速规则 1次/秒/UID\n+ * 限速规则: 20次/1s (UID)\n@@ -104 +112 @@ export const getAllAccountBalance = (credential: ICredential) =>\n- * 获取账户信息 (需要现货只读或者读写权限)\n+ * 查询账户信息与资产（仅返回非 0 余额）\n@@ -106 +114 @@ export const getAllAccountBalance = (credential: ICredential) =>\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Account-Info\n+ * https://www.bitget.com/zh-CN/api-doc/uta/account/Get-Account\n@@ -108 +116 @@ export const getAllAccountBalance = (credential: ICredential) =>\n-export const getAccountInfo = (credential: ICredential) =>\n+export const getAccountAssets = (credential: ICredential) =>\n@@ -111,9 +119,12 @@ export const getAccountInfo = (credential: ICredential) =>\n-      userId: string;\n-      inviterId: string;\n-      channelCode: string;\n-      channel: string;\n-      ips: string;\n-      authorities: string[];\n-      parentId: number;\n-      traderType: string;\n-      regisTime: string;\n+      accountEquity: string;\n+      usdtEquity: string;\n+      btcEquity: string;\n+      unrealisedPnl: string;\n+      usdtUnrealisedPnl: string;\n+      btcUnrealizedPnl: string;\n+      effEquity: string;\n+      mmr: string;\n+      imr: string;\n+      mgnRatio: string;\n+      positionMgnRatio: string;\n+      assets: IUtaAccountAsset[];\n@@ -121 +132 @@ export const getAccountInfo = (credential: ICredential) =>\n-  >(credential, 'GET', '/api/v2/spot/account/info');\n+  >(credential, 'GET', '/api/v3/account/assets');\n@@ -124 +135 @@ export const getAccountInfo = (credential: ICredential) =>\n- * 获取账户信息列表\n+ * 获取统一账户设置\n@@ -126 +137 @@ export const getAccountInfo = (credential: ICredential) =>\n- * 限速规则: 10次/1s (uid)\n+ * 限速规则: 20次/1s (UID)\n@@ -128 +139 @@ export const getAccountInfo = (credential: ICredential) =>\n- * 查询某产品类型下所有账户信息\n+ * 查询持仓/保证金模式、杠杆等账户配置\n@@ -130 +141 @@ export const getAccountInfo = (credential: ICredential) =>\n- * https://www.bitget.com/zh-CN/api-doc/contract/account/Get-Account-List\n+ * https://www.bitget.com/zh-CN/api-doc/uta/account/Get-Account-Setting\n@@ -132,19 +143,2 @@ export const getAccountInfo = (credential: ICredential) =>\n-export const getFutureAccounts = (credential: ICredential, params: { productType: string }) =>\n-  requestPrivate<\n-    ApiResponse<\n-      {\n-        marginCoin: string;\n-        locked: string;\n-        available: string;\n-        crossedMaxAvailable: string;\n-        isolatedMaxAvailable: string;\n-        maxTransferOut: string;\n-        accountEquity: string;\n-        usdtEquity: string;\n-        btcEquity: string;\n-        crossedRiskRate: string;\n-        unrealizedPL: string;\n-        coupon: string;\n-      }[]\n-    >\n-  >(credential, 'GET', '/api/v2/mix/account/accounts', params);\n+export const getAccountSettings = (credential: ICredential) =>\n+  requestPrivate<ApiResponse<IUtaAccountSettings>>(credential, 'GET', '/api/v3/account/settings');\n@@ -153,2 +147 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\n- * 获取全部合约仓位信息\n- * 5次/S 根据uid限频\n+ * 获取资金账户资产\n@@ -156 +149 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\n- * 返回指定productType当前全部的持仓信息\n+ * 限速规则: 20次/1s (UID)\n@@ -158,3 +151 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\n- * 此接口返回数据可能会在以下场景下出现延迟，建议订阅Websocket监控仓位信息：\n- * 资金费率结算时\n- * 行情波动剧烈\n+ * 仅返回有资产的币种\n@@ -162 +153 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\n- * https://www.bitget.com/zh-CN/api-doc/contract/position/get-all-position\n+ * https://www.bitget.com/zh-CN/api-doc/uta/account/Get-Account-Funding-Assets\n@@ -164,31 +155,7 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\n-export const getAllPositions = (\n-  credential: ICredential,\n-  params: { productType: string; marginCoin: string },\n-) =>\n-  requestPrivate<\n-    ApiResponse<\n-      {\n-        symbol: string;\n-        marginCoin: string;\n-        holdSide: string;\n-        openDelegateSize: string;\n-        marginSize: string;\n-        available: string;\n-        locked: string;\n-        total: string;\n-        leverage: string;\n-        achievedProfits: string;\n-        openPriceAvg: string;\n-        marginMode: string;\n-        posMode: string;\n-        unrealizedPL: string;\n-        liquidationPrice: string;\n-        keepMarginRate: string;\n-        markPrice: string;\n-        breakEvenPrice: string;\n-        totalFee: string;\n-        deductedFee: string;\n-        cTime: string;\n-      }[]\n-    >\n-  >(credential, 'GET', '/api/v2/mix/position/all-position', params);\n+export const getAccountFundingAssets = (credential: ICredential, params?: { coin?: string }) =>\n+  requestPrivate<ApiResponse<IUtaFundingAsset[]>>(\n+    credential,\n+    'GET',\n+    '/api/v3/account/funding-assets',\n+    params,\n+  );\n@@ -197 +164 @@ export const getAllPositions = (\n- * 获取合约未完成订单列表\n+ * 查询持仓\n@@ -199 +166 @@ export const getAllPositions = (\n- * 限速规则: 10次/1s (UID)\n+ * 限速规则: 20次/1s (UID)\n@@ -201 +168 @@ export const getAllPositions = (\n- * https://www.bitget.com/zh-CN/api-doc/contract/trade/Get-Orders-Pending\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Get-Position\n@@ -203 +170 @@ export const getAllPositions = (\n-export const getFutureOrdersPending = (\n+export const getCurrentPosition = (\n@@ -205,11 +172 @@ export const getFutureOrdersPending = (\n-  params: {\n-    productType: string;\n-    symbol?: string;\n-    marginCoin?: string;\n-    isPlan?: string;\n-    orderType?: string;\n-    startTime?: string;\n-    endTime?: string;\n-    pageSize?: string;\n-    lastEndId?: string;\n-  },\n+  params: { category: string; symbol?: string; posSide?: string },\n@@ -219,3 +176 @@ export const getFutureOrdersPending = (\n-      nextFlag: boolean;\n-      endId: string;\n-      orderList: IFuturePendingOrder[];\n+      list: IUtaPosition[];\n@@ -223 +178 @@ export const getFutureOrdersPending = (\n-  >(credential, 'GET', '/api/v2/mix/order/orders-pending', params);\n+  >(credential, 'GET', '/api/v3/position/current-position', params);\n@@ -226 +181 @@ export const getFutureOrdersPending = (\n- * 获取现货未完成订单\n+ * 查询未成交订单\n@@ -228 +183 @@ export const getFutureOrdersPending = (\n- * 限速规则 20次/1s (UID)\n+ * 限速规则: 20次/1s (UID)\n@@ -230 +185 @@ export const getFutureOrdersPending = (\n- * https://www.bitget.com/zh-CN/api-doc/spot/trade/Get-Unfilled-Orders\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Get-Order-Pending\n@@ -232 +187 @@ export const getFutureOrdersPending = (\n-export const getSpotOrdersPending = (\n+export const getUnfilledOrders = (\n@@ -234,0 +190 @@ export const getSpotOrdersPending = (\n+    category?: string;\n@@ -238 +193,0 @@ export const getSpotOrdersPending = (\n-    idLessThan?: string;\n@@ -240,4 +195 @@ export const getSpotOrdersPending = (\n-    orderId?: string;\n-    tpslType?: string;\n-    requestTime?: string;\n-    receiveWindow?: string;\n+    cursor?: string;\n@@ -246,6 +198,6 @@ export const getSpotOrdersPending = (\n-  requestPrivate<ApiResponse<ISpotPendingOrder[]>>(\n-    credential,\n-    'GET',\n-    '/api/v2/spot/trade/unfilled-orders',\n-    params,\n-  );\n+  requestPrivate<\n+    ApiResponse<{\n+      list: IUtaPendingOrder[];\n+      cursor?: string;\n+    }>\n+  >(credential, 'GET', '/api/v3/trade/unfilled-orders', params);\n@@ -256,3 +208 @@ export const getSpotOrdersPending = (\n- * 普通用户:限速10次/秒，根据uid限频\n- *\n- * 跟单交易员:限速1次/秒，根据uid限频\n+ * 限速规则: 10次/1s (UID)\n@@ -260 +210 @@ export const getSpotOrdersPending = (\n- * https://www.bitget.com/zh-CN/api-doc/contract/trade/Place-Order\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Place-Order\n@@ -262 +212 @@ export const getSpotOrdersPending = (\n-export const postFuturePlaceOrder = (\n+export const postPlaceOrder = (\n@@ -264,0 +215 @@ export const postFuturePlaceOrder = (\n+    category: string;\n@@ -266,5 +217 @@ export const postFuturePlaceOrder = (\n-    productType: string;\n-    marginMode: string;\n-    marginCoin: string;\n-    size: string;\n-    price?: string;\n+    qty: string;\n@@ -272 +218,0 @@ export const postFuturePlaceOrder = (\n-    tradeSide?: string;\n@@ -274 +220,3 @@ export const postFuturePlaceOrder = (\n-    force?: string;\n+    price?: string;\n+    timeInForce?: string;\n+    posSide?: string;\n@@ -277,2 +225,9 @@ export const postFuturePlaceOrder = (\n-    presetStopSurplusPrice?: string;\n-    presetStopLossPrice?: string;\n+    stpMode?: string;\n+    tpTriggerBy?: string;\n+    slTriggerBy?: string;\n+    takeProfit?: string;\n+    stopLoss?: string;\n+    tpOrderType?: string;\n+    slOrderType?: string;\n+    tpLimitPrice?: string;\n+    slLimitPrice?: string;\n@@ -284 +239 @@ export const postFuturePlaceOrder = (\n-    '/api/v2/mix/order/place-order',\n+    '/api/v3/trade/place-order',\n@@ -291 +246,19 @@ export const postFuturePlaceOrder = (\n- * 限速规则: 10次/1s\n+ * 限速规则: 10次/1s (UID)\n+ *\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Cancel-Order\n+ */\n+export const postCancelOrder = (\n+  credential: ICredential,\n+  params: { orderId?: string; clientOid?: string; category?: string },\n+) =>\n+  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\n+    credential,\n+    'POST',\n+    '/api/v3/trade/cancel-order',\n+    params,\n+  );\n+\n+/**\n+ * 改单\n+ *\n+ * 限速规则: 10次/1s (UID)\n@@ -293 +266 @@ export const postFuturePlaceOrder = (\n- * https://www.bitget.com/zh-CN/api-doc/contract/trade/Cancel-Order\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Modify-Order\n@@ -295 +268 @@ export const postFuturePlaceOrder = (\n-export const postFutureCancelOrder = (\n+export const postModifyOrder = (\n@@ -298,3 +270,0 @@ export const postFutureCancelOrder = (\n-    symbol: string;\n-    productType: string;\n-    marginCoin?: string;\n@@ -302,0 +273,5 @@ export const postFutureCancelOrder = (\n+    qty?: string;\n+    price?: string;\n+    autoCancel?: string;\n+    symbol?: string;\n+    category?: string;\n@@ -308 +283 @@ export const postFutureCancelOrder = (\n-    '/api/v2/mix/order/cancel-order',\n+    '/api/v3/trade/modify-order',\n@@ -311,0 +287,29 @@ export const postFutureCancelOrder = (\n+interface IWithdrawalRecord {\n+  orderId: string;\n+  tradeId: string;\n+  coin: string;\n+  clientOid: string;\n+  type: string;\n+  dest: string;\n+  size: string;\n+  status: string;\n+  fromAddress: string;\n+  toAddress: string;\n+  chain: string;\n+  cTime: string;\n+}\n+\n+interface IDepositRecord {\n+  orderId: string;\n+  tradeId: string;\n+  coin: string;\n+  type: string;\n+  dest: string;\n+  size: string;\n+  status: string;\n+  fromAddress: string;\n+  toAddress: string;\n+  chain: string;\n+  cTime: string;\n+}\n+\n@@ -313,4 +316,0 @@ export const postFutureCancelOrder = (\n- * 划转\n- *\n- * 限速规则 10次/1s (UID)\n- *\n@@ -318,2 +317,0 @@ export const postFutureCancelOrder = (\n- *\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Wallet-Transfer\n@@ -341,12 +338,0 @@ export const postTransfer = (\n- *\n- * 限速规则 20次/1s (UID)\n- *\n- * 子母账户资产划转，该接口支持的划转类型包括\n- *\n- * 母账户转子账户（仅母账户APIKey有权限）\n- * 子账户转母账户（仅母账户APIKey有权限）\n- * 子账户转子账户（仅母账户APIKey有权限，并要求发起与接收方子账户归属于同一母账户）\n- * 子账户内部划转（仅母账户APIKey有权限，并要求发起与接收方子账户为同一子账户）\n- * 请求参数中的转入及转出账户UID须为母子/兄弟关系，且所有转账操作均只有母账户才有操作权限\n- *\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Sub-Transfer\n@@ -376,6 +361,0 @@ export const postSubAccountTransfer = (\n- *\n- * 限速规则 5次/1s (UID)\n- *\n- * 提币接口 包括链上提币和内部提币。(需要在网页端添加地址到地址簿中)\n- *\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Wallet-Withdrawal\n@@ -407,6 +386,0 @@ export const postWithdraw = (\n- *\n- * 限速规则 10 次/1s (UID)\n- *\n- * 获取当前账号充币地址\n- *\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Deposit-Address\n@@ -427,6 +400,0 @@ export const getDepositAddress = (credential: ICredential, params: { coin: strin\n- *\n- * 限速规则 10次/1s (UID)\n- *\n- * 获取提币记录\n- *\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Withdraw-Record\n@@ -455,6 +422,0 @@ export const getWithdrawalRecords = (\n- *\n- * 限速规则 10次/1s (UID)\n- *\n- * 获取充币记录(不包含法币充值)\n- *\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Deposit-Record\n@@ -481,51 +442,0 @@ export const getDepositRecords = (\n- * 获取账户现货资产\n- *\n- * 限速规则 10次/1s (UID)\n- *\n- * 获取账户币种资产\n- *\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Account-Assets\n- */\n-export const getSpotAssets = (credential: ICredential, params?: { coin?: string; assetType?: string }) =>\n-  requestPrivate<\n-    ApiResponse<\n-      {\n-        coin: string;\n-        available: string;\n-        frozen: string;\n-        locked: string;\n-        limitAvailable: string;\n-        uTime: string;\n-      }[]\n-    >\n-  >(credential, 'GET', '/api/v2/spot/account/assets', params);\n-\n-/**\n- * 获取所有子账户现货资产\n- *\n- * 限速规则 10次/1s (UID)\n- *\n- * 获取所有子账户现货资产。仅限非代理商(非ND Broker)用户调用。\n- *\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Subaccount-Assets\n- */\n-export const getSubAccountSpotAssets = (credential: ICredential) =>\n-  requestPrivate<\n-    ApiResponse<{\n-      userId: string;\n-      assetsList: {\n-        coin: string;\n-        available: string;\n-        limitAvailable: string;\n-        frozen: string;\n-        locked: string;\n-        uTime: string;\n-      }[];\n-    }>\n-  >(credential, 'GET', '/api/v2/spot/account/subaccount-assets');\n-\n-/**\n- * 查询子账户列表\n- *\n- * 限速规则 1次/1s (UID)\n- *\n@@ -533,2 +443,0 @@ export const getSubAccountSpotAssets = (credential: ICredential) =>\n- *\n- * https://www.bitget.com/zh-CN/api-doc/common/vsubaccount/Get-Virtual-Subaccount-List\n@@ -551,120 +459,0 @@ export const getVirtualSubAccountList = (\n-/**\n- * 获取财务记录\n- *\n- * 限速规则 20次/1s (UID)\n- *\n- * 获取财务记录\n- *\n- * https://www.bitget.com/zh-CN/api-doc/uta/account/Get-Financial-Records\n- */\n-export const getAccountFinancialRecord = (\n-  credential: ICredential,\n-  params?: {\n-    category: string;\n-    coin?: string;\n-    type?: string;\n-    startTime?: string;\n-    endTime?: string;\n-    limit?: string;\n-    cursor?: string;\n-  },\n-) => requestPrivate<ApiResponse<unknown>>(credential, 'GET', '/api/v3/account/financial-records', params);\n-\n-/**\n- * 现货下单\n- *\n- * 限速规则: 20次/1s (UID)\n- *\n- * https://www.bitget.com/zh-CN/api-doc/spot/trade/Place-Order\n- */\n-export const postSpotPlaceOrder = (\n-  credential: ICredential,\n-  params: {\n-    symbol: string;\n-    side: string;\n-    orderType: string;\n-    force?: string;\n-    price?: string;\n-    quantity?: string;\n-    clientOid?: string;\n-  },\n-) =>\n-  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\n-    credential,\n-    'POST',\n-    '/api/v2/spot/trade/place-order',\n-    params,\n-  );\n-\n-/**\n- * 现货撤单\n- *\n- * 限速规则: 20次/1s (UID)\n- *\n- * https://www.bitget.com/zh-CN/api-doc/spot/trade/Cancel-Order\n- */\n-export const postSpotCancelOrder = (\n-  credential: ICredential,\n-  params: {\n-    symbol: string;\n-    orderId?: string;\n-    clientOid?: string;\n-  },\n-) =>\n-  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\n-    credential,\n-    'POST',\n-    '/api/v2/spot/trade/cancel-order',\n-    params,\n-  );\n-\n-/**\n- * 现货改单 (Cancel-Replace)\n- *\n- * 限速规则: 20次/1s (UID)\n- *\n- * https://www.bitget.com/zh-CN/api-doc/spot/trade/cancel-replace-order\n- */\n-export const postSpotCancelReplaceOrder = (\n-  credential: ICredential,\n-  params: {\n-    symbol: string;\n-    orderId?: string;\n-    clientOid?: string;\n-    newSize?: string;\n-    newPrice?: string;\n-    newClientOid?: string;\n-  },\n-) =>\n-  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\n-    credential,\n-    'POST',\n-    '/api/v2/spot/trade/cancel-replace-order',\n-    params,\n-  );\n-\n-/**\n- * 合约改单\n- *\n- * 限速规则: 20次/1s (UID)\n- *\n- * https://www.bitget.com/zh-CN/api-doc/contract/trade/Modify-Order\n- */\n-export const postFutureModifyOrder = (\n-  credential: ICredential,\n-  params: {\n-    symbol: string;\n-    productType: string;\n-    orderId?: string;\n-    clientOid?: string;\n-    newSize?: string;\n-    newPrice?: string;\n-  },\n-) =>\n-  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\n-    credential,\n-    'POST',\n-    '/api/v2/mix/order/modify-order',\n-    params,\n-  );\n-\n"
        },
        {
          "additions": 99,
          "deletions": 195,
          "path": "apps/vendor-bitget/src/api/public-api.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/api/public-api.ts b/apps/vendor-bitget/src/api/public-api.ts\nindex 9a3f8b0c9..3101848ad 100644\n--- a/apps/vendor-bitget/src/api/public-api.ts\n+++ b/apps/vendor-bitget/src/api/public-api.ts\n@@ -10 +10,2 @@ type ApiResponse<T> = {\n-export interface IMixMarketContract {\n+export interface IUtaInstrument {\n+  category: string;\n@@ -11,0 +13 @@ export interface IMixMarketContract {\n+  isRwa?: string;\n@@ -16,51 +18,5 @@ export interface IMixMarketContract {\n-  feeRateUpRatio: string;\n-  makerFeeRate: string;\n-  takerFeeRate: string;\n-  openCostUpRatio: string;\n-  supportMarginCoins: string[];\n-  minTradeNum: string;\n-  priceEndStep: string;\n-  volumePlace: string;\n-  pricePlace: string;\n-  sizeMultiplier: string;\n-  symbolType: string;\n-  minTradeUSDT: string;\n-  maxSymbolOrderNum: string;\n-  maxProductOrderNum: string;\n-  maxPositionNum: string;\n-  symbolStatus: string;\n-  offTime: string;\n-  limitOpenTime: string;\n-  deliveryTime: string;\n-  deliveryStartTime: string;\n-  deliveryPeriod: string;\n-  launchTime: string;\n-  fundInterval: string;\n-  minLever: string;\n-  maxLever: string;\n-  posLimit: string;\n-  maintainTime: string;\n-  openTime: string;\n-  maxMarketOrderQty: string;\n-  maxOrderQty: string;\n-  isRwa: string;\n-}\n-\n-export interface IMixMarketSymbol {\n-  symbol: string;\n-  baseCoin: string;\n-  quoteCoin: string;\n-}\n-\n-export interface IMarginCurrency {\n-  symbol: string;\n-  baseCoin: string;\n-  quoteCoin: string;\n-  maxCrossedLeverage: string;\n-  maxIsolatedLeverage: string;\n-  warningRiskRatio: string;\n-  liquidationRiskRatio: string;\n-  minTradeAmount: string;\n-  maxTradeAmount: string;\n-  takerFeeRate: string;\n-  makerFeeRate: string;\n+  feeRateUpRatio?: string;\n+  openCostUpRatio?: string;\n+  minOrderQty?: string;\n+  maxOrderQty?: string;\n+  minOrderAmount?: string;\n@@ -69,3 +25,7 @@ export interface IMarginCurrency {\n-  minTradeUSDT: string;\n-  isBorrowable: boolean;\n-  userMinBorrow: string;\n+  quotePrecision?: string;\n+  priceMultiplier?: string;\n+  quantityMultiplier?: string;\n+  symbolType?: string;\n+  maxSymbolOrderNum?: string;\n+  maxProductOrderNum?: string;\n+  maxPositionNum?: string;\n@@ -73,3 +33,19 @@ export interface IMarginCurrency {\n-  isIsolatedBaseBorrowable: boolean;\n-  isIsolatedQuoteBorrowable: boolean;\n-  isCrossBorrowable: boolean;\n+  offTime?: string;\n+  limitOpenTime?: string;\n+  deliveryTime?: string;\n+  deliveryStartTime?: string;\n+  deliveryPeriod?: string;\n+  launchTime?: string;\n+  fundInterval?: string;\n+  minLeverage?: string;\n+  maxLeverage?: string;\n+  maintainTime?: string;\n+  maxMarketOrderQty?: string;\n+  isIsolatedBaseBorrowable?: string;\n+  isIsolatedQuotedBorrowable?: string;\n+  warningRiskRatio?: string;\n+  liquidationRiskRatio?: string;\n+  maxCrossedLeverage?: string;\n+  maxIsolatedLeverage?: string;\n+  userMinBorrow?: string;\n+  areaSymbol?: string;\n@@ -78 +54,2 @@ export interface IMarginCurrency {\n-export interface IFutureMarketTicker {\n+export interface IUtaTicker {\n+  category: string;\n@@ -80,10 +57,18 @@ export interface IFutureMarketTicker {\n-  productType: string;\n-  lastPr: string;\n-  askPr: string;\n-  askSz: string;\n-  bidPr: string;\n-  bidSz: string;\n-  fundingRate: string;\n-  holdingAmount: string;\n-  high24h?: string;\n-  low24h?: string;\n+  lastPrice: string;\n+  openPrice24h: string;\n+  highPrice24h: string;\n+  lowPrice24h: string;\n+  ask1Price: string;\n+  bid1Price: string;\n+  bid1Size: string;\n+  ask1Size: string;\n+  price24hPcnt: string;\n+  volume24h: string;\n+  turnover24h: string;\n+  indexPrice?: string;\n+  markPrice?: string;\n+  fundingRate?: string;\n+  openInterest?: string;\n+  deliveryStartTime?: string;\n+  deliveryTime?: string;\n+  deliveryStatus?: string;\n@@ -93 +78 @@ export interface IFutureMarketTicker {\n-export interface IFundingTimeInfo {\n+export interface IUtaOpenInterestRow {\n@@ -95,3 +80 @@ export interface IFundingTimeInfo {\n-  productType: string;\n-  nextFundingTime: string;\n-  ratePeriod: string;\n+  openInterest: string;\n@@ -100 +83 @@ export interface IFundingTimeInfo {\n-export interface IHistoricalFundingRate {\n+export interface IUtaCurrentFundingRate {\n@@ -102 +84,0 @@ export interface IHistoricalFundingRate {\n-  productType: string;\n@@ -104,2 +86,4 @@ export interface IHistoricalFundingRate {\n-  fundingTime: string;\n-  ratePeriod: string;\n+  fundingRateInterval: string;\n+  nextUpdate: string;\n+  minFundingRate: string;\n+  maxFundingRate: string;\n@@ -108,34 +92 @@ export interface IHistoricalFundingRate {\n-/**\n- * 获取合约信息\n- *\n- * 20次/S 根据ip限频\n- *\n- * 获取合约详情信息。\n- *\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-All-Symbols-Contracts\n- */\n-export const getMarketContracts = (params: {\n-  symbol?: string;\n-  productType: string;\n-}): Promise<ApiResponse<IMixMarketContract[]>> =>\n-  requestPublic<ApiResponse<IMixMarketContract[]>>('GET', '/api/v2/mix/market/contracts', params);\n-\n-/**\n- * 获取支持杠杆的所有交易对\n- * 限速规则 10次/1s (IP)\n- *\n- * https://www.bitget.com/zh-CN/api-doc/margin/common/support-currencies\n- */\n-export const getMarginCurrencies = (): Promise<ApiResponse<IMarginCurrency[]>> =>\n-  requestPublic<ApiResponse<IMarginCurrency[]>>('GET', '/api/v2/margin/currencies');\n-\n-/**\n- * 获取单个交易对行情\n- *\n- * 限速规则: 20次/1s (IP)\n- *\n- * 获取指定产品类型下，单个交易对的行情数据\n- *\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-Ticker\n- */\n-export const getFutureMarketTicker = (params: {\n+export interface IUtaHistoricalFundingRate {\n@@ -143,3 +94,3 @@ export const getFutureMarketTicker = (params: {\n-  productType: string;\n-}): Promise<ApiResponse<IFutureMarketTicker>> =>\n-  requestPublic<ApiResponse<IFutureMarketTicker>>('GET', '/api/v2/mix/market/ticker', params);\n+  fundingRate: string;\n+  fundingRateTimestamp: string;\n+}\n@@ -148 +99 @@ export const getFutureMarketTicker = (params: {\n- * 获取全部交易对行情\n+ * 获取交易产品\n@@ -152,3 +103 @@ export const getFutureMarketTicker = (params: {\n- * 获取指定产品类型下，全部交易对的行情数据\n- *\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-All-Symbol-Ticker\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Instruments\n@@ -156,4 +105,2 @@ export const getFutureMarketTicker = (params: {\n-export const getFutureMarketTickers = (params: {\n-  productType: string;\n-}): Promise<ApiResponse<IFutureMarketTicker[]>> =>\n-  requestPublic<ApiResponse<IFutureMarketTicker[]>>('GET', '/api/v2/mix/market/tickers', params);\n+export const getInstruments = (params: { category: string; symbol?: string }) =>\n+  requestPublic<ApiResponse<IUtaInstrument[]>>('GET', '/api/v3/market/instruments', params);\n@@ -162 +109 @@ export const getFutureMarketTickers = (params: {\n- * 获取平台总持仓量\n+ * 获取行情 Tickers\n@@ -166,3 +113 @@ export const getFutureMarketTickers = (params: {\n- * 获取某交易对在平台的总持仓量\n- *\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-Open-Interest\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Tickers\n@@ -170,9 +115,2 @@ export const getFutureMarketTickers = (params: {\n-export const getOpenInterest = (params: {\n-  symbol: string;\n-  productType: string;\n-}): Promise<ApiResponse<{ symbol: string; amount: string }[]>> =>\n-  requestPublic<ApiResponse<{ symbol: string; amount: string }[]>>(\n-    'GET',\n-    '/api/v2/mix/market/open-interest',\n-    params,\n-  );\n+export const getTickers = (params: { category: string; symbol?: string }) =>\n+  requestPublic<ApiResponse<IUtaTicker[]>>('GET', '/api/v3/market/tickers', params);\n@@ -181 +119 @@ export const getOpenInterest = (params: {\n- * 获取下次资金费结算时间\n+ * 获取持仓量\n@@ -185,3 +123 @@ export const getOpenInterest = (params: {\n- * 获取合约下一次的结算时间以及该合约的结算周期\n- *\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-Symbol-Next-Funding-Time\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Get-Open-Interest\n@@ -189,5 +125,2 @@ export const getOpenInterest = (params: {\n-export const getNextFundingTime = (params: {\n-  symbol: string;\n-  productType: string;\n-}): Promise<ApiResponse<IFundingTimeInfo[]>> =>\n-  requestPublicWithFlowControl<ApiResponse<IFundingTimeInfo[]>>(\n+export const getOpenInterestV3 = (params: { category: string; symbol?: string }) =>\n+  requestPublic<ApiResponse<{ list: IUtaOpenInterestRow[]; ts: string }>>(\n@@ -195,2 +128 @@ export const getNextFundingTime = (params: {\n-    '/api/v2/mix/market/funding-time',\n-    { period: 1000, limit: 20 },\n+    '/api/v3/market/open-interest',\n@@ -201 +133 @@ export const getNextFundingTime = (params: {\n- * 获取历史资金费率\n+ * 获取当前资金费率\n@@ -205,3 +137 @@ export const getNextFundingTime = (params: {\n- * 获取合约的历史资金费率\n- *\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-History-Funding-Rate\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Get-Current-Funding-Rate\n@@ -209,12 +139,2 @@ export const getNextFundingTime = (params: {\n-export const getHistoricalFundingRate = (params: {\n-  symbol: string;\n-  productType: string;\n-  pageSize?: string;\n-  pageNo?: string;\n-}): Promise<ApiResponse<IHistoricalFundingRate[]>> =>\n-  requestPublicWithFlowControl<ApiResponse<IHistoricalFundingRate[]>>(\n-    'GET',\n-    '/api/v2/mix/market/history-fund-rate',\n-    { period: 1000, limit: 20 },\n-    params,\n-  );\n+export const getCurrentFundingRate = (params: { symbol: string }) =>\n+  requestPublic<ApiResponse<IUtaCurrentFundingRate[]>>('GET', '/api/v3/market/current-fund-rate', params);\n@@ -223 +143 @@ export const getHistoricalFundingRate = (params: {\n- * 获取合约 K 线数据\n+ * 获取历史资金费率\n@@ -227 +147 @@ export const getHistoricalFundingRate = (params: {\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-Candle-Data\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Get-History-Funding-Rate\n@@ -229 +149,2 @@ export const getHistoricalFundingRate = (params: {\n-export const getMixCandles = (params: {\n+export const getHistoryFundingRate = (params: {\n+  category: string;\n@@ -231,4 +152 @@ export const getMixCandles = (params: {\n-  productType: string;\n-  granularity: string;\n-  startTime?: string;\n-  endTime?: string;\n+  cursor?: string;\n@@ -236,2 +154,2 @@ export const getMixCandles = (params: {\n-}): Promise<ApiResponse<[string, string, string, string, string, string, string][]>> =>\n-  requestPublic<ApiResponse<[string, string, string, string, string, string, string][]>>(\n+}) =>\n+  requestPublicWithFlowControl<ApiResponse<{ resultList: IUtaHistoricalFundingRate[] }>>(\n@@ -239 +157,2 @@ export const getMixCandles = (params: {\n-    '/api/v2/mix/market/candles',\n+    '/api/v3/market/history-fund-rate',\n+    { period: 1000, limit: 20 },\n@@ -244 +163 @@ export const getMixCandles = (params: {\n- * 获取现货 K 线数据\n+ * 获取历史 K 线\n@@ -248 +167 @@ export const getMixCandles = (params: {\n- * https://www.bitget.com/zh-CN/api-doc/spot/market/Get-Candle-Data\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Get-History-Candle-Data\n@@ -250 +169,2 @@ export const getMixCandles = (params: {\n-export const getSpotCandles = (params: {\n+export const getHistoryCandles = (params: {\n+  category: string;\n@@ -252 +172 @@ export const getSpotCandles = (params: {\n-  granularity: string;\n+  interval: string;\n@@ -254,0 +175 @@ export const getSpotCandles = (params: {\n+  type?: string;\n@@ -256 +177 @@ export const getSpotCandles = (params: {\n-}): Promise<ApiResponse<[string, string, string, string, string, string, string][]>> =>\n+}) =>\n@@ -259 +180 @@ export const getSpotCandles = (params: {\n-    '/api/v2/spot/market/candles',\n+    '/api/v3/market/history-candles',\n@@ -262,17 +182,0 @@ export const getSpotCandles = (params: {\n-\n-export interface ISpotSymbol {\n-  symbol: string;\n-  baseCoin: string;\n-  quoteCoin: string;\n-  status: string;\n-}\n-\n-/**\n- * 获取所有现货交易对\n- *\n- * 限速规则: 20次/1s (IP)\n- *\n- * https://www.bitget.com/zh-CN/api-doc/spot/market/Get-Symbols\n- */\n-export const getSpotSymbols = (): Promise<ApiResponse<ISpotSymbol[]>> =>\n-  requestPublic<ApiResponse<ISpotSymbol[]>>('GET', '/api/v2/spot/public/symbols');\n"
        },
        {
          "additions": 59,
          "deletions": 0,
          "path": "apps/vendor-bitget/src/services/accounts/account.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/accounts/account.ts b/apps/vendor-bitget/src/services/accounts/account.ts\nnew file mode 100644\nindex 000000000..27c6fca03\n--- /dev/null\n+++ b/apps/vendor-bitget/src/services/accounts/account.ts\n@@ -0,0 +1,59 @@\n+import { IPosition, makeSpotPosition } from '@yuants/data-account';\n+import { encodePath } from '@yuants/utils';\n+import { getAccountAssets, getCurrentPosition, IUtaPosition } from '../../api/private-api';\n+import { getTickers } from '../../api/public-api';\n+import { ICredential } from '../../api/types';\n+\n+const mapDerivativePosition = (position: IUtaPosition): IPosition => ({\n+  position_id: `${position.symbol}-${position.posSide}`,\n+  datasource_id: 'BITGET',\n+  product_id: encodePath('BITGET', position.category, position.symbol),\n+  direction: position.posSide === 'long' ? 'LONG' : 'SHORT',\n+  volume: +position.total,\n+  free_volume: +(position.available ?? 0),\n+  position_price: +position.avgPrice,\n+  closable_price: +(position.markPrice ?? 0),\n+  floating_profit: +(position.unrealisedPnl ?? 0),\n+  valuation: +position.total * +(position.markPrice ?? 0),\n+});\n+\n+export const getAccountInfo = async (credential: ICredential): Promise<IPosition[]> => {\n+  const categories = ['USDT-FUTURES', 'COIN-FUTURES'];\n+  const [assetsRes, positionsResList, spotTickersRes] = await Promise.all([\n+    getAccountAssets(credential),\n+    Promise.all(categories.map((category) => getCurrentPosition(credential, { category }))),\n+    getTickers({ category: 'SPOT' }),\n+  ]);\n+\n+  if (assetsRes.msg !== 'success') {\n+    throw new Error(assetsRes.msg);\n+  }\n+  if (spotTickersRes.msg !== 'success') {\n+    throw new Error(spotTickersRes.msg);\n+  }\n+\n+  const spotPriceMap = new Map<string, number>(\n+    (spotTickersRes.data ?? []).map((ticker) => [ticker.symbol, Number(ticker.lastPrice)]),\n+  );\n+\n+  const derivativePositions = positionsResList.flatMap((res, idx) => {\n+    if (res.msg !== 'success') {\n+      throw new Error(res.msg);\n+    }\n+    const category = categories[idx];\n+    return (res.data?.list ?? []).map((position) => mapDerivativePosition({ ...position, category }));\n+  });\n+\n+  const spotPositions =\n+    assetsRes.data?.assets?.map((asset) =>\n+      makeSpotPosition({\n+        position_id: asset.coin,\n+        product_id: encodePath('BITGET', 'SPOT', `${asset.coin}USDT`),\n+        volume: +asset.available,\n+        free_volume: +asset.available,\n+        closable_price: spotPriceMap.get(`${asset.coin}USDT`) ?? 1,\n+      }),\n+    ) ?? [];\n+\n+  return [...derivativePositions, ...spotPositions];\n+};\n"
        },
        {
          "additions": 0,
          "deletions": 64,
          "path": "apps/vendor-bitget/src/services/accounts/futures.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/accounts/futures.ts b/apps/vendor-bitget/src/services/accounts/futures.ts\ndeleted file mode 100644\nindex 957cd06b1..000000000\n--- a/apps/vendor-bitget/src/services/accounts/futures.ts\n+++ /dev/null\n@@ -1,64 +0,0 @@\n-import { IPosition } from '@yuants/data-account';\n-import { IOrder } from '@yuants/data-order';\n-import { encodePath } from '@yuants/utils';\n-import { getAllPositions, getFutureOrdersPending } from '../../api/private-api';\n-import { ICredential } from '../../api/types';\n-\n-const mapPosition = (position: any): IPosition => ({\n-  position_id: `${position.symbol}-${position.holdSide}`,\n-  datasource_id: 'BITGET',\n-  product_id: encodePath('BITGET', 'USDT-FUTURES', position.symbol),\n-  direction: position.holdSide === 'long' ? 'LONG' : 'SHORT',\n-  volume: +position.total,\n-  free_volume: +position.available,\n-  position_price: +position.openPriceAvg,\n-  closable_price: +position.markPrice,\n-  floating_profit: +position.unrealizedPL,\n-  valuation: +position.total * +position.markPrice,\n-});\n-\n-const mapOrderDirection = (order: any) => {\n-  const side = order.side;\n-  const tradeSide = order.tradeSide ?? order.posSide;\n-  if (tradeSide === 'open') {\n-    return side === 'buy' ? 'OPEN_LONG' : 'OPEN_SHORT';\n-  }\n-  if (tradeSide === 'close') {\n-    return side === 'buy' ? 'CLOSE_SHORT' : 'CLOSE_LONG';\n-  }\n-  if (tradeSide === 'long') {\n-    return side === 'buy' ? 'OPEN_LONG' : 'CLOSE_LONG';\n-  }\n-  if (tradeSide === 'short') {\n-    return side === 'buy' ? 'CLOSE_SHORT' : 'OPEN_SHORT';\n-  }\n-  return side === 'buy' ? 'OPEN_LONG' : 'OPEN_SHORT';\n-};\n-\n-export const getFuturesAccountInfo = async (credential: ICredential) => {\n-  const positionsRes = await getAllPositions(credential, { productType: 'USDT-FUTURES', marginCoin: 'USDT' });\n-  if (positionsRes.msg !== 'success') {\n-    throw new Error(positionsRes.msg);\n-  }\n-  return positionsRes.data.map(mapPosition);\n-};\n-\n-export const listFuturePendingOrders = async (credential: ICredential): Promise<IOrder[]> => {\n-  const res = await getFutureOrdersPending(credential, { productType: 'USDT-FUTURES', marginCoin: 'USDT' });\n-  if (res.msg !== 'success') {\n-    throw new Error(res.msg);\n-  }\n-  const list = res.data?.orderList ?? [];\n-  return list.map((order: any) => ({\n-    order_id: order.orderId,\n-    account_id: '',\n-    product_id: encodePath('BITGET', order.productType ?? 'USDT-FUTURES', order.symbol),\n-    submit_at: +(order.cTime ?? order.createdTime ?? order.uTime ?? Date.now()),\n-    order_type: order.orderType === 'limit' ? 'LIMIT' : order.orderType === 'market' ? 'MARKET' : 'UNKNOWN',\n-    order_direction: mapOrderDirection(order),\n-    volume: +order.size,\n-    traded_volume: +(order.filledQty ?? 0),\n-    price: order.price ? +order.price : undefined,\n-    traded_price: order.priceAvg ? +order.priceAvg : undefined,\n-  }));\n-};\n"
        },
        {
          "additions": 8,
          "deletions": 8,
          "path": "apps/vendor-bitget/src/services/accounts/profile.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/accounts/profile.ts b/apps/vendor-bitget/src/services/accounts/profile.ts\nindex e87037066..e70f94f70 100644\n--- a/apps/vendor-bitget/src/services/accounts/profile.ts\n+++ b/apps/vendor-bitget/src/services/accounts/profile.ts\n@@ -3 +3 @@ import { getDefaultCredential } from '../../api/client';\n-import { getAccountInfo } from '../../api/private-api';\n+import { getAccountSettings } from '../../api/private-api';\n@@ -14 +14 @@ const fetchAccountProfile = async (credential: ICredential): Promise<IAccountPro\n-  const res = await getAccountInfo(credential);\n+  const res = await getAccountSettings(credential);\n@@ -16 +16 @@ const fetchAccountProfile = async (credential: ICredential): Promise<IAccountPro\n-    throw new Error(`Bitget getAccountInfo failed: ${res.code} ${res.msg}`);\n+    throw new Error(`Bitget getAccountSettings failed: ${res.code} ${res.msg}`);\n@@ -19,2 +19,2 @@ const fetchAccountProfile = async (credential: ICredential): Promise<IAccountPro\n-  if (!data?.userId) {\n-    throw new Error(`Bitget getAccountInfo returned invalid payload: ${JSON.stringify(data)}`);\n+  if (!data?.uid) {\n+    throw new Error(`Bitget getAccountSettings returned invalid payload: ${JSON.stringify(data)}`);\n@@ -22,3 +22,3 @@ const fetchAccountProfile = async (credential: ICredential): Promise<IAccountPro\n-  const uid = data.userId;\n-  const parentId = `${data.parentId ?? data.userId}`;\n-  return { uid, parentId, isMainAccount: uid === parentId };\n+  const uid = data.uid;\n+  const parentId = uid;\n+  return { uid, parentId, isMainAccount: true };\n"
        },
        {
          "additions": 0,
          "deletions": 57,
          "path": "apps/vendor-bitget/src/services/accounts/spot.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/accounts/spot.ts b/apps/vendor-bitget/src/services/accounts/spot.ts\ndeleted file mode 100644\nindex bb1de5316..000000000\n--- a/apps/vendor-bitget/src/services/accounts/spot.ts\n+++ /dev/null\n@@ -1,57 +0,0 @@\n-import { makeSpotPosition } from '@yuants/data-account';\n-import { IOrder } from '@yuants/data-order';\n-import { encodePath } from '@yuants/utils';\n-import { getSpotAssets, getSpotOrdersPending } from '../../api/private-api';\n-import { ICredential } from '../../api/types';\n-\n-const mapSpotOrders = (data: any): any[] => {\n-  if (!data) return [];\n-  if (Array.isArray(data)) return data;\n-  if (Array.isArray(data.orderList)) return data.orderList;\n-  if (Array.isArray(data.orders)) return data.orders;\n-  if (Array.isArray(data.resultList)) return data.resultList;\n-  return [];\n-};\n-\n-const mapSpotOrderDirection = (side?: string) => (side === 'sell' ? 'OPEN_SHORT' : 'OPEN_LONG');\n-\n-export const getSpotAccountInfo = async (credential: ICredential) => {\n-  const res = await getSpotAssets(credential);\n-  if (res.msg !== 'success') {\n-    throw new Error(res.msg);\n-  }\n-  return res.data.map((v) => {\n-    return makeSpotPosition({\n-      position_id: v.coin,\n-      product_id: encodePath('BITGET', 'SPOT', `${v.coin}-USDT`),\n-      volume: +v.available,\n-      free_volume: +v.available,\n-      closable_price: 1, // TODO: use real price\n-    });\n-  });\n-};\n-\n-export const listSpotPendingOrders = async (credential: ICredential): Promise<IOrder[]> => {\n-  const res = await getSpotOrdersPending(credential);\n-  if (res.msg !== 'success') {\n-    throw new Error(res.msg);\n-  }\n-  const list = mapSpotOrders(res.data);\n-  return list\n-    .map((order) => {\n-      const symbol = order.symbol ?? order.instId;\n-      if (!symbol) return null;\n-      return {\n-        order_id: order.orderId ?? order.clientOid,\n-        account_id: '',\n-        product_id: encodePath('BITGET', 'SPOT', symbol),\n-        order_type: order.orderType === 'market' ? 'MARKET' : 'LIMIT',\n-        order_direction: mapSpotOrderDirection(order.side),\n-        volume: +(order.size ?? order.quantity ?? order.baseSz ?? order.baseAmount ?? 0),\n-        traded_volume: +(order.fillSz ?? order.filledQty ?? order.baseFilled ?? 0),\n-        price: order.price ? +order.price : undefined,\n-        submit_at: +(order.cTime ?? order.createTime ?? order.createdTime ?? Date.now()),\n-      };\n-    })\n-    .filter((order): order is NonNullable<typeof order> => Boolean(order));\n-};\n"
        },
        {
          "additions": 4,
          "deletions": 18,
          "path": "apps/vendor-bitget/src/services/exchange.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/exchange.ts b/apps/vendor-bitget/src/services/exchange.ts\nindex d6487220d..e2b19e2a0 100644\n--- a/apps/vendor-bitget/src/services/exchange.ts\n+++ b/apps/vendor-bitget/src/services/exchange.ts\n@@ -7 +6,0 @@ import { ICredential } from '../api/types';\n-import { getFuturesAccountInfo as getFuturesPositions } from './accounts/futures';\n@@ -9 +8 @@ import { resolveAccountProfile } from './accounts/profile';\n-import { getSpotAccountInfo as getSpotPositions } from './accounts/spot';\n+import { getAccountInfo } from './accounts/account';\n@@ -37,6 +36 @@ provideExchangeServices<ICredential>(terminal, {\n-    const profile = await resolveAccountProfile(credential);\n-    const [futuresPositions, spotPositions] = await Promise.all([\n-      getFuturesPositions(credential),\n-      getSpotPositions(credential),\n-    ]);\n-    return [...futuresPositions, ...spotPositions];\n+    return getAccountInfo(credential);\n@@ -56,10 +50,2 @@ provideExchangeServices<ICredential>(terminal, {\n-    const profile = await resolveAccountProfile(credential);\n-    if (instType === 'SPOT') {\n-      const positions = await getSpotPositions(credential);\n-      return positions.filter((position) => position.product_id === product_id);\n-    }\n-    if (instType === 'USDT-FUTURES') {\n-      const positions = await getFuturesPositions(credential);\n-      return positions.filter((position) => position.product_id === product_id);\n-    }\n-    throw new Error(`Unsupported instType: ${instType}`);\n+    const positions = await getAccountInfo(credential);\n+    return positions.filter((position) => position.product_id === product_id);\n"
        },
        {
          "additions": 15,
          "deletions": 14,
          "path": "apps/vendor-bitget/src/services/markets/interest-rate.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/markets/interest-rate.ts b/apps/vendor-bitget/src/services/markets/interest-rate.ts\nindex bfe937852..9ed0ce9b3 100644\n--- a/apps/vendor-bitget/src/services/markets/interest-rate.ts\n+++ b/apps/vendor-bitget/src/services/markets/interest-rate.ts\n@@ -9 +9 @@ import { getSpotCrossInterestRate } from '../../api/private-api';\n-import { IHistoricalFundingRate, getHistoricalFundingRate, getSpotSymbols } from '../../api/public-api';\n+import { IUtaHistoricalFundingRate, getHistoryFundingRate, getInstruments } from '../../api/public-api';\n@@ -13 +13 @@ const spotSymbolCache = createCache(\n-    const res = await getSpotSymbols();\n+    const res = await getInstruments({ category: 'SPOT' });\n@@ -15 +15 @@ const spotSymbolCache = createCache(\n-      throw new Error(`Bitget getSpotSymbols failed: ${res.code} ${res.msg}`);\n+      throw new Error(`Bitget getInstruments failed: ${res.code} ${res.msg}`);\n@@ -17 +17 @@ const spotSymbolCache = createCache(\n-    return res.data.reduce((acc, v) => {\n+    return res.data.reduce((acc: Record<string, { baseCoin: string; quoteCoin: string }>, v) => {\n@@ -20 +20 @@ const spotSymbolCache = createCache(\n-    }, {} as Record<string, { baseCoin: string; quoteCoin: string }>);\n+    }, {});\n@@ -36 +36,2 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\n-        const res = await getHistoricalFundingRate({\n+        const res = await getHistoryFundingRate({\n+          category: 'USDT-FUTURES',\n@@ -38,3 +39,2 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\n-          productType: instType,\n-          pageSize: '100',\n-          pageNo: '' + current_page,\n+          limit: '100',\n+          cursor: '' + current_page,\n@@ -45,3 +45,4 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\n-        if (res.data.length === 0) break;\n-        yield res.data.map(\n-          (v: IHistoricalFundingRate): IInterestRate => ({\n+        const list = res.data?.resultList ?? [];\n+        if (list.length === 0) break;\n+        yield list.map(\n+          (v: IUtaHistoricalFundingRate): IInterestRate => ({\n@@ -51 +52 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\n-            created_at: formatTime(+v.fundingTime),\n+            created_at: formatTime(+v.fundingRateTimestamp),\n@@ -57 +58 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\n-        if (+res.data[res.data.length - 1].fundingTime <= started_at) break;\n+        if (+list[list.length - 1].fundingRateTimestamp <= started_at) break;\n"
        },
        {
          "additions": 10,
          "deletions": 23,
          "path": "apps/vendor-bitget/src/services/markets/ohlc.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/markets/ohlc.ts b/apps/vendor-bitget/src/services/markets/ohlc.ts\nindex a12d2da25..e93ac84b2 100644\n--- a/apps/vendor-bitget/src/services/markets/ohlc.ts\n+++ b/apps/vendor-bitget/src/services/markets/ohlc.ts\n@@ -6 +6 @@ import { firstValueFrom, timer } from 'rxjs';\n-import { getMixCandles, getSpotCandles } from '../../api/public-api';\n+import { getHistoryCandles } from '../../api/public-api';\n@@ -41,22 +41,9 @@ createSeriesProvider<IOHLC>(Terminal.fromNodeEnv(), {\n-      if (instType === 'USDT-FUTURES') {\n-        const res = await getMixCandles({\n-          symbol: instId,\n-          productType: instType,\n-          granularity,\n-          endTime: '' + currentEndTime,\n-          limit: '100',\n-        });\n-        if (res.msg !== 'success') throw new Error(`Bitget get mix candles failed: ${res.code} ${res.msg}`);\n-        candles = res.data;\n-      } else if (instType === 'SPOT') {\n-        const res = await getSpotCandles({\n-          symbol: instId,\n-          granularity,\n-          endTime: '' + currentEndTime,\n-          limit: '100',\n-        });\n-        if (res.msg !== 'success') throw new Error(`Bitget get spot candles failed: ${res.code} ${res.msg}`);\n-        candles = res.data;\n-      } else {\n-        throw new Error(`Unsupported product type: ${instType}`);\n-      }\n+      const res = await getHistoryCandles({\n+        category: instType,\n+        symbol: instId,\n+        interval: granularity,\n+        endTime: '' + currentEndTime,\n+        limit: '100',\n+      });\n+      if (res.msg !== 'success') throw new Error(`Bitget get history candles failed: ${res.code} ${res.msg}`);\n+      candles = res.data;\n"
        },
        {
          "additions": 47,
          "deletions": 42,
          "path": "apps/vendor-bitget/src/services/markets/product.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/markets/product.ts b/apps/vendor-bitget/src/services/markets/product.ts\nindex 1a59f6074..26120b1f4 100644\n--- a/apps/vendor-bitget/src/services/markets/product.ts\n+++ b/apps/vendor-bitget/src/services/markets/product.ts\n@@ -2,7 +2,2 @@ import { IProduct } from '@yuants/data-product';\n-import { Terminal } from '@yuants/protocol';\n-import { createSQLWriter } from '@yuants/sql';\n-import { encodePath, formatTime } from '@yuants/utils';\n-import { Subject, defer, repeat, retry, shareReplay, tap } from 'rxjs';\n-import { IMixMarketContract, getMarketContracts } from '../../api/public-api';\n-\n-const product$ = new Subject<IProduct>();\n+import { encodePath } from '@yuants/utils';\n+import { IUtaInstrument, getInstruments } from '../../api/public-api';\n@@ -13 +8 @@ export const listProducts = async (): Promise<IProduct[]> => {\n-  const usdtFuturesProductRes = await getMarketContracts({ productType: 'USDT-FUTURES' });\n+  const usdtFuturesProductRes = await getInstruments({ category: 'USDT-FUTURES' });\n@@ -18 +13 @@ export const listProducts = async (): Promise<IProduct[]> => {\n-  const coinFuturesProductRes = await getMarketContracts({ productType: 'COIN-FUTURES' });\n+  const coinFuturesProductRes = await getInstruments({ category: 'COIN-FUTURES' });\n@@ -21,0 +17,4 @@ export const listProducts = async (): Promise<IProduct[]> => {\n+  const spotProductRes = await getInstruments({ category: 'SPOT' });\n+  if (spotProductRes.msg !== 'success') {\n+    throw new Error(spotProductRes.msg);\n+  }\n@@ -23 +22 @@ export const listProducts = async (): Promise<IProduct[]> => {\n-    (product: IMixMarketContract): IProduct => ({\n+    (product: IUtaInstrument): IProduct => ({\n@@ -28,2 +27,4 @@ export const listProducts = async (): Promise<IProduct[]> => {\n-      price_step: Number(`1e-${product.pricePlace}`),\n-      volume_step: +product.sizeMultiplier,\n+      price_step: Number(`1e-${product.pricePrecision}`),\n+      volume_step: product.quantityMultiplier\n+        ? +product.quantityMultiplier\n+        : Number(`1e-${product.quantityPrecision}`),\n@@ -33 +34 @@ export const listProducts = async (): Promise<IProduct[]> => {\n-      margin_rate: 1 / Number(product.maxLever),\n+      margin_rate: product.maxLeverage ? 1 / Number(product.maxLeverage) : 0,\n@@ -45 +46 @@ export const listProducts = async (): Promise<IProduct[]> => {\n-    (product: IMixMarketContract): IProduct => ({\n+    (product: IUtaInstrument): IProduct => ({\n@@ -50,2 +51,4 @@ export const listProducts = async (): Promise<IProduct[]> => {\n-      price_step: Number(`1e-${product.pricePlace}`),\n-      volume_step: +product.sizeMultiplier,\n+      price_step: Number(`1e-${product.pricePrecision}`),\n+      volume_step: product.quantityMultiplier\n+        ? +product.quantityMultiplier\n+        : Number(`1e-${product.quantityPrecision}`),\n@@ -55 +58 @@ export const listProducts = async (): Promise<IProduct[]> => {\n-      margin_rate: 1 / Number(product.maxLever),\n+      margin_rate: product.maxLeverage ? 1 / Number(product.maxLeverage) : 0,\n@@ -62 +65 @@ export const listProducts = async (): Promise<IProduct[]> => {\n-      market_id: 'BITGET/USDT-FUTURES',\n+      market_id: 'BITGET/COIN-FUTURES',\n@@ -67,23 +70,24 @@ export const listProducts = async (): Promise<IProduct[]> => {\n-  return [...usdtFutures, ...coinFutures];\n-};\n-\n-const futureProducts$ = defer(listProducts).pipe(\n-  tap((list) => {\n-    list.forEach((product) => product$.next(product));\n-  }),\n-  tap({\n-    error: (e) => {\n-      console.error(formatTime(Date.now()), 'FuturesProducts', e);\n-    },\n-  }),\n-  retry({ delay: 5000 }),\n-  repeat({ delay: 86400_000 }),\n-  shareReplay(1),\n-);\n-\n-createSQLWriter<IProduct>(Terminal.fromNodeEnv(), {\n-  data$: product$,\n-  tableName: 'product',\n-  conflictKeys: ['datasource_id', 'product_id'],\n-  writeInterval: 1000,\n-});\n+  const spots = spotProductRes.data.map(\n+    (product: IUtaInstrument): IProduct => ({\n+      product_id: encodePath('BITGET', 'SPOT', product.symbol),\n+      datasource_id: 'BITGET',\n+      quote_currency: product.quoteCoin,\n+      base_currency: product.baseCoin,\n+      price_step: Number(`1e-${product.pricePrecision}`),\n+      volume_step: product.quantityMultiplier\n+        ? +product.quantityMultiplier\n+        : Number(`1e-${product.quantityPrecision}`),\n+      name: '',\n+      value_scale: 1,\n+      value_scale_unit: '',\n+      margin_rate: 0,\n+      value_based_cost: 0,\n+      volume_based_cost: 0,\n+      max_position: 0,\n+      max_volume: 0,\n+      allow_long: true,\n+      allow_short: false,\n+      market_id: 'BITGET/SPOT',\n+      no_interest_rate: false,\n+    }),\n+  );\n@@ -91 +95,2 @@ createSQLWriter<IProduct>(Terminal.fromNodeEnv(), {\n-futureProducts$.subscribe();\n+  return [...usdtFutures, ...coinFutures, ...spots];\n+};\n"
        },
        {
          "additions": 21,
          "deletions": 25,
          "path": "apps/vendor-bitget/src/services/markets/quote.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/markets/quote.ts b/apps/vendor-bitget/src/services/markets/quote.ts\nindex 77ddd221a..7c7958dad 100644\n--- a/apps/vendor-bitget/src/services/markets/quote.ts\n+++ b/apps/vendor-bitget/src/services/markets/quote.ts\n@@ -6,6 +6 @@ import { defer, groupBy, map, merge, mergeMap, repeat, retry, scan, shareReplay,\n-import {\n-  IFundingTimeInfo,\n-  IFutureMarketTicker,\n-  getFutureMarketTickers,\n-  getNextFundingTime,\n-} from '../../api/public-api';\n+import { IUtaCurrentFundingRate, IUtaTicker, getCurrentFundingRate, getTickers } from '../../api/public-api';\n@@ -14 +9 @@ import { createCyclicTask } from './utils/cyclic-task';\n-const usdtFuturesTickers$ = defer(() => getFutureMarketTickers({ productType: 'USDT-FUTURES' })).pipe(\n+const usdtFuturesTickers$ = defer(() => getTickers({ category: 'USDT-FUTURES' })).pipe(\n@@ -20 +15 @@ const usdtFuturesTickers$ = defer(() => getFutureMarketTickers({ productType: 'U\n-const coinFuturesTickers$ = defer(() => getFutureMarketTickers({ productType: 'COIN-FUTURES' })).pipe(\n+const coinFuturesTickers$ = defer(() => getTickers({ category: 'COIN-FUTURES' })).pipe(\n@@ -28 +23 @@ const mapTickerToQuote =\n-  (ticker: IFutureMarketTicker): Partial<IQuote> => ({\n+  (ticker: IUtaTicker): Partial<IQuote> => ({\n@@ -30,9 +25,9 @@ const mapTickerToQuote =\n-    product_id: encodePath(instType, ticker.symbol),\n-    last_price: ticker.lastPr,\n-    ask_price: ticker.askPr,\n-    ask_volume: ticker.askSz,\n-    bid_price: ticker.bidPr,\n-    bid_volume: ticker.bidSz,\n-    interest_rate_long: `${-Number(ticker.fundingRate)}`,\n-    interest_rate_short: `${Number(ticker.fundingRate)}`,\n-    open_interest: ticker.holdingAmount,\n+    product_id: encodePath('BITGET', instType, ticker.symbol),\n+    last_price: ticker.lastPrice,\n+    ask_price: ticker.ask1Price,\n+    ask_volume: ticker.ask1Size,\n+    bid_price: ticker.bid1Price,\n+    bid_volume: ticker.bid1Size,\n+    interest_rate_long: ticker.fundingRate ? `${-Number(ticker.fundingRate)}` : undefined,\n+    interest_rate_short: ticker.fundingRate ? `${Number(ticker.fundingRate)}` : undefined,\n+    open_interest: ticker.openInterest,\n@@ -97 +92 @@ createCyclicTask({\n-    const res = await getNextFundingTime({\n+    const res = await getCurrentFundingRate({\n@@ -99 +93,0 @@ createCyclicTask({\n-      productType: instType,\n@@ -106,3 +100 @@ createCyclicTask({\n-    console.info(formatTime(Date.now()), 'FundingTime', product_id, res.data[0].nextFundingTime);\n-\n-    const data: IFundingTimeInfo | undefined = res.data[0];\n+    const data: IUtaCurrentFundingRate | undefined = res.data?.[0];\n@@ -112,0 +105,4 @@ createCyclicTask({\n+    console.info(formatTime(Date.now()), 'FundingTime', product_id, data.nextUpdate);\n+\n+    const nextUpdateTs = +data.nextUpdate;\n+\n@@ -116,2 +112,2 @@ createCyclicTask({\n-      interest_rate_next_settled_at: formatTime(+data.nextFundingTime),\n-      interest_rate_prev_settled_at: formatTime(+data.nextFundingTime - +data.ratePeriod * 3600_000),\n+      interest_rate_next_settled_at: formatTime(nextUpdateTs),\n+      interest_rate_prev_settled_at: formatTime(nextUpdateTs - +data.fundingRateInterval * 3600_000),\n"
        },
        {
          "additions": 3,
          "deletions": 10,
          "path": "apps/vendor-bitget/src/services/orders/cancelOrder.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/orders/cancelOrder.ts b/apps/vendor-bitget/src/services/orders/cancelOrder.ts\nindex 6baa1613e..6694acb08 100644\n--- a/apps/vendor-bitget/src/services/orders/cancelOrder.ts\n+++ b/apps/vendor-bitget/src/services/orders/cancelOrder.ts\n@@ -3 +3 @@ import { decodePath } from '@yuants/utils';\n-import { postFutureCancelOrder, postSpotCancelOrder } from '../../api/private-api';\n+import { postCancelOrder } from '../../api/private-api';\n@@ -10,5 +10 @@ export const cancelOrder = async (credential: ICredential, order: IOrder) => {\n-    const res = await postFutureCancelOrder(credential, {\n-      symbol: instId,\n-      productType: instType,\n-      orderId: order.order_id,\n-    });\n+    const res = await postCancelOrder(credential, { orderId: order.order_id, category: 'USDT-FUTURES' });\n@@ -22,4 +18 @@ export const cancelOrder = async (credential: ICredential, order: IOrder) => {\n-    const res = await postSpotCancelOrder(credential, {\n-      symbol: instId,\n-      orderId: order.order_id,\n-    });\n+    const res = await postCancelOrder(credential, { orderId: order.order_id, category: 'SPOT' });\n"
        },
        {
          "additions": 17,
          "deletions": 21,
          "path": "apps/vendor-bitget/src/services/orders/listOrders.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/orders/listOrders.ts b/apps/vendor-bitget/src/services/orders/listOrders.ts\nindex 5503ba9c0..242727167 100644\n--- a/apps/vendor-bitget/src/services/orders/listOrders.ts\n+++ b/apps/vendor-bitget/src/services/orders/listOrders.ts\n@@ -2 +2 @@ import { IOrder } from '@yuants/data-order';\n-import { getFutureOrdersPending, getSpotOrdersPending } from '../../api/private-api';\n+import { getUnfilledOrders } from '../../api/private-api';\n@@ -6,4 +6 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\n-  // Future\n-  const res = await getFutureOrdersPending(credential, {\n-    productType: 'USDT-FUTURES',\n-  });\n+  const res = await getUnfilledOrders(credential, { category: 'USDT-FUTURES' });\n@@ -14 +11 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\n-    res.data.orderList?.map((v) => ({\n+    res.data.list?.map((v) => ({\n@@ -18 +15 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\n-      order_type: v.orderType.toUpperCase(),\n+      order_type: v.orderType?.toUpperCase(),\n@@ -20 +17 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\n-        v.tradeSide === 'open'\n+        v.posSide === 'long'\n@@ -23 +20 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\n-            : 'OPEN_SHORT'\n+            : 'CLOSE_LONG'\n@@ -26 +23 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\n-          : 'CLOSE_LONG',\n+          : 'OPEN_SHORT',\n@@ -28,2 +25,2 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\n-      volume: Number(v.size),\n-      traded_volume: Number(v.filledQty),\n+      volume: Number(v.qty),\n+      traded_volume: Number(v.cumExecQty),\n@@ -31,2 +28,2 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\n-      created_at: new Date(Number(v.cTime)).toISOString(),\n-      submit_at: Number(v.cTime),\n+      created_at: new Date(Number(v.createdTime)).toISOString(),\n+      submit_at: Number(v.createdTime),\n@@ -38,2 +35 @@ export const listSpotOrders = async (credential: ICredential): Promise<IOrder[]>\n-  // Spot\n-  const res = await getSpotOrdersPending(credential, {});\n+  const res = await getUnfilledOrders(credential, { category: 'SPOT' });\n@@ -44 +40 @@ export const listSpotOrders = async (credential: ICredential): Promise<IOrder[]>\n-    res.data?.map((v) => ({\n+    res.data?.list?.map((v) => ({\n@@ -51,2 +47,2 @@ export const listSpotOrders = async (credential: ICredential): Promise<IOrder[]>\n-      volume: Number(v.quantity),\n-      traded_volume: Number(v.filledQty),\n+      volume: Number(v.qty),\n+      traded_volume: Number(v.cumExecQty),\n@@ -54,2 +50,2 @@ export const listSpotOrders = async (credential: ICredential): Promise<IOrder[]>\n-      created_at: new Date(Number(v.cTime)).toISOString(),\n-      submit_at: Number(v.cTime),\n+      created_at: new Date(Number(v.createdTime)).toISOString(),\n+      submit_at: Number(v.createdTime),\n"
        },
        {
          "additions": 11,
          "deletions": 10,
          "path": "apps/vendor-bitget/src/services/orders/modifyOrder.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/orders/modifyOrder.ts b/apps/vendor-bitget/src/services/orders/modifyOrder.ts\nindex fa2f6f42b..5f3b6aaea 100644\n--- a/apps/vendor-bitget/src/services/orders/modifyOrder.ts\n+++ b/apps/vendor-bitget/src/services/orders/modifyOrder.ts\n@@ -3 +3 @@ import { decodePath } from '@yuants/utils';\n-import { postFutureModifyOrder, postSpotCancelReplaceOrder } from '../../api/private-api';\n+import { postModifyOrder } from '../../api/private-api';\n@@ -10,3 +10 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\n-    const res = await postFutureModifyOrder(credential, {\n-      symbol: instId,\n-      productType: instType,\n+    const res = await postModifyOrder(credential, {\n@@ -14,2 +12,4 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\n-      newPrice: order.price?.toString(),\n-      newSize: order.volume?.toString(),\n+      price: order.price?.toString(),\n+      qty: order.volume?.toString(),\n+      category: 'USDT-FUTURES',\n+      symbol: instId,\n@@ -24,2 +24 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\n-    const res = await postSpotCancelReplaceOrder(credential, {\n-      symbol: instId,\n+    const res = await postModifyOrder(credential, {\n@@ -27,2 +26,4 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\n-      newPrice: order.price?.toString(),\n-      newSize: order.volume?.toString(),\n+      price: order.price?.toString(),\n+      qty: order.volume?.toString(),\n+      category: 'SPOT',\n+      symbol: instId,\n"
        },
        {
          "additions": 0,
          "deletions": 15,
          "path": "apps/vendor-bitget/src/services/orders/order-utils.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/orders/order-utils.ts b/apps/vendor-bitget/src/services/orders/order-utils.ts\nindex 044509abd..bfb7811de 100644\n--- a/apps/vendor-bitget/src/services/orders/order-utils.ts\n+++ b/apps/vendor-bitget/src/services/orders/order-utils.ts\n@@ -27,15 +26,0 @@ export const mapOrderDirectionToTradeSide = (direction?: IOrder['order_direction\n-\n-export const buildFutureOrderParams = (order: IOrder) => {\n-  const [datasource_id, instType, instId] = decodePath(order.product_id);\n-  return {\n-    symbol: instId,\n-    productType: instType,\n-    marginMode: 'crossed',\n-    marginCoin: 'USDT',\n-    size: '' + order.volume,\n-    price: order.price !== undefined ? '' + order.price : undefined,\n-    side: mapOrderDirectionToSide(order.order_direction),\n-    tradeSide: mapOrderDirectionToTradeSide(order.order_direction),\n-    orderType: order.order_type === 'LIMIT' ? 'limit' : 'market',\n-  };\n-};\n"
        },
        {
          "additions": 20,
          "deletions": 9,
          "path": "apps/vendor-bitget/src/services/orders/submitOrder.ts",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/apps/vendor-bitget/src/services/orders/submitOrder.ts b/apps/vendor-bitget/src/services/orders/submitOrder.ts\nindex 969f8a87f..5658795c4 100644\n--- a/apps/vendor-bitget/src/services/orders/submitOrder.ts\n+++ b/apps/vendor-bitget/src/services/orders/submitOrder.ts\n@@ -3 +3 @@ import { decodePath } from '@yuants/utils';\n-import { postFuturePlaceOrder, postSpotPlaceOrder } from '../../api/private-api';\n+import { postPlaceOrder } from '../../api/private-api';\n@@ -5 +5 @@ import { ICredential } from '../../api/types';\n-import { buildFutureOrderParams, mapOrderDirectionToSide } from './order-utils';\n+import { mapOrderDirectionToSide } from './order-utils';\n@@ -8,0 +9 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\n+  const isMaker = order.order_type === 'MAKER';\n@@ -11,2 +12,11 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\n-    const params = buildFutureOrderParams(order);\n-    const res = await postFuturePlaceOrder(credential, params);\n+    const res = await postPlaceOrder(credential, {\n+      category: 'USDT-FUTURES',\n+      symbol: instId,\n+      qty: '' + order.volume,\n+      price: order.price !== undefined ? '' + order.price : undefined,\n+      side: mapOrderDirectionToSide(order.order_direction),\n+      orderType: order.order_type === 'LIMIT' || isMaker ? 'limit' : 'market',\n+      timeInForce: isMaker ? 'post_only' : undefined,\n+      posSide: order.order_direction?.includes('LONG') ? 'long' : 'short',\n+      // UTA error 25238: posSide and reduceOnly cannot be used together; hedge mode relies on posSide+side.\n+    });\n@@ -20 +30,2 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\n-    const res = await postSpotPlaceOrder(credential, {\n+    const res = await postPlaceOrder(credential, {\n+      category: 'SPOT',\n@@ -23,3 +34,4 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\n-      orderType: 'limit', // Default to limit for now\n-      price: order.price?.toString(),\n-      quantity: order.volume?.toString(),\n+      orderType: order.order_type === 'MARKET' ? 'market' : 'limit',\n+      timeInForce: isMaker ? 'post_only' : undefined,\n+      price: order.price !== undefined ? '' + order.price : undefined,\n+      qty: order.volume?.toString() ?? '0',\n@@ -27 +38,0 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\n-      force: 'normal',\n"
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json",
          "patch": "commit 65358bffab9382823fc92ec877897bb4ee296182\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 14:29:30 2025 +0800\n\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n    \n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\n    - Enhanced error handling and response mapping for account and order services.\n    - Removed deprecated methods and streamlined order parameter construction.\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\n\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json b/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\nnew file mode 100644\nindex 000000000..f55addc83\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-bitget\",\n+      \"comment\": \"Refactor Bitget API integration for futures and spot markets\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-bitget\"\n+}\n\\ No newline at end of file\n"
        }
      ]
    },
    {
      "hash": "759b18e5c241cd012ed0251d184116a001211528",
      "short": "759b18e5c",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-04 14:37:34 +0800",
      "subject": "chore: bump version (#2191)",
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-bitget/CHANGELOG.json",
          "patch": "commit 759b18e5c241cd012ed0251d184116a001211528\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 14:37:34 2025 +0800\n\n    chore: bump version (#2191)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/CHANGELOG.json b/apps/vendor-bitget/CHANGELOG.json\nindex ec75dd35e..def2eb706 100644\n--- a/apps/vendor-bitget/CHANGELOG.json\n+++ b/apps/vendor-bitget/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.11.0\",\n+      \"tag\": \"@yuants/vendor-bitget_v0.11.0\",\n+      \"date\": \"Thu, 04 Dec 2025 06:30:10 GMT\",\n+      \"comments\": {\n+        \"minor\": [\n+          {\n+            \"comment\": \"Refactor Bitget API integration for futures and spot markets\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n"
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-bitget/CHANGELOG.md",
          "patch": "commit 759b18e5c241cd012ed0251d184116a001211528\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 14:37:34 2025 +0800\n\n    chore: bump version (#2191)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/CHANGELOG.md b/apps/vendor-bitget/CHANGELOG.md\nindex 623a78f75..488d5bac4 100644\n--- a/apps/vendor-bitget/CHANGELOG.md\n+++ b/apps/vendor-bitget/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\n+This log was last generated on Thu, 04 Dec 2025 06:30:10 GMT and should not be manually modified.\n+\n+## 0.11.0\n+Thu, 04 Dec 2025 06:30:10 GMT\n+\n+### Minor changes\n+\n+- Refactor Bitget API integration for futures and spot markets\n"
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-bitget/package.json",
          "patch": "commit 759b18e5c241cd012ed0251d184116a001211528\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 14:37:34 2025 +0800\n\n    chore: bump version (#2191)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/package.json b/apps/vendor-bitget/package.json\nindex 4e8fcb99f..1bf9bfbff 100644\n--- a/apps/vendor-bitget/package.json\n+++ b/apps/vendor-bitget/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.10.4\",\n+  \"version\": \"0.11.0\",\n"
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json",
          "patch": "commit 759b18e5c241cd012ed0251d184116a001211528\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 14:37:34 2025 +0800\n\n    chore: bump version (#2191)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json b/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\ndeleted file mode 100644\nindex f55addc83..000000000\n--- a/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-bitget\",\n-      \"comment\": \"Refactor Bitget API integration for futures and spot markets\",\n-      \"type\": \"minor\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-bitget\"\n-}\n\\ No newline at end of file\n"
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-bitget/{main_2025-12-03-18-20.json => main_2025-12-04-06-30.json}",
          "patch": ""
        }
      ]
    },
    {
      "hash": "9b9495d1e3b8feb7d23fccebc8d5eecca5e734ac",
      "short": "9b9495d1e",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-04 14:57:47 +0800",
      "subject": "feat: update credential handling to use secret_id and enhance error management (#2192)",
      "files": [
        {
          "additions": 31,
          "deletions": 4,
          "path": "apps/virtual-exchange/src/credential.ts",
          "patch": "commit 9b9495d1e3b8feb7d23fccebc8d5eecca5e734ac\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Thu Dec 4 14:57:47 2025 +0800\n\n    feat: update credential handling to use secret_id and enhance error management (#2192)\n\ndiff --git a/apps/virtual-exchange/src/credential.ts b/apps/virtual-exchange/src/credential.ts\nindex f72728008..e03200075 100644\n--- a/apps/virtual-exchange/src/credential.ts\n+++ b/apps/virtual-exchange/src/credential.ts\n@@ -0,0 +1 @@\n+import { createCache } from '@yuants/cache';\n@@ -4,0 +6 @@ import { escapeSQL, requestSQL } from '@yuants/sql';\n+import { newError } from '@yuants/utils';\n@@ -52 +54 @@ export const listAllCredentials = async () => {\n-terminal.server.provideService<IExchangeCredential, void>(\n+terminal.server.provideService<IExchangeCredential, ISecret>(\n@@ -65,2 +67,2 @@ terminal.server.provideService<IExchangeCredential, void>(\n-    await writeSecret(terminal, credentialReader, { type: 'exchange_credential' }, secretData);\n-    return { res: { code: 0, message: 'OK' } };\n+    const secret = await writeSecret(terminal, credentialReader, { type: 'exchange_credential' }, secretData);\n+    return { res: { code: 0, message: 'OK', data: secret } };\n@@ -83 +85,3 @@ terminal.server.provideService<void, string[]>('VEX/ListCredentials', {}, async\n-export const validCredentials$ = defer(() => listAllCredentials()).pipe(\n+const credentialCache = createCache(() => listAllCredentials(), { swrAfter: 10_000, expire: 3600_000 });\n+\n+export const validCredentials$ = defer(() => credentialCache.query('')).pipe(\n@@ -85,0 +90 @@ export const validCredentials$ = defer(() => listAllCredentials()).pipe(\n+    if (!x) return map;\n@@ -111,0 +117,22 @@ export const getCredentialById = async (credential_id: string) => {\n+\n+export const getCredentialBySecretId = async (\n+  secret_id: string,\n+): Promise<Required<Pick<ICredentialResolvedStatus, 'secret' | 'credential' | 'credentialId'>>> => {\n+  const allCredentials = await credentialCache.query('');\n+  const theCredential = allCredentials?.find((x) => x.secret.sign === secret_id);\n+  if (!theCredential) {\n+    throw newError('CREDENTIAL_NOT_FOUND', { secret_id });\n+  }\n+  if (!theCredential.credential) {\n+    throw newError('CREDENTIAL_NOT_RESOLVED', { secret_id });\n+  }\n+  if (!theCredential.credentialId) {\n+    throw newError('CREDENTIAL_ID_NOT_RESOLVED', { secret_id });\n+  }\n+\n+  return {\n+    secret: theCredential.secret,\n+    credential: theCredential.credential,\n+    credentialId: theCredential.credentialId,\n+  };\n+};\n"
        },
        {
          "additions": 27,
          "deletions": 42,
          "path": "apps/virtual-exchange/src/general.ts",
          "patch": "commit 9b9495d1e3b8feb7d23fccebc8d5eecca5e734ac\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Thu Dec 4 14:57:47 2025 +0800\n\n    feat: update credential handling to use secret_id and enhance error management (#2192)\n\ndiff --git a/apps/virtual-exchange/src/general.ts b/apps/virtual-exchange/src/general.ts\nindex 068a19f33..5ffe52c4f 100644\n--- a/apps/virtual-exchange/src/general.ts\n+++ b/apps/virtual-exchange/src/general.ts\n@@ -5 +5 @@ import { Terminal } from '@yuants/protocol';\n-import { getCredentialById } from './credential';\n+import { getCredentialBySecretId } from './credential';\n@@ -9 +9 @@ const terminal = Terminal.fromNodeEnv();\n-terminal.server.provideService<{ credential_id: string; product_id?: string }, IPosition[]>(\n+terminal.server.provideService<{ secret_id: string; product_id?: string }, IPosition[]>(\n@@ -13 +13 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\n-    required: ['credential_id'],\n+    required: ['secret_id'],\n@@ -15 +15 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\n-      credential_id: { type: 'string' },\n+      secret_id: { type: 'string' },\n@@ -20,5 +20,2 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\n-    const credential = await getCredentialById(msg.req.credential_id);\n-    if (!credential) {\n-      return { res: { code: 404, message: 'Credential not found' } };\n-    }\n-    const res = await getPositions(terminal, credential, msg.req.product_id);\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\n+    const res = await getPositions(terminal, credential.credential, msg.req.product_id);\n@@ -29 +26 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\n-terminal.server.provideService<{ credential_id: string; product_id?: string }, IOrder[]>(\n+terminal.server.provideService<{ secret_id: string; product_id?: string }, IOrder[]>(\n@@ -33 +30 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\n-    required: ['credential_id'],\n+    required: ['secret_id'],\n@@ -35 +32 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\n-      credential_id: { type: 'string' },\n+      secret_id: { type: 'string' },\n@@ -40,5 +37,2 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\n-    const credential = await getCredentialById(msg.req.credential_id);\n-    if (!credential) {\n-      return { res: { code: 404, message: 'Credential not found' } };\n-    }\n-    const res = await getOrders(terminal, credential, msg.req.product_id);\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\n+    const res = await getOrders(terminal, credential.credential, msg.req.product_id);\n@@ -46 +40 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\n-      order.account_id = msg.req.credential_id;\n+      order.account_id = credential.credentialId;\n@@ -54 +48 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\n-terminal.server.provideService<{ order: IOrder; credential_id: string }, { order_id: string }>(\n+terminal.server.provideService<{ order: IOrder; secret_id: string }, { order_id: string }>(\n@@ -58 +52 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, { order\n-    required: ['order', 'credential_id'],\n+    required: ['order', 'secret_id'],\n@@ -61 +55 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, { order\n-      credential_id: { type: 'string' },\n+      secret_id: { type: 'string' },\n@@ -65,5 +59,2 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, { order\n-    const credential = await getCredentialById(msg.req.credential_id);\n-    if (!credential) {\n-      return { res: { code: 404, message: 'Credential not found' } };\n-    }\n-    const res = await submitOrder(terminal, credential, msg.req.order);\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\n+    const res = await submitOrder(terminal, credential.credential, msg.req.order);\n@@ -75 +66 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, { order\n-terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\n+terminal.server.provideService<{ order: IOrder; secret_id: string }, void>(\n@@ -79 +70 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\n-    required: ['order', 'credential_id'],\n+    required: ['order', 'secret_id'],\n@@ -82 +73 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\n-      credential_id: { type: 'string' },\n+      secret_id: { type: 'string' },\n@@ -86,5 +77,2 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\n-    const credential = await getCredentialById(msg.req.credential_id);\n-    if (!credential) {\n-      return { res: { code: 404, message: 'Credential not found' } };\n-    }\n-    const res = await modifyOrder(terminal, credential, msg.req.order);\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\n+    const res = await modifyOrder(terminal, credential.credential, msg.req.order);\n@@ -96 +84 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\n-terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\n+terminal.server.provideService<{ order: IOrder; secret_id: string }, void>(\n@@ -100 +88 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\n-    required: ['order', 'credential_id'],\n+    required: ['order', 'secret_id'],\n@@ -103 +91 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\n-      credential_id: { type: 'string' },\n+      secret_id: { type: 'string' },\n@@ -107,5 +95,2 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\n-    const credential = await getCredentialById(msg.req.credential_id);\n-    if (!credential) {\n-      return { res: { code: 404, message: 'Credential not found' } };\n-    }\n-    const res = await cancelOrder(terminal, credential, msg.req.order);\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\n+    const res = await cancelOrder(terminal, credential.credential, msg.req.order);\n"
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json",
          "patch": "commit 9b9495d1e3b8feb7d23fccebc8d5eecca5e734ac\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Thu Dec 4 14:57:47 2025 +0800\n\n    feat: update credential handling to use secret_id and enhance error management (#2192)\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json b/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\nnew file mode 100644\nindex 000000000..6bf18df2e\n--- /dev/null\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-virtual-exchange\",\n+      \"comment\": \"fix\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-virtual-exchange\"\n+}\n\\ No newline at end of file\n"
        }
      ]
    },
    {
      "hash": "e6d5d8b1242877eecf9bf99d82a955e5fba4b893",
      "short": "e6d5d8b12",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-04 15:31:47 +0800",
      "subject": "chore: bump version (#2193)",
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/virtual-exchange/CHANGELOG.json",
          "patch": "commit e6d5d8b1242877eecf9bf99d82a955e5fba4b893\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 15:31:47 2025 +0800\n\n    chore: bump version (#2193)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\nindex 07abfeb46..ed8d1d46a 100644\n--- a/apps/virtual-exchange/CHANGELOG.json\n+++ b/apps/virtual-exchange/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.5.3\",\n+      \"tag\": \"@yuants/app-virtual-exchange_v0.5.3\",\n+      \"date\": \"Thu, 04 Dec 2025 07:31:18 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"fix\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n"
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/virtual-exchange/CHANGELOG.md",
          "patch": "commit e6d5d8b1242877eecf9bf99d82a955e5fba4b893\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 15:31:47 2025 +0800\n\n    chore: bump version (#2193)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\nindex e02fcc74f..590da04f5 100644\n--- a/apps/virtual-exchange/CHANGELOG.md\n+++ b/apps/virtual-exchange/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\n+This log was last generated on Thu, 04 Dec 2025 07:31:18 GMT and should not be manually modified.\n+\n+## 0.5.3\n+Thu, 04 Dec 2025 07:31:18 GMT\n+\n+### Patches\n+\n+- fix\n"
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/virtual-exchange/package.json",
          "patch": "commit e6d5d8b1242877eecf9bf99d82a955e5fba4b893\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 15:31:47 2025 +0800\n\n    chore: bump version (#2193)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\nindex c88895351..7c18e3358 100644\n--- a/apps/virtual-exchange/package.json\n+++ b/apps/virtual-exchange/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.5.2\",\n+  \"version\": \"0.5.3\",\n"
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json",
          "patch": "commit e6d5d8b1242877eecf9bf99d82a955e5fba4b893\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 15:31:47 2025 +0800\n\n    chore: bump version (#2193)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json b/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\ndeleted file mode 100644\nindex 6bf18df2e..000000000\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/app-virtual-exchange\",\n-      \"comment\": \"fix\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/app-virtual-exchange\"\n-}\n\\ No newline at end of file\n"
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/{main_2025-12-03-18-20.json => main_2025-12-04-07-31.json}",
          "patch": ""
        }
      ]
    },
    {
      "hash": "c1217ecbc28bcfebf5f31a164983c625dcb43e91",
      "short": "c1217ecbc",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-04 17:39:37 +0800",
      "subject": "fix: update interest rate handling and product configuration for spot markets (#2194)",
      "files": [
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-bitget/src/services/markets/product.ts",
          "patch": "commit c1217ecbc28bcfebf5f31a164983c625dcb43e91\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Thu Dec 4 17:39:37 2025 +0800\n\n    fix: update interest rate handling and product configuration for spot markets (#2194)\n\ndiff --git a/apps/vendor-bitget/src/services/markets/product.ts b/apps/vendor-bitget/src/services/markets/product.ts\nindex 26120b1f4..58a9ed5ca 100644\n--- a/apps/vendor-bitget/src/services/markets/product.ts\n+++ b/apps/vendor-bitget/src/services/markets/product.ts\n@@ -91 +91 @@ export const listProducts = async (): Promise<IProduct[]> => {\n-      no_interest_rate: false,\n+      no_interest_rate: true,\n"
        },
        {
          "additions": 6,
          "deletions": 7,
          "path": "apps/vendor-okx/src/public-data/interest_rate.ts",
          "patch": "commit c1217ecbc28bcfebf5f31a164983c625dcb43e91\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Thu Dec 4 17:39:37 2025 +0800\n\n    fix: update interest rate handling and product configuration for spot markets (#2194)\n\ndiff --git a/apps/vendor-okx/src/public-data/interest_rate.ts b/apps/vendor-okx/src/public-data/interest_rate.ts\nindex cd7e76172..a03083ef5 100644\n--- a/apps/vendor-okx/src/public-data/interest_rate.ts\n+++ b/apps/vendor-okx/src/public-data/interest_rate.ts\n@@ -15 +15 @@ createSQLWriter<ISeriesCollectingTask>(Terminal.fromNodeEnv(), {\n-        series_id: encodePath(x.datasource_id, x.product_id),\n+        series_id: x.product_id,\n@@ -37,2 +37 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\n-    const [datasource_id, product_id] = decodePath(series_id);\n-    const [instType, instId] = decodePath(product_id);\n+    const [, instType, instId] = decodePath(series_id);\n@@ -59,2 +58,2 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\n-            product_id,\n-            datasource_id,\n+            product_id: series_id,\n+            datasource_id: 'OKX',\n@@ -117,2 +116,2 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\n-            product_id,\n-            datasource_id,\n+            product_id: series_id,\n+            datasource_id: 'OKX',\n"
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json",
          "patch": "commit c1217ecbc28bcfebf5f31a164983c625dcb43e91\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Thu Dec 4 17:39:37 2025 +0800\n\n    fix: update interest rate handling and product configuration for spot markets (#2194)\n\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json b/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\nnew file mode 100644\nindex 000000000..0f78c4bf3\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-bitget\",\n+      \"comment\": \"fix product of spot\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-bitget\"\n+}\n\\ No newline at end of file\n"
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx/2025-12-04-09-37.json",
          "patch": "commit c1217ecbc28bcfebf5f31a164983c625dcb43e91\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Thu Dec 4 17:39:37 2025 +0800\n\n    fix: update interest rate handling and product configuration for spot markets (#2194)\n\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-04-09-37.json b/common/changes/@yuants/vendor-okx/2025-12-04-09-37.json\nnew file mode 100644\nindex 000000000..d044d2716\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-okx/2025-12-04-09-37.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-okx\",\n+      \"comment\": \"fix interest rate\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-okx\"\n+}\n\\ No newline at end of file\n"
        }
      ]
    },
    {
      "hash": "b285cde5901f5637b57f2bab6309c58615ecea3a",
      "short": "b285cde59",
      "author": "Siyuan Wang",
      "email": "c.one@thrimbda.com",
      "authoredAt": "2025-12-04 17:56:36 +0800",
      "subject": "feat: 添加请求间隔处理以优化 Binance 数据请求 (#2195)",
      "files": [
        {
          "additions": 11,
          "deletions": 0,
          "path": "apps/vendor-binance/SESSION_NOTES.md",
          "patch": "commit b285cde5901f5637b57f2bab6309c58615ecea3a\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 17:56:36 2025 +0800\n\n    feat: 添加请求间隔处理以优化 Binance 数据请求 (#2195)\n\ndiff --git a/apps/vendor-binance/SESSION_NOTES.md b/apps/vendor-binance/SESSION_NOTES.md\nindex 323540130..dd49b3364 100644\n--- a/apps/vendor-binance/SESSION_NOTES.md\n+++ b/apps/vendor-binance/SESSION_NOTES.md\n@@ -103,0 +104,11 @@\n+### 2025-12-04 — Codex\n+\n+- **本轮摘要**：\n+  - quote 的 open interest 与 margin 利率请求按 `exchangeInfo.rateLimits` 计算的间隔串行发送，并设置默认间隔（Futures 500ms、Spot/Margin 200ms），避免瞬时请求过快导致 IP 被封。\n+  - `margin/allPairs` 返回非数组或 4xx 时降级为空数组并记录日志，防止 quote pipeline 由于不可迭代输入崩溃。\n+  - 串行请求的节流改为使用 RxJS `timer` + `concatMap`，不再使用 `await wait`。\n+- **修改的文件**：\n+  - `apps/vendor-binance/src/public-data/quote.ts`\n+- **运行的测试 / 检查**：\n+  - `./node_modules/.bin/tsc --noEmit --project apps/vendor-binance/tsconfig.json`\n+\n"
        },
        {
          "additions": 122,
          "deletions": 32,
          "path": "apps/vendor-binance/src/public-data/quote.ts",
          "patch": "commit b285cde5901f5637b57f2bab6309c58615ecea3a\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 17:56:36 2025 +0800\n\n    feat: 添加请求间隔处理以优化 Binance 数据请求 (#2195)\n\ndiff --git a/apps/vendor-binance/src/public-data/quote.ts b/apps/vendor-binance/src/public-data/quote.ts\nindex 5a034f952..0445513ea 100644\n--- a/apps/vendor-binance/src/public-data/quote.ts\n+++ b/apps/vendor-binance/src/public-data/quote.ts\n@@ -6,0 +7,3 @@ import {\n+  catchError,\n+  combineLatest,\n+  concatMap,\n@@ -7,0 +11 @@ import {\n+  exhaustMap,\n@@ -13,0 +18 @@ import {\n+  of,\n@@ -18,0 +24,3 @@ import {\n+  startWith,\n+  tap,\n+  timer,\n@@ -22,0 +31 @@ import {\n+  getFutureExchangeInfo,\n@@ -25,0 +35 @@ import {\n+  getSpotExchangeInfo,\n@@ -29 +39,40 @@ const terminal = Terminal.fromNodeEnv();\n-const OPEN_INTEREST_TTL = process.env.OPEN_INTEREST_TTL ? Number(process.env.OPEN_INTEREST_TTL) : 120_000;\n+const DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS = 500;\n+const DEFAULT_MARGIN_RATE_REQUEST_INTERVAL_MS = 500;\n+const OPEN_INTEREST_TTL = process.env.OPEN_INTEREST_TTL ? Number(process.env.OPEN_INTEREST_TTL) : 300_000;\n+\n+interface IRateLimit {\n+  rateLimitType?: string;\n+  interval?: string;\n+  intervalNum?: number;\n+  limit?: number;\n+}\n+\n+const toIntervalMs = (interval?: string, intervalNum?: number) => {\n+  switch (interval) {\n+    case 'SECOND':\n+      return (intervalNum ?? 1) * 1_000;\n+    case 'MINUTE':\n+      return (intervalNum ?? 1) * 60_000;\n+    case 'HOUR':\n+      return (intervalNum ?? 1) * 3_600_000;\n+    case 'DAY':\n+      return (intervalNum ?? 1) * 86_400_000;\n+    default:\n+      return undefined;\n+  }\n+};\n+\n+const getRequestIntervalMs = (rateLimits: IRateLimit[] | undefined, fallbackMs: number) => {\n+  const intervals: number[] = [];\n+  for (const item of rateLimits ?? []) {\n+    if (item.rateLimitType !== 'REQUEST_WEIGHT' && item.rateLimitType !== 'RAW_REQUESTS') continue;\n+    const duration = toIntervalMs(item.interval, item.intervalNum);\n+    console.info('!!!!!', item, duration);\n+    const limit = item.limit;\n+    if (duration == null || limit == null || limit <= 0) continue;\n+    intervals.push(Math.ceil(duration / limit));\n+  }\n+  console.info('!!!!!', intervals);\n+  if (!intervals.length) return fallbackMs;\n+  return Math.max(fallbackMs, Math.max(...intervals));\n+};\n@@ -45,0 +95,13 @@ const openInterestCache = createCache<number>(\n+const futureRequestInterval$ = defer(() => getFutureExchangeInfo()).pipe(\n+  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\n+  catchError((err) => {\n+    console.warn('getFutureExchangeInfo failed when calculating request interval', err);\n+    return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\n+  }),\n+  retry({ delay: 60_000 }),\n+  shareReplay({ bufferSize: 1, refCount: true }),\n+  tap((v) => {\n+    console.info(`!!!!Determined future request interval: ${v} ms`);\n+  }),\n+);\n+\n@@ -87,11 +149,13 @@ const quoteFromBookTicker$ = futureBookTicker$.pipe(\n-const quoteFromOpenInterest$ = futureBookTicker$.pipe(\n-  mergeMap((entries) => from(entries || [])),\n-  mergeMap(\n-    (entry) =>\n-      from(openInterestCache.query(entry.symbol)).pipe(\n-        map(\n-          (openInterest): Partial<IQuote> => ({\n-            datasource_id: 'BINANCE',\n-            product_id: encodePath('BINANCE', 'USDT-FUTURE', entry.symbol),\n-            open_interest: `${openInterest ?? 0}`,\n-          }),\n+const quoteFromOpenInterest$ = combineLatest([futureBookTicker$, futureRequestInterval$]).pipe(\n+  exhaustMap(([entries, requestInterval]) =>\n+    from(entries || []).pipe(\n+      concatMap((entry, index) =>\n+        (index > 0 ? timer(requestInterval) : of(0)).pipe(\n+          mergeMap(() => from(openInterestCache.query(entry.symbol))),\n+          map(\n+            (openInterest): Partial<IQuote> => ({\n+              datasource_id: 'BINANCE',\n+              product_id: encodePath('BINANCE', 'USDT-FUTURE', entry.symbol),\n+              open_interest: `${openInterest ?? 0}`,\n+            }),\n+          ),\n@@ -100 +164 @@ const quoteFromOpenInterest$ = futureBookTicker$.pipe(\n-    5,\n+    ),\n@@ -139,0 +204,11 @@ const marginPairs$ = defer(() => getMarginAllPairs()).pipe(\n+  map((pairs) => {\n+    if (!Array.isArray(pairs)) {\n+      console.warn('getMarginAllPairs returned non-array payload', pairs);\n+      return [];\n+    }\n+    return pairs;\n+  }),\n+  catchError((err) => {\n+    console.warn('getMarginAllPairs failed', err);\n+    return of([] as IMarginPair[]);\n+  }),\n@@ -145,2 +220,15 @@ const marginPairs$ = defer(() => getMarginAllPairs()).pipe(\n-const quoteFromMarginRates$ = marginPairs$.pipe(\n-  mergeMap((pairs: IMarginPair[]) =>\n+const spotRequestInterval$ = defer(() => getSpotExchangeInfo()).pipe(\n+  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_MARGIN_RATE_REQUEST_INTERVAL_MS)),\n+  catchError((err) => {\n+    console.warn('getSpotExchangeInfo failed when calculating request interval', err);\n+    return of(DEFAULT_MARGIN_RATE_REQUEST_INTERVAL_MS);\n+  }),\n+  retry({ delay: 60_000 }),\n+  shareReplay({ bufferSize: 1, refCount: true }),\n+  tap((v) => {\n+    console.info(`!!!!Determined spot request interval: ${v} ms`);\n+  }),\n+);\n+\n+const quoteFromMarginRates$ = combineLatest([marginPairs$, spotRequestInterval$]).pipe(\n+  mergeMap(([pairs, requestInterval]) =>\n@@ -148,17 +236,19 @@ const quoteFromMarginRates$ = marginPairs$.pipe(\n-      mergeMap(\n-        (pair) =>\n-          defer(async () => {\n-            const [baseRate, quoteRate] = await Promise.all([\n-              marginInterestRateCache.query(pair.base),\n-              marginInterestRateCache.query(pair.quote),\n-            ]);\n-            return {\n-              datasource_id: 'BINANCE',\n-              product_id: encodePath('BINANCE', 'SPOT', pair.symbol),\n-              // User instruction: Long = Quote Rate, Short = Base Rate\n-              interest_rate_long: quoteRate,\n-              interest_rate_short: baseRate,\n-              updated_at: formatTime(Date.now()),\n-            } as Partial<IQuote>;\n-          }),\n-        5, // Concurrency\n+      concatMap((pair, index) =>\n+        (index > 0 ? timer(requestInterval) : of(0)).pipe(\n+          mergeMap(() => from(marginInterestRateCache.query(pair.base))),\n+          mergeMap((baseRate) =>\n+            timer(requestInterval).pipe(\n+              mergeMap(() => from(marginInterestRateCache.query(pair.quote))),\n+              map(\n+                (quoteRate): Partial<IQuote> => ({\n+                  datasource_id: 'BINANCE',\n+                  product_id: encodePath('BINANCE', 'SPOT', pair.symbol),\n+                  // User instruction: Long = Quote Rate, Short = Base Rate\n+                  interest_rate_long: quoteRate,\n+                  interest_rate_short: baseRate,\n+                  updated_at: formatTime(Date.now()),\n+                }),\n+              ),\n+            ),\n+          ),\n+        ),\n"
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-binance/2025-12-04-09-53.json",
          "patch": "commit b285cde5901f5637b57f2bab6309c58615ecea3a\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 17:56:36 2025 +0800\n\n    feat: 添加请求间隔处理以优化 Binance 数据请求 (#2195)\n\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json b/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\nnew file mode 100644\nindex 000000000..b95a3b843\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-binance\",\n+      \"comment\": \"add request interval to binance\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-binance\"\n+}\n\\ No newline at end of file\n"
        }
      ]
    },
    {
      "hash": "76802e0c0641c1b8fc26e883fa5d114200c367f4",
      "short": "76802e0c0",
      "author": "Siyuan Wang",
      "email": "c.one@thrimbda.com",
      "authoredAt": "2025-12-04 18:07:33 +0800",
      "subject": "feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)",
      "files": [
        {
          "additions": 11,
          "deletions": 0,
          "path": "apps/vendor-aster/SESSION_NOTES.md",
          "patch": "commit 76802e0c0641c1b8fc26e883fa5d114200c367f4\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 18:07:33 2025 +0800\n\n    feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)\n\ndiff --git a/apps/vendor-aster/SESSION_NOTES.md b/apps/vendor-aster/SESSION_NOTES.md\nindex f54c13cf4..8a7aaa694 100644\n--- a/apps/vendor-aster/SESSION_NOTES.md\n+++ b/apps/vendor-aster/SESSION_NOTES.md\n@@ -114,0 +115,11 @@\n+### 2025-12-04 — Codex\n+\n+- **本轮摘要**：\n+  - quote 服务按 `exchangeInfo` 的限频信息（若缺失则用默认 500ms）推算请求间隔，串行查询 open interest，避免过快轮询导致封禁。\n+  - ticker 与 open interest 通过 `groupBy + scan` 合并，持续输出同一 product 的增量字段；exchangeInfo 类型增加可选 `rateLimits`。\n+- **修改的文件**：\n+  - `apps/vendor-aster/src/api/public-api.ts`\n+  - `apps/vendor-aster/src/services/markets/quote.ts`\n+- **运行的测试 / 检查**：\n+  - `./node_modules/.bin/tsc --noEmit --project apps/vendor-aster/tsconfig.json`\n+\n"
        },
        {
          "additions": 26,
          "deletions": 19,
          "path": "apps/vendor-aster/src/api/public-api.ts",
          "patch": "commit 76802e0c0641c1b8fc26e883fa5d114200c367f4\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 18:07:33 2025 +0800\n\n    feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)\n\ndiff --git a/apps/vendor-aster/src/api/public-api.ts b/apps/vendor-aster/src/api/public-api.ts\nindex 052be628a..516014a16 100644\n--- a/apps/vendor-aster/src/api/public-api.ts\n+++ b/apps/vendor-aster/src/api/public-api.ts\n@@ -51,0 +52,25 @@ export const getFApiV1FundingRate = createApi<\n+export interface IAsterRateLimit {\n+  rateLimitType?: string;\n+  interval?: string;\n+  intervalNum?: number;\n+  limit?: number;\n+}\n+\n+export interface IAsterExchangeInfo {\n+  symbols: {\n+    symbol: string;\n+    status: 'TRADING' | 'BREAK' | 'HALT';\n+    baseAsset: string;\n+    quoteAsset: string;\n+    pricePrecision: number;\n+    quantityPrecision: number;\n+    baseAssetPrecision: number;\n+    quotePrecision: number;\n+    filters: {\n+      filterType: string;\n+      [key: string]: any;\n+    }[];\n+  }[];\n+  rateLimits?: IAsterRateLimit[];\n+}\n+\n@@ -57,19 +82 @@ export const getFApiV1FundingRate = createApi<\n-export const getFApiV1ExchangeInfo = createApi<\n-  {},\n-  {\n-    symbols: {\n-      symbol: string;\n-      status: 'TRADING' | 'BREAK' | 'HALT';\n-      baseAsset: string;\n-      quoteAsset: string;\n-      pricePrecision: number;\n-      quantityPrecision: number;\n-      baseAssetPrecision: number;\n-      quotePrecision: number;\n-      filters: {\n-        filterType: string;\n-        [key: string]: any;\n-      }[];\n-    }[];\n-  }\n->('GET', '/fapi/v1/exchangeInfo');\n+export const getFApiV1ExchangeInfo = createApi<{}, IAsterExchangeInfo>('GET', '/fapi/v1/exchangeInfo');\n"
        },
        {
          "additions": 109,
          "deletions": 6,
          "path": "apps/vendor-aster/src/services/markets/quote.ts",
          "patch": "commit 76802e0c0641c1b8fc26e883fa5d114200c367f4\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 18:07:33 2025 +0800\n\n    feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)\n\ndiff --git a/apps/vendor-aster/src/services/markets/quote.ts b/apps/vendor-aster/src/services/markets/quote.ts\nindex 68bcc4255..ead158a55 100644\n--- a/apps/vendor-aster/src/services/markets/quote.ts\n+++ b/apps/vendor-aster/src/services/markets/quote.ts\n@@ -6,2 +6,25 @@ import { decodePath, encodePath } from '@yuants/utils';\n-import { defer, filter, from, map, mergeMap, repeat, retry, shareReplay } from 'rxjs';\n-import { getFApiV1OpenInterest, getFApiV1TickerPrice } from '../../api/public-api';\n+import {\n+  catchError,\n+  combineLatest,\n+  concatMap,\n+  defer,\n+  filter,\n+  from,\n+  groupBy,\n+  map,\n+  merge,\n+  mergeMap,\n+  of,\n+  repeat,\n+  retry,\n+  scan,\n+  shareReplay,\n+  startWith,\n+  timer,\n+} from 'rxjs';\n+import {\n+  getFApiV1ExchangeInfo,\n+  getFApiV1OpenInterest,\n+  getFApiV1TickerPrice,\n+  IAsterRateLimit,\n+} from '../../api/public-api';\n@@ -9,0 +33 @@ const terminal = Terminal.fromNodeEnv();\n+const DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS = 500;\n@@ -11,0 +36,28 @@ const OPEN_INTEREST_TTL = process.env.OPEN_INTEREST_TTL ? Number(process.env.OPE\n+const toIntervalMs = (interval?: string, intervalNum?: number) => {\n+  switch (interval) {\n+    case 'SECOND':\n+      return (intervalNum ?? 1) * 1_000;\n+    case 'MINUTE':\n+      return (intervalNum ?? 1) * 60_000;\n+    case 'HOUR':\n+      return (intervalNum ?? 1) * 3_600_000;\n+    case 'DAY':\n+      return (intervalNum ?? 1) * 86_400_000;\n+    default:\n+      return undefined;\n+  }\n+};\n+\n+const getRequestIntervalMs = (rateLimits: IAsterRateLimit[] | undefined, fallbackMs: number) => {\n+  const intervals: number[] = [];\n+  for (const item of rateLimits ?? []) {\n+    if (item.rateLimitType !== 'REQUEST_WEIGHT' && item.rateLimitType !== 'RAW_REQUESTS') continue;\n+    const duration = toIntervalMs(item.interval, item.intervalNum);\n+    const limit = item.limit;\n+    if (duration == null || limit == null || limit <= 0) continue;\n+    intervals.push(Math.ceil(duration / limit));\n+  }\n+  if (!intervals.length) return fallbackMs;\n+  return Math.max(fallbackMs, Math.max(...intervals));\n+};\n+\n@@ -25 +77,19 @@ const openInterestCache = createCache<string>(\n-const quote$ = defer(() => getFApiV1TickerPrice({})).pipe(\n+const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\n+  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\n+  catchError((err) => {\n+    console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\n+    return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\n+  }),\n+  startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\n+  retry({ delay: 60_000 }),\n+  shareReplay({ bufferSize: 1, refCount: true }),\n+);\n+\n+const ticker$ = defer(() => getFApiV1TickerPrice({})).pipe(\n+  map((tickers) => (Array.isArray(tickers) ? tickers : [])),\n+  repeat({ delay: 1000 }),\n+  retry({ delay: 5000 }),\n+  shareReplay({ bufferSize: 1, refCount: true }),\n+);\n+\n+const quoteFromTicker$ = ticker$.pipe(\n@@ -34 +103,0 @@ const quote$ = defer(() => getFApiV1TickerPrice({})).pipe(\n-      open_interest: '0',\n@@ -38,2 +107,36 @@ const quote$ = defer(() => getFApiV1TickerPrice({})).pipe(\n-  repeat({ delay: 1000 }),\n-  retry({ delay: 5000 }),\n+);\n+\n+const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\n+  mergeMap(([tickers, requestInterval]) =>\n+    from(tickers).pipe(\n+      concatMap((ticker, index) =>\n+        (index > 0 ? timer(requestInterval) : of(0)).pipe(\n+          mergeMap(() => from(openInterestCache.query(ticker.symbol))),\n+          map(\n+            (openInterest): Partial<IQuote> => ({\n+              datasource_id: 'ASTER',\n+              product_id: encodePath('ASTER', 'PERP', ticker.symbol),\n+              open_interest: `${openInterest ?? 0}`,\n+              updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\n+            }),\n+          ),\n+        ),\n+      ),\n+    ),\n+  ),\n+);\n+\n+const quote$ = merge(quoteFromTicker$, quoteFromOpenInterest$).pipe(\n+  groupBy((quote) => quote.product_id),\n+  mergeMap((group$) =>\n+    group$.pipe(\n+      scan(\n+        (acc, cur) =>\n+          Object.assign(acc, cur, {\n+            datasource_id: 'ASTER',\n+            product_id: group$.key,\n+          }),\n+        {} as Partial<IQuote>,\n+      ),\n+    ),\n+  ),\n"
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-aster/2025-12-04-10-05.json",
          "patch": "commit 76802e0c0641c1b8fc26e883fa5d114200c367f4\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Thu Dec 4 18:07:33 2025 +0800\n\n    feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)\n\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json b/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\nnew file mode 100644\nindex 000000000..6013a6596\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-aster\",\n+      \"comment\": \"添加请求间隔处理以优化 Aster 数据请求\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-aster\"\n+}\n\\ No newline at end of file\n"
        }
      ]
    },
    {
      "hash": "61e0a8bf85bd52fa737f3ce4ee16719d12f357b2",
      "short": "61e0a8bf8",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-04 18:37:01 +0800",
      "subject": "chore: bump version (#2196)",
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-aster/CHANGELOG.json",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\nindex 36d113212..157e86d10 100644\n--- a/apps/vendor-aster/CHANGELOG.json\n+++ b/apps/vendor-aster/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.7.18\",\n+      \"tag\": \"@yuants/vendor-aster_v0.7.18\",\n+      \"date\": \"Thu, 04 Dec 2025 10:36:34 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"添加请求间隔处理以优化 Aster 数据请求\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n"
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-aster/CHANGELOG.md",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\nindex e54418abb..102ea3be5 100644\n--- a/apps/vendor-aster/CHANGELOG.md\n+++ b/apps/vendor-aster/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\n+This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\n+\n+## 0.7.18\n+Thu, 04 Dec 2025 10:36:34 GMT\n+\n+### Patches\n+\n+- 添加请求间隔处理以优化 Aster 数据请求\n"
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-aster/package.json",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\nindex c65261618..86120e2ae 100644\n--- a/apps/vendor-aster/package.json\n+++ b/apps/vendor-aster/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.7.17\",\n+  \"version\": \"0.7.18\",\n"
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-binance/CHANGELOG.json",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\nindex dfcef644e..3c0f26e0c 100644\n--- a/apps/vendor-binance/CHANGELOG.json\n+++ b/apps/vendor-binance/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.10.10\",\n+      \"tag\": \"@yuants/vendor-binance_v0.10.10\",\n+      \"date\": \"Thu, 04 Dec 2025 10:36:34 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"add request interval to binance\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n"
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-binance/CHANGELOG.md",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\nindex ef4fba6e7..eda868de2 100644\n--- a/apps/vendor-binance/CHANGELOG.md\n+++ b/apps/vendor-binance/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\n+This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\n+\n+## 0.10.10\n+Thu, 04 Dec 2025 10:36:34 GMT\n+\n+### Patches\n+\n+- add request interval to binance\n"
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-binance/package.json",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\nindex 401e06f8e..2a11fca6e 100644\n--- a/apps/vendor-binance/package.json\n+++ b/apps/vendor-binance/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.10.9\",\n+  \"version\": \"0.10.10\",\n"
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-bitget/CHANGELOG.json",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/CHANGELOG.json b/apps/vendor-bitget/CHANGELOG.json\nindex def2eb706..7246ddf96 100644\n--- a/apps/vendor-bitget/CHANGELOG.json\n+++ b/apps/vendor-bitget/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.11.1\",\n+      \"tag\": \"@yuants/vendor-bitget_v0.11.1\",\n+      \"date\": \"Thu, 04 Dec 2025 10:36:34 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"fix product of spot\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n"
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-bitget/CHANGELOG.md",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/CHANGELOG.md b/apps/vendor-bitget/CHANGELOG.md\nindex 488d5bac4..4801566cf 100644\n--- a/apps/vendor-bitget/CHANGELOG.md\n+++ b/apps/vendor-bitget/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Thu, 04 Dec 2025 06:30:10 GMT and should not be manually modified.\n+This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\n+\n+## 0.11.1\n+Thu, 04 Dec 2025 10:36:34 GMT\n+\n+### Patches\n+\n+- fix product of spot\n"
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-bitget/package.json",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/package.json b/apps/vendor-bitget/package.json\nindex 1bf9bfbff..7d2107e02 100644\n--- a/apps/vendor-bitget/package.json\n+++ b/apps/vendor-bitget/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.11.0\",\n+  \"version\": \"0.11.1\",\n"
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-okx/CHANGELOG.json",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\nindex 8d65b1d3c..1274e028e 100644\n--- a/apps/vendor-okx/CHANGELOG.json\n+++ b/apps/vendor-okx/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.28.3\",\n+      \"tag\": \"@yuants/vendor-okx_v0.28.3\",\n+      \"date\": \"Thu, 04 Dec 2025 10:36:34 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"fix interest rate\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n"
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-okx/CHANGELOG.md",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\nindex aa516f4b8..2059225e3 100644\n--- a/apps/vendor-okx/CHANGELOG.md\n+++ b/apps/vendor-okx/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\n+This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\n+\n+## 0.28.3\n+Thu, 04 Dec 2025 10:36:34 GMT\n+\n+### Patches\n+\n+- fix interest rate\n"
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-okx/package.json",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\nindex 8adb8de71..22fafd82e 100644\n--- a/apps/vendor-okx/package.json\n+++ b/apps/vendor-okx/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.28.2\",\n+  \"version\": \"0.28.3\",\n"
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-aster/2025-12-04-10-05.json",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json b/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\ndeleted file mode 100644\nindex 6013a6596..000000000\n--- a/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-aster\",\n-      \"comment\": \"添加请求间隔处理以优化 Aster 数据请求\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-aster\"\n-}\n\\ No newline at end of file\n"
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-aster/{main_2025-12-03-18-20.json => main_2025-12-04-10-36.json}",
          "patch": ""
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-binance/2025-12-04-09-53.json",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json b/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\ndeleted file mode 100644\nindex b95a3b843..000000000\n--- a/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-binance\",\n-      \"comment\": \"add request interval to binance\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-binance\"\n-}\n\\ No newline at end of file\n"
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-binance/{main_2025-12-03-18-20.json => main_2025-12-04-10-36.json}",
          "patch": ""
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json b/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\ndeleted file mode 100644\nindex 0f78c4bf3..000000000\n--- a/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-bitget\",\n-      \"comment\": \"fix product of spot\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-bitget\"\n-}\n\\ No newline at end of file\n"
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-bitget/{main_2025-12-04-06-30.json => main_2025-12-04-10-36.json}",
          "patch": ""
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-okx/2025-12-04-09-37.json",
          "patch": "commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 4 18:37:01 2025 +0800\n\n    chore: bump version (#2196)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-04-09-37.json b/common/changes/@yuants/vendor-okx/2025-12-04-09-37.json\ndeleted file mode 100644\nindex d044d2716..000000000\n--- a/common/changes/@yuants/vendor-okx/2025-12-04-09-37.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-okx\",\n-      \"comment\": \"fix interest rate\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-okx\"\n-}\n\\ No newline at end of file\n"
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx/{main_2025-12-03-18-20.json => main_2025-12-04-10-36.json}",
          "patch": ""
        }
      ]
    },
    {
      "hash": "a723dba9dcfcbaf655d2a4aa62602e78f670ae29",
      "short": "a723dba9d",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-05 00:34:31 +0800",
      "subject": "feat: 移除系列收集任务写入器 (#2198)",
      "files": [
        {
          "additions": 3,
          "deletions": 39,
          "path": "apps/vendor-hyperliquid/src/services/markets/interest-rate.ts",
          "patch": "commit a723dba9dcfcbaf655d2a4aa62602e78f670ae29\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Fri Dec 5 00:34:31 2025 +0800\n\n    feat: 移除系列收集任务写入器 (#2198)\n\ndiff --git a/apps/vendor-hyperliquid/src/services/markets/interest-rate.ts b/apps/vendor-hyperliquid/src/services/markets/interest-rate.ts\nindex af194dc1f..a93246729 100644\n--- a/apps/vendor-hyperliquid/src/services/markets/interest-rate.ts\n+++ b/apps/vendor-hyperliquid/src/services/markets/interest-rate.ts\n@@ -2 +2 @@ import { IInterestRate } from '@yuants/data-interest-rate';\n-import { createSeriesProvider, ISeriesCollectingTask } from '@yuants/data-series';\n+import { createSeriesProvider } from '@yuants/data-series';\n@@ -4,4 +4,2 @@ import { Terminal } from '@yuants/protocol';\n-import { createSQLWriter } from '@yuants/sql';\n-import { decodePath, encodePath, formatTime } from '@yuants/utils';\n-import { defer, map, mergeAll, repeat, retry, shareReplay, tap } from 'rxjs';\n-import { getHistoricalFundingRates, getPerpetualsMetaData } from '../../api/public-api';\n+import { decodePath, formatTime } from '@yuants/utils';\n+import { getHistoricalFundingRates } from '../../api/public-api';\n@@ -11,34 +8,0 @@ const terminal = Terminal.fromNodeEnv();\n-const perpetualProducts$ = defer(async () => {\n-  const meta = await getPerpetualsMetaData();\n-  return meta.universe.map((product) => ({\n-    product_id: encodePath('HYPERLIQUID', 'PERPETUAL', `${product.name}-USD`),\n-    datasource_id: 'HYPERLIQUID',\n-    no_interest_rate: false,\n-  }));\n-}).pipe(\n-  tap({ error: (err) => console.error(formatTime(Date.now()), 'PerpetualProductFetchFailed', err) }),\n-  retry({ delay: 10_000 }),\n-  repeat({ delay: 3600_000 }),\n-  shareReplay({ bufferSize: 1, refCount: true }),\n-);\n-\n-createSQLWriter<ISeriesCollectingTask>(terminal, {\n-  data$: perpetualProducts$.pipe(\n-    map((products) => products.filter((product) => product.no_interest_rate === false)),\n-    mergeAll(),\n-    map(\n-      (product): ISeriesCollectingTask => ({\n-        series_id: product.product_id,\n-        table_name: 'interest_rate',\n-        cron_pattern: '0 * * * *',\n-        cron_timezone: 'UTC',\n-        disabled: false,\n-        replay_count: 0,\n-      }),\n-    ),\n-  ),\n-  tableName: 'series_collecting_task',\n-  writeInterval: 1000,\n-  conflictKeys: ['series_id', 'table_name'],\n-});\n-\n"
        },
        {
          "additions": 3,
          "deletions": 24,
          "path": "apps/vendor-okx/src/public-data/interest_rate.ts",
          "patch": "commit a723dba9dcfcbaf655d2a4aa62602e78f670ae29\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Fri Dec 5 00:34:31 2025 +0800\n\n    feat: 移除系列收集任务写入器 (#2198)\n\ndiff --git a/apps/vendor-okx/src/public-data/interest_rate.ts b/apps/vendor-okx/src/public-data/interest_rate.ts\nindex a03083ef5..f3171f275 100644\n--- a/apps/vendor-okx/src/public-data/interest_rate.ts\n+++ b/apps/vendor-okx/src/public-data/interest_rate.ts\n@@ -2 +2 @@ import { IInterestRate } from '@yuants/data-interest-rate';\n-import { createSeriesProvider, ISeriesCollectingTask } from '@yuants/data-series';\n+import { createSeriesProvider } from '@yuants/data-series';\n@@ -4,3 +4,2 @@ import { Terminal } from '@yuants/protocol';\n-import { createSQLWriter } from '@yuants/sql';\n-import { decodePath, encodePath, formatTime } from '@yuants/utils';\n-import { firstValueFrom, map, mergeAll, timer } from 'rxjs';\n+import { decodePath, formatTime } from '@yuants/utils';\n+import { firstValueFrom, timer } from 'rxjs';\n@@ -8,20 +6,0 @@ import { getFundingRateHistory, getLendingRateHistory } from '../api/public-api'\n-import { productService } from './product';\n-\n-createSQLWriter<ISeriesCollectingTask>(Terminal.fromNodeEnv(), {\n-  data$: productService.products$.pipe(\n-    mergeAll(),\n-    map(\n-      (x): ISeriesCollectingTask => ({\n-        series_id: x.product_id,\n-        table_name: 'interest_rate',\n-        cron_pattern: '0 * * * *', // 每小时执行一次\n-        cron_timezone: 'UTC',\n-        disabled: false,\n-        replay_count: 0,\n-      }),\n-    ),\n-  ),\n-  tableName: 'series_collecting_task',\n-  writeInterval: 1000,\n-  conflictKeys: ['series_id', 'table_name'],\n-});\n"
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json",
          "patch": "commit a723dba9dcfcbaf655d2a4aa62602e78f670ae29\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Fri Dec 5 00:34:31 2025 +0800\n\n    feat: 移除系列收集任务写入器 (#2198)\n\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\nnew file mode 100644\nindex 000000000..b8b1e588a\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-hyperliquid\",\n+      \"comment\": \"remove series_collector_task writer\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-hyperliquid\"\n+}\n\\ No newline at end of file\n"
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx/2025-12-04-16-30.json",
          "patch": "commit a723dba9dcfcbaf655d2a4aa62602e78f670ae29\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Fri Dec 5 00:34:31 2025 +0800\n\n    feat: 移除系列收集任务写入器 (#2198)\n\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-04-16-30.json b/common/changes/@yuants/vendor-okx/2025-12-04-16-30.json\nnew file mode 100644\nindex 000000000..b331ba422\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-okx/2025-12-04-16-30.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-okx\",\n+      \"comment\": \"remove series_collector_task writer\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-okx\"\n+}\n\\ No newline at end of file\n"
        }
      ]
    },
    {
      "hash": "c36262caddee5b4ee9ada840501c81e554b5de6a",
      "short": "c36262cad",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-05 00:51:27 +0800",
      "subject": "chore: bump version (#2199)",
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-hyperliquid/CHANGELOG.json",
          "patch": "commit c36262caddee5b4ee9ada840501c81e554b5de6a\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Fri Dec 5 00:51:27 2025 +0800\n\n    chore: bump version (#2199)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.json b/apps/vendor-hyperliquid/CHANGELOG.json\nindex 04b02727f..3de161f60 100644\n--- a/apps/vendor-hyperliquid/CHANGELOG.json\n+++ b/apps/vendor-hyperliquid/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.7.8\",\n+      \"tag\": \"@yuants/vendor-hyperliquid_v0.7.8\",\n+      \"date\": \"Thu, 04 Dec 2025 16:51:07 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"remove series_collector_task writer\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n"
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-hyperliquid/CHANGELOG.md",
          "patch": "commit c36262caddee5b4ee9ada840501c81e554b5de6a\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Fri Dec 5 00:51:27 2025 +0800\n\n    chore: bump version (#2199)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.md b/apps/vendor-hyperliquid/CHANGELOG.md\nindex 632f8ed01..5c3abad78 100644\n--- a/apps/vendor-hyperliquid/CHANGELOG.md\n+++ b/apps/vendor-hyperliquid/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\n+This log was last generated on Thu, 04 Dec 2025 16:51:07 GMT and should not be manually modified.\n+\n+## 0.7.8\n+Thu, 04 Dec 2025 16:51:07 GMT\n+\n+### Patches\n+\n+- remove series_collector_task writer\n"
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-hyperliquid/package.json",
          "patch": "commit c36262caddee5b4ee9ada840501c81e554b5de6a\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Fri Dec 5 00:51:27 2025 +0800\n\n    chore: bump version (#2199)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-hyperliquid/package.json b/apps/vendor-hyperliquid/package.json\nindex 5a46f1033..267ed6867 100644\n--- a/apps/vendor-hyperliquid/package.json\n+++ b/apps/vendor-hyperliquid/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.7.7\",\n+  \"version\": \"0.7.8\",\n"
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-okx/CHANGELOG.json",
          "patch": "commit c36262caddee5b4ee9ada840501c81e554b5de6a\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Fri Dec 5 00:51:27 2025 +0800\n\n    chore: bump version (#2199)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\nindex 1274e028e..7649a74c2 100644\n--- a/apps/vendor-okx/CHANGELOG.json\n+++ b/apps/vendor-okx/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.28.4\",\n+      \"tag\": \"@yuants/vendor-okx_v0.28.4\",\n+      \"date\": \"Thu, 04 Dec 2025 16:51:07 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"remove series_collector_task writer\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n"
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-okx/CHANGELOG.md",
          "patch": "commit c36262caddee5b4ee9ada840501c81e554b5de6a\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Fri Dec 5 00:51:27 2025 +0800\n\n    chore: bump version (#2199)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\nindex 2059225e3..8acce7199 100644\n--- a/apps/vendor-okx/CHANGELOG.md\n+++ b/apps/vendor-okx/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\n+This log was last generated on Thu, 04 Dec 2025 16:51:07 GMT and should not be manually modified.\n+\n+## 0.28.4\n+Thu, 04 Dec 2025 16:51:07 GMT\n+\n+### Patches\n+\n+- remove series_collector_task writer\n"
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-okx/package.json",
          "patch": "commit c36262caddee5b4ee9ada840501c81e554b5de6a\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Fri Dec 5 00:51:27 2025 +0800\n\n    chore: bump version (#2199)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\nindex 22fafd82e..3e058d461 100644\n--- a/apps/vendor-okx/package.json\n+++ b/apps/vendor-okx/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.28.3\",\n+  \"version\": \"0.28.4\",\n"
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json",
          "patch": "commit c36262caddee5b4ee9ada840501c81e554b5de6a\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Fri Dec 5 00:51:27 2025 +0800\n\n    chore: bump version (#2199)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\ndeleted file mode 100644\nindex b8b1e588a..000000000\n--- a/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-hyperliquid\",\n-      \"comment\": \"remove series_collector_task writer\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-hyperliquid\"\n-}\n\\ No newline at end of file\n"
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-hyperliquid/{main_2025-12-03-18-20.json => main_2025-12-04-16-51.json}",
          "patch": ""
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-okx/2025-12-04-16-30.json",
          "patch": "commit c36262caddee5b4ee9ada840501c81e554b5de6a\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Fri Dec 5 00:51:27 2025 +0800\n\n    chore: bump version (#2199)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-04-16-30.json b/common/changes/@yuants/vendor-okx/2025-12-04-16-30.json\ndeleted file mode 100644\nindex b331ba422..000000000\n--- a/common/changes/@yuants/vendor-okx/2025-12-04-16-30.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-okx\",\n-      \"comment\": \"remove series_collector_task writer\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-okx\"\n-}\n\\ No newline at end of file\n"
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx/{main_2025-12-04-10-36.json => main_2025-12-04-16-51.json}",
          "patch": ""
        }
      ]
    }
  ],
  "metadata": {
    "tool": "git-changes-reporter",
    "version": "1.0.0",
    "repository": "/home/runner/work/Yuan/Yuan"
  }
}