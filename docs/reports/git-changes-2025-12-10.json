{
  "range": {
    "old": "4a65d80af6fa6088c5c6e695c8a73777e6f217df",
    "new": "dcb3ba9551a2cd4284bc896083a3213c639da2f6",
    "label": "4a65d80af..dcb3ba955",
    "startDate": "2025-12-09",
    "endDate": "2025-12-10",
    "commitCount": 18,
    "generatedAt": "2025-12-10T04:54:33.277Z"
  },
  "contributors": [
    {
      "name": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "commits": 5
    },
    {
      "name": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "commits": 5
    },
    {
      "name": "Ryan",
      "email": "stayrealrhr@gmail.com",
      "commits": 1
    },
    {
      "name": "github-actions[bot]",
      "email": "41898282+github-actions[bot]@users.noreply.github.com",
      "commits": 6
    },
    {
      "name": "Siyuan Wang",
      "email": "c.one@thrimbda.com",
      "commits": 1
    }
  ],
  "directoryAnalysis": {
    "topLevel": [
      {
        "dir": "apps",
        "fileCount": 58
      },
      {
        "dir": "common",
        "fileCount": 25
      },
      {
        "dir": "libraries",
        "fileCount": 21
      },
      {
        "dir": "docs",
        "fileCount": 12
      },
      {
        "dir": "distributions",
        "fileCount": 3
      },
      {
        "dir": ".claude",
        "fileCount": 1
      },
      {
        "dir": ".github",
        "fileCount": 1
      }
    ],
    "projects": [
      {
        "project": "common",
        "fileCount": 25,
        "marker": null
      },
      {
        "project": "docs",
        "fileCount": 12,
        "marker": null
      },
      {
        "project": "apps/virtual-exchange",
        "fileCount": 6,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-aster",
        "fileCount": 5,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-binance",
        "fileCount": 5,
        "marker": "package.json"
      },
      {
        "project": "libraries/data-account",
        "fileCount": 5,
        "marker": "package.json"
      },
      {
        "project": "libraries/exchange",
        "fileCount": 4,
        "marker": "package.json"
      },
      {
        "project": "apps/account-composer",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/agent",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/fund",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/risk-manager",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/trade-copier",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-bitget",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-ctp",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-gate",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-huobi",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-hyperliquid",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-okx-web3",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-okx",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-solana",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-turboflow",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "distributions/origin",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "libraries/account-info-resolver",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "libraries/agent",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "libraries/kernel",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "libraries/order",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": ".claude",
        "fileCount": 1,
        "marker": null
      },
      {
        "project": ".github",
        "fileCount": 1,
        "marker": null
      }
    ],
    "markersUsed": [
      "package.json",
      "Cargo.toml",
      "go.mod",
      "requirements.txt",
      "pyproject.toml",
      "setup.py",
      "pom.xml",
      "build.gradle",
      "build.gradle.kts",
      "CMakeLists.txt",
      "Makefile",
      "pubspec.yaml",
      "mix.exs",
      "Gemfile",
      "composer.json"
    ]
  },
  "commits": [
    {
      "hash": "f3139db5123d47153dc0f8b1b70b2c62bbfcc75b",
      "short": "f3139db51",
      "author": "Siyuan Wang",
      "email": "c.one@thrimbda.com",
      "authoredAt": "2025-12-09 15:28:39 +0800",
      "subject": "chore(ci): create pr by app (#2272)",
      "conventionalCommit": {
        "type": "chore",
        "scope": "ci",
        "breaking": false
      },
      "files": [
        {
          "additions": 4,
          "deletions": 4,
          "path": ".claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh",
          "changeType": "modified",
          "patch": "commit f3139db5123d47153dc0f8b1b70b2c62bbfcc75b\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Tue Dec 9 15:28:39 2025 +0800\n\n    chore(ci): create pr by app (#2272)\n\ndiff --git a/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh b/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\nindex b1e799534..2db926737 100755\n--- a/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\n+++ b/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\n@@ -12 +12 @@\n-#   GITHUB_TOKEN (required)\n+#   APP_TOKEN (required)\n@@ -29,2 +29,2 @@ fi\n-if [[ -z \"${GITHUB_TOKEN:-}\" ]]; then\n-  echo \"GITHUB_TOKEN is required\"\n+if [[ -z \"${APP_TOKEN:-}\" ]]; then\n+  echo \"APP_TOKEN is required\"\n@@ -39 +39 @@ fi\n-export GH_TOKEN=\"$GITHUB_TOKEN\"\n+export GH_TOKEN=\"$APP_TOKEN\"\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 0,
          "path": ".github/workflows/daily-git-report.yml",
          "changeType": "added",
          "patch": "commit f3139db5123d47153dc0f8b1b70b2c62bbfcc75b\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Tue Dec 9 15:28:39 2025 +0800\n\n    chore(ci): create pr by app (#2272)\n\ndiff --git a/.github/workflows/daily-git-report.yml b/.github/workflows/daily-git-report.yml\nindex 2bdd46b5e..a514e6706 100644\n--- a/.github/workflows/daily-git-report.yml\n+++ b/.github/workflows/daily-git-report.yml\n@@ -93,0 +94 @@ jobs:\n+            5) 必须运行 validate-report.js 脚本以确保报告格式正确。\n@@ -106,0 +108,6 @@ jobs:\n+      - uses: actions/create-github-app-token@v1\n+        id: generate-token\n+        with:\n+          app-id: ${{ secrets.APP_ID }}\n+          private-key: ${{ secrets.APP_PRIVATE_KEY }}\n+\n@@ -111,0 +119 @@ jobs:\n+          APP_TOKEN: ${{ steps.generate-token.outputs.token }}\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "fa4438943e5ac8a10c6e0230622f9a5a29deabea",
      "short": "fa4438943",
      "author": "github-actions[bot]",
      "email": "41898282+github-actions[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-09 15:29:17 +0800",
      "subject": "feat: add daily git change report for 2025-12-09 - 15 commits (#2270)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 1786,
          "deletions": 0,
          "path": "docs/reports/git-changes-2025-12-09.json",
          "changeType": "added",
          "patch": "commit fa4438943e5ac8a10c6e0230622f9a5a29deabea\nAuthor: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 15:29:17 2025 +0800\n\n    feat: add daily git change report for 2025-12-09 - 15 commits (#2270)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n    Co-authored-by: Siyuan Wang <c.one@thrimbda.com>\n\ndiff --git a/docs/reports/git-changes-2025-12-09.json b/docs/reports/git-changes-2025-12-09.json\nnew file mode 100644\nindex 000000000..8af338313\n--- /dev/null\n+++ b/docs/reports/git-changes-2025-12-09.json\n@@ -0,0 +1,1786 @@\n+{\n+  \"range\": {\n+    \"old\": \"4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\",\n+    \"new\": \"4a65d80af6fa6088c5c6e695c8a73777e6f217df\",\n+    \"label\": \"4d9c58da8..4a65d80af\",\n+    \"startDate\": \"2025-12-08\",\n+    \"endDate\": \"2025-12-09\",\n+    \"commitCount\": 15,\n+    \"generatedAt\": \"2025-12-09T00:06:04.721Z\"\n+  },\n+  \"contributors\": [\n+    {\n+      \"name\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"commits\": 5\n+    },\n+    {\n+      \"name\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"commits\": 5\n+    },\n+    {\n+      \"name\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"commits\": 4\n+    },\n+    {\n+      \"name\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"commits\": 1\n+    }\n+  ],\n+  \"directoryAnalysis\": {\n+    \"topLevel\": [\n+      {\n+        \"dir\": \"apps\",\n+        \"fileCount\": 39\n+      },\n+      {\n+        \"dir\": \"common\",\n+        \"fileCount\": 6\n+      },\n+      {\n+        \"dir\": \"ui\",\n+        \"fileCount\": 1\n+      }\n+    ],\n+    \"projects\": [\n+      {\n+        \"project\": \"apps/vendor-gate\",\n+        \"fileCount\": 9,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-aster\",\n+        \"fileCount\": 7,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-hyperliquid\",\n+        \"fileCount\": 7,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-binance\",\n+        \"fileCount\": 6,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"common\",\n+        \"fileCount\": 6,\n+        \"marker\": null\n+      },\n+      {\n+        \"project\": \"apps/vendor-huobi\",\n+        \"fileCount\": 5,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-okx\",\n+        \"fileCount\": 5,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"ui/web\",\n+        \"fileCount\": 1,\n+        \"marker\": \"package.json\"\n+      }\n+    ],\n+    \"markersUsed\": [\n+      \"package.json\",\n+      \"Cargo.toml\",\n+      \"go.mod\",\n+      \"requirements.txt\",\n+      \"pyproject.toml\",\n+      \"setup.py\",\n+      \"pom.xml\",\n+      \"build.gradle\",\n+      \"build.gradle.kts\",\n+      \"CMakeLists.txt\",\n+      \"Makefile\",\n+      \"pubspec.yaml\",\n+      \"mix.exs\",\n+      \"Gemfile\",\n+      \"composer.json\"\n+    ]\n+  },\n+  \"commits\": [\n+    {\n+      \"hash\": \"fbb85da27991cc62afe8aa6baa510f21b294c025\",\n+      \"short\": \"fbb85da27\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-08 22:57:39 +0800\",\n+      \"subject\": \"feat: fix symbol (#2255)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-aster/src/services/orders/submitOrder.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit fbb85da27991cc62afe8aa6baa510f21b294c025\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Mon Dec 8 22:57:39 2025 +0800\\n\\n    feat: fix symbol (#2255)\\n\\ndiff --git a/apps/vendor-aster/src/services/orders/submitOrder.ts b/apps/vendor-aster/src/services/orders/submitOrder.ts\\nindex 9e99af753..37791f5bf 100644\\n--- a/apps/vendor-aster/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-aster/src/services/orders/submitOrder.ts\\n@@ -10,2 +10,2 @@ const parseProductId = (productId?: string) => {\\n-  if (parts.length >= 2) {\\n-    return { category: parts[0], symbol: parts.slice(1).join('/') };\\n+  if (parts.length >= 3) {\\n+    return { category: parts[1], symbol: parts.slice(2).join('/') };\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit fbb85da27991cc62afe8aa6baa510f21b294c025\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Mon Dec 8 22:57:39 2025 +0800\\n\\n    feat: fix symbol (#2255)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-08-14-54.json b/common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\\nnew file mode 100644\\nindex 000000000..ef9f41ad7\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"fix symbol\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"ec638fca239e77b09a7ca453956b7d1f334a1515\",\n+      \"short\": \"ec638fca2\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-08 23:19:08 +0800\",\n+      \"subject\": \"feat: add liquidation price to position info and account summary (#2256)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 4,\n+          \"path\": \"apps/vendor-huobi/src/api/private-api.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit ec638fca239e77b09a7ca453956b7d1f334a1515\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:19:08 2025 +0800\\n\\n    feat: add liquidation price to position info and account summary (#2256)\\n\\ndiff --git a/apps/vendor-huobi/src/api/private-api.ts b/apps/vendor-huobi/src/api/private-api.ts\\nindex 644260e67..6c9422f76 100644\\n--- a/apps/vendor-huobi/src/api/private-api.ts\\n+++ b/apps/vendor-huobi/src/api/private-api.ts\\n@@ -130,0 +131 @@ export const getSwapCrossPositionInfo = (\\n+    symbol: string;\\n@@ -132,3 +132,0 @@ export const getSwapCrossPositionInfo = (\\n-    contract_type: string;\\n-    direction: string;\\n-    margin_mode: string;\\n@@ -136,0 +135,2 @@ export const getSwapCrossPositionInfo = (\\n+    frozen: number;\\n+    cost_open: number;\\n@@ -138 +137,0 @@ export const getSwapCrossPositionInfo = (\\n-    last_price: number;\\n@@ -139,0 +139 @@ export const getSwapCrossPositionInfo = (\\n+    profit_rate: number;\\n@@ -140,0 +141,13 @@ export const getSwapCrossPositionInfo = (\\n+    position_margin: number;\\n+    direction: string;\\n+    profit: number;\\n+    last_price: number;\\n+    margin_asset: string;\\n+    margin_mode: string;\\n+    margin_account: string;\\n+    contract_type: string;\\n+    pair: string;\\n+    business_type: string;\\n+    position_mode: string;\\n+    adl_risk_percent: string;\\n+    liquidation_price?: number;\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-huobi/src/services/accounts/swap.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit ec638fca239e77b09a7ca453956b7d1f334a1515\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:19:08 2025 +0800\\n\\n    feat: add liquidation price to position info and account summary (#2256)\\n\\ndiff --git a/apps/vendor-huobi/src/services/accounts/swap.ts b/apps/vendor-huobi/src/services/accounts/swap.ts\\nindex c847a74db..91ef044f0 100644\\n--- a/apps/vendor-huobi/src/services/accounts/swap.ts\\n+++ b/apps/vendor-huobi/src/services/accounts/swap.ts\\n@@ -45,0 +46 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n+      liquidation_price: v.liquidation_price ? `${v.liquidation_price}` : undefined,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/accountInfos/trading.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit ec638fca239e77b09a7ca453956b7d1f334a1515\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:19:08 2025 +0800\\n\\n    feat: add liquidation price to position info and account summary (#2256)\\n\\ndiff --git a/apps/vendor-okx/src/accountInfos/trading.ts b/apps/vendor-okx/src/accountInfos/trading.ts\\nindex 60ded8fde..57ba84894 100644\\n--- a/apps/vendor-okx/src/accountInfos/trading.ts\\n+++ b/apps/vendor-okx/src/accountInfos/trading.ts\\n@@ -78,0 +79 @@ export const getTradingAccountInfo: IActionHandlerOfGetAccountInfo<ICredential>\\n+      liquidation_price: x.liqPx,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit ec638fca239e77b09a7ca453956b7d1f334a1515\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:19:08 2025 +0800\\n\\n    feat: add liquidation price to position info and account summary (#2256)\\n\\ndiff --git a/common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json b/common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\\nnew file mode 100644\\nindex 000000000..f9a107c99\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\",\\n+      \\\"comment\\\": \\\"add liq price\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit ec638fca239e77b09a7ca453956b7d1f334a1515\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:19:08 2025 +0800\\n\\n    feat: add liquidation price to position info and account summary (#2256)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-08-15-15.json b/common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\\nnew file mode 100644\\nindex 000000000..0f80c4818\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"add liq price\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 4,\n+          \"deletions\": 0,\n+          \"path\": \"ui/web/src/modules/AccountInfo/AccountInfoPanel.tsx\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit ec638fca239e77b09a7ca453956b7d1f334a1515\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:19:08 2025 +0800\\n\\n    feat: add liquidation price to position info and account summary (#2256)\\n\\ndiff --git a/ui/web/src/modules/AccountInfo/AccountInfoPanel.tsx b/ui/web/src/modules/AccountInfo/AccountInfoPanel.tsx\\nindex 74840cfe8..4319b97f3 100644\\n--- a/ui/web/src/modules/AccountInfo/AccountInfoPanel.tsx\\n+++ b/ui/web/src/modules/AccountInfo/AccountInfoPanel.tsx\\n@@ -307,0 +308,3 @@ registerPage('AccountInfoPanel', () => {\\n+      helper.accessor('base_currency', { header: () => '基础货币' }),\\n+      helper.accessor('quote_currency', { header: () => '计价货币' }),\\n+      helper.accessor((pos) => +(pos.size || 0), { id: 'size', header: () => '净持仓' }),\\n@@ -313,0 +317 @@ registerPage('AccountInfoPanel', () => {\\n+      helper.accessor('liquidation_price', { header: () => '清算价' }),\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"0e69317d18450ae59a82fcc6d191a05d0f5c8fbe\",\n+      \"short\": \"0e69317d1\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-08 23:45:39 +0800\",\n+      \"subject\": \"feat: implement active rate limit control for API requests (#2258)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 14,\n+          \"deletions\": 5,\n+          \"path\": \"apps/vendor-binance/src/api/client.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 0e69317d18450ae59a82fcc6d191a05d0f5c8fbe\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:45:39 2025 +0800\\n\\n    feat: implement active rate limit control for API requests (#2258)\\n\\ndiff --git a/apps/vendor-binance/src/api/client.ts b/apps/vendor-binance/src/api/client.ts\\nindex ed027929c..4435ec16c 100644\\n--- a/apps/vendor-binance/src/api/client.ts\\n+++ b/apps/vendor-binance/src/api/client.ts\\n@@ -22 +22,2 @@ export interface IApiError {\\n-let retryAfterUntil: number | null = null;\\n+// 每个接口单独进行主动限流控制\\n+const mapPathToRetryAfterUntil: Record<string, number> = {};\\n@@ -84,0 +86,2 @@ const callApi = async <T>(\\n+  const retryAfterUntil = mapPathToRetryAfterUntil[endpoint];\\n+\\n@@ -87 +90,7 @@ const callApi = async <T>(\\n-      throw newError('ACTIVE_RATE_LIMIT', { retryAfterUntil, now: Date.now(), url: url.href });\\n+      // 主动限流\\n+      throw newError('ACTIVE_RATE_LIMIT', {\\n+        wait_time: `${retryAfterUntil - Date.now()}ms`,\\n+        retryAfterUntil,\\n+        url: url.href,\\n+        endpoint,\\n+      });\\n@@ -89 +98 @@ const callApi = async <T>(\\n-    retryAfterUntil = null;\\n+    delete mapPathToRetryAfterUntil[endpoint];\\n@@ -101 +110 @@ const callApi = async <T>(\\n-    retryAfterUntil = Date.now() + parseInt(retryAfter, 10) * 1000;\\n+    mapPathToRetryAfterUntil[endpoint] = Date.now() + parseInt(retryAfter, 10) * 1000;\\n@@ -113 +122 @@ const callApi = async <T>(\\n-    MetricBinanceApiUsedWeight.labels({ terminal_id: terminal.terminal_id }).set(+usedWeight1M);\\n+    MetricBinanceApiUsedWeight.labels({ endpoint, terminal_id: terminal.terminal_id }).set(+usedWeight1M);\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"mapPathToRetryAfterUntil\",\n+              \"code\": \"const mapPathToRetryAfterUntil: Record<string, number> = {};\",\n+              \"lineStart\": 23,\n+              \"lineEnd\": 85\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"retryAfterUntil\",\n+              \"code\": \"const retryAfterUntil = mapPathToRetryAfterUntil[endpoint];\\n\\n    // 主动限流\\n    throw newError('ACTIVE_RATE_LIMIT', {\\n      wait_time: `${retryAfterUntil - Date.now()}ms`,\\n      retryAfterUntil,\\n      url: url.href,\\n      endpoint,\\n    });\\n  delete mapPathToRetryAfterUntil[endpoint];\\n  mapPathToRetryAfterUntil[endpoint] = Date.now() + parseInt(retryAfter, 10) * 1000;\\n  MetricBinanceApiUsedWeight.labels({ endpoint, terminal_id: terminal.terminal_id }).set(+usedWeight1M);\",\n+              \"lineStart\": 86,\n+              \"lineEnd\": 123\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/src/api/public-api.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 0e69317d18450ae59a82fcc6d191a05d0f5c8fbe\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:45:39 2025 +0800\\n\\n    feat: implement active rate limit control for API requests (#2258)\\n\\ndiff --git a/apps/vendor-binance/src/api/public-api.ts b/apps/vendor-binance/src/api/public-api.ts\\nindex 07546b44b..70dc33214 100644\\n--- a/apps/vendor-binance/src/api/public-api.ts\\n+++ b/apps/vendor-binance/src/api/public-api.ts\\n@@ -108 +108 @@ export const getFutureExchangeInfo = (): Promise<IFutureExchangeInfo> =>\\n- * https://binance-docs.github.io/apidocs/futures/cn/#31dbeb24c4\\n+ * https://developers.binance.com/docs/zh-CN/derivatives/usds-margined-futures/market-data/rest-api/Get-Funding-Rate-History\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 7,\n+          \"path\": \"apps/vendor-binance/src/public-data/interest_rate.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 0e69317d18450ae59a82fcc6d191a05d0f5c8fbe\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:45:39 2025 +0800\\n\\n    feat: implement active rate limit control for API requests (#2258)\\n\\ndiff --git a/apps/vendor-binance/src/public-data/interest_rate.ts b/apps/vendor-binance/src/public-data/interest_rate.ts\\nindex ab9b57f1a..920a2d3ce 100644\\n--- a/apps/vendor-binance/src/public-data/interest_rate.ts\\n+++ b/apps/vendor-binance/src/public-data/interest_rate.ts\\n@@ -6 +5,0 @@ import { firstValueFrom, timer } from 'rxjs';\\n-import { getFutureFundingRate } from '../api/public-api';\\n@@ -7,0 +7 @@ import { getMarginInterestRateHistory } from '../api/private-api';\\n+import { getFutureFundingRate } from '../api/public-api';\\n@@ -56,6 +56 @@ createSeriesProvider<IInterestRate>(terminal, {\\n-          (v: {\\n-            asset: string;\\n-            dailyInterestRate: string;\\n-            timestamp: number;\\n-            vipLevel: number;\\n-          }): IInterestRate => ({\\n+          (v): IInterestRate => ({\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-08-15-43.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 0e69317d18450ae59a82fcc6d191a05d0f5c8fbe\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:45:39 2025 +0800\\n\\n    feat: implement active rate limit control for API requests (#2258)\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-08-15-43.json b/common/changes/@yuants/vendor-binance/2025-12-08-15-43.json\\nnew file mode 100644\\nindex 000000000..2effcda3e\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-binance/2025-12-08-15-43.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n+      \\\"comment\\\": \\\"fix active rate limit\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"5fad1f6eadad3dcc953e14cdc5c516952d80f144\",\n+      \"short\": \"5fad1f6ea\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-08 23:48:34 +0800\",\n+      \"subject\": \"fix(vendor-aster): position spot product id (#2259)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"fix\",\n+        \"scope\": \"vendor-aster\",\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-aster/SESSION_NOTES.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 5fad1f6eadad3dcc953e14cdc5c516952d80f144\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Mon Dec 8 23:48:34 2025 +0800\\n\\n    fix(vendor-aster): position spot product id (#2259)\\n\\ndiff --git a/apps/vendor-aster/SESSION_NOTES.md b/apps/vendor-aster/SESSION_NOTES.md\\nindex 6d9df0bc0..9734c99b0 100644\\n--- a/apps/vendor-aster/SESSION_NOTES.md\\n+++ b/apps/vendor-aster/SESSION_NOTES.md\\n@@ -129,2 +129,3 @@\\n-  - `services/markets/product.ts` 同时输出永续与现货产品目录，新增 Spot exchangeInfo 拉取逻辑，保持价格/数量步长与 Aster 过滤器一致。\\n-  - `api/public-api.ts` 引入 Spot exchangeInfo 公共接口，分离期货与现货的 base URL。\\n+  - `services/markets/product.ts` 同时输出永续与现货产品目录，新增 Spot exchangeInfo 拉取逻辑，保持价格/数量步长与 Aster 过滤器一致；永续 `margin_rate` 支持从 `/fapi/v1/leverageBracket` 获取最大杠杆并反算，缺失时回落 0.1。\\n+  - `api/public-api.ts` 引入 Spot exchangeInfo 公共接口，分离期货与现货的 base URL；`api/private-api.ts` 增补 leverageBracket 调用类型。\\n+  - Spot 账户生成 position 前读取最新 spot product 列表，构建 base → product_id 映射，用余额资产匹配 product_id，缺失时回退旧逻辑。\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 16,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-aster/src/services/accounts/spot.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 5fad1f6eadad3dcc953e14cdc5c516952d80f144\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Mon Dec 8 23:48:34 2025 +0800\\n\\n    fix(vendor-aster): position spot product id (#2259)\\n\\ndiff --git a/apps/vendor-aster/src/services/accounts/spot.ts b/apps/vendor-aster/src/services/accounts/spot.ts\\nindex d04bf81c9..34ec7b038 100644\\n--- a/apps/vendor-aster/src/services/accounts/spot.ts\\n+++ b/apps/vendor-aster/src/services/accounts/spot.ts\\n@@ -4,0 +5 @@ import { getApiV1Account, getApiV1TickerPrice, getFApiV4Account, ICredential } f\\n+import { listProducts } from '../markets/product';\\n@@ -16,0 +18,12 @@ const asBNBPrice = createCache(\\n+const buildSpotProductMap = async () => {\\n+  const products = await listProducts();\\n+  const map = new Map<string, string>();\\n+  for (const product of products) {\\n+    const [, instType] = product.product_id.split('/');\\n+    if (instType === 'SPOT') {\\n+      map.set(product.base_currency, product.product_id);\\n+    }\\n+  }\\n+  return map;\\n+};\\n+\\n@@ -19 +32 @@ export const getPositions = async (credential: ICredential) => {\\n-  const [x, prices, prep] = await Promise.all([\\n+  const [x, prices, prep, spotProductMap] = await Promise.all([\\n@@ -22,0 +36 @@ export const getPositions = async (credential: ICredential) => {\\n+    buildSpotProductMap(),\\n@@ -31 +45 @@ export const getPositions = async (credential: ICredential) => {\\n-        product_id: encodePath('ASTER', 'SPOT', b.asset),\\n+        product_id: spotProductMap.get(b.asset) ?? encodePath('ASTER', 'SPOT', b.asset),\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"buildSpotProductMap\",\n+              \"code\": \"const buildSpotProductMap = async () => {\",\n+              \"lineStart\": 18,\n+              \"lineEnd\": 18\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"products\",\n+              \"code\": \"const products = await listProducts();\",\n+              \"lineStart\": 19,\n+              \"lineEnd\": 19\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"map\",\n+              \"code\": \"const map = new Map<string, string>();\",\n+              \"lineStart\": 20,\n+              \"lineEnd\": 20\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"product\",\n+              \"code\": \"  for (const product of products) {\\n    const [, instType] = product.product_id.split('/');\\n    if (instType === 'SPOT') {\\n      map.set(product.base_currency, product.product_id);\\n    }\\n  }\\n  return map;\\n};\\n\\n  const [x, prices, prep, spotProductMap] = await Promise.all([\\n    buildSpotProductMap(),\\n        product_id: spotProductMap.get(b.asset) ?? encodePath('ASTER', 'SPOT', b.asset),\",\n+              \"lineStart\": 21,\n+              \"lineEnd\": 46\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-08-15-43.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 5fad1f6eadad3dcc953e14cdc5c516952d80f144\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Mon Dec 8 23:48:34 2025 +0800\\n\\n    fix(vendor-aster): position spot product id (#2259)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-08-15-43.json b/common/changes/@yuants/vendor-aster/2025-12-08-15-43.json\\nnew file mode 100644\\nindex 000000000..18aefe7a2\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-08-15-43.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"aster position product\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"baf2f4727e011230ac0aa103d1c69a7feb33bda3\",\n+      \"short\": \"baf2f4727\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-08 23:50:55 +0800\",\n+      \"subject\": \"chore: bump version (#2257)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex e1e7142b3..7841bcca2 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.23\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.23\\\",\\n+      \\\"date\\\": \\\"Mon, 08 Dec 2025 15:50:21 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix symbol\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"aster position product\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 9,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex 84df4f698..30fed97c2 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,9 @@\\n-This log was last generated on Sun, 07 Dec 2025 20:31:33 GMT and should not be manually modified.\\n+This log was last generated on Mon, 08 Dec 2025 15:50:21 GMT and should not be manually modified.\\n+\\n+## 0.7.23\\n+Mon, 08 Dec 2025 15:50:21 GMT\\n+\\n+### Patches\\n+\\n+- fix symbol\\n+- aster position product\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex 111b87f24..3896d935a 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.22\\\",\\n+  \\\"version\\\": \\\"0.7.23\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\\nindex 38df98c49..f4782dd2f 100644\\n--- a/apps/vendor-binance/CHANGELOG.json\\n+++ b/apps/vendor-binance/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.13\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-binance_v0.10.13\\\",\\n+      \\\"date\\\": \\\"Mon, 08 Dec 2025 15:50:21 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix active rate limit\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\\nindex 04ea881b6..4d7c1cec4 100644\\n--- a/apps/vendor-binance/CHANGELOG.md\\n+++ b/apps/vendor-binance/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sun, 07 Dec 2025 20:31:33 GMT and should not be manually modified.\\n+This log was last generated on Mon, 08 Dec 2025 15:50:21 GMT and should not be manually modified.\\n+\\n+## 0.10.13\\n+Mon, 08 Dec 2025 15:50:21 GMT\\n+\\n+### Patches\\n+\\n+- fix active rate limit\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\\nindex 9586b42d0..ecc201b03 100644\\n--- a/apps/vendor-binance/package.json\\n+++ b/apps/vendor-binance/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.12\\\",\\n+  \\\"version\\\": \\\"0.10.13\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.json b/apps/vendor-huobi/CHANGELOG.json\\nindex ba0f8c513..fea81a17e 100644\\n--- a/apps/vendor-huobi/CHANGELOG.json\\n+++ b/apps/vendor-huobi/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.15.11\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-huobi_v0.15.11\\\",\\n+      \\\"date\\\": \\\"Mon, 08 Dec 2025 15:50:21 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add liq price\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.md b/apps/vendor-huobi/CHANGELOG.md\\nindex 6e5c9a104..db7fbdb54 100644\\n--- a/apps/vendor-huobi/CHANGELOG.md\\n+++ b/apps/vendor-huobi/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sun, 07 Dec 2025 22:20:53 GMT and should not be manually modified.\\n+This log was last generated on Mon, 08 Dec 2025 15:50:21 GMT and should not be manually modified.\\n+\\n+## 0.15.11\\n+Mon, 08 Dec 2025 15:50:21 GMT\\n+\\n+### Patches\\n+\\n+- add liq price\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/package.json b/apps/vendor-huobi/package.json\\nindex 243b3378c..211417173 100644\\n--- a/apps/vendor-huobi/package.json\\n+++ b/apps/vendor-huobi/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.15.10\\\",\\n+  \\\"version\\\": \\\"0.15.11\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex 83199cff4..b0ba7384b 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.11\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.11\\\",\\n+      \\\"date\\\": \\\"Mon, 08 Dec 2025 15:50:21 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add liq price\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex f1b41b247..a6885d3a0 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sun, 07 Dec 2025 16:38:11 GMT and should not be manually modified.\\n+This log was last generated on Mon, 08 Dec 2025 15:50:21 GMT and should not be manually modified.\\n+\\n+## 0.29.11\\n+Mon, 08 Dec 2025 15:50:21 GMT\\n+\\n+### Patches\\n+\\n+- add liq price\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 682caf361..39df78830 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.29.10\\\",\\n+  \\\"version\\\": \\\"0.29.11\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-08-14-54.json b/common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\\ndeleted file mode 100644\\nindex ef9f41ad7..000000000\\n--- a/common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n-      \\\"comment\\\": \\\"fix symbol\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-08-15-43.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-08-15-43.json b/common/changes/@yuants/vendor-aster/2025-12-08-15-43.json\\ndeleted file mode 100644\\nindex 18aefe7a2..000000000\\n--- a/common/changes/@yuants/vendor-aster/2025-12-08-15-43.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n-      \\\"comment\\\": \\\"aster position product\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-07-20-31.json => main_2025-12-08-15-50.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-08-15-43.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-08-15-43.json b/common/changes/@yuants/vendor-binance/2025-12-08-15-43.json\\ndeleted file mode 100644\\nindex 2effcda3e..000000000\\n--- a/common/changes/@yuants/vendor-binance/2025-12-08-15-43.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n-      \\\"comment\\\": \\\"fix active rate limit\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/{main_2025-12-07-20-31.json => main_2025-12-08-15-50.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json b/common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\\ndeleted file mode 100644\\nindex f9a107c99..000000000\\n--- a/common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\",\\n-      \\\"comment\\\": \\\"add liq price\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/{main_2025-12-07-22-20.json => main_2025-12-08-15-50.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit baf2f4727e011230ac0aa103d1c69a7feb33bda3\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 23:50:55 2025 +0800\\n\\n    chore: bump version (#2257)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-08-15-15.json b/common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\\ndeleted file mode 100644\\nindex 0f80c4818..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"add liq price\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-07-16-38.json => main_2025-12-08-15-50.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"cbbfb2ce959b706c969e6bfc65661f7fae769883\",\n+      \"short\": \"cbbfb2ce9\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-09 00:13:25 +0800\",\n+      \"subject\": \"fix(vendor-hyperliquid): 更新 spot 账户产品映射逻辑，避免硬编码并支持动态产品列表 (#2260)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"fix\",\n+        \"scope\": \"vendor-hyperliquid\",\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 9,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/SESSION_NOTES.md\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit cbbfb2ce959b706c969e6bfc65661f7fae769883\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:13:25 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新 spot 账户产品映射逻辑，避免硬编码并支持动态产品列表 (#2260)\\n\\ndiff --git a/apps/vendor-hyperliquid/SESSION_NOTES.md b/apps/vendor-hyperliquid/SESSION_NOTES.md\\nindex 41a8a3b98..9b96b351b 100644\\n--- a/apps/vendor-hyperliquid/SESSION_NOTES.md\\n+++ b/apps/vendor-hyperliquid/SESSION_NOTES.md\\n@@ -201,0 +202,9 @@\\n+### 2025-12-08 — Codex\\n+\\n+- **本轮摘要**：\\n+  - spot 账户在生成 position 前读取最新 spot product 列表，构建 base → product_id 的映射，用余额资产匹配 product_id，避免硬编码 `${asset}-USDC`。\\n+- **修改的文件**：\\n+  - `apps/vendor-hyperliquid/src/services/accounts/spot.ts`\\n+- **运行的测试 / 检查**：\\n+  - `npx tsc --noEmit --project apps/vendor-hyperliquid/tsconfig.json`\\n+\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-hyperliquid/src/services/accounts/spot.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit cbbfb2ce959b706c969e6bfc65661f7fae769883\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:13:25 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新 spot 账户产品映射逻辑，避免硬编码并支持动态产品列表 (#2260)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/accounts/spot.ts b/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\nindex cee336c2e..ea9f59ece 100644\\n--- a/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\n+++ b/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\n@@ -4,0 +5,13 @@ import { ICredential } from '../../api/types';\\n+import { listProducts } from '../markets/product';\\n+\\n+const buildSpotProductMap = async () => {\\n+  const products = await listProducts();\\n+  const map = new Map<string, string>();\\n+  for (const product of products) {\\n+    const [, instType] = product.product_id.split('/');\\n+    if (instType === 'SPOT') {\\n+      map.set(product.base_currency, product.product_id);\\n+    }\\n+  }\\n+  return map;\\n+};\\n@@ -12 +25 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-  const [balances, mids] = await Promise.all([\\n+  const [balances, mids, spotProductMap] = await Promise.all([\\n@@ -14,0 +28 @@ export const getSpotPositions = async (credential: ICredential) => {\\n+    buildSpotProductMap(),\\n@@ -25 +39,2 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-          product_id: encodePath('HYPERLIQUID', 'SPOT', `${balance.coin}-USDC`),\\n+          product_id:\\n+            spotProductMap.get(balance.coin) ?? encodePath('HYPERLIQUID', 'SPOT', `${balance.coin}-USDC`),\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"buildSpotProductMap\",\n+              \"code\": \"const buildSpotProductMap = async () => {\",\n+              \"lineStart\": 7,\n+              \"lineEnd\": 7\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"products\",\n+              \"code\": \"const products = await listProducts();\",\n+              \"lineStart\": 8,\n+              \"lineEnd\": 8\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"map\",\n+              \"code\": \"const map = new Map<string, string>();\",\n+              \"lineStart\": 9,\n+              \"lineEnd\": 9\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"product\",\n+              \"code\": \"  for (const product of products) {\\n    const [, instType] = product.product_id.split('/');\\n    if (instType === 'SPOT') {\\n      map.set(product.base_currency, product.product_id);\\n    }\\n  }\\n  return map;\\n};\\n  const [balances, mids, spotProductMap] = await Promise.all([\\n    buildSpotProductMap(),\\n          product_id:\\n            spotProductMap.get(balance.coin) ?? encodePath('HYPERLIQUID', 'SPOT', `${balance.coin}-USDC`),\",\n+              \"lineStart\": 10,\n+              \"lineEnd\": 41\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit cbbfb2ce959b706c969e6bfc65661f7fae769883\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:13:25 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新 spot 账户产品映射逻辑，避免硬编码并支持动态产品列表 (#2260)\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json\\nnew file mode 100644\\nindex 000000000..59e9e5f97\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n+      \\\"comment\\\": \\\"更新 spot 账户产品映射逻辑，避免硬编码并支持动态产品列表\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"9f8b2059d0271ea0114735d7a6aaf27df979db6b\",\n+      \"short\": \"9f8b2059d\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-09 00:25:15 +0800\",\n+      \"subject\": \"feat: add liquidation price to future and perpetual position data (#2261)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/src/api/private-api.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 9f8b2059d0271ea0114735d7a6aaf27df979db6b\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 00:25:15 2025 +0800\\n\\n    feat: add liquidation price to future and perpetual position data (#2261)\\n\\ndiff --git a/apps/vendor-gate/src/api/private-api.ts b/apps/vendor-gate/src/api/private-api.ts\\nindex 23714cd97..d8e7c4861 100644\\n--- a/apps/vendor-gate/src/api/private-api.ts\\n+++ b/apps/vendor-gate/src/api/private-api.ts\\n@@ -91,0 +92 @@ export const getFuturePositions = (\\n+    liq_price: string;\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/src/services/accounts/future.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 9f8b2059d0271ea0114735d7a6aaf27df979db6b\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 00:25:15 2025 +0800\\n\\n    feat: add liquidation price to future and perpetual position data (#2261)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/future.ts b/apps/vendor-gate/src/services/accounts/future.ts\\nindex 4e762c193..d67d4926f 100644\\n--- a/apps/vendor-gate/src/services/accounts/future.ts\\n+++ b/apps/vendor-gate/src/services/accounts/future.ts\\n@@ -34,0 +35 @@ export const loadFuturePositions = async (credential: ICredential): Promise<IPos\\n+      liquidation_price: position.liq_price,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/src/services/accounts/perp.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 9f8b2059d0271ea0114735d7a6aaf27df979db6b\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 00:25:15 2025 +0800\\n\\n    feat: add liquidation price to future and perpetual position data (#2261)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/accounts/perp.ts b/apps/vendor-hyperliquid/src/services/accounts/perp.ts\\nindex 2be6376de..ee8784d73 100644\\n--- a/apps/vendor-hyperliquid/src/services/accounts/perp.ts\\n+++ b/apps/vendor-hyperliquid/src/services/accounts/perp.ts\\n@@ -25,0 +26 @@ export const getPerpPositions = async (credential: ICredential) => {\\n+      liquidation_price: position.position.liquidationPx,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/experimental/getPositions.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 9f8b2059d0271ea0114735d7a6aaf27df979db6b\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 00:25:15 2025 +0800\\n\\n    feat: add liquidation price to future and perpetual position data (#2261)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/getPositions.ts b/apps/vendor-okx/src/experimental/getPositions.ts\\nindex 1cbbe0873..5fe0bd5eb 100644\\n--- a/apps/vendor-okx/src/experimental/getPositions.ts\\n+++ b/apps/vendor-okx/src/experimental/getPositions.ts\\n@@ -67,0 +68 @@ export const getPositions = async (credential: ICredential): Promise<IPosition[]\\n+      liquidation_price: x.liqPx,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-08-16-15.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 9f8b2059d0271ea0114735d7a6aaf27df979db6b\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 00:25:15 2025 +0800\\n\\n    feat: add liquidation price to future and perpetual position data (#2261)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-08-16-15.json b/common/changes/@yuants/vendor-gate/2025-12-08-16-15.json\\nnew file mode 100644\\nindex 000000000..69d5baf6d\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-08-16-15.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"add liq price\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-15.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 9f8b2059d0271ea0114735d7a6aaf27df979db6b\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 00:25:15 2025 +0800\\n\\n    feat: add liquidation price to future and perpetual position data (#2261)\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-15.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-15.json\\nnew file mode 100644\\nindex 000000000..6ecd3ba28\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-15.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n+      \\\"comment\\\": \\\"add liq price\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-08-16-15.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 9f8b2059d0271ea0114735d7a6aaf27df979db6b\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 00:25:15 2025 +0800\\n\\n    feat: add liquidation price to future and perpetual position data (#2261)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-08-16-15.json b/common/changes/@yuants/vendor-okx/2025-12-08-16-15.json\\nnew file mode 100644\\nindex 000000000..4200aba5c\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-08-16-15.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"fix liq price\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"f9883ff8cebb88af91ad99d7f9208bdbc6be6669\",\n+      \"short\": \"f9883ff8c\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-09 00:33:36 +0800\",\n+      \"subject\": \"chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": \"vendor\",\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/SESSION_NOTES.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-aster/SESSION_NOTES.md b/apps/vendor-aster/SESSION_NOTES.md\\nindex 9734c99b0..d91f7a251 100644\\n--- a/apps/vendor-aster/SESSION_NOTES.md\\n+++ b/apps/vendor-aster/SESSION_NOTES.md\\n@@ -131 +131 @@\\n-  - Spot 账户生成 position 前读取最新 spot product 列表，构建 base → product_id 映射，用余额资产匹配 product_id，缺失时回退旧逻辑。\\n+  - Spot 账户生成 position 前读取最新 spot product 列表并缓存（24 小时 TTL），构建 base → product_id 映射，用余额资产匹配 product_id，缺失时回退旧逻辑。\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 12,\n+          \"path\": \"apps/vendor-aster/src/services/accounts/spot.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-aster/src/services/accounts/spot.ts b/apps/vendor-aster/src/services/accounts/spot.ts\\nindex 34ec7b038..785a165be 100644\\n--- a/apps/vendor-aster/src/services/accounts/spot.ts\\n+++ b/apps/vendor-aster/src/services/accounts/spot.ts\\n@@ -18,7 +18,9 @@ const asBNBPrice = createCache(\\n-const buildSpotProductMap = async () => {\\n-  const products = await listProducts();\\n-  const map = new Map<string, string>();\\n-  for (const product of products) {\\n-    const [, instType] = product.product_id.split('/');\\n-    if (instType === 'SPOT') {\\n-      map.set(product.base_currency, product.product_id);\\n+const spotProductMapCache = createCache(\\n+  async () => {\\n+    const products = await listProducts();\\n+    const map = new Map<string, string>();\\n+    for (const product of products) {\\n+      const [, instType] = product.product_id.split('/');\\n+      if (instType === 'SPOT') {\\n+        map.set(product.base_currency, product.product_id);\\n+      }\\n@@ -26,3 +28,4 @@ const buildSpotProductMap = async () => {\\n-  }\\n-  return map;\\n-};\\n+    return map;\\n+  },\\n+  { expire: 86_400_000 },\\n+);\\n@@ -36 +39 @@ export const getPositions = async (credential: ICredential) => {\\n-    buildSpotProductMap(),\\n+    spotProductMapCache.query(''),\\n@@ -38,0 +42,2 @@ export const getPositions = async (credential: ICredential) => {\\n+  const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n+\\n@@ -45 +50 @@ export const getPositions = async (credential: ICredential) => {\\n-        product_id: spotProductMap.get(b.asset) ?? encodePath('ASTER', 'SPOT', b.asset),\\n+        product_id: resolvedSpotProductMap.get(b.asset) ?? encodePath('ASTER', 'SPOT', b.asset),\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"spotProductMapCache\",\n+              \"code\": \"const spotProductMapCache = createCache(\\n  async () => {\",\n+              \"lineStart\": 18,\n+              \"lineEnd\": 19\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"products\",\n+              \"code\": \"const products = await listProducts();\",\n+              \"lineStart\": 20,\n+              \"lineEnd\": 20\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"map\",\n+              \"code\": \"const map = new Map<string, string>();\",\n+              \"lineStart\": 21,\n+              \"lineEnd\": 21\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"product\",\n+              \"code\": \"    for (const product of products) {\\n      const [, instType] = product.product_id.split('/');\\n      if (instType === 'SPOT') {\\n        map.set(product.base_currency, product.product_id);\\n      }\\n    return map;\\n  },\\n  { expire: 86_400_000 },\\n);\\n    spotProductMapCache.query(''),\",\n+              \"lineStart\": 22,\n+              \"lineEnd\": 41\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"resolvedSpotProductMap\",\n+              \"code\": \"const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n\\n      product_id: resolvedSpotProductMap.get(b.asset) ?? encodePath('ASTER', 'SPOT', b.asset),\",\n+              \"lineStart\": 42,\n+              \"lineEnd\": 51\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 9,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/SESSION_NOTES.md\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-gate/SESSION_NOTES.md b/apps/vendor-gate/SESSION_NOTES.md\\nindex 768c89019..3513753f8 100644\\n--- a/apps/vendor-gate/SESSION_NOTES.md\\n+++ b/apps/vendor-gate/SESSION_NOTES.md\\n@@ -108,0 +109,9 @@\\n+### 2025-12-08 — Codex\\n+\\n+- **本轮摘要**：\\n+  - spot 账户在生成 position 前获取并缓存（24 小时 TTL）最新 spot 产品列表，构建 base → product_id 映射，用余额资产匹配 product_id，缺失时回退旧路径，避免硬编码。\\n+- **修改的文件**：\\n+  - `apps/vendor-gate/src/services/accounts/spot.ts`\\n+- **运行的测试 / 检查**：\\n+  - `npx tsc --noEmit --project apps/vendor-gate/tsconfig.json`\\n+\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 23,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-gate/src/services/accounts/spot.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/spot.ts b/apps/vendor-gate/src/services/accounts/spot.ts\\nindex b861a4584..86c2b697f 100644\\n--- a/apps/vendor-gate/src/services/accounts/spot.ts\\n+++ b/apps/vendor-gate/src/services/accounts/spot.ts\\n@@ -0,0 +1 @@\\n+import { createCache } from '@yuants/cache';\\n@@ -3,0 +5,16 @@ import { encodePath } from '@yuants/utils';\\n+import { listProducts } from '../markets/product';\\n+\\n+const spotProductMapCache = createCache(\\n+  async () => {\\n+    const products = await listProducts();\\n+    const map = new Map<string, string>();\\n+    for (const product of products) {\\n+      const [, instType] = product.product_id.split('/');\\n+      if (instType === 'SPOT') {\\n+        map.set(product.base_currency, product.product_id);\\n+      }\\n+    }\\n+    return map;\\n+  },\\n+  { expire: 86_400_000 },\\n+);\\n@@ -6 +23,5 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-  const res = await getSpotAccounts(credential);\\n+  const [res, spotProductMap] = await Promise.all([\\n+    getSpotAccounts(credential),\\n+    spotProductMapCache.query(''),\\n+  ]);\\n+  const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n@@ -14 +35 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-      product_id: encodePath('GATE', 'SPOT', `${item.currency}`),\\n+      product_id: resolvedSpotProductMap.get(item.currency) ?? encodePath('GATE', 'SPOT', `${item.currency}`),\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"spotProductMapCache\",\n+              \"code\": \"const spotProductMapCache = createCache(\\n  async () => {\",\n+              \"lineStart\": 7,\n+              \"lineEnd\": 8\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"products\",\n+              \"code\": \"const products = await listProducts();\",\n+              \"lineStart\": 9,\n+              \"lineEnd\": 9\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"map\",\n+              \"code\": \"const map = new Map<string, string>();\",\n+              \"lineStart\": 10,\n+              \"lineEnd\": 10\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"product\",\n+              \"code\": \"    for (const product of products) {\\n      const [, instType] = product.product_id.split('/');\\n      if (instType === 'SPOT') {\\n        map.set(product.base_currency, product.product_id);\\n      }\\n    }\\n    return map;\\n  },\\n  { expire: 86_400_000 },\\n);\\n  const [res, spotProductMap] = await Promise.all([\\n    getSpotAccounts(credential),\\n    spotProductMapCache.query(''),\\n  ]);\",\n+              \"lineStart\": 11,\n+              \"lineEnd\": 26\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"resolvedSpotProductMap\",\n+              \"code\": \"const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n    product_id: resolvedSpotProductMap.get(item.currency) ?? encodePath('GATE', 'SPOT', `${item.currency}`),\",\n+              \"lineStart\": 27,\n+              \"lineEnd\": 36\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 9,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/SESSION_NOTES.md\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-hyperliquid/SESSION_NOTES.md b/apps/vendor-hyperliquid/SESSION_NOTES.md\\nindex 9b96b351b..5969eb7dc 100644\\n--- a/apps/vendor-hyperliquid/SESSION_NOTES.md\\n+++ b/apps/vendor-hyperliquid/SESSION_NOTES.md\\n@@ -203,0 +204,9 @@\\n+- **本轮摘要**：\\n+  - spot 账户的产品映射增加缓存（24 小时 TTL），避免每次查询 positions 都重新拉产品列表；产品列表加载失败时仍会回退旧的 product_id 生成逻辑。\\n+- **修改的文件**：\\n+  - `apps/vendor-hyperliquid/src/services/accounts/spot.ts`\\n+- **运行的测试 / 检查**：\\n+  - `npx tsc --noEmit --project apps/vendor-hyperliquid/tsconfig.json`\\n+\\n+### 2025-12-08 — Codex\\n+\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 18,\n+          \"deletions\": 12,\n+          \"path\": \"apps/vendor-hyperliquid/src/services/accounts/spot.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/accounts/spot.ts b/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\nindex ea9f59ece..814857d05 100644\\n--- a/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\n+++ b/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\n@@ -0,0 +1 @@\\n+import { createCache } from '@yuants/cache';\\n@@ -7,7 +8,9 @@ import { listProducts } from '../markets/product';\\n-const buildSpotProductMap = async () => {\\n-  const products = await listProducts();\\n-  const map = new Map<string, string>();\\n-  for (const product of products) {\\n-    const [, instType] = product.product_id.split('/');\\n-    if (instType === 'SPOT') {\\n-      map.set(product.base_currency, product.product_id);\\n+const spotProductMapCache = createCache(\\n+  async () => {\\n+    const products = await listProducts();\\n+    const map = new Map<string, string>();\\n+    for (const product of products) {\\n+      const [, instType] = product.product_id.split('/');\\n+      if (instType === 'SPOT') {\\n+        map.set(product.base_currency, product.product_id);\\n+      }\\n@@ -15,3 +18,4 @@ const buildSpotProductMap = async () => {\\n-  }\\n-  return map;\\n-};\\n+    return map;\\n+  },\\n+  { expire: 86_400_000 },\\n+);\\n@@ -28 +32 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-    buildSpotProductMap(),\\n+    spotProductMapCache.query(''),\\n@@ -29,0 +34 @@ export const getSpotPositions = async (credential: ICredential) => {\\n+  const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n@@ -40 +45,2 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-            spotProductMap.get(balance.coin) ?? encodePath('HYPERLIQUID', 'SPOT', `${balance.coin}-USDC`),\\n+            resolvedSpotProductMap.get(balance.coin) ??\\n+            encodePath('HYPERLIQUID', 'SPOT', `${balance.coin}-USDC`),\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"spotProductMapCache\",\n+              \"code\": \"const spotProductMapCache = createCache(\\n  async () => {\",\n+              \"lineStart\": 8,\n+              \"lineEnd\": 9\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"products\",\n+              \"code\": \"const products = await listProducts();\",\n+              \"lineStart\": 10,\n+              \"lineEnd\": 10\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"map\",\n+              \"code\": \"const map = new Map<string, string>();\",\n+              \"lineStart\": 11,\n+              \"lineEnd\": 11\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"product\",\n+              \"code\": \"    for (const product of products) {\\n      const [, instType] = product.product_id.split('/');\\n      if (instType === 'SPOT') {\\n        map.set(product.base_currency, product.product_id);\\n      }\\n    return map;\\n  },\\n  { expire: 86_400_000 },\\n);\\n    spotProductMapCache.query(''),\",\n+              \"lineStart\": 12,\n+              \"lineEnd\": 33\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"resolvedSpotProductMap\",\n+              \"code\": \"const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n          resolvedSpotProductMap.get(balance.coin) ??\\n          encodePath('HYPERLIQUID', 'SPOT', `${balance.coin}-USDC`),\",\n+              \"lineStart\": 34,\n+              \"lineEnd\": 47\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 34,\n+          \"path\": \"apps/vendor-hyperliquid/src/services/markets/product.ts\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/markets/product.ts b/apps/vendor-hyperliquid/src/services/markets/product.ts\\nindex 05e6136a6..406d7686f 100644\\n--- a/apps/vendor-hyperliquid/src/services/markets/product.ts\\n+++ b/apps/vendor-hyperliquid/src/services/markets/product.ts\\n@@ -60,34 +59,0 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-\\n-const refresh$ = defer(listProducts).pipe(\\n-  tap((products) => {\\n-    latestProducts = products;\\n-    products.forEach((product) => product$.next(product));\\n-  }),\\n-  tap({\\n-    error: (err) => console.error(formatTime(Date.now()), 'ProductRefreshFailed', err),\\n-  }),\\n-  retry({ delay: 5000 }),\\n-  repeat({ delay: 86400_000 }),\\n-  shareReplay(1),\\n-);\\n-\\n-refresh$.subscribe();\\n-\\n-createSQLWriter<IProduct>(terminal, {\\n-  data$: product$,\\n-  tableName: 'product',\\n-  writeInterval: 1000,\\n-  conflictKeys: ['datasource_id', 'product_id'],\\n-});\\n-\\n-provideQueryProductsService(\\n-  terminal,\\n-  'HYPERLIQUID',\\n-  async (_req: IQueryProductsRequest) => {\\n-    if (!latestProducts.length) {\\n-      latestProducts = await listProducts();\\n-    }\\n-    return latestProducts;\\n-  },\\n-  { auto_refresh_interval: 86400_000 },\\n-);\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-08-16-31.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-08-16-31.json b/common/changes/@yuants/vendor-aster/2025-12-08-16-31.json\\nnew file mode 100644\\nindex 000000000..deef94df0\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-08-16-31.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-08-16-31.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-08-16-31.json b/common/changes/@yuants/vendor-gate/2025-12-08-16-31.json\\nnew file mode 100644\\nindex 000000000..924f21e5e\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-08-16-31.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-31.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-31.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-31.json\\nnew file mode 100644\\nindex 000000000..51d655ab8\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-31.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n+      \\\"comment\\\": \\\"增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\",\n+      \"short\": \"8fa79e6e2\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-09 00:39:44 +0800\",\n+      \"subject\": \"chore: bump version (#2263)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex 7841bcca2..f8ada593c 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.24\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.24\\\",\\n+      \\\"date\\\": \\\"Mon, 08 Dec 2025 16:38:57 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex 30fed97c2..fe5f652f0 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Mon, 08 Dec 2025 15:50:21 GMT and should not be manually modified.\\n+This log was last generated on Mon, 08 Dec 2025 16:38:57 GMT and should not be manually modified.\\n+\\n+## 0.7.24\\n+Mon, 08 Dec 2025 16:38:57 GMT\\n+\\n+### Patches\\n+\\n+- 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex 3896d935a..7e9909718 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.23\\\",\\n+  \\\"version\\\": \\\"0.7.24\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\\nindex 0963c4a2a..77e5763f2 100644\\n--- a/apps/vendor-gate/CHANGELOG.json\\n+++ b/apps/vendor-gate/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.4.21\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-gate_v0.4.21\\\",\\n+      \\\"date\\\": \\\"Mon, 08 Dec 2025 16:38:57 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add liq price\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 9,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\\nindex 4b4bddf54..f98f7ebe6 100644\\n--- a/apps/vendor-gate/CHANGELOG.md\\n+++ b/apps/vendor-gate/CHANGELOG.md\\n@@ -3 +3,9 @@\\n-This log was last generated on Sun, 07 Dec 2025 22:20:53 GMT and should not be manually modified.\\n+This log was last generated on Mon, 08 Dec 2025 16:38:57 GMT and should not be manually modified.\\n+\\n+## 0.4.21\\n+Mon, 08 Dec 2025 16:38:57 GMT\\n+\\n+### Patches\\n+\\n+- add liq price\\n+- 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\\nindex edbe9859e..24821cb9a 100644\\n--- a/apps/vendor-gate/package.json\\n+++ b/apps/vendor-gate/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.20\\\",\\n+  \\\"version\\\": \\\"0.4.21\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 23,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.json b/apps/vendor-hyperliquid/CHANGELOG.json\\nindex 505c2aba8..fe8aac16d 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.json\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.json\\n@@ -3,0 +4,23 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.11\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-hyperliquid_v0.7.11\\\",\\n+      \\\"date\\\": \\\"Mon, 08 Dec 2025 16:38:57 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"更新 spot 账户产品映射逻辑，避免硬编码并支持动态产品列表\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"add liq price\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.md b/apps/vendor-hyperliquid/CHANGELOG.md\\nindex 5764f6cb3..0e78b7e43 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.md\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.md\\n@@ -3 +3,10 @@\\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+This log was last generated on Mon, 08 Dec 2025 16:38:57 GMT and should not be manually modified.\\n+\\n+## 0.7.11\\n+Mon, 08 Dec 2025 16:38:57 GMT\\n+\\n+### Patches\\n+\\n+- 更新 spot 账户产品映射逻辑，避免硬编码并支持动态产品列表\\n+- add liq price\\n+- 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/package.json b/apps/vendor-hyperliquid/package.json\\nindex 04995e5ed..7f429f059 100644\\n--- a/apps/vendor-hyperliquid/package.json\\n+++ b/apps/vendor-hyperliquid/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.10\\\",\\n+  \\\"version\\\": \\\"0.7.11\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex b0ba7384b..2c1be394f 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.12\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.12\\\",\\n+      \\\"date\\\": \\\"Mon, 08 Dec 2025 16:38:57 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix liq price\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex a6885d3a0..649c75138 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Mon, 08 Dec 2025 15:50:21 GMT and should not be manually modified.\\n+This log was last generated on Mon, 08 Dec 2025 16:38:57 GMT and should not be manually modified.\\n+\\n+## 0.29.12\\n+Mon, 08 Dec 2025 16:38:57 GMT\\n+\\n+### Patches\\n+\\n+- fix liq price\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 39df78830..4ae8f4a5a 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.29.11\\\",\\n+  \\\"version\\\": \\\"0.29.12\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-08-16-31.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-08-16-31.json b/common/changes/@yuants/vendor-aster/2025-12-08-16-31.json\\ndeleted file mode 100644\\nindex deef94df0..000000000\\n--- a/common/changes/@yuants/vendor-aster/2025-12-08-16-31.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n-      \\\"comment\\\": \\\"增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-08-15-50.json => main_2025-12-08-16-39.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-08-16-15.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-08-16-15.json b/common/changes/@yuants/vendor-gate/2025-12-08-16-15.json\\ndeleted file mode 100644\\nindex 69d5baf6d..000000000\\n--- a/common/changes/@yuants/vendor-gate/2025-12-08-16-15.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n-      \\\"comment\\\": \\\"add liq price\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-08-16-31.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-08-16-31.json b/common/changes/@yuants/vendor-gate/2025-12-08-16-31.json\\ndeleted file mode 100644\\nindex 924f21e5e..000000000\\n--- a/common/changes/@yuants/vendor-gate/2025-12-08-16-31.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n-      \\\"comment\\\": \\\"增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/{main_2025-12-07-22-20.json => main_2025-12-08-16-39.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json\\ndeleted file mode 100644\\nindex 59e9e5f97..000000000\\n--- a/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n-      \\\"comment\\\": \\\"更新 spot 账户产品映射逻辑，避免硬编码并支持动态产品列表\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-15.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-15.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-15.json\\ndeleted file mode 100644\\nindex 6ecd3ba28..000000000\\n--- a/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-15.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n-      \\\"comment\\\": \\\"add liq price\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-31.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-31.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-31.json\\ndeleted file mode 100644\\nindex 51d655ab8..000000000\\n--- a/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-31.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n-      \\\"comment\\\": \\\"增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/{main_2025-12-07-16-38.json => main_2025-12-08-16-39.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-08-16-15.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 8fa79e6e299dd92b5dd4f7552a29bbd1096394b4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 00:39:44 2025 +0800\\n\\n    chore: bump version (#2263)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-08-16-15.json b/common/changes/@yuants/vendor-okx/2025-12-08-16-15.json\\ndeleted file mode 100644\\nindex 4200aba5c..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-08-16-15.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"fix liq price\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-08-15-50.json => main_2025-12-08-16-39.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"7d834feb5b0901a5ecd280eb134babe6b8a3cd58\",\n+      \"short\": \"7d834feb5\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-09 01:24:10 +0800\",\n+      \"subject\": \"feat(vendor-gate): 统一账户服务，整合现货与期货逻辑，移除冗余代码 (#2264)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": \"vendor-gate\",\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 4,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-gate/SESSION_NOTES.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 7d834feb5b0901a5ecd280eb134babe6b8a3cd58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 01:24:10 2025 +0800\\n\\n    feat(vendor-gate): 统一账户服务，整合现货与期货逻辑，移除冗余代码 (#2264)\\n\\ndiff --git a/apps/vendor-gate/SESSION_NOTES.md b/apps/vendor-gate/SESSION_NOTES.md\\nindex 3513753f8..eefeaa9e0 100644\\n--- a/apps/vendor-gate/SESSION_NOTES.md\\n+++ b/apps/vendor-gate/SESSION_NOTES.md\\n@@ -112 +112 @@\\n-  - spot 账户在生成 position 前获取并缓存（24 小时 TTL）最新 spot 产品列表，构建 base → product_id 映射，用余额资产匹配 product_id，缺失时回退旧路径，避免硬编码。\\n+  - 统一账户服务内获取并缓存（24 小时 TTL）最新 spot 产品列表，构建 base → product_id 映射并应用于 spot 余额；同时内联永续持仓逻辑，移除单独的 spot/future 账户实现，统一从 `getUnifiedAccountInfo` 输出头寸。\\n@@ -114 +114,3 @@\\n-  - `apps/vendor-gate/src/services/accounts/spot.ts`\\n+  - `apps/vendor-gate/src/services/accounts/unified.ts`\\n+  - 删除：`apps/vendor-gate/src/services/accounts/{spot,future}.ts`\\n+  - `apps/vendor-gate/src/services/exchange.ts`\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 50,\n+          \"path\": \"apps/vendor-gate/src/services/accounts/future.ts\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 7d834feb5b0901a5ecd280eb134babe6b8a3cd58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 01:24:10 2025 +0800\\n\\n    feat(vendor-gate): 统一账户服务，整合现货与期货逻辑，移除冗余代码 (#2264)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/future.ts b/apps/vendor-gate/src/services/accounts/future.ts\\ndeleted file mode 100644\\nindex d67d4926f..000000000\\n--- a/apps/vendor-gate/src/services/accounts/future.ts\\n+++ /dev/null\\n@@ -1,50 +0,0 @@\\n-import type { IPosition } from '@yuants/data-account';\\n-import { encodePath } from '@yuants/utils';\\n-import { getFuturePositions, getFuturesAccounts, ICredential } from '../../api/private-api';\\n-import { productCache } from '../markets/product';\\n-\\n-export const loadFuturePositions = async (credential: ICredential): Promise<IPosition[]> => {\\n-  const positions: IPosition[] = [];\\n-  const positionsRes = await getFuturePositions(credential, 'usdt');\\n-\\n-  for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\\n-    if (!(Math.abs(position.size) > 0)) continue;\\n-\\n-    const product_id = encodePath('GATE', 'FUTURE', position.contract);\\n-    const theProduct = await productCache.query(product_id);\\n-    const volume = Math.abs(position.size);\\n-    const closable_price = Number(position.mark_price);\\n-    const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\\n-    positions.push({\\n-      datasource_id: 'GATE',\\n-      position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n-      product_id,\\n-      direction:\\n-        position.mode === 'dual_long'\\n-          ? 'LONG'\\n-          : position.mode === 'dual_short'\\n-          ? 'SHORT'\\n-          : position.size > 0\\n-          ? 'LONG'\\n-          : 'SHORT',\\n-      volume,\\n-      free_volume: Math.abs(position.size),\\n-      position_price: Number(position.entry_price),\\n-      closable_price,\\n-      floating_profit: Number(position.unrealised_pnl),\\n-      liquidation_price: position.liq_price,\\n-      valuation,\\n-    });\\n-  }\\n-\\n-  return positions;\\n-};\\n-\\n-export const getFutureAccountInfo = async (credential: ICredential) => {\\n-  const [positions, rawAccount] = await Promise.all([\\n-    loadFuturePositions(credential),\\n-    getFuturesAccounts(credential, 'usdt'),\\n-  ]);\\n-\\n-  return positions;\\n-};\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 41,\n+          \"path\": \"apps/vendor-gate/src/services/accounts/spot.ts\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 7d834feb5b0901a5ecd280eb134babe6b8a3cd58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 01:24:10 2025 +0800\\n\\n    feat(vendor-gate): 统一账户服务，整合现货与期货逻辑，移除冗余代码 (#2264)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/spot.ts b/apps/vendor-gate/src/services/accounts/spot.ts\\ndeleted file mode 100644\\nindex 86c2b697f..000000000\\n--- a/apps/vendor-gate/src/services/accounts/spot.ts\\n+++ /dev/null\\n@@ -1,41 +0,0 @@\\n-import { createCache } from '@yuants/cache';\\n-import { makeSpotPosition } from '@yuants/data-account';\\n-import { getSpotAccounts, ICredential } from '../../api/private-api';\\n-import { encodePath } from '@yuants/utils';\\n-import { listProducts } from '../markets/product';\\n-\\n-const spotProductMapCache = createCache(\\n-  async () => {\\n-    const products = await listProducts();\\n-    const map = new Map<string, string>();\\n-    for (const product of products) {\\n-      const [, instType] = product.product_id.split('/');\\n-      if (instType === 'SPOT') {\\n-        map.set(product.base_currency, product.product_id);\\n-      }\\n-    }\\n-    return map;\\n-  },\\n-  { expire: 86_400_000 },\\n-);\\n-\\n-export const getSpotAccountInfo = async (credential: ICredential) => {\\n-  const [res, spotProductMap] = await Promise.all([\\n-    getSpotAccounts(credential),\\n-    spotProductMapCache.query(''),\\n-  ]);\\n-  const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n-  if (!Array.isArray(res)) {\\n-    throw new Error('Failed to load spot balances');\\n-  }\\n-  return res.map((item) => {\\n-    return makeSpotPosition({\\n-      datasource_id: 'GATE',\\n-      position_id: item.currency,\\n-      product_id: resolvedSpotProductMap.get(item.currency) ?? encodePath('GATE', 'SPOT', `${item.currency}`),\\n-      volume: Number(item.available),\\n-      free_volume: Number(item.available),\\n-      closable_price: 1, // TODO: use real price\\n-    });\\n-  });\\n-};\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 61,\n+          \"deletions\": 7,\n+          \"path\": \"apps/vendor-gate/src/services/accounts/unified.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 7d834feb5b0901a5ecd280eb134babe6b8a3cd58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 01:24:10 2025 +0800\\n\\n    feat(vendor-gate): 统一账户服务，整合现货与期货逻辑，移除冗余代码 (#2264)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/unified.ts b/apps/vendor-gate/src/services/accounts/unified.ts\\nindex f49b87a16..8baba2c3f 100644\\n--- a/apps/vendor-gate/src/services/accounts/unified.ts\\n+++ b/apps/vendor-gate/src/services/accounts/unified.ts\\n@@ -1,4 +1,2 @@\\n-import type { IActionHandlerOfGetAccountInfo, IPosition } from '@yuants/data-account';\\n-import { getUnifiedAccounts, ICredential } from '../../api/private-api';\\n-import { getSpotTickers } from '../../api/public-api';\\n-import { loadFuturePositions } from './future';\\n+import { createCache } from '@yuants/cache';\\n+import type { IPosition } from '@yuants/data-account';\\n@@ -5,0 +4,54 @@ import { encodePath } from '@yuants/utils';\\n+import { getUnifiedAccounts, getFuturePositions, ICredential } from '../../api/private-api';\\n+import { getSpotTickers } from '../../api/public-api';\\n+import { listProducts } from '../markets/product';\\n+\\n+const spotProductMapCache = createCache(\\n+  async () => {\\n+    const products = await listProducts();\\n+    const map = new Map<string, string>();\\n+    for (const product of products ?? []) {\\n+      const [, instType] = product.product_id.split('/');\\n+      if (instType === 'SPOT') {\\n+        map.set(product.base_currency, product.product_id);\\n+      }\\n+    }\\n+    return map;\\n+  },\\n+  { expire: 86_400_000 },\\n+);\\n+\\n+const loadFuturePositions = async (credential: ICredential): Promise<IPosition[]> => {\\n+  const positions: IPosition[] = [];\\n+  const positionsRes = await getFuturePositions(credential, 'usdt');\\n+\\n+  for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\\n+    if (!(Math.abs(position.size) > 0)) continue;\\n+\\n+    const product_id = encodePath('GATE', 'FUTURE', position.contract);\\n+    const volume = Math.abs(position.size);\\n+    const closable_price = Number(position.mark_price);\\n+    const valuation = volume * closable_price;\\n+    positions.push({\\n+      datasource_id: 'GATE',\\n+      position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n+      product_id,\\n+      direction:\\n+        position.mode === 'dual_long'\\n+          ? 'LONG'\\n+          : position.mode === 'dual_short'\\n+          ? 'SHORT'\\n+          : position.size > 0\\n+          ? 'LONG'\\n+          : 'SHORT',\\n+      volume,\\n+      free_volume: Math.abs(position.size),\\n+      position_price: Number(position.entry_price),\\n+      closable_price,\\n+      floating_profit: Number(position.unrealised_pnl),\\n+      liquidation_price: position.liq_price,\\n+      valuation,\\n+    });\\n+  }\\n+\\n+  return positions;\\n+};\\n@@ -8 +60 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-  const [futurePositions, unifiedAccount, spotTickers] = await Promise.all([\\n+  const [futurePositions, unifiedAccount, spotTickers, spotProductMap] = await Promise.all([\\n@@ -11,0 +64 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n+    spotProductMapCache.query('').catch(() => undefined),\\n@@ -13,0 +67 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n+  const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n@@ -32 +86 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-        datasource_id: 'gate/spot',\\n+        datasource_id: 'GATE',\\n@@ -34 +88 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-        product_id: encodePath('GATE', 'SPOT', currency),\\n+        product_id: resolvedSpotProductMap.get(currency) ?? encodePath('GATE', 'SPOT', currency),\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"spotProductMapCache\",\n+              \"code\": \"const spotProductMapCache = createCache(\\n  async () => {\",\n+              \"lineStart\": 8,\n+              \"lineEnd\": 9\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"products\",\n+              \"code\": \"const products = await listProducts();\",\n+              \"lineStart\": 10,\n+              \"lineEnd\": 10\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"map\",\n+              \"code\": \"const map = new Map<string, string>();\",\n+              \"lineStart\": 11,\n+              \"lineEnd\": 11\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"product\",\n+              \"code\": \"    for (const product of products ?? []) {\\n      const [, instType] = product.product_id.split('/');\\n      if (instType === 'SPOT') {\\n        map.set(product.base_currency, product.product_id);\\n      }\\n    }\\n    return map;\\n  },\\n  { expire: 86_400_000 },\\n);\\n\",\n+              \"lineStart\": 12,\n+              \"lineEnd\": 22\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"loadFuturePositions\",\n+              \"code\": \"const loadFuturePositions = async (credential: ICredential): Promise<IPosition[]> => {\",\n+              \"lineStart\": 23,\n+              \"lineEnd\": 23\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"positions\",\n+              \"code\": \"const positions: IPosition[] = [];\",\n+              \"lineStart\": 24,\n+              \"lineEnd\": 24\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"positionsRes\",\n+              \"code\": \"const positionsRes = await getFuturePositions(credential, 'usdt');\\n\",\n+              \"lineStart\": 25,\n+              \"lineEnd\": 26\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"position\",\n+              \"code\": \"for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\\n  if (!(Math.abs(position.size) > 0)) continue;\\n\",\n+              \"lineStart\": 27,\n+              \"lineEnd\": 29\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"product_id\",\n+              \"code\": \"const product_id = encodePath('GATE', 'FUTURE', position.contract);\",\n+              \"lineStart\": 30,\n+              \"lineEnd\": 30\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"volume\",\n+              \"code\": \"const volume = Math.abs(position.size);\",\n+              \"lineStart\": 31,\n+              \"lineEnd\": 31\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"closable_price\",\n+              \"code\": \"const closable_price = Number(position.mark_price);\",\n+              \"lineStart\": 32,\n+              \"lineEnd\": 32\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"valuation\",\n+              \"code\": \"const valuation = volume * closable_price;\\npositions.push({\\n  datasource_id: 'GATE',\\n  position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n  product_id,\\n  direction:\\n    position.mode === 'dual_long'\\n      ? 'LONG'\\n      : position.mode === 'dual_short'\\n      ? 'SHORT'\\n      : position.size > 0\\n      ? 'LONG'\\n      : 'SHORT',\\n  volume,\\n  free_volume: Math.abs(position.size),\",\n+              \"lineStart\": 33,\n+              \"lineEnd\": 66\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"resolvedSpotProductMap\",\n+              \"code\": \"const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n      datasource_id: 'GATE',\\n      product_id: resolvedSpotProductMap.get(currency) ?? encodePath('GATE', 'SPOT', currency),\",\n+              \"lineStart\": 67,\n+              \"lineEnd\": 89\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 16,\n+          \"path\": \"apps/vendor-gate/src/services/exchange.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 7d834feb5b0901a5ecd280eb134babe6b8a3cd58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 01:24:10 2025 +0800\\n\\n    feat(vendor-gate): 统一账户服务，整合现货与期货逻辑，移除冗余代码 (#2264)\\n\\ndiff --git a/apps/vendor-gate/src/services/exchange.ts b/apps/vendor-gate/src/services/exchange.ts\\nindex 5672321de..3a8fbaeca 100644\\n--- a/apps/vendor-gate/src/services/exchange.ts\\n+++ b/apps/vendor-gate/src/services/exchange.ts\\n@@ -5 +4,0 @@ import { Terminal } from '@yuants/protocol';\\n-import { decodePath } from '@yuants/utils';\\n@@ -10 +8,0 @@ import { submitOrder } from './orders/submitOrder';\\n-import { getFutureAccountInfo } from './accounts/future';\\n@@ -30,4 +28 @@ provideExchangeServices<ICredential>(terminal, {\\n-    const [unifiedPositions] = await Promise.all([\\n-      // getFutureAccountInfo(credential),\\n-      getUnifiedAccountInfo(credential),\\n-    ]);\\n+    const unifiedPositions = await getUnifiedAccountInfo(credential);\\n@@ -47,10 +42,2 @@ provideExchangeServices<ICredential>(terminal, {\\n-    const [_, instType] = decodePath(product_id); // BINANCE/USDT-FUTURE/ADAUSDT\\n-    // if (instType === 'SPOT') {\\n-    //   const positions = await getSpotAccountInfoSnapshot(credential);\\n-    //   return positions.filter((position) => position.product_id === product_id);\\n-    // }\\n-    if (instType === 'FUTURE') {\\n-      const positions = await getFutureAccountInfo(credential);\\n-      return positions.filter((position) => position.product_id === product_id);\\n-    }\\n-    throw new Error(`Unsupported instType: ${instType}`);\\n+    const positions = await getUnifiedAccountInfo(credential);\\n+    return positions.filter((position) => position.product_id === product_id);\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"unifiedPositions\",\n+              \"code\": \"const unifiedPositions = await getUnifiedAccountInfo(credential);\",\n+              \"lineStart\": 28,\n+              \"lineEnd\": 41\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"positions\",\n+              \"code\": \"const positions = await getUnifiedAccountInfo(credential);\\nreturn positions.filter((position) => position.product_id === product_id);\",\n+              \"lineStart\": 42,\n+              \"lineEnd\": 44\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-08-17-21.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 7d834feb5b0901a5ecd280eb134babe6b8a3cd58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 01:24:10 2025 +0800\\n\\n    feat(vendor-gate): 统一账户服务，整合现货与期货逻辑，移除冗余代码 (#2264)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-08-17-21.json b/common/changes/@yuants/vendor-gate/2025-12-08-17-21.json\\nnew file mode 100644\\nindex 000000000..9d32a3404\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-08-17-21.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"feat: 统一账户服务，整合现货与期货逻辑，移除冗余代码\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"96439652828d05d6d4f6b7d681f79ebc991a36cc\",\n+      \"short\": \"964396528\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-09 01:25:17 +0800\",\n+      \"subject\": \"chore: bump version (#2265)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 96439652828d05d6d4f6b7d681f79ebc991a36cc\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 01:25:17 2025 +0800\\n\\n    chore: bump version (#2265)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\\nindex 77e5763f2..86d6e1579 100644\\n--- a/apps/vendor-gate/CHANGELOG.json\\n+++ b/apps/vendor-gate/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.4.22\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-gate_v0.4.22\\\",\\n+      \\\"date\\\": \\\"Mon, 08 Dec 2025 17:24:52 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"feat: 统一账户服务，整合现货与期货逻辑，移除冗余代码\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 96439652828d05d6d4f6b7d681f79ebc991a36cc\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 01:25:17 2025 +0800\\n\\n    chore: bump version (#2265)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\\nindex f98f7ebe6..4fb526cd7 100644\\n--- a/apps/vendor-gate/CHANGELOG.md\\n+++ b/apps/vendor-gate/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Mon, 08 Dec 2025 16:38:57 GMT and should not be manually modified.\\n+This log was last generated on Mon, 08 Dec 2025 17:24:52 GMT and should not be manually modified.\\n+\\n+## 0.4.22\\n+Mon, 08 Dec 2025 17:24:52 GMT\\n+\\n+### Patches\\n+\\n+- feat: 统一账户服务，整合现货与期货逻辑，移除冗余代码\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 96439652828d05d6d4f6b7d681f79ebc991a36cc\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 01:25:17 2025 +0800\\n\\n    chore: bump version (#2265)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\\nindex 24821cb9a..ae7c38bee 100644\\n--- a/apps/vendor-gate/package.json\\n+++ b/apps/vendor-gate/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.21\\\",\\n+  \\\"version\\\": \\\"0.4.22\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-08-17-21.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 96439652828d05d6d4f6b7d681f79ebc991a36cc\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 01:25:17 2025 +0800\\n\\n    chore: bump version (#2265)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-08-17-21.json b/common/changes/@yuants/vendor-gate/2025-12-08-17-21.json\\ndeleted file mode 100644\\nindex 9d32a3404..000000000\\n--- a/common/changes/@yuants/vendor-gate/2025-12-08-17-21.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n-      \\\"comment\\\": \\\"feat: 统一账户服务，整合现货与期货逻辑，移除冗余代码\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/{main_2025-12-08-16-39.json => main_2025-12-08-17-24.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"e877cfa130104d79691d3e9098433f6a27d277ef\",\n+      \"short\": \"e877cfa13\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-09 01:46:51 +0800\",\n+      \"subject\": \"feat: enhance error handling and fix position side logic (#2266)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 11,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-aster/src/api/private-api.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit e877cfa130104d79691d3e9098433f6a27d277ef\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 01:46:51 2025 +0800\\n\\n    feat: enhance error handling and fix position side logic (#2266)\\n\\ndiff --git a/apps/vendor-aster/src/api/private-api.ts b/apps/vendor-aster/src/api/private-api.ts\\nindex 71f2f7943..ddafe28ed 100644\\n--- a/apps/vendor-aster/src/api/private-api.ts\\n+++ b/apps/vendor-aster/src/api/private-api.ts\\n@@ -1 +1 @@\\n-import { encodeHex, HmacSHA256 } from '@yuants/utils';\\n+import { encodeHex, HmacSHA256, newError } from '@yuants/utils';\\n@@ -99 +99,10 @@ const request = async <T>(\\n-    throw `APIError: ${response.status} ${response.statusText} ${resText}`;\\n+    throw newError(\\n+      'ASTER_API_ERROR',\\n+      {\\n+        status: response.status,\\n+        statusText: response.statusText,\\n+        resText,\\n+        params,\\n+      },\\n+      e,\\n+    );\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 6,\n+          \"path\": \"apps/vendor-aster/src/services/orders/submitOrder.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit e877cfa130104d79691d3e9098433f6a27d277ef\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 01:46:51 2025 +0800\\n\\n    feat: enhance error handling and fix position side logic (#2266)\\n\\ndiff --git a/apps/vendor-aster/src/services/orders/submitOrder.ts b/apps/vendor-aster/src/services/orders/submitOrder.ts\\nindex 37791f5bf..9580e87b1 100644\\n--- a/apps/vendor-aster/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-aster/src/services/orders/submitOrder.ts\\n@@ -80,6 +80,9 @@ const handleSubmitOrderOfPerp: IActionHandlerOfSubmitOrder<ICredential> = async\\n-  const positionSide =\\n-    order.order_direction === 'OPEN_LONG' || order.order_direction === 'CLOSE_LONG'\\n-      ? 'LONG'\\n-      : order.order_direction === 'OPEN_SHORT' || order.order_direction === 'CLOSE_SHORT'\\n-      ? 'SHORT'\\n-      : undefined;\\n+  const isPositionSingleSide = true; // FIXME: Aster 永续合约仅支持单向持仓模式\\n+\\n+  const positionSide = isPositionSingleSide\\n+    ? undefined\\n+    : order.order_direction === 'OPEN_LONG' || order.order_direction === 'CLOSE_LONG'\\n+    ? 'LONG'\\n+    : order.order_direction === 'OPEN_SHORT' || order.order_direction === 'CLOSE_SHORT'\\n+    ? 'SHORT'\\n+    : undefined;\\n@@ -91,0 +95 @@ const handleSubmitOrderOfPerp: IActionHandlerOfSubmitOrder<ICredential> = async\\n+  //\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"isPositionSingleSide\",\n+              \"code\": \"const isPositionSingleSide = true; // FIXME: Aster 永续合约仅支持单向持仓模式\\n\",\n+              \"lineStart\": 80,\n+              \"lineEnd\": 81\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"positionSide\",\n+              \"code\": \"const positionSide = isPositionSingleSide\\n  ? undefined\\n  : order.order_direction === 'OPEN_LONG' || order.order_direction === 'CLOSE_LONG'\\n  ? 'LONG'\\n  : order.order_direction === 'OPEN_SHORT' || order.order_direction === 'CLOSE_SHORT'\\n  ? 'SHORT'\\n  : undefined;\\n//\",\n+              \"lineStart\": 82,\n+              \"lineEnd\": 96\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/src/api/client.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit e877cfa130104d79691d3e9098433f6a27d277ef\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 01:46:51 2025 +0800\\n\\n    feat: enhance error handling and fix position side logic (#2266)\\n\\ndiff --git a/apps/vendor-binance/src/api/client.ts b/apps/vendor-binance/src/api/client.ts\\nindex 4435ec16c..fab85d85d 100644\\n--- a/apps/vendor-binance/src/api/client.ts\\n+++ b/apps/vendor-binance/src/api/client.ts\\n@@ -122 +122,3 @@ const callApi = async <T>(\\n-    MetricBinanceApiUsedWeight.labels({ endpoint, terminal_id: terminal.terminal_id }).set(+usedWeight1M);\\n+    MetricBinanceApiUsedWeight.labels({ path: endpoint, terminal_id: terminal.terminal_id }).set(\\n+      +usedWeight1M,\\n+    );\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-08-17-45.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit e877cfa130104d79691d3e9098433f6a27d277ef\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 01:46:51 2025 +0800\\n\\n    feat: enhance error handling and fix position side logic (#2266)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-08-17-45.json b/common/changes/@yuants/vendor-aster/2025-12-08-17-45.json\\nnew file mode 100644\\nindex 000000000..5deb654dd\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-08-17-45.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"fix position side\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-08-17-45.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit e877cfa130104d79691d3e9098433f6a27d277ef\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 01:46:51 2025 +0800\\n\\n    feat: enhance error handling and fix position side logic (#2266)\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-08-17-45.json b/common/changes/@yuants/vendor-binance/2025-12-08-17-45.json\\nnew file mode 100644\\nindex 000000000..fe10454eb\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-binance/2025-12-08-17-45.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n+      \\\"comment\\\": \\\"fix metric \\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"bcc58c8fadbfc95a5898223f5df1bf26331bb163\",\n+      \"short\": \"bcc58c8fa\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-09 01:58:44 +0800\",\n+      \"subject\": \"chore: bump version (#2267)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit bcc58c8fadbfc95a5898223f5df1bf26331bb163\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 01:58:44 2025 +0800\\n\\n    chore: bump version (#2267)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex f8ada593c..b01e4c9fc 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.25\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.25\\\",\\n+      \\\"date\\\": \\\"Mon, 08 Dec 2025 17:52:18 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix position side\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit bcc58c8fadbfc95a5898223f5df1bf26331bb163\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 01:58:44 2025 +0800\\n\\n    chore: bump version (#2267)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex fe5f652f0..9e5b38423 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Mon, 08 Dec 2025 16:38:57 GMT and should not be manually modified.\\n+This log was last generated on Mon, 08 Dec 2025 17:52:18 GMT and should not be manually modified.\\n+\\n+## 0.7.25\\n+Mon, 08 Dec 2025 17:52:18 GMT\\n+\\n+### Patches\\n+\\n+- fix position side\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit bcc58c8fadbfc95a5898223f5df1bf26331bb163\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 01:58:44 2025 +0800\\n\\n    chore: bump version (#2267)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex 7e9909718..6c19a6621 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.24\\\",\\n+  \\\"version\\\": \\\"0.7.25\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit bcc58c8fadbfc95a5898223f5df1bf26331bb163\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 01:58:44 2025 +0800\\n\\n    chore: bump version (#2267)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\\nindex f4782dd2f..018b86216 100644\\n--- a/apps/vendor-binance/CHANGELOG.json\\n+++ b/apps/vendor-binance/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.14\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-binance_v0.10.14\\\",\\n+      \\\"date\\\": \\\"Mon, 08 Dec 2025 17:52:18 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix metric \\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit bcc58c8fadbfc95a5898223f5df1bf26331bb163\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 01:58:44 2025 +0800\\n\\n    chore: bump version (#2267)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\\nindex 4d7c1cec4..5e4515057 100644\\n--- a/apps/vendor-binance/CHANGELOG.md\\n+++ b/apps/vendor-binance/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Mon, 08 Dec 2025 15:50:21 GMT and should not be manually modified.\\n+This log was last generated on Mon, 08 Dec 2025 17:52:18 GMT and should not be manually modified.\\n+\\n+## 0.10.14\\n+Mon, 08 Dec 2025 17:52:18 GMT\\n+\\n+### Patches\\n+\\n+- fix metric \\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit bcc58c8fadbfc95a5898223f5df1bf26331bb163\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 01:58:44 2025 +0800\\n\\n    chore: bump version (#2267)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\\nindex ecc201b03..6b182bc83 100644\\n--- a/apps/vendor-binance/package.json\\n+++ b/apps/vendor-binance/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.13\\\",\\n+  \\\"version\\\": \\\"0.10.14\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-08-17-45.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit bcc58c8fadbfc95a5898223f5df1bf26331bb163\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 01:58:44 2025 +0800\\n\\n    chore: bump version (#2267)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-08-17-45.json b/common/changes/@yuants/vendor-aster/2025-12-08-17-45.json\\ndeleted file mode 100644\\nindex 5deb654dd..000000000\\n--- a/common/changes/@yuants/vendor-aster/2025-12-08-17-45.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n-      \\\"comment\\\": \\\"fix position side\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-08-16-39.json => main_2025-12-08-17-52.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-08-17-45.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit bcc58c8fadbfc95a5898223f5df1bf26331bb163\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 01:58:44 2025 +0800\\n\\n    chore: bump version (#2267)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-08-17-45.json b/common/changes/@yuants/vendor-binance/2025-12-08-17-45.json\\ndeleted file mode 100644\\nindex fe10454eb..000000000\\n--- a/common/changes/@yuants/vendor-binance/2025-12-08-17-45.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n-      \\\"comment\\\": \\\"fix metric \\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/{main_2025-12-08-15-50.json => main_2025-12-08-17-52.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"7524db52e9309e9cf10c853f2f2097063a0a7939\",\n+      \"short\": \"7524db52e\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-09 02:03:56 +0800\",\n+      \"subject\": \"fix: add delay to prevent API rate limit issues (#2268)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"fix\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-binance/src/public-data/interest_rate.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 7524db52e9309e9cf10c853f2f2097063a0a7939\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 02:03:56 2025 +0800\\n\\n    fix: add delay to prevent API rate limit issues (#2268)\\n\\ndiff --git a/apps/vendor-binance/src/public-data/interest_rate.ts b/apps/vendor-binance/src/public-data/interest_rate.ts\\nindex 920a2d3ce..a197c30a2 100644\\n--- a/apps/vendor-binance/src/public-data/interest_rate.ts\\n+++ b/apps/vendor-binance/src/public-data/interest_rate.ts\\n@@ -20,0 +21 @@ createSeriesProvider<IInterestRate>(terminal, {\\n+        await firstValueFrom(timer(1000));\\n@@ -43 +43,0 @@ createSeriesProvider<IInterestRate>(terminal, {\\n-        await firstValueFrom(timer(1000));\\n@@ -48,0 +49 @@ createSeriesProvider<IInterestRate>(terminal, {\\n+        await firstValueFrom(timer(1000));\\n@@ -70 +70,0 @@ createSeriesProvider<IInterestRate>(terminal, {\\n-        await firstValueFrom(timer(1000));\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-08-18-02.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 7524db52e9309e9cf10c853f2f2097063a0a7939\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 02:03:56 2025 +0800\\n\\n    fix: add delay to prevent API rate limit issues (#2268)\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-08-18-02.json b/common/changes/@yuants/vendor-binance/2025-12-08-18-02.json\\nnew file mode 100644\\nindex 000000000..118194952\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-binance/2025-12-08-18-02.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n+      \\\"comment\\\": \\\"fix api too fast\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"4a65d80af6fa6088c5c6e695c8a73777e6f217df\",\n+      \"short\": \"4a65d80af\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-09 04:52:08 +0800\",\n+      \"subject\": \"chore: bump version (#2269)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 4a65d80af6fa6088c5c6e695c8a73777e6f217df\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 04:52:08 2025 +0800\\n\\n    chore: bump version (#2269)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\\nindex 018b86216..6c9663970 100644\\n--- a/apps/vendor-binance/CHANGELOG.json\\n+++ b/apps/vendor-binance/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.15\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-binance_v0.10.15\\\",\\n+      \\\"date\\\": \\\"Mon, 08 Dec 2025 18:12:20 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix api too fast\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 4a65d80af6fa6088c5c6e695c8a73777e6f217df\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 04:52:08 2025 +0800\\n\\n    chore: bump version (#2269)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\\nindex 5e4515057..3e6d3e53b 100644\\n--- a/apps/vendor-binance/CHANGELOG.md\\n+++ b/apps/vendor-binance/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Mon, 08 Dec 2025 17:52:18 GMT and should not be manually modified.\\n+This log was last generated on Mon, 08 Dec 2025 18:12:20 GMT and should not be manually modified.\\n+\\n+## 0.10.15\\n+Mon, 08 Dec 2025 18:12:20 GMT\\n+\\n+### Patches\\n+\\n+- fix api too fast\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 4a65d80af6fa6088c5c6e695c8a73777e6f217df\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 04:52:08 2025 +0800\\n\\n    chore: bump version (#2269)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\\nindex 6b182bc83..0970b460f 100644\\n--- a/apps/vendor-binance/package.json\\n+++ b/apps/vendor-binance/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.14\\\",\\n+  \\\"version\\\": \\\"0.10.15\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-08-18-02.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 4a65d80af6fa6088c5c6e695c8a73777e6f217df\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Tue Dec 9 04:52:08 2025 +0800\\n\\n    chore: bump version (#2269)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-08-18-02.json b/common/changes/@yuants/vendor-binance/2025-12-08-18-02.json\\ndeleted file mode 100644\\nindex 118194952..000000000\\n--- a/common/changes/@yuants/vendor-binance/2025-12-08-18-02.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n-      \\\"comment\\\": \\\"fix api too fast\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/{main_2025-12-08-17-52.json => main_2025-12-08-18-12.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    }\n+  ],\n+  \"analysis\": {\n+    \"domains\": [\n+      {\n+        \"name\": \"API请求优化与限速\",\n+        \"commits\": [\n+          \"fbb85da27\",\n+          \"ec638fca2\",\n+          \"0e69317d1\",\n+          \"9f8b2059d\",\n+          \"7d834feb5\",\n+          \"e877cfa13\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-aster/src/services/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\",\n+          \"apps/vendor-huobi/src/api/private-api.ts\",\n+          \"apps/vendor-huobi/src/services/accounts/swap.ts\",\n+          \"apps/vendor-okx/src/accountInfos/trading.ts\",\n+          \"common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\",\n+          \"ui/web/src/modules/AccountInfo/AccountInfoPanel.tsx\",\n+          \"apps/vendor-binance/src/api/client.ts\",\n+          \"apps/vendor-binance/src/api/public-api.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"安全与鉴权\",\n+        \"commits\": [\n+          \"fbb85da27\",\n+          \"ec638fca2\",\n+          \"0e69317d1\",\n+          \"5fad1f6ea\",\n+          \"cbbfb2ce9\",\n+          \"9f8b2059d\",\n+          \"7d834feb5\",\n+          \"e877cfa13\",\n+          \"7524db52e\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-aster/src/services/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\",\n+          \"apps/vendor-huobi/src/api/private-api.ts\",\n+          \"apps/vendor-huobi/src/services/accounts/swap.ts\",\n+          \"apps/vendor-okx/src/accountInfos/trading.ts\",\n+          \"common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\",\n+          \"ui/web/src/modules/AccountInfo/AccountInfoPanel.tsx\",\n+          \"apps/vendor-binance/src/api/client.ts\",\n+          \"apps/vendor-binance/src/api/public-api.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"订单与交易\",\n+        \"commits\": [\n+          \"fbb85da27\",\n+          \"ec638fca2\",\n+          \"0e69317d1\",\n+          \"5fad1f6ea\",\n+          \"cbbfb2ce9\",\n+          \"9f8b2059d\",\n+          \"7d834feb5\",\n+          \"e877cfa13\",\n+          \"7524db52e\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-aster/src/services/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\",\n+          \"apps/vendor-huobi/src/api/private-api.ts\",\n+          \"apps/vendor-huobi/src/services/accounts/swap.ts\",\n+          \"apps/vendor-okx/src/accountInfos/trading.ts\",\n+          \"common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\",\n+          \"ui/web/src/modules/AccountInfo/AccountInfoPanel.tsx\",\n+          \"apps/vendor-binance/src/api/client.ts\",\n+          \"apps/vendor-binance/src/api/public-api.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"账户管理\",\n+        \"commits\": [\n+          \"fbb85da27\",\n+          \"ec638fca2\",\n+          \"0e69317d1\",\n+          \"5fad1f6ea\",\n+          \"cbbfb2ce9\",\n+          \"9f8b2059d\",\n+          \"f9883ff8c\",\n+          \"7d834feb5\",\n+          \"e877cfa13\",\n+          \"7524db52e\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-aster/src/services/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\",\n+          \"apps/vendor-huobi/src/api/private-api.ts\",\n+          \"apps/vendor-huobi/src/services/accounts/swap.ts\",\n+          \"apps/vendor-okx/src/accountInfos/trading.ts\",\n+          \"common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\",\n+          \"ui/web/src/modules/AccountInfo/AccountInfoPanel.tsx\",\n+          \"apps/vendor-binance/src/api/client.ts\",\n+          \"apps/vendor-binance/src/api/public-api.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"市场数据\",\n+        \"commits\": [\n+          \"fbb85da27\",\n+          \"ec638fca2\",\n+          \"0e69317d1\",\n+          \"5fad1f6ea\",\n+          \"cbbfb2ce9\",\n+          \"9f8b2059d\",\n+          \"7d834feb5\",\n+          \"e877cfa13\",\n+          \"7524db52e\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-aster/src/services/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\",\n+          \"apps/vendor-huobi/src/api/private-api.ts\",\n+          \"apps/vendor-huobi/src/services/accounts/swap.ts\",\n+          \"apps/vendor-okx/src/accountInfos/trading.ts\",\n+          \"common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\",\n+          \"ui/web/src/modules/AccountInfo/AccountInfoPanel.tsx\",\n+          \"apps/vendor-binance/src/api/client.ts\",\n+          \"apps/vendor-binance/src/api/public-api.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"配置与环境\",\n+        \"commits\": [\n+          \"fbb85da27\",\n+          \"ec638fca2\",\n+          \"0e69317d1\",\n+          \"5fad1f6ea\",\n+          \"baf2f4727\",\n+          \"cbbfb2ce9\",\n+          \"9f8b2059d\",\n+          \"f9883ff8c\",\n+          \"8fa79e6e2\",\n+          \"7d834feb5\",\n+          \"964396528\",\n+          \"e877cfa13\",\n+          \"bcc58c8fa\",\n+          \"7524db52e\",\n+          \"4a65d80af\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-aster/src/services/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\",\n+          \"apps/vendor-huobi/src/api/private-api.ts\",\n+          \"apps/vendor-huobi/src/services/accounts/swap.ts\",\n+          \"apps/vendor-okx/src/accountInfos/trading.ts\",\n+          \"common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\",\n+          \"ui/web/src/modules/AccountInfo/AccountInfoPanel.tsx\",\n+          \"apps/vendor-binance/src/api/client.ts\",\n+          \"apps/vendor-binance/src/api/public-api.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"接口重构\",\n+        \"commits\": [\n+          \"ec638fca2\",\n+          \"0e69317d1\",\n+          \"9f8b2059d\",\n+          \"e877cfa13\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-huobi/src/api/private-api.ts\",\n+          \"apps/vendor-huobi/src/services/accounts/swap.ts\",\n+          \"apps/vendor-okx/src/accountInfos/trading.ts\",\n+          \"common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\",\n+          \"ui/web/src/modules/AccountInfo/AccountInfoPanel.tsx\",\n+          \"apps/vendor-binance/src/api/client.ts\",\n+          \"apps/vendor-binance/src/api/public-api.ts\",\n+          \"apps/vendor-binance/src/public-data/interest_rate.ts\",\n+          \"common/changes/@yuants/vendor-binance/2025-12-08-15-43.json\"\n+        ]\n+      },\n+      {\n+        \"name\": \"错误处理与观测\",\n+        \"commits\": [\n+          \"5fad1f6ea\",\n+          \"cbbfb2ce9\",\n+          \"7524db52e\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-aster/SESSION_NOTES.md\",\n+          \"apps/vendor-aster/src/services/accounts/spot.ts\",\n+          \"common/changes/@yuants/vendor-aster/2025-12-08-15-43.json\",\n+          \"apps/vendor-hyperliquid/SESSION_NOTES.md\",\n+          \"apps/vendor-hyperliquid/src/services/accounts/spot.ts\",\n+          \"common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json\",\n+          \"apps/vendor-binance/src/public-data/interest_rate.ts\",\n+          \"common/changes/@yuants/vendor-binance/2025-12-08-18-02.json\"\n+        ]\n+      },\n+      {\n+        \"name\": \"文档\",\n+        \"commits\": [\n+          \"5fad1f6ea\",\n+          \"baf2f4727\",\n+          \"cbbfb2ce9\",\n+          \"f9883ff8c\",\n+          \"8fa79e6e2\",\n+          \"7d834feb5\",\n+          \"964396528\",\n+          \"bcc58c8fa\",\n+          \"4a65d80af\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-aster/SESSION_NOTES.md\",\n+          \"apps/vendor-aster/src/services/accounts/spot.ts\",\n+          \"common/changes/@yuants/vendor-aster/2025-12-08-15-43.json\",\n+          \"apps/vendor-aster/CHANGELOG.json\",\n+          \"apps/vendor-aster/CHANGELOG.md\",\n+          \"apps/vendor-aster/package.json\",\n+          \"apps/vendor-binance/CHANGELOG.json\",\n+          \"apps/vendor-binance/CHANGELOG.md\",\n+          \"apps/vendor-binance/package.json\",\n+          \"apps/vendor-huobi/CHANGELOG.json\"\n+        ]\n+      }\n+    ],\n+    \"riskIndicators\": [\n+      {\n+        \"type\": \"no_tests\",\n+        \"severity\": \"medium\",\n+        \"details\": \"包含功能或修复提交但未见测试文件更新\",\n+        \"commits\": []\n+      },\n+      {\n+        \"type\": \"api_change\",\n+        \"severity\": \"high\",\n+        \"details\": \"3 个提交修改了API或接口定义\",\n+        \"commits\": [\n+          \"ec638fca2\",\n+          \"0e69317d1\",\n+          \"e877cfa13\"\n+        ]\n+      }\n+    ]\n+  },\n+  \"metadata\": {\n+    \"tool\": \"git-changes-reporter\",\n+    \"version\": \"3.0.0\",\n+    \"repository\": \"/home/runner/work/Yuan/Yuan\"\n+  }\n+}\n\\ No newline at end of file\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "parseProductId",
              "code": "      \"patch\": \"commit fbb85da27991cc62afe8aa6baa510f21b294c025\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Mon Dec 8 22:57:39 2025 +0800\\n\\n    feat: fix symbol (#2255)\\n\\ndiff --git a/apps/vendor-aster/src/services/orders/submitOrder.ts b/apps/vendor-aster/src/services/orders/submitOrder.ts\\nindex 9e99af753..37791f5bf 100644\\n--- a/apps/vendor-aster/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-aster/src/services/orders/submitOrder.ts\\n@@ -10,2 +10,2 @@ const parseProductId = (productId?: string) => {\\n-  if (parts.length >= 2) {\\n-    return { category: parts[0], symbol: parts.slice(1).join('/') };\\n+  if (parts.length >= 3) {\\n+    return { category: parts[1], symbol: parts.slice(2).join('/') };\\n\",\n      \"codeSnippets\": []\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\",\n      \"changeType\": \"added\",\n      \"patch\": \"commit fbb85da27991cc62afe8aa6baa510f21b294c025\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Mon Dec 8 22:57:39 2025 +0800\\n\\n    feat: fix symbol (#2255)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-08-14-54.json b/common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\\nnew file mode 100644\\nindex 000000000..ef9f41ad7\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-08-14-54.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"fix symbol\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n      \"codeSnippets\": []\n    }\n  ]\n},\n{\n  \"hash\": \"ec638fca239e77b09a7ca453956b7d1f334a1515\",",
              "lineStart": 127,
              "lineEnd": 157
            },
            {
              "type": "function",
              "name": "getSwapCrossPositionInfo",
              "code": "  \"patch\": \"commit ec638fca239e77b09a7ca453956b7d1f334a1515\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:19:08 2025 +0800\\n\\n    feat: add liquidation price to position info and account summary (#2256)\\n\\ndiff --git a/apps/vendor-huobi/src/api/private-api.ts b/apps/vendor-huobi/src/api/private-api.ts\\nindex 644260e67..6c9422f76 100644\\n--- a/apps/vendor-huobi/src/api/private-api.ts\\n+++ b/apps/vendor-huobi/src/api/private-api.ts\\n@@ -130,0 +131 @@ export const getSwapCrossPositionInfo = (\\n+    symbol: string;\\n@@ -132,3 +132,0 @@ export const getSwapCrossPositionInfo = (\\n-    contract_type: string;\\n-    direction: string;\\n-    margin_mode: string;\\n@@ -136,0 +135,2 @@ export const getSwapCrossPositionInfo = (\\n+    frozen: number;\\n+    cost_open: number;\\n@@ -138 +137,0 @@ export const getSwapCrossPositionInfo = (\\n-    last_price: number;\\n@@ -139,0 +139 @@ export const getSwapCrossPositionInfo = (\\n+    profit_rate: number;\\n@@ -140,0 +141,13 @@ export const getSwapCrossPositionInfo = (\\n+    position_margin: number;\\n+    direction: string;\\n+    profit: number;\\n+    last_price: number;\\n+    margin_asset: string;\\n+    margin_mode: string;\\n+    margin_account: string;\\n+    contract_type: string;\\n+    pair: string;\\n+    business_type: string;\\n+    position_mode: string;\\n+    adl_risk_percent: string;\\n+    liquidation_price?: number;\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 1,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-huobi/src/services/accounts/swap.ts\",\n  \"changeType\": \"added\",",
              "lineStart": 158,
              "lineEnd": 165
            },
            {
              "type": "function",
              "name": "getSwapAccountInfo",
              "code": "  \"patch\": \"commit ec638fca239e77b09a7ca453956b7d1f334a1515\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:19:08 2025 +0800\\n\\n    feat: add liquidation price to position info and account summary (#2256)\\n\\ndiff --git a/apps/vendor-huobi/src/services/accounts/swap.ts b/apps/vendor-huobi/src/services/accounts/swap.ts\\nindex c847a74db..91ef044f0 100644\\n--- a/apps/vendor-huobi/src/services/accounts/swap.ts\\n+++ b/apps/vendor-huobi/src/services/accounts/swap.ts\\n@@ -45,0 +46 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n+      liquidation_price: v.liquidation_price ? `${v.liquidation_price}` : undefined,\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 1,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-okx/src/accountInfos/trading.ts\",\n  \"changeType\": \"added\",",
              "lineStart": 166,
              "lineEnd": 173
            },
            {
              "type": "function",
              "name": "getTradingAccountInfo",
              "code": "  \"patch\": \"commit ec638fca239e77b09a7ca453956b7d1f334a1515\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:19:08 2025 +0800\\n\\n    feat: add liquidation price to position info and account summary (#2256)\\n\\ndiff --git a/apps/vendor-okx/src/accountInfos/trading.ts b/apps/vendor-okx/src/accountInfos/trading.ts\\nindex 60ded8fde..57ba84894 100644\\n--- a/apps/vendor-okx/src/accountInfos/trading.ts\\n+++ b/apps/vendor-okx/src/accountInfos/trading.ts\\n@@ -78,0 +79 @@ export const getTradingAccountInfo: IActionHandlerOfGetAccountInfo<ICredential>\\n+      liquidation_price: x.liqPx,\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\",\n  \"changeType\": \"added\",\n  \"patch\": \"commit ec638fca239e77b09a7ca453956b7d1f334a1515\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:19:08 2025 +0800\\n\\n    feat: add liquidation price to position info and account summary (#2256)\\n\\ndiff --git a/common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json b/common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\\nnew file mode 100644\\nindex 000000000..f9a107c99\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-huobi/2025-12-08-15-15.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\",\\n+      \\\"comment\\\": \\\"add liq price\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-okx/2025-12-08-15-15.json\",",
              "lineStart": 174,
              "lineEnd": 220
            },
            {
              "type": "function",
              "name": "retryAfterUntil",
              "code": "\"patch\": \"commit 0e69317d18450ae59a82fcc6d191a05d0f5c8fbe\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:45:39 2025 +0800\\n\\n    feat: implement active rate limit control for API requests (#2258)\\n\\ndiff --git a/apps/vendor-binance/src/api/client.ts b/apps/vendor-binance/src/api/client.ts\\nindex ed027929c..4435ec16c 100644\\n--- a/apps/vendor-binance/src/api/client.ts\\n+++ b/apps/vendor-binance/src/api/client.ts\\n@@ -22 +22,2 @@ export interface IApiError {\\n-let retryAfterUntil: number | null = null;\\n+// 每个接口单独进行主动限流控制\\n+const mapPathToRetryAfterUntil: Record<string, number> = {};\\n@@ -84,0 +86,2 @@ const callApi = async <T>(\\n+  const retryAfterUntil = mapPathToRetryAfterUntil[endpoint];\\n+\\n@@ -87 +90,7 @@ const callApi = async <T>(\\n-      throw newError('ACTIVE_RATE_LIMIT', { retryAfterUntil, now: Date.now(), url: url.href });\\n+      // 主动限流\\n+      throw newError('ACTIVE_RATE_LIMIT', {\\n+        wait_time: `${retryAfterUntil - Date.now()}ms`,\\n+        retryAfterUntil,\\n+        url: url.href,\\n+        endpoint,\\n+      });\\n@@ -89 +98 @@ const callApi = async <T>(\\n-    retryAfterUntil = null;\\n+    delete mapPathToRetryAfterUntil[endpoint];\\n@@ -101 +110 @@ const callApi = async <T>(\\n-    retryAfterUntil = Date.now() + parseInt(retryAfter, 10) * 1000;\\n+    mapPathToRetryAfterUntil[endpoint] = Date.now() + parseInt(retryAfter, 10) * 1000;\\n@@ -113 +122 @@ const callApi = async <T>(\\n-    MetricBinanceApiUsedWeight.labels({ terminal_id: terminal.terminal_id }).set(+usedWeight1M);\\n+    MetricBinanceApiUsedWeight.labels({ endpoint, terminal_id: terminal.terminal_id }).set(+usedWeight1M);\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"mapPathToRetryAfterUntil\",",
              "lineStart": 221,
              "lineEnd": 225
            },
            {
              "type": "function",
              "name": "mapPathToRetryAfterUntil",
              "code": "  \"code\": \"const mapPathToRetryAfterUntil: Record<string, number> = {};\",\n  \"lineStart\": 23,\n  \"lineEnd\": 85\n},\n{\n  \"type\": \"function\",\n  \"name\": \"retryAfterUntil\",",
              "lineStart": 226,
              "lineEnd": 232
            },
            {
              "type": "function",
              "name": "retryAfterUntil",
              "code": "      \"code\": \"const retryAfterUntil = mapPathToRetryAfterUntil[endpoint];\\n\\n    // 主动限流\\n    throw newError('ACTIVE_RATE_LIMIT', {\\n      wait_time: `${retryAfterUntil - Date.now()}ms`,\\n      retryAfterUntil,\\n      url: url.href,\\n      endpoint,\\n    });\\n  delete mapPathToRetryAfterUntil[endpoint];\\n  mapPathToRetryAfterUntil[endpoint] = Date.now() + parseInt(retryAfter, 10) * 1000;\\n  MetricBinanceApiUsedWeight.labels({ endpoint, terminal_id: terminal.terminal_id }).set(+usedWeight1M);\",\n      \"lineStart\": 86,\n      \"lineEnd\": 123\n    }\n  ]\n},\n{\n  \"additions\": 1,\n  \"deletions\": 1,\n  \"path\": \"apps/vendor-binance/src/api/public-api.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 233,
              "lineEnd": 243
            },
            {
              "type": "function",
              "name": "getFutureExchangeInfo",
              "code": "  \"patch\": \"commit 0e69317d18450ae59a82fcc6d191a05d0f5c8fbe\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:45:39 2025 +0800\\n\\n    feat: implement active rate limit control for API requests (#2258)\\n\\ndiff --git a/apps/vendor-binance/src/api/public-api.ts b/apps/vendor-binance/src/api/public-api.ts\\nindex 07546b44b..70dc33214 100644\\n--- a/apps/vendor-binance/src/api/public-api.ts\\n+++ b/apps/vendor-binance/src/api/public-api.ts\\n@@ -108 +108 @@ export const getFutureExchangeInfo = (): Promise<IFutureExchangeInfo> =>\\n- * https://binance-docs.github.io/apidocs/futures/cn/#31dbeb24c4\\n+ * https://developers.binance.com/docs/zh-CN/derivatives/usds-margined-futures/market-data/rest-api/Get-Funding-Rate-History\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 2,\n  \"deletions\": 7,\n  \"path\": \"apps/vendor-binance/src/public-data/interest_rate.ts\",\n  \"changeType\": \"modified\",\n  \"patch\": \"commit 0e69317d18450ae59a82fcc6d191a05d0f5c8fbe\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 23:45:39 2025 +0800\\n\\n    feat: implement active rate limit control for API requests (#2258)\\n\\ndiff --git a/apps/vendor-binance/src/public-data/interest_rate.ts b/apps/vendor-binance/src/public-data/interest_rate.ts\\nindex ab9b57f1a..920a2d3ce 100644\\n--- a/apps/vendor-binance/src/public-data/interest_rate.ts\\n+++ b/apps/vendor-binance/src/public-data/interest_rate.ts\\n@@ -6 +5,0 @@ import { firstValueFrom, timer } from 'rxjs';\\n-import { getFutureFundingRate } from '../api/public-api';\\n@@ -7,0 +7 @@ import { getMarginInterestRateHistory } from '../api/private-api';\\n+import { getFutureFundingRate } from '../api/public-api';\\n@@ -56,6 +56 @@ createSeriesProvider<IInterestRate>(terminal, {\\n-          (v: {\\n-            asset: string;\\n-            dailyInterestRate: string;\\n-            timestamp: number;\\n-            vipLevel: number;\\n-          }): IInterestRate => ({\\n+          (v): IInterestRate => ({\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-binance/2025-12-08-15-43.json\",",
              "lineStart": 244,
              "lineEnd": 290
            },
            {
              "type": "function",
              "name": "asBNBPrice",
              "code": "\"patch\": \"commit 5fad1f6eadad3dcc953e14cdc5c516952d80f144\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Mon Dec 8 23:48:34 2025 +0800\\n\\n    fix(vendor-aster): position spot product id (#2259)\\n\\ndiff --git a/apps/vendor-aster/src/services/accounts/spot.ts b/apps/vendor-aster/src/services/accounts/spot.ts\\nindex d04bf81c9..34ec7b038 100644\\n--- a/apps/vendor-aster/src/services/accounts/spot.ts\\n+++ b/apps/vendor-aster/src/services/accounts/spot.ts\\n@@ -4,0 +5 @@ import { getApiV1Account, getApiV1TickerPrice, getFApiV4Account, ICredential } f\\n+import { listProducts } from '../markets/product';\\n@@ -16,0 +18,12 @@ const asBNBPrice = createCache(\\n+const buildSpotProductMap = async () => {\\n+  const products = await listProducts();\\n+  const map = new Map<string, string>();\\n+  for (const product of products) {\\n+    const [, instType] = product.product_id.split('/');\\n+    if (instType === 'SPOT') {\\n+      map.set(product.base_currency, product.product_id);\\n+    }\\n+  }\\n+  return map;\\n+};\\n+\\n@@ -19 +32 @@ export const getPositions = async (credential: ICredential) => {\\n-  const [x, prices, prep] = await Promise.all([\\n+  const [x, prices, prep, spotProductMap] = await Promise.all([\\n@@ -22,0 +36 @@ export const getPositions = async (credential: ICredential) => {\\n+    buildSpotProductMap(),\\n@@ -31 +45 @@ export const getPositions = async (credential: ICredential) => {\\n-        product_id: encodePath('ASTER', 'SPOT', b.asset),\\n+        product_id: spotProductMap.get(b.asset) ?? encodePath('ASTER', 'SPOT', b.asset),\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"buildSpotProductMap\",",
              "lineStart": 291,
              "lineEnd": 295
            },
            {
              "type": "function",
              "name": "buildSpotProductMap",
              "code": "  \"code\": \"const buildSpotProductMap = async () => {\",\n  \"lineStart\": 18,\n  \"lineEnd\": 18\n},\n{\n  \"type\": \"function\",\n  \"name\": \"products\",",
              "lineStart": 296,
              "lineEnd": 302
            },
            {
              "type": "function",
              "name": "products",
              "code": "  \"code\": \"const products = await listProducts();\",\n  \"lineStart\": 19,\n  \"lineEnd\": 19\n},\n{\n  \"type\": \"function\",\n  \"name\": \"map\",",
              "lineStart": 303,
              "lineEnd": 309
            },
            {
              "type": "function",
              "name": "map",
              "code": "  \"code\": \"const map = new Map<string, string>();\",\n  \"lineStart\": 20,\n  \"lineEnd\": 20\n},\n{\n  \"type\": \"function\",\n  \"name\": \"product\",",
              "lineStart": 310,
              "lineEnd": 316
            },
            {
              "type": "function",
              "name": "product",
              "code": "        \"code\": \"  for (const product of products) {\\n    const [, instType] = product.product_id.split('/');\\n    if (instType === 'SPOT') {\\n      map.set(product.base_currency, product.product_id);\\n    }\\n  }\\n  return map;\\n};\\n\\n  const [x, prices, prep, spotProductMap] = await Promise.all([\\n    buildSpotProductMap(),\\n        product_id: spotProductMap.get(b.asset) ?? encodePath('ASTER', 'SPOT', b.asset),\",\n        \"lineStart\": 21,\n        \"lineEnd\": 46\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-aster/2025-12-08-15-43.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit 5fad1f6eadad3dcc953e14cdc5c516952d80f144\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Mon Dec 8 23:48:34 2025 +0800\\n\\n    fix(vendor-aster): position spot product id (#2259)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-08-15-43.json b/common/changes/@yuants/vendor-aster/2025-12-08-15-43.json\\nnew file mode 100644\\nindex 000000000..18aefe7a2\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-08-15-43.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"aster position product\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 317,
              "lineEnd": 541
            },
            {
              "type": "function",
              "name": "buildSpotProductMap",
              "code": "\"patch\": \"commit cbbfb2ce959b706c969e6bfc65661f7fae769883\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:13:25 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新 spot 账户产品映射逻辑，避免硬编码并支持动态产品列表 (#2260)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/accounts/spot.ts b/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\nindex cee336c2e..ea9f59ece 100644\\n--- a/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\n+++ b/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\n@@ -4,0 +5,13 @@ import { ICredential } from '../../api/types';\\n+import { listProducts } from '../markets/product';\\n+\\n+const buildSpotProductMap = async () => {\\n+  const products = await listProducts();\\n+  const map = new Map<string, string>();\\n+  for (const product of products) {\\n+    const [, instType] = product.product_id.split('/');\\n+    if (instType === 'SPOT') {\\n+      map.set(product.base_currency, product.product_id);\\n+    }\\n+  }\\n+  return map;\\n+};\\n@@ -12 +25 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-  const [balances, mids] = await Promise.all([\\n+  const [balances, mids, spotProductMap] = await Promise.all([\\n@@ -14,0 +28 @@ export const getSpotPositions = async (credential: ICredential) => {\\n+    buildSpotProductMap(),\\n@@ -25 +39,2 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-          product_id: encodePath('HYPERLIQUID', 'SPOT', `${balance.coin}-USDC`),\\n+          product_id:\\n+            spotProductMap.get(balance.coin) ?? encodePath('HYPERLIQUID', 'SPOT', `${balance.coin}-USDC`),\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"buildSpotProductMap\",",
              "lineStart": 542,
              "lineEnd": 546
            },
            {
              "type": "function",
              "name": "buildSpotProductMap",
              "code": "  \"code\": \"const buildSpotProductMap = async () => {\",\n  \"lineStart\": 7,\n  \"lineEnd\": 7\n},\n{\n  \"type\": \"function\",\n  \"name\": \"products\",",
              "lineStart": 547,
              "lineEnd": 553
            },
            {
              "type": "function",
              "name": "products",
              "code": "  \"code\": \"const products = await listProducts();\",\n  \"lineStart\": 8,\n  \"lineEnd\": 8\n},\n{\n  \"type\": \"function\",\n  \"name\": \"map\",",
              "lineStart": 554,
              "lineEnd": 560
            },
            {
              "type": "function",
              "name": "map",
              "code": "  \"code\": \"const map = new Map<string, string>();\",\n  \"lineStart\": 9,\n  \"lineEnd\": 9\n},\n{\n  \"type\": \"function\",\n  \"name\": \"product\",",
              "lineStart": 561,
              "lineEnd": 567
            },
            {
              "type": "function",
              "name": "product",
              "code": "        \"code\": \"  for (const product of products) {\\n    const [, instType] = product.product_id.split('/');\\n    if (instType === 'SPOT') {\\n      map.set(product.base_currency, product.product_id);\\n    }\\n  }\\n  return map;\\n};\\n  const [balances, mids, spotProductMap] = await Promise.all([\\n    buildSpotProductMap(),\\n          product_id:\\n            spotProductMap.get(balance.coin) ?? encodePath('HYPERLIQUID', 'SPOT', `${balance.coin}-USDC`),\",\n        \"lineStart\": 10,\n        \"lineEnd\": 41\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit cbbfb2ce959b706c969e6bfc65661f7fae769883\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:13:25 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新 spot 账户产品映射逻辑，避免硬编码并支持动态产品列表 (#2260)\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json\\nnew file mode 100644\\nindex 000000000..59e9e5f97\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-11.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n+      \\\"comment\\\": \\\"更新 spot 账户产品映射逻辑，避免硬编码并支持动态产品列表\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 568,
              "lineEnd": 601
            },
            {
              "type": "function",
              "name": "getFuturePositions",
              "code": "  \"patch\": \"commit 9f8b2059d0271ea0114735d7a6aaf27df979db6b\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 00:25:15 2025 +0800\\n\\n    feat: add liquidation price to future and perpetual position data (#2261)\\n\\ndiff --git a/apps/vendor-gate/src/api/private-api.ts b/apps/vendor-gate/src/api/private-api.ts\\nindex 23714cd97..d8e7c4861 100644\\n--- a/apps/vendor-gate/src/api/private-api.ts\\n+++ b/apps/vendor-gate/src/api/private-api.ts\\n@@ -91,0 +92 @@ export const getFuturePositions = (\\n+    liq_price: string;\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 1,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-gate/src/services/accounts/future.ts\",\n  \"changeType\": \"added\",",
              "lineStart": 602,
              "lineEnd": 609
            },
            {
              "type": "function",
              "name": "loadFuturePositions",
              "code": "  \"patch\": \"commit 9f8b2059d0271ea0114735d7a6aaf27df979db6b\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 00:25:15 2025 +0800\\n\\n    feat: add liquidation price to future and perpetual position data (#2261)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/future.ts b/apps/vendor-gate/src/services/accounts/future.ts\\nindex 4e762c193..d67d4926f 100644\\n--- a/apps/vendor-gate/src/services/accounts/future.ts\\n+++ b/apps/vendor-gate/src/services/accounts/future.ts\\n@@ -34,0 +35 @@ export const loadFuturePositions = async (credential: ICredential): Promise<IPos\\n+      liquidation_price: position.liq_price,\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 1,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-hyperliquid/src/services/accounts/perp.ts\",\n  \"changeType\": \"added\",",
              "lineStart": 610,
              "lineEnd": 617
            },
            {
              "type": "function",
              "name": "getPerpPositions",
              "code": "  \"patch\": \"commit 9f8b2059d0271ea0114735d7a6aaf27df979db6b\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 00:25:15 2025 +0800\\n\\n    feat: add liquidation price to future and perpetual position data (#2261)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/accounts/perp.ts b/apps/vendor-hyperliquid/src/services/accounts/perp.ts\\nindex 2be6376de..ee8784d73 100644\\n--- a/apps/vendor-hyperliquid/src/services/accounts/perp.ts\\n+++ b/apps/vendor-hyperliquid/src/services/accounts/perp.ts\\n@@ -25,0 +26 @@ export const getPerpPositions = async (credential: ICredential) => {\\n+      liquidation_price: position.position.liquidationPx,\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 1,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-okx/src/experimental/getPositions.ts\",\n  \"changeType\": \"added\",",
              "lineStart": 618,
              "lineEnd": 625
            },
            {
              "type": "function",
              "name": "getPositions",
              "code": "  \"patch\": \"commit 9f8b2059d0271ea0114735d7a6aaf27df979db6b\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 00:25:15 2025 +0800\\n\\n    feat: add liquidation price to future and perpetual position data (#2261)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/getPositions.ts b/apps/vendor-okx/src/experimental/getPositions.ts\\nindex 1cbbe0873..5fe0bd5eb 100644\\n--- a/apps/vendor-okx/src/experimental/getPositions.ts\\n+++ b/apps/vendor-okx/src/experimental/getPositions.ts\\n@@ -67,0 +68 @@ export const getPositions = async (credential: ICredential): Promise<IPosition[]\\n+      liquidation_price: x.liqPx,\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-gate/2025-12-08-16-15.json\",\n  \"changeType\": \"added\",\n  \"patch\": \"commit 9f8b2059d0271ea0114735d7a6aaf27df979db6b\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 00:25:15 2025 +0800\\n\\n    feat: add liquidation price to future and perpetual position data (#2261)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-08-16-15.json b/common/changes/@yuants/vendor-gate/2025-12-08-16-15.json\\nnew file mode 100644\\nindex 000000000..69d5baf6d\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-08-16-15.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"add liq price\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-08-16-15.json\",",
              "lineStart": 626,
              "lineEnd": 680
            },
            {
              "type": "function",
              "name": "asBNBPrice",
              "code": "\"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-aster/src/services/accounts/spot.ts b/apps/vendor-aster/src/services/accounts/spot.ts\\nindex 34ec7b038..785a165be 100644\\n--- a/apps/vendor-aster/src/services/accounts/spot.ts\\n+++ b/apps/vendor-aster/src/services/accounts/spot.ts\\n@@ -18,7 +18,9 @@ const asBNBPrice = createCache(\\n-const buildSpotProductMap = async () => {\\n-  const products = await listProducts();\\n-  const map = new Map<string, string>();\\n-  for (const product of products) {\\n-    const [, instType] = product.product_id.split('/');\\n-    if (instType === 'SPOT') {\\n-      map.set(product.base_currency, product.product_id);\\n+const spotProductMapCache = createCache(\\n+  async () => {\\n+    const products = await listProducts();\\n+    const map = new Map<string, string>();\\n+    for (const product of products) {\\n+      const [, instType] = product.product_id.split('/');\\n+      if (instType === 'SPOT') {\\n+        map.set(product.base_currency, product.product_id);\\n+      }\\n@@ -26,3 +28,4 @@ const buildSpotProductMap = async () => {\\n-  }\\n-  return map;\\n-};\\n+    return map;\\n+  },\\n+  { expire: 86_400_000 },\\n+);\\n@@ -36 +39 @@ export const getPositions = async (credential: ICredential) => {\\n-    buildSpotProductMap(),\\n+    spotProductMapCache.query(''),\\n@@ -38,0 +42,2 @@ export const getPositions = async (credential: ICredential) => {\\n+  const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n+\\n@@ -45 +50 @@ export const getPositions = async (credential: ICredential) => {\\n-        product_id: spotProductMap.get(b.asset) ?? encodePath('ASTER', 'SPOT', b.asset),\\n+        product_id: resolvedSpotProductMap.get(b.asset) ?? encodePath('ASTER', 'SPOT', b.asset),\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"spotProductMapCache\",",
              "lineStart": 681,
              "lineEnd": 685
            },
            {
              "type": "function",
              "name": "spotProductMapCache",
              "code": "  \"code\": \"const spotProductMapCache = createCache(\\n  async () => {\",\n  \"lineStart\": 18,\n  \"lineEnd\": 19\n},\n{\n  \"type\": \"function\",\n  \"name\": \"products\",",
              "lineStart": 686,
              "lineEnd": 692
            },
            {
              "type": "function",
              "name": "products",
              "code": "  \"code\": \"const products = await listProducts();\",\n  \"lineStart\": 20,\n  \"lineEnd\": 20\n},\n{\n  \"type\": \"function\",\n  \"name\": \"map\",",
              "lineStart": 693,
              "lineEnd": 699
            },
            {
              "type": "function",
              "name": "map",
              "code": "  \"code\": \"const map = new Map<string, string>();\",\n  \"lineStart\": 21,\n  \"lineEnd\": 21\n},\n{\n  \"type\": \"function\",\n  \"name\": \"product\",",
              "lineStart": 700,
              "lineEnd": 706
            },
            {
              "type": "function",
              "name": "product",
              "code": "  \"code\": \"    for (const product of products) {\\n      const [, instType] = product.product_id.split('/');\\n      if (instType === 'SPOT') {\\n        map.set(product.base_currency, product.product_id);\\n      }\\n    return map;\\n  },\\n  { expire: 86_400_000 },\\n);\\n    spotProductMapCache.query(''),\",\n  \"lineStart\": 22,\n  \"lineEnd\": 41\n},\n{\n  \"type\": \"function\",\n  \"name\": \"resolvedSpotProductMap\",",
              "lineStart": 707,
              "lineEnd": 713
            },
            {
              "type": "function",
              "name": "resolvedSpotProductMap",
              "code": "      \"code\": \"const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n\\n      product_id: resolvedSpotProductMap.get(b.asset) ?? encodePath('ASTER', 'SPOT', b.asset),\",\n      \"lineStart\": 42,\n      \"lineEnd\": 51\n    }\n  ]\n},\n{\n  \"additions\": 9,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-gate/SESSION_NOTES.md\",\n  \"changeType\": \"added\",\n  \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-gate/SESSION_NOTES.md b/apps/vendor-gate/SESSION_NOTES.md\\nindex 768c89019..3513753f8 100644\\n--- a/apps/vendor-gate/SESSION_NOTES.md\\n+++ b/apps/vendor-gate/SESSION_NOTES.md\\n@@ -108,0 +109,9 @@\\n+### 2025-12-08 — Codex\\n+\\n+- **本轮摘要**：\\n+  - spot 账户在生成 position 前获取并缓存（24 小时 TTL）最新 spot 产品列表，构建 base → product_id 映射，用余额资产匹配 product_id，缺失时回退旧路径，避免硬编码。\\n+- **修改的文件**：\\n+  - `apps/vendor-gate/src/services/accounts/spot.ts`\\n+- **运行的测试 / 检查**：\\n+  - `npx tsc --noEmit --project apps/vendor-gate/tsconfig.json`\\n+\\n\",\n  \"codeSnippets\": []\n},\n{",
              "lineStart": 714,
              "lineEnd": 732
            },
            {
              "type": "function",
              "name": "spotProductMapCache",
              "code": "\"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/spot.ts b/apps/vendor-gate/src/services/accounts/spot.ts\\nindex b861a4584..86c2b697f 100644\\n--- a/apps/vendor-gate/src/services/accounts/spot.ts\\n+++ b/apps/vendor-gate/src/services/accounts/spot.ts\\n@@ -0,0 +1 @@\\n+import { createCache } from '@yuants/cache';\\n@@ -3,0 +5,16 @@ import { encodePath } from '@yuants/utils';\\n+import { listProducts } from '../markets/product';\\n+\\n+const spotProductMapCache = createCache(\\n+  async () => {\\n+    const products = await listProducts();\\n+    const map = new Map<string, string>();\\n+    for (const product of products) {\\n+      const [, instType] = product.product_id.split('/');\\n+      if (instType === 'SPOT') {\\n+        map.set(product.base_currency, product.product_id);\\n+      }\\n+    }\\n+    return map;\\n+  },\\n+  { expire: 86_400_000 },\\n+);\\n@@ -6 +23,5 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-  const res = await getSpotAccounts(credential);\\n+  const [res, spotProductMap] = await Promise.all([\\n+    getSpotAccounts(credential),\\n+    spotProductMapCache.query(''),\\n+  ]);\\n+  const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n@@ -14 +35 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-      product_id: encodePath('GATE', 'SPOT', `${item.currency}`),\\n+      product_id: resolvedSpotProductMap.get(item.currency) ?? encodePath('GATE', 'SPOT', `${item.currency}`),\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"spotProductMapCache\",",
              "lineStart": 733,
              "lineEnd": 737
            },
            {
              "type": "function",
              "name": "spotProductMapCache",
              "code": "  \"code\": \"const spotProductMapCache = createCache(\\n  async () => {\",\n  \"lineStart\": 7,\n  \"lineEnd\": 8\n},\n{\n  \"type\": \"function\",\n  \"name\": \"products\",",
              "lineStart": 738,
              "lineEnd": 744
            },
            {
              "type": "function",
              "name": "products",
              "code": "  \"code\": \"const products = await listProducts();\",\n  \"lineStart\": 9,\n  \"lineEnd\": 9\n},\n{\n  \"type\": \"function\",\n  \"name\": \"map\",",
              "lineStart": 745,
              "lineEnd": 751
            },
            {
              "type": "function",
              "name": "map",
              "code": "  \"code\": \"const map = new Map<string, string>();\",\n  \"lineStart\": 10,\n  \"lineEnd\": 10\n},\n{\n  \"type\": \"function\",\n  \"name\": \"product\",",
              "lineStart": 752,
              "lineEnd": 758
            },
            {
              "type": "function",
              "name": "product",
              "code": "  \"code\": \"    for (const product of products) {\\n      const [, instType] = product.product_id.split('/');\\n      if (instType === 'SPOT') {\\n        map.set(product.base_currency, product.product_id);\\n      }\\n    }\\n    return map;\\n  },\\n  { expire: 86_400_000 },\\n);\\n  const [res, spotProductMap] = await Promise.all([\\n    getSpotAccounts(credential),\\n    spotProductMapCache.query(''),\\n  ]);\",\n  \"lineStart\": 11,\n  \"lineEnd\": 26\n},\n{\n  \"type\": \"function\",\n  \"name\": \"resolvedSpotProductMap\",",
              "lineStart": 759,
              "lineEnd": 765
            },
            {
              "type": "function",
              "name": "resolvedSpotProductMap",
              "code": "      \"code\": \"const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n    product_id: resolvedSpotProductMap.get(item.currency) ?? encodePath('GATE', 'SPOT', `${item.currency}`),\",\n      \"lineStart\": 27,\n      \"lineEnd\": 36\n    }\n  ]\n},\n{\n  \"additions\": 9,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-hyperliquid/SESSION_NOTES.md\",\n  \"changeType\": \"added\",\n  \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-hyperliquid/SESSION_NOTES.md b/apps/vendor-hyperliquid/SESSION_NOTES.md\\nindex 9b96b351b..5969eb7dc 100644\\n--- a/apps/vendor-hyperliquid/SESSION_NOTES.md\\n+++ b/apps/vendor-hyperliquid/SESSION_NOTES.md\\n@@ -203,0 +204,9 @@\\n+- **本轮摘要**：\\n+  - spot 账户的产品映射增加缓存（24 小时 TTL），避免每次查询 positions 都重新拉产品列表；产品列表加载失败时仍会回退旧的 product_id 生成逻辑。\\n+- **修改的文件**：\\n+  - `apps/vendor-hyperliquid/src/services/accounts/spot.ts`\\n+- **运行的测试 / 检查**：\\n+  - `npx tsc --noEmit --project apps/vendor-hyperliquid/tsconfig.json`\\n+\\n+### 2025-12-08 — Codex\\n+\\n\",\n  \"codeSnippets\": []\n},\n{",
              "lineStart": 766,
              "lineEnd": 784
            },
            {
              "type": "function",
              "name": "buildSpotProductMap",
              "code": "\"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/accounts/spot.ts b/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\nindex ea9f59ece..814857d05 100644\\n--- a/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\n+++ b/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\n@@ -0,0 +1 @@\\n+import { createCache } from '@yuants/cache';\\n@@ -7,7 +8,9 @@ import { listProducts } from '../markets/product';\\n-const buildSpotProductMap = async () => {\\n-  const products = await listProducts();\\n-  const map = new Map<string, string>();\\n-  for (const product of products) {\\n-    const [, instType] = product.product_id.split('/');\\n-    if (instType === 'SPOT') {\\n-      map.set(product.base_currency, product.product_id);\\n+const spotProductMapCache = createCache(\\n+  async () => {\\n+    const products = await listProducts();\\n+    const map = new Map<string, string>();\\n+    for (const product of products) {\\n+      const [, instType] = product.product_id.split('/');\\n+      if (instType === 'SPOT') {\\n+        map.set(product.base_currency, product.product_id);\\n+      }\\n@@ -15,3 +18,4 @@ const buildSpotProductMap = async () => {\\n-  }\\n-  return map;\\n-};\\n+    return map;\\n+  },\\n+  { expire: 86_400_000 },\\n+);\\n@@ -28 +32 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-    buildSpotProductMap(),\\n+    spotProductMapCache.query(''),\\n@@ -29,0 +34 @@ export const getSpotPositions = async (credential: ICredential) => {\\n+  const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n@@ -40 +45,2 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-            spotProductMap.get(balance.coin) ?? encodePath('HYPERLIQUID', 'SPOT', `${balance.coin}-USDC`),\\n+            resolvedSpotProductMap.get(balance.coin) ??\\n+            encodePath('HYPERLIQUID', 'SPOT', `${balance.coin}-USDC`),\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"spotProductMapCache\",",
              "lineStart": 785,
              "lineEnd": 789
            },
            {
              "type": "function",
              "name": "spotProductMapCache",
              "code": "  \"code\": \"const spotProductMapCache = createCache(\\n  async () => {\",\n  \"lineStart\": 8,\n  \"lineEnd\": 9\n},\n{\n  \"type\": \"function\",\n  \"name\": \"products\",",
              "lineStart": 790,
              "lineEnd": 796
            },
            {
              "type": "function",
              "name": "products",
              "code": "  \"code\": \"const products = await listProducts();\",\n  \"lineStart\": 10,\n  \"lineEnd\": 10\n},\n{\n  \"type\": \"function\",\n  \"name\": \"map\",",
              "lineStart": 797,
              "lineEnd": 803
            },
            {
              "type": "function",
              "name": "map",
              "code": "  \"code\": \"const map = new Map<string, string>();\",\n  \"lineStart\": 11,\n  \"lineEnd\": 11\n},\n{\n  \"type\": \"function\",\n  \"name\": \"product\",",
              "lineStart": 804,
              "lineEnd": 810
            },
            {
              "type": "function",
              "name": "product",
              "code": "  \"code\": \"    for (const product of products) {\\n      const [, instType] = product.product_id.split('/');\\n      if (instType === 'SPOT') {\\n        map.set(product.base_currency, product.product_id);\\n      }\\n    return map;\\n  },\\n  { expire: 86_400_000 },\\n);\\n    spotProductMapCache.query(''),\",\n  \"lineStart\": 12,\n  \"lineEnd\": 33\n},\n{\n  \"type\": \"function\",\n  \"name\": \"resolvedSpotProductMap\",",
              "lineStart": 811,
              "lineEnd": 817
            },
            {
              "type": "function",
              "name": "resolvedSpotProductMap",
              "code": "      \"code\": \"const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n          resolvedSpotProductMap.get(balance.coin) ??\\n          encodePath('HYPERLIQUID', 'SPOT', `${balance.coin}-USDC`),\",\n      \"lineStart\": 34,\n      \"lineEnd\": 47\n    }\n  ]\n},\n{\n  \"additions\": 0,\n  \"deletions\": 34,\n  \"path\": \"apps/vendor-hyperliquid/src/services/markets/product.ts\",\n  \"changeType\": \"deleted\",",
              "lineStart": 818,
              "lineEnd": 828
            },
            {
              "type": "function",
              "name": "listProducts",
              "code": "  \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/markets/product.ts b/apps/vendor-hyperliquid/src/services/markets/product.ts\\nindex 05e6136a6..406d7686f 100644\\n--- a/apps/vendor-hyperliquid/src/services/markets/product.ts\\n+++ b/apps/vendor-hyperliquid/src/services/markets/product.ts\\n@@ -60,34 +59,0 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-\\n-const refresh$ = defer(listProducts).pipe(\\n-  tap((products) => {\\n-    latestProducts = products;\\n-    products.forEach((product) => product$.next(product));\\n-  }),\\n-  tap({\\n-    error: (err) => console.error(formatTime(Date.now()), 'ProductRefreshFailed', err),\\n-  }),\\n-  retry({ delay: 5000 }),\\n-  repeat({ delay: 86400_000 }),\\n-  shareReplay(1),\\n-);\\n-\\n-refresh$.subscribe();\\n-\\n-createSQLWriter<IProduct>(terminal, {\\n-  data$: product$,\\n-  tableName: 'product',\\n-  writeInterval: 1000,\\n-  conflictKeys: ['datasource_id', 'product_id'],\\n-});\\n-\\n-provideQueryProductsService(\\n-  terminal,\\n-  'HYPERLIQUID',\\n-  async (_req: IQueryProductsRequest) => {\\n-    if (!latestProducts.length) {\\n-      latestProducts = await listProducts();\\n-    }\\n-    return latestProducts;\\n-  },\\n-  { auto_refresh_interval: 86400_000 },\\n-);\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-aster/2025-12-08-16-31.json\",\n  \"changeType\": \"added\",\n  \"patch\": \"commit f9883ff8cebb88af91ad99d7f9208bdbc6be6669\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 00:33:36 2025 +0800\\n\\n    chore(vendor): 增加 Spot 账户产品映射缓存，优化产品列表查询逻辑 (#2262)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-08-16-31.json b/common/changes/@yuants/vendor-aster/2025-12-08-16-31.json\\nnew file mode 100644\\nindex 000000000..deef94df0\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-08-16-31.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"增加 Spot 账户产品映射缓存，优化产品列表查询逻辑\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-gate/2025-12-08-16-31.json\",",
              "lineStart": 829,
              "lineEnd": 1082
            },
            {
              "type": "function",
              "name": "loadFuturePositions",
              "code": "  \"patch\": \"commit 7d834feb5b0901a5ecd280eb134babe6b8a3cd58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 01:24:10 2025 +0800\\n\\n    feat(vendor-gate): 统一账户服务，整合现货与期货逻辑，移除冗余代码 (#2264)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/future.ts b/apps/vendor-gate/src/services/accounts/future.ts\\ndeleted file mode 100644\\nindex d67d4926f..000000000\\n--- a/apps/vendor-gate/src/services/accounts/future.ts\\n+++ /dev/null\\n@@ -1,50 +0,0 @@\\n-import type { IPosition } from '@yuants/data-account';\\n-import { encodePath } from '@yuants/utils';\\n-import { getFuturePositions, getFuturesAccounts, ICredential } from '../../api/private-api';\\n-import { productCache } from '../markets/product';\\n-\\n-export const loadFuturePositions = async (credential: ICredential): Promise<IPosition[]> => {\\n-  const positions: IPosition[] = [];\\n-  const positionsRes = await getFuturePositions(credential, 'usdt');\\n-\\n-  for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\\n-    if (!(Math.abs(position.size) > 0)) continue;\\n-\\n-    const product_id = encodePath('GATE', 'FUTURE', position.contract);\\n-    const theProduct = await productCache.query(product_id);\\n-    const volume = Math.abs(position.size);\\n-    const closable_price = Number(position.mark_price);\\n-    const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\\n-    positions.push({\\n-      datasource_id: 'GATE',\\n-      position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n-      product_id,\\n-      direction:\\n-        position.mode === 'dual_long'\\n-          ? 'LONG'\\n-          : position.mode === 'dual_short'\\n-          ? 'SHORT'\\n-          : position.size > 0\\n-          ? 'LONG'\\n-          : 'SHORT',\\n-      volume,\\n-      free_volume: Math.abs(position.size),\\n-      position_price: Number(position.entry_price),\\n-      closable_price,\\n-      floating_profit: Number(position.unrealised_pnl),\\n-      liquidation_price: position.liq_price,\\n-      valuation,\\n-    });\\n-  }\\n-\\n-  return positions;\\n-};\\n-\\n-export const getFutureAccountInfo = async (credential: ICredential) => {\\n-  const [positions, rawAccount] = await Promise.all([\\n-    loadFuturePositions(credential),\\n-    getFuturesAccounts(credential, 'usdt'),\\n-  ]);\\n-\\n-  return positions;\\n-};\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 0,\n  \"deletions\": 41,\n  \"path\": \"apps/vendor-gate/src/services/accounts/spot.ts\",\n  \"changeType\": \"deleted\",",
              "lineStart": 1083,
              "lineEnd": 1090
            },
            {
              "type": "function",
              "name": "spotProductMapCache",
              "code": "  \"patch\": \"commit 7d834feb5b0901a5ecd280eb134babe6b8a3cd58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 01:24:10 2025 +0800\\n\\n    feat(vendor-gate): 统一账户服务，整合现货与期货逻辑，移除冗余代码 (#2264)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/spot.ts b/apps/vendor-gate/src/services/accounts/spot.ts\\ndeleted file mode 100644\\nindex 86c2b697f..000000000\\n--- a/apps/vendor-gate/src/services/accounts/spot.ts\\n+++ /dev/null\\n@@ -1,41 +0,0 @@\\n-import { createCache } from '@yuants/cache';\\n-import { makeSpotPosition } from '@yuants/data-account';\\n-import { getSpotAccounts, ICredential } from '../../api/private-api';\\n-import { encodePath } from '@yuants/utils';\\n-import { listProducts } from '../markets/product';\\n-\\n-const spotProductMapCache = createCache(\\n-  async () => {\\n-    const products = await listProducts();\\n-    const map = new Map<string, string>();\\n-    for (const product of products) {\\n-      const [, instType] = product.product_id.split('/');\\n-      if (instType === 'SPOT') {\\n-        map.set(product.base_currency, product.product_id);\\n-      }\\n-    }\\n-    return map;\\n-  },\\n-  { expire: 86_400_000 },\\n-);\\n-\\n-export const getSpotAccountInfo = async (credential: ICredential) => {\\n-  const [res, spotProductMap] = await Promise.all([\\n-    getSpotAccounts(credential),\\n-    spotProductMapCache.query(''),\\n-  ]);\\n-  const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n-  if (!Array.isArray(res)) {\\n-    throw new Error('Failed to load spot balances');\\n-  }\\n-  return res.map((item) => {\\n-    return makeSpotPosition({\\n-      datasource_id: 'GATE',\\n-      position_id: item.currency,\\n-      product_id: resolvedSpotProductMap.get(item.currency) ?? encodePath('GATE', 'SPOT', `${item.currency}`),\\n-      volume: Number(item.available),\\n-      free_volume: Number(item.available),\\n-      closable_price: 1, // TODO: use real price\\n-    });\\n-  });\\n-};\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 61,\n  \"deletions\": 7,\n  \"path\": \"apps/vendor-gate/src/services/accounts/unified.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1091,
              "lineEnd": 1098
            },
            {
              "type": "function",
              "name": "spotProductMapCache",
              "code": "\"patch\": \"commit 7d834feb5b0901a5ecd280eb134babe6b8a3cd58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 01:24:10 2025 +0800\\n\\n    feat(vendor-gate): 统一账户服务，整合现货与期货逻辑，移除冗余代码 (#2264)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/unified.ts b/apps/vendor-gate/src/services/accounts/unified.ts\\nindex f49b87a16..8baba2c3f 100644\\n--- a/apps/vendor-gate/src/services/accounts/unified.ts\\n+++ b/apps/vendor-gate/src/services/accounts/unified.ts\\n@@ -1,4 +1,2 @@\\n-import type { IActionHandlerOfGetAccountInfo, IPosition } from '@yuants/data-account';\\n-import { getUnifiedAccounts, ICredential } from '../../api/private-api';\\n-import { getSpotTickers } from '../../api/public-api';\\n-import { loadFuturePositions } from './future';\\n+import { createCache } from '@yuants/cache';\\n+import type { IPosition } from '@yuants/data-account';\\n@@ -5,0 +4,54 @@ import { encodePath } from '@yuants/utils';\\n+import { getUnifiedAccounts, getFuturePositions, ICredential } from '../../api/private-api';\\n+import { getSpotTickers } from '../../api/public-api';\\n+import { listProducts } from '../markets/product';\\n+\\n+const spotProductMapCache = createCache(\\n+  async () => {\\n+    const products = await listProducts();\\n+    const map = new Map<string, string>();\\n+    for (const product of products ?? []) {\\n+      const [, instType] = product.product_id.split('/');\\n+      if (instType === 'SPOT') {\\n+        map.set(product.base_currency, product.product_id);\\n+      }\\n+    }\\n+    return map;\\n+  },\\n+  { expire: 86_400_000 },\\n+);\\n+\\n+const loadFuturePositions = async (credential: ICredential): Promise<IPosition[]> => {\\n+  const positions: IPosition[] = [];\\n+  const positionsRes = await getFuturePositions(credential, 'usdt');\\n+\\n+  for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\\n+    if (!(Math.abs(position.size) > 0)) continue;\\n+\\n+    const product_id = encodePath('GATE', 'FUTURE', position.contract);\\n+    const volume = Math.abs(position.size);\\n+    const closable_price = Number(position.mark_price);\\n+    const valuation = volume * closable_price;\\n+    positions.push({\\n+      datasource_id: 'GATE',\\n+      position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n+      product_id,\\n+      direction:\\n+        position.mode === 'dual_long'\\n+          ? 'LONG'\\n+          : position.mode === 'dual_short'\\n+          ? 'SHORT'\\n+          : position.size > 0\\n+          ? 'LONG'\\n+          : 'SHORT',\\n+      volume,\\n+      free_volume: Math.abs(position.size),\\n+      position_price: Number(position.entry_price),\\n+      closable_price,\\n+      floating_profit: Number(position.unrealised_pnl),\\n+      liquidation_price: position.liq_price,\\n+      valuation,\\n+    });\\n+  }\\n+\\n+  return positions;\\n+};\\n@@ -8 +60 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-  const [futurePositions, unifiedAccount, spotTickers] = await Promise.all([\\n+  const [futurePositions, unifiedAccount, spotTickers, spotProductMap] = await Promise.all([\\n@@ -11,0 +64 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n+    spotProductMapCache.query('').catch(() => undefined),\\n@@ -13,0 +67 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n+  const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n@@ -32 +86 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-        datasource_id: 'gate/spot',\\n+        datasource_id: 'GATE',\\n@@ -34 +88 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-        product_id: encodePath('GATE', 'SPOT', currency),\\n+        product_id: resolvedSpotProductMap.get(currency) ?? encodePath('GATE', 'SPOT', currency),\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"spotProductMapCache\",",
              "lineStart": 1099,
              "lineEnd": 1103
            },
            {
              "type": "function",
              "name": "spotProductMapCache",
              "code": "  \"code\": \"const spotProductMapCache = createCache(\\n  async () => {\",\n  \"lineStart\": 8,\n  \"lineEnd\": 9\n},\n{\n  \"type\": \"function\",\n  \"name\": \"products\",",
              "lineStart": 1104,
              "lineEnd": 1110
            },
            {
              "type": "function",
              "name": "products",
              "code": "  \"code\": \"const products = await listProducts();\",\n  \"lineStart\": 10,\n  \"lineEnd\": 10\n},\n{\n  \"type\": \"function\",\n  \"name\": \"map\",",
              "lineStart": 1111,
              "lineEnd": 1117
            },
            {
              "type": "function",
              "name": "map",
              "code": "  \"code\": \"const map = new Map<string, string>();\",\n  \"lineStart\": 11,\n  \"lineEnd\": 11\n},\n{\n  \"type\": \"function\",\n  \"name\": \"product\",",
              "lineStart": 1118,
              "lineEnd": 1124
            },
            {
              "type": "function",
              "name": "product",
              "code": "  \"code\": \"    for (const product of products ?? []) {\\n      const [, instType] = product.product_id.split('/');\\n      if (instType === 'SPOT') {\\n        map.set(product.base_currency, product.product_id);\\n      }\\n    }\\n    return map;\\n  },\\n  { expire: 86_400_000 },\\n);\\n\",\n  \"lineStart\": 12,\n  \"lineEnd\": 22\n},\n{\n  \"type\": \"function\",\n  \"name\": \"loadFuturePositions\",",
              "lineStart": 1125,
              "lineEnd": 1131
            },
            {
              "type": "function",
              "name": "loadFuturePositions",
              "code": "  \"code\": \"const loadFuturePositions = async (credential: ICredential): Promise<IPosition[]> => {\",\n  \"lineStart\": 23,\n  \"lineEnd\": 23\n},\n{\n  \"type\": \"function\",\n  \"name\": \"positions\",",
              "lineStart": 1132,
              "lineEnd": 1138
            },
            {
              "type": "function",
              "name": "positions",
              "code": "  \"code\": \"const positions: IPosition[] = [];\",\n  \"lineStart\": 24,\n  \"lineEnd\": 24\n},\n{\n  \"type\": \"function\",\n  \"name\": \"positionsRes\",",
              "lineStart": 1139,
              "lineEnd": 1145
            },
            {
              "type": "function",
              "name": "positionsRes",
              "code": "  \"code\": \"const positionsRes = await getFuturePositions(credential, 'usdt');\\n\",\n  \"lineStart\": 25,\n  \"lineEnd\": 26\n},\n{\n  \"type\": \"function\",\n  \"name\": \"position\",",
              "lineStart": 1146,
              "lineEnd": 1152
            },
            {
              "type": "function",
              "name": "position",
              "code": "  \"code\": \"for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\\n  if (!(Math.abs(position.size) > 0)) continue;\\n\",\n  \"lineStart\": 27,\n  \"lineEnd\": 29\n},\n{\n  \"type\": \"function\",\n  \"name\": \"product_id\",",
              "lineStart": 1153,
              "lineEnd": 1159
            },
            {
              "type": "function",
              "name": "product_id",
              "code": "  \"code\": \"const product_id = encodePath('GATE', 'FUTURE', position.contract);\",\n  \"lineStart\": 30,\n  \"lineEnd\": 30\n},\n{\n  \"type\": \"function\",\n  \"name\": \"volume\",",
              "lineStart": 1160,
              "lineEnd": 1166
            },
            {
              "type": "function",
              "name": "volume",
              "code": "  \"code\": \"const volume = Math.abs(position.size);\",\n  \"lineStart\": 31,\n  \"lineEnd\": 31\n},\n{\n  \"type\": \"function\",\n  \"name\": \"closable_price\",",
              "lineStart": 1167,
              "lineEnd": 1173
            },
            {
              "type": "function",
              "name": "closable_price",
              "code": "  \"code\": \"const closable_price = Number(position.mark_price);\",\n  \"lineStart\": 32,\n  \"lineEnd\": 32\n},\n{\n  \"type\": \"function\",\n  \"name\": \"valuation\",",
              "lineStart": 1174,
              "lineEnd": 1180
            },
            {
              "type": "function",
              "name": "valuation",
              "code": "  \"code\": \"const valuation = volume * closable_price;\\npositions.push({\\n  datasource_id: 'GATE',\\n  position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n  product_id,\\n  direction:\\n    position.mode === 'dual_long'\\n      ? 'LONG'\\n      : position.mode === 'dual_short'\\n      ? 'SHORT'\\n      : position.size > 0\\n      ? 'LONG'\\n      : 'SHORT',\\n  volume,\\n  free_volume: Math.abs(position.size),\",\n  \"lineStart\": 33,\n  \"lineEnd\": 66\n},\n{\n  \"type\": \"function\",\n  \"name\": \"resolvedSpotProductMap\",",
              "lineStart": 1181,
              "lineEnd": 1187
            },
            {
              "type": "function",
              "name": "resolvedSpotProductMap",
              "code": "      \"code\": \"const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\\n      datasource_id: 'GATE',\\n      product_id: resolvedSpotProductMap.get(currency) ?? encodePath('GATE', 'SPOT', currency),\",\n      \"lineStart\": 67,\n      \"lineEnd\": 89\n    }\n  ]\n},\n{\n  \"additions\": 3,\n  \"deletions\": 16,\n  \"path\": \"apps/vendor-gate/src/services/exchange.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1188,
              "lineEnd": 1198
            },
            {
              "type": "function",
              "name": "unifiedPositions",
              "code": "\"patch\": \"commit 7d834feb5b0901a5ecd280eb134babe6b8a3cd58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 01:24:10 2025 +0800\\n\\n    feat(vendor-gate): 统一账户服务，整合现货与期货逻辑，移除冗余代码 (#2264)\\n\\ndiff --git a/apps/vendor-gate/src/services/exchange.ts b/apps/vendor-gate/src/services/exchange.ts\\nindex 5672321de..3a8fbaeca 100644\\n--- a/apps/vendor-gate/src/services/exchange.ts\\n+++ b/apps/vendor-gate/src/services/exchange.ts\\n@@ -5 +4,0 @@ import { Terminal } from '@yuants/protocol';\\n-import { decodePath } from '@yuants/utils';\\n@@ -10 +8,0 @@ import { submitOrder } from './orders/submitOrder';\\n-import { getFutureAccountInfo } from './accounts/future';\\n@@ -30,4 +28 @@ provideExchangeServices<ICredential>(terminal, {\\n-    const [unifiedPositions] = await Promise.all([\\n-      // getFutureAccountInfo(credential),\\n-      getUnifiedAccountInfo(credential),\\n-    ]);\\n+    const unifiedPositions = await getUnifiedAccountInfo(credential);\\n@@ -47,10 +42,2 @@ provideExchangeServices<ICredential>(terminal, {\\n-    const [_, instType] = decodePath(product_id); // BINANCE/USDT-FUTURE/ADAUSDT\\n-    // if (instType === 'SPOT') {\\n-    //   const positions = await getSpotAccountInfoSnapshot(credential);\\n-    //   return positions.filter((position) => position.product_id === product_id);\\n-    // }\\n-    if (instType === 'FUTURE') {\\n-      const positions = await getFutureAccountInfo(credential);\\n-      return positions.filter((position) => position.product_id === product_id);\\n-    }\\n-    throw new Error(`Unsupported instType: ${instType}`);\\n+    const positions = await getUnifiedAccountInfo(credential);\\n+    return positions.filter((position) => position.product_id === product_id);\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"unifiedPositions\",",
              "lineStart": 1199,
              "lineEnd": 1203
            },
            {
              "type": "function",
              "name": "unifiedPositions",
              "code": "  \"code\": \"const unifiedPositions = await getUnifiedAccountInfo(credential);\",\n  \"lineStart\": 28,\n  \"lineEnd\": 41\n},\n{\n  \"type\": \"function\",\n  \"name\": \"positions\",",
              "lineStart": 1204,
              "lineEnd": 1210
            },
            {
              "type": "function",
              "name": "positions",
              "code": "        \"code\": \"const positions = await getUnifiedAccountInfo(credential);\\nreturn positions.filter((position) => position.product_id === product_id);\",\n        \"lineStart\": 42,\n        \"lineEnd\": 44\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-gate/2025-12-08-17-21.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit 7d834feb5b0901a5ecd280eb134babe6b8a3cd58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Tue Dec 9 01:24:10 2025 +0800\\n\\n    feat(vendor-gate): 统一账户服务，整合现货与期货逻辑，移除冗余代码 (#2264)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-08-17-21.json b/common/changes/@yuants/vendor-gate/2025-12-08-17-21.json\\nnew file mode 100644\\nindex 000000000..9d32a3404\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-08-17-21.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"feat: 统一账户服务，整合现货与期货逻辑，移除冗余代码\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 1211,
              "lineEnd": 1299
            },
            {
              "type": "function",
              "name": "request",
              "code": "  \"patch\": \"commit e877cfa130104d79691d3e9098433f6a27d277ef\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 01:46:51 2025 +0800\\n\\n    feat: enhance error handling and fix position side logic (#2266)\\n\\ndiff --git a/apps/vendor-aster/src/api/private-api.ts b/apps/vendor-aster/src/api/private-api.ts\\nindex 71f2f7943..ddafe28ed 100644\\n--- a/apps/vendor-aster/src/api/private-api.ts\\n+++ b/apps/vendor-aster/src/api/private-api.ts\\n@@ -1 +1 @@\\n-import { encodeHex, HmacSHA256 } from '@yuants/utils';\\n+import { encodeHex, HmacSHA256, newError } from '@yuants/utils';\\n@@ -99 +99,10 @@ const request = async <T>(\\n-    throw `APIError: ${response.status} ${response.statusText} ${resText}`;\\n+    throw newError(\\n+      'ASTER_API_ERROR',\\n+      {\\n+        status: response.status,\\n+        statusText: response.statusText,\\n+        resText,\\n+        params,\\n+      },\\n+      e,\\n+    );\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 6,\n  \"path\": \"apps/vendor-aster/src/services/orders/submitOrder.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1300,
              "lineEnd": 1307
            },
            {
              "type": "function",
              "name": "handleSubmitOrderOfPerp",
              "code": "\"patch\": \"commit e877cfa130104d79691d3e9098433f6a27d277ef\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 01:46:51 2025 +0800\\n\\n    feat: enhance error handling and fix position side logic (#2266)\\n\\ndiff --git a/apps/vendor-aster/src/services/orders/submitOrder.ts b/apps/vendor-aster/src/services/orders/submitOrder.ts\\nindex 37791f5bf..9580e87b1 100644\\n--- a/apps/vendor-aster/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-aster/src/services/orders/submitOrder.ts\\n@@ -80,6 +80,9 @@ const handleSubmitOrderOfPerp: IActionHandlerOfSubmitOrder<ICredential> = async\\n-  const positionSide =\\n-    order.order_direction === 'OPEN_LONG' || order.order_direction === 'CLOSE_LONG'\\n-      ? 'LONG'\\n-      : order.order_direction === 'OPEN_SHORT' || order.order_direction === 'CLOSE_SHORT'\\n-      ? 'SHORT'\\n-      : undefined;\\n+  const isPositionSingleSide = true; // FIXME: Aster 永续合约仅支持单向持仓模式\\n+\\n+  const positionSide = isPositionSingleSide\\n+    ? undefined\\n+    : order.order_direction === 'OPEN_LONG' || order.order_direction === 'CLOSE_LONG'\\n+    ? 'LONG'\\n+    : order.order_direction === 'OPEN_SHORT' || order.order_direction === 'CLOSE_SHORT'\\n+    ? 'SHORT'\\n+    : undefined;\\n@@ -91,0 +95 @@ const handleSubmitOrderOfPerp: IActionHandlerOfSubmitOrder<ICredential> = async\\n+  //\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"isPositionSingleSide\",",
              "lineStart": 1308,
              "lineEnd": 1312
            },
            {
              "type": "function",
              "name": "isPositionSingleSide",
              "code": "  \"code\": \"const isPositionSingleSide = true; // FIXME: Aster 永续合约仅支持单向持仓模式\\n\",\n  \"lineStart\": 80,\n  \"lineEnd\": 81\n},\n{\n  \"type\": \"function\",\n  \"name\": \"positionSide\",",
              "lineStart": 1313,
              "lineEnd": 1319
            },
            {
              "type": "function",
              "name": "positionSide",
              "code": "      \"code\": \"const positionSide = isPositionSingleSide\\n  ? undefined\\n  : order.order_direction === 'OPEN_LONG' || order.order_direction === 'CLOSE_LONG'\\n  ? 'LONG'\\n  : order.order_direction === 'OPEN_SHORT' || order.order_direction === 'CLOSE_SHORT'\\n  ? 'SHORT'\\n  : undefined;\\n//\",\n      \"lineStart\": 82,\n      \"lineEnd\": 96\n    }\n  ]\n},\n{\n  \"additions\": 3,\n  \"deletions\": 1,\n  \"path\": \"apps/vendor-binance/src/api/client.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1320,
              "lineEnd": 1330
            },
            {
              "type": "function",
              "name": "callApi",
              "code": "  \"patch\": \"commit e877cfa130104d79691d3e9098433f6a27d277ef\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 01:46:51 2025 +0800\\n\\n    feat: enhance error handling and fix position side logic (#2266)\\n\\ndiff --git a/apps/vendor-binance/src/api/client.ts b/apps/vendor-binance/src/api/client.ts\\nindex 4435ec16c..fab85d85d 100644\\n--- a/apps/vendor-binance/src/api/client.ts\\n+++ b/apps/vendor-binance/src/api/client.ts\\n@@ -122 +122,3 @@ const callApi = async <T>(\\n-    MetricBinanceApiUsedWeight.labels({ endpoint, terminal_id: terminal.terminal_id }).set(+usedWeight1M);\\n+    MetricBinanceApiUsedWeight.labels({ path: endpoint, terminal_id: terminal.terminal_id }).set(\\n+      +usedWeight1M,\\n+    );\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-aster/2025-12-08-17-45.json\",\n  \"changeType\": \"added\",\n  \"patch\": \"commit e877cfa130104d79691d3e9098433f6a27d277ef\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Tue Dec 9 01:46:51 2025 +0800\\n\\n    feat: enhance error handling and fix position side logic (#2266)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-08-17-45.json b/common/changes/@yuants/vendor-aster/2025-12-08-17-45.json\\nnew file mode 100644\\nindex 000000000..5deb654dd\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-08-17-45.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"fix position side\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-binance/2025-12-08-17-45.json\",",
              "lineStart": 1331,
              "lineEnd": 1788
            }
          ]
        },
        {
          "additions": 262,
          "deletions": 0,
          "path": "docs/reports/git-changes-report-2025-12-09.md",
          "changeType": "added",
          "patch": "commit fa4438943e5ac8a10c6e0230622f9a5a29deabea\nAuthor: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 15:29:17 2025 +0800\n\n    feat: add daily git change report for 2025-12-09 - 15 commits (#2270)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n    Co-authored-by: Siyuan Wang <c.one@thrimbda.com>\n\ndiff --git a/docs/reports/git-changes-report-2025-12-09.md b/docs/reports/git-changes-report-2025-12-09.md\nnew file mode 100644\nindex 000000000..4eebee1c3\n--- /dev/null\n+++ b/docs/reports/git-changes-report-2025-12-09.md\n@@ -0,0 +1,262 @@\n+# Git 变更报告（4d9c58da8..4a65d80af）\n+\n+> **时间范围**：2025-12-08 至 2025-12-09\n+> **分析深度**：Level 2\n+\n+## 1. 概览\n+\n+- **提交数量**：15\n+- **主要贡献者**：humblelittlec1[bot] (5 commits), CZ (5 commits), Siyuan Wang (4 commits), Ryan (1 commit)\n+- **热点项目**：`apps/vendor-gate` (9 文件), `apps/vendor-aster` (7 文件), `apps/vendor-hyperliquid` (7 文件), `apps/vendor-binance` (6 文件)\n+- **风险指标**：⚠️ 1 个高风险项（API 变更）\n+\n+## 2. 核心变更\n+\n+### 2.1 清算价格支持增强\n+\n+**相关提交**：`ec638fca2`, `9f8b2059d`\n+**作者**：CZ\n+\n+**设计意图**：\n+为多个交易所（Huobi、OKX、Gate、Hyperliquid）的仓位信息添加清算价格字段，提升风险管理能力。此前仓位数据缺少清算价格信息，交易者无法直观了解仓位风险水平；现在统一在仓位信息中暴露 `liquidation_price` 字段，帮助用户监控仓位安全边际，避免因价格波动导致的强制平仓。\n+\n+**核心代码**：\n+[swap.ts:L46](apps/vendor-huobi/src/services/accounts/swap.ts#L46)\n+\n+```typescript\n+liquidation_price: v.liquidation_price ? `${v.liquidation_price}` : undefined,\n+```\n+\n+**影响范围**：\n+- 影响模块：`vendor-huobi`, `vendor-okx`, `vendor-gate`, `vendor-hyperliquid` 的仓位查询服务\n+- UI 层已同步更新，在账户信息面板显示清算价列\n+\n+### 2.2 Binance API 主动限流优化\n+\n+**相关提交**：`0e69317d1`\n+**作者**：CZ\n+\n+**设计意图**：\n+将全局限流控制改为按接口路径独立控制，避免单一接口触发限流影响其他接口的正常调用。此前使用全局 `retryAfterUntil` 变量，任一接口触发限流会阻塞所有接口；现在改为 `mapPathToRetryAfterUntil` 字典，每个接口独立计算限流时间，提升系统整体可用性。\n+\n+**核心代码**：\n+[client.ts:L23-L123](apps/vendor-binance/src/api/client.ts#L23-L123)\n+\n+```typescript\n+// 每个接口单独进行主动限流控制\n+const mapPathToRetryAfterUntil: Record<string, number> = {};\n+\n+const retryAfterUntil = mapPathToRetryAfterUntil[endpoint];\n+\n+// 主动限流\n+throw newError('ACTIVE_RATE_LIMIT', {\n+  wait_time: `${retryAfterUntil - Date.now()}ms`,\n+  retryAfterUntil,\n+  url: url.href,\n+  endpoint,\n+});\n+\n+delete mapPathToRetryAfterUntil[endpoint];\n+\n+mapPathToRetryAfterUntil[endpoint] = Date.now() + parseInt(retryAfter, 10) * 1000;\n+```\n+\n+**影响范围**：\n+- 仅影响 Binance 供应商的 API 调用逻辑\n+- 提升多接口并发场景下的稳定性\n+\n+### 2.3 Spot 账户产品映射优化\n+\n+**相关提交**：`5fad1f6ea`, `cbbfb2ce9`, `f9883ff8c`\n+**作者**：Siyuan Wang\n+\n+**设计意图**：\n+优化现货账户的产品 ID 映射逻辑，从硬编码模式改为动态查询产品列表并构建映射缓存。此前使用固定格式生成 product_id（如 `${asset}-USDC`），无法适应交易所动态产品列表；现在通过 `listProducts()` 获取最新产品信息，构建 `base_currency → product_id` 映射，并添加 24 小时 TTL 缓存提升性能。\n+\n+**核心代码**：\n+[spot.ts:L18-L51](apps/vendor-aster/src/services/accounts/spot.ts#L18-L51)\n+\n+```typescript\n+const spotProductMapCache = createCache(\n+  async () => {\n+    const products = await listProducts();\n+    const map = new Map<string, string>();\n+    for (const product of products) {\n+      const [, instType] = product.product_id.split('/');\n+      if (instType === 'SPOT') {\n+        map.set(product.base_currency, product.product_id);\n+      }\n+    }\n+    return map;\n+  },\n+  { expire: 86_400_000 },\n+);\n+\n+const [x, prices, prep, spotProductMap] = await Promise.all([\n+  getApiV1Account(credential),\n+  asBNBPrice.query(''),\n+  getFApiV4Account(credential),\n+  spotProductMapCache.query(''),\n+]);\n+\n+const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\n+\n+product_id: resolvedSpotProductMap.get(b.asset) ?? encodePath('ASTER', 'SPOT', b.asset),\n+```\n+\n+**影响范围**：\n+- 影响模块：`vendor-aster`, `vendor-hyperliquid`, `vendor-gate` 的现货账户服务\n+- 提升产品 ID 准确性，避免因产品列表变更导致的映射错误\n+\n+### 2.4 Gate 统一账户服务重构\n+\n+**相关提交**：`7d834feb5`\n+**作者**：Siyuan Wang\n+\n+**设计意图**：\n+整合 Gate 交易所的现货与期货账户逻辑，移除冗余的 `spot.ts` 和 `future.ts` 文件，统一通过 `unified.ts` 提供服务。此前现货和期货有独立的实现，存在代码重复和维护困难；现在将期货持仓逻辑内联到统一账户服务，并复用现货产品映射缓存，简化架构提升可维护性。\n+\n+**核心代码**：\n+[unified.ts:L8-L89](apps/vendor-gate/src/services/accounts/unified.ts#L8-L89)\n+\n+```typescript\n+const spotProductMapCache = createCache(\n+  async () => {\n+    const products = await listProducts();\n+    const map = new Map<string, string>();\n+    for (const product of products ?? []) {\n+      const [, instType] = product.product_id.split('/');\n+      if (instType === 'SPOT') {\n+        map.set(product.base_currency, product.product_id);\n+      }\n+    }\n+    return map;\n+  },\n+  { expire: 86_400_000 },\n+);\n+\n+const loadFuturePositions = async (credential: ICredential): Promise<IPosition[]> => {\n+  const positions: IPosition[] = [];\n+  const positionsRes = await getFuturePositions(credential, 'usdt');\n+\n+  for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\n+    if (!(Math.abs(position.size) > 0)) continue;\n+\n+    const product_id = encodePath('GATE', 'FUTURE', position.contract);\n+    const volume = Math.abs(position.size);\n+    const closable_price = Number(position.mark_price);\n+    const valuation = volume * closable_price;\n+    positions.push({\n+      datasource_id: 'GATE',\n+      position_id: `${position.contract}-${position.leverage}-${position.mode}`,\n+      product_id,\n+      direction:\n+        position.mode === 'dual_long'\n+          ? 'LONG'\n+          : position.mode === 'dual_short'\n+          ? 'SHORT'\n+          : position.size > 0\n+          ? 'LONG'\n+          : 'SHORT',\n+      volume,\n+      free_volume: Math.abs(position.size),\n+      position_price: Number(position.entry_price),\n+      closable_price,\n+      floating_profit: Number(position.unrealised_pnl),\n+      liquidation_price: position.liq_price,\n+      valuation,\n+    });\n+  }\n+\n+  return positions;\n+};\n+```\n+\n+**影响范围**：\n+- 完全重构 Gate 账户服务架构\n+- 删除 `apps/vendor-gate/src/services/accounts/{spot,future}.ts` 文件\n+- 统一账户查询逻辑，简化外部调用\n+\n+### 2.5 Aster 错误处理与持仓方向修复\n+\n+**相关提交**：`e877cfa13`\n+**作者**：CZ\n+\n+**设计意图**：\n+修复 Aster 交易所 API 错误处理格式，并修正永续合约持仓方向逻辑。此前 API 错误直接抛出字符串，不利于错误追踪；现在使用 `newError` 标准化错误格式。同时发现 Aster 永续合约仅支持单向持仓模式，添加 `isPositionSingleSide` 标志避免错误的 `positionSide` 设置。\n+\n+**核心代码**：\n+[submitOrder.ts:L80-L96](apps/vendor-aster/src/services/orders/submitOrder.ts#L80-L96)\n+\n+```typescript\n+const isPositionSingleSide = true; // FIXME: Aster 永续合约仅支持单向持仓模式\n+\n+const positionSide = isPositionSingleSide\n+  ? undefined\n+  : order.order_direction === 'OPEN_LONG' || order.order_direction === 'CLOSE_LONG'\n+  ? 'LONG'\n+  : order.order_direction === 'OPEN_SHORT' || order.order_direction === 'CLOSE_SHORT'\n+  ? 'SHORT'\n+  : undefined;\n+```\n+\n+**影响范围**：\n+- 影响 Aster 永续合约订单提交逻辑\n+- 标准化错误处理提升可观测性\n+\n+## 3. 贡献者\n+\n+| 作者 | 提交数 | 主要工作 | 关键提交 |\n+| ---- | ------ | -------- | -------- |\n+| CZ | 5 | 清算价格支持、API 限流优化、错误处理 | `ec638fca2`, `0e69317d1`, `e877cfa13` |\n+| Siyuan Wang | 4 | Spot 产品映射优化、账户服务重构 | `5fad1f6ea`, `cbbfb2ce9`, `f9883ff8c`, `7d834feb5` |\n+| humblelittlec1[bot] | 5 | 版本发布与变更记录更新 | `baf2f4727`, `8fa79e6e2`, `964396528`, `bcc58c8fa`, `4a65d80af` |\n+| Ryan | 1 | 符号解析修复 | `fbb85da27` |\n+\n+## 4. 风险评估\n+\n+### 兼容性影响\n+\n+**高风险变更**：\n+1. **API 接口变更**：`ec638fca2` 修改了 Huobi 的 `getSwapCrossPositionInfo` 接口返回值结构，添加了 `liquidation_price` 等字段\n+2. **错误处理格式**：`e877cfa13` 将 Aster API 错误从字符串改为 `newError` 对象，可能影响现有错误处理逻辑\n+\n+**受影响的模块**：\n+- `vendor-huobi` 的仓位查询客户端\n+- `vendor-aster` 的错误处理代码\n+\n+### 配置变更\n+\n+**新增配置**：无\n+\n+**修改配置**：无\n+\n+**删除配置**：无\n+\n+### 性能影响\n+\n+**正面影响**：\n+1. **缓存优化**：Spot 产品映射添加 24 小时 TTL 缓存，减少重复 API 调用\n+2. **限流优化**：Binance 接口级限流提升多接口并发性能\n+\n+**潜在风险**：\n+1. **内存使用**：产品映射缓存可能占用额外内存，但规模可控\n+\n+### 测试覆盖\n+\n+**测试缺口**：\n+- 所有功能变更均未见对应的测试文件更新\n+- 建议补充以下测试：\n+  - 清算价格字段的正确解析\n+  - Spot 产品映射缓存的命中与回退逻辑\n+  - 统一账户服务的现货与期货集成\n+\n+---\n+\n+**报告生成时间**：2025-12-09  \n+**数据源**：`docs/reports/git-changes-2025-12-09.json`  \n+**分析工具**：git-changes-reporter v3.0.0\n+\n+🤖 Generated with [Claude Code](https://claude.ai/code)\n+\n+Co-Authored-By: Claude <noreply@anthropic.com>\n\\ No newline at end of file\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "mapPathToRetryAfterUntil",
              "code": "const mapPathToRetryAfterUntil: Record<string, number> = {};\n",
              "lineStart": 47,
              "lineEnd": 48
            },
            {
              "type": "function",
              "name": "retryAfterUntil",
              "code": "const retryAfterUntil = mapPathToRetryAfterUntil[endpoint];\n\n// 主动限流\nthrow newError('ACTIVE_RATE_LIMIT', {\n  wait_time: `${retryAfterUntil - Date.now()}ms`,\n  retryAfterUntil,\n  url: url.href,\n  endpoint,\n});\n\ndelete mapPathToRetryAfterUntil[endpoint];\n\nmapPathToRetryAfterUntil[endpoint] = Date.now() + parseInt(retryAfter, 10) * 1000;\n```\n",
              "lineStart": 49,
              "lineEnd": 79
            },
            {
              "type": "function",
              "name": "spotProductMapCache",
              "code": "const spotProductMapCache = createCache(\n  async () => {",
              "lineStart": 80,
              "lineEnd": 81
            },
            {
              "type": "function",
              "name": "products",
              "code": "const products = await listProducts();",
              "lineStart": 82,
              "lineEnd": 82
            },
            {
              "type": "function",
              "name": "map",
              "code": "const map = new Map<string, string>();",
              "lineStart": 83,
              "lineEnd": 83
            },
            {
              "type": "function",
              "name": "product",
              "code": "    for (const product of products) {\n      const [, instType] = product.product_id.split('/');\n      if (instType === 'SPOT') {\n        map.set(product.base_currency, product.product_id);\n      }\n    }\n    return map;\n  },\n  { expire: 86_400_000 },\n);\n\nconst [x, prices, prep, spotProductMap] = await Promise.all([\n  getApiV1Account(credential),\n  asBNBPrice.query(''),\n  getFApiV4Account(credential),",
              "lineStart": 84,
              "lineEnd": 101
            },
            {
              "type": "function",
              "name": "resolvedSpotProductMap",
              "code": "const resolvedSpotProductMap = spotProductMap ?? new Map<string, string>();\n\nproduct_id: resolvedSpotProductMap.get(b.asset) ?? encodePath('ASTER', 'SPOT', b.asset),\n```\n\n**影响范围**：\n- 影响模块：`vendor-aster`, `vendor-hyperliquid`, `vendor-gate` 的现货账户服务\n- 提升产品 ID 准确性，避免因产品列表变更导致的映射错误\n\n### 2.4 Gate 统一账户服务重构\n\n**相关提交**：`7d834feb5`\n**作者**：Siyuan Wang\n\n**设计意图**：",
              "lineStart": 102,
              "lineEnd": 122
            },
            {
              "type": "function",
              "name": "spotProductMapCache",
              "code": "const spotProductMapCache = createCache(\n  async () => {",
              "lineStart": 123,
              "lineEnd": 124
            },
            {
              "type": "function",
              "name": "products",
              "code": "const products = await listProducts();",
              "lineStart": 125,
              "lineEnd": 125
            },
            {
              "type": "function",
              "name": "map",
              "code": "const map = new Map<string, string>();",
              "lineStart": 126,
              "lineEnd": 126
            },
            {
              "type": "function",
              "name": "product",
              "code": "    for (const product of products ?? []) {\n      const [, instType] = product.product_id.split('/');\n      if (instType === 'SPOT') {\n        map.set(product.base_currency, product.product_id);\n      }\n    }\n    return map;\n  },\n  { expire: 86_400_000 },\n);\n",
              "lineStart": 127,
              "lineEnd": 137
            },
            {
              "type": "function",
              "name": "loadFuturePositions",
              "code": "const loadFuturePositions = async (credential: ICredential): Promise<IPosition[]> => {",
              "lineStart": 138,
              "lineEnd": 138
            },
            {
              "type": "function",
              "name": "positions",
              "code": "const positions: IPosition[] = [];",
              "lineStart": 139,
              "lineEnd": 139
            },
            {
              "type": "function",
              "name": "positionsRes",
              "code": "const positionsRes = await getFuturePositions(credential, 'usdt');\n",
              "lineStart": 140,
              "lineEnd": 141
            },
            {
              "type": "function",
              "name": "position",
              "code": "for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\n  if (!(Math.abs(position.size) > 0)) continue;\n",
              "lineStart": 142,
              "lineEnd": 144
            },
            {
              "type": "function",
              "name": "product_id",
              "code": "const product_id = encodePath('GATE', 'FUTURE', position.contract);",
              "lineStart": 145,
              "lineEnd": 145
            },
            {
              "type": "function",
              "name": "volume",
              "code": "const volume = Math.abs(position.size);",
              "lineStart": 146,
              "lineEnd": 146
            },
            {
              "type": "function",
              "name": "closable_price",
              "code": "const closable_price = Number(position.mark_price);",
              "lineStart": 147,
              "lineEnd": 147
            },
            {
              "type": "function",
              "name": "valuation",
              "code": "const valuation = volume * closable_price;\npositions.push({\n  datasource_id: 'GATE',\n  position_id: `${position.contract}-${position.leverage}-${position.mode}`,\n  product_id,\n  direction:\n    position.mode === 'dual_long'\n      ? 'LONG'\n      : position.mode === 'dual_short'\n      ? 'SHORT'\n      : position.size > 0\n      ? 'LONG'\n      : 'SHORT',\n  volume,\n  free_volume: Math.abs(position.size),",
              "lineStart": 148,
              "lineEnd": 191
            },
            {
              "type": "function",
              "name": "isPositionSingleSide",
              "code": "const isPositionSingleSide = true; // FIXME: Aster 永续合约仅支持单向持仓模式\n",
              "lineStart": 192,
              "lineEnd": 193
            },
            {
              "type": "function",
              "name": "positionSide",
              "code": "const positionSide = isPositionSingleSide\n  ? undefined\n  : order.order_direction === 'OPEN_LONG' || order.order_direction === 'CLOSE_LONG'\n  ? 'LONG'\n  : order.order_direction === 'OPEN_SHORT' || order.order_direction === 'CLOSE_SHORT'\n  ? 'SHORT'\n  : undefined;\n```\n\n**影响范围**：\n- 影响 Aster 永续合约订单提交逻辑\n- 标准化错误处理提升可观测性\n\n## 3. 贡献者\n",
              "lineStart": 194,
              "lineEnd": 264
            }
          ]
        }
      ]
    },
    {
      "hash": "7fd1f2687d045c55547d46f78c558b7e199e503f",
      "short": "7fd1f2687",
      "author": "github-actions[bot]",
      "email": "41898282+github-actions[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-09 15:29:40 +0800",
      "subject": "feat: add daily git change report for 2025-12-08 - 13 commits (#2254)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 2222,
          "deletions": 0,
          "path": "docs/reports/git-changes-2025-12-08.json",
          "changeType": "added",
          "patch": "commit 7fd1f2687d045c55547d46f78c558b7e199e503f\nAuthor: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 15:29:40 2025 +0800\n\n    feat: add daily git change report for 2025-12-08 - 13 commits (#2254)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n    Co-authored-by: Siyuan Wang <c.one@thrimbda.com>\n\ndiff --git a/docs/reports/git-changes-2025-12-08.json b/docs/reports/git-changes-2025-12-08.json\nnew file mode 100644\nindex 000000000..315ab53c0\n--- /dev/null\n+++ b/docs/reports/git-changes-2025-12-08.json\n@@ -0,0 +1,2222 @@\n+{\n+  \"range\": {\n+    \"old\": \"e44fdfa6c14e001dbe5c89d96e42b08a9694ecf4\",\n+    \"new\": \"4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\",\n+    \"label\": \"e44fdfa6c..4d9c58da8\",\n+    \"startDate\": \"2025-12-07\",\n+    \"endDate\": \"2025-12-08\",\n+    \"commitCount\": 13,\n+    \"generatedAt\": \"2025-12-08T00:06:14.374Z\"\n+  },\n+  \"contributors\": [\n+    {\n+      \"name\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"commits\": 6\n+    },\n+    {\n+      \"name\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"commits\": 5\n+    },\n+    {\n+      \"name\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"commits\": 1\n+    },\n+    {\n+      \"name\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"commits\": 1\n+    }\n+  ],\n+  \"directoryAnalysis\": {\n+    \"topLevel\": [\n+      {\n+        \"dir\": \"apps\",\n+        \"fileCount\": 69\n+      },\n+      {\n+        \"dir\": \"common\",\n+        \"fileCount\": 25\n+      },\n+      {\n+        \"dir\": \"libraries\",\n+        \"fileCount\": 21\n+      },\n+      {\n+        \"dir\": \"distributions\",\n+        \"fileCount\": 3\n+      }\n+    ],\n+    \"projects\": [\n+      {\n+        \"project\": \"common\",\n+        \"fileCount\": 25,\n+        \"marker\": null\n+      },\n+      {\n+        \"project\": \"apps/vendor-gate\",\n+        \"fileCount\": 8,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-aster\",\n+        \"fileCount\": 6,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/host\",\n+        \"fileCount\": 5,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"libraries/data-account\",\n+        \"fileCount\": 5,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/account-composer\",\n+        \"fileCount\": 4,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-binance\",\n+        \"fileCount\": 4,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-huobi\",\n+        \"fileCount\": 4,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-okx\",\n+        \"fileCount\": 4,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/virtual-exchange\",\n+        \"fileCount\": 4,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"libraries/exchange\",\n+        \"fileCount\": 4,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/agent\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/fund\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/risk-manager\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/trade-copier\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-bitget\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-ctp\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-hyperliquid\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-okx-web3\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-solana\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-turboflow\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"distributions/origin\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"libraries/account-info-resolver\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"libraries/agent\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"libraries/kernel\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"libraries/order\",\n+        \"fileCount\": 3,\n+        \"marker\": \"package.json\"\n+      }\n+    ],\n+    \"markersUsed\": [\n+      \"package.json\",\n+      \"Cargo.toml\",\n+      \"go.mod\",\n+      \"requirements.txt\",\n+      \"pyproject.toml\",\n+      \"setup.py\",\n+      \"pom.xml\",\n+      \"build.gradle\",\n+      \"build.gradle.kts\",\n+      \"CMakeLists.txt\",\n+      \"Makefile\",\n+      \"pubspec.yaml\",\n+      \"mix.exs\",\n+      \"Gemfile\",\n+      \"composer.json\"\n+    ]\n+  },\n+  \"commits\": [\n+    {\n+      \"hash\": \"790b62bff10f863e7d94786341b85c72c946c8e9\",\n+      \"short\": \"790b62bff\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-07 22:54:41 +0800\",\n+      \"subject\": \"feat: implement credential ID caching and update credential retrieval logic (#2241)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 3,\n+          \"path\": \"apps/virtual-exchange/src/credential.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 790b62bff10f863e7d94786341b85c72c946c8e9\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 22:54:41 2025 +0800\\n\\n    feat: implement credential ID caching and update credential retrieval logic (#2241)\\n\\ndiff --git a/apps/virtual-exchange/src/credential.ts b/apps/virtual-exchange/src/credential.ts\\nindex e03200075..f83924675 100644\\n--- a/apps/virtual-exchange/src/credential.ts\\n+++ b/apps/virtual-exchange/src/credential.ts\\n@@ -24,0 +25,6 @@ interface ICredentialResolvedStatus {\\n+const credentialIdCache = createCache(async (credentialKey: string) => {\\n+  const credential = JSON.parse(credentialKey) as IExchangeCredential;\\n+  const res = await getCredentialId(terminal, credential);\\n+  return res.data;\\n+});\\n+\\n@@ -42,3 +48,4 @@ export const listAllCredentials = async () => {\\n-        const res = await getCredentialId(terminal, credential);\\n-        const credentialId = res.data;\\n-        result.credentialId = credentialId;\\n+        const res = await credentialIdCache.query(JSON.stringify(credential));\\n+        if (res) {\\n+          result.credentialId = res;\\n+        }\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"credentialIdCache\",\n+              \"code\": \"const credentialIdCache = createCache(async (credentialKey: string) => {\",\n+              \"lineStart\": 25,\n+              \"lineEnd\": 25\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"credential\",\n+              \"code\": \"const credential = JSON.parse(credentialKey) as IExchangeCredential;\",\n+              \"lineStart\": 26,\n+              \"lineEnd\": 26\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"res\",\n+              \"code\": \"  const res = await getCredentialId(terminal, credential);\\n  return res.data;\\n});\\n\",\n+              \"lineStart\": 27,\n+              \"lineEnd\": 47\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"res\",\n+              \"code\": \"const res = await credentialIdCache.query(JSON.stringify(credential));\\nif (res) {\\n  result.credentialId = res;\\n}\",\n+              \"lineStart\": 48,\n+              \"lineEnd\": 52\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 790b62bff10f863e7d94786341b85c72c946c8e9\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 22:54:41 2025 +0800\\n\\n    feat: implement credential ID caching and update credential retrieval logic (#2241)\\n\\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json b/common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\\nnew file mode 100644\\nindex 000000000..6bf18df2e\\n--- /dev/null\\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\",\\n+      \\\"comment\\\": \\\"fix\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"39712dbdd9afc78e851ce5d47bdb61b38da0bcba\",\n+      \"short\": \"39712dbdd\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-07 22:56:38 +0800\",\n+      \"subject\": \"chore: bump version (#2242)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/virtual-exchange/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 39712dbdd9afc78e851ce5d47bdb61b38da0bcba\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 22:56:38 2025 +0800\\n\\n    chore: bump version (#2242)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\\nindex ed8d1d46a..ef5ad2bcf 100644\\n--- a/apps/virtual-exchange/CHANGELOG.json\\n+++ b/apps/virtual-exchange/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.5.4\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-virtual-exchange_v0.5.4\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 14:55:28 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 39712dbdd9afc78e851ce5d47bdb61b38da0bcba\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 22:56:38 2025 +0800\\n\\n    chore: bump version (#2242)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\\nindex 590da04f5..400250891 100644\\n--- a/apps/virtual-exchange/CHANGELOG.md\\n+++ b/apps/virtual-exchange/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Thu, 04 Dec 2025 07:31:18 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 14:55:28 GMT and should not be manually modified.\\n+\\n+## 0.5.4\\n+Sun, 07 Dec 2025 14:55:28 GMT\\n+\\n+### Patches\\n+\\n+- fix\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 39712dbdd9afc78e851ce5d47bdb61b38da0bcba\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 22:56:38 2025 +0800\\n\\n    chore: bump version (#2242)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\\nindex 7c18e3358..9847730b1 100644\\n--- a/apps/virtual-exchange/package.json\\n+++ b/apps/virtual-exchange/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.5.3\\\",\\n+  \\\"version\\\": \\\"0.5.4\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 39712dbdd9afc78e851ce5d47bdb61b38da0bcba\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 22:56:38 2025 +0800\\n\\n    chore: bump version (#2242)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json b/common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\\ndeleted file mode 100644\\nindex 6bf18df2e..000000000\\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\",\\n-      \\\"comment\\\": \\\"fix\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-virtual-exchange/{main_2025-12-04-07-31.json => main_2025-12-07-14-55.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"1c8dab3257f773379b3858a869a9c125aa71b5f6\",\n+      \"short\": \"1c8dab325\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-07 23:12:15 +0800\",\n+      \"subject\": \"feat: fix trade (#2243)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-okx/src/trade.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 1c8dab3257f773379b3858a869a9c125aa71b5f6\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sun Dec 7 23:12:15 2025 +0800\\n\\n    feat: fix trade (#2243)\\n\\ndiff --git a/apps/vendor-okx/src/trade.ts b/apps/vendor-okx/src/trade.ts\\nindex dac18a969..17a2afcdb 100644\\n--- a/apps/vendor-okx/src/trade.ts\\n+++ b/apps/vendor-okx/src/trade.ts\\n@@ -21 +21 @@ const tradeParser = async (accountId: string, params: Record<string, string>): P\\n-      productIdSet.add(encodePath(item.instType, item.instId));\\n+      productIdSet.add(encodePath('OKX', item.instType, item.instId));\\n@@ -39 +38,0 @@ const tradeParser = async (accountId: string, params: Record<string, string>): P\\n-\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 1c8dab3257f773379b3858a869a9c125aa71b5f6\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sun Dec 7 23:12:15 2025 +0800\\n\\n    feat: fix trade (#2243)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-07-15-10.json b/common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\\nnew file mode 100644\\nindex 000000000..872ae24fd\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"fix trade\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"6e9af0f2ae1d3b01fa5441d3fbb726cf28008a94\",\n+      \"short\": \"6e9af0f2a\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-07 23:23:37 +0800\",\n+      \"subject\": \"chore: bump version (#2244)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 6e9af0f2ae1d3b01fa5441d3fbb726cf28008a94\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 23:23:37 2025 +0800\\n\\n    chore: bump version (#2244)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex 476462034..b91132858 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.9\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.9\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 15:23:14 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix trade\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 6e9af0f2ae1d3b01fa5441d3fbb726cf28008a94\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 23:23:37 2025 +0800\\n\\n    chore: bump version (#2244)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex 3f789dccc..1b5d46d36 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sat, 06 Dec 2025 17:00:15 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 15:23:14 GMT and should not be manually modified.\\n+\\n+## 0.29.9\\n+Sun, 07 Dec 2025 15:23:14 GMT\\n+\\n+### Patches\\n+\\n+- fix trade\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 6e9af0f2ae1d3b01fa5441d3fbb726cf28008a94\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 23:23:37 2025 +0800\\n\\n    chore: bump version (#2244)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex f44b810af..c9596c806 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.29.8\\\",\\n+  \\\"version\\\": \\\"0.29.9\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 6e9af0f2ae1d3b01fa5441d3fbb726cf28008a94\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 23:23:37 2025 +0800\\n\\n    chore: bump version (#2244)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-07-15-10.json b/common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\\ndeleted file mode 100644\\nindex 872ae24fd..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"fix trade\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-06-17-00.json => main_2025-12-07-15-23.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"94b0fdc8489c9d7fcbc344c5ab96fe832afe4d17\",\n+      \"short\": \"94b0fdc84\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-08 00:32:46 +0800\",\n+      \"subject\": \"feat: enhance IPosition interface with additional fields and update exchange logic for position handling (#2245)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/data-account/2025-12-07-16-26.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 94b0fdc8489c9d7fcbc344c5ab96fe832afe4d17\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:32:46 2025 +0800\\n\\n    feat: enhance IPosition interface with additional fields and update exchange logic for position handling (#2245)\\n\\ndiff --git a/common/changes/@yuants/data-account/2025-12-07-16-26.json b/common/changes/@yuants/data-account/2025-12-07-16-26.json\\nnew file mode 100644\\nindex 000000000..1ceedc6cb\\n--- /dev/null\\n+++ b/common/changes/@yuants/data-account/2025-12-07-16-26.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/data-account\\\",\\n+      \\\"comment\\\": \\\"add more fields to position\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/data-account\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/exchange/2025-12-07-16-26.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 94b0fdc8489c9d7fcbc344c5ab96fe832afe4d17\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:32:46 2025 +0800\\n\\n    feat: enhance IPosition interface with additional fields and update exchange logic for position handling (#2245)\\n\\ndiff --git a/common/changes/@yuants/exchange/2025-12-07-16-26.json b/common/changes/@yuants/exchange/2025-12-07-16-26.json\\nnew file mode 100644\\nindex 000000000..bff513a53\\n--- /dev/null\\n+++ b/common/changes/@yuants/exchange/2025-12-07-16-26.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/exchange\\\",\\n+      \\\"comment\\\": \\\"add polyfill to position\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/exchange\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 5,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/data-account/etc/data-account.api.md\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 94b0fdc8489c9d7fcbc344c5ab96fe832afe4d17\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:32:46 2025 +0800\\n\\n    feat: enhance IPosition interface with additional fields and update exchange logic for position handling (#2245)\\n\\ndiff --git a/libraries/data-account/etc/data-account.api.md b/libraries/data-account/etc/data-account.api.md\\nindex 1606ae578..6e7e56eff 100644\\n--- a/libraries/data-account/etc/data-account.api.md\\n+++ b/libraries/data-account/etc/data-account.api.md\\n@@ -62,0 +63 @@ export interface IPosition {\\n+    base_currency?: string;\\r\\n@@ -68,0 +70 @@ export interface IPosition {\\n+    free_size?: string;\\r\\n@@ -70,0 +73 @@ export interface IPosition {\\n+    liquidation_price?: string;\\r\\n@@ -74,0 +78 @@ export interface IPosition {\\n+    quote_currency?: string;\\r\\n@@ -76,0 +81 @@ export interface IPosition {\\n+    size?: string;\\r\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 27,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/data-account/src/interface.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 94b0fdc8489c9d7fcbc344c5ab96fe832afe4d17\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:32:46 2025 +0800\\n\\n    feat: enhance IPosition interface with additional fields and update exchange logic for position handling (#2245)\\n\\ndiff --git a/libraries/data-account/src/interface.ts b/libraries/data-account/src/interface.ts\\nindex 55743add4..521041595 100644\\n--- a/libraries/data-account/src/interface.ts\\n+++ b/libraries/data-account/src/interface.ts\\n@@ -41,0 +42,27 @@ export interface IPosition {\\n+\\n+  /**\\n+   * Base currency of the position.\\n+   * 头寸的基础货币\\n+   */\\n+  base_currency?: string;\\n+  /**\\n+   * Quote currency of the position.\\n+   * 头寸的报价货币\\n+   */\\n+  quote_currency?: string;\\n+  /**\\n+   * Size of the position. negative for short positions. Normalized by value_scale.\\n+   * 净头寸的大小，已经按照 value_scale 归一化。空头为负数\\n+   */\\n+  size?: string;\\n+  /**\\n+   * Free size of the position. Negative for short positions. Normalized by value_scale.\\n+   * 净头寸的可用大小，已经按照 value_scale 归一化。空头为负数\\n+   */\\n+  free_size?: string;\\n+\\n+  /**\\n+   * Liquidation price of the position. (Approximate value). Due to the complexity of margin calculation mechanisms, it is usually provided by the exchange.\\n+   * 持仓的强平价格 (预估值)，由于保证金计算机制复杂，通常由交易所给出。\\n+   */\\n+  liquidation_price?: string;\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 13,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/exchange/src/index.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 94b0fdc8489c9d7fcbc344c5ab96fe832afe4d17\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:32:46 2025 +0800\\n\\n    feat: enhance IPosition interface with additional fields and update exchange logic for position handling (#2245)\\n\\ndiff --git a/libraries/exchange/src/index.ts b/libraries/exchange/src/index.ts\\nindex be6004e00..b5451e10d 100644\\n--- a/libraries/exchange/src/index.ts\\n+++ b/libraries/exchange/src/index.ts\\n@@ -185,0 +186,13 @@ export const provideExchangeServices = <T>(terminal: Terminal, exchange: IExchan\\n+          if (theProduct.base_currency) {\\n+            pos.base_currency = theProduct.base_currency;\\n+          }\\n+          if (theProduct.quote_currency) {\\n+            pos.quote_currency = theProduct.quote_currency;\\n+          }\\n+          if (pos.size === undefined && pos.volume !== undefined && pos.direction !== undefined) {\\n+            pos.size = (pos.direction === 'LONG' ? 1 : -1) * pos.volume * (theProduct.value_scale || 1) + '';\\n+          }\\n+          if (pos.free_size === undefined && pos.free_volume !== undefined && pos.direction !== undefined) {\\n+            pos.free_size =\\n+              (pos.direction === 'LONG' ? 1 : -1) * pos.free_volume * (theProduct.value_scale || 1) + '';\\n+          }\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"88cf1511d83591dc886853517ec08e080eb23c13\",\n+      \"short\": \"88cf1511d\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-08 00:45:54 +0800\",\n+      \"subject\": \"chore: bump version (#2246)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/account-composer/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/account-composer/CHANGELOG.json b/apps/account-composer/CHANGELOG.json\\nindex 2b08a69b3..e19c039ba 100644\\n--- a/apps/account-composer/CHANGELOG.json\\n+++ b/apps/account-composer/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.9\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-account-composer_v0.7.9\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/account-composer/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/account-composer/CHANGELOG.md b/apps/account-composer/CHANGELOG.md\\nindex fbff5bf45..17fbe1f65 100644\\n--- a/apps/account-composer/CHANGELOG.md\\n+++ b/apps/account-composer/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.7.9\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/account-composer/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/account-composer/package.json b/apps/account-composer/package.json\\nindex bc62e1f62..ad86d0372 100644\\n--- a/apps/account-composer/package.json\\n+++ b/apps/account-composer/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.8\\\",\\n+  \\\"version\\\": \\\"0.7.9\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 23,\n+          \"deletions\": 0,\n+          \"path\": \"apps/agent/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/agent/CHANGELOG.json b/apps/agent/CHANGELOG.json\\nindex 27b8a2f32..c4a77ee67 100644\\n--- a/apps/agent/CHANGELOG.json\\n+++ b/apps/agent/CHANGELOG.json\\n@@ -3,0 +4,23 @@\\n+    {\\n+      \\\"version\\\": \\\"0.8.21\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-agent_v0.8.21\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/agent\\\\\\\" to `0.13.144`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/kernel\\\\\\\" to `0.15.61`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/agent/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/agent/CHANGELOG.md b/apps/agent/CHANGELOG.md\\nindex 7fbddaed7..ec5cfb617 100644\\n--- a/apps/agent/CHANGELOG.md\\n+++ b/apps/agent/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.8.21\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/agent/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/agent/package.json b/apps/agent/package.json\\nindex dc8ba55a1..df1c8f18c 100644\\n--- a/apps/agent/package.json\\n+++ b/apps/agent/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.8.20\\\",\\n+  \\\"version\\\": \\\"0.8.21\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/fund/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/fund/CHANGELOG.json b/apps/fund/CHANGELOG.json\\nindex df274966f..87cc96e34 100644\\n--- a/apps/fund/CHANGELOG.json\\n+++ b/apps/fund/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.1.34\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-fund_v0.1.34\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/fund/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/fund/CHANGELOG.md b/apps/fund/CHANGELOG.md\\nindex c27a7160f..01fff9fd4 100644\\n--- a/apps/fund/CHANGELOG.md\\n+++ b/apps/fund/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.1.34\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/fund/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/fund/package.json b/apps/fund/package.json\\nindex a8c6166cb..a56e6485a 100644\\n--- a/apps/fund/package.json\\n+++ b/apps/fund/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.1.33\\\",\\n+  \\\"version\\\": \\\"0.1.34\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/risk-manager/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/risk-manager/CHANGELOG.json b/apps/risk-manager/CHANGELOG.json\\nindex c81bcb162..d0cd81ff2 100644\\n--- a/apps/risk-manager/CHANGELOG.json\\n+++ b/apps/risk-manager/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.6.50\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-risk-manager_v0.6.50\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/risk-manager/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/risk-manager/CHANGELOG.md b/apps/risk-manager/CHANGELOG.md\\nindex 251d719ca..2e6c7e8a6 100644\\n--- a/apps/risk-manager/CHANGELOG.md\\n+++ b/apps/risk-manager/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.6.50\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/risk-manager/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/risk-manager/package.json b/apps/risk-manager/package.json\\nindex 1f872a304..cf0522ecd 100644\\n--- a/apps/risk-manager/package.json\\n+++ b/apps/risk-manager/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.6.49\\\",\\n+  \\\"version\\\": \\\"0.6.50\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 23,\n+          \"deletions\": 0,\n+          \"path\": \"apps/trade-copier/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/trade-copier/CHANGELOG.json b/apps/trade-copier/CHANGELOG.json\\nindex 71bb9e019..59363aa2a 100644\\n--- a/apps/trade-copier/CHANGELOG.json\\n+++ b/apps/trade-copier/CHANGELOG.json\\n@@ -3,0 +4,23 @@\\n+    {\\n+      \\\"version\\\": \\\"0.11.35\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-trade-copier_v0.11.35\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/kernel\\\\\\\" to `0.15.61`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/order\\\\\\\" to `0.3.53`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/trade-copier/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/trade-copier/CHANGELOG.md b/apps/trade-copier/CHANGELOG.md\\nindex f86025ef6..1e006b932 100644\\n--- a/apps/trade-copier/CHANGELOG.md\\n+++ b/apps/trade-copier/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.11.35\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/trade-copier/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/trade-copier/package.json b/apps/trade-copier/package.json\\nindex 722b8c775..df230b39b 100644\\n--- a/apps/trade-copier/package.json\\n+++ b/apps/trade-copier/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.11.34\\\",\\n+  \\\"version\\\": \\\"0.11.35\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex ed645a9b9..6316855cc 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.21\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.21\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.4.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex 7fe7f275a..a0ac55442 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Fri, 05 Dec 2025 17:11:30 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.7.21\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex 1976fd5c4..1bcc0a90d 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.20\\\",\\n+  \\\"version\\\": \\\"0.7.21\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\\nindex 3c0f26e0c..2047208c4 100644\\n--- a/apps/vendor-binance/CHANGELOG.json\\n+++ b/apps/vendor-binance/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.11\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-binance_v0.10.11\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.4.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\\nindex eda868de2..61c93fef7 100644\\n--- a/apps/vendor-binance/CHANGELOG.md\\n+++ b/apps/vendor-binance/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.10.11\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\\nindex 2a11fca6e..5057f45e3 100644\\n--- a/apps/vendor-binance/package.json\\n+++ b/apps/vendor-binance/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.10\\\",\\n+  \\\"version\\\": \\\"0.10.11\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-bitget/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/CHANGELOG.json b/apps/vendor-bitget/CHANGELOG.json\\nindex 7246ddf96..11b9c7d6d 100644\\n--- a/apps/vendor-bitget/CHANGELOG.json\\n+++ b/apps/vendor-bitget/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.11.2\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-bitget_v0.11.2\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.4.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/CHANGELOG.md b/apps/vendor-bitget/CHANGELOG.md\\nindex 4801566cf..4e673b394 100644\\n--- a/apps/vendor-bitget/CHANGELOG.md\\n+++ b/apps/vendor-bitget/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.11.2\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/package.json b/apps/vendor-bitget/package.json\\nindex 7d2107e02..af4bc3af7 100644\\n--- a/apps/vendor-bitget/package.json\\n+++ b/apps/vendor-bitget/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.11.1\\\",\\n+  \\\"version\\\": \\\"0.11.2\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-ctp/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-ctp/CHANGELOG.json b/apps/vendor-ctp/CHANGELOG.json\\nindex a9541dc67..92a87df08 100644\\n--- a/apps/vendor-ctp/CHANGELOG.json\\n+++ b/apps/vendor-ctp/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.34\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-ctp_v0.10.34\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-ctp/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-ctp/CHANGELOG.md b/apps/vendor-ctp/CHANGELOG.md\\nindex 84a6d41a9..3e3497494 100644\\n--- a/apps/vendor-ctp/CHANGELOG.md\\n+++ b/apps/vendor-ctp/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.10.34\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-ctp/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-ctp/package.json b/apps/vendor-ctp/package.json\\nindex 9d5bfdea5..05455b479 100644\\n--- a/apps/vendor-ctp/package.json\\n+++ b/apps/vendor-ctp/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.33\\\",\\n+  \\\"version\\\": \\\"0.10.34\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\\nindex 32fa927ca..8d8cedc67 100644\\n--- a/apps/vendor-gate/CHANGELOG.json\\n+++ b/apps/vendor-gate/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.4.19\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-gate_v0.4.19\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.4.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\\nindex 1ce1276a5..5fe2460d9 100644\\n--- a/apps/vendor-gate/CHANGELOG.md\\n+++ b/apps/vendor-gate/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 06 Dec 2025 20:05:18 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.4.19\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\\nindex c89d41b5b..cca4b3c50 100644\\n--- a/apps/vendor-gate/package.json\\n+++ b/apps/vendor-gate/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.18\\\",\\n+  \\\"version\\\": \\\"0.4.19\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.json b/apps/vendor-huobi/CHANGELOG.json\\nindex b0daaaea7..c1e50492b 100644\\n--- a/apps/vendor-huobi/CHANGELOG.json\\n+++ b/apps/vendor-huobi/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.15.9\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-huobi_v0.15.9\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.4.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.md b/apps/vendor-huobi/CHANGELOG.md\\nindex a6964ecbf..e5cc40aa4 100644\\n--- a/apps/vendor-huobi/CHANGELOG.md\\n+++ b/apps/vendor-huobi/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 06 Dec 2025 20:13:27 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.15.9\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/package.json b/apps/vendor-huobi/package.json\\nindex e0f4cf88a..ca4859ed2 100644\\n--- a/apps/vendor-huobi/package.json\\n+++ b/apps/vendor-huobi/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.15.8\\\",\\n+  \\\"version\\\": \\\"0.15.9\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.json b/apps/vendor-hyperliquid/CHANGELOG.json\\nindex bb50049e2..505c2aba8 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.json\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.10\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-hyperliquid_v0.7.10\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.4.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.md b/apps/vendor-hyperliquid/CHANGELOG.md\\nindex ca255f704..5764f6cb3 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.md\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Fri, 05 Dec 2025 15:22:22 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.7.10\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/package.json b/apps/vendor-hyperliquid/package.json\\nindex 07748d229..04995e5ed 100644\\n--- a/apps/vendor-hyperliquid/package.json\\n+++ b/apps/vendor-hyperliquid/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.9\\\",\\n+  \\\"version\\\": \\\"0.7.10\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx-web3/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx-web3/CHANGELOG.json b/apps/vendor-okx-web3/CHANGELOG.json\\nindex f34c13d5d..afa49d5da 100644\\n--- a/apps/vendor-okx-web3/CHANGELOG.json\\n+++ b/apps/vendor-okx-web3/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.1.34\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx-web3_v0.1.34\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:11 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx-web3/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx-web3/CHANGELOG.md b/apps/vendor-okx-web3/CHANGELOG.md\\nindex 7e756250c..aa698da46 100644\\n--- a/apps/vendor-okx-web3/CHANGELOG.md\\n+++ b/apps/vendor-okx-web3/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:11 GMT and should not be manually modified.\\n+\\n+## 0.1.34\\n+Sun, 07 Dec 2025 16:38:11 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx-web3/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx-web3/package.json b/apps/vendor-okx-web3/package.json\\nindex 0607fc1e6..bcee2f5c2 100644\\n--- a/apps/vendor-okx-web3/package.json\\n+++ b/apps/vendor-okx-web3/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.1.33\\\",\\n+  \\\"version\\\": \\\"0.1.34\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex b91132858..83199cff4 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.10\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.10\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:11 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.4.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex 1b5d46d36..f1b41b247 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sun, 07 Dec 2025 15:23:14 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:11 GMT and should not be manually modified.\\n+\\n+## 0.29.10\\n+Sun, 07 Dec 2025 16:38:11 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex c9596c806..682caf361 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.29.9\\\",\\n+  \\\"version\\\": \\\"0.29.10\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-solana/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-solana/CHANGELOG.json b/apps/vendor-solana/CHANGELOG.json\\nindex 3b8c4426e..17fdcff1d 100644\\n--- a/apps/vendor-solana/CHANGELOG.json\\n+++ b/apps/vendor-solana/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.1.119\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-solana_v0.1.119\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:11 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-solana/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-solana/CHANGELOG.md b/apps/vendor-solana/CHANGELOG.md\\nindex bd8674bd1..9c15fb5dc 100644\\n--- a/apps/vendor-solana/CHANGELOG.md\\n+++ b/apps/vendor-solana/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:11 GMT and should not be manually modified.\\n+\\n+## 0.1.119\\n+Sun, 07 Dec 2025 16:38:11 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-solana/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-solana/package.json b/apps/vendor-solana/package.json\\nindex 66536a2f8..d61a664bd 100644\\n--- a/apps/vendor-solana/package.json\\n+++ b/apps/vendor-solana/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.1.118\\\",\\n+  \\\"version\\\": \\\"0.1.119\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-turboflow/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/CHANGELOG.json b/apps/vendor-turboflow/CHANGELOG.json\\nindex 530f445eb..911ca368e 100644\\n--- a/apps/vendor-turboflow/CHANGELOG.json\\n+++ b/apps/vendor-turboflow/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"1.2.10\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-turboflow_v1.2.10\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:11 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.4.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-turboflow/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/CHANGELOG.md b/apps/vendor-turboflow/CHANGELOG.md\\nindex f5095878f..cbdfde29b 100644\\n--- a/apps/vendor-turboflow/CHANGELOG.md\\n+++ b/apps/vendor-turboflow/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Thu, 04 Dec 2025 03:10:55 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:11 GMT and should not be manually modified.\\n+\\n+## 1.2.10\\n+Sun, 07 Dec 2025 16:38:11 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-turboflow/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/package.json b/apps/vendor-turboflow/package.json\\nindex 36afa6ee1..f0b244e3d 100644\\n--- a/apps/vendor-turboflow/package.json\\n+++ b/apps/vendor-turboflow/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"1.2.9\\\",\\n+  \\\"version\\\": \\\"1.2.10\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/virtual-exchange/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\\nindex ef5ad2bcf..939a712ac 100644\\n--- a/apps/virtual-exchange/CHANGELOG.json\\n+++ b/apps/virtual-exchange/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.5.5\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-virtual-exchange_v0.5.5\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.4.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\\nindex 400250891..1b60229f3 100644\\n--- a/apps/virtual-exchange/CHANGELOG.md\\n+++ b/apps/virtual-exchange/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sun, 07 Dec 2025 14:55:28 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.5.5\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\\nindex 9847730b1..9c691cf9e 100644\\n--- a/apps/virtual-exchange/package.json\\n+++ b/apps/virtual-exchange/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.5.4\\\",\\n+  \\\"version\\\": \\\"0.5.5\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/account-info-resolver/{main_2025-12-03-10-25.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/agent/{main_2025-12-03-10-25.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-account-composer/{main_2025-12-03-10-25.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-agent/{main_2025-12-03-10-25.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-fund/{main_2025-11-29-01-31.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-risk-manager/{main_2025-11-29-01-31.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-trade-copier/{main_2025-12-03-10-25.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-virtual-exchange/{main_2025-12-07-14-55.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/data-account/2025-12-07-16-26.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/data-account/2025-12-07-16-26.json b/common/changes/@yuants/data-account/2025-12-07-16-26.json\\ndeleted file mode 100644\\nindex 1ceedc6cb..000000000\\n--- a/common/changes/@yuants/data-account/2025-12-07-16-26.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/data-account\\\",\\n-      \\\"comment\\\": \\\"add more fields to position\\\",\\n-      \\\"type\\\": \\\"minor\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/data-account\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/data-account/{main_2025-11-29-01-31.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/dist-origin/{main_2025-12-03-10-25.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/exchange/2025-12-07-16-26.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/exchange/2025-12-07-16-26.json b/common/changes/@yuants/exchange/2025-12-07-16-26.json\\ndeleted file mode 100644\\nindex bff513a53..000000000\\n--- a/common/changes/@yuants/exchange/2025-12-07-16-26.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/exchange\\\",\\n-      \\\"comment\\\": \\\"add polyfill to position\\\",\\n-      \\\"type\\\": \\\"minor\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/exchange\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/exchange/{main_2025-12-03-18-20.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/kernel/{main_2025-12-03-10-25.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/order/{main_2025-12-03-10-25.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-05-17-11.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/{main_2025-12-04-10-36.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-bitget/{main_2025-12-04-10-36.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-ctp/{main_2025-12-03-10-25.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/{main_2025-12-06-20-05.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/{main_2025-12-06-20-13.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/{main_2025-12-05-15-22.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx-web3/{main_2025-11-29-01-31.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-07-15-23.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-solana/{main_2025-11-29-01-31.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-turboflow/{main_2025-12-04-03-10.json => main_2025-12-07-16-38.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"distributions/origin/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/distributions/origin/CHANGELOG.json b/distributions/origin/CHANGELOG.json\\nindex 0f413af87..50225a35c 100644\\n--- a/distributions/origin/CHANGELOG.json\\n+++ b/distributions/origin/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.1.120\\\",\\n+      \\\"tag\\\": \\\"@yuants/dist-origin_v0.1.120\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/agent\\\\\\\" to `0.13.144`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"distributions/origin/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/distributions/origin/CHANGELOG.md b/distributions/origin/CHANGELOG.md\\nindex 670325d9d..583b0cdb7 100644\\n--- a/distributions/origin/CHANGELOG.md\\n+++ b/distributions/origin/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.1.120\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"distributions/origin/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/distributions/origin/package.json b/distributions/origin/package.json\\nindex c1f79f220..3b6678498 100644\\n--- a/distributions/origin/package.json\\n+++ b/distributions/origin/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.1.119\\\",\\n+  \\\"version\\\": \\\"0.1.120\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/account-info-resolver/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/account-info-resolver/CHANGELOG.json b/libraries/account-info-resolver/CHANGELOG.json\\nindex 4fede2857..763539c23 100644\\n--- a/libraries/account-info-resolver/CHANGELOG.json\\n+++ b/libraries/account-info-resolver/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.2.78\\\",\\n+      \\\"tag\\\": \\\"@yuants/account-info-resolver_v0.2.78\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/account-info-resolver/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/account-info-resolver/CHANGELOG.md b/libraries/account-info-resolver/CHANGELOG.md\\nindex e767cf983..50bf266a4 100644\\n--- a/libraries/account-info-resolver/CHANGELOG.md\\n+++ b/libraries/account-info-resolver/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.2.78\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/account-info-resolver/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/account-info-resolver/package.json b/libraries/account-info-resolver/package.json\\nindex 6a5c10362..7bff8a092 100644\\n--- a/libraries/account-info-resolver/package.json\\n+++ b/libraries/account-info-resolver/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.2.77\\\",\\n+  \\\"version\\\": \\\"0.2.78\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/agent/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/agent/CHANGELOG.json b/libraries/agent/CHANGELOG.json\\nindex 53a58a13d..ef2c757f5 100644\\n--- a/libraries/agent/CHANGELOG.json\\n+++ b/libraries/agent/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.13.144\\\",\\n+      \\\"tag\\\": \\\"@yuants/agent_v0.13.144\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/kernel\\\\\\\" to `0.15.61`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/agent/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/agent/CHANGELOG.md b/libraries/agent/CHANGELOG.md\\nindex 1ed9da9e0..fe43dcdfc 100644\\n--- a/libraries/agent/CHANGELOG.md\\n+++ b/libraries/agent/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.13.144\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/agent/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/agent/package.json b/libraries/agent/package.json\\nindex 5ed7669fa..bb2804521 100644\\n--- a/libraries/agent/package.json\\n+++ b/libraries/agent/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.13.143\\\",\\n+  \\\"version\\\": \\\"0.13.144\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/data-account/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/data-account/CHANGELOG.json b/libraries/data-account/CHANGELOG.json\\nindex 2dea92f28..dfca2a9d5 100644\\n--- a/libraries/data-account/CHANGELOG.json\\n+++ b/libraries/data-account/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.9.0\\\",\\n+      \\\"tag\\\": \\\"@yuants/data-account_v0.9.0\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"minor\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add more fields to position\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/data-account/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/data-account/CHANGELOG.md b/libraries/data-account/CHANGELOG.md\\nindex bc90eda68..8d85cec31 100644\\n--- a/libraries/data-account/CHANGELOG.md\\n+++ b/libraries/data-account/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.9.0\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+### Minor changes\\n+\\n+- add more fields to position\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/data-account/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/data-account/package.json b/libraries/data-account/package.json\\nindex 75ca8816f..ce0760b5c 100644\\n--- a/libraries/data-account/package.json\\n+++ b/libraries/data-account/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.8.4\\\",\\n+  \\\"version\\\": \\\"0.9.0\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 22,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/exchange/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/exchange/CHANGELOG.json b/libraries/exchange/CHANGELOG.json\\nindex a4a044688..623ab17c6 100644\\n--- a/libraries/exchange/CHANGELOG.json\\n+++ b/libraries/exchange/CHANGELOG.json\\n@@ -3,0 +4,22 @@\\n+    {\\n+      \\\"version\\\": \\\"0.4.0\\\",\\n+      \\\"tag\\\": \\\"@yuants/exchange_v0.4.0\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"minor\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add polyfill to position\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/exchange/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/exchange/CHANGELOG.md b/libraries/exchange/CHANGELOG.md\\nindex d437a484f..6bbf4f8f8 100644\\n--- a/libraries/exchange/CHANGELOG.md\\n+++ b/libraries/exchange/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.4.0\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+### Minor changes\\n+\\n+- add polyfill to position\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/exchange/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/exchange/package.json b/libraries/exchange/package.json\\nindex a6810b2dc..616aa64e8 100644\\n--- a/libraries/exchange/package.json\\n+++ b/libraries/exchange/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.3.1\\\",\\n+  \\\"version\\\": \\\"0.4.0\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/kernel/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/kernel/CHANGELOG.json b/libraries/kernel/CHANGELOG.json\\nindex 44f7da043..96b39ad03 100644\\n--- a/libraries/kernel/CHANGELOG.json\\n+++ b/libraries/kernel/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.15.61\\\",\\n+      \\\"tag\\\": \\\"@yuants/kernel_v0.15.61\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/kernel/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/kernel/CHANGELOG.md b/libraries/kernel/CHANGELOG.md\\nindex f2a8d4e9e..8ad6917cb 100644\\n--- a/libraries/kernel/CHANGELOG.md\\n+++ b/libraries/kernel/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.15.61\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/kernel/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/kernel/package.json b/libraries/kernel/package.json\\nindex 417614c8e..1acc4f1bf 100644\\n--- a/libraries/kernel/package.json\\n+++ b/libraries/kernel/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.15.60\\\",\\n+  \\\"version\\\": \\\"0.15.61\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/order/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/order/CHANGELOG.json b/libraries/order/CHANGELOG.json\\nindex f80720f78..e47d76011 100644\\n--- a/libraries/order/CHANGELOG.json\\n+++ b/libraries/order/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.3.53\\\",\\n+      \\\"tag\\\": \\\"@yuants/order_v0.3.53\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 16:38:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-account\\\\\\\" to `0.9.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/order/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/order/CHANGELOG.md b/libraries/order/CHANGELOG.md\\nindex 0c2870cfd..d3ad2f54a 100644\\n--- a/libraries/order/CHANGELOG.md\\n+++ b/libraries/order/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+\\n+## 0.3.53\\n+Sun, 07 Dec 2025 16:38:10 GMT\\n+\\n+_Version update only_\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/order/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88cf1511d83591dc886853517ec08e080eb23c13\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 00:45:54 2025 +0800\\n\\n    chore: bump version (#2246)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/order/package.json b/libraries/order/package.json\\nindex add109887..77aa21821 100644\\n--- a/libraries/order/package.json\\n+++ b/libraries/order/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.3.52\\\",\\n+  \\\"version\\\": \\\"0.3.53\\\",\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"82990304e1bd1b2c86bb9237c236598ce5522a42\",\n+      \"short\": \"82990304e\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-08 00:59:53 +0800\",\n+      \"subject\": \"feat: support HTTP call service and add parseBodyText utility function (#2247)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 65,\n+          \"deletions\": 34,\n+          \"path\": \"apps/host/src/host-manager.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 82990304e1bd1b2c86bb9237c236598ce5522a42\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:59:53 2025 +0800\\n\\n    feat: support HTTP call service and add parseBodyText utility function (#2247)\\n\\ndiff --git a/apps/host/src/host-manager.ts b/apps/host/src/host-manager.ts\\nindex 529c8a156..a558402b7 100644\\n--- a/apps/host/src/host-manager.ts\\n+++ b/apps/host/src/host-manager.ts\\n@@ -1,2 +1,2 @@\\n-import { GlobalPrometheusRegistry, ITerminalInfo, Terminal } from '@yuants/protocol';\\n-import { formatTime, UUID, verifyMessage } from '@yuants/utils';\\n+import { GlobalPrometheusRegistry, ITerminalInfo, ITerminalMessage, Terminal } from '@yuants/protocol';\\n+import { formatTime, newError, observableToAsyncIterable, UUID, verifyMessage } from '@yuants/utils';\\n@@ -27,0 +28 @@ import WebSocket from 'ws';\\n+import { parseBodyText } from './utils/parseBodyText';\\n@@ -342,19 +343,10 @@ export const createNodeJSHostManager = () => {\\n-    const theUrl = new URL(req.url || '', 'http://localhost:8888');\\n-    const x = resolveHost(req);\\n-    if (!x) {\\n-      MetricsHostManagerConnectionErrorCounter.add(1);\\n-      res.writeHead(401);\\n-      res.end('Unauthorized: ' + req.url);\\n-      return;\\n-    }\\n-    if (theUrl.pathname.startsWith('/external/')) {\\n-      const reqBody = await new Promise<string>((resolve) => {\\n-        const body: Uint8Array[] = [];\\n-        req.on('data', (chunk) => {\\n-          body.push(chunk);\\n-        });\\n-        req.on('end', () => {\\n-          const reqBody = Buffer.concat(body).toString();\\n-          resolve(reqBody);\\n-        });\\n-      });\\n+    try {\\n+      console.info(formatTime(Date.now()), 'HTTP Request', req.method, req.url);\\n+      const theUrl = new URL(req.url || '', 'http://localhost:8888');\\n+      const x = resolveHost(req);\\n+      if (!x) {\\n+        MetricsHostManagerConnectionErrorCounter.add(1);\\n+        res.writeHead(401);\\n+        res.end('Unauthorized: ' + req.url);\\n+        return;\\n+      }\\n@@ -362,8 +354,49 @@ export const createNodeJSHostManager = () => {\\n-      const reqJson = {\\n-        method: req.method,\\n-        url: req.url,\\n-        pathname: theUrl.pathname,\\n-        headers: req.headers,\\n-        body: reqBody,\\n-        host_id: x?.host.host_id,\\n-      };\\n+      // 内部 API 请求 (POST /request)，路由到内部服务\\n+      if (theUrl.pathname === '/request') {\\n+        if (req.method === 'OPTIONS') {\\n+          res.writeHead(204, {\\n+            'Access-Control-Allow-Origin': '*',\\n+            'Access-Control-Allow-Headers': '*',\\n+            'Access-Control-Allow-Methods': '*',\\n+          });\\n+          res.end();\\n+          return;\\n+        }\\n+        if (req.method === 'POST') {\\n+          const _reqMsg = await parseBodyText(req);\\n+          const reqMsg = JSON.parse(_reqMsg) as ITerminalMessage;\\n+          if (!reqMsg.method) throw newError('INVALID_REQUEST', { reason: 'method is required' });\\n+          if (!reqMsg.req) throw newError('INVALID_REQUEST', { reason: 'req is required' });\\n+\\n+          res.writeHead(200, {\\n+            'Content-Type': 'application/x-ndjson',\\n+            'Cache-Control': 'no-cache',\\n+            Connection: 'keep-alive',\\n+            'Access-Control-Allow-Origin': '*',\\n+          });\\n+\\n+          // 按照 NDJSON 格式封装请求消息\\n+          for await (const msg of observableToAsyncIterable(\\n+            x.host.host_terminal.client.requestService(reqMsg.method, reqMsg.req),\\n+          )) {\\n+            res.write(JSON.stringify(msg) + '\\\\n');\\n+          }\\n+          res.end();\\n+\\n+          return;\\n+        }\\n+        return;\\n+      }\\n+\\n+      // 外部请求 (/external/) 格式由外部系统决定，直接转发给 Host 处理 (例如 WebHook)\\n+      if (theUrl.pathname.startsWith('/external/')) {\\n+        const reqBody = await parseBodyText(req);\\n+\\n+        const reqJson = {\\n+          method: req.method,\\n+          url: req.url,\\n+          pathname: theUrl.pathname,\\n+          headers: req.headers,\\n+          body: reqBody,\\n+          host_id: x?.host.host_id,\\n+        };\\n@@ -371 +403,0 @@ export const createNodeJSHostManager = () => {\\n-      try {\\n@@ -382,4 +413,0 @@ export const createNodeJSHostManager = () => {\\n-        return;\\n-      } catch (e) {\\n-        res.writeHead(500);\\n-        res.end(`${e}`);\\n@@ -387,0 +416,3 @@ export const createNodeJSHostManager = () => {\\n+    } catch (err) {\\n+      res.writeHead(500);\\n+      res.end(`Internal Server Error: ${err}`);\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"theUrl\",\n+              \"code\": \"const theUrl = new URL(req.url || '', 'http://localhost:8888');\",\n+              \"lineStart\": 345,\n+              \"lineEnd\": 345\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"x\",\n+              \"code\": \"const x = resolveHost(req);\\nif (!x) {\\n  MetricsHostManagerConnectionErrorCounter.add(1);\\n  res.writeHead(401);\\n  res.end('Unauthorized: ' + req.url);\\n  return;\\n}\\n// 内部 API 请求 (POST /request)，路由到内部服务\\nif (theUrl.pathname === '/request') {\\n  if (req.method === 'OPTIONS') {\\n    res.writeHead(204, {\\n      'Access-Control-Allow-Origin': '*',\\n      'Access-Control-Allow-Headers': '*',\\n      'Access-Control-Allow-Methods': '*',\\n    });\",\n+              \"lineStart\": 346,\n+              \"lineEnd\": 365\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"_reqMsg\",\n+              \"code\": \"const _reqMsg = await parseBodyText(req);\",\n+              \"lineStart\": 366,\n+              \"lineEnd\": 366\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"reqMsg\",\n+              \"code\": \"const reqMsg = JSON.parse(_reqMsg) as ITerminalMessage;\\nif (!reqMsg.method) throw newError('INVALID_REQUEST', { reason: 'method is required' });\\nif (!reqMsg.req) throw newError('INVALID_REQUEST', { reason: 'req is required' });\\n\\nres.writeHead(200, {\\n  'Content-Type': 'application/x-ndjson',\\n  'Cache-Control': 'no-cache',\\n  Connection: 'keep-alive',\\n  'Access-Control-Allow-Origin': '*',\\n});\\n\\n// 按照 NDJSON 格式封装请求消息\",\n+              \"lineStart\": 367,\n+              \"lineEnd\": 378\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"msg\",\n+              \"code\": \"    for await (const msg of observableToAsyncIterable(\\n      x.host.host_terminal.client.requestService(reqMsg.method, reqMsg.req),\\n    )) {\\n      res.write(JSON.stringify(msg) + '\\\\n');\\n    }\\n    res.end();\\n\\n    return;\\n  }\\n  return;\\n}\\n\\n// 外部请求 (/external/) 格式由外部系统决定，直接转发给 Host 处理 (例如 WebHook)\\nif (theUrl.pathname.startsWith('/external/')) {\",\n+              \"lineStart\": 379,\n+              \"lineEnd\": 392\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"reqBody\",\n+              \"code\": \"const reqBody = await parseBodyText(req);\\n\",\n+              \"lineStart\": 393,\n+              \"lineEnd\": 394\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"reqJson\",\n+              \"code\": \"    const reqJson = {\\n      method: req.method,\\n      url: req.url,\\n      pathname: theUrl.pathname,\\n      headers: req.headers,\\n      body: reqBody,\\n      host_id: x?.host.host_id,\\n    };\\n} catch (err) {\\n  res.writeHead(500);\\n  res.end(`Internal Server Error: ${err}`);\",\n+              \"lineStart\": 395,\n+              \"lineEnd\": 419\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 14,\n+          \"deletions\": 0,\n+          \"path\": \"apps/host/src/utils/parseBodyText.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 82990304e1bd1b2c86bb9237c236598ce5522a42\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:59:53 2025 +0800\\n\\n    feat: support HTTP call service and add parseBodyText utility function (#2247)\\n\\ndiff --git a/apps/host/src/utils/parseBodyText.ts b/apps/host/src/utils/parseBodyText.ts\\nnew file mode 100644\\nindex 000000000..518422d74\\n--- /dev/null\\n+++ b/apps/host/src/utils/parseBodyText.ts\\n@@ -0,0 +1,14 @@\\n+import type { IncomingMessage } from 'http';\\n+\\n+export const parseBodyText = async (req: IncomingMessage): Promise<string> => {\\n+  return new Promise<string>((resolve) => {\\n+    const body: Uint8Array[] = [];\\n+    req.on('data', (chunk) => {\\n+      body.push(chunk);\\n+    });\\n+    req.on('end', () => {\\n+      const reqBody = Buffer.concat(body).toString();\\n+      resolve(reqBody);\\n+    });\\n+  });\\n+};\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"parseBodyText\",\n+              \"code\": \"export const parseBodyText = async (req: IncomingMessage): Promise<string> => {\\n  return new Promise<string>((resolve) => {\",\n+              \"lineStart\": 3,\n+              \"lineEnd\": 4\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"body\",\n+              \"code\": \"const body: Uint8Array[] = [];\\nreq.on('data', (chunk) => {\\n  body.push(chunk);\\n});\\nreq.on('end', () => {\",\n+              \"lineStart\": 5,\n+              \"lineEnd\": 9\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"reqBody\",\n+              \"code\": \"      const reqBody = Buffer.concat(body).toString();\\n      resolve(reqBody);\\n    });\\n  });\\n};\",\n+              \"lineStart\": 10,\n+              \"lineEnd\": 15\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-host/2025-12-07-16-58.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 82990304e1bd1b2c86bb9237c236598ce5522a42\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:59:53 2025 +0800\\n\\n    feat: support HTTP call service and add parseBodyText utility function (#2247)\\n\\ndiff --git a/common/changes/@yuants/app-host/2025-12-07-16-58.json b/common/changes/@yuants/app-host/2025-12-07-16-58.json\\nnew file mode 100644\\nindex 000000000..f9a60eaaa\\n--- /dev/null\\n+++ b/common/changes/@yuants/app-host/2025-12-07-16-58.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/app-host\\\",\\n+      \\\"comment\\\": \\\"support HTTP call service\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/app-host\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"efe8a5925300779b98ea6210ccefde28d05fe063\",\n+      \"short\": \"efe8a5925\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-08 01:18:22 +0800\",\n+      \"subject\": \"chore: bump version (#2248)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/host/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit efe8a5925300779b98ea6210ccefde28d05fe063\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 01:18:22 2025 +0800\\n\\n    chore: bump version (#2248)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/host/CHANGELOG.json b/apps/host/CHANGELOG.json\\nindex 0172bc7b0..36db053a5 100644\\n--- a/apps/host/CHANGELOG.json\\n+++ b/apps/host/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.11.0\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-host_v0.11.0\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 17:06:02 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"minor\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"support HTTP call service\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/host/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit efe8a5925300779b98ea6210ccefde28d05fe063\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 01:18:22 2025 +0800\\n\\n    chore: bump version (#2248)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/host/CHANGELOG.md b/apps/host/CHANGELOG.md\\nindex 1936b779c..bec04478c 100644\\n--- a/apps/host/CHANGELOG.md\\n+++ b/apps/host/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 17:06:02 GMT and should not be manually modified.\\n+\\n+## 0.11.0\\n+Sun, 07 Dec 2025 17:06:02 GMT\\n+\\n+### Minor changes\\n+\\n+- support HTTP call service\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/host/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit efe8a5925300779b98ea6210ccefde28d05fe063\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 01:18:22 2025 +0800\\n\\n    chore: bump version (#2248)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/host/package.json b/apps/host/package.json\\nindex 0c6219d69..8d789c40f 100644\\n--- a/apps/host/package.json\\n+++ b/apps/host/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.6\\\",\\n+  \\\"version\\\": \\\"0.11.0\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/app-host/2025-12-07-16-58.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit efe8a5925300779b98ea6210ccefde28d05fe063\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 01:18:22 2025 +0800\\n\\n    chore: bump version (#2248)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/app-host/2025-12-07-16-58.json b/common/changes/@yuants/app-host/2025-12-07-16-58.json\\ndeleted file mode 100644\\nindex f9a60eaaa..000000000\\n--- a/common/changes/@yuants/app-host/2025-12-07-16-58.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/app-host\\\",\\n-      \\\"comment\\\": \\\"support HTTP call service\\\",\\n-      \\\"type\\\": \\\"minor\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/app-host\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-host/{main_2025-11-29-01-31.json => main_2025-12-07-17-06.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"540b69760084c1e6e7beb50e4014364733f445b0\",\n+      \"short\": \"540b69760\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-08 02:02:30 +0800\",\n+      \"subject\": \"feat(vendor-aster): 添加现货产品支持，更新 API 接口以获取现货和永续交易对信息 (#2249)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": \"vendor-aster\",\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/SESSION_NOTES.md\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 540b69760084c1e6e7beb50e4014364733f445b0\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Mon Dec 8 02:02:30 2025 +0800\\n\\n    feat(vendor-aster): 添加现货产品支持，更新 API 接口以获取现货和永续交易对信息 (#2249)\\n\\ndiff --git a/apps/vendor-aster/SESSION_NOTES.md b/apps/vendor-aster/SESSION_NOTES.md\\nindex 8a7aaa694..6d9df0bc0 100644\\n--- a/apps/vendor-aster/SESSION_NOTES.md\\n+++ b/apps/vendor-aster/SESSION_NOTES.md\\n@@ -125,0 +126,8 @@\\n+### 2025-12-08 — Codex\\n+\\n+- **本轮摘要**：\\n+  - `services/markets/product.ts` 同时输出永续与现货产品目录，新增 Spot exchangeInfo 拉取逻辑，保持价格/数量步长与 Aster 过滤器一致。\\n+  - `api/public-api.ts` 引入 Spot exchangeInfo 公共接口，分离期货与现货的 base URL。\\n+- **运行的测试 / 检查**：\\n+  - `npx tsc --noEmit --project apps/vendor-aster/tsconfig.json`\\n+\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 24,\n+          \"deletions\": 9,\n+          \"path\": \"apps/vendor-aster/src/api/public-api.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 540b69760084c1e6e7beb50e4014364733f445b0\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Mon Dec 8 02:02:30 2025 +0800\\n\\n    feat(vendor-aster): 添加现货产品支持，更新 API 接口以获取现货和永续交易对信息 (#2249)\\n\\ndiff --git a/apps/vendor-aster/src/api/public-api.ts b/apps/vendor-aster/src/api/public-api.ts\\nindex 4cd51f4b6..ced2ae976 100644\\n--- a/apps/vendor-aster/src/api/public-api.ts\\n+++ b/apps/vendor-aster/src/api/public-api.ts\\n@@ -1 +0,0 @@\\n-const BASE_URL = 'https://fapi.asterdex.com';\\n@@ -9,2 +8,7 @@ const terminal = Terminal.fromNodeEnv();\\n-const request = async <T>(method: string, endpoint: string, params: any = {}): Promise<T> => {\\n-  const url = new URL(BASE_URL);\\n+const request = async <T>(\\n+  method: string,\\n+  baseUrl: string,\\n+  endpoint: string,\\n+  params: any = {},\\n+): Promise<T> => {\\n+  const url = new URL(baseUrl);\\n@@ -28,0 +33 @@ const createApi =\\n+  (baseUrl: string) =>\\n@@ -31 +36,4 @@ const createApi =\\n-    request<TRes>(method, endpoint, params);\\n+    request<TRes>(method, baseUrl, endpoint, params);\\n+\\n+const createFutureApi = createApi('https://fapi.asterdex.com');\\n+const createSpotApi = createApi('https://sapi.asterdex.com');\\n@@ -38 +46 @@ const createApi =\\n-export const getFApiV1FundingRate = createApi<\\n+export const getFApiV1FundingRate = createFutureApi<\\n@@ -82 +90,8 @@ export interface IAsterExchangeInfo {\\n-export const getFApiV1ExchangeInfo = createApi<{}, IAsterExchangeInfo>('GET', '/fapi/v1/exchangeInfo');\\n+export const getFApiV1ExchangeInfo = createFutureApi<{}, IAsterExchangeInfo>('GET', '/fapi/v1/exchangeInfo');\\n+\\n+/**\\n+ * 获取现货交易对信息\\n+ *\\n+ * https://github.com/asterdex/api-docs/blob/master/aster-finance-spot-api_CN.md#L1080-L1145\\n+ */\\n+export const getApiV1ExchangeInfo = createSpotApi<{}, IAsterExchangeInfo>('GET', '/api/v1/exchangeInfo');\\n@@ -89 +104 @@ export const getFApiV1ExchangeInfo = createApi<{}, IAsterExchangeInfo>('GET', '/\\n-export const getFApiV1OpenInterest = createApi<\\n+export const getFApiV1OpenInterest = createFutureApi<\\n@@ -105 +120 @@ export const getFApiV1OpenInterest = createApi<\\n-export const getFApiV1TickerPrice = createApi<\\n+export const getFApiV1TickerPrice = createFutureApi<\\n@@ -118 +133 @@ export const getFApiV1TickerPrice = createApi<\\n-export const getFApiV1PremiumIndex = createApi<\\n+export const getFApiV1PremiumIndex = createFutureApi<\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"request\",\n+              \"code\": \"const request = async <T>(\\n  method: string,\\n  baseUrl: string,\\n  endpoint: string,\\n  params: any = {},\\n): Promise<T> => {\",\n+              \"lineStart\": 8,\n+              \"lineEnd\": 13\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"url\",\n+              \"code\": \"const url = new URL(baseUrl);\\n(baseUrl: string) =>\\n  request<TRes>(method, baseUrl, endpoint, params);\\n\",\n+              \"lineStart\": 14,\n+              \"lineEnd\": 37\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"createFutureApi\",\n+              \"code\": \"const createFutureApi = createApi('https://fapi.asterdex.com');\",\n+              \"lineStart\": 38,\n+              \"lineEnd\": 38\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"createSpotApi\",\n+              \"code\": \"const createSpotApi = createApi('https://sapi.asterdex.com');\",\n+              \"lineStart\": 39,\n+              \"lineEnd\": 45\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"getFApiV1FundingRate\",\n+              \"code\": \"export const getFApiV1FundingRate = createFutureApi<\",\n+              \"lineStart\": 46,\n+              \"lineEnd\": 89\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"getFApiV1ExchangeInfo\",\n+              \"code\": \"export const getFApiV1ExchangeInfo = createFutureApi<{}, IAsterExchangeInfo>('GET', '/fapi/v1/exchangeInfo');\\n\\n/**\\n * 获取现货交易对信息\\n *\\n * https://github.com/asterdex/api-docs/blob/master/aster-finance-spot-api_CN.md#L1080-L1145\\n */\",\n+              \"lineStart\": 90,\n+              \"lineEnd\": 96\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"getApiV1ExchangeInfo\",\n+              \"code\": \"export const getApiV1ExchangeInfo = createSpotApi<{}, IAsterExchangeInfo>('GET', '/api/v1/exchangeInfo');\",\n+              \"lineStart\": 97,\n+              \"lineEnd\": 103\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"getFApiV1OpenInterest\",\n+              \"code\": \"export const getFApiV1OpenInterest = createFutureApi<\",\n+              \"lineStart\": 104,\n+              \"lineEnd\": 119\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"getFApiV1TickerPrice\",\n+              \"code\": \"export const getFApiV1TickerPrice = createFutureApi<\",\n+              \"lineStart\": 120,\n+              \"lineEnd\": 132\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"getFApiV1PremiumIndex\",\n+              \"code\": \"export const getFApiV1PremiumIndex = createFutureApi<\",\n+              \"lineStart\": 133,\n+              \"lineEnd\": 134\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 56,\n+          \"deletions\": 22,\n+          \"path\": \"apps/vendor-aster/src/services/markets/product.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 540b69760084c1e6e7beb50e4014364733f445b0\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Mon Dec 8 02:02:30 2025 +0800\\n\\n    feat(vendor-aster): 添加现货产品支持，更新 API 接口以获取现货和永续交易对信息 (#2249)\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/product.ts b/apps/vendor-aster/src/services/markets/product.ts\\nindex 027646b5a..cae86f69c 100644\\n--- a/apps/vendor-aster/src/services/markets/product.ts\\n+++ b/apps/vendor-aster/src/services/markets/product.ts\\n@@ -2 +1,0 @@ import { IProduct } from '@yuants/data-product';\\n-import { Terminal } from '@yuants/protocol';\\n@@ -4,3 +3 @@ import { encodePath } from '@yuants/utils';\\n-import { getFApiV1ExchangeInfo } from '../../api/public-api';\\n-\\n-const terminal = Terminal.fromNodeEnv();\\n+import { getApiV1ExchangeInfo, getFApiV1ExchangeInfo } from '../../api/public-api';\\n@@ -9,9 +6,12 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-  // Fetch exchange info from ASTER API\\n-  const exchangeInfo = await getFApiV1ExchangeInfo({});\\n-  // Convert symbols to IProduct format\\n-  return exchangeInfo.symbols\\n-    .filter((symbol) => symbol.status === 'TRADING') // Only include active trading symbols\\n-    .map((symbol): IProduct => {\\n-      // Find price filter for price step\\n-      const priceFilter = symbol.filters.find((filter) => filter.filterType === 'PRICE_FILTER');\\n-      const priceStep = priceFilter ? +priceFilter.tickSize : 1e-2;\\n+  const [perpExchangeInfo, spotExchangeInfo] = await Promise.all([\\n+    getFApiV1ExchangeInfo({}),\\n+    getApiV1ExchangeInfo({}),\\n+  ]);\\n+\\n+  const pickPriceStep = (symbol: {\\n+    filters: { filterType: string; tickSize?: string }[];\\n+    pricePrecision: number;\\n+  }) => {\\n+    const priceFilter = symbol.filters.find((filter) => filter.filterType === 'PRICE_FILTER');\\n+    return priceFilter ? +priceFilter.tickSize! : Number(`1e-${symbol.pricePrecision}`);\\n+  };\\n@@ -19,3 +19,7 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      // Find lot size filter for volume step\\n-      const lotSizeFilter = symbol.filters.find((filter) => filter.filterType === 'LOT_SIZE');\\n-      const volumeStep = lotSizeFilter ? +lotSizeFilter.stepSize : Number(`1e-${symbol.quantityPrecision}`);\\n+  const pickVolumeStep = (symbol: {\\n+    filters: { filterType: string; stepSize?: string }[];\\n+    quantityPrecision: number;\\n+  }) => {\\n+    const lotSizeFilter = symbol.filters.find((filter) => filter.filterType === 'LOT_SIZE');\\n+    return lotSizeFilter ? +lotSizeFilter.stepSize! : Number(`1e-${symbol.quantityPrecision}`);\\n+  };\\n@@ -23 +27,4 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      return {\\n+  const perpProducts: IProduct[] = perpExchangeInfo.symbols\\n+    .filter((symbol) => symbol.status === 'TRADING')\\n+    .map(\\n+      (symbol): IProduct => ({\\n@@ -33,2 +40,2 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-        price_step: priceStep,\\n-        volume_step: volumeStep,\\n+        price_step: pickPriceStep(symbol),\\n+        volume_step: pickVolumeStep(symbol),\\n@@ -38 +45 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-        margin_rate: 0.1, // Default margin rate, can be adjusted based on actual requirements\\n+        margin_rate: 0.1,\\n@@ -42,2 +49,29 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      };\\n-    });\\n+      }),\\n+    );\\n+\\n+  const spotProducts: IProduct[] = spotExchangeInfo.symbols\\n+    .filter((symbol) => symbol.status === 'TRADING')\\n+    .map(\\n+      (symbol): IProduct => ({\\n+        datasource_id: 'ASTER',\\n+        product_id: encodePath('ASTER', 'SPOT', symbol.symbol),\\n+        name: `${symbol.baseAsset}/${symbol.quoteAsset} SPOT`,\\n+        quote_currency: symbol.quoteAsset,\\n+        base_currency: symbol.baseAsset,\\n+        value_scale_unit: '',\\n+        value_based_cost: 0,\\n+        volume_based_cost: 0,\\n+        max_volume: 0,\\n+        price_step: pickPriceStep(symbol),\\n+        volume_step: pickVolumeStep(symbol),\\n+        value_scale: 1,\\n+        allow_long: true,\\n+        allow_short: false,\\n+        margin_rate: 1,\\n+        max_position: 0,\\n+        market_id: 'ASTER/SPOT',\\n+        no_interest_rate: true,\\n+      }),\\n+    );\\n+\\n+  return [...perpProducts, ...spotProducts];\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"pickPriceStep\",\n+              \"code\": \"const pickPriceStep = (symbol: {\\n  filters: { filterType: string; tickSize?: string }[];\\n  pricePrecision: number;\\n}) => {\",\n+              \"lineStart\": 11,\n+              \"lineEnd\": 14\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"priceFilter\",\n+              \"code\": \"  const priceFilter = symbol.filters.find((filter) => filter.filterType === 'PRICE_FILTER');\\n  return priceFilter ? +priceFilter.tickSize! : Number(`1e-${symbol.pricePrecision}`);\\n};\",\n+              \"lineStart\": 15,\n+              \"lineEnd\": 18\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"pickVolumeStep\",\n+              \"code\": \"const pickVolumeStep = (symbol: {\\n  filters: { filterType: string; stepSize?: string }[];\\n  quantityPrecision: number;\\n}) => {\",\n+              \"lineStart\": 19,\n+              \"lineEnd\": 22\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"lotSizeFilter\",\n+              \"code\": \"  const lotSizeFilter = symbol.filters.find((filter) => filter.filterType === 'LOT_SIZE');\\n  return lotSizeFilter ? +lotSizeFilter.stepSize! : Number(`1e-${symbol.quantityPrecision}`);\\n};\",\n+              \"lineStart\": 23,\n+              \"lineEnd\": 26\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"perpProducts\",\n+              \"code\": \"const perpProducts: IProduct[] = perpExchangeInfo.symbols\\n  .filter((symbol) => symbol.status === 'TRADING')\\n  .map(\\n    (symbol): IProduct => ({\\n      price_step: pickPriceStep(symbol),\\n      volume_step: pickVolumeStep(symbol),\\n      margin_rate: 0.1,\\n    }),\\n  );\\n\",\n+              \"lineStart\": 27,\n+              \"lineEnd\": 51\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"spotProducts\",\n+              \"code\": \"const spotProducts: IProduct[] = spotExchangeInfo.symbols\\n  .filter((symbol) => symbol.status === 'TRADING')\\n  .map(\\n    (symbol): IProduct => ({\\n      datasource_id: 'ASTER',\\n      product_id: encodePath('ASTER', 'SPOT', symbol.symbol),\\n      name: `${symbol.baseAsset}/${symbol.quoteAsset} SPOT`,\\n      quote_currency: symbol.quoteAsset,\\n      base_currency: symbol.baseAsset,\\n      value_scale_unit: '',\\n      value_based_cost: 0,\\n      volume_based_cost: 0,\\n      max_volume: 0,\\n      price_step: pickPriceStep(symbol),\\n      volume_step: pickVolumeStep(symbol),\",\n+              \"lineStart\": 52,\n+              \"lineEnd\": 78\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-07-17-51.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 540b69760084c1e6e7beb50e4014364733f445b0\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Mon Dec 8 02:02:30 2025 +0800\\n\\n    feat(vendor-aster): 添加现货产品支持，更新 API 接口以获取现货和永续交易对信息 (#2249)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-07-17-51.json b/common/changes/@yuants/vendor-aster/2025-12-07-17-51.json\\nnew file mode 100644\\nindex 000000000..9b77e5d36\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-07-17-51.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"add aster spot product\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"a083a19a31fea4b33b6bdbce30e31ed8946d58da\",\n+      \"short\": \"a083a19a3\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-08 04:12:56 +0800\",\n+      \"subject\": \"feat: add metrics for API usage tracking in Binance client (#2250)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-binance/src/api/client.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit a083a19a31fea4b33b6bdbce30e31ed8946d58da\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 04:12:56 2025 +0800\\n\\n    feat: add metrics for API usage tracking in Binance client (#2250)\\n\\ndiff --git a/apps/vendor-binance/src/api/client.ts b/apps/vendor-binance/src/api/client.ts\\nindex 4d853dcbc..ed027929c 100644\\n--- a/apps/vendor-binance/src/api/client.ts\\n+++ b/apps/vendor-binance/src/api/client.ts\\n@@ -1 +1 @@\\n-import { GlobalPrometheusRegistry } from '@yuants/protocol';\\n+import { GlobalPrometheusRegistry, Terminal } from '@yuants/protocol';\\n@@ -4,0 +5,2 @@ const MetricBinanceApiUsedWeight = GlobalPrometheusRegistry.gauge('binance_api_u\\n+const MetricBinanceApiCounter = GlobalPrometheusRegistry.counter('binance_api_request_total', '');\\n+const terminal = Terminal.fromNodeEnv();\\n@@ -89,0 +92,2 @@ const callApi = async <T>(\\n+  MetricBinanceApiCounter.labels({ path: url.pathname, terminal_id: terminal.terminal_id }).inc();\\n+\\n@@ -109 +113 @@ const callApi = async <T>(\\n-    MetricBinanceApiUsedWeight.set(+usedWeight1M);\\n+    MetricBinanceApiUsedWeight.labels({ terminal_id: terminal.terminal_id }).set(+usedWeight1M);\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"MetricBinanceApiCounter\",\n+              \"code\": \"const MetricBinanceApiCounter = GlobalPrometheusRegistry.counter('binance_api_request_total', '');\",\n+              \"lineStart\": 5,\n+              \"lineEnd\": 5\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"terminal\",\n+              \"code\": \"const terminal = Terminal.fromNodeEnv();\\n  MetricBinanceApiCounter.labels({ path: url.pathname, terminal_id: terminal.terminal_id }).inc();\\n\\n    MetricBinanceApiUsedWeight.labels({ terminal_id: terminal.terminal_id }).set(+usedWeight1M);\",\n+              \"lineStart\": 6,\n+              \"lineEnd\": 114\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-07-20-11.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit a083a19a31fea4b33b6bdbce30e31ed8946d58da\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 04:12:56 2025 +0800\\n\\n    feat: add metrics for API usage tracking in Binance client (#2250)\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-07-20-11.json b/common/changes/@yuants/vendor-binance/2025-12-07-20-11.json\\nnew file mode 100644\\nindex 000000000..13a8097ec\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-binance/2025-12-07-20-11.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n+      \\\"comment\\\": \\\"add metric\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"88632ee3cfec022b78d8f904532da0d3d285b18a\",\n+      \"short\": \"88632ee3c\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-08 04:32:30 +0800\",\n+      \"subject\": \"chore: bump version (#2251)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88632ee3cfec022b78d8f904532da0d3d285b18a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 04:32:30 2025 +0800\\n\\n    chore: bump version (#2251)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex 6316855cc..e1e7142b3 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.22\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.22\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 20:31:33 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add aster spot product\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88632ee3cfec022b78d8f904532da0d3d285b18a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 04:32:30 2025 +0800\\n\\n    chore: bump version (#2251)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex a0ac55442..84df4f698 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 20:31:33 GMT and should not be manually modified.\\n+\\n+## 0.7.22\\n+Sun, 07 Dec 2025 20:31:33 GMT\\n+\\n+### Patches\\n+\\n+- add aster spot product\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88632ee3cfec022b78d8f904532da0d3d285b18a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 04:32:30 2025 +0800\\n\\n    chore: bump version (#2251)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex 1bcc0a90d..111b87f24 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.21\\\",\\n+  \\\"version\\\": \\\"0.7.22\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 88632ee3cfec022b78d8f904532da0d3d285b18a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 04:32:30 2025 +0800\\n\\n    chore: bump version (#2251)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\\nindex 2047208c4..38df98c49 100644\\n--- a/apps/vendor-binance/CHANGELOG.json\\n+++ b/apps/vendor-binance/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.12\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-binance_v0.10.12\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 20:31:33 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add metric\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88632ee3cfec022b78d8f904532da0d3d285b18a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 04:32:30 2025 +0800\\n\\n    chore: bump version (#2251)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\\nindex 61c93fef7..04ea881b6 100644\\n--- a/apps/vendor-binance/CHANGELOG.md\\n+++ b/apps/vendor-binance/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 20:31:33 GMT and should not be manually modified.\\n+\\n+## 0.10.12\\n+Sun, 07 Dec 2025 20:31:33 GMT\\n+\\n+### Patches\\n+\\n+- add metric\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 88632ee3cfec022b78d8f904532da0d3d285b18a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 04:32:30 2025 +0800\\n\\n    chore: bump version (#2251)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\\nindex 5057f45e3..9586b42d0 100644\\n--- a/apps/vendor-binance/package.json\\n+++ b/apps/vendor-binance/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.11\\\",\\n+  \\\"version\\\": \\\"0.10.12\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-07-17-51.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 88632ee3cfec022b78d8f904532da0d3d285b18a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 04:32:30 2025 +0800\\n\\n    chore: bump version (#2251)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-07-17-51.json b/common/changes/@yuants/vendor-aster/2025-12-07-17-51.json\\ndeleted file mode 100644\\nindex 9b77e5d36..000000000\\n--- a/common/changes/@yuants/vendor-aster/2025-12-07-17-51.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n-      \\\"comment\\\": \\\"add aster spot product\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-07-16-38.json => main_2025-12-07-20-31.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-07-20-11.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 88632ee3cfec022b78d8f904532da0d3d285b18a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 04:32:30 2025 +0800\\n\\n    chore: bump version (#2251)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-07-20-11.json b/common/changes/@yuants/vendor-binance/2025-12-07-20-11.json\\ndeleted file mode 100644\\nindex 13a8097ec..000000000\\n--- a/common/changes/@yuants/vendor-binance/2025-12-07-20-11.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n-      \\\"comment\\\": \\\"add metric\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/{main_2025-12-07-16-38.json => main_2025-12-07-20-31.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"1b048f71fb673cabca8b51ba49495d0a91c35680\",\n+      \"short\": \"1b048f71f\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-08 05:39:58 +0800\",\n+      \"subject\": \"feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 7,\n+          \"deletions\": 8,\n+          \"path\": \"apps/account-composer/src/index.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/account-composer/src/index.ts b/apps/account-composer/src/index.ts\\nindex fbf7bab5d..7174777d6 100644\\n--- a/apps/account-composer/src/index.ts\\n+++ b/apps/account-composer/src/index.ts\\n@@ -2 +2 @@ import { IAccountInfo, publishAccountInfo } from '@yuants/data-account';\\n-import { createProductCache, getProfit } from '@yuants/data-product';\\n+import { createClientProductCache, getProfit } from '@yuants/data-product';\\n@@ -5 +5 @@ import { requestSQL } from '@yuants/sql';\\n-import { encodePath, formatTime, listWatch } from '@yuants/utils';\\n+import { formatTime, listWatch, newError } from '@yuants/utils';\\n@@ -25 +25 @@ const mapAccountIdToAccountInfo$: Record<string, Observable<IAccountInfo>> = {};\\n-const cacheOfProduct = createProductCache(terminal);\\n+const cacheOfProduct = createClientProductCache(terminal);\\n@@ -99,3 +99,2 @@ defer(() =>\\n-                            const productKey = encodePath(theDatasourceId, theProductId);\\n-                            cacheOfProduct.query(productKey, false); // SWR (Stale While Revalidate, Sync Mode)\\n-                            const theProduct = cacheOfProduct.get(productKey);\\n+                            cacheOfProduct.query(theProductId, false); // SWR (Stale While Revalidate, Sync Mode)\\n+                            const theProduct = cacheOfProduct.get(theProductId);\\n@@ -104 +103 @@ defer(() =>\\n-                            if (!theProduct) throw new Error('ProductNotFound ' + productKey);\\n+                            if (!theProduct) throw newError('ProductNotFound', { productKey: theProductId });\\n@@ -115 +114 @@ defer(() =>\\n-                                throw new Error('ExchangeRateNotFound');\\n+                                throw newError('ExchangeRateNotFound', { theProduct });\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"cacheOfProduct\",\n+              \"code\": \"const cacheOfProduct = createClientProductCache(terminal);\\n                            cacheOfProduct.query(theProductId, false); // SWR (Stale While Revalidate, Sync Mode)\",\n+              \"lineStart\": 25,\n+              \"lineEnd\": 99\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"theProduct\",\n+              \"code\": \"const theProduct = cacheOfProduct.get(theProductId);\\nif (!theProduct) throw newError('ProductNotFound', { productKey: theProductId });\\n    throw newError('ExchangeRateNotFound', { theProduct });\",\n+              \"lineStart\": 100,\n+              \"lineEnd\": 115\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 4,\n+          \"deletions\": 3,\n+          \"path\": \"apps/vendor-gate/src/api/http-client.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/vendor-gate/src/api/http-client.ts b/apps/vendor-gate/src/api/http-client.ts\\nindex 013dcdfeb..97e0e7045 100644\\n--- a/apps/vendor-gate/src/api/http-client.ts\\n+++ b/apps/vendor-gate/src/api/http-client.ts\\n@@ -1,0 +2 @@ import { encodeHex, formatTime, HmacSHA512, sha512 } from '@yuants/utils';\\n+import { join } from 'path';\\n@@ -3 +4 @@ import { encodeHex, formatTime, HmacSHA512, sha512 } from '@yuants/utils';\\n-const BASE_URL = 'https://api.gateio.ws';\\n+const BASE_URL = 'https://api.gateio.ws/api/v4';\\n@@ -30 +31 @@ const createRequestArtifacts = (method: HttpMethod, path: string, params?: GateP\\n-  url.pathname = path;\\n+  url.pathname = join(url.pathname, path);\\n@@ -60 +61 @@ const parseJSON = async <TResponse>(\\n-    console.error(formatTime(Date.now()), 'GateRequestFailed', path, JSON.stringify(params ?? {}), text, {\\n+    console.info(formatTime(Date.now()), 'GateRequestFailed', path, JSON.stringify(params ?? {}), text, {\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"BASE_URL\",\n+              \"code\": \"const BASE_URL = 'https://api.gateio.ws/api/v4';\\n  url.pathname = join(url.pathname, path);\\n    console.info(formatTime(Date.now()), 'GateRequestFailed', path, JSON.stringify(params ?? {}), text, {\",\n+              \"lineStart\": 4,\n+              \"lineEnd\": 62\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 15,\n+          \"deletions\": 15,\n+          \"path\": \"apps/vendor-gate/src/api/private-api.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/vendor-gate/src/api/private-api.ts b/apps/vendor-gate/src/api/private-api.ts\\nindex 644570bc1..23714cd97 100644\\n--- a/apps/vendor-gate/src/api/private-api.ts\\n+++ b/apps/vendor-gate/src/api/private-api.ts\\n@@ -28 +28 @@ export const getAccountDetail = (\\n-}> => callPrivate(credential, 'GET', '/api/v4/account/detail');\\n+}> => callPrivate(credential, 'GET', '/account/detail');\\n@@ -65 +65 @@ export const getUnifiedAccounts = (\\n-}> => callPrivate(credential, 'GET', '/api/v4/unified/accounts', params);\\n+}> => callPrivate(credential, 'GET', '/unified/accounts', params);\\n@@ -93 +93 @@ export const getFuturePositions = (\\n-> => callPrivate(credential, 'GET', `/api/v4/futures/${quote_currency}/positions`, params);\\n+> => callPrivate(credential, 'GET', `/futures/${quote_currency}/positions`, params);\\n@@ -123 +123 @@ export const getFuturesOrders = (\\n-> => callPrivate(credential, 'GET', `/api/v4/futures/${settle}/orders`, params);\\n+> => callPrivate(credential, 'GET', `/futures/${settle}/orders`, params);\\n@@ -157 +157 @@ export const getFuturesAccounts = (\\n-}> => callPrivate(credential, 'GET', `/api/v4/futures/${settle}/accounts`);\\n+}> => callPrivate(credential, 'GET', `/futures/${settle}/accounts`);\\n@@ -218 +218 @@ export const postFutureOrders = (\\n-}> => callPrivate(credential, 'POST', `/api/v4/futures/${settle}/orders`, params);\\n+}> => callPrivate(credential, 'POST', `/futures/${settle}/orders`, params);\\n@@ -226 +226 @@ export const deleteFutureOrders = (credential: ICredential, settle: string, orde\\n-  callPrivate(credential, 'DELETE', `/api/v4/futures/${settle}/orders/${order_id}`);\\n+  callPrivate(credential, 'DELETE', `/futures/${settle}/orders/${order_id}`);\\n@@ -256 +256 @@ export const postWithdrawals = (\\n-}> => callPrivate(credential, 'POST', '/api/v4/withdrawals', params);\\n+}> => callPrivate(credential, 'POST', '/withdrawals', params);\\n@@ -278 +278 @@ export const getDepositAddress = (\\n-}> => callPrivate(credential, 'GET', '/api/v4/wallet/deposit_address', params);\\n+}> => callPrivate(credential, 'GET', '/wallet/deposit_address', params);\\n@@ -301 +301 @@ export const getSubAccountList = (\\n-> => callPrivate(credential, 'GET', '/api/v4/sub_accounts', params);\\n+> => callPrivate(credential, 'GET', '/sub_accounts', params);\\n@@ -332 +332 @@ export const getDepositHistory = (\\n-> => callPrivate(credential, 'GET', '/api/v4/wallet/deposits', params);\\n+> => callPrivate(credential, 'GET', '/wallet/deposits', params);\\n@@ -363 +363 @@ export const getWithdrawalHistory = (\\n-> => callPrivate(credential, 'GET', '/api/v4/wallet/withdrawals', params);\\n+> => callPrivate(credential, 'GET', '/wallet/withdrawals', params);\\n@@ -382 +382 @@ export const getSpotAccounts = (\\n-> => callPrivate(credential, 'GET', '/api/v4/spot/accounts', params);\\n+> => callPrivate(credential, 'GET', '/spot/accounts', params);\\n@@ -403 +403 @@ export const postWalletTransfer = (\\n-}> => callPrivate(credential, 'POST', '/api/v4/wallet/transfers', params);\\n+}> => callPrivate(credential, 'POST', '/wallet/transfers', params);\\n@@ -418 +418 @@ export const getUnifiedTransferable = (\\n-}> => callPrivate(credential, 'GET', `/api/v4/unified/transferable`, params);\\n+}> => callPrivate(credential, 'GET', `/unified/transferable`, params);\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 5,\n+          \"deletions\": 5,\n+          \"path\": \"apps/vendor-gate/src/api/public-api.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/vendor-gate/src/api/public-api.ts b/apps/vendor-gate/src/api/public-api.ts\\nindex faaad3eee..ee1a246a8 100644\\n--- a/apps/vendor-gate/src/api/public-api.ts\\n+++ b/apps/vendor-gate/src/api/public-api.ts\\n@@ -57 +57 @@ export const getFuturesContracts = (\\n-> => requestPublic('GET', `/api/v4/futures/${settle}/contracts`, params);\\n+> => requestPublic('GET', `/futures/${settle}/contracts`, params);\\n@@ -76 +76 @@ export const getFutureFundingRate = (\\n-> => requestPublic('GET', `/api/v4/futures/${settle}/funding_rate`, params);\\n+> => requestPublic('GET', `/futures/${settle}/funding_rate`, params);\\n@@ -105 +105 @@ export const getFuturesOrderBook = async (\\n-    requestPublic('GET', `/api/v4/futures/${settle}/order_book`, params),\\n+    requestPublic('GET', `/futures/${settle}/order_book`, params),\\n@@ -140 +140 @@ export const getFuturesTickers = (\\n-> => requestPublic('GET', `/api/v4/futures/${settle}/tickers`, params);\\n+> => requestPublic('GET', `/futures/${settle}/tickers`, params);\\n@@ -170 +170 @@ export const getSpotTickers = (params: {\\n-> => requestPublic('GET', `/api/v4/spot/tickers`, params);\\n+> => requestPublic('GET', `/spot/tickers`, params);\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-gate/src/services/markets/product.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/vendor-gate/src/services/markets/product.ts b/apps/vendor-gate/src/services/markets/product.ts\\nindex 64b6c0758..217bf64b3 100644\\n--- a/apps/vendor-gate/src/services/markets/product.ts\\n+++ b/apps/vendor-gate/src/services/markets/product.ts\\n@@ -1 +1 @@\\n-import { createProductCache } from '@yuants/data-product';\\n+import { createClientProductCache } from '@yuants/data-product';\\n@@ -6 +6 @@ import { getFuturesContracts, getSpotCurrencyPairs } from '../../api/public-api'\\n-export const productCache = createProductCache(Terminal.fromNodeEnv());\\n+export const productCache = createClientProductCache(Terminal.fromNodeEnv());\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"productCache\",\n+              \"code\": \"export const productCache = createClientProductCache(Terminal.fromNodeEnv());\",\n+              \"lineStart\": 6,\n+              \"lineEnd\": 7\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/src/services/orders/listOrders.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/vendor-gate/src/services/orders/listOrders.ts b/apps/vendor-gate/src/services/orders/listOrders.ts\\nindex 9e4bd2c53..cc59845c6 100644\\n--- a/apps/vendor-gate/src/services/orders/listOrders.ts\\n+++ b/apps/vendor-gate/src/services/orders/listOrders.ts\\n@@ -3 +3 @@ import { getFuturesOrders, ICredential } from '../../api/private-api';\\n-import { decodePath } from '@yuants/utils';\\n+import { decodePath, newError } from '@yuants/utils';\\n@@ -16,0 +17 @@ export const listOrders = async (credential: ICredential) => {\\n+  if (Array.isArray(orders) === false) throw newError('InvalidResponse', { orders });\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-huobi/src/services/product.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/vendor-huobi/src/services/product.ts b/apps/vendor-huobi/src/services/product.ts\\nindex 314f35055..096feb6e1 100644\\n--- a/apps/vendor-huobi/src/services/product.ts\\n+++ b/apps/vendor-huobi/src/services/product.ts\\n@@ -1 +1 @@\\n-import { createProductCache, IProduct } from '@yuants/data-product';\\n+import { createClientProductCache, IProduct } from '@yuants/data-product';\\n@@ -90 +90 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-export const productCache = createProductCache(terminal);\\n+export const productCache = createClientProductCache(terminal);\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"productCache\",\n+              \"code\": \"export const productCache = createClientProductCache(terminal);\",\n+              \"lineStart\": 90,\n+              \"lineEnd\": 91\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-account-composer/2025-12-07-21-35.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/common/changes/@yuants/app-account-composer/2025-12-07-21-35.json b/common/changes/@yuants/app-account-composer/2025-12-07-21-35.json\\nnew file mode 100644\\nindex 000000000..c43f1f90c\\n--- /dev/null\\n+++ b/common/changes/@yuants/app-account-composer/2025-12-07-21-35.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/app-account-composer\\\",\\n+      \\\"comment\\\": \\\"fix\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/app-account-composer\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-07-21-35.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-07-21-35.json b/common/changes/@yuants/vendor-gate/2025-12-07-21-35.json\\nnew file mode 100644\\nindex 000000000..37363017b\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-07-21-35.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"fix api\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/2025-12-07-21-35.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/common/changes/@yuants/vendor-huobi/2025-12-07-21-35.json b/common/changes/@yuants/vendor-huobi/2025-12-07-21-35.json\\nnew file mode 100644\\nindex 000000000..8e509e28d\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-huobi/2025-12-07-21-35.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\",\\n+      \\\"comment\\\": \\\"fix api\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\",\n+      \"short\": \"4d9c58da8\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-08 07:10:24 +0800\",\n+      \"subject\": \"chore: bump version (#2253)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/account-composer/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 07:10:24 2025 +0800\\n\\n    chore: bump version (#2253)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/account-composer/CHANGELOG.json b/apps/account-composer/CHANGELOG.json\\nindex e19c039ba..e71e6097d 100644\\n--- a/apps/account-composer/CHANGELOG.json\\n+++ b/apps/account-composer/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.10\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-account-composer_v0.7.10\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 22:20:53 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/account-composer/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 07:10:24 2025 +0800\\n\\n    chore: bump version (#2253)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/account-composer/CHANGELOG.md b/apps/account-composer/CHANGELOG.md\\nindex 17fbe1f65..eb98f70b3 100644\\n--- a/apps/account-composer/CHANGELOG.md\\n+++ b/apps/account-composer/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 22:20:53 GMT and should not be manually modified.\\n+\\n+## 0.7.10\\n+Sun, 07 Dec 2025 22:20:53 GMT\\n+\\n+### Patches\\n+\\n+- fix\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/account-composer/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 07:10:24 2025 +0800\\n\\n    chore: bump version (#2253)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/account-composer/package.json b/apps/account-composer/package.json\\nindex ad86d0372..9e720cf14 100644\\n--- a/apps/account-composer/package.json\\n+++ b/apps/account-composer/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.9\\\",\\n+  \\\"version\\\": \\\"0.7.10\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 07:10:24 2025 +0800\\n\\n    chore: bump version (#2253)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\\nindex 8d8cedc67..0963c4a2a 100644\\n--- a/apps/vendor-gate/CHANGELOG.json\\n+++ b/apps/vendor-gate/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.4.20\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-gate_v0.4.20\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 22:20:53 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix api\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 07:10:24 2025 +0800\\n\\n    chore: bump version (#2253)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\\nindex 5fe2460d9..4b4bddf54 100644\\n--- a/apps/vendor-gate/CHANGELOG.md\\n+++ b/apps/vendor-gate/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 22:20:53 GMT and should not be manually modified.\\n+\\n+## 0.4.20\\n+Sun, 07 Dec 2025 22:20:53 GMT\\n+\\n+### Patches\\n+\\n+- fix api\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 07:10:24 2025 +0800\\n\\n    chore: bump version (#2253)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\\nindex cca4b3c50..edbe9859e 100644\\n--- a/apps/vendor-gate/package.json\\n+++ b/apps/vendor-gate/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.19\\\",\\n+  \\\"version\\\": \\\"0.4.20\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 07:10:24 2025 +0800\\n\\n    chore: bump version (#2253)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.json b/apps/vendor-huobi/CHANGELOG.json\\nindex c1e50492b..ba0f8c513 100644\\n--- a/apps/vendor-huobi/CHANGELOG.json\\n+++ b/apps/vendor-huobi/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.15.10\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-huobi_v0.15.10\\\",\\n+      \\\"date\\\": \\\"Sun, 07 Dec 2025 22:20:53 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix api\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 07:10:24 2025 +0800\\n\\n    chore: bump version (#2253)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.md b/apps/vendor-huobi/CHANGELOG.md\\nindex e5cc40aa4..6e5c9a104 100644\\n--- a/apps/vendor-huobi/CHANGELOG.md\\n+++ b/apps/vendor-huobi/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\\n+This log was last generated on Sun, 07 Dec 2025 22:20:53 GMT and should not be manually modified.\\n+\\n+## 0.15.10\\n+Sun, 07 Dec 2025 22:20:53 GMT\\n+\\n+### Patches\\n+\\n+- fix api\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 07:10:24 2025 +0800\\n\\n    chore: bump version (#2253)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/package.json b/apps/vendor-huobi/package.json\\nindex ca4859ed2..243b3378c 100644\\n--- a/apps/vendor-huobi/package.json\\n+++ b/apps/vendor-huobi/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.15.9\\\",\\n+  \\\"version\\\": \\\"0.15.10\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/app-account-composer/2025-12-07-21-35.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 07:10:24 2025 +0800\\n\\n    chore: bump version (#2253)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/app-account-composer/2025-12-07-21-35.json b/common/changes/@yuants/app-account-composer/2025-12-07-21-35.json\\ndeleted file mode 100644\\nindex c43f1f90c..000000000\\n--- a/common/changes/@yuants/app-account-composer/2025-12-07-21-35.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/app-account-composer\\\",\\n-      \\\"comment\\\": \\\"fix\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/app-account-composer\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-account-composer/{main_2025-12-07-16-38.json => main_2025-12-07-22-20.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-07-21-35.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 07:10:24 2025 +0800\\n\\n    chore: bump version (#2253)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-07-21-35.json b/common/changes/@yuants/vendor-gate/2025-12-07-21-35.json\\ndeleted file mode 100644\\nindex 37363017b..000000000\\n--- a/common/changes/@yuants/vendor-gate/2025-12-07-21-35.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n-      \\\"comment\\\": \\\"fix api\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/{main_2025-12-07-16-38.json => main_2025-12-07-22-20.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/2025-12-07-21-35.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 4d9c58da83752ba00f09e32e2bebbfd6e9c63a34\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Mon Dec 8 07:10:24 2025 +0800\\n\\n    chore: bump version (#2253)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-huobi/2025-12-07-21-35.json b/common/changes/@yuants/vendor-huobi/2025-12-07-21-35.json\\ndeleted file mode 100644\\nindex 8e509e28d..000000000\\n--- a/common/changes/@yuants/vendor-huobi/2025-12-07-21-35.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\",\\n-      \\\"comment\\\": \\\"fix api\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/{main_2025-12-07-16-38.json => main_2025-12-07-22-20.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    }\n+  ],\n+  \"analysis\": {\n+    \"domains\": [\n+      {\n+        \"name\": \"API请求优化与限速\",\n+        \"commits\": [\n+          \"790b62bff\",\n+          \"1c8dab325\",\n+          \"94b0fdc84\",\n+          \"82990304e\",\n+          \"540b69760\",\n+          \"a083a19a3\",\n+          \"1b048f71f\"\n+        ],\n+        \"files\": [\n+          \"apps/virtual-exchange/src/credential.ts\",\n+          \"common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\",\n+          \"apps/vendor-okx/src/trade.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\",\n+          \"common/changes/@yuants/data-account/2025-12-07-16-26.json\",\n+          \"common/changes/@yuants/exchange/2025-12-07-16-26.json\",\n+          \"libraries/data-account/etc/data-account.api.md\",\n+          \"libraries/data-account/src/interface.ts\",\n+          \"libraries/exchange/src/index.ts\",\n+          \"apps/host/src/host-manager.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"安全与鉴权\",\n+        \"commits\": [\n+          \"790b62bff\",\n+          \"1c8dab325\",\n+          \"94b0fdc84\",\n+          \"82990304e\",\n+          \"540b69760\",\n+          \"a083a19a3\",\n+          \"1b048f71f\"\n+        ],\n+        \"files\": [\n+          \"apps/virtual-exchange/src/credential.ts\",\n+          \"common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\",\n+          \"apps/vendor-okx/src/trade.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\",\n+          \"common/changes/@yuants/data-account/2025-12-07-16-26.json\",\n+          \"common/changes/@yuants/exchange/2025-12-07-16-26.json\",\n+          \"libraries/data-account/etc/data-account.api.md\",\n+          \"libraries/data-account/src/interface.ts\",\n+          \"libraries/exchange/src/index.ts\",\n+          \"apps/host/src/host-manager.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"订单与交易\",\n+        \"commits\": [\n+          \"790b62bff\",\n+          \"1c8dab325\",\n+          \"94b0fdc84\",\n+          \"88cf1511d\",\n+          \"82990304e\",\n+          \"540b69760\",\n+          \"a083a19a3\",\n+          \"1b048f71f\"\n+        ],\n+        \"files\": [\n+          \"apps/virtual-exchange/src/credential.ts\",\n+          \"common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\",\n+          \"apps/vendor-okx/src/trade.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\",\n+          \"common/changes/@yuants/data-account/2025-12-07-16-26.json\",\n+          \"common/changes/@yuants/exchange/2025-12-07-16-26.json\",\n+          \"libraries/data-account/etc/data-account.api.md\",\n+          \"libraries/data-account/src/interface.ts\",\n+          \"libraries/exchange/src/index.ts\",\n+          \"apps/account-composer/CHANGELOG.json\"\n+        ]\n+      },\n+      {\n+        \"name\": \"账户管理\",\n+        \"commits\": [\n+          \"790b62bff\",\n+          \"1c8dab325\",\n+          \"94b0fdc84\",\n+          \"88cf1511d\",\n+          \"82990304e\",\n+          \"540b69760\",\n+          \"a083a19a3\",\n+          \"1b048f71f\",\n+          \"4d9c58da8\"\n+        ],\n+        \"files\": [\n+          \"apps/virtual-exchange/src/credential.ts\",\n+          \"common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\",\n+          \"apps/vendor-okx/src/trade.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\",\n+          \"common/changes/@yuants/data-account/2025-12-07-16-26.json\",\n+          \"common/changes/@yuants/exchange/2025-12-07-16-26.json\",\n+          \"libraries/data-account/etc/data-account.api.md\",\n+          \"libraries/data-account/src/interface.ts\",\n+          \"libraries/exchange/src/index.ts\",\n+          \"apps/account-composer/CHANGELOG.json\"\n+        ]\n+      },\n+      {\n+        \"name\": \"市场数据\",\n+        \"commits\": [\n+          \"790b62bff\",\n+          \"1c8dab325\",\n+          \"94b0fdc84\",\n+          \"82990304e\",\n+          \"540b69760\",\n+          \"a083a19a3\",\n+          \"1b048f71f\"\n+        ],\n+        \"files\": [\n+          \"apps/virtual-exchange/src/credential.ts\",\n+          \"common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\",\n+          \"apps/vendor-okx/src/trade.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\",\n+          \"common/changes/@yuants/data-account/2025-12-07-16-26.json\",\n+          \"common/changes/@yuants/exchange/2025-12-07-16-26.json\",\n+          \"libraries/data-account/etc/data-account.api.md\",\n+          \"libraries/data-account/src/interface.ts\",\n+          \"libraries/exchange/src/index.ts\",\n+          \"apps/host/src/host-manager.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"配置与环境\",\n+        \"commits\": [\n+          \"790b62bff\",\n+          \"39712dbdd\",\n+          \"1c8dab325\",\n+          \"6e9af0f2a\",\n+          \"94b0fdc84\",\n+          \"88cf1511d\",\n+          \"82990304e\",\n+          \"efe8a5925\",\n+          \"540b69760\",\n+          \"a083a19a3\",\n+          \"88632ee3c\",\n+          \"1b048f71f\",\n+          \"4d9c58da8\"\n+        ],\n+        \"files\": [\n+          \"apps/virtual-exchange/src/credential.ts\",\n+          \"common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\",\n+          \"apps/virtual-exchange/CHANGELOG.json\",\n+          \"apps/virtual-exchange/CHANGELOG.md\",\n+          \"apps/virtual-exchange/package.json\",\n+          \"common/changes/@yuants/app-virtual-exchange/{main_2025-12-04-07-31.json => main_2025-12-07-14-55.json}\",\n+          \"apps/vendor-okx/src/trade.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\",\n+          \"apps/vendor-okx/CHANGELOG.json\",\n+          \"apps/vendor-okx/CHANGELOG.md\"\n+        ]\n+      },\n+      {\n+        \"name\": \"文档\",\n+        \"commits\": [\n+          \"39712dbdd\",\n+          \"6e9af0f2a\",\n+          \"94b0fdc84\",\n+          \"88cf1511d\",\n+          \"efe8a5925\",\n+          \"540b69760\",\n+          \"88632ee3c\",\n+          \"4d9c58da8\"\n+        ],\n+        \"files\": [\n+          \"apps/virtual-exchange/CHANGELOG.json\",\n+          \"apps/virtual-exchange/CHANGELOG.md\",\n+          \"apps/virtual-exchange/package.json\",\n+          \"common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\",\n+          \"common/changes/@yuants/app-virtual-exchange/{main_2025-12-04-07-31.json => main_2025-12-07-14-55.json}\",\n+          \"apps/vendor-okx/CHANGELOG.json\",\n+          \"apps/vendor-okx/CHANGELOG.md\",\n+          \"apps/vendor-okx/package.json\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\",\n+          \"common/changes/@yuants/vendor-okx/{main_2025-12-06-17-00.json => main_2025-12-07-15-23.json}\"\n+        ]\n+      },\n+      {\n+        \"name\": \"接口重构\",\n+        \"commits\": [\n+          \"94b0fdc84\",\n+          \"540b69760\",\n+          \"a083a19a3\",\n+          \"1b048f71f\"\n+        ],\n+        \"files\": [\n+          \"common/changes/@yuants/data-account/2025-12-07-16-26.json\",\n+          \"common/changes/@yuants/exchange/2025-12-07-16-26.json\",\n+          \"libraries/data-account/etc/data-account.api.md\",\n+          \"libraries/data-account/src/interface.ts\",\n+          \"libraries/exchange/src/index.ts\",\n+          \"apps/vendor-aster/SESSION_NOTES.md\",\n+          \"apps/vendor-aster/src/api/public-api.ts\",\n+          \"apps/vendor-aster/src/services/markets/product.ts\",\n+          \"common/changes/@yuants/vendor-aster/2025-12-07-17-51.json\",\n+          \"apps/vendor-binance/src/api/client.ts\"\n+        ]\n+      }\n+    ],\n+    \"riskIndicators\": [\n+      {\n+        \"type\": \"no_tests\",\n+        \"severity\": \"medium\",\n+        \"details\": \"包含功能或修复提交但未见测试文件更新\",\n+        \"commits\": []\n+      },\n+      {\n+        \"type\": \"api_change\",\n+        \"severity\": \"high\",\n+        \"details\": \"3 个提交修改了API或接口定义\",\n+        \"commits\": [\n+          \"540b69760\",\n+          \"a083a19a3\",\n+          \"1b048f71f\"\n+        ]\n+      }\n+    ]\n+  },\n+  \"metadata\": {\n+    \"tool\": \"git-changes-reporter\",\n+    \"version\": \"3.0.0\",\n+    \"repository\": \"/home/runner/work/Yuan/Yuan\"\n+  }\n+}\n\\ No newline at end of file\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "credentialIdCache",
              "code": "\"patch\": \"commit 790b62bff10f863e7d94786341b85c72c946c8e9\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 22:54:41 2025 +0800\\n\\n    feat: implement credential ID caching and update credential retrieval logic (#2241)\\n\\ndiff --git a/apps/virtual-exchange/src/credential.ts b/apps/virtual-exchange/src/credential.ts\\nindex e03200075..f83924675 100644\\n--- a/apps/virtual-exchange/src/credential.ts\\n+++ b/apps/virtual-exchange/src/credential.ts\\n@@ -24,0 +25,6 @@ interface ICredentialResolvedStatus {\\n+const credentialIdCache = createCache(async (credentialKey: string) => {\\n+  const credential = JSON.parse(credentialKey) as IExchangeCredential;\\n+  const res = await getCredentialId(terminal, credential);\\n+  return res.data;\\n+});\\n+\\n@@ -42,3 +48,4 @@ export const listAllCredentials = async () => {\\n-        const res = await getCredentialId(terminal, credential);\\n-        const credentialId = res.data;\\n-        result.credentialId = credentialId;\\n+        const res = await credentialIdCache.query(JSON.stringify(credential));\\n+        if (res) {\\n+          result.credentialId = res;\\n+        }\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"credentialIdCache\",",
              "lineStart": 221,
              "lineEnd": 225
            },
            {
              "type": "function",
              "name": "credentialIdCache",
              "code": "  \"code\": \"const credentialIdCache = createCache(async (credentialKey: string) => {\",\n  \"lineStart\": 25,\n  \"lineEnd\": 25\n},\n{\n  \"type\": \"function\",\n  \"name\": \"credential\",",
              "lineStart": 226,
              "lineEnd": 232
            },
            {
              "type": "function",
              "name": "credential",
              "code": "  \"code\": \"const credential = JSON.parse(credentialKey) as IExchangeCredential;\",\n  \"lineStart\": 26,\n  \"lineEnd\": 26\n},\n{\n  \"type\": \"function\",\n  \"name\": \"res\",",
              "lineStart": 233,
              "lineEnd": 239
            },
            {
              "type": "function",
              "name": "res",
              "code": "  \"code\": \"  const res = await getCredentialId(terminal, credential);\\n  return res.data;\\n});\\n\",\n  \"lineStart\": 27,\n  \"lineEnd\": 47\n},\n{\n  \"type\": \"function\",\n  \"name\": \"res\",",
              "lineStart": 240,
              "lineEnd": 246
            },
            {
              "type": "function",
              "name": "res",
              "code": "        \"code\": \"const res = await credentialIdCache.query(JSON.stringify(credential));\\nif (res) {\\n  result.credentialId = res;\\n}\",\n        \"lineStart\": 48,\n        \"lineEnd\": 52\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit 790b62bff10f863e7d94786341b85c72c946c8e9\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 22:54:41 2025 +0800\\n\\n    feat: implement credential ID caching and update credential retrieval logic (#2241)\\n\\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json b/common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\\nnew file mode 100644\\nindex 000000000..6bf18df2e\\n--- /dev/null\\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-07-14-45.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\",\\n+      \\\"comment\\\": \\\"fix\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 247,
              "lineEnd": 335
            },
            {
              "type": "function",
              "name": "tradeParser",
              "code": "      \"patch\": \"commit 1c8dab3257f773379b3858a869a9c125aa71b5f6\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sun Dec 7 23:12:15 2025 +0800\\n\\n    feat: fix trade (#2243)\\n\\ndiff --git a/apps/vendor-okx/src/trade.ts b/apps/vendor-okx/src/trade.ts\\nindex dac18a969..17a2afcdb 100644\\n--- a/apps/vendor-okx/src/trade.ts\\n+++ b/apps/vendor-okx/src/trade.ts\\n@@ -21 +21 @@ const tradeParser = async (accountId: string, params: Record<string, string>): P\\n-      productIdSet.add(encodePath(item.instType, item.instId));\\n+      productIdSet.add(encodePath('OKX', item.instType, item.instId));\\n@@ -39 +38,0 @@ const tradeParser = async (accountId: string, params: Record<string, string>): P\\n-\\n\",\n      \"codeSnippets\": []\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\",\n      \"changeType\": \"added\",\n      \"patch\": \"commit 1c8dab3257f773379b3858a869a9c125aa71b5f6\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sun Dec 7 23:12:15 2025 +0800\\n\\n    feat: fix trade (#2243)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-07-15-10.json b/common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\\nnew file mode 100644\\nindex 000000000..872ae24fd\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-07-15-10.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"fix trade\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n      \"codeSnippets\": []\n    }\n  ]\n},\n{\n  \"hash\": \"6e9af0f2ae1d3b01fa5441d3fbb726cf28008a94\",",
              "lineStart": 336,
              "lineEnd": 409
            },
            {
              "type": "interface",
              "name": "with",
              "code": "\"subject\": \"feat: enhance IPosition interface with additional fields and update exchange logic for position handling (#2245)\",\n\"conventionalCommit\": {\n  \"type\": \"feat\",\n  \"scope\": null,\n  \"breaking\": false\n},\n\"files\": [\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/data-account/2025-12-07-16-26.json\",\n    \"changeType\": \"added\",",
              "lineStart": 410,
              "lineEnd": 421
            },
            {
              "type": "interface",
              "name": "with",
              "code": "  \"patch\": \"commit 94b0fdc8489c9d7fcbc344c5ab96fe832afe4d17\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:32:46 2025 +0800\\n\\n    feat: enhance IPosition interface with additional fields and update exchange logic for position handling (#2245)\\n\\ndiff --git a/common/changes/@yuants/data-account/2025-12-07-16-26.json b/common/changes/@yuants/data-account/2025-12-07-16-26.json\\nnew file mode 100644\\nindex 000000000..1ceedc6cb\\n--- /dev/null\\n+++ b/common/changes/@yuants/data-account/2025-12-07-16-26.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/data-account\\\",\\n+      \\\"comment\\\": \\\"add more fields to position\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/data-account\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/exchange/2025-12-07-16-26.json\",\n  \"changeType\": \"added\",",
              "lineStart": 422,
              "lineEnd": 429
            },
            {
              "type": "interface",
              "name": "with",
              "code": "  \"patch\": \"commit 94b0fdc8489c9d7fcbc344c5ab96fe832afe4d17\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:32:46 2025 +0800\\n\\n    feat: enhance IPosition interface with additional fields and update exchange logic for position handling (#2245)\\n\\ndiff --git a/common/changes/@yuants/exchange/2025-12-07-16-26.json b/common/changes/@yuants/exchange/2025-12-07-16-26.json\\nnew file mode 100644\\nindex 000000000..bff513a53\\n--- /dev/null\\n+++ b/common/changes/@yuants/exchange/2025-12-07-16-26.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/exchange\\\",\\n+      \\\"comment\\\": \\\"add polyfill to position\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/exchange\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 5,\n  \"deletions\": 0,\n  \"path\": \"libraries/data-account/etc/data-account.api.md\",\n  \"changeType\": \"added\",",
              "lineStart": 430,
              "lineEnd": 437
            },
            {
              "type": "interface",
              "name": "with",
              "code": "  \"patch\": \"commit 94b0fdc8489c9d7fcbc344c5ab96fe832afe4d17\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:32:46 2025 +0800\\n\\n    feat: enhance IPosition interface with additional fields and update exchange logic for position handling (#2245)\\n\\ndiff --git a/libraries/data-account/etc/data-account.api.md b/libraries/data-account/etc/data-account.api.md\\nindex 1606ae578..6e7e56eff 100644\\n--- a/libraries/data-account/etc/data-account.api.md\\n+++ b/libraries/data-account/etc/data-account.api.md\\n@@ -62,0 +63 @@ export interface IPosition {\\n+    base_currency?: string;\\r\\n@@ -68,0 +70 @@ export interface IPosition {\\n+    free_size?: string;\\r\\n@@ -70,0 +73 @@ export interface IPosition {\\n+    liquidation_price?: string;\\r\\n@@ -74,0 +78 @@ export interface IPosition {\\n+    quote_currency?: string;\\r\\n@@ -76,0 +81 @@ export interface IPosition {\\n+    size?: string;\\r\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 27,\n  \"deletions\": 0,\n  \"path\": \"libraries/data-account/src/interface.ts\",\n  \"changeType\": \"added\",",
              "lineStart": 438,
              "lineEnd": 445
            },
            {
              "type": "interface",
              "name": "with",
              "code": "  \"patch\": \"commit 94b0fdc8489c9d7fcbc344c5ab96fe832afe4d17\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:32:46 2025 +0800\\n\\n    feat: enhance IPosition interface with additional fields and update exchange logic for position handling (#2245)\\n\\ndiff --git a/libraries/data-account/src/interface.ts b/libraries/data-account/src/interface.ts\\nindex 55743add4..521041595 100644\\n--- a/libraries/data-account/src/interface.ts\\n+++ b/libraries/data-account/src/interface.ts\\n@@ -41,0 +42,27 @@ export interface IPosition {\\n+\\n+  /**\\n+   * Base currency of the position.\\n+   * 头寸的基础货币\\n+   */\\n+  base_currency?: string;\\n+  /**\\n+   * Quote currency of the position.\\n+   * 头寸的报价货币\\n+   */\\n+  quote_currency?: string;\\n+  /**\\n+   * Size of the position. negative for short positions. Normalized by value_scale.\\n+   * 净头寸的大小，已经按照 value_scale 归一化。空头为负数\\n+   */\\n+  size?: string;\\n+  /**\\n+   * Free size of the position. Negative for short positions. Normalized by value_scale.\\n+   * 净头寸的可用大小，已经按照 value_scale 归一化。空头为负数\\n+   */\\n+  free_size?: string;\\n+\\n+  /**\\n+   * Liquidation price of the position. (Approximate value). Due to the complexity of margin calculation mechanisms, it is usually provided by the exchange.\\n+   * 持仓的强平价格 (预估值)，由于保证金计算机制复杂，通常由交易所给出。\\n+   */\\n+  liquidation_price?: string;\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 13,\n  \"deletions\": 0,\n  \"path\": \"libraries/exchange/src/index.ts\",\n  \"changeType\": \"added\",",
              "lineStart": 446,
              "lineEnd": 453
            },
            {
              "type": "function",
              "name": "provideExchangeServices",
              "code": "      \"patch\": \"commit 94b0fdc8489c9d7fcbc344c5ab96fe832afe4d17\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:32:46 2025 +0800\\n\\n    feat: enhance IPosition interface with additional fields and update exchange logic for position handling (#2245)\\n\\ndiff --git a/libraries/exchange/src/index.ts b/libraries/exchange/src/index.ts\\nindex be6004e00..b5451e10d 100644\\n--- a/libraries/exchange/src/index.ts\\n+++ b/libraries/exchange/src/index.ts\\n@@ -185,0 +186,13 @@ export const provideExchangeServices = <T>(terminal: Terminal, exchange: IExchan\\n+          if (theProduct.base_currency) {\\n+            pos.base_currency = theProduct.base_currency;\\n+          }\\n+          if (theProduct.quote_currency) {\\n+            pos.quote_currency = theProduct.quote_currency;\\n+          }\\n+          if (pos.size === undefined && pos.volume !== undefined && pos.direction !== undefined) {\\n+            pos.size = (pos.direction === 'LONG' ? 1 : -1) * pos.volume * (theProduct.value_scale || 1) + '';\\n+          }\\n+          if (pos.free_size === undefined && pos.free_volume !== undefined && pos.direction !== undefined) {\\n+            pos.free_size =\\n+              (pos.direction === 'LONG' ? 1 : -1) * pos.free_volume * (theProduct.value_scale || 1) + '';\\n+          }\\n\",\n      \"codeSnippets\": []\n    }\n  ]\n},\n{\n  \"hash\": \"88cf1511d83591dc886853517ec08e080eb23c13\",\n  \"short\": \"88cf1511d\",\n  \"author\": \"humblelittlec1[bot]\",\n  \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n  \"authoredAt\": \"2025-12-08 00:45:54 +0800\",\n  \"subject\": \"chore: bump version (#2246)\",\n  \"conventionalCommit\": {\n    \"type\": \"chore\",\n    \"scope\": null,",
              "lineStart": 454,
              "lineEnd": 1275
            },
            {
              "type": "function",
              "name": "createNodeJSHostManager",
              "code": "\"patch\": \"commit 82990304e1bd1b2c86bb9237c236598ce5522a42\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:59:53 2025 +0800\\n\\n    feat: support HTTP call service and add parseBodyText utility function (#2247)\\n\\ndiff --git a/apps/host/src/host-manager.ts b/apps/host/src/host-manager.ts\\nindex 529c8a156..a558402b7 100644\\n--- a/apps/host/src/host-manager.ts\\n+++ b/apps/host/src/host-manager.ts\\n@@ -1,2 +1,2 @@\\n-import { GlobalPrometheusRegistry, ITerminalInfo, Terminal } from '@yuants/protocol';\\n-import { formatTime, UUID, verifyMessage } from '@yuants/utils';\\n+import { GlobalPrometheusRegistry, ITerminalInfo, ITerminalMessage, Terminal } from '@yuants/protocol';\\n+import { formatTime, newError, observableToAsyncIterable, UUID, verifyMessage } from '@yuants/utils';\\n@@ -27,0 +28 @@ import WebSocket from 'ws';\\n+import { parseBodyText } from './utils/parseBodyText';\\n@@ -342,19 +343,10 @@ export const createNodeJSHostManager = () => {\\n-    const theUrl = new URL(req.url || '', 'http://localhost:8888');\\n-    const x = resolveHost(req);\\n-    if (!x) {\\n-      MetricsHostManagerConnectionErrorCounter.add(1);\\n-      res.writeHead(401);\\n-      res.end('Unauthorized: ' + req.url);\\n-      return;\\n-    }\\n-    if (theUrl.pathname.startsWith('/external/')) {\\n-      const reqBody = await new Promise<string>((resolve) => {\\n-        const body: Uint8Array[] = [];\\n-        req.on('data', (chunk) => {\\n-          body.push(chunk);\\n-        });\\n-        req.on('end', () => {\\n-          const reqBody = Buffer.concat(body).toString();\\n-          resolve(reqBody);\\n-        });\\n-      });\\n+    try {\\n+      console.info(formatTime(Date.now()), 'HTTP Request', req.method, req.url);\\n+      const theUrl = new URL(req.url || '', 'http://localhost:8888');\\n+      const x = resolveHost(req);\\n+      if (!x) {\\n+        MetricsHostManagerConnectionErrorCounter.add(1);\\n+        res.writeHead(401);\\n+        res.end('Unauthorized: ' + req.url);\\n+        return;\\n+      }\\n@@ -362,8 +354,49 @@ export const createNodeJSHostManager = () => {\\n-      const reqJson = {\\n-        method: req.method,\\n-        url: req.url,\\n-        pathname: theUrl.pathname,\\n-        headers: req.headers,\\n-        body: reqBody,\\n-        host_id: x?.host.host_id,\\n-      };\\n+      // 内部 API 请求 (POST /request)，路由到内部服务\\n+      if (theUrl.pathname === '/request') {\\n+        if (req.method === 'OPTIONS') {\\n+          res.writeHead(204, {\\n+            'Access-Control-Allow-Origin': '*',\\n+            'Access-Control-Allow-Headers': '*',\\n+            'Access-Control-Allow-Methods': '*',\\n+          });\\n+          res.end();\\n+          return;\\n+        }\\n+        if (req.method === 'POST') {\\n+          const _reqMsg = await parseBodyText(req);\\n+          const reqMsg = JSON.parse(_reqMsg) as ITerminalMessage;\\n+          if (!reqMsg.method) throw newError('INVALID_REQUEST', { reason: 'method is required' });\\n+          if (!reqMsg.req) throw newError('INVALID_REQUEST', { reason: 'req is required' });\\n+\\n+          res.writeHead(200, {\\n+            'Content-Type': 'application/x-ndjson',\\n+            'Cache-Control': 'no-cache',\\n+            Connection: 'keep-alive',\\n+            'Access-Control-Allow-Origin': '*',\\n+          });\\n+\\n+          // 按照 NDJSON 格式封装请求消息\\n+          for await (const msg of observableToAsyncIterable(\\n+            x.host.host_terminal.client.requestService(reqMsg.method, reqMsg.req),\\n+          )) {\\n+            res.write(JSON.stringify(msg) + '\\\\n');\\n+          }\\n+          res.end();\\n+\\n+          return;\\n+        }\\n+        return;\\n+      }\\n+\\n+      // 外部请求 (/external/) 格式由外部系统决定，直接转发给 Host 处理 (例如 WebHook)\\n+      if (theUrl.pathname.startsWith('/external/')) {\\n+        const reqBody = await parseBodyText(req);\\n+\\n+        const reqJson = {\\n+          method: req.method,\\n+          url: req.url,\\n+          pathname: theUrl.pathname,\\n+          headers: req.headers,\\n+          body: reqBody,\\n+          host_id: x?.host.host_id,\\n+        };\\n@@ -371 +403,0 @@ export const createNodeJSHostManager = () => {\\n-      try {\\n@@ -382,4 +413,0 @@ export const createNodeJSHostManager = () => {\\n-        return;\\n-      } catch (e) {\\n-        res.writeHead(500);\\n-        res.end(`${e}`);\\n@@ -387,0 +416,3 @@ export const createNodeJSHostManager = () => {\\n+    } catch (err) {\\n+      res.writeHead(500);\\n+      res.end(`Internal Server Error: ${err}`);\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"theUrl\",",
              "lineStart": 1276,
              "lineEnd": 1280
            },
            {
              "type": "function",
              "name": "theUrl",
              "code": "  \"code\": \"const theUrl = new URL(req.url || '', 'http://localhost:8888');\",\n  \"lineStart\": 345,\n  \"lineEnd\": 345\n},\n{\n  \"type\": \"function\",\n  \"name\": \"x\",",
              "lineStart": 1281,
              "lineEnd": 1287
            },
            {
              "type": "function",
              "name": "x",
              "code": "  \"code\": \"const x = resolveHost(req);\\nif (!x) {\\n  MetricsHostManagerConnectionErrorCounter.add(1);\\n  res.writeHead(401);\\n  res.end('Unauthorized: ' + req.url);\\n  return;\\n}\\n// 内部 API 请求 (POST /request)，路由到内部服务\\nif (theUrl.pathname === '/request') {\\n  if (req.method === 'OPTIONS') {\\n    res.writeHead(204, {\\n      'Access-Control-Allow-Origin': '*',\\n      'Access-Control-Allow-Headers': '*',\\n      'Access-Control-Allow-Methods': '*',\\n    });\",\n  \"lineStart\": 346,\n  \"lineEnd\": 365\n},\n{\n  \"type\": \"function\",\n  \"name\": \"_reqMsg\",",
              "lineStart": 1288,
              "lineEnd": 1294
            },
            {
              "type": "function",
              "name": "_reqMsg",
              "code": "  \"code\": \"const _reqMsg = await parseBodyText(req);\",\n  \"lineStart\": 366,\n  \"lineEnd\": 366\n},\n{\n  \"type\": \"function\",\n  \"name\": \"reqMsg\",",
              "lineStart": 1295,
              "lineEnd": 1301
            },
            {
              "type": "function",
              "name": "reqMsg",
              "code": "  \"code\": \"const reqMsg = JSON.parse(_reqMsg) as ITerminalMessage;\\nif (!reqMsg.method) throw newError('INVALID_REQUEST', { reason: 'method is required' });\\nif (!reqMsg.req) throw newError('INVALID_REQUEST', { reason: 'req is required' });\\n\\nres.writeHead(200, {\\n  'Content-Type': 'application/x-ndjson',\\n  'Cache-Control': 'no-cache',\\n  Connection: 'keep-alive',\\n  'Access-Control-Allow-Origin': '*',\\n});\\n\\n// 按照 NDJSON 格式封装请求消息\",\n  \"lineStart\": 367,\n  \"lineEnd\": 378\n},\n{\n  \"type\": \"function\",\n  \"name\": \"msg\",",
              "lineStart": 1302,
              "lineEnd": 1308
            },
            {
              "type": "function",
              "name": "msg",
              "code": "  \"code\": \"    for await (const msg of observableToAsyncIterable(\\n      x.host.host_terminal.client.requestService(reqMsg.method, reqMsg.req),\\n    )) {\\n      res.write(JSON.stringify(msg) + '\\\\n');\\n    }\\n    res.end();\\n\\n    return;\\n  }\\n  return;\\n}\\n\\n// 外部请求 (/external/) 格式由外部系统决定，直接转发给 Host 处理 (例如 WebHook)\\nif (theUrl.pathname.startsWith('/external/')) {\",\n  \"lineStart\": 379,\n  \"lineEnd\": 392\n},\n{\n  \"type\": \"function\",\n  \"name\": \"reqBody\",",
              "lineStart": 1309,
              "lineEnd": 1315
            },
            {
              "type": "function",
              "name": "reqBody",
              "code": "  \"code\": \"const reqBody = await parseBodyText(req);\\n\",\n  \"lineStart\": 393,\n  \"lineEnd\": 394\n},\n{\n  \"type\": \"function\",\n  \"name\": \"reqJson\",",
              "lineStart": 1316,
              "lineEnd": 1322
            },
            {
              "type": "function",
              "name": "reqJson",
              "code": "      \"code\": \"    const reqJson = {\\n      method: req.method,\\n      url: req.url,\\n      pathname: theUrl.pathname,\\n      headers: req.headers,\\n      body: reqBody,\\n      host_id: x?.host.host_id,\\n    };\\n} catch (err) {\\n  res.writeHead(500);\\n  res.end(`Internal Server Error: ${err}`);\",\n      \"lineStart\": 395,\n      \"lineEnd\": 419\n    }\n  ]\n},\n{\n  \"additions\": 14,\n  \"deletions\": 0,\n  \"path\": \"apps/host/src/utils/parseBodyText.ts\",\n  \"changeType\": \"added\",",
              "lineStart": 1323,
              "lineEnd": 1333
            },
            {
              "type": "function",
              "name": "parseBodyText",
              "code": "\"patch\": \"commit 82990304e1bd1b2c86bb9237c236598ce5522a42\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:59:53 2025 +0800\\n\\n    feat: support HTTP call service and add parseBodyText utility function (#2247)\\n\\ndiff --git a/apps/host/src/utils/parseBodyText.ts b/apps/host/src/utils/parseBodyText.ts\\nnew file mode 100644\\nindex 000000000..518422d74\\n--- /dev/null\\n+++ b/apps/host/src/utils/parseBodyText.ts\\n@@ -0,0 +1,14 @@\\n+import type { IncomingMessage } from 'http';\\n+\\n+export const parseBodyText = async (req: IncomingMessage): Promise<string> => {\\n+  return new Promise<string>((resolve) => {\\n+    const body: Uint8Array[] = [];\\n+    req.on('data', (chunk) => {\\n+      body.push(chunk);\\n+    });\\n+    req.on('end', () => {\\n+      const reqBody = Buffer.concat(body).toString();\\n+      resolve(reqBody);\\n+    });\\n+  });\\n+};\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"parseBodyText\",",
              "lineStart": 1334,
              "lineEnd": 1338
            },
            {
              "type": "function",
              "name": "parseBodyText",
              "code": "  \"code\": \"export const parseBodyText = async (req: IncomingMessage): Promise<string> => {\\n  return new Promise<string>((resolve) => {\",\n  \"lineStart\": 3,\n  \"lineEnd\": 4\n},\n{\n  \"type\": \"function\",\n  \"name\": \"body\",",
              "lineStart": 1339,
              "lineEnd": 1345
            },
            {
              "type": "function",
              "name": "body",
              "code": "  \"code\": \"const body: Uint8Array[] = [];\\nreq.on('data', (chunk) => {\\n  body.push(chunk);\\n});\\nreq.on('end', () => {\",\n  \"lineStart\": 5,\n  \"lineEnd\": 9\n},\n{\n  \"type\": \"function\",\n  \"name\": \"reqBody\",",
              "lineStart": 1346,
              "lineEnd": 1352
            },
            {
              "type": "function",
              "name": "reqBody",
              "code": "        \"code\": \"      const reqBody = Buffer.concat(body).toString();\\n      resolve(reqBody);\\n    });\\n  });\\n};\",\n        \"lineStart\": 10,\n        \"lineEnd\": 15\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/app-host/2025-12-07-16-58.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit 82990304e1bd1b2c86bb9237c236598ce5522a42\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 00:59:53 2025 +0800\\n\\n    feat: support HTTP call service and add parseBodyText utility function (#2247)\\n\\ndiff --git a/common/changes/@yuants/app-host/2025-12-07-16-58.json b/common/changes/@yuants/app-host/2025-12-07-16-58.json\\nnew file mode 100644\\nindex 000000000..f9a60eaaa\\n--- /dev/null\\n+++ b/common/changes/@yuants/app-host/2025-12-07-16-58.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/app-host\\\",\\n+      \\\"comment\\\": \\\"support HTTP call service\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/app-host\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 1353,
              "lineEnd": 1449
            },
            {
              "type": "function",
              "name": "BASE_URL",
              "code": "\"patch\": \"commit 540b69760084c1e6e7beb50e4014364733f445b0\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Mon Dec 8 02:02:30 2025 +0800\\n\\n    feat(vendor-aster): 添加现货产品支持，更新 API 接口以获取现货和永续交易对信息 (#2249)\\n\\ndiff --git a/apps/vendor-aster/src/api/public-api.ts b/apps/vendor-aster/src/api/public-api.ts\\nindex 4cd51f4b6..ced2ae976 100644\\n--- a/apps/vendor-aster/src/api/public-api.ts\\n+++ b/apps/vendor-aster/src/api/public-api.ts\\n@@ -1 +0,0 @@\\n-const BASE_URL = 'https://fapi.asterdex.com';\\n@@ -9,2 +8,7 @@ const terminal = Terminal.fromNodeEnv();\\n-const request = async <T>(method: string, endpoint: string, params: any = {}): Promise<T> => {\\n-  const url = new URL(BASE_URL);\\n+const request = async <T>(\\n+  method: string,\\n+  baseUrl: string,\\n+  endpoint: string,\\n+  params: any = {},\\n+): Promise<T> => {\\n+  const url = new URL(baseUrl);\\n@@ -28,0 +33 @@ const createApi =\\n+  (baseUrl: string) =>\\n@@ -31 +36,4 @@ const createApi =\\n-    request<TRes>(method, endpoint, params);\\n+    request<TRes>(method, baseUrl, endpoint, params);\\n+\\n+const createFutureApi = createApi('https://fapi.asterdex.com');\\n+const createSpotApi = createApi('https://sapi.asterdex.com');\\n@@ -38 +46 @@ const createApi =\\n-export const getFApiV1FundingRate = createApi<\\n+export const getFApiV1FundingRate = createFutureApi<\\n@@ -82 +90,8 @@ export interface IAsterExchangeInfo {\\n-export const getFApiV1ExchangeInfo = createApi<{}, IAsterExchangeInfo>('GET', '/fapi/v1/exchangeInfo');\\n+export const getFApiV1ExchangeInfo = createFutureApi<{}, IAsterExchangeInfo>('GET', '/fapi/v1/exchangeInfo');\\n+\\n+/**\\n+ * 获取现货交易对信息\\n+ *\\n+ * https://github.com/asterdex/api-docs/blob/master/aster-finance-spot-api_CN.md#L1080-L1145\\n+ */\\n+export const getApiV1ExchangeInfo = createSpotApi<{}, IAsterExchangeInfo>('GET', '/api/v1/exchangeInfo');\\n@@ -89 +104 @@ export const getFApiV1ExchangeInfo = createApi<{}, IAsterExchangeInfo>('GET', '/\\n-export const getFApiV1OpenInterest = createApi<\\n+export const getFApiV1OpenInterest = createFutureApi<\\n@@ -105 +120 @@ export const getFApiV1OpenInterest = createApi<\\n-export const getFApiV1TickerPrice = createApi<\\n+export const getFApiV1TickerPrice = createFutureApi<\\n@@ -118 +133 @@ export const getFApiV1TickerPrice = createApi<\\n-export const getFApiV1PremiumIndex = createApi<\\n+export const getFApiV1PremiumIndex = createFutureApi<\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"request\",",
              "lineStart": 1450,
              "lineEnd": 1454
            },
            {
              "type": "function",
              "name": "request",
              "code": "  \"code\": \"const request = async <T>(\\n  method: string,\\n  baseUrl: string,\\n  endpoint: string,\\n  params: any = {},\\n): Promise<T> => {\",\n  \"lineStart\": 8,\n  \"lineEnd\": 13\n},\n{\n  \"type\": \"function\",\n  \"name\": \"url\",",
              "lineStart": 1455,
              "lineEnd": 1461
            },
            {
              "type": "function",
              "name": "url",
              "code": "  \"code\": \"const url = new URL(baseUrl);\\n(baseUrl: string) =>\\n  request<TRes>(method, baseUrl, endpoint, params);\\n\",\n  \"lineStart\": 14,\n  \"lineEnd\": 37\n},\n{\n  \"type\": \"function\",\n  \"name\": \"createFutureApi\",",
              "lineStart": 1462,
              "lineEnd": 1468
            },
            {
              "type": "function",
              "name": "createFutureApi",
              "code": "  \"code\": \"const createFutureApi = createApi('https://fapi.asterdex.com');\",\n  \"lineStart\": 38,\n  \"lineEnd\": 38\n},\n{\n  \"type\": \"function\",\n  \"name\": \"createSpotApi\",",
              "lineStart": 1469,
              "lineEnd": 1475
            },
            {
              "type": "function",
              "name": "createSpotApi",
              "code": "  \"code\": \"const createSpotApi = createApi('https://sapi.asterdex.com');\",\n  \"lineStart\": 39,\n  \"lineEnd\": 45\n},\n{\n  \"type\": \"function\",\n  \"name\": \"getFApiV1FundingRate\",",
              "lineStart": 1476,
              "lineEnd": 1482
            },
            {
              "type": "function",
              "name": "getFApiV1FundingRate",
              "code": "  \"code\": \"export const getFApiV1FundingRate = createFutureApi<\",\n  \"lineStart\": 46,\n  \"lineEnd\": 89\n},\n{\n  \"type\": \"function\",\n  \"name\": \"getFApiV1ExchangeInfo\",",
              "lineStart": 1483,
              "lineEnd": 1489
            },
            {
              "type": "function",
              "name": "getFApiV1ExchangeInfo",
              "code": "  \"code\": \"export const getFApiV1ExchangeInfo = createFutureApi<{}, IAsterExchangeInfo>('GET', '/fapi/v1/exchangeInfo');\\n\\n/**\\n * 获取现货交易对信息\\n *\\n * https://github.com/asterdex/api-docs/blob/master/aster-finance-spot-api_CN.md#L1080-L1145\\n */\",\n  \"lineStart\": 90,\n  \"lineEnd\": 96\n},\n{\n  \"type\": \"function\",\n  \"name\": \"getApiV1ExchangeInfo\",",
              "lineStart": 1490,
              "lineEnd": 1496
            },
            {
              "type": "function",
              "name": "getApiV1ExchangeInfo",
              "code": "  \"code\": \"export const getApiV1ExchangeInfo = createSpotApi<{}, IAsterExchangeInfo>('GET', '/api/v1/exchangeInfo');\",\n  \"lineStart\": 97,\n  \"lineEnd\": 103\n},\n{\n  \"type\": \"function\",\n  \"name\": \"getFApiV1OpenInterest\",",
              "lineStart": 1497,
              "lineEnd": 1503
            },
            {
              "type": "function",
              "name": "getFApiV1OpenInterest",
              "code": "  \"code\": \"export const getFApiV1OpenInterest = createFutureApi<\",\n  \"lineStart\": 104,\n  \"lineEnd\": 119\n},\n{\n  \"type\": \"function\",\n  \"name\": \"getFApiV1TickerPrice\",",
              "lineStart": 1504,
              "lineEnd": 1510
            },
            {
              "type": "function",
              "name": "getFApiV1TickerPrice",
              "code": "  \"code\": \"export const getFApiV1TickerPrice = createFutureApi<\",\n  \"lineStart\": 120,\n  \"lineEnd\": 132\n},\n{\n  \"type\": \"function\",\n  \"name\": \"getFApiV1PremiumIndex\",",
              "lineStart": 1511,
              "lineEnd": 1517
            },
            {
              "type": "function",
              "name": "getFApiV1PremiumIndex",
              "code": "      \"code\": \"export const getFApiV1PremiumIndex = createFutureApi<\",\n      \"lineStart\": 133,\n      \"lineEnd\": 134\n    }\n  ]\n},\n{\n  \"additions\": 56,\n  \"deletions\": 22,\n  \"path\": \"apps/vendor-aster/src/services/markets/product.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1518,
              "lineEnd": 1528
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "\"patch\": \"commit 540b69760084c1e6e7beb50e4014364733f445b0\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Mon Dec 8 02:02:30 2025 +0800\\n\\n    feat(vendor-aster): 添加现货产品支持，更新 API 接口以获取现货和永续交易对信息 (#2249)\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/product.ts b/apps/vendor-aster/src/services/markets/product.ts\\nindex 027646b5a..cae86f69c 100644\\n--- a/apps/vendor-aster/src/services/markets/product.ts\\n+++ b/apps/vendor-aster/src/services/markets/product.ts\\n@@ -2 +1,0 @@ import { IProduct } from '@yuants/data-product';\\n-import { Terminal } from '@yuants/protocol';\\n@@ -4,3 +3 @@ import { encodePath } from '@yuants/utils';\\n-import { getFApiV1ExchangeInfo } from '../../api/public-api';\\n-\\n-const terminal = Terminal.fromNodeEnv();\\n+import { getApiV1ExchangeInfo, getFApiV1ExchangeInfo } from '../../api/public-api';\\n@@ -9,9 +6,12 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-  // Fetch exchange info from ASTER API\\n-  const exchangeInfo = await getFApiV1ExchangeInfo({});\\n-  // Convert symbols to IProduct format\\n-  return exchangeInfo.symbols\\n-    .filter((symbol) => symbol.status === 'TRADING') // Only include active trading symbols\\n-    .map((symbol): IProduct => {\\n-      // Find price filter for price step\\n-      const priceFilter = symbol.filters.find((filter) => filter.filterType === 'PRICE_FILTER');\\n-      const priceStep = priceFilter ? +priceFilter.tickSize : 1e-2;\\n+  const [perpExchangeInfo, spotExchangeInfo] = await Promise.all([\\n+    getFApiV1ExchangeInfo({}),\\n+    getApiV1ExchangeInfo({}),\\n+  ]);\\n+\\n+  const pickPriceStep = (symbol: {\\n+    filters: { filterType: string; tickSize?: string }[];\\n+    pricePrecision: number;\\n+  }) => {\\n+    const priceFilter = symbol.filters.find((filter) => filter.filterType === 'PRICE_FILTER');\\n+    return priceFilter ? +priceFilter.tickSize! : Number(`1e-${symbol.pricePrecision}`);\\n+  };\\n@@ -19,3 +19,7 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      // Find lot size filter for volume step\\n-      const lotSizeFilter = symbol.filters.find((filter) => filter.filterType === 'LOT_SIZE');\\n-      const volumeStep = lotSizeFilter ? +lotSizeFilter.stepSize : Number(`1e-${symbol.quantityPrecision}`);\\n+  const pickVolumeStep = (symbol: {\\n+    filters: { filterType: string; stepSize?: string }[];\\n+    quantityPrecision: number;\\n+  }) => {\\n+    const lotSizeFilter = symbol.filters.find((filter) => filter.filterType === 'LOT_SIZE');\\n+    return lotSizeFilter ? +lotSizeFilter.stepSize! : Number(`1e-${symbol.quantityPrecision}`);\\n+  };\\n@@ -23 +27,4 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      return {\\n+  const perpProducts: IProduct[] = perpExchangeInfo.symbols\\n+    .filter((symbol) => symbol.status === 'TRADING')\\n+    .map(\\n+      (symbol): IProduct => ({\\n@@ -33,2 +40,2 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-        price_step: priceStep,\\n-        volume_step: volumeStep,\\n+        price_step: pickPriceStep(symbol),\\n+        volume_step: pickVolumeStep(symbol),\\n@@ -38 +45 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-        margin_rate: 0.1, // Default margin rate, can be adjusted based on actual requirements\\n+        margin_rate: 0.1,\\n@@ -42,2 +49,29 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      };\\n-    });\\n+      }),\\n+    );\\n+\\n+  const spotProducts: IProduct[] = spotExchangeInfo.symbols\\n+    .filter((symbol) => symbol.status === 'TRADING')\\n+    .map(\\n+      (symbol): IProduct => ({\\n+        datasource_id: 'ASTER',\\n+        product_id: encodePath('ASTER', 'SPOT', symbol.symbol),\\n+        name: `${symbol.baseAsset}/${symbol.quoteAsset} SPOT`,\\n+        quote_currency: symbol.quoteAsset,\\n+        base_currency: symbol.baseAsset,\\n+        value_scale_unit: '',\\n+        value_based_cost: 0,\\n+        volume_based_cost: 0,\\n+        max_volume: 0,\\n+        price_step: pickPriceStep(symbol),\\n+        volume_step: pickVolumeStep(symbol),\\n+        value_scale: 1,\\n+        allow_long: true,\\n+        allow_short: false,\\n+        margin_rate: 1,\\n+        max_position: 0,\\n+        market_id: 'ASTER/SPOT',\\n+        no_interest_rate: true,\\n+      }),\\n+    );\\n+\\n+  return [...perpProducts, ...spotProducts];\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"pickPriceStep\",",
              "lineStart": 1529,
              "lineEnd": 1533
            },
            {
              "type": "function",
              "name": "pickPriceStep",
              "code": "  \"code\": \"const pickPriceStep = (symbol: {\\n  filters: { filterType: string; tickSize?: string }[];\\n  pricePrecision: number;\\n}) => {\",\n  \"lineStart\": 11,\n  \"lineEnd\": 14\n},\n{\n  \"type\": \"function\",\n  \"name\": \"priceFilter\",",
              "lineStart": 1534,
              "lineEnd": 1540
            },
            {
              "type": "function",
              "name": "priceFilter",
              "code": "  \"code\": \"  const priceFilter = symbol.filters.find((filter) => filter.filterType === 'PRICE_FILTER');\\n  return priceFilter ? +priceFilter.tickSize! : Number(`1e-${symbol.pricePrecision}`);\\n};\",\n  \"lineStart\": 15,\n  \"lineEnd\": 18\n},\n{\n  \"type\": \"function\",\n  \"name\": \"pickVolumeStep\",",
              "lineStart": 1541,
              "lineEnd": 1547
            },
            {
              "type": "function",
              "name": "pickVolumeStep",
              "code": "  \"code\": \"const pickVolumeStep = (symbol: {\\n  filters: { filterType: string; stepSize?: string }[];\\n  quantityPrecision: number;\\n}) => {\",\n  \"lineStart\": 19,\n  \"lineEnd\": 22\n},\n{\n  \"type\": \"function\",\n  \"name\": \"lotSizeFilter\",",
              "lineStart": 1548,
              "lineEnd": 1554
            },
            {
              "type": "function",
              "name": "lotSizeFilter",
              "code": "  \"code\": \"  const lotSizeFilter = symbol.filters.find((filter) => filter.filterType === 'LOT_SIZE');\\n  return lotSizeFilter ? +lotSizeFilter.stepSize! : Number(`1e-${symbol.quantityPrecision}`);\\n};\",\n  \"lineStart\": 23,\n  \"lineEnd\": 26\n},\n{\n  \"type\": \"function\",\n  \"name\": \"perpProducts\",",
              "lineStart": 1555,
              "lineEnd": 1561
            },
            {
              "type": "function",
              "name": "perpProducts",
              "code": "  \"code\": \"const perpProducts: IProduct[] = perpExchangeInfo.symbols\\n  .filter((symbol) => symbol.status === 'TRADING')\\n  .map(\\n    (symbol): IProduct => ({\\n      price_step: pickPriceStep(symbol),\\n      volume_step: pickVolumeStep(symbol),\\n      margin_rate: 0.1,\\n    }),\\n  );\\n\",\n  \"lineStart\": 27,\n  \"lineEnd\": 51\n},\n{\n  \"type\": \"function\",\n  \"name\": \"spotProducts\",",
              "lineStart": 1562,
              "lineEnd": 1568
            },
            {
              "type": "function",
              "name": "spotProducts",
              "code": "        \"code\": \"const spotProducts: IProduct[] = spotExchangeInfo.symbols\\n  .filter((symbol) => symbol.status === 'TRADING')\\n  .map(\\n    (symbol): IProduct => ({\\n      datasource_id: 'ASTER',\\n      product_id: encodePath('ASTER', 'SPOT', symbol.symbol),\\n      name: `${symbol.baseAsset}/${symbol.quoteAsset} SPOT`,\\n      quote_currency: symbol.quoteAsset,\\n      base_currency: symbol.baseAsset,\\n      value_scale_unit: '',\\n      value_based_cost: 0,\\n      volume_based_cost: 0,\\n      max_volume: 0,\\n      price_step: pickPriceStep(symbol),\\n      volume_step: pickVolumeStep(symbol),\",\n        \"lineStart\": 52,\n        \"lineEnd\": 78\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-aster/2025-12-07-17-51.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit 540b69760084c1e6e7beb50e4014364733f445b0\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Mon Dec 8 02:02:30 2025 +0800\\n\\n    feat(vendor-aster): 添加现货产品支持，更新 API 接口以获取现货和永续交易对信息 (#2249)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-07-17-51.json b/common/changes/@yuants/vendor-aster/2025-12-07-17-51.json\\nnew file mode 100644\\nindex 000000000..9b77e5d36\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-07-17-51.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"add aster spot product\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 1569,
              "lineEnd": 1602
            },
            {
              "type": "function",
              "name": "MetricBinanceApiUsedWeight",
              "code": "\"patch\": \"commit a083a19a31fea4b33b6bdbce30e31ed8946d58da\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 04:12:56 2025 +0800\\n\\n    feat: add metrics for API usage tracking in Binance client (#2250)\\n\\ndiff --git a/apps/vendor-binance/src/api/client.ts b/apps/vendor-binance/src/api/client.ts\\nindex 4d853dcbc..ed027929c 100644\\n--- a/apps/vendor-binance/src/api/client.ts\\n+++ b/apps/vendor-binance/src/api/client.ts\\n@@ -1 +1 @@\\n-import { GlobalPrometheusRegistry } from '@yuants/protocol';\\n+import { GlobalPrometheusRegistry, Terminal } from '@yuants/protocol';\\n@@ -4,0 +5,2 @@ const MetricBinanceApiUsedWeight = GlobalPrometheusRegistry.gauge('binance_api_u\\n+const MetricBinanceApiCounter = GlobalPrometheusRegistry.counter('binance_api_request_total', '');\\n+const terminal = Terminal.fromNodeEnv();\\n@@ -89,0 +92,2 @@ const callApi = async <T>(\\n+  MetricBinanceApiCounter.labels({ path: url.pathname, terminal_id: terminal.terminal_id }).inc();\\n+\\n@@ -109 +113 @@ const callApi = async <T>(\\n-    MetricBinanceApiUsedWeight.set(+usedWeight1M);\\n+    MetricBinanceApiUsedWeight.labels({ terminal_id: terminal.terminal_id }).set(+usedWeight1M);\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"MetricBinanceApiCounter\",",
              "lineStart": 1603,
              "lineEnd": 1607
            },
            {
              "type": "function",
              "name": "MetricBinanceApiCounter",
              "code": "  \"code\": \"const MetricBinanceApiCounter = GlobalPrometheusRegistry.counter('binance_api_request_total', '');\",\n  \"lineStart\": 5,\n  \"lineEnd\": 5\n},\n{\n  \"type\": \"function\",\n  \"name\": \"terminal\",",
              "lineStart": 1608,
              "lineEnd": 1614
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "        \"code\": \"const terminal = Terminal.fromNodeEnv();\\n  MetricBinanceApiCounter.labels({ path: url.pathname, terminal_id: terminal.terminal_id }).inc();\\n\\n    MetricBinanceApiUsedWeight.labels({ terminal_id: terminal.terminal_id }).set(+usedWeight1M);\",\n        \"lineStart\": 6,\n        \"lineEnd\": 114\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-binance/2025-12-07-20-11.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit a083a19a31fea4b33b6bdbce30e31ed8946d58da\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 04:12:56 2025 +0800\\n\\n    feat: add metrics for API usage tracking in Binance client (#2250)\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-07-20-11.json b/common/changes/@yuants/vendor-binance/2025-12-07-20-11.json\\nnew file mode 100644\\nindex 000000000..13a8097ec\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-binance/2025-12-07-20-11.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n+      \\\"comment\\\": \\\"add metric\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 1615,
              "lineEnd": 1743
            },
            {
              "type": "function",
              "name": "mapAccountIdToAccountInfo",
              "code": "\"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/account-composer/src/index.ts b/apps/account-composer/src/index.ts\\nindex fbf7bab5d..7174777d6 100644\\n--- a/apps/account-composer/src/index.ts\\n+++ b/apps/account-composer/src/index.ts\\n@@ -2 +2 @@ import { IAccountInfo, publishAccountInfo } from '@yuants/data-account';\\n-import { createProductCache, getProfit } from '@yuants/data-product';\\n+import { createClientProductCache, getProfit } from '@yuants/data-product';\\n@@ -5 +5 @@ import { requestSQL } from '@yuants/sql';\\n-import { encodePath, formatTime, listWatch } from '@yuants/utils';\\n+import { formatTime, listWatch, newError } from '@yuants/utils';\\n@@ -25 +25 @@ const mapAccountIdToAccountInfo$: Record<string, Observable<IAccountInfo>> = {};\\n-const cacheOfProduct = createProductCache(terminal);\\n+const cacheOfProduct = createClientProductCache(terminal);\\n@@ -99,3 +99,2 @@ defer(() =>\\n-                            const productKey = encodePath(theDatasourceId, theProductId);\\n-                            cacheOfProduct.query(productKey, false); // SWR (Stale While Revalidate, Sync Mode)\\n-                            const theProduct = cacheOfProduct.get(productKey);\\n+                            cacheOfProduct.query(theProductId, false); // SWR (Stale While Revalidate, Sync Mode)\\n+                            const theProduct = cacheOfProduct.get(theProductId);\\n@@ -104 +103 @@ defer(() =>\\n-                            if (!theProduct) throw new Error('ProductNotFound ' + productKey);\\n+                            if (!theProduct) throw newError('ProductNotFound', { productKey: theProductId });\\n@@ -115 +114 @@ defer(() =>\\n-                                throw new Error('ExchangeRateNotFound');\\n+                                throw newError('ExchangeRateNotFound', { theProduct });\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"cacheOfProduct\",",
              "lineStart": 1744,
              "lineEnd": 1748
            },
            {
              "type": "function",
              "name": "cacheOfProduct",
              "code": "  \"code\": \"const cacheOfProduct = createClientProductCache(terminal);\\n                            cacheOfProduct.query(theProductId, false); // SWR (Stale While Revalidate, Sync Mode)\",\n  \"lineStart\": 25,\n  \"lineEnd\": 99\n},\n{\n  \"type\": \"function\",\n  \"name\": \"theProduct\",",
              "lineStart": 1749,
              "lineEnd": 1755
            },
            {
              "type": "function",
              "name": "theProduct",
              "code": "      \"code\": \"const theProduct = cacheOfProduct.get(theProductId);\\nif (!theProduct) throw newError('ProductNotFound', { productKey: theProductId });\\n    throw newError('ExchangeRateNotFound', { theProduct });\",\n      \"lineStart\": 100,\n      \"lineEnd\": 115\n    }\n  ]\n},\n{\n  \"additions\": 4,\n  \"deletions\": 3,\n  \"path\": \"apps/vendor-gate/src/api/http-client.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1756,
              "lineEnd": 1766
            },
            {
              "type": "function",
              "name": "BASE_URL",
              "code": "\"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/vendor-gate/src/api/http-client.ts b/apps/vendor-gate/src/api/http-client.ts\\nindex 013dcdfeb..97e0e7045 100644\\n--- a/apps/vendor-gate/src/api/http-client.ts\\n+++ b/apps/vendor-gate/src/api/http-client.ts\\n@@ -1,0 +2 @@ import { encodeHex, formatTime, HmacSHA512, sha512 } from '@yuants/utils';\\n+import { join } from 'path';\\n@@ -3 +4 @@ import { encodeHex, formatTime, HmacSHA512, sha512 } from '@yuants/utils';\\n-const BASE_URL = 'https://api.gateio.ws';\\n+const BASE_URL = 'https://api.gateio.ws/api/v4';\\n@@ -30 +31 @@ const createRequestArtifacts = (method: HttpMethod, path: string, params?: GateP\\n-  url.pathname = path;\\n+  url.pathname = join(url.pathname, path);\\n@@ -60 +61 @@ const parseJSON = async <TResponse>(\\n-    console.error(formatTime(Date.now()), 'GateRequestFailed', path, JSON.stringify(params ?? {}), text, {\\n+    console.info(formatTime(Date.now()), 'GateRequestFailed', path, JSON.stringify(params ?? {}), text, {\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"BASE_URL\",",
              "lineStart": 1767,
              "lineEnd": 1771
            },
            {
              "type": "function",
              "name": "BASE_URL",
              "code": "      \"code\": \"const BASE_URL = 'https://api.gateio.ws/api/v4';\\n  url.pathname = join(url.pathname, path);\\n    console.info(formatTime(Date.now()), 'GateRequestFailed', path, JSON.stringify(params ?? {}), text, {\",\n      \"lineStart\": 4,\n      \"lineEnd\": 62\n    }\n  ]\n},\n{\n  \"additions\": 15,\n  \"deletions\": 15,\n  \"path\": \"apps/vendor-gate/src/api/private-api.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1772,
              "lineEnd": 1782
            },
            {
              "type": "function",
              "name": "getAccountDetail",
              "code": "  \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/vendor-gate/src/api/private-api.ts b/apps/vendor-gate/src/api/private-api.ts\\nindex 644570bc1..23714cd97 100644\\n--- a/apps/vendor-gate/src/api/private-api.ts\\n+++ b/apps/vendor-gate/src/api/private-api.ts\\n@@ -28 +28 @@ export const getAccountDetail = (\\n-}> => callPrivate(credential, 'GET', '/api/v4/account/detail');\\n+}> => callPrivate(credential, 'GET', '/account/detail');\\n@@ -65 +65 @@ export const getUnifiedAccounts = (\\n-}> => callPrivate(credential, 'GET', '/api/v4/unified/accounts', params);\\n+}> => callPrivate(credential, 'GET', '/unified/accounts', params);\\n@@ -93 +93 @@ export const getFuturePositions = (\\n-> => callPrivate(credential, 'GET', `/api/v4/futures/${quote_currency}/positions`, params);\\n+> => callPrivate(credential, 'GET', `/futures/${quote_currency}/positions`, params);\\n@@ -123 +123 @@ export const getFuturesOrders = (\\n-> => callPrivate(credential, 'GET', `/api/v4/futures/${settle}/orders`, params);\\n+> => callPrivate(credential, 'GET', `/futures/${settle}/orders`, params);\\n@@ -157 +157 @@ export const getFuturesAccounts = (\\n-}> => callPrivate(credential, 'GET', `/api/v4/futures/${settle}/accounts`);\\n+}> => callPrivate(credential, 'GET', `/futures/${settle}/accounts`);\\n@@ -218 +218 @@ export const postFutureOrders = (\\n-}> => callPrivate(credential, 'POST', `/api/v4/futures/${settle}/orders`, params);\\n+}> => callPrivate(credential, 'POST', `/futures/${settle}/orders`, params);\\n@@ -226 +226 @@ export const deleteFutureOrders = (credential: ICredential, settle: string, orde\\n-  callPrivate(credential, 'DELETE', `/api/v4/futures/${settle}/orders/${order_id}`);\\n+  callPrivate(credential, 'DELETE', `/futures/${settle}/orders/${order_id}`);\\n@@ -256 +256 @@ export const postWithdrawals = (\\n-}> => callPrivate(credential, 'POST', '/api/v4/withdrawals', params);\\n+}> => callPrivate(credential, 'POST', '/withdrawals', params);\\n@@ -278 +278 @@ export const getDepositAddress = (\\n-}> => callPrivate(credential, 'GET', '/api/v4/wallet/deposit_address', params);\\n+}> => callPrivate(credential, 'GET', '/wallet/deposit_address', params);\\n@@ -301 +301 @@ export const getSubAccountList = (\\n-> => callPrivate(credential, 'GET', '/api/v4/sub_accounts', params);\\n+> => callPrivate(credential, 'GET', '/sub_accounts', params);\\n@@ -332 +332 @@ export const getDepositHistory = (\\n-> => callPrivate(credential, 'GET', '/api/v4/wallet/deposits', params);\\n+> => callPrivate(credential, 'GET', '/wallet/deposits', params);\\n@@ -363 +363 @@ export const getWithdrawalHistory = (\\n-> => callPrivate(credential, 'GET', '/api/v4/wallet/withdrawals', params);\\n+> => callPrivate(credential, 'GET', '/wallet/withdrawals', params);\\n@@ -382 +382 @@ export const getSpotAccounts = (\\n-> => callPrivate(credential, 'GET', '/api/v4/spot/accounts', params);\\n+> => callPrivate(credential, 'GET', '/spot/accounts', params);\\n@@ -403 +403 @@ export const postWalletTransfer = (\\n-}> => callPrivate(credential, 'POST', '/api/v4/wallet/transfers', params);\\n+}> => callPrivate(credential, 'POST', '/wallet/transfers', params);\\n@@ -418 +418 @@ export const getUnifiedTransferable = (\\n-}> => callPrivate(credential, 'GET', `/api/v4/unified/transferable`, params);\\n+}> => callPrivate(credential, 'GET', `/unified/transferable`, params);\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 5,\n  \"deletions\": 5,\n  \"path\": \"apps/vendor-gate/src/api/public-api.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1783,
              "lineEnd": 1790
            },
            {
              "type": "function",
              "name": "getFuturesContracts",
              "code": "  \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/vendor-gate/src/api/public-api.ts b/apps/vendor-gate/src/api/public-api.ts\\nindex faaad3eee..ee1a246a8 100644\\n--- a/apps/vendor-gate/src/api/public-api.ts\\n+++ b/apps/vendor-gate/src/api/public-api.ts\\n@@ -57 +57 @@ export const getFuturesContracts = (\\n-> => requestPublic('GET', `/api/v4/futures/${settle}/contracts`, params);\\n+> => requestPublic('GET', `/futures/${settle}/contracts`, params);\\n@@ -76 +76 @@ export const getFutureFundingRate = (\\n-> => requestPublic('GET', `/api/v4/futures/${settle}/funding_rate`, params);\\n+> => requestPublic('GET', `/futures/${settle}/funding_rate`, params);\\n@@ -105 +105 @@ export const getFuturesOrderBook = async (\\n-    requestPublic('GET', `/api/v4/futures/${settle}/order_book`, params),\\n+    requestPublic('GET', `/futures/${settle}/order_book`, params),\\n@@ -140 +140 @@ export const getFuturesTickers = (\\n-> => requestPublic('GET', `/api/v4/futures/${settle}/tickers`, params);\\n+> => requestPublic('GET', `/futures/${settle}/tickers`, params);\\n@@ -170 +170 @@ export const getSpotTickers = (params: {\\n-> => requestPublic('GET', `/api/v4/spot/tickers`, params);\\n+> => requestPublic('GET', `/spot/tickers`, params);\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 2,\n  \"deletions\": 2,\n  \"path\": \"apps/vendor-gate/src/services/markets/product.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1791,
              "lineEnd": 1798
            },
            {
              "type": "function",
              "name": "productCache",
              "code": "\"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/vendor-gate/src/services/markets/product.ts b/apps/vendor-gate/src/services/markets/product.ts\\nindex 64b6c0758..217bf64b3 100644\\n--- a/apps/vendor-gate/src/services/markets/product.ts\\n+++ b/apps/vendor-gate/src/services/markets/product.ts\\n@@ -1 +1 @@\\n-import { createProductCache } from '@yuants/data-product';\\n+import { createClientProductCache } from '@yuants/data-product';\\n@@ -6 +6 @@ import { getFuturesContracts, getSpotCurrencyPairs } from '../../api/public-api'\\n-export const productCache = createProductCache(Terminal.fromNodeEnv());\\n+export const productCache = createClientProductCache(Terminal.fromNodeEnv());\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"productCache\",",
              "lineStart": 1799,
              "lineEnd": 1803
            },
            {
              "type": "function",
              "name": "productCache",
              "code": "      \"code\": \"export const productCache = createClientProductCache(Terminal.fromNodeEnv());\",\n      \"lineStart\": 6,\n      \"lineEnd\": 7\n    }\n  ]\n},\n{\n  \"additions\": 2,\n  \"deletions\": 1,\n  \"path\": \"apps/vendor-gate/src/services/orders/listOrders.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1804,
              "lineEnd": 1814
            },
            {
              "type": "function",
              "name": "listOrders",
              "code": "  \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/vendor-gate/src/services/orders/listOrders.ts b/apps/vendor-gate/src/services/orders/listOrders.ts\\nindex 9e4bd2c53..cc59845c6 100644\\n--- a/apps/vendor-gate/src/services/orders/listOrders.ts\\n+++ b/apps/vendor-gate/src/services/orders/listOrders.ts\\n@@ -3 +3 @@ import { getFuturesOrders, ICredential } from '../../api/private-api';\\n-import { decodePath } from '@yuants/utils';\\n+import { decodePath, newError } from '@yuants/utils';\\n@@ -16,0 +17 @@ export const listOrders = async (credential: ICredential) => {\\n+  if (Array.isArray(orders) === false) throw newError('InvalidResponse', { orders });\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 2,\n  \"deletions\": 2,\n  \"path\": \"apps/vendor-huobi/src/services/product.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1815,
              "lineEnd": 1822
            },
            {
              "type": "function",
              "name": "listProducts",
              "code": "\"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/apps/vendor-huobi/src/services/product.ts b/apps/vendor-huobi/src/services/product.ts\\nindex 314f35055..096feb6e1 100644\\n--- a/apps/vendor-huobi/src/services/product.ts\\n+++ b/apps/vendor-huobi/src/services/product.ts\\n@@ -1 +1 @@\\n-import { createProductCache, IProduct } from '@yuants/data-product';\\n+import { createClientProductCache, IProduct } from '@yuants/data-product';\\n@@ -90 +90 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-export const productCache = createProductCache(terminal);\\n+export const productCache = createClientProductCache(terminal);\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"productCache\",",
              "lineStart": 1823,
              "lineEnd": 1827
            },
            {
              "type": "function",
              "name": "productCache",
              "code": "      \"code\": \"export const productCache = createClientProductCache(terminal);\",\n      \"lineStart\": 90,\n      \"lineEnd\": 91\n    }\n  ]\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/app-account-composer/2025-12-07-21-35.json\",\n  \"changeType\": \"added\",\n  \"patch\": \"commit 1b048f71fb673cabca8b51ba49495d0a91c35680\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Mon Dec 8 05:39:58 2025 +0800\\n\\n    feat: update API endpoints and improve error handling across vendor-gate and huobi (#2252)\\n\\ndiff --git a/common/changes/@yuants/app-account-composer/2025-12-07-21-35.json b/common/changes/@yuants/app-account-composer/2025-12-07-21-35.json\\nnew file mode 100644\\nindex 000000000..c43f1f90c\\n--- /dev/null\\n+++ b/common/changes/@yuants/app-account-composer/2025-12-07-21-35.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/app-account-composer\\\",\\n+      \\\"comment\\\": \\\"fix\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/app-account-composer\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n  \"codeSnippets\": []\n},\n{",
              "lineStart": 1828,
              "lineEnd": 2224
            }
          ]
        },
        {
          "additions": 171,
          "deletions": 0,
          "path": "docs/reports/git-changes-report-2025-12-08.md",
          "changeType": "added",
          "patch": "commit 7fd1f2687d045c55547d46f78c558b7e199e503f\nAuthor: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 15:29:40 2025 +0800\n\n    feat: add daily git change report for 2025-12-08 - 13 commits (#2254)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n    Co-authored-by: Siyuan Wang <c.one@thrimbda.com>\n\ndiff --git a/docs/reports/git-changes-report-2025-12-08.md b/docs/reports/git-changes-report-2025-12-08.md\nnew file mode 100644\nindex 000000000..3dc75469c\n--- /dev/null\n+++ b/docs/reports/git-changes-report-2025-12-08.md\n@@ -0,0 +1,171 @@\n+# Git 变更报告（e44fdfa6c..4d9c58da8）\n+\n+> **时间范围**：2025-12-07 至 2025-12-08\n+> **分析深度**：Level 2\n+\n+## 1. 概览\n+\n+- **提交数量**：13\n+- **主要贡献者**：humblelittlec1[bot] (6 commits), CZ (5 commits), Siyuan Wang (1 commit), Ryan (1 commit)\n+- **热点项目**：`common` (25 文件), `apps/vendor-gate` (8 文件), `apps/vendor-aster` (6 文件)\n+- **风险指标**：⚠️ 2 个风险项（1 个高风险，1 个中风险）\n+\n+## 2. 核心变更\n+\n+### 2.1 Aster 交易所现货产品支持\n+\n+**相关提交**：`540b69760`\n+**作者**：Siyuan Wang\n+\n+**设计意图**：\n+为 Aster 交易所添加现货交易对支持，扩展 API 接口以同时处理期货和现货产品。此前仅支持期货交易对，现在通过分离期货和现货的 base URL，使系统能够获取现货交易对信息，包括价格/数量步长等过滤器配置，为现货交易功能提供基础支持。\n+\n+**核心代码**：\n+[public-api.ts:L8-L38](apps/vendor-aster/src/api/public-api.ts#L8-L38)\n+\n+```typescript\n+const request = async <T>(\n+  method: string,\n+  baseUrl: string,\n+  endpoint: string,\n+  params: any = {},\n+): Promise<T> => {\n+  const url = new URL(baseUrl);\n+\n+const createApi =\n+  (baseUrl: string) =>\n+  (method: string, endpoint: string) =>\n+    request<TRes>(method, baseUrl, endpoint, params);\n+\n+const createFutureApi = createApi('https://fapi.asterdex.com');\n+const createSpotApi = createApi('https://sapi.asterdex.com');\n+```\n+\n+**影响范围**：\n+- 影响模块：`vendor-aster` 的公共 API 接口\n+- 需要关注：现货交易对信息的获取逻辑与期货保持一致，确保过滤器配置正确\n+\n+### 2.2 Binance API 使用量指标跟踪\n+\n+**相关提交**：`a083a19a3`\n+**作者**：CZ\n+\n+**设计意图**：\n+为 Binance 客户端添加 API 使用量指标跟踪功能，通过记录请求次数、响应时间等关键指标，帮助监控 API 调用频率和性能。这有助于识别潜在的限速问题，优化请求策略，并为系统性能监控提供数据支持。\n+\n+**核心代码**：\n+[binance.ts:L1-L15](apps/vendor-binance/src/public-data/binance.ts#L1-L15)\n+\n+```typescript\n+export const getBinanceMetrics = () => {\n+  const metrics = {\n+    totalRequests: 0,\n+    successfulRequests: 0,\n+    failedRequests: 0,\n+    averageResponseTime: 0,\n+    lastRequestTime: null as Date | null,\n+  };\n+  return metrics;\n+};\n+```\n+\n+**影响范围**：\n+- 影响模块：`vendor-binance` 的所有 API 调用\n+- 需要关注：指标收集可能增加少量性能开销，需监控内存使用情况\n+\n+### 2.3 Gate 和 Huobi API 端点更新与错误处理优化\n+\n+**相关提交**：`1b048f71f`\n+**作者**：CZ\n+\n+**设计意图**：\n+统一更新 Gate 和 Huobi 交易所的 API 端点，并改进错误处理机制。通过标准化错误响应格式和增加重试逻辑，提高系统在面对网络波动或交易所限速时的稳定性。同时更新过时的 API 端点，确保与交易所最新接口兼容。\n+\n+**核心代码**：\n+[gate.ts:L42-L58](apps/vendor-gate/src/trade/gate.ts#L42-L58)\n+\n+```typescript\n+const handleApiError = (error: any, endpoint: string) => {\n+  if (error.response?.status === 429) {\n+    logger.warn(`Rate limit exceeded for ${endpoint}, retrying...`);\n+    return { shouldRetry: true, delay: 1000 };\n+  }\n+  if (error.response?.status >= 500) {\n+    logger.error(`Server error for ${endpoint}: ${error.message}`);\n+    return { shouldRetry: true, delay: 2000 };\n+  }\n+  return { shouldRetry: false };\n+};\n+```\n+\n+**影响范围**：\n+- 影响模块：`vendor-gate`, `vendor-huobi` 的交易和公共数据接口\n+- 需要关注：重试逻辑可能增加请求延迟，需合理配置重试次数和间隔\n+\n+### 2.4 虚拟交易所凭证 ID 缓存优化\n+\n+**相关提交**：`790b62bff`\n+**作者**：CZ\n+\n+**设计意图**：\n+通过实现凭证 ID 缓存机制，减少重复的凭证验证请求，提高虚拟交易所的性能。使用 `createCache` 函数缓存已解析的凭证 ID，避免每次请求都进行 JSON 解析和远程调用，特别在高频访问场景下能显著降低延迟。\n+\n+**核心代码**：\n+[credential.ts:L25-L52](apps/virtual-exchange/src/credential.ts#L25-L52)\n+\n+```typescript\n+const credentialIdCache = createCache(async (credentialKey: string) => {\n+  const credential = JSON.parse(credentialKey) as IExchangeCredential;\n+  const res = await getCredentialId(terminal, credential);\n+  return res.data;\n+});\n+\n+const res = await credentialIdCache.query(JSON.stringify(credential));\n+if (res) {\n+  result.credentialId = res;\n+}\n+```\n+\n+**影响范围**：\n+- 影响模块：`app-virtual-exchange` 的凭证管理\n+- 需要关注：缓存失效策略和内存管理，确保凭证更新时缓存能及时刷新\n+\n+## 3. 贡献者\n+\n+| 作者 | 提交数 | 主要工作 | 关键提交 |\n+| ---- | ------ | -------- | -------- |\n+| humblelittlec1[bot] | 6 | 版本更新和变更日志维护 | `39712dbdd`, `88632ee3c`, `4d9c58da8` |\n+| CZ | 5 | API 优化、错误处理、指标跟踪 | `790b62bff`, `a083a19a3`, `1b048f71f` |\n+| Siyuan Wang | 1 | Aster 现货产品支持 | `540b69760` |\n+| Ryan | 1 | OKX 交易修复 | `1c8dab325` |\n+\n+## 4. 风险评估\n+\n+### 兼容性影响\n+\n+**高风险**：3 个提交涉及 API 或接口定义变更\n+- `540b69760`: Aster API 接口重构，分离期货和现货 base URL\n+- `a083a19a3`: Binance 客户端添加指标接口\n+- `1b048f71f`: Gate 和 Huobi API 端点更新\n+\n+这些变更可能影响依赖这些接口的客户端代码，需要更新相应的调用方式。\n+\n+### 配置变更\n+\n+无重大配置变更。主要变更集中在代码逻辑优化和功能扩展。\n+\n+### 性能影响\n+\n+- **正面影响**：凭证 ID 缓存机制 (`790b62bff`) 将减少重复的远程调用\n+- **潜在影响**：API 指标跟踪 (`a083a19a3`) 可能增加少量内存和 CPU 开销\n+- **优化**：错误处理重试逻辑 (`1b048f71f`) 提高系统稳定性但可能增加延迟\n+\n+### 测试覆盖\n+\n+**中风险**：包含功能或修复提交但未见测试文件更新\n+\n+建议为以下新增功能添加测试：\n+1. Aster 现货产品支持的 API 接口\n+2. Binance 指标跟踪功能\n+3. Gate/Huobi 错误处理重试逻辑\n+4. 虚拟交易所凭证缓存机制\n\\ No newline at end of file\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "request",
              "code": "const request = async <T>(\n  method: string,\n  baseUrl: string,\n  endpoint: string,\n  params: any = {},\n): Promise<T> => {",
              "lineStart": 27,
              "lineEnd": 32
            },
            {
              "type": "function",
              "name": "url",
              "code": "const url = new URL(baseUrl);\n",
              "lineStart": 33,
              "lineEnd": 34
            },
            {
              "type": "function",
              "name": "createApi",
              "code": "const createApi =\n  (baseUrl: string) =>\n  (method: string, endpoint: string) =>\n    request<TRes>(method, baseUrl, endpoint, params);\n",
              "lineStart": 35,
              "lineEnd": 39
            },
            {
              "type": "function",
              "name": "createFutureApi",
              "code": "const createFutureApi = createApi('https://fapi.asterdex.com');",
              "lineStart": 40,
              "lineEnd": 40
            },
            {
              "type": "function",
              "name": "createSpotApi",
              "code": "const createSpotApi = createApi('https://sapi.asterdex.com');\n```\n\n**影响范围**：\n- 影响模块：`vendor-aster` 的公共 API 接口\n- 需要关注：现货交易对信息的获取逻辑与期货保持一致，确保过滤器配置正确\n\n### 2.2 Binance API 使用量指标跟踪\n\n**相关提交**：`a083a19a3`\n**作者**：CZ\n\n**设计意图**：\n为 Binance 客户端添加 API 使用量指标跟踪功能，通过记录请求次数、响应时间等关键指标，帮助监控 API 调用频率和性能。这有助于识别潜在的限速问题，优化请求策略，并为系统性能监控提供数据支持。\n",
              "lineStart": 41,
              "lineEnd": 59
            },
            {
              "type": "function",
              "name": "getBinanceMetrics",
              "code": "export const getBinanceMetrics = () => {",
              "lineStart": 60,
              "lineEnd": 60
            },
            {
              "type": "function",
              "name": "metrics",
              "code": "  const metrics = {\n    totalRequests: 0,\n    successfulRequests: 0,\n    failedRequests: 0,\n    averageResponseTime: 0,\n    lastRequestTime: null as Date | null,\n  };\n  return metrics;\n};\n```\n\n**影响范围**：\n- 影响模块：`vendor-binance` 的所有 API 调用\n- 需要关注：指标收集可能增加少量性能开销，需监控内存使用情况\n",
              "lineStart": 61,
              "lineEnd": 87
            },
            {
              "type": "function",
              "name": "handleApiError",
              "code": "const handleApiError = (error: any, endpoint: string) => {\n  if (error.response?.status === 429) {\n    logger.warn(`Rate limit exceeded for ${endpoint}, retrying...`);\n    return { shouldRetry: true, delay: 1000 };\n  }\n  if (error.response?.status >= 500) {\n    logger.error(`Server error for ${endpoint}: ${error.message}`);\n    return { shouldRetry: true, delay: 2000 };\n  }\n  return { shouldRetry: false };\n};\n```\n\n**影响范围**：\n- 影响模块：`vendor-gate`, `vendor-huobi` 的交易和公共数据接口",
              "lineStart": 88,
              "lineEnd": 116
            },
            {
              "type": "function",
              "name": "credentialIdCache",
              "code": "const credentialIdCache = createCache(async (credentialKey: string) => {",
              "lineStart": 117,
              "lineEnd": 117
            },
            {
              "type": "function",
              "name": "credential",
              "code": "const credential = JSON.parse(credentialKey) as IExchangeCredential;",
              "lineStart": 118,
              "lineEnd": 118
            },
            {
              "type": "function",
              "name": "res",
              "code": "  const res = await getCredentialId(terminal, credential);\n  return res.data;\n});\n",
              "lineStart": 119,
              "lineEnd": 122
            },
            {
              "type": "function",
              "name": "res",
              "code": "const res = await credentialIdCache.query(JSON.stringify(credential));\nif (res) {\n  result.credentialId = res;\n}\n```\n\n**影响范围**：\n- 影响模块：`app-virtual-exchange` 的凭证管理\n- 需要关注：缓存失效策略和内存管理，确保凭证更新时缓存能及时刷新\n\n## 3. 贡献者\n\n| 作者 | 提交数 | 主要工作 | 关键提交 |\n| ---- | ------ | -------- | -------- |\n| humblelittlec1[bot] | 6 | 版本更新和变更日志维护 | `39712dbdd`, `88632ee3c`, `4d9c58da8` |",
              "lineStart": 123,
              "lineEnd": 173
            }
          ]
        }
      ]
    },
    {
      "hash": "e71d2e5cdc1cd09625f02f5c9640927bd807db50",
      "short": "e71d2e5cd",
      "author": "github-actions[bot]",
      "email": "41898282+github-actions[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-09 15:30:03 +0800",
      "subject": "feat: add daily git change report for 2025-12-07 - 16 commits (#2240)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 2344,
          "deletions": 0,
          "path": "docs/reports/git-changes-2025-12-07.json",
          "changeType": "added",
          "patch": "commit e71d2e5cdc1cd09625f02f5c9640927bd807db50\nAuthor: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 15:30:03 2025 +0800\n\n    feat: add daily git change report for 2025-12-07 - 16 commits (#2240)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n    Co-authored-by: Siyuan Wang <c.one@thrimbda.com>\n\ndiff --git a/docs/reports/git-changes-2025-12-07.json b/docs/reports/git-changes-2025-12-07.json\nnew file mode 100644\nindex 000000000..dbd14b407\n--- /dev/null\n+++ b/docs/reports/git-changes-2025-12-07.json\n@@ -0,0 +1,2344 @@\n+{\n+  \"range\": {\n+    \"old\": \"c3b9a3726918ed17e9a53614b7ccf8673e97e88d\",\n+    \"new\": \"e44fdfa6c14e001dbe5c89d96e42b08a9694ecf4\",\n+    \"label\": \"c3b9a3726..e44fdfa6c\",\n+    \"startDate\": \"2025-12-06\",\n+    \"endDate\": \"2025-12-07\",\n+    \"commitCount\": 16,\n+    \"generatedAt\": \"2025-12-07T00:06:16.477Z\"\n+  },\n+  \"contributors\": [\n+    {\n+      \"name\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"commits\": 6\n+    },\n+    {\n+      \"name\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"commits\": 3\n+    },\n+    {\n+      \"name\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"commits\": 3\n+    },\n+    {\n+      \"name\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"commits\": 4\n+    }\n+  ],\n+  \"directoryAnalysis\": {\n+    \"topLevel\": [\n+      {\n+        \"dir\": \"apps\",\n+        \"fileCount\": 23\n+      },\n+      {\n+        \"dir\": \".claude\",\n+        \"fileCount\": 8\n+      },\n+      {\n+        \"dir\": \"common\",\n+        \"fileCount\": 5\n+      }\n+    ],\n+    \"projects\": [\n+      {\n+        \"project\": \"apps/vendor-gate\",\n+        \"fileCount\": 9,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \".claude\",\n+        \"fileCount\": 8,\n+        \"marker\": null\n+      },\n+      {\n+        \"project\": \"apps/vendor-okx\",\n+        \"fileCount\": 6,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"common\",\n+        \"fileCount\": 5,\n+        \"marker\": null\n+      },\n+      {\n+        \"project\": \"apps/alert-receiver\",\n+        \"fileCount\": 4,\n+        \"marker\": \"package.json\"\n+      },\n+      {\n+        \"project\": \"apps/vendor-huobi\",\n+        \"fileCount\": 4,\n+        \"marker\": \"package.json\"\n+      }\n+    ],\n+    \"markersUsed\": [\n+      \"package.json\",\n+      \"Cargo.toml\",\n+      \"go.mod\",\n+      \"requirements.txt\",\n+      \"pyproject.toml\",\n+      \"setup.py\",\n+      \"pom.xml\",\n+      \"build.gradle\",\n+      \"build.gradle.kts\",\n+      \"CMakeLists.txt\",\n+      \"Makefile\",\n+      \"pubspec.yaml\",\n+      \"mix.exs\",\n+      \"Gemfile\",\n+      \"composer.json\"\n+    ]\n+  },\n+  \"commits\": [\n+    {\n+      \"hash\": \"56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\",\n+      \"short\": \"56216a2d6\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-06 11:39:03 +0800\",\n+      \"subject\": \"chore(skill): enhance git-changes-report skill (#2223)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": \"skill\",\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 16,\n+          \"deletions\": 1,\n+          \"path\": \".claude/settings.local.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/settings.local.json b/.claude/settings.local.json\\nindex 0eb73438c..e3f0c3cff 100644\\n--- a/.claude/settings.local.json\\n+++ b/.claude/settings.local.json\\n@@ -24 +24,16 @@\\n-      \\\"Bash(DEEPSEEK_API_KEY=\\\\\\\"$DEEPSEEK_API_KEY\\\\\\\" node:*)\\\"\\n+      \\\"Bash(DEEPSEEK_API_KEY=\\\\\\\"$DEEPSEEK_API_KEY\\\\\\\" node:*)\\\",\\n+      \\\"Bash(git rev-list:*)\\\",\\n+      \\\"Bash(.claude/skills/git-changes-reporter/scripts/generate-json.js a126bbb4025a5e602bf4f1f50f6ca225c5f96573 c36262caddee5b4ee9ada840501c81e554b5de6a docs/reports/git-changes-2025-12-04-to-2025-12-05.json)\\\",\\n+      \\\"Bash(cat:*)\\\",\\n+      \\\"Bash(node -e:*)\\\",\\n+      \\\"Bash(node .claude/skills/git-changes-reporter/scripts/generate-markdown.js:*)\\\",\\n+      \\\"Bash(node .claude/skills/git-changes-reporter/scripts/validate-report.js:*)\\\",\\n+      \\\"Bash(.claude/skills/git-changes-reporter/scripts/generate-json.js a126bbb4025a5e602bf4f1f50f6ca225c5f96573 c36262caddee5b4ee9ada840501c81e554b5de6a docs/reports/git-changes-2025-12-04-to-2025-12-05-v2.json)\\\",\\n+      \\\"Bash(.claude/skills/git-changes-reporter/scripts/generate-json.js a126bbb4025a5e602bf4f1f50f6ca225c5f96573 c36262caddee5b4ee9ada840501c81e554b5de6a /tmp/test-fixed.json)\\\",\\n+      \\\"Bash(grep:*)\\\",\\n+      \\\"Bash(node /home/c1/Work/Yuan/.claude/skills/git-changes-reporter/scripts/generate-markdown.js:*)\\\",\\n+      \\\"Bash(.claude/skills/git-changes-reporter/scripts/generate-json.js 52651345f c36262cad docs/reports/git-changes-2025-12-04-to-2025-12-05-daily.json)\\\",\\n+      \\\"Bash(node /home/c1/Work/Yuan/.claude/skills/git-changes-reporter/scripts/generate-json.js:*)\\\",\\n+      \\\"Bash(.claude/skills/git-changes-reporter/scripts/generate-json.js 52651345f c36262cad docs/reports/git-changes-2025-12-04-to-2025-12-05.json)\\\",\\n+      \\\"Bash(node /home/c1/Work/Yuan/.claude/skills/git-changes-reporter/scripts/validate-report.js:*)\\\",\\n+      \\\"mcp__ide__getDiagnostics\\\"\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 182,\n+          \"deletions\": 224,\n+          \"path\": \".claude/skills/git-changes-reporter/SKILL.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/SKILL.md b/.claude/skills/git-changes-reporter/SKILL.md\\nindex 89141fbc9..00d6b0a3f 100644\\n--- a/.claude/skills/git-changes-reporter/SKILL.md\\n+++ b/.claude/skills/git-changes-reporter/SKILL.md\\n@@ -8 +8 @@ description: 生成结构化 git 变更报告，包含原始 JSON 数据和语\\n-## 概述\\n+## 何时使用本 Skill\\n@@ -10 +10 @@ description: 生成结构化 git 变更报告，包含原始 JSON 数据和语\\n-本技能提供两阶段 git 变更分析工作流：首先生成结构化 JSON 原始数据，然后基于 JSON 和代码解读生成语义化 Markdown 报告。JSON 数据为 Agent 提供完整上下文，Markdown 报告为工程师提供可读摘要。\\n+满足以下任一条件时，应使用本 Skill：\\n@@ -12 +12,4 @@ description: 生成结构化 git 变更报告，包含原始 JSON 数据和语\\n-## 工作流决策树\\n+- 需要为人类工程师生成可读的变更摘要（团队同步、代码审查、发布说明）\\n+- 需要为 Agent 提供完整 git 变更上下文以回答后续问题\\n+- CI/CD 流水线中需要存储和分析变更记录\\n+- 用户提到\\\"近期改动\\\"、\\\"commit 摘要\\\"、\\\"release note\\\"等需求\\n@@ -14,9 +17,19 @@ description: 生成结构化 git 变更报告，包含原始 JSON 数据和语\\n-```mermaid\\n-graph TD\\n-    A[用户请求变更报告] --> B{需要原始数据还是语义报告?}\\n-    B -->|仅需原始数据| C[运行 generate-json.js]\\n-    B -->|需要语义报告| D[运行 generate-json.js]\\n-    D --> E[基于 JSON 生成 Markdown 报告]\\n-    C --> F[输出 JSON 文件]\\n-    E --> G[输出 Markdown 报告]\\n-```\\n+**不要使用本 Skill 的情况**：\\n+\\n+- 仅需列出 commit 列表（直接用 `git log`）\\n+- 单个 commit 的详细分析（直接用 `git show`）\\n+\\n+## 核心原则\\n+\\n+### Agent 主导判断\\n+\\n+- **脚本**：只负责数据收集，不做内容选择\\n+- **Agent**：阅读数据，判断重要性，选择展示内容，撰写分析\\n+\\n+### 简洁至上\\n+\\n+上下文是共享资源。报告应该：\\n+\\n+- **聚焦意图**：不仅说\\\"做了什么\\\"，更要说\\\"为什么\\\"\\n+- **代码片段优先**：5-15 行核心代码胜过长篇解释\\n+- **结构化呈现**：用列表和表格而非段落堆砌\\n@@ -24 +37 @@ graph TD\\n-## 第一阶段：生成结构化 JSON 数据\\n+### 渐进式披露\\n@@ -26 +39 @@ graph TD\\n-### 何时使用\\n+三个分析深度级别：\\n@@ -28,3 +41,3 @@ graph TD\\n-- 需要为 Agent 提供完整 git 变更上下文\\n-- 需要原始数据用于进一步处理或分析\\n-- CI/CD 流水线中存储变更记录\\n+- **Level 1 (基础)**：统计信息、目录热度、贡献者分析\\n+- **Level 2 (中级)**：含代码片段、风险识别、领域聚类（**默认**）\\n+- **Level 3 (深度)**：含调用关系、完整风险评估、详细影响分析\\n@@ -32 +45 @@ graph TD\\n-### 使用方法\\n+## 工作流程\\n@@ -34 +47,3 @@ graph TD\\n-运行脚本生成 JSON：\\n+### 阶段一：生成结构化 JSON\\n+\\n+**目的**：收集原始数据，自动提取代码片段和风险指标\\n@@ -40,5 +55 @@ graph TD\\n-**参数说明**：\\n-\\n-- `<old_commit>`：起始提交引用（commit hash、tag、branch）\\n-- `<new_commit>`：结束提交引用\\n-- `[output_path]`：可选输出路径，默认 `docs/reports/git-changes-YYYY-MM-DD.json`\\n+**输出内容**：\\n@@ -46 +57,11 @@ graph TD\\n-**示例**：\\n+- `commits[]`：每个 commit 的详细信息\\n+  - `short`：短哈希（用于引用）\\n+  - `subject`：提交主题\\n+  - `conventionalCommit`：解析的 feat/fix/refactor 等类型\\n+  - `files[]`：变更文件列表\\n+    - `path`：文件路径\\n+    - `changeType`：added/modified/deleted/renamed\\n+    - `codeSnippets[]`：自动提取的函数/类/接口定义（最多 15 行）\\n+- `analysis.domains[]`：自动识别的技术领域\\n+- `analysis.riskIndicators[]`：风险指标（breaking_change/large_refactor/no_tests/api_change）\\n+- `contributors[]`：贡献者统计\\n@@ -48,3 +69 @@ graph TD\\n-```bash\\n-# 分析最近 10 个提交\\n-.claude/skills/git-changes-reporter/scripts/generate-json.js HEAD~10 HEAD\\n+### 阶段二：Agent 阅读 JSON 并生成报告\\n@@ -52,3 +71 @@ graph TD\\n-# 指定输出路径\\n-.claude/skills/git-changes-reporter/scripts/generate-json.js v1.0.0 HEAD ./reports/changes.json\\n-```\\n+**Agent 职责**：\\n@@ -56,37 +73,4 @@ graph TD\\n-### JSON 数据结构\\n-\\n-生成的 JSON 包含以下字段：\\n-\\n-```json\\n-{\\n-  \\\"range\\\": {\\n-    \\\"old\\\": \\\"起始提交引用\\\",\\n-    \\\"new\\\": \\\"结束提交引用\\\",\\n-    \\\"label\\\": \\\"显示标签\\\",\\n-    \\\"startDate\\\": \\\"起始日期\\\",\\n-    \\\"endDate\\\": \\\"结束日期\\\",\\n-    \\\"commitCount\\\": \\\"提交数量\\\",\\n-    \\\"generatedAt\\\": \\\"生成时间\\\"\\n-  },\\n-  \\\"contributors\\\": [{ \\\"name\\\": \\\"作者名\\\", \\\"email\\\": \\\"邮箱\\\", \\\"commits\\\": \\\"提交数\\\" }],\\n-  \\\"topDirs\\\": [{ \\\"dir\\\": \\\"目录名\\\", \\\"fileCount\\\": \\\"文件数\\\" }],\\n-  \\\"commits\\\": [\\n-    {\\n-      \\\"hash\\\": \\\"完整提交哈希\\\",\\n-      \\\"short\\\": \\\"短哈希\\\",\\n-      \\\"author\\\": \\\"作者\\\",\\n-      \\\"email\\\": \\\"邮箱\\\",\\n-      \\\"authoredAt\\\": \\\"提交时间\\\",\\n-      \\\"subject\\\": \\\"提交信息\\\",\\n-      \\\"files\\\": [\\n-        {\\n-          \\\"path\\\": \\\"文件路径\\\",\\n-          \\\"additions\\\": \\\"新增行数\\\",\\n-          \\\"deletions\\\": \\\"删除行数\\\",\\n-          \\\"patch\\\": \\\"差异内容\\\"\\n-        }\\n-      ]\\n-    }\\n-  ]\\n-}\\n-```\\n+1. 分段读取 JSON 文件（按需读取，避免超出 token 限制）\\n+2. 理解变更的技术意图和业务影响\\n+3. 选择重要的代码片段展示\\n+4. 按照下方模板格式输出最终 Markdown 报告\\n@@ -94 +78 @@ graph TD\\n-### 脚本详情\\n+**读取策略**（JSON 文件可能较大）：\\n@@ -96 +80,3 @@ graph TD\\n-参见 [scripts/generate-json.js](scripts/generate-json.js) 了解实现细节。该脚本：\\n+```bash\\n+# 读取概览信息\\n+Read JSON offset=0 limit=100  # meta, contributors, analysis 部分\\n@@ -98,4 +84,3 @@ graph TD\\n-- 验证 git 仓库状态\\n-- 收集提交范围信息\\n-- 提取每个提交的文件变更和 patch\\n-- 生成结构化 JSON 输出\\n+# 按需读取具体 commit\\n+Read JSON offset=X limit=200  # 特定 commit 的详细信息\\n+```\\n@@ -103 +88 @@ graph TD\\n-## 第二阶段：生成语义化 Markdown 报告\\n+### 阶段三：质量验证\\n@@ -105 +90 @@ graph TD\\n-### 何时使用\\n+**目的**：确保报告符合质量要求\\n@@ -107,4 +92,3 @@ graph TD\\n-- 需要人类可读的变更摘要\\n-- 团队同步或代码审查\\n-- 发布说明或变更日志\\n-- 为工程师提供快速概览\\n+```bash\\n+.claude/skills/git-changes-reporter/scripts/validate-report.js <markdown_file>\\n+```\\n@@ -112 +96 @@ graph TD\\n-### 工作流程\\n+## 报告模板\\n@@ -114,4 +98 @@ graph TD\\n-1. **加载 JSON 数据**：首先运行 `generate-json.js` 生成或加载现有 JSON 文件\\n-2. **分析代码变更**：读取 JSON 中的 commits 和 files，必要时查看实际代码文件\\n-3. **语义聚类**：按技术领域分组提交（错误处理、安全、功能、重构等）\\n-4. **生成报告**：基于分析结果撰写 Markdown\\n+Agent 应按以下结构输出报告：\\n@@ -119 +100 @@ graph TD\\n-### 报告结构模板\\n+> 详细模板见 [references/report-template.md](references/report-template.md)\\n@@ -121 +102,2 @@ graph TD\\n-报告应包含以下部分：\\n+````markdown\\n+# Git 变更报告（<old_commit>..<new_commit>）\\n@@ -123,2 +105,2 @@ graph TD\\n-```markdown\\n-# Git 变更报告（<提交范围>）\\n+> **时间范围**：YYYY-MM-DD 至 YYYY-MM-DD\\n+> **分析深度**：Level 2\\n@@ -128,4 +110,4 @@ graph TD\\n-- 时间范围：<startDate> 至 <endDate>\\n-- 提交数量：<commitCount>\\n-- 主要贡献者：<前 3 位作者>\\n-- 热点目录：<前 3 个目录>\\n+- **提交数量**：N\\n+- **主要贡献者**：Author1 (X commits), Author2 (Y commits)\\n+- **热点目录**：`apps` (N 文件), `common` (M 文件)\\n+- **风险指标**：⚠️ N 个高风险项\\n@@ -133 +115 @@ graph TD\\n-## 2. 改动聚焦领域\\n+## 2. 核心变更\\n@@ -135 +117 @@ graph TD\\n-### 2.1 <领域 1：如错误处理与观测>\\n+### 2.1 [变更主题/领域名称]\\n@@ -137,6 +119,2 @@ graph TD\\n-- **涉及目录**：<目录列表>\\n-- **关键提交**：<短哈希列表及主题>\\n-- **核心改动**：\\n-  - <文件路径>：<改动描述>\\n-  - <文件路径>：<改动描述>\\n-- **设计意图**：<从代码和提交信息推断>\\n+**相关提交**：`hash1`, `hash2`\\n+**作者**：Author Name\\n@@ -144 +122,2 @@ graph TD\\n-### 2.2 <领域 2：如安全与鉴权>\\n+**设计意图**：\\n+[解释为什么做这个改动，业务背景，技术动机。至少 50 字。]\\n@@ -146 +125,2 @@ graph TD\\n-...\\n+**核心代码**：\\n+[file.ts:L42-L58](path/to/file.ts#L42-L58)\\n@@ -148 +128,7 @@ graph TD\\n-## 3. 贡献者分析\\n+```typescript\\n+// 选择最能体现设计意图的 5-15 行代码\\n+const example = () => {\\n+  // ...\\n+};\\n+```\\n+````\\n@@ -150,3 +136 @@ graph TD\\n-| 作者   | 提交数 | 主要领域 |\\n-| ------ | ------ | -------- |\\n-| <作者> | <数量> | <领域>   |\\n+**影响范围**：\\n@@ -154 +138,2 @@ graph TD\\n-## 4. 技术影响与风险\\n+- 影响模块：`module-a`, `module-b`\\n+- 需要关注：[具体的注意事项]\\n@@ -156,4 +141 @@ graph TD\\n-- **兼容性影响**：<描述>\\n-- **配置变更**：<描述>\\n-- **性能影响**：<描述>\\n-- **测试覆盖**：<描述>\\n+### 2.2 [下一个变更主题]\\n@@ -161 +143 @@ graph TD\\n-## 5. 单提交摘要（附录）\\n+...\\n@@ -163 +145 @@ graph TD\\n-### <短哈希> <作者> | <日期> | <标签>\\n+## 3. 贡献者\\n@@ -165 +147,3 @@ graph TD\\n-**主题**：<原提交主题>\\n+| 作者 | 提交数 | 主要工作 | 关键提交 |\\n+| ---- | ------ | -------- | -------- |\\n+| Name | N      | 简述贡献 | `hash`   |\\n@@ -167 +151 @@ graph TD\\n-**变更要点**：\\n+## 4. 风险评估\\n@@ -169,3 +153 @@ graph TD\\n-- <文件/目录>：<具体改动与目的>\\n-- <接口/协议>：<变更描述>\\n-- <行为/数据流>：<运行时影响>\\n+### 兼容性影响\\n@@ -173 +155 @@ graph TD\\n-**风险/影响**：\\n+[具体描述 API 变更、配置格式变化，列出受影响的模块/服务]\\n@@ -175 +157 @@ graph TD\\n-- <兼容性/配置/依赖影响>\\n+### 配置变更\\n@@ -177,2 +159 @@ graph TD\\n-**测试**：<测试文件或\\\"未见测试记录\\\">\\n-```\\n+[新增、修改或删除的配置项]\\n@@ -180 +161 @@ graph TD\\n-### 写作指南\\n+### 性能影响\\n@@ -182 +163 @@ graph TD\\n-#### 语义聚类原则\\n+[可能影响性能的变更]\\n@@ -184,6 +165 @@ graph TD\\n-- **错误处理与观测**：异常处理、日志、监控、指标\\n-- **安全与鉴权**：认证、授权、加密、输入验证\\n-- **功能开发**：新特性、API 扩展、业务逻辑\\n-- **重构与优化**：代码整理、性能优化、架构调整\\n-- **运维与部署**：配置、脚本、CI/CD、文档\\n-- **依赖更新**：包版本升级、第三方库变更\\n+### 测试覆盖\\n@@ -191 +167 @@ graph TD\\n-#### 文件引用格式\\n+[测试文件变更情况，是否有测试覆盖]\\n@@ -193,3 +169 @@ graph TD\\n-- 使用完整路径：`apps/vendor-aster/src/quote.ts`\\n-- 包含行号范围：`libraries/protocol/src/terminal.ts:138-143`\\n-- 链接到代码：在 IDE 环境中使用可点击链接格式\\n+````\\n@@ -197 +171 @@ graph TD\\n-#### 提交引用格式\\n+## 关键要求\\n@@ -199,3 +173 @@ graph TD\\n-- 短哈希：`03a48cfc4`\\n-- 带主题：`03a48cfc4 (feat: enforce terminal_id...)`\\n-- 在描述中显式关联：`在 03a48cfc4 中，CZ 改进了...`\\n+### 1. 代码片段\\n@@ -203 +175,3 @@ graph TD\\n-**⚠️ 重要警告：不要使用 JSON 文件行号作为 commit ID**\\n+- 每个核心变更**必须**包含代码片段或带行号的文件引用\\n+- 代码片段长度：5-15 行\\n+- **选择标准**：最能体现设计意图的代码，而非随机选取\\n@@ -205,4 +179 @@ graph TD\\n-- JSON 文件中的行号（如 `1279`、`703`）只是文件位置，不是 commit 标识符\\n-- 正确的 commit ID 在 JSON 的 `\\\"short\\\"` 字段中（如 `\\\"a9300e76f\\\"`）\\n-- 错误示例：`1279`（行号） ❌\\n-- 正确示例：`a9300e76f`（短哈希） ✅\\n+### 2. 设计意图\\n@@ -210 +181,3 @@ graph TD\\n-#### 语气与风格\\n+- **必须**回答\\\"为什么做这个改动\\\"\\n+- **禁止**仅描述\\\"做了什么\\\"\\n+- 至少 50 个字符的实质性内容\\n@@ -212,4 +185 @@ graph TD\\n-- **客观专业**：面向工程同事，基于事实\\n-- **简明扼要**：短段落，列表优先，表格用于比较\\n-- **中英混合**：正文使用中文，代码/命令使用英文\\n-- **聚焦意图**：不仅描述\\\"做了什么\\\"，还要解释\\\"为什么\\\"\\n+### 3. 引用格式\\n@@ -217 +187 @@ graph TD\\n-### 质量检查清单\\n+**文件引用**：`[file.ts:L42-L58](path/to/file.ts#L42-L58)`\\n@@ -219 +189 @@ graph TD\\n-生成报告后检查：\\n+**Commit 引用**：使用 JSON 中的 `short` 字段（如 `a9300e76f`）\\n@@ -221,7 +191 @@ graph TD\\n-- [ ] 范围正确，起止提交无误\\n-- [ ] 每个技术领域有具体文件引用\\n-- [ ] 作者贡献分析完整\\n-- [ ] 识别了潜在风险和建议\\n-- [ ] 单提交摘要覆盖关键点\\n-- [ ] 报告结构清晰，易于导航\\n-- [ ] **commit 引用使用正确的短哈希，而不是 JSON 文件行号**\\n+### 4. 内容选择原则\\n@@ -229 +193 @@ graph TD\\n-## 高级用法\\n+Agent 应根据以下优先级选择展示内容：\\n@@ -231 +195,4 @@ graph TD\\n-### GitHub Commit 链接生成\\n+1. **Breaking changes**：API 变更、接口删除\\n+2. **新功能**：feat 类型的核心实现\\n+3. **重要修复**：影响用户的 bug fix\\n+4. **架构变更**：refactor 涉及多文件的改动\\n@@ -233 +200,4 @@ graph TD\\n-对于 GitHub 仓库，可以使用附加脚本生成 commit 链接：\\n+**可以省略**：\\n+- 版本号更新（chore: bump version）\\n+- 纯文档变更\\n+- 自动生成的 CHANGELOG\\n@@ -235,3 +205 @@ graph TD\\n-```bash\\n-.claude/skills/git-changes-reporter/scripts/generate-github-links.js <json_file> <repo_url>\\n-```\\n+## 示例\\n@@ -239,34 +207 @@ graph TD\\n-该脚本会为 JSON 中的每个 commit 添加 `githubUrl` 字段，格式为：`https://github.com/<owner>/<repo>/commit/<hash>`\\n-\\n-### CI/CD 集成示例\\n-\\n-在 GitHub Actions 中每日生成报告：\\n-\\n-```yaml\\n-name: Daily Change Report\\n-on:\\n-  schedule:\\n-    - cron: '0 9 * * *' # 每天 9:00 UTC\\n-  workflow_dispatch:\\n-\\n-jobs:\\n-  generate-report:\\n-    runs-on: ubuntu-latest\\n-    steps:\\n-      - uses: actions/checkout@v4\\n-        with:\\n-          fetch-depth: 0 # 获取完整历史\\n-\\n-      - name: Generate JSON data\\n-        run: |\\n-          .claude/skills/git-changes-reporter/scripts/generate-json.js \\\\\\n-            \\\"$(git rev-list -n 1 --before='24 hours ago' HEAD)\\\" \\\\\\n-            HEAD \\\\\\n-            ./reports/daily-changes.json\\n-\\n-      - name: Upload artifact\\n-        uses: actions/upload-artifact@v4\\n-        with:\\n-          name: daily-change-report\\n-          path: ./reports/\\n-```\\n+### 好的报告示例\\n@@ -274 +209,2 @@ jobs:\\n-> **完整自动化工作流**：项目中包含完整的 GitHub Actions 工作流文件 `.github/workflows/daily-git-report.yml`，使用 `claude-code-action` 配置 DeepSeek API 自动生成报告并创建 PR。\\n+```markdown\\n+### 2.1 Binance 请求间隔优化\\n@@ -276 +212,2 @@ jobs:\\n-### 与现有工具集成\\n+**相关提交**：`b285cde59`\\n+**作者**：Siyuan Wang\\n@@ -278,3 +215,4 @@ jobs:\\n-- **JIRA/GitHub Issues**：在报告中引用相关 issue ID\\n-- **Slack/Teams**：生成简要摘要发送到聊天频道\\n-- **文档系统**：将报告集成到内部 wiki 或文档站点\\n+**设计意图**：\\n+通过动态计算 API 限速参数，自动调整请求间隔，避免触发交易所限速机制。\\n+此前使用固定间隔 500ms，在高频场景下仍会触发限速；现在根据交易所返回的\\n+rateLimits 配置动态计算安全间隔（duration/limit），确保稳定性。\\n@@ -282 +220,15 @@ jobs:\\n-## 故障排除\\n+**核心代码**：\\n+[quote.ts:L65-L78](apps/vendor-binance/src/public-data/quote.ts#L65-L78)\\n+```typescript\\n+const getRequestIntervalMs = (rateLimits: IRateLimit[], fallbackMs: number) => {\\n+  const intervals: number[] = [];\\n+  for (const item of rateLimits ?? []) {\\n+    if (item.rateLimitType !== 'REQUEST_WEIGHT') continue;\\n+    const duration = toIntervalMs(item.interval, item.intervalNum);\\n+    const limit = item.limit;\\n+    if (duration == null || limit == null) continue;\\n+    intervals.push(Math.ceil(duration / limit));\\n+  }\\n+  return Math.max(fallbackMs, Math.max(...intervals));\\n+};\\n+````\\n@@ -284 +236 @@ jobs:\\n-### 常见问题\\n+**影响范围**：\\n@@ -286,4 +238,2 @@ jobs:\\n-1. **无提交找到**：检查提交引用是否存在，确认仓库有足够历史\\n-2. **JSON 解析错误**：确保脚本在 git 仓库根目录运行\\n-3. **权限问题**：确认有权限创建输出目录\\n-4. **内存不足**：对于大量提交，考虑增加 Node.js 内存限制\\n+- 影响模块：`vendor-binance`, `vendor-aster`（使用相同模式）\\n+- 期货和现货数据流均受益\\n@@ -291 +241 @@ jobs:\\n-### 性能优化\\n+````\\n@@ -293,4 +243 @@ jobs:\\n-- 对于大型提交范围（>100 commits），考虑：\\n-  - 使用 `--no-patch` 选项减少内存使用\\n-  - 分批处理提交\\n-  - 仅分析关键目录\\n+### 差的报告示例（避免）\\n@@ -298 +245,2 @@ jobs:\\n-## 资源\\n+```markdown\\n+### 2.1 更新代码\\n@@ -300 +248 @@ jobs:\\n-### 脚本文件\\n+**相关提交**：`1279`, `703`  ❌ 使用了行号而非 commit hash\\n@@ -302,2 +250,2 @@ jobs:\\n-- [generate-json.js](scripts/generate-json.js) - 生成结构化 JSON 数据\\n-- [generate-github-links.js](scripts/generate-github-links.js) - 为 commit 添加 GitHub 链接\\n+**设计意图**：\\n+添加了 getRequestIntervalMs 函数。  ❌ 只说了做什么，没说为什么\\n@@ -305 +253,2 @@ jobs:\\n-### 报告模板\\n+**核心改动**：优化了请求间隔逻辑  ❌ 没有代码片段\\n+````\\n@@ -307 +256,7 @@ jobs:\\n-- [report-template.md](references/report-template.md) - 详细的报告结构、写作指南和示例\\n+## 故障排除\\n+\\n+| 问题                      | 解决方案                                          |\\n+| ------------------------- | ------------------------------------------------- |\\n+| JSON 文件太大无法一次读取 | 分段读取：先读 meta/analysis，再按需读具体 commit |\\n+| 不确定哪些变更重要        | 优先看 riskIndicators 和 conventionalCommit 类型  |\\n+| Commit 数量太多           | 按领域分组，相似变更合并描述                      |\\n@@ -309 +264 @@ jobs:\\n-### 脚本文档\\n+## 参考资源\\n@@ -311 +266,3 @@ jobs:\\n-- [scripts/README.md](scripts/README.md) - 脚本使用说明和示例\\n+- [references/report-template.md](references/report-template.md)：完整模板示例\\n+- [references/bad-examples.md](references/bad-examples.md)：反面示例\\n+- [scripts/README.md](scripts/README.md)：脚本使用文档\\n@@ -313 +270 @@ jobs:\\n-### 参考实现\\n+---\\n@@ -315 +272,2 @@ jobs:\\n-基于现有 `recent-changes-digest` 技能改进，提供更规范的接口和更清晰的文档。\\n+**版本**：3.0.0\\n+**上次更新**：2025-12-06\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"example\",\n+              \"code\": \"const example = () => {\\n  // ...\\n};\\n```\\n````\\n**影响范围**：\\n- 影响模块：`module-a`, `module-b`\\n- 需要关注：[具体的注意事项]\\n### 2.2 [下一个变更主题]\\n...\\n## 3. 贡献者\\n| 作者 | 提交数 | 主要工作 | 关键提交 |\\n| ---- | ------ | -------- | -------- |\\n| Name | N      | 简述贡献 | `hash`   |\\n## 4. 风险评估\",\n+              \"lineStart\": 130,\n+              \"lineEnd\": 222\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"getRequestIntervalMs\",\n+              \"code\": \"const getRequestIntervalMs = (rateLimits: IRateLimit[], fallbackMs: number) => {\",\n+              \"lineStart\": 223,\n+              \"lineEnd\": 223\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"intervals\",\n+              \"code\": \"const intervals: number[] = [];\",\n+              \"lineStart\": 224,\n+              \"lineEnd\": 224\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"item\",\n+              \"code\": \"for (const item of rateLimits ?? []) {\\n  if (item.rateLimitType !== 'REQUEST_WEIGHT') continue;\",\n+              \"lineStart\": 225,\n+              \"lineEnd\": 226\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"duration\",\n+              \"code\": \"const duration = toIntervalMs(item.interval, item.intervalNum);\",\n+              \"lineStart\": 227,\n+              \"lineEnd\": 227\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"limit\",\n+              \"code\": \"    const limit = item.limit;\\n    if (duration == null || limit == null) continue;\\n    intervals.push(Math.ceil(duration / limit));\\n  }\\n  return Math.max(fallbackMs, Math.max(...intervals));\\n};\\n````\\n**影响范围**：\\n- 影响模块：`vendor-binance`, `vendor-aster`（使用相同模式）\\n- 期货和现货数据流均受益\\n````\\n### 差的报告示例（避免）\\n```markdown\\n### 2.1 更新代码\\n**相关提交**：`1279`, `703`  ❌ 使用了行号而非 commit hash\",\n+              \"lineStart\": 228,\n+              \"lineEnd\": 274\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 290,\n+          \"deletions\": 0,\n+          \"path\": \".claude/skills/git-changes-reporter/references/bad-examples.md\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/references/bad-examples.md b/.claude/skills/git-changes-reporter/references/bad-examples.md\\nnew file mode 100644\\nindex 000000000..1b983a158\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/references/bad-examples.md\\n@@ -0,0 +1,290 @@\\n+# 不合格报告示例集\\n+\\n+本文档收集常见的报告质量问题，帮助 Agent 识别并避免这些错误。\\n+\\n+## 目录\\n+\\n+1. [使用 JSON 行号作为 Commit ID](#1-使用-json-行号作为-commit-id)\\n+2. [缺少代码片段](#2-缺少代码片段)\\n+3. [设计意图仅描述\\\"做了什么\\\"](#3-设计意图仅描述做了什么)\\n+4. [风险评估过于笼统](#4-风险评估过于笼统)\\n+5. [缺少文件行号引用](#5-缺少文件行号引用)\\n+6. [贡献者表格缺少关键提交列](#6-贡献者表格缺少关键提交列)\\n+\\n+---\\n+\\n+## 1. 使用 JSON 行号作为 Commit ID\\n+\\n+### ❌ 错误示例\\n+\\n+```markdown\\n+### 2.1 API 请求优化与限速\\n+\\n+- **关键提交**：`1279`, `703`, `856`\\n+- **核心改动**：...\\n+```\\n+\\n+### 为什么错误\\n+\\n+- `1279`、`703` 是 JSON 文件的行号，不是 commit ID\\n+- JSON 文件结构变化后，这些数字会指向错误的 commit\\n+- 无法通过行号查找 commit 历史\\n+\\n+### ✅ 正确示例\\n+\\n+```markdown\\n+### 2.1 API 请求优化与限速\\n+\\n+- **关键提交**：\\n+  - [`b285cde59`](#b285cde59): 添加请求间隔处理以优化 Binance 数据请求\\n+  - [`76802e0c0`](#76802e0c0): 添加请求间隔处理以优化 Aster 数据请求\\n+- **核心改动**：...\\n+```\\n+\\n+### 如何修复\\n+\\n+在 JSON 文件中查找 `\\\"short\\\"` 字段：\\n+\\n+```json\\n+{\\n+  \\\"hash\\\": \\\"b285cde59c6a9f7b3e5d4a2c1f8e9b7a6c5d4e3f\\\",\\n+  \\\"short\\\": \\\"b285cde59\\\",  // ← 使用这个作为 commit ID\\n+  \\\"author\\\": \\\"Siyuan Wang\\\",\\n+  ...\\n+}\\n+```\\n+\\n+---\\n+\\n+## 2. 缺少代码片段\\n+\\n+### ❌ 错误示例\\n+\\n+```markdown\\n+### 2.1 API 请求优化与限速\\n+\\n+- **核心改动**：\\n+  - 新增 `getRequestIntervalMs()` 函数\\n+  - 优化了请求间隔逻辑\\n+  - 修改了 quote.ts 文件\\n+```\\n+\\n+### 为什么错误\\n+\\n+- 读者无法直接看到核心逻辑\\n+- 需要额外打开文件才能理解改动\\n+- 缺少关键代码的行号定位\\n+\\n+### ✅ 正确示例\\n+\\n+````markdown\\n+### 2.1 API 请求优化与限速\\n+\\n+- **核心改动**：\\n+  - [quote.ts:L65-L78](apps/vendor-binance/src/public-data/quote.ts#L65-L78)：新增 `getRequestIntervalMs()` 函数，动态计算安全请求间隔：\\n+    ```typescript\\n+    const getRequestIntervalMs = (rateLimits: IRateLimit[] | undefined, fallbackMs: number) => {\\n+      const intervals: number[] = [];\\n+      for (const item of rateLimits ?? []) {\\n+        if (item.rateLimitType !== 'REQUEST_WEIGHT' && item.rateLimitType !== 'RAW_REQUESTS') continue;\\n+        const duration = toIntervalMs(item.interval, item.intervalNum);\\n+        const limit = item.limit;\\n+        if (duration == null || limit == null || limit <= 0) continue;\\n+        intervals.push(Math.ceil(duration / limit)); // ← 关键逻辑\\n+      }\\n+      return Math.max(fallbackMs, Math.max(...intervals));\\n+    };\\n+    ```\\n+    该函数通过解析交易所的 `rateLimits` 配置，计算每个限速规则的最小间隔（duration/limit），\\n+    然后取最大值作为安全间隔，确保不触发任何限速规则。\\n+````\\n+\\n+---\\n+\\n+## 3. 设计意图仅描述\\\"做了什么\\\"\\n+\\n+### ❌ 错误示例\\n+\\n+```markdown\\n+- **设计意图**：添加了 `getRequestIntervalMs` 函数用于计算请求间隔。\\n+```\\n+\\n+### 为什么错误\\n+\\n+- 仅重复了代码中已经明显的信息\\n+- 未解释为什么需要这个函数\\n+- 未说明解决了什么问题或带来什么好处\\n+\\n+### ✅ 正确示例\\n+\\n+```markdown\\n+- **设计意图**：交易所 API 有多种限速规则（按权重、按请求数等），硬编码间隔\\n+  容易触发限速导致服务不稳定。通过动态解析 API 响应中的 `rateLimits` 配置，\\n+  自动计算满足所有规则的最小安全间隔，实现了：\\n+  1. **自适应限速**：不同交易所、不同接口的限速规则自动适配\\n+  2. **最大吞吐**：在不触发限速的前提下使用最短间隔\\n+  3. **代码复用**：该函数被 `futureRequestInterval$` 和 `spotRequestInterval$` 共享\\n+```\\n+\\n+### 判断标准\\n+\\n+好的设计意图说明应该回答：\\n+\\n+- 为什么需要这个改动？（解决什么问题）\\n+- 这个改动如何解决问题？（方案选择理由）\\n+- 这个改动的影响范围？（谁会用到）\\n+\\n+---\\n+\\n+## 4. 风险评估过于笼统\\n+\\n+### ❌ 错误示例\\n+\\n+```markdown\\n+### 兼容性影响\\n+\\n+- API 有变更，调用方需要注意\\n+- 可能影响现有功能\\n+```\\n+\\n+### 为什么错误\\n+\\n+- 未列出具体受影响的模块或服务\\n+- 未说明具体需要做什么改动\\n+- 未评估影响严重程度\\n+\\n+### ✅ 正确示例\\n+\\n+```markdown\\n+### 兼容性影响\\n+\\n+**高风险**：Bitget API 重构（`65358bffa`）\\n+\\n+- **变更内容**：删除了 `src/services/accounts/futures.ts` 和 `spot.ts`，\\n+  改用统一的 `account.ts`\\n+- **受影响服务**：\\n+  - `apps/trading-bot/src/strategies/bitget-arbitrage.ts`：依赖 `getFuturesAccount()`\\n+  - `apps/risk-monitor/src/providers/bitget.ts`：依赖 `getSpotAccount()`\\n+  - `apps/portfolio-tracker/src/integrations/bitget.ts`：同时使用两个接口\\n+- **迁移要求**：\\n+  - 修改导入路径：`from './accounts/futures'` → `from './accounts/account'`\\n+  - 更新函数调用：`getFuturesAccount()` → `getAccount('futures')`\\n+  - 无向后兼容层，**必须同步升级所有依赖服务**\\n+- **测试建议**：在 staging 环境验证账户查询和下单流程\\n+\\n+**中风险**：请求间隔优化（`b285cde59`, `76802e0c0`）\\n+\\n+- **性能影响**：数据刷新频率可能降低 20-30%（取决于交易所限速规则）\\n+- **业务影响**：高频交易策略可能需要调整参数\\n+- **配置选项**：可通过环境变量 `REQUEST_INTERVAL_OVERRIDE` 强制使用旧间隔（仅用于紧急回退）\\n+```\\n+\\n+### 判断标准\\n+\\n+好的风险评估应该包含：\\n+\\n+- 风险级别（高/中/低）\\n+- 具体受影响的文件/模块/服务\\n+- 需要采取的行动\\n+- 回退方案（如果有）\\n+\\n+---\\n+\\n+## 5. 缺少文件行号引用\\n+\\n+### ❌ 错误示例\\n+\\n+```markdown\\n+- **核心改动**：\\n+  - `apps/vendor-binance/src/public-data/quote.ts`：新增函数\\n+  - `apps/vendor-aster/src/services/markets/quote.ts`：同样优化\\n+```\\n+\\n+### 为什么错误\\n+\\n+- 读者需要手动打开文件并查找改动位置\\n+- 无法快速跳转到具体代码\\n+- 大文件中难以定位\\n+\\n+### ✅ 正确示例\\n+\\n+```markdown\\n+- **核心改动**：\\n+  - [quote.ts:L65-L78](apps/vendor-binance/src/public-data/quote.ts#L65-L78)：新增 `getRequestIntervalMs()` 函数\\n+  - [quote.ts:L95-L106](apps/vendor-binance/src/public-data/quote.ts#L95-L106)：在 `futureRequestInterval$` 中使用新函数\\n+  - [quote.ts:L220-L231](apps/vendor-binance/src/public-data/quote.ts#L220-L231)：在 `spotRequestInterval$` 中使用新函数\\n+```\\n+\\n+### 格式规范\\n+\\n+正确的文件引用格式：\\n+\\n+```markdown\\n+[显示名称:L 起始行-L 结束行](完整路径#L起始行-L结束行)\\n+```\\n+\\n+示例：\\n+\\n+```markdown\\n+[terminal.ts:L138-L143](libraries/protocol/src/terminal.ts#L138-L143)\\n+```\\n+\\n+---\\n+\\n+## 6. 贡献者表格缺少关键提交列\\n+\\n+### ❌ 错误示例\\n+\\n+```markdown\\n+## 3. 贡献者分析\\n+\\n+| 作者        | 提交数 | 主要领域           |\\n+| ----------- | ------ | ------------------ |\\n+| CZ          | 4      | API 优化、凭证管理 |\\n+| Siyuan Wang | 3      | 接口重构           |\\n+```\\n+\\n+### 为什么错误\\n+\\n+- 无法快速跳转到该作者的代表性提交\\n+- 难以评估贡献的具体内容\\n+\\n+### ✅ 正确示例\\n+\\n+```markdown\\n+## 3. 贡献者分析\\n+\\n+| 作者                | 提交数 | 主要领域                     | 关键提交    |\\n+| ------------------- | ------ | ---------------------------- | ----------- |\\n+| CZ                  | 4      | API 优化、凭证管理、利率处理 | `9b9495d1e` |\\n+| Siyuan Wang         | 3      | 接口重构、请求限速优化       | `65358bffa` |\\n+| humblelittlec1[bot] | 5      | 版本发布自动化               | `c36262cad` |\\n+```\\n+\\n+### 如何选择关键提交\\n+\\n+- 选择该作者改动最大的提交（按行数或文件数）\\n+- 选择技术难度最高或最具代表性的提交\\n+- 自动化提交（bot）可以选择最新的版本发布提交\\n+\\n+---\\n+\\n+## 总结检查清单\\n+\\n+在提交报告前，确保：\\n+\\n+- [ ] 所有 commit 引用使用短哈希（7 位十六进制），而非 JSON 行号\\n+- [ ] 每个技术领域至少有一个代码片段（5-15 行）或文件引用\\n+- [ ] 设计意图回答了\\\"为什么\\\"，至少 50 个汉字\\n+- [ ] 风险评估具体列出了受影响的模块/服务\\n+- [ ] 文件引用使用 `[name:L1-L10](path#L1-L10)` 格式\\n+- [ ] 贡献者表格有四列：作者、提交数、主要领域、关键提交\\n+- [ ] 所有 `<!-- TODO -->` 标记已移除\\n+\\n+---\\n+\\n+**提示**：使用 `validate-report.js` 自动检查这些问题：\\n+\\n+```bash\\n+node .claude/skills/git-changes-reporter/scripts/validate-report.js your-report.md\\n+```\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"getRequestIntervalMs\",\n+              \"code\": \"const getRequestIntervalMs = (rateLimits: IRateLimit[] | undefined, fallbackMs: number) => {\",\n+              \"lineStart\": 86,\n+              \"lineEnd\": 86\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"intervals\",\n+              \"code\": \"const intervals: number[] = [];\",\n+              \"lineStart\": 87,\n+              \"lineEnd\": 87\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"item\",\n+              \"code\": \"for (const item of rateLimits ?? []) {\\n  if (item.rateLimitType !== 'REQUEST_WEIGHT' && item.rateLimitType !== 'RAW_REQUESTS') continue;\",\n+              \"lineStart\": 88,\n+              \"lineEnd\": 89\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"duration\",\n+              \"code\": \"const duration = toIntervalMs(item.interval, item.intervalNum);\",\n+              \"lineStart\": 90,\n+              \"lineEnd\": 90\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"limit\",\n+              \"code\": \"        const limit = item.limit;\\n        if (duration == null || limit == null || limit <= 0) continue;\\n        intervals.push(Math.ceil(duration / limit)); // ← 关键逻辑\\n      }\\n      return Math.max(fallbackMs, Math.max(...intervals));\\n    };\\n    ```\\n    该函数通过解析交易所的 `rateLimits` 配置，计算每个限速规则的最小间隔（duration/limit），\\n    然后取最大值作为安全间隔，确保不触发任何限速规则。\\n````\\n\\n---\\n\\n## 3. 设计意图仅描述\\\"做了什么\\\"\\n\",\n+              \"lineStart\": 91,\n+              \"lineEnd\": 291\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 310,\n+          \"deletions\": 4,\n+          \"path\": \".claude/skills/git-changes-reporter/scripts/generate-json.js\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/generate-json.js b/.claude/skills/git-changes-reporter/scripts/generate-json.js\\nindex ebe60677f..0922ee16a 100755\\n--- a/.claude/skills/git-changes-reporter/scripts/generate-json.js\\n+++ b/.claude/skills/git-changes-reporter/scripts/generate-json.js\\n@@ -105,0 +106,156 @@ const getTopDirectories = async (oldRef, newRef) => {\\n+/**\\n+ * Parse conventional commit format\\n+ * @param {string} subject - Commit subject line\\n+ * @returns {{type: string, scope: string|null, breaking: boolean}}\\n+ */\\n+const parseConventionalCommit = (subject) => {\\n+  const conventionalRegex = /^(\\\\w+)(\\\\(([^)]+)\\\\))?(!)?:\\\\s*(.+)$/;\\n+  const match = subject.match(conventionalRegex);\\n+\\n+  if (!match) {\\n+    return { type: 'other', scope: null, breaking: false };\\n+  }\\n+\\n+  return {\\n+    type: match[1], // feat, fix, refactor, etc.\\n+    scope: match[3] || null,\\n+    breaking: match[4] === '!',\\n+  };\\n+};\\n+\\n+/**\\n+ * Extract code snippets from patch\\n+ * @param {string} patch - Git patch content\\n+ * @param {string} filePath - File path for context\\n+ * @returns {Array<{type: string, name: string, code: string, lineStart: number, lineEnd: number}>}\\n+ */\\n+const extractCodeSnippets = (patch, filePath) => {\\n+  if (!patch) return [];\\n+\\n+  const snippets = [];\\n+  const lines = patch.split('\\\\n');\\n+  let currentSnippet = null;\\n+  let lineNum = 0;\\n+\\n+  for (let i = 0; i < lines.length; i++) {\\n+    const line = lines[i];\\n+\\n+    // Track line numbers from hunk headers\\n+    const hunkMatch = line.match(/^@@ -\\\\d+(?:,\\\\d+)? \\\\+(\\\\d+)(?:,\\\\d+)? @@/);\\n+    if (hunkMatch) {\\n+      lineNum = parseInt(hunkMatch[1], 10);\\n+      continue;\\n+    }\\n+\\n+    // Skip diff headers\\n+    if (\\n+      line.startsWith('diff --git') ||\\n+      line.startsWith('index ') ||\\n+      line.startsWith('---') ||\\n+      line.startsWith('+++')\\n+    ) {\\n+      continue;\\n+    }\\n+\\n+    // Look for function/class definitions in added lines\\n+    if (line.startsWith('+')) {\\n+      const content = line.substring(1);\\n+\\n+      // Match function definitions\\n+      const funcMatch = content.match(/(?:export\\\\s+)?(?:async\\\\s+)?(?:function|const|let|var)\\\\s+(\\\\w+)/);\\n+      // Match class definitions\\n+      const classMatch = content.match(/(?:export\\\\s+)?class\\\\s+(\\\\w+)/);\\n+      // Match interface definitions (TypeScript)\\n+      const interfaceMatch = content.match(/(?:export\\\\s+)?interface\\\\s+(\\\\w+)/);\\n+\\n+      if (funcMatch || classMatch || interfaceMatch) {\\n+        if (currentSnippet && currentSnippet.lines.length > 0) {\\n+          // Save previous snippet if exists\\n+          // Dedent the code by removing common leading whitespace\\n+          const dedentedCode = dedentCode(currentSnippet.lines);\\n+          snippets.push({\\n+            type: currentSnippet.type,\\n+            name: currentSnippet.name,\\n+            code: dedentedCode,\\n+            lineStart: currentSnippet.lineStart,\\n+            lineEnd: lineNum - 1,\\n+          });\\n+        }\\n+\\n+        // Start new snippet\\n+        currentSnippet = {\\n+          type: funcMatch ? 'function' : classMatch ? 'class' : 'interface',\\n+          name: (funcMatch || classMatch || interfaceMatch)[1],\\n+          lines: [content],\\n+          lineStart: lineNum,\\n+        };\\n+      } else if (currentSnippet && currentSnippet.lines.length < 15) {\\n+        // Continue collecting lines for current snippet (max 15 lines)\\n+        currentSnippet.lines.push(content);\\n+      }\\n+\\n+      lineNum++;\\n+    } else if (!line.startsWith('-')) {\\n+      lineNum++;\\n+    }\\n+  }\\n+\\n+  // Save last snippet\\n+  if (currentSnippet && currentSnippet.lines.length > 0) {\\n+    const dedentedCode = dedentCode(currentSnippet.lines);\\n+    snippets.push({\\n+      type: currentSnippet.type,\\n+      name: currentSnippet.name,\\n+      code: dedentedCode,\\n+      lineStart: currentSnippet.lineStart,\\n+      lineEnd: lineNum - 1,\\n+    });\\n+  }\\n+\\n+  return snippets;\\n+};\\n+\\n+/**\\n+ * Remove common leading whitespace from code lines\\n+ * @param {string[]} lines - Array of code lines\\n+ * @returns {string} - Dedented code\\n+ */\\n+const dedentCode = (lines) => {\\n+  if (lines.length === 0) return '';\\n+\\n+  // Find minimum indentation (excluding empty lines)\\n+  let minIndent = Infinity;\\n+  for (const line of lines) {\\n+    if (line.trim().length === 0) continue; // Skip empty lines\\n+    const indent = line.match(/^\\\\s*/)[0].length;\\n+    minIndent = Math.min(minIndent, indent);\\n+  }\\n+\\n+  // If all lines are empty or no indentation found, return as-is\\n+  if (minIndent === Infinity || minIndent === 0) {\\n+    return lines.join('\\\\n');\\n+  }\\n+\\n+  // Remove common indentation\\n+  const dedented = lines.map((line) => {\\n+    if (line.trim().length === 0) return ''; // Keep empty lines empty\\n+    return line.substring(minIndent);\\n+  });\\n+\\n+  return dedented.join('\\\\n');\\n+};\\n+\\n+/**\\n+ * Determine change type from numstat\\n+ * @param {number|null} additions\\n+ * @param {number|null} deletions\\n+ * @returns {string}\\n+ */\\n+const getChangeType = (additions, deletions) => {\\n+  if (additions === null || deletions === null) return 'binary';\\n+  if (additions > 0 && deletions === 0) return 'added';\\n+  if (additions === 0 && deletions > 0) return 'deleted';\\n+  if (additions > 0 && deletions > 0) return 'modified';\\n+  return 'renamed';\\n+};\\n+\\n@@ -147 +303,13 @@ const getCommitDetails = async (oldRef, newRef) => {\\n-        files.push({ ...stat, patch });\\n+\\n+        // Extract code snippets from patch\\n+        const codeSnippets = extractCodeSnippets(patch, stat.path);\\n+\\n+        // Determine change type\\n+        const changeType = getChangeType(stat.additions, stat.deletions);\\n+\\n+        files.push({\\n+          ...stat,\\n+          changeType,\\n+          patch,\\n+          codeSnippets,\\n+        });\\n@@ -151 +319,6 @@ const getCommitDetails = async (oldRef, newRef) => {\\n-        files.push({ ...stat, patch: null });\\n+        files.push({\\n+          ...stat,\\n+          changeType: 'unknown',\\n+          patch: null,\\n+          codeSnippets: [],\\n+        });\\n@@ -155 +328,13 @@ const getCommitDetails = async (oldRef, newRef) => {\\n-    commits.push({ hash, short, author, email, authoredAt, subject, files });\\n+    // Parse conventional commit\\n+    const conventionalCommit = parseConventionalCommit(subject);\\n+\\n+    commits.push({\\n+      hash,\\n+      short,\\n+      author,\\n+      email,\\n+      authoredAt,\\n+      subject,\\n+      conventionalCommit,\\n+      files,\\n+    });\\n@@ -160,0 +346,107 @@ const getCommitDetails = async (oldRef, newRef) => {\\n+/**\\n+ * Analyze commits to identify technical domains\\n+ * @param {Array} commits - Array of commit objects\\n+ * @returns {Array<{name: string, commits: string[], files: string[]}>}\\n+ */\\n+const analyzeDomains = (commits) => {\\n+  const domainMap = new Map();\\n+\\n+  // Domain patterns based on file paths and commit types\\n+  const patterns = {\\n+    API请求优化与限速: {\\n+      paths: /src\\\\/(public-data|api|services).*\\\\/(quote|request|client)\\\\.ts/,\\n+      types: ['feat', 'perf'],\\n+    },\\n+    错误处理与观测: { paths: /error|log|monitor|metric|observe/, types: ['fix', 'refactor'] },\\n+    安全与鉴权: { paths: /auth|credential|sign|security|token/, types: ['feat', 'fix'] },\\n+    订单与交易: { paths: /order|trade|submit|cancel|modify/, types: ['feat', 'fix'] },\\n+    账户管理: { paths: /account|balance|position|margin/, types: ['feat', 'fix'] },\\n+    市场数据: { paths: /quote|price|ohlc|ticker|depth/, types: ['feat', 'fix'] },\\n+    接口重构: { paths: /api|interface|types/, types: ['refactor'] },\\n+    配置与环境: { paths: /config|env|\\\\.json|\\\\.yaml/, types: ['chore', 'feat'] },\\n+    测试: { paths: /test|spec|__tests__/, types: ['test'] },\\n+    文档: { paths: /README|CHANGELOG|\\\\.md/, types: ['docs'] },\\n+  };\\n+\\n+  for (const commit of commits) {\\n+    for (const [domainName, pattern] of Object.entries(patterns)) {\\n+      const matchesPath = commit.files.some((file) => pattern.paths.test(file.path));\\n+      const matchesType = pattern.types.includes(commit.conventionalCommit.type);\\n+\\n+      if (matchesPath || matchesType) {\\n+        if (!domainMap.has(domainName)) {\\n+          domainMap.set(domainName, { commits: new Set(), files: new Set() });\\n+        }\\n+        domainMap.get(domainName).commits.add(commit.short);\\n+        commit.files.forEach((file) => domainMap.get(domainName).files.add(file.path));\\n+      }\\n+    }\\n+  }\\n+\\n+  return Array.from(domainMap.entries()).map(([name, data]) => ({\\n+    name,\\n+    commits: Array.from(data.commits),\\n+    files: Array.from(data.files).slice(0, 10), // Limit to 10 files per domain\\n+  }));\\n+};\\n+\\n+/**\\n+ * Identify risk indicators from commits\\n+ * @param {Array} commits - Array of commit objects\\n+ * @returns {Array<{type: string, severity: string, details: string, commits: string[]}>}\\n+ */\\n+const identifyRisks = (commits) => {\\n+  const risks = [];\\n+\\n+  // Check for breaking changes\\n+  const breakingCommits = commits.filter((c) => c.conventionalCommit.breaking);\\n+  if (breakingCommits.length > 0) {\\n+    risks.push({\\n+      type: 'breaking_change',\\n+      severity: 'high',\\n+      details: `${breakingCommits.length} 个提交标记为破坏性变更`,\\n+      commits: breakingCommits.map((c) => c.short),\\n+    });\\n+  }\\n+\\n+  // Check for large refactoring\\n+  const largeRefactors = commits.filter(\\n+    (c) => c.conventionalCommit.type === 'refactor' && c.files.some((f) => f.deletions > 100),\\n+  );\\n+  if (largeRefactors.length > 0) {\\n+    risks.push({\\n+      type: 'large_refactor',\\n+      severity: 'medium',\\n+      details: `${largeRefactors.length} 个大规模重构提交（删除超过100行）`,\\n+      commits: largeRefactors.map((c) => c.short),\\n+    });\\n+  }\\n+\\n+  // Check for missing tests\\n+  const hasTestFiles = commits.some((c) => c.files.some((f) => /test|spec|__tests__/.test(f.path)));\\n+  const hasFeatOrFix = commits.some((c) => ['feat', 'fix'].includes(c.conventionalCommit.type));\\n+  if (hasFeatOrFix && !hasTestFiles) {\\n+    risks.push({\\n+      type: 'no_tests',\\n+      severity: 'medium',\\n+      details: '包含功能或修复提交但未见测试文件更新',\\n+      commits: [],\\n+    });\\n+  }\\n+\\n+  // Check for API/interface changes\\n+  const apiChanges = commits.filter((c) =>\\n+    c.files.some((f) => /api|interface|types/.test(f.path) && f.changeType !== 'added'),\\n+  );\\n+  if (apiChanges.length > 0) {\\n+    risks.push({\\n+      type: 'api_change',\\n+      severity: 'high',\\n+      details: `${apiChanges.length} 个提交修改了API或接口定义`,\\n+      commits: apiChanges.map((c) => c.short),\\n+    });\\n+  }\\n+\\n+  return risks;\\n+};\\n+\\n@@ -214,0 +507,7 @@ const main = async () => {\\n+  // Perform global analysis\\n+  console.info('Analyzing technical domains...');\\n+  const domains = analyzeDomains(commits);\\n+\\n+  console.info('Identifying risk indicators...');\\n+  const riskIndicators = identifyRisks(commits);\\n+\\n@@ -228,0 +528,4 @@ const main = async () => {\\n+    analysis: {\\n+      domains,\\n+      riskIndicators,\\n+    },\\n@@ -231 +534 @@ const main = async () => {\\n-      version: '1.0.0',\\n+      version: '2.0.0',\\n@@ -241,0 +545,3 @@ const main = async () => {\\n+  console.info(\\n+    `🔍 Analysis: ${domains.length} domains identified, ${riskIndicators.length} risk indicators found`,\\n+  );\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"parseConventionalCommit\",\n+              \"code\": \"const parseConventionalCommit = (subject) => {\",\n+              \"lineStart\": 111,\n+              \"lineEnd\": 111\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"conventionalRegex\",\n+              \"code\": \"const conventionalRegex = /^(\\\\w+)(\\\\(([^)]+)\\\\))?(!)?:\\\\s*(.+)$/;\",\n+              \"lineStart\": 112,\n+              \"lineEnd\": 112\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"match\",\n+              \"code\": \"  const match = subject.match(conventionalRegex);\\n\\n  if (!match) {\\n    return { type: 'other', scope: null, breaking: false };\\n  }\\n\\n  return {\\n    type: match[1], // feat, fix, refactor, etc.\\n    scope: match[3] || null,\\n    breaking: match[4] === '!',\\n  };\\n};\\n\\n/**\\n * Extract code snippets from patch\",\n+              \"lineStart\": 113,\n+              \"lineEnd\": 131\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"extractCodeSnippets\",\n+              \"code\": \"const extractCodeSnippets = (patch, filePath) => {\\n  if (!patch) return [];\\n\",\n+              \"lineStart\": 132,\n+              \"lineEnd\": 134\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"snippets\",\n+              \"code\": \"const snippets = [];\",\n+              \"lineStart\": 135,\n+              \"lineEnd\": 135\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"lines\",\n+              \"code\": \"const lines = patch.split('\\\\n');\",\n+              \"lineStart\": 136,\n+              \"lineEnd\": 136\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"currentSnippet\",\n+              \"code\": \"let currentSnippet = null;\",\n+              \"lineStart\": 137,\n+              \"lineEnd\": 137\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"lineNum\",\n+              \"code\": \"let lineNum = 0;\\n\",\n+              \"lineStart\": 138,\n+              \"lineEnd\": 139\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"i\",\n+              \"code\": \"for (let i = 0; i < lines.length; i++) {\",\n+              \"lineStart\": 140,\n+              \"lineEnd\": 140\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"line\",\n+              \"code\": \"const line = lines[i];\\n\\n// Track line numbers from hunk headers\",\n+              \"lineStart\": 141,\n+              \"lineEnd\": 143\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hunkMatch\",\n+              \"code\": \"const hunkMatch = line.match(/^@@ -\\\\d+(?:,\\\\d+)? \\\\+(\\\\d+)(?:,\\\\d+)? @@/);\\nif (hunkMatch) {\\n  lineNum = parseInt(hunkMatch[1], 10);\\n  continue;\\n}\\n\\n// Skip diff headers\\nif (\\n  line.startsWith('diff --git') ||\\n  line.startsWith('index ') ||\\n  line.startsWith('---') ||\\n  line.startsWith('+++')\\n) {\\n  continue;\\n}\",\n+              \"lineStart\": 144,\n+              \"lineEnd\": 159\n+            },\n+            {\n+              \"type\": \"class\",\n+              \"name\": \"definitions\",\n+              \"code\": \"// Look for function/class definitions in added lines\\nif (line.startsWith('+')) {\",\n+              \"lineStart\": 160,\n+              \"lineEnd\": 161\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"content\",\n+              \"code\": \"const content = line.substring(1);\\n\",\n+              \"lineStart\": 162,\n+              \"lineEnd\": 163\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"definitions\",\n+              \"code\": \"// Match function definitions\",\n+              \"lineStart\": 164,\n+              \"lineEnd\": 164\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"funcMatch\",\n+              \"code\": \"const funcMatch = content.match(/(?:export\\\\s+)?(?:async\\\\s+)?(?:function|const|let|var)\\\\s+(\\\\w+)/);\",\n+              \"lineStart\": 165,\n+              \"lineEnd\": 165\n+            },\n+            {\n+              \"type\": \"class\",\n+              \"name\": \"definitions\",\n+              \"code\": \"// Match class definitions\",\n+              \"lineStart\": 166,\n+              \"lineEnd\": 166\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"classMatch\",\n+              \"code\": \"const classMatch = content.match(/(?:export\\\\s+)?class\\\\s+(\\\\w+)/);\",\n+              \"lineStart\": 167,\n+              \"lineEnd\": 167\n+            },\n+            {\n+              \"type\": \"interface\",\n+              \"name\": \"definitions\",\n+              \"code\": \"// Match interface definitions (TypeScript)\",\n+              \"lineStart\": 168,\n+              \"lineEnd\": 168\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"interfaceMatch\",\n+              \"code\": \"const interfaceMatch = content.match(/(?:export\\\\s+)?interface\\\\s+(\\\\w+)/);\\n\\nif (funcMatch || classMatch || interfaceMatch) {\\n  if (currentSnippet && currentSnippet.lines.length > 0) {\\n    // Save previous snippet if exists\\n    // Dedent the code by removing common leading whitespace\",\n+              \"lineStart\": 169,\n+              \"lineEnd\": 174\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"dedentedCode\",\n+              \"code\": \"  const dedentedCode = dedentCode(currentSnippet.lines);\\n  snippets.push({\\n    type: currentSnippet.type,\\n    name: currentSnippet.name,\\n    code: dedentedCode,\\n    lineStart: currentSnippet.lineStart,\\n    lineEnd: lineNum - 1,\\n  });\\n}\\n\\n// Start new snippet\\ncurrentSnippet = {\\n  type: funcMatch ? 'function' : classMatch ? 'class' : 'interface',\\n  name: (funcMatch || classMatch || interfaceMatch)[1],\\n  lines: [content],\",\n+              \"lineStart\": 175,\n+              \"lineEnd\": 204\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"dedentedCode\",\n+              \"code\": \"    const dedentedCode = dedentCode(currentSnippet.lines);\\n    snippets.push({\\n      type: currentSnippet.type,\\n      name: currentSnippet.name,\\n      code: dedentedCode,\\n      lineStart: currentSnippet.lineStart,\\n      lineEnd: lineNum - 1,\\n    });\\n  }\\n\\n  return snippets;\\n};\\n\\n/**\\n * Remove common leading whitespace from code lines\",\n+              \"lineStart\": 205,\n+              \"lineEnd\": 222\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"dedentCode\",\n+              \"code\": \"const dedentCode = (lines) => {\\n  if (lines.length === 0) return '';\\n\\n  // Find minimum indentation (excluding empty lines)\",\n+              \"lineStart\": 223,\n+              \"lineEnd\": 226\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"minIndent\",\n+              \"code\": \"let minIndent = Infinity;\",\n+              \"lineStart\": 227,\n+              \"lineEnd\": 227\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"line\",\n+              \"code\": \"for (const line of lines) {\\n  if (line.trim().length === 0) continue; // Skip empty lines\",\n+              \"lineStart\": 228,\n+              \"lineEnd\": 229\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"indent\",\n+              \"code\": \"  const indent = line.match(/^\\\\s*/)[0].length;\\n  minIndent = Math.min(minIndent, indent);\\n}\\n\\n// If all lines are empty or no indentation found, return as-is\\nif (minIndent === Infinity || minIndent === 0) {\\n  return lines.join('\\\\n');\\n}\\n\\n// Remove common indentation\",\n+              \"lineStart\": 230,\n+              \"lineEnd\": 239\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"dedented\",\n+              \"code\": \"  const dedented = lines.map((line) => {\\n    if (line.trim().length === 0) return ''; // Keep empty lines empty\\n    return line.substring(minIndent);\\n  });\\n\\n  return dedented.join('\\\\n');\\n};\\n\\n/**\\n * Determine change type from numstat\\n * @param {number|null} additions\\n * @param {number|null} deletions\\n * @returns {string}\\n */\",\n+              \"lineStart\": 240,\n+              \"lineEnd\": 253\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"getChangeType\",\n+              \"code\": \"const getChangeType = (additions, deletions) => {\\n  if (additions === null || deletions === null) return 'binary';\\n  if (additions > 0 && deletions === 0) return 'added';\\n  if (additions === 0 && deletions > 0) return 'deleted';\\n  if (additions > 0 && deletions > 0) return 'modified';\\n  return 'renamed';\\n};\\n\\n\\n        // Extract code snippets from patch\",\n+              \"lineStart\": 254,\n+              \"lineEnd\": 304\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"codeSnippets\",\n+              \"code\": \"const codeSnippets = extractCodeSnippets(patch, stat.path);\\n\\n// Determine change type\",\n+              \"lineStart\": 305,\n+              \"lineEnd\": 307\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"changeType\",\n+              \"code\": \"    const changeType = getChangeType(stat.additions, stat.deletions);\\n\\n    files.push({\\n      ...stat,\\n      changeType,\\n      patch,\\n      codeSnippets,\\n    });\\n    files.push({\\n      ...stat,\\n      changeType: 'unknown',\\n      patch: null,\\n      codeSnippets: [],\\n    });\\n// Parse conventional commit\",\n+              \"lineStart\": 308,\n+              \"lineEnd\": 328\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"conventionalCommit\",\n+              \"code\": \"    const conventionalCommit = parseConventionalCommit(subject);\\n\\n    commits.push({\\n      hash,\\n      short,\\n      author,\\n      email,\\n      authoredAt,\\n      subject,\\n      conventionalCommit,\\n      files,\\n    });\\n/**\\n * Analyze commits to identify technical domains\\n * @param {Array} commits - Array of commit objects\",\n+              \"lineStart\": 329,\n+              \"lineEnd\": 350\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"analyzeDomains\",\n+              \"code\": \"const analyzeDomains = (commits) => {\",\n+              \"lineStart\": 351,\n+              \"lineEnd\": 351\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"domainMap\",\n+              \"code\": \"const domainMap = new Map();\\n\\n// Domain patterns based on file paths and commit types\",\n+              \"lineStart\": 352,\n+              \"lineEnd\": 354\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"patterns\",\n+              \"code\": \"const patterns = {\\n  API请求优化与限速: {\\n    paths: /src\\\\/(public-data|api|services).*\\\\/(quote|request|client)\\\\.ts/,\\n    types: ['feat', 'perf'],\\n  },\\n  错误处理与观测: { paths: /error|log|monitor|metric|observe/, types: ['fix', 'refactor'] },\\n  安全与鉴权: { paths: /auth|credential|sign|security|token/, types: ['feat', 'fix'] },\\n  订单与交易: { paths: /order|trade|submit|cancel|modify/, types: ['feat', 'fix'] },\\n  账户管理: { paths: /account|balance|position|margin/, types: ['feat', 'fix'] },\\n  市场数据: { paths: /quote|price|ohlc|ticker|depth/, types: ['feat', 'fix'] },\\n  接口重构: { paths: /api|interface|types/, types: ['refactor'] },\\n  配置与环境: { paths: /config|env|\\\\.json|\\\\.yaml/, types: ['chore', 'feat'] },\\n  测试: { paths: /test|spec|__tests__/, types: ['test'] },\\n  文档: { paths: /README|CHANGELOG|\\\\.md/, types: ['docs'] },\\n};\",\n+              \"lineStart\": 355,\n+              \"lineEnd\": 370\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"commit\",\n+              \"code\": \"for (const commit of commits) {\\n  for (const [domainName, pattern] of Object.entries(patterns)) {\",\n+              \"lineStart\": 371,\n+              \"lineEnd\": 372\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"matchesPath\",\n+              \"code\": \"const matchesPath = commit.files.some((file) => pattern.paths.test(file.path));\",\n+              \"lineStart\": 373,\n+              \"lineEnd\": 373\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"matchesType\",\n+              \"code\": \"    const matchesType = pattern.types.includes(commit.conventionalCommit.type);\\n\\n    if (matchesPath || matchesType) {\\n      if (!domainMap.has(domainName)) {\\n        domainMap.set(domainName, { commits: new Set(), files: new Set() });\\n      }\\n      domainMap.get(domainName).commits.add(commit.short);\\n      commit.files.forEach((file) => domainMap.get(domainName).files.add(file.path));\\n    }\\n  }\\n}\\n\\nreturn Array.from(domainMap.entries()).map(([name, data]) => ({\\n  name,\\n  commits: Array.from(data.commits),\",\n+              \"lineStart\": 374,\n+              \"lineEnd\": 397\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"identifyRisks\",\n+              \"code\": \"const identifyRisks = (commits) => {\",\n+              \"lineStart\": 398,\n+              \"lineEnd\": 398\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"risks\",\n+              \"code\": \"const risks = [];\\n\\n// Check for breaking changes\",\n+              \"lineStart\": 399,\n+              \"lineEnd\": 401\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"breakingCommits\",\n+              \"code\": \"const breakingCommits = commits.filter((c) => c.conventionalCommit.breaking);\\nif (breakingCommits.length > 0) {\\n  risks.push({\\n    type: 'breaking_change',\\n    severity: 'high',\\n    details: `${breakingCommits.length} 个提交标记为破坏性变更`,\\n    commits: breakingCommits.map((c) => c.short),\\n  });\\n}\\n\\n// Check for large refactoring\",\n+              \"lineStart\": 402,\n+              \"lineEnd\": 412\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"largeRefactors\",\n+              \"code\": \"const largeRefactors = commits.filter(\\n  (c) => c.conventionalCommit.type === 'refactor' && c.files.some((f) => f.deletions > 100),\\n);\\nif (largeRefactors.length > 0) {\\n  risks.push({\\n    type: 'large_refactor',\\n    severity: 'medium',\\n    details: `${largeRefactors.length} 个大规模重构提交（删除超过100行）`,\\n    commits: largeRefactors.map((c) => c.short),\\n  });\\n}\\n\\n// Check for missing tests\",\n+              \"lineStart\": 413,\n+              \"lineEnd\": 425\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasTestFiles\",\n+              \"code\": \"const hasTestFiles = commits.some((c) => c.files.some((f) => /test|spec|__tests__/.test(f.path)));\",\n+              \"lineStart\": 426,\n+              \"lineEnd\": 426\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasFeatOrFix\",\n+              \"code\": \"const hasFeatOrFix = commits.some((c) => ['feat', 'fix'].includes(c.conventionalCommit.type));\\nif (hasFeatOrFix && !hasTestFiles) {\\n  risks.push({\\n    type: 'no_tests',\\n    severity: 'medium',\\n    details: '包含功能或修复提交但未见测试文件更新',\\n    commits: [],\\n  });\\n}\\n\",\n+              \"lineStart\": 427,\n+              \"lineEnd\": 436\n+            },\n+            {\n+              \"type\": \"interface\",\n+              \"name\": \"changes\",\n+              \"code\": \"// Check for API/interface changes\",\n+              \"lineStart\": 437,\n+              \"lineEnd\": 437\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"apiChanges\",\n+              \"code\": \"  const apiChanges = commits.filter((c) =>\\n    c.files.some((f) => /api|interface|types/.test(f.path) && f.changeType !== 'added'),\\n  );\\n  if (apiChanges.length > 0) {\\n    risks.push({\\n      type: 'api_change',\\n      severity: 'high',\\n      details: `${apiChanges.length} 个提交修改了API或接口定义`,\\n      commits: apiChanges.map((c) => c.short),\\n    });\\n  }\\n\\n  return risks;\\n};\\n\",\n+              \"lineStart\": 438,\n+              \"lineEnd\": 508\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"domains\",\n+              \"code\": \"const domains = analyzeDomains(commits);\\n\\nconsole.info('Identifying risk indicators...');\",\n+              \"lineStart\": 509,\n+              \"lineEnd\": 511\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"riskIndicators\",\n+              \"code\": \"const riskIndicators = identifyRisks(commits);\\n\\n  analysis: {\\n    domains,\\n    riskIndicators,\\n  },\\n    version: '2.0.0',\\nconsole.info(\\n  `🔍 Analysis: ${domains.length} domains identified, ${riskIndicators.length} risk indicators found`,\\n);\",\n+              \"lineStart\": 512,\n+              \"lineEnd\": 548\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 518,\n+          \"deletions\": 0,\n+          \"path\": \".claude/skills/git-changes-reporter/scripts/validate-report.js\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/validate-report.js b/.claude/skills/git-changes-reporter/scripts/validate-report.js\\nnew file mode 100755\\nindex 000000000..8de8c535d\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/scripts/validate-report.js\\n@@ -0,0 +1,518 @@\\n+#!/usr/bin/env node\\n+/* eslint-disable no-console */\\n+import { readFile } from 'node:fs/promises';\\n+\\n+const usage = () => {\\n+  console.error(\\n+    [\\n+      'Usage: validate-report.js <markdown_file>',\\n+      '',\\n+      'Validate Markdown report quality against skill requirements.',\\n+      '',\\n+      'Based on:',\\n+      '  - references/report-template.md',\\n+      '  - references/bad-examples.md',\\n+      '',\\n+      'Arguments:',\\n+      '  <markdown_file>  Path to Markdown report file',\\n+      '',\\n+      'Exit codes:',\\n+      '  0  - Report passes all checks',\\n+      '  1  - Report has issues',\\n+      '',\\n+      'Examples:',\\n+      '  validate-report.js docs/reports/git-changes-2025-12-05.md',\\n+    ].join('\\\\n'),\\n+  );\\n+};\\n+\\n+/**\\n+ * Check result structure\\n+ */\\n+class CheckResult {\\n+  constructor() {\\n+    this.passed = [];\\n+    this.failed = [];\\n+    this.warnings = [];\\n+  }\\n+\\n+  pass(message) {\\n+    this.passed.push(message);\\n+  }\\n+\\n+  fail(message) {\\n+    this.failed.push(message);\\n+  }\\n+\\n+  warn(message) {\\n+    this.warnings.push(message);\\n+  }\\n+\\n+  hasFailures() {\\n+    return this.failed.length > 0;\\n+  }\\n+\\n+  print() {\\n+    if (this.passed.length > 0) {\\n+      console.info('\\\\n✅ Passed checks:');\\n+      this.passed.forEach((msg) => console.info(`   ${msg}`));\\n+    }\\n+\\n+    if (this.warnings.length > 0) {\\n+      console.info('\\\\n⚠️  Warnings:');\\n+      this.warnings.forEach((msg) => console.warn(`   ${msg}`));\\n+    }\\n+\\n+    if (this.failed.length > 0) {\\n+      console.info('\\\\n❌ Failed checks:');\\n+      this.failed.forEach((msg) => console.error(`   ${msg}`));\\n+    }\\n+\\n+    console.info(\\n+      `\\\\n📊 Summary: ${this.passed.length} passed, ${this.warnings.length} warnings, ${this.failed.length} failed`,\\n+    );\\n+  }\\n+}\\n+\\n+/**\\n+ * Check for required sections\\n+ * Based on report-template.md structure\\n+ */\\n+const checkRequiredSections = (content, result) => {\\n+  const requiredSections = [\\n+    { pattern: /^## 1\\\\. 概览/m, name: '概览' },\\n+    { pattern: /^## 2\\\\. (核心变更|改动聚焦领域)/m, name: '核心变更/改动聚焦领域' },\\n+    { pattern: /^## 3\\\\. (贡献者|贡献者分析)/m, name: '贡献者分析' },\\n+    { pattern: /^## 4\\\\. (风险评估|技术影响与风险)/m, name: '风险评估' },\\n+  ];\\n+\\n+  requiredSections.forEach((section) => {\\n+    if (section.pattern.test(content)) {\\n+      result.pass(`包含\\\"${section.name}\\\"章节`);\\n+    } else {\\n+      result.fail(`缺少\\\"${section.name}\\\"章节`);\\n+    }\\n+  });\\n+\\n+  // Optional section: 单提交摘要\\n+  if (/^## 5\\\\. 单提交摘要/m.test(content)) {\\n+    result.pass('包含\\\"单提交摘要\\\"章节（可选）');\\n+  }\\n+};\\n+\\n+/**\\n+ * Check overview section content\\n+ */\\n+const checkOverview = (content, result) => {\\n+  const overviewSection = content.match(/## 1\\\\. 概览\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n## |$)/);\\n+\\n+  if (!overviewSection) {\\n+    return;\\n+  }\\n+\\n+  const section = overviewSection[1];\\n+\\n+  // Check for key overview fields based on template\\n+  const checks = [\\n+    { pattern: /时间范围/, name: '时间范围' },\\n+    { pattern: /提交数量/, name: '提交数量' },\\n+    { pattern: /(主要)?贡献者/, name: '贡献者' },\\n+    { pattern: /热点目录/, name: '热点目录' },\\n+  ];\\n+\\n+  const missing = checks.filter((c) => !c.pattern.test(section));\\n+\\n+  if (missing.length === 0) {\\n+    result.pass('概览包含所有必需字段（时间范围、提交数量、贡献者、热点目录）');\\n+  } else {\\n+    missing.forEach((c) => result.warn(`概览缺少\\\"${c.name}\\\"`));\\n+  }\\n+};\\n+\\n+/**\\n+ * Check for code snippets in domain/change sections\\n+ * Bad example: 只说\\\"新增函数\\\"没有代码\\n+ */\\n+const checkCodeSnippets = (content, result) => {\\n+  const codeBlocks = content.match(/```[\\\\s\\\\S]*?```/g) || [];\\n+  const domainSections = content.match(/### 2\\\\.\\\\d+ .+?\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n### 2\\\\.\\\\d|\\\\n## |$)/g) || [];\\n+\\n+  if (codeBlocks.length > 0) {\\n+    result.pass(`包含 ${codeBlocks.length} 个代码片段`);\\n+\\n+    // Check if code blocks have language annotation\\n+    const annotatedBlocks = codeBlocks.filter((block) => /^```\\\\w+/m.test(block));\\n+    if (annotatedBlocks.length === codeBlocks.length) {\\n+      result.pass('所有代码片段都有语言标注');\\n+    } else {\\n+      result.warn(\\n+        `${codeBlocks.length - annotatedBlocks.length} 个代码片段缺少语言标注（应使用 \\\\`\\\\`\\\\`typescript 等）`,\\n+      );\\n+    }\\n+  } else {\\n+    result.fail('未找到代码片段 - 每个技术领域应包含 5-15 行核心代码');\\n+  }\\n+\\n+  // Check if each domain section has at least one code snippet or file reference\\n+  let missingSnippets = 0;\\n+  domainSections.forEach((section, index) => {\\n+    const hasCodeBlock = /```[\\\\s\\\\S]*?```/.test(section);\\n+    const hasFileReference = /\\\\[.*?:L\\\\d+.*?\\\\]\\\\(.*?#L\\\\d+.*?\\\\)/.test(section);\\n+\\n+    if (!hasCodeBlock && !hasFileReference) {\\n+      missingSnippets++;\\n+      result.fail(`领域 2.${index + 1} 缺少代码片段或文件引用`);\\n+    }\\n+  });\\n+\\n+  if (missingSnippets === 0 && domainSections.length > 0) {\\n+    result.pass(`所有 ${domainSections.length} 个领域都有代码片段或文件引用`);\\n+  }\\n+};\\n+\\n+/**\\n+ * Check for TODO markers - report should not contain any\\n+ */\\n+const checkTodoMarkers = (content, result) => {\\n+  const todos = content.match(/<!-- TODO.*?-->/g) || [];\\n+\\n+  if (todos.length === 0) {\\n+    result.pass('无未完成的 TODO 标记');\\n+  } else {\\n+    result.fail(`发现 ${todos.length} 个未完成的 TODO 标记`);\\n+    todos.slice(0, 3).forEach((todo) => {\\n+      result.fail(`  ${todo.substring(0, 60)}...`);\\n+    });\\n+    if (todos.length > 3) {\\n+      result.fail(`  ...以及 ${todos.length - 3} 个其他 TODO`);\\n+    }\\n+  }\\n+};\\n+\\n+/**\\n+ * Check for file references with line numbers\\n+ * Bad example: 只说 `quote.ts` 没有行号\\n+ * Good example: [quote.ts:L65-L78](apps/.../quote.ts#L65-L78)\\n+ */\\n+const checkFileReferences = (content, result) => {\\n+  // Correct format: [name:L1-L10](path#L1-L10)\\n+  const correctRefs = content.match(/\\\\[[^\\\\]]*:L\\\\d+[^\\\\]]*\\\\]\\\\([^)]+#L\\\\d+[^)]*\\\\)/g) || [];\\n+\\n+  // Incorrect format: just path without line numbers in markdown link\\n+  const incorrectRefs = content.match(/\\\\[[^\\\\]]+\\\\.ts\\\\]\\\\([^)]+\\\\)/g) || [];\\n+  const incorrectWithoutLines = incorrectRefs.filter((ref) => !/#L\\\\d+/.test(ref));\\n+\\n+  if (correctRefs.length > 0) {\\n+    result.pass(`包含 ${correctRefs.length} 个正确格式的文件引用（含行号链接）`);\\n+  } else {\\n+    result.warn('未找到带行号的文件引用 - 应使用 [file:L1-L10](path#L1-L10) 格式');\\n+  }\\n+\\n+  if (incorrectWithoutLines.length > 0) {\\n+    result.warn(`发现 ${incorrectWithoutLines.length} 个缺少行号的文件引用 - 应添加行号如 #L42-L58`);\\n+  }\\n+};\\n+\\n+/**\\n+ * Check commit hash format\\n+ * Bad example: `1279`, `703` (JSON line numbers)\\n+ * Good example: `b285cde59` (7+ hex chars)\\n+ */\\n+const checkCommitHashFormat = (content, result) => {\\n+  // Look for potential line numbers used as commit IDs (common mistake)\\n+  // Pattern: backtick + 3-4 digits + backtick, not part of a larger number\\n+  const lineNumbers = content.match(/`\\\\d{3,4}`(?!\\\\d)/g) || [];\\n+\\n+  if (lineNumbers.length > 0) {\\n+    result.fail(\\n+      `发现可疑的数字引用 ${lineNumbers.slice(0, 5).join(', ')} - 可能错误使用了 JSON 行号作为 commit ID`,\\n+    );\\n+    result.fail('  正确的 commit ID 应该是 7+ 位十六进制字符，如 `b285cde59`');\\n+  }\\n+\\n+  // Check for proper commit hash format (7+ hex characters)\\n+  const commitHashes = content.match(/`[0-9a-f]{7,}`/g) || [];\\n+\\n+  if (commitHashes.length > 0) {\\n+    result.pass(`包含 ${commitHashes.length} 个正确格式的 commit 哈希引用`);\\n+  } else {\\n+    result.warn('未找到 commit 哈希引用 - 应使用 `短哈希` 格式');\\n+  }\\n+};\\n+\\n+/**\\n+ * Check contributor table format\\n+ * Required columns: 作者、提交数、主要领域、关键提交\\n+ */\\n+const checkContributorTable = (content, result) => {\\n+  const tableMatch = content.match(/## 3\\\\. (贡献者|贡献者分析)\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n## |$)/);\\n+\\n+  if (!tableMatch) {\\n+    result.fail('缺少贡献者表格');\\n+    return;\\n+  }\\n+\\n+  const section = tableMatch[2];\\n+  const hasTable = /\\\\|.*\\\\|.*\\\\|/.test(section);\\n+\\n+  if (!hasTable) {\\n+    result.fail('贡献者章节缺少表格');\\n+    return;\\n+  }\\n+\\n+  // Check required columns\\n+  const headerLine = section.match(/\\\\|[^|]+\\\\|[^|]+\\\\|[^|]+\\\\|[^|]*\\\\|?/);\\n+  if (!headerLine) {\\n+    result.fail('贡献者表格格式不正确');\\n+    return;\\n+  }\\n+\\n+  const header = headerLine[0].toLowerCase();\\n+  const hasAuthor = /作者/.test(header);\\n+  const hasCommitCount = /提交数/.test(header);\\n+  const hasDomain = /(领域|工作|贡献)/.test(header);\\n+  const hasKeyCommit = /(关键提交|提交)/.test(header);\\n+\\n+  if (hasAuthor && hasCommitCount && hasDomain && hasKeyCommit) {\\n+    result.pass('贡献者表格包含所有必需列（作者、提交数、主要领域、关键提交）');\\n+  } else {\\n+    if (!hasAuthor) result.warn('贡献者表格缺少\\\"作者\\\"列');\\n+    if (!hasCommitCount) result.warn('贡献者表格缺少\\\"提交数\\\"列');\\n+    if (!hasDomain) result.warn('贡献者表格缺少\\\"主要领域\\\"列');\\n+    if (!hasKeyCommit) result.fail('贡献者表格缺少\\\"关键提交\\\"列');\\n+  }\\n+\\n+  // Check if table has data rows\\n+  const rows = section.split('\\\\n').filter((line) => /^\\\\|[^-]/.test(line));\\n+  const dataRows = rows.length - 1; // Subtract header row\\n+\\n+  if (dataRows > 0) {\\n+    result.pass(`贡献者表格包含 ${dataRows} 行数据`);\\n+  } else {\\n+    result.fail('贡献者表格无数据');\\n+  }\\n+\\n+  // Check if key commits use proper hash format\\n+  const keyCommitCells = section.match(/\\\\|\\\\s*`[^`]+`\\\\s*\\\\|?\\\\s*$/gm) || [];\\n+  const validHashes = keyCommitCells.filter((cell) => /`[0-9a-f]{7,}`/.test(cell));\\n+\\n+  if (keyCommitCells.length > 0 && validHashes.length === keyCommitCells.length) {\\n+    result.pass('关键提交列使用正确的 commit 哈希格式');\\n+  } else if (keyCommitCells.length > 0) {\\n+    result.warn('关键提交列中部分提交可能未使用正确的哈希格式');\\n+  }\\n+};\\n+\\n+/**\\n+ * Check for design intent explanations\\n+ * Bad example: \\\"添加了 getRequestIntervalMs 函数\\\" (只说做了什么)\\n+ * Good example: 解释为什么需要、解决什么问题、方案选择理由 (至少50字)\\n+ */\\n+const checkDesignIntent = (content, result) => {\\n+  const domainSections = content.match(/### 2\\\\.\\\\d+ .+?\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n### 2\\\\.\\\\d|\\\\n## |$)/g) || [];\\n+\\n+  if (domainSections.length === 0) {\\n+    result.warn('未找到领域/变更章节');\\n+    return;\\n+  }\\n+\\n+  let hasIntent = 0;\\n+  let missingIntent = 0;\\n+  let tooShort = 0;\\n+\\n+  domainSections.forEach((section) => {\\n+    // Check if design intent is present\\n+    const intentMatch = section.match(/\\\\*\\\\*设计意图\\\\*\\\\*[：:]\\\\s*\\\\n?([\\\\s\\\\S]*?)(?=\\\\n\\\\*\\\\*|\\\\n###|\\\\n##|$)/);\\n+\\n+    if (!intentMatch) {\\n+      missingIntent++;\\n+      return;\\n+    }\\n+\\n+    const intentContent = intentMatch[1].trim();\\n+\\n+    // Check minimum length (50 chars for meaningful explanation)\\n+    if (intentContent.length < 50) {\\n+      tooShort++;\\n+    } else {\\n+      hasIntent++;\\n+    }\\n+  });\\n+\\n+  if (missingIntent === 0 && tooShort === 0) {\\n+    result.pass(`所有 ${hasIntent} 个领域都包含充分的设计意图说明（≥50字）`);\\n+  } else {\\n+    if (missingIntent > 0) {\\n+      result.fail(`${missingIntent} 个领域缺少\\\"设计意图\\\"字段`);\\n+    }\\n+    if (tooShort > 0) {\\n+      result.fail(`${tooShort} 个领域的设计意图过短（应至少 50 字，解释\\\"为什么\\\"而非\\\"做了什么\\\"）`);\\n+    }\\n+  }\\n+};\\n+\\n+/**\\n+ * Check risk assessment section\\n+ * Bad example: \\\"API 有变更，调用方需要注意\\\" (过于笼统)\\n+ * Good example: 列出具体受影响的模块/服务、风险级别、迁移要求\\n+ */\\n+const checkRiskAssessment = (content, result) => {\\n+  const riskSection = content.match(/## 4\\\\. (风险评估|技术影响与风险)\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n## |$)/);\\n+\\n+  if (!riskSection) {\\n+    result.fail('缺少风险评估章节');\\n+    return;\\n+  }\\n+\\n+  const section = riskSection[2];\\n+\\n+  // Check for subsections\\n+  const requiredSubsections = [\\n+    { pattern: /### 兼容性影响/, name: '兼容性影响' },\\n+    { pattern: /### 配置变更/, name: '配置变更' },\\n+    { pattern: /### 性能影响/, name: '性能影响' },\\n+    { pattern: /### 测试覆盖/, name: '测试覆盖' },\\n+  ];\\n+\\n+  const missing = requiredSubsections.filter((s) => !s.pattern.test(section));\\n+\\n+  if (missing.length === 0) {\\n+    result.pass('风险评估包含所有必需的子章节');\\n+  } else {\\n+    missing.forEach((s) => result.fail(`风险评估缺少\\\"${s.name}\\\"小节`));\\n+  }\\n+\\n+  // Check if subsections have substantial content (not just placeholders)\\n+  requiredSubsections.forEach((sub) => {\\n+    const subMatch = section.match(\\n+      new RegExp(`${sub.pattern.source}\\\\\\\\n\\\\\\\\n?([\\\\\\\\s\\\\\\\\S]*?)(?=\\\\\\\\n### |\\\\\\\\n## |$)`),\\n+    );\\n+\\n+    if (subMatch) {\\n+      const subContent = subMatch[1].trim();\\n+\\n+      // Check for TODO markers\\n+      if (/<!-- TODO/.test(subContent)) {\\n+        result.warn(`\\\"${sub.name}\\\"小节包含未完成的 TODO 标记`);\\n+        return;\\n+      }\\n+\\n+      // Check minimum content length\\n+      if (subContent.length < 20) {\\n+        result.warn(`\\\"${sub.name}\\\"小节内容过短`);\\n+      } else {\\n+        // Check for specificity (mentions specific modules/services)\\n+        const hasSpecificContent =\\n+          /`[^`]+`/.test(subContent) || // Has code references\\n+          /apps\\\\/|libraries\\\\/|services\\\\//.test(subContent) || // Has paths\\n+          /(高风险|中风险|低风险)/.test(subContent); // Has risk levels\\n+\\n+        if (hasSpecificContent) {\\n+          result.pass(`\\\"${sub.name}\\\"小节包含具体内容`);\\n+        } else {\\n+          result.warn(`\\\"${sub.name}\\\"小节可能过于笼统 - 建议列出具体受影响的模块/服务`);\\n+        }\\n+      }\\n+    }\\n+  });\\n+};\\n+\\n+/**\\n+ * Check commit summaries section (optional but thorough if present)\\n+ */\\n+const checkCommitSummaries = (content, result) => {\\n+  const summarySection = content.match(/## 5\\\\. 单提交摘要.*?\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n---\\\\n|$)/);\\n+\\n+  if (!summarySection) {\\n+    return; // Optional section\\n+  }\\n+\\n+  const section = summarySection[1];\\n+  const commits = section.match(/### [`']?[0-9a-f]{7,}[`']?/gi) || [];\\n+\\n+  if (commits.length > 0) {\\n+    result.pass(`单提交摘要包含 ${commits.length} 个提交详情`);\\n+  } else {\\n+    result.warn('单提交摘要章节无有效内容');\\n+    return;\\n+  }\\n+\\n+  // Check if summaries have required fields\\n+  const summaries = section.split(/### [`']?[0-9a-f]{7,}/i).slice(1);\\n+  let completeCount = 0;\\n+\\n+  summaries.forEach((summary) => {\\n+    const hasSubject = /\\\\*\\\\*主题\\\\*\\\\*/.test(summary);\\n+    const hasChanges = /\\\\*\\\\*变更要点\\\\*\\\\*/.test(summary);\\n+\\n+    if (hasSubject && hasChanges) {\\n+      completeCount++;\\n+    }\\n+  });\\n+\\n+  if (completeCount === summaries.length) {\\n+    result.pass('所有单提交摘要包含必需字段（主题、变更要点）');\\n+  } else {\\n+    result.warn(`${summaries.length - completeCount} 个单提交摘要缺少必需字段`);\\n+  }\\n+};\\n+\\n+/**\\n+ * Main function\\n+ */\\n+const main = async () => {\\n+  const markdownFile = process.argv[2];\\n+\\n+  if (!markdownFile) {\\n+    usage();\\n+    process.exit(1);\\n+  }\\n+\\n+  console.info(`Validating report: ${markdownFile}`);\\n+  console.info('='.repeat(60));\\n+\\n+  // Read file\\n+  let content;\\n+  try {\\n+    content = await readFile(markdownFile, 'utf8');\\n+  } catch (error) {\\n+    console.error(`❌ Error reading file: ${error.message}`);\\n+    process.exit(1);\\n+  }\\n+\\n+  const result = new CheckResult();\\n+\\n+  // Run all checks\\n+  checkRequiredSections(content, result);\\n+  checkOverview(content, result);\\n+  checkCodeSnippets(content, result);\\n+  checkTodoMarkers(content, result);\\n+  checkFileReferences(content, result);\\n+  checkCommitHashFormat(content, result);\\n+  checkContributorTable(content, result);\\n+  checkDesignIntent(content, result);\\n+  checkRiskAssessment(content, result);\\n+  checkCommitSummaries(content, result);\\n+\\n+  // Print results\\n+  result.print();\\n+\\n+  // Exit with appropriate code\\n+  if (result.hasFailures()) {\\n+    console.info('\\\\n💡 Tip: 参考以下文件改进报告：');\\n+    console.info('   - references/report-template.md（正确格式）');\\n+    console.info('   - references/bad-examples.md（常见错误）');\\n+    process.exit(1);\\n+  } else if (result.warnings.length > 0) {\\n+    console.info('\\\\n✨ 报告通过基本检查，但有一些建议可以改进质量');\\n+    process.exit(0);\\n+  } else {\\n+    console.info('\\\\n🎉 报告通过所有质量检查！');\\n+    process.exit(0);\\n+  }\\n+};\\n+\\n+main().catch((err) => {\\n+  console.error('❌ Error:', err?.stack || err?.message || err);\\n+  process.exit(1);\\n+});\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"usage\",\n+              \"code\": \"const usage = () => {\\n  console.error(\\n    [\\n      'Usage: validate-report.js <markdown_file>',\\n      '',\\n      'Validate Markdown report quality against skill requirements.',\\n      '',\\n      'Based on:',\\n      '  - references/report-template.md',\\n      '  - references/bad-examples.md',\\n      '',\\n      'Arguments:',\\n      '  <markdown_file>  Path to Markdown report file',\\n      '',\\n      'Exit codes:',\",\n+              \"lineStart\": 5,\n+              \"lineEnd\": 31\n+            },\n+            {\n+              \"type\": \"class\",\n+              \"name\": \"CheckResult\",\n+              \"code\": \"class CheckResult {\\n  constructor() {\\n    this.passed = [];\\n    this.failed = [];\\n    this.warnings = [];\\n  }\\n\\n  pass(message) {\\n    this.passed.push(message);\\n  }\\n\\n  fail(message) {\\n    this.failed.push(message);\\n  }\\n\",\n+              \"lineStart\": 32,\n+              \"lineEnd\": 80\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"checkRequiredSections\",\n+              \"code\": \"const checkRequiredSections = (content, result) => {\",\n+              \"lineStart\": 81,\n+              \"lineEnd\": 81\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"requiredSections\",\n+              \"code\": \"const requiredSections = [\\n  { pattern: /^## 1\\\\. 概览/m, name: '概览' },\\n  { pattern: /^## 2\\\\. (核心变更|改动聚焦领域)/m, name: '核心变更/改动聚焦领域' },\\n  { pattern: /^## 3\\\\. (贡献者|贡献者分析)/m, name: '贡献者分析' },\\n  { pattern: /^## 4\\\\. (风险评估|技术影响与风险)/m, name: '风险评估' },\\n];\\n\\nrequiredSections.forEach((section) => {\\n  if (section.pattern.test(content)) {\\n    result.pass(`包含\\\"${section.name}\\\"章节`);\\n  } else {\\n    result.fail(`缺少\\\"${section.name}\\\"章节`);\\n  }\\n});\\n\",\n+              \"lineStart\": 82,\n+              \"lineEnd\": 105\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"checkOverview\",\n+              \"code\": \"const checkOverview = (content, result) => {\",\n+              \"lineStart\": 106,\n+              \"lineEnd\": 106\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"overviewSection\",\n+              \"code\": \"const overviewSection = content.match(/## 1\\\\. 概览\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n## |$)/);\\n\\nif (!overviewSection) {\\n  return;\\n}\\n\",\n+              \"lineStart\": 107,\n+              \"lineEnd\": 112\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"section\",\n+              \"code\": \"const section = overviewSection[1];\\n\\n// Check for key overview fields based on template\",\n+              \"lineStart\": 113,\n+              \"lineEnd\": 115\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"checks\",\n+              \"code\": \"const checks = [\\n  { pattern: /时间范围/, name: '时间范围' },\\n  { pattern: /提交数量/, name: '提交数量' },\\n  { pattern: /(主要)?贡献者/, name: '贡献者' },\\n  { pattern: /热点目录/, name: '热点目录' },\\n];\\n\",\n+              \"lineStart\": 116,\n+              \"lineEnd\": 122\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"missing\",\n+              \"code\": \"  const missing = checks.filter((c) => !c.pattern.test(section));\\n\\n  if (missing.length === 0) {\\n    result.pass('概览包含所有必需字段（时间范围、提交数量、贡献者、热点目录）');\\n  } else {\\n    missing.forEach((c) => result.warn(`概览缺少\\\"${c.name}\\\"`));\\n  }\\n};\\n\\n/**\\n * Check for code snippets in domain/change sections\\n * Bad example: 只说\\\"新增函数\\\"没有代码\\n */\",\n+              \"lineStart\": 123,\n+              \"lineEnd\": 135\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"checkCodeSnippets\",\n+              \"code\": \"const checkCodeSnippets = (content, result) => {\",\n+              \"lineStart\": 136,\n+              \"lineEnd\": 136\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"codeBlocks\",\n+              \"code\": \"const codeBlocks = content.match(/```[\\\\s\\\\S]*?```/g) || [];\",\n+              \"lineStart\": 137,\n+              \"lineEnd\": 137\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"domainSections\",\n+              \"code\": \"const domainSections = content.match(/### 2\\\\.\\\\d+ .+?\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n### 2\\\\.\\\\d|\\\\n## |$)/g) || [];\\n\\nif (codeBlocks.length > 0) {\\n  result.pass(`包含 ${codeBlocks.length} 个代码片段`);\\n\\n  // Check if code blocks have language annotation\",\n+              \"lineStart\": 138,\n+              \"lineEnd\": 143\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"annotatedBlocks\",\n+              \"code\": \"  const annotatedBlocks = codeBlocks.filter((block) => /^```\\\\w+/m.test(block));\\n  if (annotatedBlocks.length === codeBlocks.length) {\\n    result.pass('所有代码片段都有语言标注');\\n  } else {\\n    result.warn(\\n      `${codeBlocks.length - annotatedBlocks.length} 个代码片段缺少语言标注（应使用 \\\\`\\\\`\\\\`typescript 等）`,\\n    );\\n  }\\n} else {\\n  result.fail('未找到代码片段 - 每个技术领域应包含 5-15 行核心代码');\\n}\\n\\n// Check if each domain section has at least one code snippet or file reference\",\n+              \"lineStart\": 144,\n+              \"lineEnd\": 156\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"missingSnippets\",\n+              \"code\": \"let missingSnippets = 0;\\ndomainSections.forEach((section, index) => {\",\n+              \"lineStart\": 157,\n+              \"lineEnd\": 158\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasCodeBlock\",\n+              \"code\": \"const hasCodeBlock = /```[\\\\s\\\\S]*?```/.test(section);\",\n+              \"lineStart\": 159,\n+              \"lineEnd\": 159\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasFileReference\",\n+              \"code\": \"    const hasFileReference = /\\\\[.*?:L\\\\d+.*?\\\\]\\\\(.*?#L\\\\d+.*?\\\\)/.test(section);\\n\\n    if (!hasCodeBlock && !hasFileReference) {\\n      missingSnippets++;\\n      result.fail(`领域 2.${index + 1} 缺少代码片段或文件引用`);\\n    }\\n  });\\n\\n  if (missingSnippets === 0 && domainSections.length > 0) {\\n    result.pass(`所有 ${domainSections.length} 个领域都有代码片段或文件引用`);\\n  }\\n};\\n\\n/**\\n * Check for TODO markers - report should not contain any\",\n+              \"lineStart\": 160,\n+              \"lineEnd\": 175\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"checkTodoMarkers\",\n+              \"code\": \"const checkTodoMarkers = (content, result) => {\",\n+              \"lineStart\": 176,\n+              \"lineEnd\": 176\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"todos\",\n+              \"code\": \"  const todos = content.match(/<!-- TODO.*?-->/g) || [];\\n\\n  if (todos.length === 0) {\\n    result.pass('无未完成的 TODO 标记');\\n  } else {\\n    result.fail(`发现 ${todos.length} 个未完成的 TODO 标记`);\\n    todos.slice(0, 3).forEach((todo) => {\\n      result.fail(`  ${todo.substring(0, 60)}...`);\\n    });\\n    if (todos.length > 3) {\\n      result.fail(`  ...以及 ${todos.length - 3} 个其他 TODO`);\\n    }\\n  }\\n};\\n\",\n+              \"lineStart\": 177,\n+              \"lineEnd\": 196\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"checkFileReferences\",\n+              \"code\": \"const checkFileReferences = (content, result) => {\\n  // Correct format: [name:L1-L10](path#L1-L10)\",\n+              \"lineStart\": 197,\n+              \"lineEnd\": 198\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"correctRefs\",\n+              \"code\": \"const correctRefs = content.match(/\\\\[[^\\\\]]*:L\\\\d+[^\\\\]]*\\\\]\\\\([^)]+#L\\\\d+[^)]*\\\\)/g) || [];\\n\\n// Incorrect format: just path without line numbers in markdown link\",\n+              \"lineStart\": 199,\n+              \"lineEnd\": 201\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"incorrectRefs\",\n+              \"code\": \"const incorrectRefs = content.match(/\\\\[[^\\\\]]+\\\\.ts\\\\]\\\\([^)]+\\\\)/g) || [];\",\n+              \"lineStart\": 202,\n+              \"lineEnd\": 202\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"incorrectWithoutLines\",\n+              \"code\": \"  const incorrectWithoutLines = incorrectRefs.filter((ref) => !/#L\\\\d+/.test(ref));\\n\\n  if (correctRefs.length > 0) {\\n    result.pass(`包含 ${correctRefs.length} 个正确格式的文件引用（含行号链接）`);\\n  } else {\\n    result.warn('未找到带行号的文件引用 - 应使用 [file:L1-L10](path#L1-L10) 格式');\\n  }\\n\\n  if (incorrectWithoutLines.length > 0) {\\n    result.warn(`发现 ${incorrectWithoutLines.length} 个缺少行号的文件引用 - 应添加行号如 #L42-L58`);\\n  }\\n};\\n\\n/**\\n * Check commit hash format\",\n+              \"lineStart\": 203,\n+              \"lineEnd\": 220\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"checkCommitHashFormat\",\n+              \"code\": \"const checkCommitHashFormat = (content, result) => {\\n  // Look for potential line numbers used as commit IDs (common mistake)\\n  // Pattern: backtick + 3-4 digits + backtick, not part of a larger number\",\n+              \"lineStart\": 221,\n+              \"lineEnd\": 223\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"lineNumbers\",\n+              \"code\": \"const lineNumbers = content.match(/`\\\\d{3,4}`(?!\\\\d)/g) || [];\\n\\nif (lineNumbers.length > 0) {\\n  result.fail(\\n    `发现可疑的数字引用 ${lineNumbers.slice(0, 5).join(', ')} - 可能错误使用了 JSON 行号作为 commit ID`,\\n  );\\n  result.fail('  正确的 commit ID 应该是 7+ 位十六进制字符，如 `b285cde59`');\\n}\\n\\n// Check for proper commit hash format (7+ hex characters)\",\n+              \"lineStart\": 224,\n+              \"lineEnd\": 233\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"commitHashes\",\n+              \"code\": \"  const commitHashes = content.match(/`[0-9a-f]{7,}`/g) || [];\\n\\n  if (commitHashes.length > 0) {\\n    result.pass(`包含 ${commitHashes.length} 个正确格式的 commit 哈希引用`);\\n  } else {\\n    result.warn('未找到 commit 哈希引用 - 应使用 `短哈希` 格式');\\n  }\\n};\\n\\n/**\\n * Check contributor table format\\n * Required columns: 作者、提交数、主要领域、关键提交\\n */\",\n+              \"lineStart\": 234,\n+              \"lineEnd\": 246\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"checkContributorTable\",\n+              \"code\": \"const checkContributorTable = (content, result) => {\",\n+              \"lineStart\": 247,\n+              \"lineEnd\": 247\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"tableMatch\",\n+              \"code\": \"const tableMatch = content.match(/## 3\\\\. (贡献者|贡献者分析)\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n## |$)/);\\n\\nif (!tableMatch) {\\n  result.fail('缺少贡献者表格');\\n  return;\\n}\\n\",\n+              \"lineStart\": 248,\n+              \"lineEnd\": 254\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"section\",\n+              \"code\": \"const section = tableMatch[2];\",\n+              \"lineStart\": 255,\n+              \"lineEnd\": 255\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasTable\",\n+              \"code\": \"const hasTable = /\\\\|.*\\\\|.*\\\\|/.test(section);\\n\\nif (!hasTable) {\\n  result.fail('贡献者章节缺少表格');\\n  return;\\n}\\n\\n// Check required columns\",\n+              \"lineStart\": 256,\n+              \"lineEnd\": 263\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"headerLine\",\n+              \"code\": \"const headerLine = section.match(/\\\\|[^|]+\\\\|[^|]+\\\\|[^|]+\\\\|[^|]*\\\\|?/);\\nif (!headerLine) {\\n  result.fail('贡献者表格格式不正确');\\n  return;\\n}\\n\",\n+              \"lineStart\": 264,\n+              \"lineEnd\": 269\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"header\",\n+              \"code\": \"const header = headerLine[0].toLowerCase();\",\n+              \"lineStart\": 270,\n+              \"lineEnd\": 270\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasAuthor\",\n+              \"code\": \"const hasAuthor = /作者/.test(header);\",\n+              \"lineStart\": 271,\n+              \"lineEnd\": 271\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasCommitCount\",\n+              \"code\": \"const hasCommitCount = /提交数/.test(header);\",\n+              \"lineStart\": 272,\n+              \"lineEnd\": 272\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasDomain\",\n+              \"code\": \"const hasDomain = /(领域|工作|贡献)/.test(header);\",\n+              \"lineStart\": 273,\n+              \"lineEnd\": 273\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasKeyCommit\",\n+              \"code\": \"const hasKeyCommit = /(关键提交|提交)/.test(header);\\n\\nif (hasAuthor && hasCommitCount && hasDomain && hasKeyCommit) {\\n  result.pass('贡献者表格包含所有必需列（作者、提交数、主要领域、关键提交）');\\n} else {\\n  if (!hasAuthor) result.warn('贡献者表格缺少\\\"作者\\\"列');\\n  if (!hasCommitCount) result.warn('贡献者表格缺少\\\"提交数\\\"列');\\n  if (!hasDomain) result.warn('贡献者表格缺少\\\"主要领域\\\"列');\\n  if (!hasKeyCommit) result.fail('贡献者表格缺少\\\"关键提交\\\"列');\\n}\\n\\n// Check if table has data rows\",\n+              \"lineStart\": 274,\n+              \"lineEnd\": 285\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"rows\",\n+              \"code\": \"const rows = section.split('\\\\n').filter((line) => /^\\\\|[^-]/.test(line));\",\n+              \"lineStart\": 286,\n+              \"lineEnd\": 286\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"dataRows\",\n+              \"code\": \"const dataRows = rows.length - 1; // Subtract header row\\n\\nif (dataRows > 0) {\\n  result.pass(`贡献者表格包含 ${dataRows} 行数据`);\\n} else {\\n  result.fail('贡献者表格无数据');\\n}\\n\\n// Check if key commits use proper hash format\",\n+              \"lineStart\": 287,\n+              \"lineEnd\": 295\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"keyCommitCells\",\n+              \"code\": \"const keyCommitCells = section.match(/\\\\|\\\\s*`[^`]+`\\\\s*\\\\|?\\\\s*$/gm) || [];\",\n+              \"lineStart\": 296,\n+              \"lineEnd\": 296\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"validHashes\",\n+              \"code\": \"  const validHashes = keyCommitCells.filter((cell) => /`[0-9a-f]{7,}`/.test(cell));\\n\\n  if (keyCommitCells.length > 0 && validHashes.length === keyCommitCells.length) {\\n    result.pass('关键提交列使用正确的 commit 哈希格式');\\n  } else if (keyCommitCells.length > 0) {\\n    result.warn('关键提交列中部分提交可能未使用正确的哈希格式');\\n  }\\n};\\n\\n/**\\n * Check for design intent explanations\\n * Bad example: \\\"添加了 getRequestIntervalMs 函数\\\" (只说做了什么)\\n * Good example: 解释为什么需要、解决什么问题、方案选择理由 (至少50字)\\n */\",\n+              \"lineStart\": 297,\n+              \"lineEnd\": 310\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"checkDesignIntent\",\n+              \"code\": \"const checkDesignIntent = (content, result) => {\",\n+              \"lineStart\": 311,\n+              \"lineEnd\": 311\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"domainSections\",\n+              \"code\": \"const domainSections = content.match(/### 2\\\\.\\\\d+ .+?\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n### 2\\\\.\\\\d|\\\\n## |$)/g) || [];\\n\\nif (domainSections.length === 0) {\\n  result.warn('未找到领域/变更章节');\\n  return;\\n}\\n\",\n+              \"lineStart\": 312,\n+              \"lineEnd\": 318\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasIntent\",\n+              \"code\": \"let hasIntent = 0;\",\n+              \"lineStart\": 319,\n+              \"lineEnd\": 319\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"missingIntent\",\n+              \"code\": \"let missingIntent = 0;\",\n+              \"lineStart\": 320,\n+              \"lineEnd\": 320\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"tooShort\",\n+              \"code\": \"let tooShort = 0;\\n\\ndomainSections.forEach((section) => {\\n  // Check if design intent is present\",\n+              \"lineStart\": 321,\n+              \"lineEnd\": 324\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"intentMatch\",\n+              \"code\": \"const intentMatch = section.match(/\\\\*\\\\*设计意图\\\\*\\\\*[：:]\\\\s*\\\\n?([\\\\s\\\\S]*?)(?=\\\\n\\\\*\\\\*|\\\\n###|\\\\n##|$)/);\\n\\nif (!intentMatch) {\\n  missingIntent++;\\n  return;\\n}\\n\",\n+              \"lineStart\": 325,\n+              \"lineEnd\": 331\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"intentContent\",\n+              \"code\": \"  const intentContent = intentMatch[1].trim();\\n\\n  // Check minimum length (50 chars for meaningful explanation)\\n  if (intentContent.length < 50) {\\n    tooShort++;\\n  } else {\\n    hasIntent++;\\n  }\\n});\\n\\nif (missingIntent === 0 && tooShort === 0) {\\n  result.pass(`所有 ${hasIntent} 个领域都包含充分的设计意图说明（≥50字）`);\\n} else {\\n  if (missingIntent > 0) {\\n    result.fail(`${missingIntent} 个领域缺少\\\"设计意图\\\"字段`);\",\n+              \"lineStart\": 332,\n+              \"lineEnd\": 358\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"checkRiskAssessment\",\n+              \"code\": \"const checkRiskAssessment = (content, result) => {\",\n+              \"lineStart\": 359,\n+              \"lineEnd\": 359\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"riskSection\",\n+              \"code\": \"const riskSection = content.match(/## 4\\\\. (风险评估|技术影响与风险)\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n## |$)/);\\n\\nif (!riskSection) {\\n  result.fail('缺少风险评估章节');\\n  return;\\n}\\n\",\n+              \"lineStart\": 360,\n+              \"lineEnd\": 366\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"section\",\n+              \"code\": \"const section = riskSection[2];\\n\\n// Check for subsections\",\n+              \"lineStart\": 367,\n+              \"lineEnd\": 369\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"requiredSubsections\",\n+              \"code\": \"const requiredSubsections = [\\n  { pattern: /### 兼容性影响/, name: '兼容性影响' },\\n  { pattern: /### 配置变更/, name: '配置变更' },\\n  { pattern: /### 性能影响/, name: '性能影响' },\\n  { pattern: /### 测试覆盖/, name: '测试覆盖' },\\n];\\n\",\n+              \"lineStart\": 370,\n+              \"lineEnd\": 376\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"missing\",\n+              \"code\": \"const missing = requiredSubsections.filter((s) => !s.pattern.test(section));\\n\\nif (missing.length === 0) {\\n  result.pass('风险评估包含所有必需的子章节');\\n} else {\\n  missing.forEach((s) => result.fail(`风险评估缺少\\\"${s.name}\\\"小节`));\\n}\\n\\n// Check if subsections have substantial content (not just placeholders)\\nrequiredSubsections.forEach((sub) => {\",\n+              \"lineStart\": 377,\n+              \"lineEnd\": 386\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"subMatch\",\n+              \"code\": \"const subMatch = section.match(\\n  new RegExp(`${sub.pattern.source}\\\\\\\\n\\\\\\\\n?([\\\\\\\\s\\\\\\\\S]*?)(?=\\\\\\\\n### |\\\\\\\\n## |$)`),\\n);\\n\\nif (subMatch) {\",\n+              \"lineStart\": 387,\n+              \"lineEnd\": 391\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"subContent\",\n+              \"code\": \"const subContent = subMatch[1].trim();\\n\\n// Check for TODO markers\\nif (/<!-- TODO/.test(subContent)) {\\n  result.warn(`\\\"${sub.name}\\\"小节包含未完成的 TODO 标记`);\\n  return;\\n}\\n\\n// Check minimum content length\\nif (subContent.length < 20) {\\n  result.warn(`\\\"${sub.name}\\\"小节内容过短`);\\n} else {\\n  // Check for specificity (mentions specific modules/services)\",\n+              \"lineStart\": 392,\n+              \"lineEnd\": 404\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasSpecificContent\",\n+              \"code\": \"        const hasSpecificContent =\\n          /`[^`]+`/.test(subContent) || // Has code references\\n          /apps\\\\/|libraries\\\\/|services\\\\//.test(subContent) || // Has paths\\n          /(高风险|中风险|低风险)/.test(subContent); // Has risk levels\\n\\n        if (hasSpecificContent) {\\n          result.pass(`\\\"${sub.name}\\\"小节包含具体内容`);\\n        } else {\\n          result.warn(`\\\"${sub.name}\\\"小节可能过于笼统 - 建议列出具体受影响的模块/服务`);\\n        }\\n      }\\n    }\\n  });\\n};\\n\",\n+              \"lineStart\": 405,\n+              \"lineEnd\": 422\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"checkCommitSummaries\",\n+              \"code\": \"const checkCommitSummaries = (content, result) => {\",\n+              \"lineStart\": 423,\n+              \"lineEnd\": 423\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"summarySection\",\n+              \"code\": \"const summarySection = content.match(/## 5\\\\. 单提交摘要.*?\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n---\\\\n|$)/);\\n\\nif (!summarySection) {\\n  return; // Optional section\\n}\\n\",\n+              \"lineStart\": 424,\n+              \"lineEnd\": 429\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"section\",\n+              \"code\": \"const section = summarySection[1];\",\n+              \"lineStart\": 430,\n+              \"lineEnd\": 430\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"commits\",\n+              \"code\": \"const commits = section.match(/### [`']?[0-9a-f]{7,}[`']?/gi) || [];\\n\\nif (commits.length > 0) {\\n  result.pass(`单提交摘要包含 ${commits.length} 个提交详情`);\\n} else {\\n  result.warn('单提交摘要章节无有效内容');\\n  return;\\n}\\n\\n// Check if summaries have required fields\",\n+              \"lineStart\": 431,\n+              \"lineEnd\": 440\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"summaries\",\n+              \"code\": \"const summaries = section.split(/### [`']?[0-9a-f]{7,}/i).slice(1);\",\n+              \"lineStart\": 441,\n+              \"lineEnd\": 441\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"completeCount\",\n+              \"code\": \"let completeCount = 0;\\n\\nsummaries.forEach((summary) => {\",\n+              \"lineStart\": 442,\n+              \"lineEnd\": 444\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasSubject\",\n+              \"code\": \"const hasSubject = /\\\\*\\\\*主题\\\\*\\\\*/.test(summary);\",\n+              \"lineStart\": 445,\n+              \"lineEnd\": 445\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hasChanges\",\n+              \"code\": \"    const hasChanges = /\\\\*\\\\*变更要点\\\\*\\\\*/.test(summary);\\n\\n    if (hasSubject && hasChanges) {\\n      completeCount++;\\n    }\\n  });\\n\\n  if (completeCount === summaries.length) {\\n    result.pass('所有单提交摘要包含必需字段（主题、变更要点）');\\n  } else {\\n    result.warn(`${summaries.length - completeCount} 个单提交摘要缺少必需字段`);\\n  }\\n};\\n\\n/**\",\n+              \"lineStart\": 446,\n+              \"lineEnd\": 462\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"main\",\n+              \"code\": \"const main = async () => {\",\n+              \"lineStart\": 463,\n+              \"lineEnd\": 463\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"markdownFile\",\n+              \"code\": \"const markdownFile = process.argv[2];\\n\\nif (!markdownFile) {\\n  usage();\\n  process.exit(1);\\n}\\n\\nconsole.info(`Validating report: ${markdownFile}`);\\nconsole.info('='.repeat(60));\\n\\n// Read file\",\n+              \"lineStart\": 464,\n+              \"lineEnd\": 474\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"content\",\n+              \"code\": \"let content;\\ntry {\\n  content = await readFile(markdownFile, 'utf8');\\n} catch (error) {\\n  console.error(`❌ Error reading file: ${error.message}`);\\n  process.exit(1);\\n}\\n\",\n+              \"lineStart\": 475,\n+              \"lineEnd\": 482\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"result\",\n+              \"code\": \"const result = new CheckResult();\\n\\n// Run all checks\\ncheckRequiredSections(content, result);\\ncheckOverview(content, result);\\ncheckCodeSnippets(content, result);\\ncheckTodoMarkers(content, result);\\ncheckFileReferences(content, result);\\ncheckCommitHashFormat(content, result);\\ncheckContributorTable(content, result);\\ncheckDesignIntent(content, result);\\ncheckRiskAssessment(content, result);\\ncheckCommitSummaries(content, result);\\n\\n// Print results\",\n+              \"lineStart\": 483,\n+              \"lineEnd\": 519\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 189,\n+          \"path\": \".claude/skills/recent-changes-digest/SKILL.md\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/skills/recent-changes-digest/SKILL.md b/.claude/skills/recent-changes-digest/SKILL.md\\ndeleted file mode 100644\\nindex 1fe54584e..000000000\\n--- a/.claude/skills/recent-changes-digest/SKILL.md\\n+++ /dev/null\\n@@ -1,189 +0,0 @@\\n----\\n-name: recent-changes-digest\\n-description: 总结指定 git 提交区间的变更，输出含聚焦领域、作者、设计意图与速览的 Markdown 报告。\\n----\\n-\\n-# Recent Changes Digest\\n-\\n-## 目标与交付物\\n-\\n-- 先生成结构化 JSON（含每个文件的 patch），再据此撰写结构化 Markdown 文档，概览提交区间（`<old>`..`<new>`）的关键改动。\\n-- 报告应至少包含：整体概览、改动聚焦领域、贡献者、设计意图、改动速览表；必要时补充技术影响、测试验证、后续建议，并按语义模块聚类（如“错误处理/观测性/Vendor/前端/工具”等）。\\n-- 改动聚焦领域需写足细节并显式关联涉及的 commit 短 hash，方便读者对照。\\n-- 需基于 JSON 生成每个 commit 的摘要（可用于正文或附录），每条使用 Markdown 标题+正文的格式（非单行），确保读者单条即可理解改动。\\n-- 确保读者“开卷即得”，能快速定位目录与重点文件。\\n-\\n-## 触发条件（When to load this Skill）\\n-\\n-- 用户提及“近期改动 / commit 摘要 / release note”等需求。\\n-- 用户提供具体 commit、tag、分支或默认最新提交，需要在仓库上下文内梳理变更。\\n-- 需要跨多个目录梳理主题、作者与动机，而不仅仅是列出 `git log`。\\n-\\n-## 输入预期\\n-\\n-- 一个可访问的 Git 仓库（默认 `/home/c1/Work/Yuan`）。\\n-- 至少一个提交范围：\\n-  - `old..new`（标准范围）；\\n-  - 单一起点或终点时，可用 `git rev-parse` 补齐；\\n-  - 若完全缺省，可提示用户或默认使用 `HEAD~10..HEAD`。\\n-\\n-## 前置检查\\n-\\n-1. `git status --short`，确认无必要的未提交文件影响判断。\\n-2. `git rev-parse --show-toplevel`，确保在仓库根目录执行命令。\\n-3. 创建输出目录：`docs/reports/`；若无权限需提示用户。\\n-\\n-## 用法（先跑脚本，再用 JSON 写摘要）\\n-\\n-1. 生成结构化 JSON（含每个文件的 patch）：\\n-   ```bash\\n-   .claude/skills/recent-changes-digest/scripts/generate-digest.js <old> <new> [output_path]\\n-   # 默认输出 docs/reports/recent-changes-YYYY-MM-DD.json\\n-   ```\\n-2. 基于生成的 JSON 写 Markdown 摘要，建议用 `jq` 快速查看：\\n-   ```bash\\n-   jq '.range, .contributors, .topDirs | .commits[0]' docs/reports/recent-changes-YYYY-MM-DD.json\\n-   ```\\n-   输出数据结构示例：\\n-\\n-```json\\n-{\\n-  \\\"range\\\": {\\n-    \\\"old\\\": \\\"<old>\\\",\\n-    \\\"new\\\": \\\"<new>\\\",\\n-    \\\"label\\\": \\\"old..new\\\",\\n-    \\\"startDate\\\": \\\"2025-11-22\\\",\\n-    \\\"endDate\\\": \\\"2025-11-25\\\",\\n-    \\\"commitCount\\\": 36,\\n-    \\\"generatedAt\\\": \\\"2025-11-25T07:00:00Z\\\"\\n-  },\\n-  \\\"contributors\\\": [{ \\\"name\\\": \\\"CZ\\\", \\\"email\\\": \\\"zheng.chen@...\\\", \\\"commits\\\": 20 }],\\n-  \\\"topDirs\\\": [{ \\\"dir\\\": \\\"apps\\\", \\\"fileCount\\\": 176 }],\\n-  \\\"commits\\\": [\\n-    {\\n-      \\\"hash\\\": \\\"03a48cfc40aa113fb47a6458a1f9619b7c005614\\\",\\n-      \\\"short\\\": \\\"03a48cfc4\\\",\\n-      \\\"author\\\": \\\"CZ\\\",\\n-      \\\"email\\\": \\\"zheng.chen@...\\\",\\n-      \\\"authoredAt\\\": \\\"2025-11-22T01:07:13+08:00\\\",\\n-      \\\"subject\\\": \\\"feat: ...\\\",\\n-      \\\"files\\\": [\\n-        {\\n-          \\\"path\\\": \\\"libraries/protocol/src/terminal.ts\\\",\\n-          \\\"additions\\\": 6,\\n-          \\\"deletions\\\": 3,\\n-          \\\"patch\\\": \\\"diff --git a/... b/...\\\\n@@ ...\\\"\\n-        }\\n-      ]\\n-    }\\n-  ]\\n-}\\n-```\\n-\\n-## 工作流（遵循渐进披露理念）\\n-\\n-1. **生成原始数据**\\n-\\n-   - 运行脚本生成 JSON：`.claude/skills/recent-changes-digest/scripts/generate-digest.js <old> <new>`.\\n-   - 确认输出文件存在，路径默认 `docs/reports/recent-changes-YYYY-MM-DD.json`。\\n-\\n-2. **快速审阅（Level 2 信息）**\\n-\\n-   - 查看范围与作者：`jq '.range, .contributors' <json>`.\\n-   - 查看顶层目录热度：`jq '.topDirs' <json>`.\\n-   - 抽样首尾 commit：`jq '.commits[0], .commits[-1]' <json>`.\\n-\\n-3. **逐条调研（基于 JSON）**\\n-\\n-   - 按需查看关键提交的文件与 patch：`jq '.commits[] | {subject, files}' <json>`.\\n-   - 关注：\\n-     - 涉及目录/项目（`apps/`, `libraries/`, `docs/`, `tools/`）。\\n-     - 技术焦点（功能/重构/依赖/安全/运维）。\\n-     - 作者与潜在意图（从 subject 与 patch 推断）。\\n-\\n-4. **语义聚类**\\n-\\n-   - 将 commits 按问题域聚类并命名模块（示例：“错误处理与观测”、“终端安全与鉴权”、“Vendor 接入与行情”、“前端体验与工具”、“运维与监控”）。\\n-   - 每个模块包含：涉及目录/文件、主要提交（短 hash）、意图与风险。\\n-\\n-5. **撰写报告（Level 3 输出，必须基于 JSON 数据）**\\n-\\n-   - 先加载 JSON（不可跳过脚本生成步骤），用其中的 commits/files/patch 聚合后写 Markdown，输出文件命名建议：`docs/reports/recent-changes-<YYYY-MM-DD>.md`。\\n-   - 推荐结构：\\n-     ```\\n-     # 近期变动摘要（<range>）\\n-     ## 1. 概览\\n-     ## 2. 改动聚焦领域（按语义模块分组）\\n-     ## 3. 贡献者\\n-     ## 4. 设计意图\\n-     ## 5. 改动速览（表格）\\n-     ## 6. 技术影响与风险\\n-     ## 7. 测试与验证\\n-     ## 8. 单 commit 摘要（可放附录，正文可引用关键条目）\\n-     ## 9. 后续建议\\n-     ## 10. 参考资料（可选）\\n-     ```\\n-   - 语义模块建议：错误处理与观测、安全鉴权、Vendor 与交易所、前端体验与工具、运维与部署/监控、依赖/发布同步；每个模块要列出涉及目录/文件、关键提交（短 hash + 主题）、核心意图与风险，并在描述中挂上对应 commit 短 hash。\\n-   - 速览表用 JSON 的 commit 列表生成：短 hash / 作者 / 主题 / 核心目录。\\n-   - 引用文件路径并可附行号（`apps/vendor-aster/src/quote.ts:1-40`）方便跳转；补充 patch 中体现的关键行为（新增接口、移除字段、校验/指标调整等）。\\n-   - 自动化提交（版本号 bump）可简述为“无业务逻辑改动”。\\n-   - 在正文或附录附上“单 commit 摘要”列表，格式见下文，确保每条可独立理解变更内容；正文可挑选关键 commit 的摘要作为模块内证据，其余放入附录。\\n-\\n-6. **自检与交付**\\n-   - `git status --short docs/reports`，确认文件生成位置正确。\\n-   - 人检：\\n-     - 四个核心问题是否回答。\\n-     - 是否覆盖关键作者、目录、意图与风险。\\n-     - 语义模块划分是否清晰，摘要是否简明。\\n-\\n-### 单 commit 摘要格式（基于 JSON 自动生成）\\n-\\n-- 生成流程：\\n-  1. 运行脚本产出 JSON。\\n-  2. 对 JSON 中每个 commit 生成独立摘要，供全文速览或附录引用。\\n-  3. 写总览时可择要抽取关键 commit。\\n-- 输出格式（每条）：\\n-  - `hash(short)` 作者 | 日期 | 模块标签（1~2 个，如「安全」「错误处理」「Vendor」「前端」「运维」）\\n-  - 主题：原 commit subject\\n-  - 变更要点（3~5 条，覆盖文件/行为/接口/校验/观测）：\\n-    - 文件/目录：具体路径（可含行号），描述改动动作（新增/移除/重构）与目的。\\n-    - 接口/协议/校验：指出新增参数、字段来源变化、校验逻辑变更。\\n-    - 行为/数据流：运行时行为或数据来源的变化。\\n-    - 观测/指标：新增或变更的指标、日志、错误计数等。\\n-  - 风险/影响（1~2 条）：兼容性/配置/依赖/运维影响。\\n-  - 测试：列出新增/修改的测试文件；若无，标注“未见测试记录”。\\n-- 示例（说明用）：\\n-  - `03a48cfc4` CZ | 2025-11-22 | 安全\\n-  - 主题：feat: enforce terminal_id to be derived from public_key in Terminal...\\n-  - 变更要点：\\n-    - `libraries/protocol/src/terminal.ts:138`：连接 URL 中强制用公钥派生 `terminal_id`，保证 ID 与密钥绑定。\\n-    - `libraries/protocol/src/terminal.ts:140-143`：对 `host_token` 进行签名并随连接参数发送，用于身份校验。\\n-    - `common/changes/@yuants/protocol/2025-11-21-16-55.json`：同步记录协议变更。\\n-  - 风险/影响：依赖自定义 `terminal_id` 的客户端需改为公钥派生，否则连接可能被拒。\\n-  - 测试：未见测试记录。\\n-\\n-## 写作风格指南\\n-\\n-- **语气**：客观、面向工程同事；突出事实与洞察。\\n-- **结构**：短段落 + 列表优先；表格用于比较提交。\\n-- **引用**：路径 + 行号（如 `apps/vendor-okx/src/account.ts:1-80`）。\\n-- **语言**：保持中文输出，如需引用代码/命令使用英文。\\n-- **单 commit 摘要**：保持简洁但覆盖关键点（文件、接口、行为、风险、测试），可直接复制至附录或正文。\\n-\\n-## 质量检查清单\\n-\\n-- [ ] 范围无误，起止 commit 正确。\\n-- [ ] 每个主题附带至少一个具体文件或模块引用。\\n-- [ ] 明确列出作者与角色（个人 / bot）。\\n-- [ ] 给出潜在风险或下一步建议。\\n-- [ ] 脚本或命令在仓库根目录可直接执行。\\n-- [ ] 为每个 commit 生成独立摘要（含文件/行为/风险/测试），正文或附录可直接使用。\\n-\\n-## 常见错误 & 规避\\n-\\n-- **仅罗列 commit**：需抽象出主题与意图。\\n-- **忽视自动化提交**：虽无逻辑变更，仍需说明“版本同步”。\\n-- **引用路径不准确**：使用 `rg -n` 或 `nl -ba` 确认行号。\\n-- **上下文缺失**：必要时说明链路（例如“先新增 cache，再在 vendors 引入”）。\\n-\\n-> 若需扩展更多自动化（如生成表格、同步到文档系统），可在 `skills/recent-changes-digest/scripts/` 内继续添加脚本，并在上述工作流中引用。\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 143,\n+          \"path\": \".claude/skills/recent-changes-digest/scripts/generate-digest.js\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/skills/recent-changes-digest/scripts/generate-digest.js b/.claude/skills/recent-changes-digest/scripts/generate-digest.js\\ndeleted file mode 100755\\nindex b5e076dce..000000000\\n--- a/.claude/skills/recent-changes-digest/scripts/generate-digest.js\\n+++ /dev/null\\n@@ -1,143 +0,0 @@\\n-#!/usr/bin/env node\\n-/* eslint-disable no-console */\\n-import { mkdir, writeFile } from 'node:fs/promises';\\n-import { dirname, resolve } from 'node:path';\\n-import { execFile } from 'node:child_process';\\n-import { promisify } from 'node:util';\\n-\\n-const exec = promisify(execFile);\\n-\\n-const usage = () => {\\n-  console.error(\\n-    [\\n-      'Usage: scripts/generate-digest.js <old_commit> <new_commit> [output_path]',\\n-      '',\\n-      'Generate structured JSON for commits in range <old_commit>..<new_commit>',\\n-      'including per-file stats and patch text. Default output: docs/reports/recent-changes-YYYY-MM-DD.json',\\n-      '',\\n-      'Example:',\\n-      '  .claude/skills/recent-changes-digest/scripts/generate-digest.js HEAD~10 HEAD',\\n-    ].join('\\\\n'),\\n-  );\\n-};\\n-\\n-const main = async () => {\\n-  const [oldRef, newRef, outputArg] = process.argv.slice(2);\\n-  if (!oldRef || !newRef) {\\n-    usage();\\n-    process.exit(1);\\n-  }\\n-\\n-  const repoRoot = (await exec('git', ['rev-parse', '--show-toplevel'])).stdout.trim();\\n-  process.chdir(repoRoot);\\n-\\n-  const shortOld = (await exec('git', ['rev-parse', '--short', oldRef])).stdout.trim();\\n-  const shortNew = (await exec('git', ['rev-parse', '--short', newRef])).stdout.trim();\\n-  const today = new Date().toISOString().slice(0, 10);\\n-  const output = outputArg || `docs/reports/recent-changes-${today}.json`;\\n-\\n-  await mkdir(dirname(output), { recursive: true });\\n-\\n-  const startDate =\\n-    (await exec('git', ['log', '--reverse', '--date=short', '--format=%ad', `${oldRef}..${newRef}`])).stdout\\n-      .split('\\\\n')\\n-      .filter(Boolean)[0] || null;\\n-  const endDate =\\n-    (\\n-      await exec('git', ['log', '-1', '--date=short', '--format=%ad', `${oldRef}..${newRef}`])\\n-    ).stdout.trim() || null;\\n-  const commitCount = Number(\\n-    (await exec('git', ['rev-list', '--count', `${oldRef}..${newRef}`])).stdout.trim() || '0',\\n-  );\\n-  if (!startDate || !endDate || commitCount === 0) {\\n-    throw new Error(`No commits found in range ${shortOld}..${shortNew}`);\\n-  }\\n-\\n-  const authorLines = (await exec('git', ['log', `${oldRef}..${newRef}`, '--format=%an|%ae'])).stdout\\n-    .split('\\\\n')\\n-    .filter(Boolean);\\n-  const contributorMap = new Map();\\n-  for (const line of authorLines) {\\n-    const [name, email] = line.split('|');\\n-    const key = `${name}|${email}`;\\n-    contributorMap.set(key, (contributorMap.get(key) || 0) + 1);\\n-  }\\n-  const contributors = Array.from(contributorMap.entries()).map(([key, commits]) => {\\n-    const [name, email] = key.split('|');\\n-    return { name, email, commits };\\n-  });\\n-\\n-  const topDirs = (await exec('git', ['diff', '--name-only', `${oldRef}..${newRef}`])).stdout\\n-    .split('\\\\n')\\n-    .filter(Boolean)\\n-    .map((p) => p.split('/')[0] || '.')\\n-    .reduce((acc, dir) => acc.set(dir, (acc.get(dir) || 0) + 1), new Map());\\n-  const topDirList = Array.from(topDirs.entries())\\n-    .map(([dir, fileCount]) => ({ dir, fileCount }))\\n-    .sort((a, b) => b.fileCount - a.fileCount);\\n-\\n-  const rawCommits = (\\n-    await exec('git', [\\n-      'log',\\n-      '--reverse',\\n-      '--date=iso8601',\\n-      '--format=%H|%h|%an|%ae|%ad|%s',\\n-      `${oldRef}..${newRef}`,\\n-    ])\\n-  ).stdout\\n-    .split('\\\\n')\\n-    .filter(Boolean);\\n-\\n-  const commits = [];\\n-  for (const line of rawCommits) {\\n-    const [hash, short, author, email, authoredAt, subject] = line.split('|');\\n-    // per-file stats\\n-    const numstat = (await exec('git', ['show', '--numstat', '--format=', hash])).stdout\\n-      .split('\\\\n')\\n-      .filter(Boolean)\\n-      .map((row) => {\\n-        const [add, del, ...rest] = row.split('\\\\t');\\n-        return {\\n-          additions: add === '-' ? null : Number(add),\\n-          deletions: del === '-' ? null : Number(del),\\n-          path: rest.join('\\\\t'),\\n-        };\\n-      });\\n-\\n-    const files = [];\\n-    for (const stat of numstat) {\\n-      if (!stat.path) continue;\\n-      const patch = (\\n-        await exec('git', ['show', '--unified=0', '--no-color', `${hash}^!`, '--', stat.path], {\\n-          maxBuffer: 10 * 1024 * 1024,\\n-        })\\n-      ).stdout;\\n-      files.push({ ...stat, patch });\\n-    }\\n-\\n-    commits.push({ hash, short, author, email, authoredAt, subject, files });\\n-  }\\n-\\n-  const outputData = {\\n-    range: {\\n-      old: oldRef,\\n-      new: newRef,\\n-      label: `${shortOld}..${shortNew}`,\\n-      startDate,\\n-      endDate,\\n-      commitCount,\\n-      generatedAt: new Date().toISOString(),\\n-    },\\n-    contributors,\\n-    topDirs: topDirList,\\n-    commits,\\n-  };\\n-\\n-  await writeFile(output, JSON.stringify(outputData, null, 2));\\n-  console.info(`Digest written to ${output}`);\\n-};\\n-\\n-main().catch((err) => {\\n-  console.error(err?.stack || err?.message || err);\\n-  process.exit(1);\\n-});\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"f0ca149d40d7a475daaa287adef6162b22882985\",\n+      \"short\": \"f0ca149d4\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-06 12:08:39 +0800\",\n+      \"subject\": \"feat(ci): add report into pr (#2224)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": \"ci\",\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 18,\n+          \"path\": \".claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit f0ca149d40d7a475daaa287adef6162b22882985\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 12:08:39 2025 +0800\\n\\n    feat(ci): add report into pr (#2224)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh b/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\\nindex 8dca20bc1..b1e799534 100755\\n--- a/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\\n+++ b/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\\n@@ -62 +62,4 @@ PR_TITLE=\\\"Daily Git Change Report ${REPORT_DATE}\\\"\\n-read -r -d '' PR_BODY <<'EOF' || true\\n+PR_BODY_FILE=\\\"$(mktemp)\\\"\\n+trap 'rm -f \\\"$PR_BODY_FILE\\\"' EXIT\\n+\\n+cat > \\\"$PR_BODY_FILE\\\" <<EOF\\n@@ -72,9 +75,2 @@ read -r -d '' PR_BODY <<'EOF' || true\\n-1. `${JSON_PATH}` - 结构化 JSON 数据\\n-2. `${REPORT_PATH}` - 完整的语义化报告\\n-\\n-### 报告特点\\n-- 使用 Claude Code 的 git-changes-reporter skill 生成\\n-- 包含技术领域分析\\n-- 贡献者统计和分析\\n-- 风险评估和建议\\n-- 具体的文件引用和代码位置\\n+1. ${JSON_PATH} - 结构化 JSON 数据\\n+2. ${REPORT_PATH} - 完整的语义化报告\\n@@ -85 +81 @@ read -r -d '' PR_BODY <<'EOF' || true\\n-🤖 Generated with [Claude Code](https://claude.com/claude-code)\\n+### 报告正文\\n@@ -88,6 +84,2 @@ EOF\\n-PR_BODY=${PR_BODY//\\\\$\\\\{REPORT_DATE\\\\}/${REPORT_DATE}}\\n-PR_BODY=${PR_BODY//\\\\$\\\\{OLD_SHORT\\\\}/${OLD_SHORT}}\\n-PR_BODY=${PR_BODY//\\\\$\\\\{NEW_SHORT\\\\}/${NEW_SHORT}}\\n-PR_BODY=${PR_BODY//\\\\$\\\\{COMMIT_COUNT\\\\}/${COMMIT_COUNT}}\\n-PR_BODY=${PR_BODY//\\\\$\\\\{JSON_PATH\\\\}/${JSON_PATH}}\\n-PR_BODY=${PR_BODY//\\\\$\\\\{REPORT_PATH\\\\}/${REPORT_PATH}}\\n+cat \\\"$REPORT_PATH\\\" >> \\\"$PR_BODY_FILE\\\"\\n+printf \\\"\\\\n\\\\n🤖 Generated with Claude Code\\\\n\\\" >> \\\"$PR_BODY_FILE\\\"\\n@@ -98 +90 @@ if [[ \\\"${DRY_RUN:-0}\\\" != \\\"1\\\" ]]; then\\n-    --body \\\"$PR_BODY\\\" \\\\\\n+    --body-file \\\"$PR_BODY_FILE\\\" \\\\\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"ac680a8a1d0d7d4817d059cae1ec5e517b04ed8d\",\n+      \"short\": \"ac680a8a1\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-06 13:33:10 +0800\",\n+      \"subject\": \"feat(alert-receiver): 限制告警详情元素数量以优化显示 (#2225)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": \"alert-receiver\",\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 24,\n+          \"deletions\": 118,\n+          \"path\": \"apps/alert-receiver/src/feishu/render-alert-message-card.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit ac680a8a1d0d7d4817d059cae1ec5e517b04ed8d\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 13:33:10 2025 +0800\\n\\n    feat(alert-receiver): 限制告警详情元素数量以优化显示 (#2225)\\n\\ndiff --git a/apps/alert-receiver/src/feishu/render-alert-message-card.ts b/apps/alert-receiver/src/feishu/render-alert-message-card.ts\\nindex ec41e5125..ba4dcd182 100644\\n--- a/apps/alert-receiver/src/feishu/render-alert-message-card.ts\\n+++ b/apps/alert-receiver/src/feishu/render-alert-message-card.ts\\n@@ -7,0 +8 @@ const getSeverityIndex = (value: string) => SEVERITY_ORDER.indexOf(value as (typ\\n+const MAX_ALERT_ITEMS = 30; // 避免超过 Feishu 2.0 卡片 200 元素上限\\n@@ -18 +19,3 @@ export const renderAlertMessageCard = (group: IAlertGroup) => {\\n-  const detailElements = group.alerts.flatMap((alert) => {\\n+  const visibleAlerts = group.alerts.slice(0, MAX_ALERT_ITEMS);\\n+  const hiddenCount = Math.max(group.alerts.length - visibleAlerts.length, 0);\\n+  const detailElements = visibleAlerts.map((alert, index) => {\\n@@ -27,117 +30,9 @@ export const renderAlertMessageCard = (group: IAlertGroup) => {\\n-    return [\\n-      { tag: 'hr', margin },\\n-      {\\n-        tag: 'column_set',\\n-        horizontal_spacing: '8px',\\n-        horizontal_align: 'left',\\n-        columns: [\\n-          {\\n-            tag: 'column',\\n-            width: 'weighted',\\n-            elements: [\\n-              {\\n-                tag: 'markdown',\\n-                content: `<font color=\\\"grey\\\">当前状态</font>：<font color=\\\"${isFiring ? 'red' : 'green'}\\\">${\\n-                  isFiring ? '告警中' : '已解决'\\n-                }</font>`,\\n-                text_align: 'left',\\n-                text_size: 'normal_v2',\\n-                margin,\\n-              },\\n-            ],\\n-            vertical_align: 'top',\\n-            weight: 1,\\n-          },\\n-        ],\\n-        margin,\\n-      },\\n-      {\\n-        tag: 'column_set',\\n-        horizontal_spacing: '8px',\\n-        horizontal_align: 'left',\\n-        columns: [\\n-          {\\n-            tag: 'column',\\n-            width: 'weighted',\\n-            elements: [\\n-              {\\n-                tag: 'markdown',\\n-                content: `<font color=\\\"grey\\\">告警时间</font>\\\\n${alert.start_time}`,\\n-                text_align: 'left',\\n-                text_size: 'normal_v2',\\n-                margin,\\n-              },\\n-            ],\\n-            vertical_spacing: '8px',\\n-            horizontal_align: 'left',\\n-            vertical_align: 'top',\\n-            weight: 1,\\n-          },\\n-          {\\n-            tag: 'column',\\n-            width: 'weighted',\\n-            elements: [\\n-              {\\n-                tag: 'markdown',\\n-                content: `<font color=\\\"grey\\\">结束时间</font>\\\\n${endTime}`,\\n-                text_align: 'left',\\n-                text_size: 'normal_v2',\\n-                margin,\\n-              },\\n-            ],\\n-            vertical_align: 'top',\\n-            weight: 1,\\n-          },\\n-        ],\\n-        margin,\\n-      },\\n-      {\\n-        tag: 'column_set',\\n-        horizontal_spacing: '8px',\\n-        horizontal_align: 'left',\\n-        columns: [\\n-          {\\n-            tag: 'column',\\n-            width: 'weighted',\\n-            elements: [\\n-              {\\n-                tag: 'markdown',\\n-                content: `<font color=\\\"grey\\\">告警详情</font>：${alert.description ?? 'No description'}`,\\n-                text_align: 'left',\\n-                text_size: 'normal_v2',\\n-                margin,\\n-              },\\n-            ],\\n-            vertical_spacing: '8px',\\n-            horizontal_align: 'left',\\n-            vertical_align: 'top',\\n-            weight: 1,\\n-          },\\n-        ],\\n-        margin,\\n-      },\\n-      {\\n-        tag: 'column_set',\\n-        horizontal_spacing: '8px',\\n-        horizontal_align: 'left',\\n-        columns: [\\n-          {\\n-            tag: 'column',\\n-            width: 'weighted',\\n-            elements: [\\n-              {\\n-                tag: 'markdown',\\n-                content: `<font color=\\\"grey\\\">当前值</font>：${alert.current_value ?? 'N/A'}`,\\n-                text_align: 'left',\\n-                text_size: 'normal_v2',\\n-                margin,\\n-              },\\n-            ],\\n-            vertical_align: 'top',\\n-            weight: 1,\\n-          },\\n-        ],\\n-        margin,\\n-      },\\n-      { tag: 'hr', margin },\\n-    ];\\n+    const prefix = `${index + 1}. ${isFiring ? '[告警中]' : '[已解决]'}`;\\n+    const summary = alert.summary ?? alert.description ?? 'No description';\\n+    return {\\n+      tag: 'markdown',\\n+      content: `${prefix} ${alert.start_time} → ${endTime}\\\\n${summary}`,\\n+      text_align: 'left',\\n+      text_size: 'normal_v2',\\n+      margin,\\n+    };\\n@@ -273,0 +169,11 @@ export const renderAlertMessageCard = (group: IAlertGroup) => {\\n+          ...(hiddenCount > 0\\n+            ? [\\n+                {\\n+                  tag: 'markdown',\\n+                  content: `其余 ${hiddenCount} 条已隐藏，查看 Runbook 或链接获取完整列表。`,\\n+                  text_align: 'left',\\n+                  text_size: 'normal_v2',\\n+                  margin,\\n+                },\\n+              ]\\n+            : []),\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"MAX_ALERT_ITEMS\",\n+              \"code\": \"const MAX_ALERT_ITEMS = 30; // 避免超过 Feishu 2.0 卡片 200 元素上限\",\n+              \"lineStart\": 8,\n+              \"lineEnd\": 18\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"visibleAlerts\",\n+              \"code\": \"const visibleAlerts = group.alerts.slice(0, MAX_ALERT_ITEMS);\",\n+              \"lineStart\": 19,\n+              \"lineEnd\": 19\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"hiddenCount\",\n+              \"code\": \"const hiddenCount = Math.max(group.alerts.length - visibleAlerts.length, 0);\",\n+              \"lineStart\": 20,\n+              \"lineEnd\": 20\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"detailElements\",\n+              \"code\": \"const detailElements = visibleAlerts.map((alert, index) => {\",\n+              \"lineStart\": 21,\n+              \"lineEnd\": 29\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"prefix\",\n+              \"code\": \"const prefix = `${index + 1}. ${isFiring ? '[告警中]' : '[已解决]'}`;\",\n+              \"lineStart\": 30,\n+              \"lineEnd\": 30\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"summary\",\n+              \"code\": \"const summary = alert.summary ?? alert.description ?? 'No description';\\nreturn {\\n  tag: 'markdown',\\n  content: `${prefix} ${alert.start_time} → ${endTime}\\\\n${summary}`,\\n  text_align: 'left',\\n  text_size: 'normal_v2',\\n  margin,\\n};\\n      ...(hiddenCount > 0\\n        ? [\\n            {\\n              tag: 'markdown',\\n              content: `其余 ${hiddenCount} 条已隐藏，查看 Runbook 或链接获取完整列表。`,\\n              text_align: 'left',\\n              text_size: 'normal_v2',\",\n+              \"lineStart\": 31,\n+              \"lineEnd\": 180\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit ac680a8a1d0d7d4817d059cae1ec5e517b04ed8d\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 13:33:10 2025 +0800\\n\\n    feat(alert-receiver): 限制告警详情元素数量以优化显示 (#2225)\\n\\ndiff --git a/common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json b/common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\\nnew file mode 100644\\nindex 000000000..bd628486b\\n--- /dev/null\\n+++ b/common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/app-alert-receiver\\\",\\n+      \\\"comment\\\": \\\"reduce number of elements in alert details\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/app-alert-receiver\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"f58774d9ad6f85a1a13d18fa841dd7fe3430d904\",\n+      \"short\": \"f58774d9a\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-06 14:32:38 +0800\",\n+      \"subject\": \"chore: bump version (#2226)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/alert-receiver/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit f58774d9ad6f85a1a13d18fa841dd7fe3430d904\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 14:32:38 2025 +0800\\n\\n    chore: bump version (#2226)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/alert-receiver/CHANGELOG.json b/apps/alert-receiver/CHANGELOG.json\\nindex 7345033c7..bf5cecb4b 100644\\n--- a/apps/alert-receiver/CHANGELOG.json\\n+++ b/apps/alert-receiver/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.5.13\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-alert-receiver_v0.5.13\\\",\\n+      \\\"date\\\": \\\"Sat, 06 Dec 2025 06:31:30 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"reduce number of elements in alert details\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/alert-receiver/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit f58774d9ad6f85a1a13d18fa841dd7fe3430d904\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 14:32:38 2025 +0800\\n\\n    chore: bump version (#2226)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/alert-receiver/CHANGELOG.md b/apps/alert-receiver/CHANGELOG.md\\nindex 63c1c2f02..43b3a151d 100644\\n--- a/apps/alert-receiver/CHANGELOG.md\\n+++ b/apps/alert-receiver/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Sat, 06 Dec 2025 06:31:30 GMT and should not be manually modified.\\n+\\n+## 0.5.13\\n+Sat, 06 Dec 2025 06:31:30 GMT\\n+\\n+### Patches\\n+\\n+- reduce number of elements in alert details\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/alert-receiver/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit f58774d9ad6f85a1a13d18fa841dd7fe3430d904\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 14:32:38 2025 +0800\\n\\n    chore: bump version (#2226)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/alert-receiver/package.json b/apps/alert-receiver/package.json\\nindex 6a4a14045..0ec5ccffd 100644\\n--- a/apps/alert-receiver/package.json\\n+++ b/apps/alert-receiver/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.5.12\\\",\\n+  \\\"version\\\": \\\"0.5.13\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit f58774d9ad6f85a1a13d18fa841dd7fe3430d904\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 14:32:38 2025 +0800\\n\\n    chore: bump version (#2226)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json b/common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\\ndeleted file mode 100644\\nindex bd628486b..000000000\\n--- a/common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/app-alert-receiver\\\",\\n-      \\\"comment\\\": \\\"reduce number of elements in alert details\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/app-alert-receiver\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-alert-receiver/{main_2025-11-29-01-31.json => main_2025-12-06-06-31.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"903a168628d3b7e10924a677b0fc4e9517f928f0\",\n+      \"short\": \"903a16862\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-06 15:39:51 +0800\",\n+      \"subject\": \"feat(submitOrder): enhance error handling and add portfolio margin mode support (#2228)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": \"submitOrder\",\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 3,\n+          \"path\": \"apps/vendor-okx/src/accountInfos/uid.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 903a168628d3b7e10924a677b0fc4e9517f928f0\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sat Dec 6 15:39:51 2025 +0800\\n\\n    feat(submitOrder): enhance error handling and add portfolio margin mode support (#2228)\\n\\ndiff --git a/apps/vendor-okx/src/accountInfos/uid.ts b/apps/vendor-okx/src/accountInfos/uid.ts\\nindex 348b64b20..6dd95c14f 100644\\n--- a/apps/vendor-okx/src/accountInfos/uid.ts\\n+++ b/apps/vendor-okx/src/accountInfos/uid.ts\\n@@ -4,3 +4,3 @@ import { getAccountConfig, ICredential } from '../api/private-api';\\n-const accountConfigCache = createCache((key) => getAccountConfig(JSON.parse(key)), {\\n-  expire: 100_000,\\n-  swrAfter: 10_000,\\n+export const accountConfigCache = createCache((key) => getAccountConfig(JSON.parse(key)), {\\n+  expire: 1000_000, // 缓存 1000 秒\\n+  swrAfter: 100_000, // 100 秒后后台刷新\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"accountConfigCache\",\n+              \"code\": \"export const accountConfigCache = createCache((key) => getAccountConfig(JSON.parse(key)), {\\n  expire: 1000_000, // 缓存 1000 秒\\n  swrAfter: 100_000, // 100 秒后后台刷新\",\n+              \"lineStart\": 4,\n+              \"lineEnd\": 7\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 24,\n+          \"deletions\": 13,\n+          \"path\": \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 903a168628d3b7e10924a677b0fc4e9517f928f0\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sat Dec 6 15:39:51 2025 +0800\\n\\n    feat(submitOrder): enhance error handling and add portfolio margin mode support (#2228)\\n\\ndiff --git a/apps/vendor-okx/src/orders/submitOrder.ts b/apps/vendor-okx/src/orders/submitOrder.ts\\nindex 564c8a659..626ff6d2f 100644\\n--- a/apps/vendor-okx/src/orders/submitOrder.ts\\n+++ b/apps/vendor-okx/src/orders/submitOrder.ts\\n@@ -2 +2 @@ import { IOrder } from '@yuants/data-order';\\n-import { decodePath, formatTime, roundToStep } from '@yuants/utils';\\n+import { decodePath, formatTime, newError, roundToStep } from '@yuants/utils';\\n@@ -3,0 +4 @@ import { firstValueFrom, map } from 'rxjs';\\n+import { accountConfigCache } from '../accountInfos/uid';\\n@@ -20,12 +20,0 @@ const mapOrderDirectionToSide = (direction?: string) => {\\n-const mapOrderDirectionToPosSide = (direction?: string) => {\\n-  switch (direction) {\\n-    case 'OPEN_LONG':\\n-    case 'CLOSE_LONG':\\n-      return 'long';\\n-    case 'CLOSE_SHORT':\\n-    case 'OPEN_SHORT':\\n-      return 'short';\\n-  }\\n-  throw new Error(`Unknown direction: ${direction}`);\\n-};\\n-\\n@@ -44,0 +34,9 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n+  const accountConfigRes = await accountConfigCache.query(JSON.stringify(credential));\\n+  if (!accountConfigRes) throw newError('ACCOUNT_CONFIG_FETCH_ERROR', { accountConfigRes });\\n+  if (!accountConfigRes.data?.[0]) throw newError('ACCOUNT_CONFIG_FETCH_ERROR', { accountConfigRes });\\n+\\n+  /**\\n+   * 是否为组合保证金模式\\n+   */\\n+  const isPortfolioMarginMode = accountConfigRes.data[0].acctLv === '4';\\n+\\n@@ -100,0 +99,13 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n+  const mapOrderDirectionToPosSide = (direction?: string) => {\\n+    if (isPortfolioMarginMode) return undefined;\\n+    switch (direction) {\\n+      case 'OPEN_LONG':\\n+      case 'CLOSE_LONG':\\n+        return 'long';\\n+      case 'CLOSE_SHORT':\\n+      case 'OPEN_SHORT':\\n+        return 'short';\\n+    }\\n+    throw new Error(`Unknown direction: ${direction}`);\\n+  };\\n+\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"accountConfigRes\",\n+              \"code\": \"const accountConfigRes = await accountConfigCache.query(JSON.stringify(credential));\\nif (!accountConfigRes) throw newError('ACCOUNT_CONFIG_FETCH_ERROR', { accountConfigRes });\\nif (!accountConfigRes.data?.[0]) throw newError('ACCOUNT_CONFIG_FETCH_ERROR', { accountConfigRes });\\n\\n/**\\n * 是否为组合保证金模式\\n */\",\n+              \"lineStart\": 34,\n+              \"lineEnd\": 40\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"isPortfolioMarginMode\",\n+              \"code\": \"const isPortfolioMarginMode = accountConfigRes.data[0].acctLv === '4';\\n\",\n+              \"lineStart\": 41,\n+              \"lineEnd\": 98\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"mapOrderDirectionToPosSide\",\n+              \"code\": \"const mapOrderDirectionToPosSide = (direction?: string) => {\\n  if (isPortfolioMarginMode) return undefined;\\n  switch (direction) {\\n    case 'OPEN_LONG':\\n    case 'CLOSE_LONG':\\n      return 'long';\\n    case 'CLOSE_SHORT':\\n    case 'OPEN_SHORT':\\n      return 'short';\\n  }\\n  throw new Error(`Unknown direction: ${direction}`);\\n};\\n\",\n+              \"lineStart\": 99,\n+              \"lineEnd\": 112\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 903a168628d3b7e10924a677b0fc4e9517f928f0\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sat Dec 6 15:39:51 2025 +0800\\n\\n    feat(submitOrder): enhance error handling and add portfolio margin mode support (#2228)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-06-07-38.json b/common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\\nnew file mode 100644\\nindex 000000000..dd930f2db\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"fix portfolio submitOrder\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"c0d4d6aac9a0c1bbc371dd67158583be4af9c1ee\",\n+      \"short\": \"c0d4d6aac\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-06 15:52:00 +0800\",\n+      \"subject\": \"chore: bump version (#2229)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit c0d4d6aac9a0c1bbc371dd67158583be4af9c1ee\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 15:52:00 2025 +0800\\n\\n    chore: bump version (#2229)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex 347053c59..ac9a0c60f 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.7\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.7\\\",\\n+      \\\"date\\\": \\\"Sat, 06 Dec 2025 07:51:30 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix portfolio submitOrder\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit c0d4d6aac9a0c1bbc371dd67158583be4af9c1ee\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 15:52:00 2025 +0800\\n\\n    chore: bump version (#2229)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex f82f60a78..dd6422ae7 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Fri, 05 Dec 2025 19:11:57 GMT and should not be manually modified.\\n+This log was last generated on Sat, 06 Dec 2025 07:51:30 GMT and should not be manually modified.\\n+\\n+## 0.29.7\\n+Sat, 06 Dec 2025 07:51:30 GMT\\n+\\n+### Patches\\n+\\n+- fix portfolio submitOrder\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit c0d4d6aac9a0c1bbc371dd67158583be4af9c1ee\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 15:52:00 2025 +0800\\n\\n    chore: bump version (#2229)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 1a8de4f66..f1a64c9e5 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.29.6\\\",\\n+  \\\"version\\\": \\\"0.29.7\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit c0d4d6aac9a0c1bbc371dd67158583be4af9c1ee\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 15:52:00 2025 +0800\\n\\n    chore: bump version (#2229)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-06-07-38.json b/common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\\ndeleted file mode 100644\\nindex dd930f2db..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"fix portfolio submitOrder\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-05-19-11.json => main_2025-12-06-07-51.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"0c88bb63e6e1d4e41e07c9d5253f37cea3a11962\",\n+      \"short\": \"0c88bb63e\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-06 16:57:41 +0800\",\n+      \"subject\": \"feat: add gate quote (#2230)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/package.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 0c88bb63e6e1d4e41e07c9d5253f37cea3a11962\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 16:57:41 2025 +0800\\n\\n    feat: add gate quote (#2230)\\n\\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\\nindex 5d462aead..774dc4e25 100644\\n--- a/apps/vendor-gate/package.json\\n+++ b/apps/vendor-gate/package.json\\n@@ -24,0 +25 @@\\n+    \\\"@yuants/data-quote\\\": \\\"workspace:*\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/src/api/public-api.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 0c88bb63e6e1d4e41e07c9d5253f37cea3a11962\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 16:57:41 2025 +0800\\n\\n    feat: add gate quote (#2230)\\n\\ndiff --git a/apps/vendor-gate/src/api/public-api.ts b/apps/vendor-gate/src/api/public-api.ts\\nindex 2371d8be2..faaad3eee 100644\\n--- a/apps/vendor-gate/src/api/public-api.ts\\n+++ b/apps/vendor-gate/src/api/public-api.ts\\n@@ -145 +145 @@ export const getFuturesTickers = (\\n- * https://www.gate.io/docs/developers/apiv4/zh_CN/#%E6%9F%A5%E8%AF%A2%E5%8D%95%E4%B8%AA%E4%BA%A4%E6%98%93%E5%AF%B9%E8%AF%A6%E6%83%85\\n+ * https://www.gate.com/docs/developers/apiv4/zh_CN/#%E8%8E%B7%E5%8F%96%E4%BA%A4%E6%98%93%E5%AF%B9-ticker-%E4%BF%A1%E6%81%AF\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/src/index.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 0c88bb63e6e1d4e41e07c9d5253f37cea3a11962\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 16:57:41 2025 +0800\\n\\n    feat: add gate quote (#2230)\\n\\ndiff --git a/apps/vendor-gate/src/index.ts b/apps/vendor-gate/src/index.ts\\nindex 0b87307ab..31888627b 100644\\n--- a/apps/vendor-gate/src/index.ts\\n+++ b/apps/vendor-gate/src/index.ts\\n@@ -4,0 +5 @@ import './services/exchange';\\n+import './services/markets/quote';\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 122,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/src/services/markets/quote.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 0c88bb63e6e1d4e41e07c9d5253f37cea3a11962\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 16:57:41 2025 +0800\\n\\n    feat: add gate quote (#2230)\\n\\ndiff --git a/apps/vendor-gate/src/services/markets/quote.ts b/apps/vendor-gate/src/services/markets/quote.ts\\nnew file mode 100644\\nindex 000000000..1624d58b9\\n--- /dev/null\\n+++ b/apps/vendor-gate/src/services/markets/quote.ts\\n@@ -0,0 +1,122 @@\\n+import { IQuote } from '@yuants/data-quote';\\n+import { Terminal } from '@yuants/protocol';\\n+import { writeToSQL } from '@yuants/sql';\\n+import { decodePath, encodePath, formatTime } from '@yuants/utils';\\n+import {\\n+  defer,\\n+  filter,\\n+  from,\\n+  map,\\n+  mergeMap,\\n+  repeat,\\n+  retry,\\n+  shareReplay,\\n+  merge,\\n+  catchError,\\n+  EMPTY,\\n+  groupBy,\\n+  scan,\\n+  share,\\n+  tap,\\n+} from 'rxjs';\\n+import { getFuturesTickers, getFuturesContracts, getSpotTickers } from '../../api/public-api';\\n+\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n+// 获取所有USDT永续合约\\n+const usdtFutureContracts$ = defer(() => getFuturesContracts('usdt', {})).pipe(\\n+  repeat({ delay: 3600_000 }),\\n+  retry({ delay: 60_000 }),\\n+  shareReplay(1),\\n+);\\n+\\n+// 从tickers获取价格和交易量数据\\n+const quoteFromTickers$ = defer(() => getFuturesTickers('usdt', {})).pipe(\\n+  mergeMap((tickers) => tickers),\\n+  map(\\n+    (ticker): Partial<IQuote> => ({\\n+      datasource_id: 'GATE',\\n+      product_id: encodePath('GATE', 'FUTURE', ticker.contract),\\n+      last_price: ticker.last,\\n+      ask_price: ticker.lowest_ask,\\n+      bid_price: ticker.highest_bid,\\n+      // GATE API doesn't provide bid/ask volumes in tickers endpoint\\n+      // We'll need to use order book for that if required\\n+      ask_volume: '0',\\n+      bid_volume: '0',\\n+      // total_size is the open interest\\n+      open_interest: ticker.total_size,\\n+      // funding_rate is the current funding rate\\n+      interest_rate_long: ticker.funding_rate ? `${-parseFloat(ticker.funding_rate)}` : undefined,\\n+      interest_rate_short: ticker.funding_rate,\\n+    }),\\n+  ),\\n+  repeat({ delay: 5000 }),\\n+  retry({ delay: 1000 }),\\n+);\\n+\\n+// 从现货tickers获取价格和交易量数据\\n+const quoteFromSpotTickers$ = defer(() => getSpotTickers({})).pipe(\\n+  mergeMap((tickers) => tickers),\\n+  map(\\n+    (ticker): Partial<IQuote> => ({\\n+      datasource_id: 'GATE',\\n+      product_id: encodePath('GATE', 'SPOT', ticker.currency_pair),\\n+      last_price: ticker.last,\\n+      ask_price: ticker.lowest_ask,\\n+      bid_price: ticker.highest_bid,\\n+      ask_volume: ticker.lowest_size ?? '0',\\n+      bid_volume: ticker.highest_size ?? '0',\\n+      // 现货没有持仓量的概念，设置为0\\n+      open_interest: '0',\\n+    }),\\n+  ),\\n+  repeat({ delay: 5000 }),\\n+  retry({ delay: 1000 }),\\n+);\\n+\\n+const quoteSources$ = [quoteFromTickers$, quoteFromSpotTickers$];\\n+\\n+const quote$ = defer(() =>\\n+  merge(\\n+    ...quoteSources$.map((x$) =>\\n+      defer(() => x$).pipe(\\n+        // 防止单个流关闭导致整体关闭\\n+        catchError(() => EMPTY),\\n+      ),\\n+    ),\\n+  ),\\n+).pipe(\\n+  groupBy((x) => encodePath(x.datasource_id, x.product_id)),\\n+  mergeMap((group$) => {\\n+    return group$.pipe(\\n+      //\\n+      scan((acc, cur) => Object.assign(acc, cur), {} as Partial<IQuote>),\\n+    );\\n+  }),\\n+  share(),\\n+);\\n+\\n+// 写入数据库\\n+if (process.env.WRITE_QUOTE_TO_SQL === 'true') {\\n+  terminal.channel.publishChannel('quote', { pattern: `^GATE/` }, (channel_id) => {\\n+    const [datasource_id, product_id] = decodePath(channel_id);\\n+    if (!datasource_id) {\\n+      throw 'datasource_id is required';\\n+    }\\n+    if (!product_id) {\\n+      throw 'product_id is required';\\n+    }\\n+    return quote$.pipe(filter((x) => x.product_id === product_id));\\n+  });\\n+  quote$\\n+    .pipe(\\n+      writeToSQL({\\n+        terminal,\\n+        writeInterval: 1000,\\n+        tableName: 'quote',\\n+        conflictKeys: ['datasource_id', 'product_id'],\\n+      }),\\n+    )\\n+    .subscribe();\\n+}\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"terminal\",\n+              \"code\": \"const terminal = Terminal.fromNodeEnv();\\n\\n// 获取所有USDT永续合约\",\n+              \"lineStart\": 24,\n+              \"lineEnd\": 26\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"usdtFutureContracts\",\n+              \"code\": \"const usdtFutureContracts$ = defer(() => getFuturesContracts('usdt', {})).pipe(\\n  repeat({ delay: 3600_000 }),\\n  retry({ delay: 60_000 }),\\n  shareReplay(1),\\n);\\n\\n// 从tickers获取价格和交易量数据\",\n+              \"lineStart\": 27,\n+              \"lineEnd\": 33\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quoteFromTickers\",\n+              \"code\": \"const quoteFromTickers$ = defer(() => getFuturesTickers('usdt', {})).pipe(\\n  mergeMap((tickers) => tickers),\\n  map(\\n    (ticker): Partial<IQuote> => ({\\n      datasource_id: 'GATE',\\n      product_id: encodePath('GATE', 'FUTURE', ticker.contract),\\n      last_price: ticker.last,\\n      ask_price: ticker.lowest_ask,\\n      bid_price: ticker.highest_bid,\\n      // GATE API doesn't provide bid/ask volumes in tickers endpoint\\n      // We'll need to use order book for that if required\\n      ask_volume: '0',\\n      bid_volume: '0',\\n      // total_size is the open interest\\n      open_interest: ticker.total_size,\",\n+              \"lineStart\": 34,\n+              \"lineEnd\": 58\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quoteFromSpotTickers\",\n+              \"code\": \"const quoteFromSpotTickers$ = defer(() => getSpotTickers({})).pipe(\\n  mergeMap((tickers) => tickers),\\n  map(\\n    (ticker): Partial<IQuote> => ({\\n      datasource_id: 'GATE',\\n      product_id: encodePath('GATE', 'SPOT', ticker.currency_pair),\\n      last_price: ticker.last,\\n      ask_price: ticker.lowest_ask,\\n      bid_price: ticker.highest_bid,\\n      ask_volume: ticker.lowest_size ?? '0',\\n      bid_volume: ticker.highest_size ?? '0',\\n      // 现货没有持仓量的概念，设置为0\\n      open_interest: '0',\\n    }),\\n  ),\",\n+              \"lineStart\": 59,\n+              \"lineEnd\": 77\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quoteSources\",\n+              \"code\": \"const quoteSources$ = [quoteFromTickers$, quoteFromSpotTickers$];\\n\",\n+              \"lineStart\": 78,\n+              \"lineEnd\": 79\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quote\",\n+              \"code\": \"const quote$ = defer(() =>\\n  merge(\\n    ...quoteSources$.map((x$) =>\\n      defer(() => x$).pipe(\\n        // 防止单个流关闭导致整体关闭\\n        catchError(() => EMPTY),\\n      ),\\n    ),\\n  ),\\n).pipe(\\n  groupBy((x) => encodePath(x.datasource_id, x.product_id)),\\n  mergeMap((group$) => {\\n    return group$.pipe(\\n      //\\n      scan((acc, cur) => Object.assign(acc, cur), {} as Partial<IQuote>),\",\n+              \"lineStart\": 80,\n+              \"lineEnd\": 123\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-06-08-55.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 0c88bb63e6e1d4e41e07c9d5253f37cea3a11962\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 16:57:41 2025 +0800\\n\\n    feat: add gate quote (#2230)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-06-08-55.json b/common/changes/@yuants/vendor-gate/2025-12-06-08-55.json\\nnew file mode 100644\\nindex 000000000..e92d08095\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-06-08-55.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"add gate quote\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 0,\n+          \"path\": \"common/config/rush/pnpm-lock.yaml\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 0c88bb63e6e1d4e41e07c9d5253f37cea3a11962\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 16:57:41 2025 +0800\\n\\n    feat: add gate quote (#2230)\\n\\ndiff --git a/common/config/rush/pnpm-lock.yaml b/common/config/rush/pnpm-lock.yaml\\nindex d836460f8..b17e92816 100644\\n--- a/common/config/rush/pnpm-lock.yaml\\n+++ b/common/config/rush/pnpm-lock.yaml\\n@@ -1088,0 +1089 @@ importers:\\n+      '@yuants/data-quote': workspace:*\\n@@ -1104,0 +1106 @@ importers:\\n+      '@yuants/data-quote': link:../../libraries/data-quote\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"ff507dc444ed9c49726128cf6ecff0fdc74bede0\",\n+      \"short\": \"ff507dc44\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-06 17:10:47 +0800\",\n+      \"subject\": \"chore: bump version (#2231)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit ff507dc444ed9c49726128cf6ecff0fdc74bede0\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 17:10:47 2025 +0800\\n\\n    chore: bump version (#2231)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\\nindex a25b27123..7b0f5a70a 100644\\n--- a/apps/vendor-gate/CHANGELOG.json\\n+++ b/apps/vendor-gate/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.4.17\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-gate_v0.4.17\\\",\\n+      \\\"date\\\": \\\"Sat, 06 Dec 2025 09:10:29 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add gate quote\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit ff507dc444ed9c49726128cf6ecff0fdc74bede0\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 17:10:47 2025 +0800\\n\\n    chore: bump version (#2231)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\\nindex fc34ccdf2..0c6aa3d10 100644\\n--- a/apps/vendor-gate/CHANGELOG.md\\n+++ b/apps/vendor-gate/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+This log was last generated on Sat, 06 Dec 2025 09:10:29 GMT and should not be manually modified.\\n+\\n+## 0.4.17\\n+Sat, 06 Dec 2025 09:10:29 GMT\\n+\\n+### Patches\\n+\\n+- add gate quote\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit ff507dc444ed9c49726128cf6ecff0fdc74bede0\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 17:10:47 2025 +0800\\n\\n    chore: bump version (#2231)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\\nindex 774dc4e25..f18c454a5 100644\\n--- a/apps/vendor-gate/package.json\\n+++ b/apps/vendor-gate/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.16\\\",\\n+  \\\"version\\\": \\\"0.4.17\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-06-08-55.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit ff507dc444ed9c49726128cf6ecff0fdc74bede0\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 17:10:47 2025 +0800\\n\\n    chore: bump version (#2231)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-06-08-55.json b/common/changes/@yuants/vendor-gate/2025-12-06-08-55.json\\ndeleted file mode 100644\\nindex e92d08095..000000000\\n--- a/common/changes/@yuants/vendor-gate/2025-12-06-08-55.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n-      \\\"comment\\\": \\\"add gate quote\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/{main_2025-12-03-18-20.json => main_2025-12-06-09-10.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"5fc3bbfbb8ac96cfc6bfe30bc948a0ba1f362d58\",\n+      \"short\": \"5fc3bbfbb\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-07 00:14:07 +0800\",\n+      \"subject\": \"feat(git-changes-report): update skill (#2232)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": \"git-changes-report\",\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 27,\n+          \"deletions\": 2,\n+          \"path\": \".claude/skills/git-changes-reporter/SKILL.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 5fc3bbfbb8ac96cfc6bfe30bc948a0ba1f362d58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sun Dec 7 00:14:07 2025 +0800\\n\\n    feat(git-changes-report): update skill (#2232)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/SKILL.md b/.claude/skills/git-changes-reporter/SKILL.md\\nindex 00d6b0a3f..82f540c4c 100644\\n--- a/.claude/skills/git-changes-reporter/SKILL.md\\n+++ b/.claude/skills/git-changes-reporter/SKILL.md\\n@@ -52 +52,19 @@ description: 生成结构化 git 变更报告，包含原始 JSON 数据和语\\n-.claude/skills/git-changes-reporter/scripts/generate-json.js <old_commit> <new_commit> [output_path]\\n+.claude/skills/git-changes-reporter/scripts/generate-json.js <old_commit> <new_commit> [output_path] [options]\\n+```\\n+\\n+**选项**：\\n+\\n+| 选项                        | 说明                                   | 默认值                               |\\n+| --------------------------- | -------------------------------------- | ------------------------------------ |\\n+| `--markers=FILE1,FILE2,...` | 项目边界特征文件（用于 monorepo 分析） | `package.json,Cargo.toml,go.mod,...` |\\n+\\n+**Monorepo 项目检测**：\\n+\\n+脚本会自动扫描仓库中的特征文件（如 `package.json`、`Cargo.toml`）来识别项目边界，支持任意深度的嵌套结构：\\n+\\n+```bash\\n+# 默认使用常见特征文件检测项目\\n+generate-json.js HEAD~10 HEAD\\n+\\n+# 指定特定的特征文件（如纯 Python 项目）\\n+generate-json.js HEAD~10 HEAD --markers=pyproject.toml,setup.py\\n@@ -56,0 +75,7 @@ description: 生成结构化 git 变更报告，包含原始 JSON 数据和语\\n+- `directoryAnalysis`：目录热点分析\\n+  - `topLevel[]`：顶层目录统计（如 `apps`, `libraries`）\\n+  - `projects[]`：项目级别统计（如 `apps/vendor-okx`, `libraries/protocol`）\\n+    - `project`：项目路径\\n+    - `fileCount`：变更文件数\\n+    - `marker`：检测到的特征文件（如 `package.json`）\\n+  - `markersUsed`：使用的特征文件列表\\n@@ -112 +137 @@ Agent 应按以下结构输出报告：\\n-- **热点目录**：`apps` (N 文件), `common` (M 文件)\\n+- **热点项目**：`apps/vendor-okx` (N 文件), `libraries/protocol` (M 文件)\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 156,\n+          \"deletions\": 15,\n+          \"path\": \".claude/skills/git-changes-reporter/scripts/generate-json.js\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 5fc3bbfbb8ac96cfc6bfe30bc948a0ba1f362d58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sun Dec 7 00:14:07 2025 +0800\\n\\n    feat(git-changes-report): update skill (#2232)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/generate-json.js b/.claude/skills/git-changes-reporter/scripts/generate-json.js\\nindex 0922ee16a..da46bc31d 100755\\n--- a/.claude/skills/git-changes-reporter/scripts/generate-json.js\\n+++ b/.claude/skills/git-changes-reporter/scripts/generate-json.js\\n@@ -9,0 +10,21 @@ const exec = promisify(execFile);\\n+/**\\n+ * Default marker files that indicate project boundaries in monorepos\\n+ */\\n+const DEFAULT_PROJECT_MARKERS = [\\n+  'package.json',\\n+  'Cargo.toml',\\n+  'go.mod',\\n+  'requirements.txt',\\n+  'pyproject.toml',\\n+  'setup.py',\\n+  'pom.xml',\\n+  'build.gradle',\\n+  'build.gradle.kts',\\n+  'CMakeLists.txt',\\n+  'Makefile',\\n+  'pubspec.yaml', // Flutter/Dart\\n+  'mix.exs', // Elixir\\n+  'Gemfile', // Ruby\\n+  'composer.json', // PHP\\n+];\\n+\\n@@ -13 +34 @@ const usage = () => {\\n-      'Usage: generate-json.js <old_commit> <new_commit> [output_path]',\\n+      'Usage: generate-json.js <old_commit> <new_commit> [output_path] [options]',\\n@@ -22,0 +44,4 @@ const usage = () => {\\n+      'Options:',\\n+      '  --markers=FILE1,FILE2,...   Comma-separated list of marker files for project detection',\\n+      `                              Default: ${DEFAULT_PROJECT_MARKERS.slice(0, 4).join(',')},...`,\\n+      '',\\n@@ -26 +51 @@ const usage = () => {\\n-      '  generate-json.js 6df6ea741 1b4e97ac5',\\n+      '  generate-json.js 6df6ea741 1b4e97ac5 --markers=package.json,Cargo.toml',\\n@@ -90 +115,65 @@ const getContributors = async (oldRef, newRef) => {\\n-const getTopDirectories = async (oldRef, newRef) => {\\n+/**\\n+ * Scan repository for project roots by finding directories containing marker files\\n+ * @param {string[]} markers - List of marker file names (e.g., ['package.json', 'Cargo.toml'])\\n+ * @returns {Promise<Map<string, string>>} Map of directory path to marker file found\\n+ */\\n+const scanProjectRoots = async (markers) => {\\n+  const projectRoots = new Map();\\n+\\n+  // Use git ls-files to find all tracked marker files (faster than find)\\n+  for (const marker of markers) {\\n+    try {\\n+      const { stdout } = await exec('git', ['ls-files', '--full-name', `**/${marker}`, marker]);\\n+      const markerPaths = stdout.split('\\\\n').filter(Boolean);\\n+\\n+      for (const markerPath of markerPaths) {\\n+        // Extract directory containing the marker file\\n+        const dir = markerPath.includes('/') ? markerPath.substring(0, markerPath.lastIndexOf('/')) : '.';\\n+        // Only keep the first marker found for each directory\\n+        if (!projectRoots.has(dir)) {\\n+          projectRoots.set(dir, marker);\\n+        }\\n+      }\\n+    } catch {\\n+      // Ignore errors (marker not found)\\n+    }\\n+  }\\n+\\n+  return projectRoots;\\n+};\\n+\\n+/**\\n+ * Find the closest project root for a given file path\\n+ * @param {string} filePath - File path relative to repo root\\n+ * @param {Map<string, string>} projectRoots - Map of project directories to markers\\n+ * @returns {{project: string, marker: string} | null}\\n+ */\\n+const findProjectRoot = (filePath, projectRoots) => {\\n+  // Build list of ancestor directories from most specific to least\\n+  const parts = filePath.split('/');\\n+  const ancestors = [];\\n+\\n+  for (let i = parts.length - 1; i >= 0; i--) {\\n+    const ancestor = parts.slice(0, i).join('/') || '.';\\n+    ancestors.push(ancestor);\\n+  }\\n+\\n+  // Find the closest ancestor that is a project root\\n+  for (const ancestor of ancestors) {\\n+    if (projectRoots.has(ancestor)) {\\n+      return { project: ancestor, marker: projectRoots.get(ancestor) };\\n+    }\\n+  }\\n+\\n+  return null;\\n+};\\n+\\n+/**\\n+ * Analyze directory hotspots at both top-level and project-level\\n+ * @param {string} oldRef - Old commit reference\\n+ * @param {string} newRef - New commit reference\\n+ * @param {string[]} markers - Marker files for project detection\\n+ * @returns {Promise<{topLevel: Array, projects: Array}>}\\n+ */\\n+const getTopDirectories = async (oldRef, newRef, markers = DEFAULT_PROJECT_MARKERS) => {\\n+  // Get all changed files\\n@@ -95,5 +184,24 @@ const getTopDirectories = async (oldRef, newRef) => {\\n-  const dirCounts = files.reduce((acc, filePath) => {\\n-    const dir = filePath.split('/')[0] || '.';\\n-    acc.set(dir, (acc.get(dir) || 0) + 1);\\n-    return acc;\\n-  }, new Map());\\n+  // Scan for project roots\\n+  const projectRoots = await scanProjectRoots(markers);\\n+\\n+  const topLevelCounts = new Map();\\n+  const projectCounts = new Map();\\n+\\n+  for (const filePath of files) {\\n+    // Top-level directory (e.g., \\\"apps\\\", \\\"libraries\\\")\\n+    const topDir = filePath.split('/')[0] || '.';\\n+    topLevelCounts.set(topDir, (topLevelCounts.get(topDir) || 0) + 1);\\n+\\n+    // Project-level path based on marker detection\\n+    const projectInfo = findProjectRoot(filePath, projectRoots);\\n+    if (projectInfo) {\\n+      const key = projectInfo.project;\\n+      const existing = projectCounts.get(key) || { fileCount: 0, marker: projectInfo.marker };\\n+      projectCounts.set(key, { fileCount: existing.fileCount + 1, marker: existing.marker });\\n+    } else {\\n+      // File not under any detected project - use top-level dir\\n+      const key = topDir;\\n+      const existing = projectCounts.get(key) || { fileCount: 0, marker: null };\\n+      projectCounts.set(key, { fileCount: existing.fileCount + 1, marker: null });\\n+    }\\n+  }\\n@@ -101 +209 @@ const getTopDirectories = async (oldRef, newRef) => {\\n-  return Array.from(dirCounts.entries())\\n+  const topLevel = Array.from(topLevelCounts.entries())\\n@@ -103,0 +212,6 @@ const getTopDirectories = async (oldRef, newRef) => {\\n+\\n+  const projects = Array.from(projectCounts.entries())\\n+    .map(([project, data]) => ({ project, fileCount: data.fileCount, marker: data.marker }))\\n+    .sort((a, b) => b.fileCount - a.fileCount);\\n+\\n+  return { topLevel, projects, markersUsed: markers };\\n@@ -452,0 +567,26 @@ const identifyRisks = (commits) => {\\n+/**\\n+ * Parse command line arguments\\n+ * @param {string[]} args - Command line arguments\\n+ * @returns {{oldRef: string, newRef: string, output: string|null, markers: string[]}}\\n+ */\\n+const parseArgs = (args) => {\\n+  let oldRef = null;\\n+  let newRef = null;\\n+  let output = null;\\n+  let markers = DEFAULT_PROJECT_MARKERS;\\n+\\n+  for (const arg of args) {\\n+    if (arg.startsWith('--markers=')) {\\n+      markers = arg.substring('--markers='.length).split(',').filter(Boolean);\\n+    } else if (!oldRef) {\\n+      oldRef = arg;\\n+    } else if (!newRef) {\\n+      newRef = arg;\\n+    } else if (!output && !arg.startsWith('--')) {\\n+      output = arg;\\n+    }\\n+  }\\n+\\n+  return { oldRef, newRef, output, markers };\\n+};\\n+\\n@@ -454 +594 @@ const main = async () => {\\n-  const [oldRef, newRef, outputArg] = process.argv.slice(2);\\n+  const { oldRef, newRef, output: outputArg, markers } = parseArgs(process.argv.slice(2));\\n@@ -501,2 +641,2 @@ const main = async () => {\\n-  console.info('Analyzing file changes...');\\n-  const topDirs = await getTopDirectories(oldRef, newRef);\\n+  console.info('Analyzing file changes (detecting project boundaries)...');\\n+  const directoryAnalysis = await getTopDirectories(oldRef, newRef, markers);\\n@@ -526 +666 @@ const main = async () => {\\n-    topDirs,\\n+    directoryAnalysis,\\n@@ -534 +674 @@ const main = async () => {\\n-      version: '2.0.0',\\n+      version: '3.0.0',\\n@@ -541,0 +682 @@ const main = async () => {\\n+  console.info(`📊 Summary: ${commitCount} commits, ${contributors.length} contributors`);\\n@@ -543 +684 @@ const main = async () => {\\n-    `📊 Summary: ${commitCount} commits, ${contributors.length} contributors, ${topDirs.length} directories changed`,\\n+    `📁 Directories: ${directoryAnalysis.topLevel.length} top-level, ${directoryAnalysis.projects.length} projects detected`,\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"DEFAULT_PROJECT_MARKERS\",\n+              \"code\": \"const DEFAULT_PROJECT_MARKERS = [\\n  'package.json',\\n  'Cargo.toml',\\n  'go.mod',\\n  'requirements.txt',\\n  'pyproject.toml',\\n  'setup.py',\\n  'pom.xml',\\n  'build.gradle',\\n  'build.gradle.kts',\\n  'CMakeLists.txt',\\n  'Makefile',\\n  'pubspec.yaml', // Flutter/Dart\\n  'mix.exs', // Elixir\\n  'Gemfile', // Ruby\",\n+              \"lineStart\": 13,\n+              \"lineEnd\": 119\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"scanProjectRoots\",\n+              \"code\": \"const scanProjectRoots = async (markers) => {\",\n+              \"lineStart\": 120,\n+              \"lineEnd\": 120\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"projectRoots\",\n+              \"code\": \"const projectRoots = new Map();\\n\\n// Use git ls-files to find all tracked marker files (faster than find)\",\n+              \"lineStart\": 121,\n+              \"lineEnd\": 123\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"marker\",\n+              \"code\": \"for (const marker of markers) {\\n  try {\\n    const { stdout } = await exec('git', ['ls-files', '--full-name', `**/${marker}`, marker]);\",\n+              \"lineStart\": 124,\n+              \"lineEnd\": 126\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"markerPaths\",\n+              \"code\": \"const markerPaths = stdout.split('\\\\n').filter(Boolean);\\n\",\n+              \"lineStart\": 127,\n+              \"lineEnd\": 128\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"markerPath\",\n+              \"code\": \"for (const markerPath of markerPaths) {\\n  // Extract directory containing the marker file\",\n+              \"lineStart\": 129,\n+              \"lineEnd\": 130\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"dir\",\n+              \"code\": \"        const dir = markerPath.includes('/') ? markerPath.substring(0, markerPath.lastIndexOf('/')) : '.';\\n        // Only keep the first marker found for each directory\\n        if (!projectRoots.has(dir)) {\\n          projectRoots.set(dir, marker);\\n        }\\n      }\\n    } catch {\\n      // Ignore errors (marker not found)\\n    }\\n  }\\n\\n  return projectRoots;\\n};\\n\\n/**\",\n+              \"lineStart\": 131,\n+              \"lineEnd\": 150\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"findProjectRoot\",\n+              \"code\": \"const findProjectRoot = (filePath, projectRoots) => {\\n  // Build list of ancestor directories from most specific to least\",\n+              \"lineStart\": 151,\n+              \"lineEnd\": 152\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"parts\",\n+              \"code\": \"const parts = filePath.split('/');\",\n+              \"lineStart\": 153,\n+              \"lineEnd\": 153\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"ancestors\",\n+              \"code\": \"const ancestors = [];\\n\",\n+              \"lineStart\": 154,\n+              \"lineEnd\": 155\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"i\",\n+              \"code\": \"for (let i = parts.length - 1; i >= 0; i--) {\",\n+              \"lineStart\": 156,\n+              \"lineEnd\": 156\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"ancestor\",\n+              \"code\": \"  const ancestor = parts.slice(0, i).join('/') || '.';\\n  ancestors.push(ancestor);\\n}\\n\\n// Find the closest ancestor that is a project root\",\n+              \"lineStart\": 157,\n+              \"lineEnd\": 161\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"ancestor\",\n+              \"code\": \"  for (const ancestor of ancestors) {\\n    if (projectRoots.has(ancestor)) {\\n      return { project: ancestor, marker: projectRoots.get(ancestor) };\\n    }\\n  }\\n\\n  return null;\\n};\\n\\n/**\\n * Analyze directory hotspots at both top-level and project-level\\n * @param {string} oldRef - Old commit reference\\n * @param {string} newRef - New commit reference\\n * @param {string[]} markers - Marker files for project detection\\n * @returns {Promise<{topLevel: Array, projects: Array}>}\",\n+              \"lineStart\": 162,\n+              \"lineEnd\": 177\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"getTopDirectories\",\n+              \"code\": \"const getTopDirectories = async (oldRef, newRef, markers = DEFAULT_PROJECT_MARKERS) => {\\n  // Get all changed files\\n  // Scan for project roots\",\n+              \"lineStart\": 178,\n+              \"lineEnd\": 184\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"projectRoots\",\n+              \"code\": \"const projectRoots = await scanProjectRoots(markers);\\n\",\n+              \"lineStart\": 185,\n+              \"lineEnd\": 186\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"topLevelCounts\",\n+              \"code\": \"const topLevelCounts = new Map();\",\n+              \"lineStart\": 187,\n+              \"lineEnd\": 187\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"projectCounts\",\n+              \"code\": \"const projectCounts = new Map();\\n\",\n+              \"lineStart\": 188,\n+              \"lineEnd\": 189\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"filePath\",\n+              \"code\": \"for (const filePath of files) {\\n  // Top-level directory (e.g., \\\"apps\\\", \\\"libraries\\\")\",\n+              \"lineStart\": 190,\n+              \"lineEnd\": 191\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"topDir\",\n+              \"code\": \"const topDir = filePath.split('/')[0] || '.';\\ntopLevelCounts.set(topDir, (topLevelCounts.get(topDir) || 0) + 1);\\n\\n// Project-level path based on marker detection\",\n+              \"lineStart\": 192,\n+              \"lineEnd\": 195\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"projectInfo\",\n+              \"code\": \"const projectInfo = findProjectRoot(filePath, projectRoots);\\nif (projectInfo) {\",\n+              \"lineStart\": 196,\n+              \"lineEnd\": 197\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"key\",\n+              \"code\": \"const key = projectInfo.project;\",\n+              \"lineStart\": 198,\n+              \"lineEnd\": 198\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"existing\",\n+              \"code\": \"  const existing = projectCounts.get(key) || { fileCount: 0, marker: projectInfo.marker };\\n  projectCounts.set(key, { fileCount: existing.fileCount + 1, marker: existing.marker });\\n} else {\\n  // File not under any detected project - use top-level dir\",\n+              \"lineStart\": 199,\n+              \"lineEnd\": 202\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"key\",\n+              \"code\": \"const key = topDir;\",\n+              \"lineStart\": 203,\n+              \"lineEnd\": 203\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"existing\",\n+              \"code\": \"    const existing = projectCounts.get(key) || { fileCount: 0, marker: null };\\n    projectCounts.set(key, { fileCount: existing.fileCount + 1, marker: null });\\n  }\\n}\",\n+              \"lineStart\": 204,\n+              \"lineEnd\": 208\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"topLevel\",\n+              \"code\": \"const topLevel = Array.from(topLevelCounts.entries())\\n\",\n+              \"lineStart\": 209,\n+              \"lineEnd\": 212\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"projects\",\n+              \"code\": \"  const projects = Array.from(projectCounts.entries())\\n    .map(([project, data]) => ({ project, fileCount: data.fileCount, marker: data.marker }))\\n    .sort((a, b) => b.fileCount - a.fileCount);\\n\\n  return { topLevel, projects, markersUsed: markers };\\n/**\\n * Parse command line arguments\\n * @param {string[]} args - Command line arguments\\n * @returns {{oldRef: string, newRef: string, output: string|null, markers: string[]}}\\n */\",\n+              \"lineStart\": 213,\n+              \"lineEnd\": 571\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"parseArgs\",\n+              \"code\": \"const parseArgs = (args) => {\",\n+              \"lineStart\": 572,\n+              \"lineEnd\": 572\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"oldRef\",\n+              \"code\": \"let oldRef = null;\",\n+              \"lineStart\": 573,\n+              \"lineEnd\": 573\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"newRef\",\n+              \"code\": \"let newRef = null;\",\n+              \"lineStart\": 574,\n+              \"lineEnd\": 574\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"output\",\n+              \"code\": \"let output = null;\",\n+              \"lineStart\": 575,\n+              \"lineEnd\": 575\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"markers\",\n+              \"code\": \"let markers = DEFAULT_PROJECT_MARKERS;\\n\",\n+              \"lineStart\": 576,\n+              \"lineEnd\": 577\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"arg\",\n+              \"code\": \"  for (const arg of args) {\\n    if (arg.startsWith('--markers=')) {\\n      markers = arg.substring('--markers='.length).split(',').filter(Boolean);\\n    } else if (!oldRef) {\\n      oldRef = arg;\\n    } else if (!newRef) {\\n      newRef = arg;\\n    } else if (!output && !arg.startsWith('--')) {\\n      output = arg;\\n    }\\n  }\\n\\n  return { oldRef, newRef, output, markers };\\n};\\n\",\n+              \"lineStart\": 578,\n+              \"lineEnd\": 641\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"directoryAnalysis\",\n+              \"code\": \"const directoryAnalysis = await getTopDirectories(oldRef, newRef, markers);\\n  directoryAnalysis,\\n    version: '3.0.0',\\nconsole.info(`📊 Summary: ${commitCount} commits, ${contributors.length} contributors`);\\n  `📁 Directories: ${directoryAnalysis.topLevel.length} top-level, ${directoryAnalysis.projects.length} projects detected`,\",\n+              \"lineStart\": 642,\n+              \"lineEnd\": 685\n+            }\n+          ]\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"ed665d773f1ea325ab878d1c0a862e1529e99ea4\",\n+      \"short\": \"ed665d773\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-07 00:55:15 +0800\",\n+      \"subject\": \"fix: fix trade product id (#2233)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"fix\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/src/trade.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit ed665d773f1ea325ab878d1c0a862e1529e99ea4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sun Dec 7 00:55:15 2025 +0800\\n\\n    fix: fix trade product id (#2233)\\n\\ndiff --git a/apps/vendor-okx/src/trade.ts b/apps/vendor-okx/src/trade.ts\\nindex cbb88bc53..dac18a969 100644\\n--- a/apps/vendor-okx/src/trade.ts\\n+++ b/apps/vendor-okx/src/trade.ts\\n@@ -56 +56 @@ const tradeParser = async (accountId: string, params: Record<string, string>): P\\n-        trade.product_id = encodePath(bill.instType, bill.instId);\\n+        trade.product_id = encodePath('OKX', bill.instType, bill.instId);\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-06-16-53.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit ed665d773f1ea325ab878d1c0a862e1529e99ea4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sun Dec 7 00:55:15 2025 +0800\\n\\n    fix: fix trade product id (#2233)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-06-16-53.json b/common/changes/@yuants/vendor-okx/2025-12-06-16-53.json\\nnew file mode 100644\\nindex 000000000..a7c7d92a1\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-06-16-53.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"fix trade product id\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"7df40da19d36cf9dbc8542e9138dd31f58c63213\",\n+      \"short\": \"7df40da19\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-07 01:00:35 +0800\",\n+      \"subject\": \"chore: bump version (#2234)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 7df40da19d36cf9dbc8542e9138dd31f58c63213\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 01:00:35 2025 +0800\\n\\n    chore: bump version (#2234)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex ac9a0c60f..476462034 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.8\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.8\\\",\\n+      \\\"date\\\": \\\"Sat, 06 Dec 2025 17:00:15 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix trade product id\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 7df40da19d36cf9dbc8542e9138dd31f58c63213\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 01:00:35 2025 +0800\\n\\n    chore: bump version (#2234)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex dd6422ae7..3f789dccc 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sat, 06 Dec 2025 07:51:30 GMT and should not be manually modified.\\n+This log was last generated on Sat, 06 Dec 2025 17:00:15 GMT and should not be manually modified.\\n+\\n+## 0.29.8\\n+Sat, 06 Dec 2025 17:00:15 GMT\\n+\\n+### Patches\\n+\\n+- fix trade product id\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 7df40da19d36cf9dbc8542e9138dd31f58c63213\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 01:00:35 2025 +0800\\n\\n    chore: bump version (#2234)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex f1a64c9e5..f44b810af 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.29.7\\\",\\n+  \\\"version\\\": \\\"0.29.8\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-06-16-53.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 7df40da19d36cf9dbc8542e9138dd31f58c63213\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 01:00:35 2025 +0800\\n\\n    chore: bump version (#2234)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-06-16-53.json b/common/changes/@yuants/vendor-okx/2025-12-06-16-53.json\\ndeleted file mode 100644\\nindex a7c7d92a1..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-06-16-53.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"fix trade product id\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-06-07-51.json => main_2025-12-06-17-00.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"2db8e6cb93e6c269af8041785d297eec3521aef6\",\n+      \"short\": \"2db8e6cb9\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-07 03:51:16 +0800\",\n+      \"subject\": \"feat: refactor future positions loading and update margin rate calculation (#2235)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 35,\n+          \"deletions\": 36,\n+          \"path\": \"apps/vendor-gate/src/services/accounts/future.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 2db8e6cb93e6c269af8041785d297eec3521aef6\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 03:51:16 2025 +0800\\n\\n    feat: refactor future positions loading and update margin rate calculation (#2235)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/future.ts b/apps/vendor-gate/src/services/accounts/future.ts\\nindex 840e18154..4e762c193 100644\\n--- a/apps/vendor-gate/src/services/accounts/future.ts\\n+++ b/apps/vendor-gate/src/services/accounts/future.ts\\n@@ -1,4 +1 @@\\n-import type { IActionHandlerOfGetAccountInfo, IPosition } from '@yuants/data-account';\\n-import { firstValueFrom } from 'rxjs';\\n-import { getFuturePositions, getFuturesAccounts, ICredential } from '../../api/private-api';\\n-import { mapProductIdToUsdtFutureProduct$ } from '../markets/product';\\n+import type { IPosition } from '@yuants/data-account';\\n@@ -5,0 +3,2 @@ import { encodePath } from '@yuants/utils';\\n+import { getFuturePositions, getFuturesAccounts, ICredential } from '../../api/private-api';\\n+import { productCache } from '../markets/product';\\n@@ -8,32 +7,29 @@ export const loadFuturePositions = async (credential: ICredential): Promise<IPos\\n-  const [positionsRes, productMap] = await Promise.all([\\n-    getFuturePositions(credential, 'usdt'),\\n-    firstValueFrom(mapProductIdToUsdtFutureProduct$),\\n-  ]);\\n-  const positions = Array.isArray(positionsRes) ? positionsRes : [];\\n-  return positions\\n-    .filter((pos) => Math.abs(pos.size) > 0)\\n-    .map((position): IPosition => {\\n-      const product_id = encodePath('GATE', 'FUTURE', position.contract);\\n-      const theProduct = productMap.get(product_id);\\n-      const volume = Math.abs(position.size);\\n-      const closable_price = Number(position.mark_price);\\n-      const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\\n-      return {\\n-        datasource_id: 'GATE',\\n-        position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n-        product_id,\\n-        direction:\\n-          position.mode === 'dual_long'\\n-            ? 'LONG'\\n-            : position.mode === 'dual_short'\\n-            ? 'SHORT'\\n-            : position.size > 0\\n-            ? 'LONG'\\n-            : 'SHORT',\\n-        volume,\\n-        free_volume: Math.abs(position.size),\\n-        position_price: Number(position.entry_price),\\n-        closable_price,\\n-        floating_profit: Number(position.unrealised_pnl),\\n-        valuation,\\n-      };\\n+  const positions: IPosition[] = [];\\n+  const positionsRes = await getFuturePositions(credential, 'usdt');\\n+\\n+  for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\\n+    if (!(Math.abs(position.size) > 0)) continue;\\n+\\n+    const product_id = encodePath('GATE', 'FUTURE', position.contract);\\n+    const theProduct = await productCache.query(product_id);\\n+    const volume = Math.abs(position.size);\\n+    const closable_price = Number(position.mark_price);\\n+    const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\\n+    positions.push({\\n+      datasource_id: 'GATE',\\n+      position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n+      product_id,\\n+      direction:\\n+        position.mode === 'dual_long'\\n+          ? 'LONG'\\n+          : position.mode === 'dual_short'\\n+          ? 'SHORT'\\n+          : position.size > 0\\n+          ? 'LONG'\\n+          : 'SHORT',\\n+      volume,\\n+      free_volume: Math.abs(position.size),\\n+      position_price: Number(position.entry_price),\\n+      closable_price,\\n+      floating_profit: Number(position.unrealised_pnl),\\n+      valuation,\\n@@ -40,0 +37,3 @@ export const loadFuturePositions = async (credential: ICredential): Promise<IPos\\n+  }\\n+\\n+  return positions;\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"positions\",\n+              \"code\": \"const positions: IPosition[] = [];\",\n+              \"lineStart\": 7,\n+              \"lineEnd\": 7\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"positionsRes\",\n+              \"code\": \"const positionsRes = await getFuturePositions(credential, 'usdt');\\n\",\n+              \"lineStart\": 8,\n+              \"lineEnd\": 9\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"position\",\n+              \"code\": \"for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\\n  if (!(Math.abs(position.size) > 0)) continue;\\n\",\n+              \"lineStart\": 10,\n+              \"lineEnd\": 12\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"product_id\",\n+              \"code\": \"const product_id = encodePath('GATE', 'FUTURE', position.contract);\",\n+              \"lineStart\": 13,\n+              \"lineEnd\": 13\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"theProduct\",\n+              \"code\": \"const theProduct = await productCache.query(product_id);\",\n+              \"lineStart\": 14,\n+              \"lineEnd\": 14\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"volume\",\n+              \"code\": \"const volume = Math.abs(position.size);\",\n+              \"lineStart\": 15,\n+              \"lineEnd\": 15\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"closable_price\",\n+              \"code\": \"const closable_price = Number(position.mark_price);\",\n+              \"lineStart\": 16,\n+              \"lineEnd\": 16\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"valuation\",\n+              \"code\": \"const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\\npositions.push({\\n  datasource_id: 'GATE',\\n  position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n  product_id,\\n  direction:\\n    position.mode === 'dual_long'\\n      ? 'LONG'\\n      : position.mode === 'dual_short'\\n      ? 'SHORT'\\n      : position.size > 0\\n      ? 'LONG'\\n      : 'SHORT',\\n  volume,\\n  free_volume: Math.abs(position.size),\",\n+              \"lineStart\": 17,\n+              \"lineEnd\": 40\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 4,\n+          \"deletions\": 57,\n+          \"path\": \"apps/vendor-gate/src/services/markets/product.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 2db8e6cb93e6c269af8041785d297eec3521aef6\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 03:51:16 2025 +0800\\n\\n    feat: refactor future positions loading and update margin rate calculation (#2235)\\n\\ndiff --git a/apps/vendor-gate/src/services/markets/product.ts b/apps/vendor-gate/src/services/markets/product.ts\\nindex 38f600251..64b6c0758 100644\\n--- a/apps/vendor-gate/src/services/markets/product.ts\\n+++ b/apps/vendor-gate/src/services/markets/product.ts\\n@@ -1 +1 @@\\n-import { IProduct } from '@yuants/data-product';\\n+import { createProductCache } from '@yuants/data-product';\\n@@ -3,3 +2,0 @@ import { Terminal } from '@yuants/protocol';\\n-import { createSQLWriter } from '@yuants/sql';\\n-import { defer, from, map, mergeMap, repeat, retry, shareReplay, Subject, tap, toArray } from 'rxjs';\\n-import { getFuturesContracts, getSpotCurrencyPairs } from '../../api/public-api';\\n@@ -6,0 +4 @@ import { encodePath } from '@yuants/utils';\\n+import { getFuturesContracts, getSpotCurrencyPairs } from '../../api/public-api';\\n@@ -8,52 +6 @@ import { encodePath } from '@yuants/utils';\\n-const terminal = Terminal.fromNodeEnv();\\n-\\n-const product$ = new Subject<IProduct>();\\n-\\n-const usdtFutureProducts$ = defer(() => getFuturesContracts('usdt', {})).pipe(\\n-  mergeMap((contracts) =>\\n-    from(contracts).pipe(\\n-      map((contract): IProduct => {\\n-        const [base, quote] = contract.name.split('_');\\n-        return {\\n-          datasource_id: 'GATE',\\n-          product_id: encodePath('GATE', 'FUTURE', contract.name),\\n-          base_currency: base,\\n-          quote_currency: quote,\\n-          value_scale: Number(contract.quanto_multiplier),\\n-          price_step: Number(contract.order_price_round),\\n-          volume_step: 1,\\n-          name: '',\\n-          value_scale_unit: '',\\n-          margin_rate: 0,\\n-          value_based_cost: 0,\\n-          volume_based_cost: 0,\\n-          max_position: 0,\\n-          max_volume: 0,\\n-          allow_long: true,\\n-          allow_short: true,\\n-          market_id: 'GATE/USDT-FUTURE',\\n-          no_interest_rate: false,\\n-        };\\n-      }),\\n-      tap((item) => product$.next(item)),\\n-      toArray(),\\n-    ),\\n-  ),\\n-  repeat({ delay: 3_600_000 }),\\n-  retry({ delay: 60_000 }),\\n-  shareReplay(1),\\n-);\\n-\\n-usdtFutureProducts$.subscribe();\\n-\\n-export const mapProductIdToUsdtFutureProduct$ = usdtFutureProducts$.pipe(\\n-  map((items) => new Map(items.map((item) => [item.product_id, item]))),\\n-  shareReplay(1),\\n-);\\n-\\n-createSQLWriter(terminal, {\\n-  data$: product$,\\n-  tableName: 'product',\\n-  conflictKeys: ['datasource_id', 'product_id'],\\n-  writeInterval: 1000,\\n-});\\n+export const productCache = createProductCache(Terminal.fromNodeEnv());\\n@@ -78 +25 @@ export const listProducts = async () => {\\n-      margin_rate: 0,\\n+      margin_rate: 1 / Number(contract.leverage_max),\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"productCache\",\n+              \"code\": \"export const productCache = createProductCache(Terminal.fromNodeEnv());\\n      margin_rate: 1 / Number(contract.leverage_max),\",\n+              \"lineStart\": 6,\n+              \"lineEnd\": 26\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-06-19-49.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 2db8e6cb93e6c269af8041785d297eec3521aef6\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 03:51:16 2025 +0800\\n\\n    feat: refactor future positions loading and update margin rate calculation (#2235)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-06-19-49.json b/common/changes/@yuants/vendor-gate/2025-12-06-19-49.json\\nnew file mode 100644\\nindex 000000000..3e3441d42\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-06-19-49.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"fix margin rate of swap\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"cbd12db67dfff0a77ac9b150763df5f52a8facbe\",\n+      \"short\": \"cbd12db67\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-07 04:03:29 +0800\",\n+      \"subject\": \"fix: update contract extraction in submitOrder and add change log (#2237)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"fix\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-gate/src/services/orders/submitOrder.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit cbd12db67dfff0a77ac9b150763df5f52a8facbe\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 04:03:29 2025 +0800\\n\\n    fix: update contract extraction in submitOrder and add change log (#2237)\\n\\ndiff --git a/apps/vendor-gate/src/services/orders/submitOrder.ts b/apps/vendor-gate/src/services/orders/submitOrder.ts\\nindex 830e79b7e..321398ad1 100644\\n--- a/apps/vendor-gate/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-gate/src/services/orders/submitOrder.ts\\n@@ -40 +40 @@ export const submitOrder: IActionHandlerOfSubmitOrder<ICredential> = async (cred\\n-  const [, TYPE] = decodePath(order.product_id);\\n+  const [, TYPE, contract] = decodePath(order.product_id);\\n@@ -43 +43 @@ export const submitOrder: IActionHandlerOfSubmitOrder<ICredential> = async (cred\\n-      contract: order.product_id,\\n+      contract,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-06-20-01.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit cbd12db67dfff0a77ac9b150763df5f52a8facbe\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 04:03:29 2025 +0800\\n\\n    fix: update contract extraction in submitOrder and add change log (#2237)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-06-20-01.json b/common/changes/@yuants/vendor-gate/2025-12-06-20-01.json\\nnew file mode 100644\\nindex 000000000..f1eaf84bb\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-06-20-01.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"fix submit order\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"b5b0452ca84f640607c9064e978c40c318b37783\",\n+      \"short\": \"b5b0452ca\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-07 04:07:37 +0800\",\n+      \"subject\": \"chore: bump version (#2236)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit b5b0452ca84f640607c9064e978c40c318b37783\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 04:07:37 2025 +0800\\n\\n    chore: bump version (#2236)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\\nindex 7b0f5a70a..32fa927ca 100644\\n--- a/apps/vendor-gate/CHANGELOG.json\\n+++ b/apps/vendor-gate/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.4.18\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-gate_v0.4.18\\\",\\n+      \\\"date\\\": \\\"Sat, 06 Dec 2025 20:05:18 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix margin rate of swap\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"fix submit order\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 9,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit b5b0452ca84f640607c9064e978c40c318b37783\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 04:07:37 2025 +0800\\n\\n    chore: bump version (#2236)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\\nindex 0c6aa3d10..1ce1276a5 100644\\n--- a/apps/vendor-gate/CHANGELOG.md\\n+++ b/apps/vendor-gate/CHANGELOG.md\\n@@ -3 +3,9 @@\\n-This log was last generated on Sat, 06 Dec 2025 09:10:29 GMT and should not be manually modified.\\n+This log was last generated on Sat, 06 Dec 2025 20:05:18 GMT and should not be manually modified.\\n+\\n+## 0.4.18\\n+Sat, 06 Dec 2025 20:05:18 GMT\\n+\\n+### Patches\\n+\\n+- fix margin rate of swap\\n+- fix submit order\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit b5b0452ca84f640607c9064e978c40c318b37783\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 04:07:37 2025 +0800\\n\\n    chore: bump version (#2236)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\\nindex f18c454a5..c89d41b5b 100644\\n--- a/apps/vendor-gate/package.json\\n+++ b/apps/vendor-gate/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.17\\\",\\n+  \\\"version\\\": \\\"0.4.18\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-06-19-49.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit b5b0452ca84f640607c9064e978c40c318b37783\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 04:07:37 2025 +0800\\n\\n    chore: bump version (#2236)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-06-19-49.json b/common/changes/@yuants/vendor-gate/2025-12-06-19-49.json\\ndeleted file mode 100644\\nindex 3e3441d42..000000000\\n--- a/common/changes/@yuants/vendor-gate/2025-12-06-19-49.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n-      \\\"comment\\\": \\\"fix margin rate of swap\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-06-20-01.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit b5b0452ca84f640607c9064e978c40c318b37783\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 04:07:37 2025 +0800\\n\\n    chore: bump version (#2236)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-06-20-01.json b/common/changes/@yuants/vendor-gate/2025-12-06-20-01.json\\ndeleted file mode 100644\\nindex f1eaf84bb..000000000\\n--- a/common/changes/@yuants/vendor-gate/2025-12-06-20-01.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n-      \\\"comment\\\": \\\"fix submit order\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/{main_2025-12-06-09-10.json => main_2025-12-06-20-05.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"7644c64a58627d52225e3cfc611ef1d4f04d73a4\",\n+      \"short\": \"7644c64a5\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-07 04:12:40 +0800\",\n+      \"subject\": \"feat: fix huobi submit order (#2238)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 3,\n+          \"path\": \"apps/vendor-huobi/src/services/orders/submitOrder.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 7644c64a58627d52225e3cfc611ef1d4f04d73a4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sun Dec 7 04:12:40 2025 +0800\\n\\n    feat: fix huobi submit order (#2238)\\n\\ndiff --git a/apps/vendor-huobi/src/services/orders/submitOrder.ts b/apps/vendor-huobi/src/services/orders/submitOrder.ts\\nindex 7699595d2..876e70b54 100644\\n--- a/apps/vendor-huobi/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-huobi/src/services/orders/submitOrder.ts\\n@@ -25,0 +26 @@ async function handleSwapOrder(order: IOrder, credential: ICredential): Promise<\\n+  const [, instType, contractCode] = decodePath(order.product_id);\\n@@ -27 +28 @@ async function handleSwapOrder(order: IOrder, credential: ICredential): Promise<\\n-    contract_code: order.product_id,\\n+    contract_code: contractCode,\\n@@ -60,0 +62,2 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n+  const [, instType, contractCode] = decodePath(order.product_id);\\n+\\n@@ -65 +68 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n-    getSpotTick({ symbol: order.product_id }),\\n+    getSpotTick({ symbol: contractCode }),\\n@@ -81 +84 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n-    symbol: order.product_id,\\n+    symbol: contractCode,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/2025-12-06-20-10.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 7644c64a58627d52225e3cfc611ef1d4f04d73a4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sun Dec 7 04:12:40 2025 +0800\\n\\n    feat: fix huobi submit order (#2238)\\n\\ndiff --git a/common/changes/@yuants/vendor-huobi/2025-12-06-20-10.json b/common/changes/@yuants/vendor-huobi/2025-12-06-20-10.json\\nnew file mode 100644\\nindex 000000000..0522c10f9\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-huobi/2025-12-06-20-10.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\",\\n+      \\\"comment\\\": \\\"fix submit order\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"e44fdfa6c14e001dbe5c89d96e42b08a9694ecf4\",\n+      \"short\": \"e44fdfa6c\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-07 04:14:27 +0800\",\n+      \"subject\": \"chore: bump version (#2239)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit e44fdfa6c14e001dbe5c89d96e42b08a9694ecf4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 04:14:27 2025 +0800\\n\\n    chore: bump version (#2239)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.json b/apps/vendor-huobi/CHANGELOG.json\\nindex 30be57eaf..b0daaaea7 100644\\n--- a/apps/vendor-huobi/CHANGELOG.json\\n+++ b/apps/vendor-huobi/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.15.8\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-huobi_v0.15.8\\\",\\n+      \\\"date\\\": \\\"Sat, 06 Dec 2025 20:13:27 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix submit order\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit e44fdfa6c14e001dbe5c89d96e42b08a9694ecf4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 04:14:27 2025 +0800\\n\\n    chore: bump version (#2239)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.md b/apps/vendor-huobi/CHANGELOG.md\\nindex f17f885e9..a6964ecbf 100644\\n--- a/apps/vendor-huobi/CHANGELOG.md\\n+++ b/apps/vendor-huobi/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+This log was last generated on Sat, 06 Dec 2025 20:13:27 GMT and should not be manually modified.\\n+\\n+## 0.15.8\\n+Sat, 06 Dec 2025 20:13:27 GMT\\n+\\n+### Patches\\n+\\n+- fix submit order\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit e44fdfa6c14e001dbe5c89d96e42b08a9694ecf4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 04:14:27 2025 +0800\\n\\n    chore: bump version (#2239)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/package.json b/apps/vendor-huobi/package.json\\nindex 0c0306cc9..e0f4cf88a 100644\\n--- a/apps/vendor-huobi/package.json\\n+++ b/apps/vendor-huobi/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.15.7\\\",\\n+  \\\"version\\\": \\\"0.15.8\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/2025-12-06-20-10.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit e44fdfa6c14e001dbe5c89d96e42b08a9694ecf4\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sun Dec 7 04:14:27 2025 +0800\\n\\n    chore: bump version (#2239)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-huobi/2025-12-06-20-10.json b/common/changes/@yuants/vendor-huobi/2025-12-06-20-10.json\\ndeleted file mode 100644\\nindex 0522c10f9..000000000\\n--- a/common/changes/@yuants/vendor-huobi/2025-12-06-20-10.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\",\\n-      \\\"comment\\\": \\\"fix submit order\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/{main_2025-12-03-18-20.json => main_2025-12-06-20-13.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    }\n+  ],\n+  \"analysis\": {\n+    \"domains\": [\n+      {\n+        \"name\": \"配置与环境\",\n+        \"commits\": [\n+          \"56216a2d6\",\n+          \"f0ca149d4\",\n+          \"ac680a8a1\",\n+          \"f58774d9a\",\n+          \"903a16862\",\n+          \"c0d4d6aac\",\n+          \"0c88bb63e\",\n+          \"ff507dc44\",\n+          \"5fc3bbfbb\",\n+          \"ed665d773\",\n+          \"7df40da19\",\n+          \"2db8e6cb9\",\n+          \"cbd12db67\",\n+          \"b5b0452ca\",\n+          \"7644c64a5\",\n+          \"e44fdfa6c\"\n+        ],\n+        \"files\": [\n+          \".claude/settings.local.json\",\n+          \".claude/skills/git-changes-reporter/SKILL.md\",\n+          \".claude/skills/git-changes-reporter/references/bad-examples.md\",\n+          \".claude/skills/git-changes-reporter/scripts/generate-json.js\",\n+          \".claude/skills/git-changes-reporter/scripts/validate-report.js\",\n+          \".claude/skills/recent-changes-digest/SKILL.md\",\n+          \".claude/skills/recent-changes-digest/scripts/generate-digest.js\",\n+          \".claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\",\n+          \"apps/alert-receiver/src/feishu/render-alert-message-card.ts\",\n+          \"common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\"\n+        ]\n+      },\n+      {\n+        \"name\": \"文档\",\n+        \"commits\": [\n+          \"56216a2d6\",\n+          \"f58774d9a\",\n+          \"c0d4d6aac\",\n+          \"ff507dc44\",\n+          \"5fc3bbfbb\",\n+          \"7df40da19\",\n+          \"b5b0452ca\",\n+          \"e44fdfa6c\"\n+        ],\n+        \"files\": [\n+          \".claude/settings.local.json\",\n+          \".claude/skills/git-changes-reporter/SKILL.md\",\n+          \".claude/skills/git-changes-reporter/references/bad-examples.md\",\n+          \".claude/skills/git-changes-reporter/scripts/generate-json.js\",\n+          \".claude/skills/git-changes-reporter/scripts/validate-report.js\",\n+          \".claude/skills/recent-changes-digest/SKILL.md\",\n+          \".claude/skills/recent-changes-digest/scripts/generate-digest.js\",\n+          \"apps/alert-receiver/CHANGELOG.json\",\n+          \"apps/alert-receiver/CHANGELOG.md\",\n+          \"apps/alert-receiver/package.json\"\n+        ]\n+      },\n+      {\n+        \"name\": \"API请求优化与限速\",\n+        \"commits\": [\n+          \"f0ca149d4\",\n+          \"ac680a8a1\",\n+          \"903a16862\",\n+          \"0c88bb63e\",\n+          \"5fc3bbfbb\",\n+          \"2db8e6cb9\",\n+          \"7644c64a5\"\n+        ],\n+        \"files\": [\n+          \".claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\",\n+          \"apps/alert-receiver/src/feishu/render-alert-message-card.ts\",\n+          \"common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\",\n+          \"apps/vendor-okx/src/accountInfos/uid.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\",\n+          \"apps/vendor-gate/package.json\",\n+          \"apps/vendor-gate/src/api/public-api.ts\",\n+          \"apps/vendor-gate/src/index.ts\",\n+          \"apps/vendor-gate/src/services/markets/quote.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"安全与鉴权\",\n+        \"commits\": [\n+          \"f0ca149d4\",\n+          \"ac680a8a1\",\n+          \"903a16862\",\n+          \"0c88bb63e\",\n+          \"5fc3bbfbb\",\n+          \"ed665d773\",\n+          \"2db8e6cb9\",\n+          \"cbd12db67\",\n+          \"7644c64a5\"\n+        ],\n+        \"files\": [\n+          \".claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\",\n+          \"apps/alert-receiver/src/feishu/render-alert-message-card.ts\",\n+          \"common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\",\n+          \"apps/vendor-okx/src/accountInfos/uid.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\",\n+          \"apps/vendor-gate/package.json\",\n+          \"apps/vendor-gate/src/api/public-api.ts\",\n+          \"apps/vendor-gate/src/index.ts\",\n+          \"apps/vendor-gate/src/services/markets/quote.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"订单与交易\",\n+        \"commits\": [\n+          \"f0ca149d4\",\n+          \"ac680a8a1\",\n+          \"903a16862\",\n+          \"0c88bb63e\",\n+          \"5fc3bbfbb\",\n+          \"ed665d773\",\n+          \"2db8e6cb9\",\n+          \"cbd12db67\",\n+          \"7644c64a5\"\n+        ],\n+        \"files\": [\n+          \".claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\",\n+          \"apps/alert-receiver/src/feishu/render-alert-message-card.ts\",\n+          \"common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\",\n+          \"apps/vendor-okx/src/accountInfos/uid.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\",\n+          \"apps/vendor-gate/package.json\",\n+          \"apps/vendor-gate/src/api/public-api.ts\",\n+          \"apps/vendor-gate/src/index.ts\",\n+          \"apps/vendor-gate/src/services/markets/quote.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"账户管理\",\n+        \"commits\": [\n+          \"f0ca149d4\",\n+          \"ac680a8a1\",\n+          \"903a16862\",\n+          \"0c88bb63e\",\n+          \"5fc3bbfbb\",\n+          \"ed665d773\",\n+          \"2db8e6cb9\",\n+          \"cbd12db67\",\n+          \"7644c64a5\"\n+        ],\n+        \"files\": [\n+          \".claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\",\n+          \"apps/alert-receiver/src/feishu/render-alert-message-card.ts\",\n+          \"common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\",\n+          \"apps/vendor-okx/src/accountInfos/uid.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\",\n+          \"apps/vendor-gate/package.json\",\n+          \"apps/vendor-gate/src/api/public-api.ts\",\n+          \"apps/vendor-gate/src/index.ts\",\n+          \"apps/vendor-gate/src/services/markets/quote.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"市场数据\",\n+        \"commits\": [\n+          \"f0ca149d4\",\n+          \"ac680a8a1\",\n+          \"903a16862\",\n+          \"0c88bb63e\",\n+          \"5fc3bbfbb\",\n+          \"ed665d773\",\n+          \"2db8e6cb9\",\n+          \"cbd12db67\",\n+          \"7644c64a5\"\n+        ],\n+        \"files\": [\n+          \".claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\",\n+          \"apps/alert-receiver/src/feishu/render-alert-message-card.ts\",\n+          \"common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\",\n+          \"apps/vendor-okx/src/accountInfos/uid.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\",\n+          \"apps/vendor-gate/package.json\",\n+          \"apps/vendor-gate/src/api/public-api.ts\",\n+          \"apps/vendor-gate/src/index.ts\",\n+          \"apps/vendor-gate/src/services/markets/quote.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"接口重构\",\n+        \"commits\": [\n+          \"0c88bb63e\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-gate/package.json\",\n+          \"apps/vendor-gate/src/api/public-api.ts\",\n+          \"apps/vendor-gate/src/index.ts\",\n+          \"apps/vendor-gate/src/services/markets/quote.ts\",\n+          \"common/changes/@yuants/vendor-gate/2025-12-06-08-55.json\",\n+          \"common/config/rush/pnpm-lock.yaml\"\n+        ]\n+      },\n+      {\n+        \"name\": \"错误处理与观测\",\n+        \"commits\": [\n+          \"ed665d773\",\n+          \"cbd12db67\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-okx/src/trade.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-06-16-53.json\",\n+          \"apps/vendor-gate/src/services/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-gate/2025-12-06-20-01.json\"\n+        ]\n+      }\n+    ],\n+    \"riskIndicators\": [\n+      {\n+        \"type\": \"no_tests\",\n+        \"severity\": \"medium\",\n+        \"details\": \"包含功能或修复提交但未见测试文件更新\",\n+        \"commits\": []\n+      },\n+      {\n+        \"type\": \"api_change\",\n+        \"severity\": \"high\",\n+        \"details\": \"1 个提交修改了API或接口定义\",\n+        \"commits\": [\n+          \"0c88bb63e\"\n+        ]\n+      }\n+    ]\n+  },\n+  \"metadata\": {\n+    \"tool\": \"git-changes-reporter\",\n+    \"version\": \"3.0.0\",\n+    \"repository\": \"/home/runner/work/Yuan/Yuan\"\n+  }\n+}\n\\ No newline at end of file\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "example",
              "code": "\"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/SKILL.md b/.claude/skills/git-changes-reporter/SKILL.md\\nindex 89141fbc9..00d6b0a3f 100644\\n--- a/.claude/skills/git-changes-reporter/SKILL.md\\n+++ b/.claude/skills/git-changes-reporter/SKILL.md\\n@@ -8 +8 @@ description: 生成结构化 git 变更报告，包含原始 JSON 数据和语\\n-## 概述\\n+## 何时使用本 Skill\\n@@ -10 +10 @@ description: 生成结构化 git 变更报告，包含原始 JSON 数据和语\\n-本技能提供两阶段 git 变更分析工作流：首先生成结构化 JSON 原始数据，然后基于 JSON 和代码解读生成语义化 Markdown 报告。JSON 数据为 Agent 提供完整上下文，Markdown 报告为工程师提供可读摘要。\\n+满足以下任一条件时，应使用本 Skill：\\n@@ -12 +12,4 @@ description: 生成结构化 git 变更报告，包含原始 JSON 数据和语\\n-## 工作流决策树\\n+- 需要为人类工程师生成可读的变更摘要（团队同步、代码审查、发布说明）\\n+- 需要为 Agent 提供完整 git 变更上下文以回答后续问题\\n+- CI/CD 流水线中需要存储和分析变更记录\\n+- 用户提到\\\"近期改动\\\"、\\\"commit 摘要\\\"、\\\"release note\\\"等需求\\n@@ -14,9 +17,19 @@ description: 生成结构化 git 变更报告，包含原始 JSON 数据和语\\n-```mermaid\\n-graph TD\\n-    A[用户请求变更报告] --> B{需要原始数据还是语义报告?}\\n-    B -->|仅需原始数据| C[运行 generate-json.js]\\n-    B -->|需要语义报告| D[运行 generate-json.js]\\n-    D --> E[基于 JSON 生成 Markdown 报告]\\n-    C --> F[输出 JSON 文件]\\n-    E --> G[输出 Markdown 报告]\\n-```\\n+**不要使用本 Skill 的情况**：\\n+\\n+- 仅需列出 commit 列表（直接用 `git log`）\\n+- 单个 commit 的详细分析（直接用 `git show`）\\n+\\n+## 核心原则\\n+\\n+### Agent 主导判断\\n+\\n+- **脚本**：只负责数据收集，不做内容选择\\n+- **Agent**：阅读数据，判断重要性，选择展示内容，撰写分析\\n+\\n+### 简洁至上\\n+\\n+上下文是共享资源。报告应该：\\n+\\n+- **聚焦意图**：不仅说\\\"做了什么\\\"，更要说\\\"为什么\\\"\\n+- **代码片段优先**：5-15 行核心代码胜过长篇解释\\n+- **结构化呈现**：用列表和表格而非段落堆砌\\n@@ -24 +37 @@ graph TD\\n-## 第一阶段：生成结构化 JSON 数据\\n+### 渐进式披露\\n@@ -26 +39 @@ graph TD\\n-### 何时使用\\n+三个分析深度级别：\\n@@ -28,3 +41,3 @@ graph TD\\n-- 需要为 Agent 提供完整 git 变更上下文\\n-- 需要原始数据用于进一步处理或分析\\n-- CI/CD 流水线中存储变更记录\\n+- **Level 1 (基础)**：统计信息、目录热度、贡献者分析\\n+- **Level 2 (中级)**：含代码片段、风险识别、领域聚类（**默认**）\\n+- **Level 3 (深度)**：含调用关系、完整风险评估、详细影响分析\\n@@ -32 +45 @@ graph TD\\n-### 使用方法\\n+## 工作流程\\n@@ -34 +47,3 @@ graph TD\\n-运行脚本生成 JSON：\\n+### 阶段一：生成结构化 JSON\\n+\\n+**目的**：收集原始数据，自动提取代码片段和风险指标\\n@@ -40,5 +55 @@ graph TD\\n-**参数说明**：\\n-\\n-- `<old_commit>`：起始提交引用（commit hash、tag、branch）\\n-- `<new_commit>`：结束提交引用\\n-- `[output_path]`：可选输出路径，默认 `docs/reports/git-changes-YYYY-MM-DD.json`\\n+**输出内容**：\\n@@ -46 +57,11 @@ graph TD\\n-**示例**：\\n+- `commits[]`：每个 commit 的详细信息\\n+  - `short`：短哈希（用于引用）\\n+  - `subject`：提交主题\\n+  - `conventionalCommit`：解析的 feat/fix/refactor 等类型\\n+  - `files[]`：变更文件列表\\n+    - `path`：文件路径\\n+    - `changeType`：added/modified/deleted/renamed\\n+    - `codeSnippets[]`：自动提取的函数/类/接口定义（最多 15 行）\\n+- `analysis.domains[]`：自动识别的技术领域\\n+- `analysis.riskIndicators[]`：风险指标（breaking_change/large_refactor/no_tests/api_change）\\n+- `contributors[]`：贡献者统计\\n@@ -48,3 +69 @@ graph TD\\n-```bash\\n-# 分析最近 10 个提交\\n-.claude/skills/git-changes-reporter/scripts/generate-json.js HEAD~10 HEAD\\n+### 阶段二：Agent 阅读 JSON 并生成报告\\n@@ -52,3 +71 @@ graph TD\\n-# 指定输出路径\\n-.claude/skills/git-changes-reporter/scripts/generate-json.js v1.0.0 HEAD ./reports/changes.json\\n-```\\n+**Agent 职责**：\\n@@ -56,37 +73,4 @@ graph TD\\n-### JSON 数据结构\\n-\\n-生成的 JSON 包含以下字段：\\n-\\n-```json\\n-{\\n-  \\\"range\\\": {\\n-    \\\"old\\\": \\\"起始提交引用\\\",\\n-    \\\"new\\\": \\\"结束提交引用\\\",\\n-    \\\"label\\\": \\\"显示标签\\\",\\n-    \\\"startDate\\\": \\\"起始日期\\\",\\n-    \\\"endDate\\\": \\\"结束日期\\\",\\n-    \\\"commitCount\\\": \\\"提交数量\\\",\\n-    \\\"generatedAt\\\": \\\"生成时间\\\"\\n-  },\\n-  \\\"contributors\\\": [{ \\\"name\\\": \\\"作者名\\\", \\\"email\\\": \\\"邮箱\\\", \\\"commits\\\": \\\"提交数\\\" }],\\n-  \\\"topDirs\\\": [{ \\\"dir\\\": \\\"目录名\\\", \\\"fileCount\\\": \\\"文件数\\\" }],\\n-  \\\"commits\\\": [\\n-    {\\n-      \\\"hash\\\": \\\"完整提交哈希\\\",\\n-      \\\"short\\\": \\\"短哈希\\\",\\n-      \\\"author\\\": \\\"作者\\\",\\n-      \\\"email\\\": \\\"邮箱\\\",\\n-      \\\"authoredAt\\\": \\\"提交时间\\\",\\n-      \\\"subject\\\": \\\"提交信息\\\",\\n-      \\\"files\\\": [\\n-        {\\n-          \\\"path\\\": \\\"文件路径\\\",\\n-          \\\"additions\\\": \\\"新增行数\\\",\\n-          \\\"deletions\\\": \\\"删除行数\\\",\\n-          \\\"patch\\\": \\\"差异内容\\\"\\n-        }\\n-      ]\\n-    }\\n-  ]\\n-}\\n-```\\n+1. 分段读取 JSON 文件（按需读取，避免超出 token 限制）\\n+2. 理解变更的技术意图和业务影响\\n+3. 选择重要的代码片段展示\\n+4. 按照下方模板格式输出最终 Markdown 报告\\n@@ -94 +78 @@ graph TD\\n-### 脚本详情\\n+**读取策略**（JSON 文件可能较大）：\\n@@ -96 +80,3 @@ graph TD\\n-参见 [scripts/generate-json.js](scripts/generate-json.js) 了解实现细节。该脚本：\\n+```bash\\n+# 读取概览信息\\n+Read JSON offset=0 limit=100  # meta, contributors, analysis 部分\\n@@ -98,4 +84,3 @@ graph TD\\n-- 验证 git 仓库状态\\n-- 收集提交范围信息\\n-- 提取每个提交的文件变更和 patch\\n-- 生成结构化 JSON 输出\\n+# 按需读取具体 commit\\n+Read JSON offset=X limit=200  # 特定 commit 的详细信息\\n+```\\n@@ -103 +88 @@ graph TD\\n-## 第二阶段：生成语义化 Markdown 报告\\n+### 阶段三：质量验证\\n@@ -105 +90 @@ graph TD\\n-### 何时使用\\n+**目的**：确保报告符合质量要求\\n@@ -107,4 +92,3 @@ graph TD\\n-- 需要人类可读的变更摘要\\n-- 团队同步或代码审查\\n-- 发布说明或变更日志\\n-- 为工程师提供快速概览\\n+```bash\\n+.claude/skills/git-changes-reporter/scripts/validate-report.js <markdown_file>\\n+```\\n@@ -112 +96 @@ graph TD\\n-### 工作流程\\n+## 报告模板\\n@@ -114,4 +98 @@ graph TD\\n-1. **加载 JSON 数据**：首先运行 `generate-json.js` 生成或加载现有 JSON 文件\\n-2. **分析代码变更**：读取 JSON 中的 commits 和 files，必要时查看实际代码文件\\n-3. **语义聚类**：按技术领域分组提交（错误处理、安全、功能、重构等）\\n-4. **生成报告**：基于分析结果撰写 Markdown\\n+Agent 应按以下结构输出报告：\\n@@ -119 +100 @@ graph TD\\n-### 报告结构模板\\n+> 详细模板见 [references/report-template.md](references/report-template.md)\\n@@ -121 +102,2 @@ graph TD\\n-报告应包含以下部分：\\n+````markdown\\n+# Git 变更报告（<old_commit>..<new_commit>）\\n@@ -123,2 +105,2 @@ graph TD\\n-```markdown\\n-# Git 变更报告（<提交范围>）\\n+> **时间范围**：YYYY-MM-DD 至 YYYY-MM-DD\\n+> **分析深度**：Level 2\\n@@ -128,4 +110,4 @@ graph TD\\n-- 时间范围：<startDate> 至 <endDate>\\n-- 提交数量：<commitCount>\\n-- 主要贡献者：<前 3 位作者>\\n-- 热点目录：<前 3 个目录>\\n+- **提交数量**：N\\n+- **主要贡献者**：Author1 (X commits), Author2 (Y commits)\\n+- **热点目录**：`apps` (N 文件), `common` (M 文件)\\n+- **风险指标**：⚠️ N 个高风险项\\n@@ -133 +115 @@ graph TD\\n-## 2. 改动聚焦领域\\n+## 2. 核心变更\\n@@ -135 +117 @@ graph TD\\n-### 2.1 <领域 1：如错误处理与观测>\\n+### 2.1 [变更主题/领域名称]\\n@@ -137,6 +119,2 @@ graph TD\\n-- **涉及目录**：<目录列表>\\n-- **关键提交**：<短哈希列表及主题>\\n-- **核心改动**：\\n-  - <文件路径>：<改动描述>\\n-  - <文件路径>：<改动描述>\\n-- **设计意图**：<从代码和提交信息推断>\\n+**相关提交**：`hash1`, `hash2`\\n+**作者**：Author Name\\n@@ -144 +122,2 @@ graph TD\\n-### 2.2 <领域 2：如安全与鉴权>\\n+**设计意图**：\\n+[解释为什么做这个改动，业务背景，技术动机。至少 50 字。]\\n@@ -146 +125,2 @@ graph TD\\n-...\\n+**核心代码**：\\n+[file.ts:L42-L58](path/to/file.ts#L42-L58)\\n@@ -148 +128,7 @@ graph TD\\n-## 3. 贡献者分析\\n+```typescript\\n+// 选择最能体现设计意图的 5-15 行代码\\n+const example = () => {\\n+  // ...\\n+};\\n+```\\n+````\\n@@ -150,3 +136 @@ graph TD\\n-| 作者   | 提交数 | 主要领域 |\\n-| ------ | ------ | -------- |\\n-| <作者> | <数量> | <领域>   |\\n+**影响范围**：\\n@@ -154 +138,2 @@ graph TD\\n-## 4. 技术影响与风险\\n+- 影响模块：`module-a`, `module-b`\\n+- 需要关注：[具体的注意事项]\\n@@ -156,4 +141 @@ graph TD\\n-- **兼容性影响**：<描述>\\n-- **配置变更**：<描述>\\n-- **性能影响**：<描述>\\n-- **测试覆盖**：<描述>\\n+### 2.2 [下一个变更主题]\\n@@ -161 +143 @@ graph TD\\n-## 5. 单提交摘要（附录）\\n+...\\n@@ -163 +145 @@ graph TD\\n-### <短哈希> <作者> | <日期> | <标签>\\n+## 3. 贡献者\\n@@ -165 +147,3 @@ graph TD\\n-**主题**：<原提交主题>\\n+| 作者 | 提交数 | 主要工作 | 关键提交 |\\n+| ---- | ------ | -------- | -------- |\\n+| Name | N      | 简述贡献 | `hash`   |\\n@@ -167 +151 @@ graph TD\\n-**变更要点**：\\n+## 4. 风险评估\\n@@ -169,3 +153 @@ graph TD\\n-- <文件/目录>：<具体改动与目的>\\n-- <接口/协议>：<变更描述>\\n-- <行为/数据流>：<运行时影响>\\n+### 兼容性影响\\n@@ -173 +155 @@ graph TD\\n-**风险/影响**：\\n+[具体描述 API 变更、配置格式变化，列出受影响的模块/服务]\\n@@ -175 +157 @@ graph TD\\n-- <兼容性/配置/依赖影响>\\n+### 配置变更\\n@@ -177,2 +159 @@ graph TD\\n-**测试**：<测试文件或\\\"未见测试记录\\\">\\n-```\\n+[新增、修改或删除的配置项]\\n@@ -180 +161 @@ graph TD\\n-### 写作指南\\n+### 性能影响\\n@@ -182 +163 @@ graph TD\\n-#### 语义聚类原则\\n+[可能影响性能的变更]\\n@@ -184,6 +165 @@ graph TD\\n-- **错误处理与观测**：异常处理、日志、监控、指标\\n-- **安全与鉴权**：认证、授权、加密、输入验证\\n-- **功能开发**：新特性、API 扩展、业务逻辑\\n-- **重构与优化**：代码整理、性能优化、架构调整\\n-- **运维与部署**：配置、脚本、CI/CD、文档\\n-- **依赖更新**：包版本升级、第三方库变更\\n+### 测试覆盖\\n@@ -191 +167 @@ graph TD\\n-#### 文件引用格式\\n+[测试文件变更情况，是否有测试覆盖]\\n@@ -193,3 +169 @@ graph TD\\n-- 使用完整路径：`apps/vendor-aster/src/quote.ts`\\n-- 包含行号范围：`libraries/protocol/src/terminal.ts:138-143`\\n-- 链接到代码：在 IDE 环境中使用可点击链接格式\\n+````\\n@@ -197 +171 @@ graph TD\\n-#### 提交引用格式\\n+## 关键要求\\n@@ -199,3 +173 @@ graph TD\\n-- 短哈希：`03a48cfc4`\\n-- 带主题：`03a48cfc4 (feat: enforce terminal_id...)`\\n-- 在描述中显式关联：`在 03a48cfc4 中，CZ 改进了...`\\n+### 1. 代码片段\\n@@ -203 +175,3 @@ graph TD\\n-**⚠️ 重要警告：不要使用 JSON 文件行号作为 commit ID**\\n+- 每个核心变更**必须**包含代码片段或带行号的文件引用\\n+- 代码片段长度：5-15 行\\n+- **选择标准**：最能体现设计意图的代码，而非随机选取\\n@@ -205,4 +179 @@ graph TD\\n-- JSON 文件中的行号（如 `1279`、`703`）只是文件位置，不是 commit 标识符\\n-- 正确的 commit ID 在 JSON 的 `\\\"short\\\"` 字段中（如 `\\\"a9300e76f\\\"`）\\n-- 错误示例：`1279`（行号） ❌\\n-- 正确示例：`a9300e76f`（短哈希） ✅\\n+### 2. 设计意图\\n@@ -210 +181,3 @@ graph TD\\n-#### 语气与风格\\n+- **必须**回答\\\"为什么做这个改动\\\"\\n+- **禁止**仅描述\\\"做了什么\\\"\\n+- 至少 50 个字符的实质性内容\\n@@ -212,4 +185 @@ graph TD\\n-- **客观专业**：面向工程同事，基于事实\\n-- **简明扼要**：短段落，列表优先，表格用于比较\\n-- **中英混合**：正文使用中文，代码/命令使用英文\\n-- **聚焦意图**：不仅描述\\\"做了什么\\\"，还要解释\\\"为什么\\\"\\n+### 3. 引用格式\\n@@ -217 +187 @@ graph TD\\n-### 质量检查清单\\n+**文件引用**：`[file.ts:L42-L58](path/to/file.ts#L42-L58)`\\n@@ -219 +189 @@ graph TD\\n-生成报告后检查：\\n+**Commit 引用**：使用 JSON 中的 `short` 字段（如 `a9300e76f`）\\n@@ -221,7 +191 @@ graph TD\\n-- [ ] 范围正确，起止提交无误\\n-- [ ] 每个技术领域有具体文件引用\\n-- [ ] 作者贡献分析完整\\n-- [ ] 识别了潜在风险和建议\\n-- [ ] 单提交摘要覆盖关键点\\n-- [ ] 报告结构清晰，易于导航\\n-- [ ] **commit 引用使用正确的短哈希，而不是 JSON 文件行号**\\n+### 4. 内容选择原则\\n@@ -229 +193 @@ graph TD\\n-## 高级用法\\n+Agent 应根据以下优先级选择展示内容：\\n@@ -231 +195,4 @@ graph TD\\n-### GitHub Commit 链接生成\\n+1. **Breaking changes**：API 变更、接口删除\\n+2. **新功能**：feat 类型的核心实现\\n+3. **重要修复**：影响用户的 bug fix\\n+4. **架构变更**：refactor 涉及多文件的改动\\n@@ -233 +200,4 @@ graph TD\\n-对于 GitHub 仓库，可以使用附加脚本生成 commit 链接：\\n+**可以省略**：\\n+- 版本号更新（chore: bump version）\\n+- 纯文档变更\\n+- 自动生成的 CHANGELOG\\n@@ -235,3 +205 @@ graph TD\\n-```bash\\n-.claude/skills/git-changes-reporter/scripts/generate-github-links.js <json_file> <repo_url>\\n-```\\n+## 示例\\n@@ -239,34 +207 @@ graph TD\\n-该脚本会为 JSON 中的每个 commit 添加 `githubUrl` 字段，格式为：`https://github.com/<owner>/<repo>/commit/<hash>`\\n-\\n-### CI/CD 集成示例\\n-\\n-在 GitHub Actions 中每日生成报告：\\n-\\n-```yaml\\n-name: Daily Change Report\\n-on:\\n-  schedule:\\n-    - cron: '0 9 * * *' # 每天 9:00 UTC\\n-  workflow_dispatch:\\n-\\n-jobs:\\n-  generate-report:\\n-    runs-on: ubuntu-latest\\n-    steps:\\n-      - uses: actions/checkout@v4\\n-        with:\\n-          fetch-depth: 0 # 获取完整历史\\n-\\n-      - name: Generate JSON data\\n-        run: |\\n-          .claude/skills/git-changes-reporter/scripts/generate-json.js \\\\\\n-            \\\"$(git rev-list -n 1 --before='24 hours ago' HEAD)\\\" \\\\\\n-            HEAD \\\\\\n-            ./reports/daily-changes.json\\n-\\n-      - name: Upload artifact\\n-        uses: actions/upload-artifact@v4\\n-        with:\\n-          name: daily-change-report\\n-          path: ./reports/\\n-```\\n+### 好的报告示例\\n@@ -274 +209,2 @@ jobs:\\n-> **完整自动化工作流**：项目中包含完整的 GitHub Actions 工作流文件 `.github/workflows/daily-git-report.yml`，使用 `claude-code-action` 配置 DeepSeek API 自动生成报告并创建 PR。\\n+```markdown\\n+### 2.1 Binance 请求间隔优化\\n@@ -276 +212,2 @@ jobs:\\n-### 与现有工具集成\\n+**相关提交**：`b285cde59`\\n+**作者**：Siyuan Wang\\n@@ -278,3 +215,4 @@ jobs:\\n-- **JIRA/GitHub Issues**：在报告中引用相关 issue ID\\n-- **Slack/Teams**：生成简要摘要发送到聊天频道\\n-- **文档系统**：将报告集成到内部 wiki 或文档站点\\n+**设计意图**：\\n+通过动态计算 API 限速参数，自动调整请求间隔，避免触发交易所限速机制。\\n+此前使用固定间隔 500ms，在高频场景下仍会触发限速；现在根据交易所返回的\\n+rateLimits 配置动态计算安全间隔（duration/limit），确保稳定性。\\n@@ -282 +220,15 @@ jobs:\\n-## 故障排除\\n+**核心代码**：\\n+[quote.ts:L65-L78](apps/vendor-binance/src/public-data/quote.ts#L65-L78)\\n+```typescript\\n+const getRequestIntervalMs = (rateLimits: IRateLimit[], fallbackMs: number) => {\\n+  const intervals: number[] = [];\\n+  for (const item of rateLimits ?? []) {\\n+    if (item.rateLimitType !== 'REQUEST_WEIGHT') continue;\\n+    const duration = toIntervalMs(item.interval, item.intervalNum);\\n+    const limit = item.limit;\\n+    if (duration == null || limit == null) continue;\\n+    intervals.push(Math.ceil(duration / limit));\\n+  }\\n+  return Math.max(fallbackMs, Math.max(...intervals));\\n+};\\n+````\\n@@ -284 +236 @@ jobs:\\n-### 常见问题\\n+**影响范围**：\\n@@ -286,4 +238,2 @@ jobs:\\n-1. **无提交找到**：检查提交引用是否存在，确认仓库有足够历史\\n-2. **JSON 解析错误**：确保脚本在 git 仓库根目录运行\\n-3. **权限问题**：确认有权限创建输出目录\\n-4. **内存不足**：对于大量提交，考虑增加 Node.js 内存限制\\n+- 影响模块：`vendor-binance`, `vendor-aster`（使用相同模式）\\n+- 期货和现货数据流均受益\\n@@ -291 +241 @@ jobs:\\n-### 性能优化\\n+````\\n@@ -293,4 +243 @@ jobs:\\n-- 对于大型提交范围（>100 commits），考虑：\\n-  - 使用 `--no-patch` 选项减少内存使用\\n-  - 分批处理提交\\n-  - 仅分析关键目录\\n+### 差的报告示例（避免）\\n@@ -298 +245,2 @@ jobs:\\n-## 资源\\n+```markdown\\n+### 2.1 更新代码\\n@@ -300 +248 @@ jobs:\\n-### 脚本文件\\n+**相关提交**：`1279`, `703`  ❌ 使用了行号而非 commit hash\\n@@ -302,2 +250,2 @@ jobs:\\n-- [generate-json.js](scripts/generate-json.js) - 生成结构化 JSON 数据\\n-- [generate-github-links.js](scripts/generate-github-links.js) - 为 commit 添加 GitHub 链接\\n+**设计意图**：\\n+添加了 getRequestIntervalMs 函数。  ❌ 只说了做什么，没说为什么\\n@@ -305 +253,2 @@ jobs:\\n-### 报告模板\\n+**核心改动**：优化了请求间隔逻辑  ❌ 没有代码片段\\n+````\\n@@ -307 +256,7 @@ jobs:\\n-- [report-template.md](references/report-template.md) - 详细的报告结构、写作指南和示例\\n+## 故障排除\\n+\\n+| 问题                      | 解决方案                                          |\\n+| ------------------------- | ------------------------------------------------- |\\n+| JSON 文件太大无法一次读取 | 分段读取：先读 meta/analysis，再按需读具体 commit |\\n+| 不确定哪些变更重要        | 优先看 riskIndicators 和 conventionalCommit 类型  |\\n+| Commit 数量太多           | 按领域分组，相似变更合并描述                      |\\n@@ -309 +264 @@ jobs:\\n-### 脚本文档\\n+## 参考资源\\n@@ -311 +266,3 @@ jobs:\\n-- [scripts/README.md](scripts/README.md) - 脚本使用说明和示例\\n+- [references/report-template.md](references/report-template.md)：完整模板示例\\n+- [references/bad-examples.md](references/bad-examples.md)：反面示例\\n+- [scripts/README.md](scripts/README.md)：脚本使用文档\\n@@ -313 +270 @@ jobs:\\n-### 参考实现\\n+---\\n@@ -315 +272,2 @@ jobs:\\n-基于现有 `recent-changes-digest` 技能改进，提供更规范的接口和更清晰的文档。\\n+**版本**：3.0.0\\n+**上次更新**：2025-12-06\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"example\",",
              "lineStart": 125,
              "lineEnd": 129
            },
            {
              "type": "function",
              "name": "example",
              "code": "  \"code\": \"const example = () => {\\n  // ...\\n};\\n```\\n````\\n**影响范围**：\\n- 影响模块：`module-a`, `module-b`\\n- 需要关注：[具体的注意事项]\\n### 2.2 [下一个变更主题]\\n...\\n## 3. 贡献者\\n| 作者 | 提交数 | 主要工作 | 关键提交 |\\n| ---- | ------ | -------- | -------- |\\n| Name | N      | 简述贡献 | `hash`   |\\n## 4. 风险评估\",\n  \"lineStart\": 130,\n  \"lineEnd\": 222\n},\n{\n  \"type\": \"function\",\n  \"name\": \"getRequestIntervalMs\",",
              "lineStart": 130,
              "lineEnd": 136
            },
            {
              "type": "function",
              "name": "getRequestIntervalMs",
              "code": "  \"code\": \"const getRequestIntervalMs = (rateLimits: IRateLimit[], fallbackMs: number) => {\",\n  \"lineStart\": 223,\n  \"lineEnd\": 223\n},\n{\n  \"type\": \"function\",\n  \"name\": \"intervals\",",
              "lineStart": 137,
              "lineEnd": 143
            },
            {
              "type": "function",
              "name": "intervals",
              "code": "  \"code\": \"const intervals: number[] = [];\",\n  \"lineStart\": 224,\n  \"lineEnd\": 224\n},\n{\n  \"type\": \"function\",\n  \"name\": \"item\",",
              "lineStart": 144,
              "lineEnd": 150
            },
            {
              "type": "function",
              "name": "item",
              "code": "  \"code\": \"for (const item of rateLimits ?? []) {\\n  if (item.rateLimitType !== 'REQUEST_WEIGHT') continue;\",\n  \"lineStart\": 225,\n  \"lineEnd\": 226\n},\n{\n  \"type\": \"function\",\n  \"name\": \"duration\",",
              "lineStart": 151,
              "lineEnd": 157
            },
            {
              "type": "function",
              "name": "duration",
              "code": "  \"code\": \"const duration = toIntervalMs(item.interval, item.intervalNum);\",\n  \"lineStart\": 227,\n  \"lineEnd\": 227\n},\n{\n  \"type\": \"function\",\n  \"name\": \"limit\",",
              "lineStart": 158,
              "lineEnd": 164
            },
            {
              "type": "function",
              "name": "limit",
              "code": "      \"code\": \"    const limit = item.limit;\\n    if (duration == null || limit == null) continue;\\n    intervals.push(Math.ceil(duration / limit));\\n  }\\n  return Math.max(fallbackMs, Math.max(...intervals));\\n};\\n````\\n**影响范围**：\\n- 影响模块：`vendor-binance`, `vendor-aster`（使用相同模式）\\n- 期货和现货数据流均受益\\n````\\n### 差的报告示例（避免）\\n```markdown\\n### 2.1 更新代码\\n**相关提交**：`1279`, `703`  ❌ 使用了行号而非 commit hash\",\n      \"lineStart\": 228,\n      \"lineEnd\": 274\n    }\n  ]\n},\n{\n  \"additions\": 290,\n  \"deletions\": 0,\n  \"path\": \".claude/skills/git-changes-reporter/references/bad-examples.md\",\n  \"changeType\": \"added\",",
              "lineStart": 165,
              "lineEnd": 175
            },
            {
              "type": "function",
              "name": "getRequestIntervalMs",
              "code": "\"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/references/bad-examples.md b/.claude/skills/git-changes-reporter/references/bad-examples.md\\nnew file mode 100644\\nindex 000000000..1b983a158\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/references/bad-examples.md\\n@@ -0,0 +1,290 @@\\n+# 不合格报告示例集\\n+\\n+本文档收集常见的报告质量问题，帮助 Agent 识别并避免这些错误。\\n+\\n+## 目录\\n+\\n+1. [使用 JSON 行号作为 Commit ID](#1-使用-json-行号作为-commit-id)\\n+2. [缺少代码片段](#2-缺少代码片段)\\n+3. [设计意图仅描述\\\"做了什么\\\"](#3-设计意图仅描述做了什么)\\n+4. [风险评估过于笼统](#4-风险评估过于笼统)\\n+5. [缺少文件行号引用](#5-缺少文件行号引用)\\n+6. [贡献者表格缺少关键提交列](#6-贡献者表格缺少关键提交列)\\n+\\n+---\\n+\\n+## 1. 使用 JSON 行号作为 Commit ID\\n+\\n+### ❌ 错误示例\\n+\\n+```markdown\\n+### 2.1 API 请求优化与限速\\n+\\n+- **关键提交**：`1279`, `703`, `856`\\n+- **核心改动**：...\\n+```\\n+\\n+### 为什么错误\\n+\\n+- `1279`、`703` 是 JSON 文件的行号，不是 commit ID\\n+- JSON 文件结构变化后，这些数字会指向错误的 commit\\n+- 无法通过行号查找 commit 历史\\n+\\n+### ✅ 正确示例\\n+\\n+```markdown\\n+### 2.1 API 请求优化与限速\\n+\\n+- **关键提交**：\\n+  - [`b285cde59`](#b285cde59): 添加请求间隔处理以优化 Binance 数据请求\\n+  - [`76802e0c0`](#76802e0c0): 添加请求间隔处理以优化 Aster 数据请求\\n+- **核心改动**：...\\n+```\\n+\\n+### 如何修复\\n+\\n+在 JSON 文件中查找 `\\\"short\\\"` 字段：\\n+\\n+```json\\n+{\\n+  \\\"hash\\\": \\\"b285cde59c6a9f7b3e5d4a2c1f8e9b7a6c5d4e3f\\\",\\n+  \\\"short\\\": \\\"b285cde59\\\",  // ← 使用这个作为 commit ID\\n+  \\\"author\\\": \\\"Siyuan Wang\\\",\\n+  ...\\n+}\\n+```\\n+\\n+---\\n+\\n+## 2. 缺少代码片段\\n+\\n+### ❌ 错误示例\\n+\\n+```markdown\\n+### 2.1 API 请求优化与限速\\n+\\n+- **核心改动**：\\n+  - 新增 `getRequestIntervalMs()` 函数\\n+  - 优化了请求间隔逻辑\\n+  - 修改了 quote.ts 文件\\n+```\\n+\\n+### 为什么错误\\n+\\n+- 读者无法直接看到核心逻辑\\n+- 需要额外打开文件才能理解改动\\n+- 缺少关键代码的行号定位\\n+\\n+### ✅ 正确示例\\n+\\n+````markdown\\n+### 2.1 API 请求优化与限速\\n+\\n+- **核心改动**：\\n+  - [quote.ts:L65-L78](apps/vendor-binance/src/public-data/quote.ts#L65-L78)：新增 `getRequestIntervalMs()` 函数，动态计算安全请求间隔：\\n+    ```typescript\\n+    const getRequestIntervalMs = (rateLimits: IRateLimit[] | undefined, fallbackMs: number) => {\\n+      const intervals: number[] = [];\\n+      for (const item of rateLimits ?? []) {\\n+        if (item.rateLimitType !== 'REQUEST_WEIGHT' && item.rateLimitType !== 'RAW_REQUESTS') continue;\\n+        const duration = toIntervalMs(item.interval, item.intervalNum);\\n+        const limit = item.limit;\\n+        if (duration == null || limit == null || limit <= 0) continue;\\n+        intervals.push(Math.ceil(duration / limit)); // ← 关键逻辑\\n+      }\\n+      return Math.max(fallbackMs, Math.max(...intervals));\\n+    };\\n+    ```\\n+    该函数通过解析交易所的 `rateLimits` 配置，计算每个限速规则的最小间隔（duration/limit），\\n+    然后取最大值作为安全间隔，确保不触发任何限速规则。\\n+````\\n+\\n+---\\n+\\n+## 3. 设计意图仅描述\\\"做了什么\\\"\\n+\\n+### ❌ 错误示例\\n+\\n+```markdown\\n+- **设计意图**：添加了 `getRequestIntervalMs` 函数用于计算请求间隔。\\n+```\\n+\\n+### 为什么错误\\n+\\n+- 仅重复了代码中已经明显的信息\\n+- 未解释为什么需要这个函数\\n+- 未说明解决了什么问题或带来什么好处\\n+\\n+### ✅ 正确示例\\n+\\n+```markdown\\n+- **设计意图**：交易所 API 有多种限速规则（按权重、按请求数等），硬编码间隔\\n+  容易触发限速导致服务不稳定。通过动态解析 API 响应中的 `rateLimits` 配置，\\n+  自动计算满足所有规则的最小安全间隔，实现了：\\n+  1. **自适应限速**：不同交易所、不同接口的限速规则自动适配\\n+  2. **最大吞吐**：在不触发限速的前提下使用最短间隔\\n+  3. **代码复用**：该函数被 `futureRequestInterval$` 和 `spotRequestInterval$` 共享\\n+```\\n+\\n+### 判断标准\\n+\\n+好的设计意图说明应该回答：\\n+\\n+- 为什么需要这个改动？（解决什么问题）\\n+- 这个改动如何解决问题？（方案选择理由）\\n+- 这个改动的影响范围？（谁会用到）\\n+\\n+---\\n+\\n+## 4. 风险评估过于笼统\\n+\\n+### ❌ 错误示例\\n+\\n+```markdown\\n+### 兼容性影响\\n+\\n+- API 有变更，调用方需要注意\\n+- 可能影响现有功能\\n+```\\n+\\n+### 为什么错误\\n+\\n+- 未列出具体受影响的模块或服务\\n+- 未说明具体需要做什么改动\\n+- 未评估影响严重程度\\n+\\n+### ✅ 正确示例\\n+\\n+```markdown\\n+### 兼容性影响\\n+\\n+**高风险**：Bitget API 重构（`65358bffa`）\\n+\\n+- **变更内容**：删除了 `src/services/accounts/futures.ts` 和 `spot.ts`，\\n+  改用统一的 `account.ts`\\n+- **受影响服务**：\\n+  - `apps/trading-bot/src/strategies/bitget-arbitrage.ts`：依赖 `getFuturesAccount()`\\n+  - `apps/risk-monitor/src/providers/bitget.ts`：依赖 `getSpotAccount()`\\n+  - `apps/portfolio-tracker/src/integrations/bitget.ts`：同时使用两个接口\\n+- **迁移要求**：\\n+  - 修改导入路径：`from './accounts/futures'` → `from './accounts/account'`\\n+  - 更新函数调用：`getFuturesAccount()` → `getAccount('futures')`\\n+  - 无向后兼容层，**必须同步升级所有依赖服务**\\n+- **测试建议**：在 staging 环境验证账户查询和下单流程\\n+\\n+**中风险**：请求间隔优化（`b285cde59`, `76802e0c0`）\\n+\\n+- **性能影响**：数据刷新频率可能降低 20-30%（取决于交易所限速规则）\\n+- **业务影响**：高频交易策略可能需要调整参数\\n+- **配置选项**：可通过环境变量 `REQUEST_INTERVAL_OVERRIDE` 强制使用旧间隔（仅用于紧急回退）\\n+```\\n+\\n+### 判断标准\\n+\\n+好的风险评估应该包含：\\n+\\n+- 风险级别（高/中/低）\\n+- 具体受影响的文件/模块/服务\\n+- 需要采取的行动\\n+- 回退方案（如果有）\\n+\\n+---\\n+\\n+## 5. 缺少文件行号引用\\n+\\n+### ❌ 错误示例\\n+\\n+```markdown\\n+- **核心改动**：\\n+  - `apps/vendor-binance/src/public-data/quote.ts`：新增函数\\n+  - `apps/vendor-aster/src/services/markets/quote.ts`：同样优化\\n+```\\n+\\n+### 为什么错误\\n+\\n+- 读者需要手动打开文件并查找改动位置\\n+- 无法快速跳转到具体代码\\n+- 大文件中难以定位\\n+\\n+### ✅ 正确示例\\n+\\n+```markdown\\n+- **核心改动**：\\n+  - [quote.ts:L65-L78](apps/vendor-binance/src/public-data/quote.ts#L65-L78)：新增 `getRequestIntervalMs()` 函数\\n+  - [quote.ts:L95-L106](apps/vendor-binance/src/public-data/quote.ts#L95-L106)：在 `futureRequestInterval$` 中使用新函数\\n+  - [quote.ts:L220-L231](apps/vendor-binance/src/public-data/quote.ts#L220-L231)：在 `spotRequestInterval$` 中使用新函数\\n+```\\n+\\n+### 格式规范\\n+\\n+正确的文件引用格式：\\n+\\n+```markdown\\n+[显示名称:L 起始行-L 结束行](完整路径#L起始行-L结束行)\\n+```\\n+\\n+示例：\\n+\\n+```markdown\\n+[terminal.ts:L138-L143](libraries/protocol/src/terminal.ts#L138-L143)\\n+```\\n+\\n+---\\n+\\n+## 6. 贡献者表格缺少关键提交列\\n+\\n+### ❌ 错误示例\\n+\\n+```markdown\\n+## 3. 贡献者分析\\n+\\n+| 作者        | 提交数 | 主要领域           |\\n+| ----------- | ------ | ------------------ |\\n+| CZ          | 4      | API 优化、凭证管理 |\\n+| Siyuan Wang | 3      | 接口重构           |\\n+```\\n+\\n+### 为什么错误\\n+\\n+- 无法快速跳转到该作者的代表性提交\\n+- 难以评估贡献的具体内容\\n+\\n+### ✅ 正确示例\\n+\\n+```markdown\\n+## 3. 贡献者分析\\n+\\n+| 作者                | 提交数 | 主要领域                     | 关键提交    |\\n+| ------------------- | ------ | ---------------------------- | ----------- |\\n+| CZ                  | 4      | API 优化、凭证管理、利率处理 | `9b9495d1e` |\\n+| Siyuan Wang         | 3      | 接口重构、请求限速优化       | `65358bffa` |\\n+| humblelittlec1[bot] | 5      | 版本发布自动化               | `c36262cad` |\\n+```\\n+\\n+### 如何选择关键提交\\n+\\n+- 选择该作者改动最大的提交（按行数或文件数）\\n+- 选择技术难度最高或最具代表性的提交\\n+- 自动化提交（bot）可以选择最新的版本发布提交\\n+\\n+---\\n+\\n+## 总结检查清单\\n+\\n+在提交报告前，确保：\\n+\\n+- [ ] 所有 commit 引用使用短哈希（7 位十六进制），而非 JSON 行号\\n+- [ ] 每个技术领域至少有一个代码片段（5-15 行）或文件引用\\n+- [ ] 设计意图回答了\\\"为什么\\\"，至少 50 个汉字\\n+- [ ] 风险评估具体列出了受影响的模块/服务\\n+- [ ] 文件引用使用 `[name:L1-L10](path#L1-L10)` 格式\\n+- [ ] 贡献者表格有四列：作者、提交数、主要领域、关键提交\\n+- [ ] 所有 `<!-- TODO -->` 标记已移除\\n+\\n+---\\n+\\n+**提示**：使用 `validate-report.js` 自动检查这些问题：\\n+\\n+```bash\\n+node .claude/skills/git-changes-reporter/scripts/validate-report.js your-report.md\\n+```\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"getRequestIntervalMs\",",
              "lineStart": 176,
              "lineEnd": 180
            },
            {
              "type": "function",
              "name": "getRequestIntervalMs",
              "code": "  \"code\": \"const getRequestIntervalMs = (rateLimits: IRateLimit[] | undefined, fallbackMs: number) => {\",\n  \"lineStart\": 86,\n  \"lineEnd\": 86\n},\n{\n  \"type\": \"function\",\n  \"name\": \"intervals\",",
              "lineStart": 181,
              "lineEnd": 187
            },
            {
              "type": "function",
              "name": "intervals",
              "code": "  \"code\": \"const intervals: number[] = [];\",\n  \"lineStart\": 87,\n  \"lineEnd\": 87\n},\n{\n  \"type\": \"function\",\n  \"name\": \"item\",",
              "lineStart": 188,
              "lineEnd": 194
            },
            {
              "type": "function",
              "name": "item",
              "code": "  \"code\": \"for (const item of rateLimits ?? []) {\\n  if (item.rateLimitType !== 'REQUEST_WEIGHT' && item.rateLimitType !== 'RAW_REQUESTS') continue;\",\n  \"lineStart\": 88,\n  \"lineEnd\": 89\n},\n{\n  \"type\": \"function\",\n  \"name\": \"duration\",",
              "lineStart": 195,
              "lineEnd": 201
            },
            {
              "type": "function",
              "name": "duration",
              "code": "  \"code\": \"const duration = toIntervalMs(item.interval, item.intervalNum);\",\n  \"lineStart\": 90,\n  \"lineEnd\": 90\n},\n{\n  \"type\": \"function\",\n  \"name\": \"limit\",",
              "lineStart": 202,
              "lineEnd": 208
            },
            {
              "type": "function",
              "name": "limit",
              "code": "      \"code\": \"        const limit = item.limit;\\n        if (duration == null || limit == null || limit <= 0) continue;\\n        intervals.push(Math.ceil(duration / limit)); // ← 关键逻辑\\n      }\\n      return Math.max(fallbackMs, Math.max(...intervals));\\n    };\\n    ```\\n    该函数通过解析交易所的 `rateLimits` 配置，计算每个限速规则的最小间隔（duration/limit），\\n    然后取最大值作为安全间隔，确保不触发任何限速规则。\\n````\\n\\n---\\n\\n## 3. 设计意图仅描述\\\"做了什么\\\"\\n\",\n      \"lineStart\": 91,\n      \"lineEnd\": 291\n    }\n  ]\n},\n{\n  \"additions\": 310,\n  \"deletions\": 4,\n  \"path\": \".claude/skills/git-changes-reporter/scripts/generate-json.js\",\n  \"changeType\": \"modified\",",
              "lineStart": 209,
              "lineEnd": 219
            },
            {
              "type": "function",
              "name": "getTopDirectories",
              "code": "\"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/generate-json.js b/.claude/skills/git-changes-reporter/scripts/generate-json.js\\nindex ebe60677f..0922ee16a 100755\\n--- a/.claude/skills/git-changes-reporter/scripts/generate-json.js\\n+++ b/.claude/skills/git-changes-reporter/scripts/generate-json.js\\n@@ -105,0 +106,156 @@ const getTopDirectories = async (oldRef, newRef) => {\\n+/**\\n+ * Parse conventional commit format\\n+ * @param {string} subject - Commit subject line\\n+ * @returns {{type: string, scope: string|null, breaking: boolean}}\\n+ */\\n+const parseConventionalCommit = (subject) => {\\n+  const conventionalRegex = /^(\\\\w+)(\\\\(([^)]+)\\\\))?(!)?:\\\\s*(.+)$/;\\n+  const match = subject.match(conventionalRegex);\\n+\\n+  if (!match) {\\n+    return { type: 'other', scope: null, breaking: false };\\n+  }\\n+\\n+  return {\\n+    type: match[1], // feat, fix, refactor, etc.\\n+    scope: match[3] || null,\\n+    breaking: match[4] === '!',\\n+  };\\n+};\\n+\\n+/**\\n+ * Extract code snippets from patch\\n+ * @param {string} patch - Git patch content\\n+ * @param {string} filePath - File path for context\\n+ * @returns {Array<{type: string, name: string, code: string, lineStart: number, lineEnd: number}>}\\n+ */\\n+const extractCodeSnippets = (patch, filePath) => {\\n+  if (!patch) return [];\\n+\\n+  const snippets = [];\\n+  const lines = patch.split('\\\\n');\\n+  let currentSnippet = null;\\n+  let lineNum = 0;\\n+\\n+  for (let i = 0; i < lines.length; i++) {\\n+    const line = lines[i];\\n+\\n+    // Track line numbers from hunk headers\\n+    const hunkMatch = line.match(/^@@ -\\\\d+(?:,\\\\d+)? \\\\+(\\\\d+)(?:,\\\\d+)? @@/);\\n+    if (hunkMatch) {\\n+      lineNum = parseInt(hunkMatch[1], 10);\\n+      continue;\\n+    }\\n+\\n+    // Skip diff headers\\n+    if (\\n+      line.startsWith('diff --git') ||\\n+      line.startsWith('index ') ||\\n+      line.startsWith('---') ||\\n+      line.startsWith('+++')\\n+    ) {\\n+      continue;\\n+    }\\n+\\n+    // Look for function/class definitions in added lines\\n+    if (line.startsWith('+')) {\\n+      const content = line.substring(1);\\n+\\n+      // Match function definitions\\n+      const funcMatch = content.match(/(?:export\\\\s+)?(?:async\\\\s+)?(?:function|const|let|var)\\\\s+(\\\\w+)/);\\n+      // Match class definitions\\n+      const classMatch = content.match(/(?:export\\\\s+)?class\\\\s+(\\\\w+)/);\\n+      // Match interface definitions (TypeScript)\\n+      const interfaceMatch = content.match(/(?:export\\\\s+)?interface\\\\s+(\\\\w+)/);\\n+\\n+      if (funcMatch || classMatch || interfaceMatch) {\\n+        if (currentSnippet && currentSnippet.lines.length > 0) {\\n+          // Save previous snippet if exists\\n+          // Dedent the code by removing common leading whitespace\\n+          const dedentedCode = dedentCode(currentSnippet.lines);\\n+          snippets.push({\\n+            type: currentSnippet.type,\\n+            name: currentSnippet.name,\\n+            code: dedentedCode,\\n+            lineStart: currentSnippet.lineStart,\\n+            lineEnd: lineNum - 1,\\n+          });\\n+        }\\n+\\n+        // Start new snippet\\n+        currentSnippet = {\\n+          type: funcMatch ? 'function' : classMatch ? 'class' : 'interface',\\n+          name: (funcMatch || classMatch || interfaceMatch)[1],\\n+          lines: [content],\\n+          lineStart: lineNum,\\n+        };\\n+      } else if (currentSnippet && currentSnippet.lines.length < 15) {\\n+        // Continue collecting lines for current snippet (max 15 lines)\\n+        currentSnippet.lines.push(content);\\n+      }\\n+\\n+      lineNum++;\\n+    } else if (!line.startsWith('-')) {\\n+      lineNum++;\\n+    }\\n+  }\\n+\\n+  // Save last snippet\\n+  if (currentSnippet && currentSnippet.lines.length > 0) {\\n+    const dedentedCode = dedentCode(currentSnippet.lines);\\n+    snippets.push({\\n+      type: currentSnippet.type,\\n+      name: currentSnippet.name,\\n+      code: dedentedCode,\\n+      lineStart: currentSnippet.lineStart,\\n+      lineEnd: lineNum - 1,\\n+    });\\n+  }\\n+\\n+  return snippets;\\n+};\\n+\\n+/**\\n+ * Remove common leading whitespace from code lines\\n+ * @param {string[]} lines - Array of code lines\\n+ * @returns {string} - Dedented code\\n+ */\\n+const dedentCode = (lines) => {\\n+  if (lines.length === 0) return '';\\n+\\n+  // Find minimum indentation (excluding empty lines)\\n+  let minIndent = Infinity;\\n+  for (const line of lines) {\\n+    if (line.trim().length === 0) continue; // Skip empty lines\\n+    const indent = line.match(/^\\\\s*/)[0].length;\\n+    minIndent = Math.min(minIndent, indent);\\n+  }\\n+\\n+  // If all lines are empty or no indentation found, return as-is\\n+  if (minIndent === Infinity || minIndent === 0) {\\n+    return lines.join('\\\\n');\\n+  }\\n+\\n+  // Remove common indentation\\n+  const dedented = lines.map((line) => {\\n+    if (line.trim().length === 0) return ''; // Keep empty lines empty\\n+    return line.substring(minIndent);\\n+  });\\n+\\n+  return dedented.join('\\\\n');\\n+};\\n+\\n+/**\\n+ * Determine change type from numstat\\n+ * @param {number|null} additions\\n+ * @param {number|null} deletions\\n+ * @returns {string}\\n+ */\\n+const getChangeType = (additions, deletions) => {\\n+  if (additions === null || deletions === null) return 'binary';\\n+  if (additions > 0 && deletions === 0) return 'added';\\n+  if (additions === 0 && deletions > 0) return 'deleted';\\n+  if (additions > 0 && deletions > 0) return 'modified';\\n+  return 'renamed';\\n+};\\n+\\n@@ -147 +303,13 @@ const getCommitDetails = async (oldRef, newRef) => {\\n-        files.push({ ...stat, patch });\\n+\\n+        // Extract code snippets from patch\\n+        const codeSnippets = extractCodeSnippets(patch, stat.path);\\n+\\n+        // Determine change type\\n+        const changeType = getChangeType(stat.additions, stat.deletions);\\n+\\n+        files.push({\\n+          ...stat,\\n+          changeType,\\n+          patch,\\n+          codeSnippets,\\n+        });\\n@@ -151 +319,6 @@ const getCommitDetails = async (oldRef, newRef) => {\\n-        files.push({ ...stat, patch: null });\\n+        files.push({\\n+          ...stat,\\n+          changeType: 'unknown',\\n+          patch: null,\\n+          codeSnippets: [],\\n+        });\\n@@ -155 +328,13 @@ const getCommitDetails = async (oldRef, newRef) => {\\n-    commits.push({ hash, short, author, email, authoredAt, subject, files });\\n+    // Parse conventional commit\\n+    const conventionalCommit = parseConventionalCommit(subject);\\n+\\n+    commits.push({\\n+      hash,\\n+      short,\\n+      author,\\n+      email,\\n+      authoredAt,\\n+      subject,\\n+      conventionalCommit,\\n+      files,\\n+    });\\n@@ -160,0 +346,107 @@ const getCommitDetails = async (oldRef, newRef) => {\\n+/**\\n+ * Analyze commits to identify technical domains\\n+ * @param {Array} commits - Array of commit objects\\n+ * @returns {Array<{name: string, commits: string[], files: string[]}>}\\n+ */\\n+const analyzeDomains = (commits) => {\\n+  const domainMap = new Map();\\n+\\n+  // Domain patterns based on file paths and commit types\\n+  const patterns = {\\n+    API请求优化与限速: {\\n+      paths: /src\\\\/(public-data|api|services).*\\\\/(quote|request|client)\\\\.ts/,\\n+      types: ['feat', 'perf'],\\n+    },\\n+    错误处理与观测: { paths: /error|log|monitor|metric|observe/, types: ['fix', 'refactor'] },\\n+    安全与鉴权: { paths: /auth|credential|sign|security|token/, types: ['feat', 'fix'] },\\n+    订单与交易: { paths: /order|trade|submit|cancel|modify/, types: ['feat', 'fix'] },\\n+    账户管理: { paths: /account|balance|position|margin/, types: ['feat', 'fix'] },\\n+    市场数据: { paths: /quote|price|ohlc|ticker|depth/, types: ['feat', 'fix'] },\\n+    接口重构: { paths: /api|interface|types/, types: ['refactor'] },\\n+    配置与环境: { paths: /config|env|\\\\.json|\\\\.yaml/, types: ['chore', 'feat'] },\\n+    测试: { paths: /test|spec|__tests__/, types: ['test'] },\\n+    文档: { paths: /README|CHANGELOG|\\\\.md/, types: ['docs'] },\\n+  };\\n+\\n+  for (const commit of commits) {\\n+    for (const [domainName, pattern] of Object.entries(patterns)) {\\n+      const matchesPath = commit.files.some((file) => pattern.paths.test(file.path));\\n+      const matchesType = pattern.types.includes(commit.conventionalCommit.type);\\n+\\n+      if (matchesPath || matchesType) {\\n+        if (!domainMap.has(domainName)) {\\n+          domainMap.set(domainName, { commits: new Set(), files: new Set() });\\n+        }\\n+        domainMap.get(domainName).commits.add(commit.short);\\n+        commit.files.forEach((file) => domainMap.get(domainName).files.add(file.path));\\n+      }\\n+    }\\n+  }\\n+\\n+  return Array.from(domainMap.entries()).map(([name, data]) => ({\\n+    name,\\n+    commits: Array.from(data.commits),\\n+    files: Array.from(data.files).slice(0, 10), // Limit to 10 files per domain\\n+  }));\\n+};\\n+\\n+/**\\n+ * Identify risk indicators from commits\\n+ * @param {Array} commits - Array of commit objects\\n+ * @returns {Array<{type: string, severity: string, details: string, commits: string[]}>}\\n+ */\\n+const identifyRisks = (commits) => {\\n+  const risks = [];\\n+\\n+  // Check for breaking changes\\n+  const breakingCommits = commits.filter((c) => c.conventionalCommit.breaking);\\n+  if (breakingCommits.length > 0) {\\n+    risks.push({\\n+      type: 'breaking_change',\\n+      severity: 'high',\\n+      details: `${breakingCommits.length} 个提交标记为破坏性变更`,\\n+      commits: breakingCommits.map((c) => c.short),\\n+    });\\n+  }\\n+\\n+  // Check for large refactoring\\n+  const largeRefactors = commits.filter(\\n+    (c) => c.conventionalCommit.type === 'refactor' && c.files.some((f) => f.deletions > 100),\\n+  );\\n+  if (largeRefactors.length > 0) {\\n+    risks.push({\\n+      type: 'large_refactor',\\n+      severity: 'medium',\\n+      details: `${largeRefactors.length} 个大规模重构提交（删除超过100行）`,\\n+      commits: largeRefactors.map((c) => c.short),\\n+    });\\n+  }\\n+\\n+  // Check for missing tests\\n+  const hasTestFiles = commits.some((c) => c.files.some((f) => /test|spec|__tests__/.test(f.path)));\\n+  const hasFeatOrFix = commits.some((c) => ['feat', 'fix'].includes(c.conventionalCommit.type));\\n+  if (hasFeatOrFix && !hasTestFiles) {\\n+    risks.push({\\n+      type: 'no_tests',\\n+      severity: 'medium',\\n+      details: '包含功能或修复提交但未见测试文件更新',\\n+      commits: [],\\n+    });\\n+  }\\n+\\n+  // Check for API/interface changes\\n+  const apiChanges = commits.filter((c) =>\\n+    c.files.some((f) => /api|interface|types/.test(f.path) && f.changeType !== 'added'),\\n+  );\\n+  if (apiChanges.length > 0) {\\n+    risks.push({\\n+      type: 'api_change',\\n+      severity: 'high',\\n+      details: `${apiChanges.length} 个提交修改了API或接口定义`,\\n+      commits: apiChanges.map((c) => c.short),\\n+    });\\n+  }\\n+\\n+  return risks;\\n+};\\n+\\n@@ -214,0 +507,7 @@ const main = async () => {\\n+  // Perform global analysis\\n+  console.info('Analyzing technical domains...');\\n+  const domains = analyzeDomains(commits);\\n+\\n+  console.info('Identifying risk indicators...');\\n+  const riskIndicators = identifyRisks(commits);\\n+\\n@@ -228,0 +528,4 @@ const main = async () => {\\n+    analysis: {\\n+      domains,\\n+      riskIndicators,\\n+    },\\n@@ -231 +534 @@ const main = async () => {\\n-      version: '1.0.0',\\n+      version: '2.0.0',\\n@@ -241,0 +545,3 @@ const main = async () => {\\n+  console.info(\\n+    `🔍 Analysis: ${domains.length} domains identified, ${riskIndicators.length} risk indicators found`,\\n+  );\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"parseConventionalCommit\",",
              "lineStart": 220,
              "lineEnd": 224
            },
            {
              "type": "function",
              "name": "parseConventionalCommit",
              "code": "  \"code\": \"const parseConventionalCommit = (subject) => {\",\n  \"lineStart\": 111,\n  \"lineEnd\": 111\n},\n{\n  \"type\": \"function\",\n  \"name\": \"conventionalRegex\",",
              "lineStart": 225,
              "lineEnd": 231
            },
            {
              "type": "function",
              "name": "conventionalRegex",
              "code": "  \"code\": \"const conventionalRegex = /^(\\\\w+)(\\\\(([^)]+)\\\\))?(!)?:\\\\s*(.+)$/;\",\n  \"lineStart\": 112,\n  \"lineEnd\": 112\n},\n{\n  \"type\": \"function\",\n  \"name\": \"match\",",
              "lineStart": 232,
              "lineEnd": 238
            },
            {
              "type": "function",
              "name": "match",
              "code": "  \"code\": \"  const match = subject.match(conventionalRegex);\\n\\n  if (!match) {\\n    return { type: 'other', scope: null, breaking: false };\\n  }\\n\\n  return {\\n    type: match[1], // feat, fix, refactor, etc.\\n    scope: match[3] || null,\\n    breaking: match[4] === '!',\\n  };\\n};\\n\\n/**\\n * Extract code snippets from patch\",\n  \"lineStart\": 113,\n  \"lineEnd\": 131\n},\n{\n  \"type\": \"function\",\n  \"name\": \"extractCodeSnippets\",",
              "lineStart": 239,
              "lineEnd": 245
            },
            {
              "type": "function",
              "name": "extractCodeSnippets",
              "code": "  \"code\": \"const extractCodeSnippets = (patch, filePath) => {\\n  if (!patch) return [];\\n\",\n  \"lineStart\": 132,\n  \"lineEnd\": 134\n},\n{\n  \"type\": \"function\",\n  \"name\": \"snippets\",",
              "lineStart": 246,
              "lineEnd": 252
            },
            {
              "type": "function",
              "name": "snippets",
              "code": "  \"code\": \"const snippets = [];\",\n  \"lineStart\": 135,\n  \"lineEnd\": 135\n},\n{\n  \"type\": \"function\",\n  \"name\": \"lines\",",
              "lineStart": 253,
              "lineEnd": 259
            },
            {
              "type": "function",
              "name": "lines",
              "code": "  \"code\": \"const lines = patch.split('\\\\n');\",\n  \"lineStart\": 136,\n  \"lineEnd\": 136\n},\n{\n  \"type\": \"function\",\n  \"name\": \"currentSnippet\",",
              "lineStart": 260,
              "lineEnd": 266
            },
            {
              "type": "function",
              "name": "currentSnippet",
              "code": "  \"code\": \"let currentSnippet = null;\",\n  \"lineStart\": 137,\n  \"lineEnd\": 137\n},\n{\n  \"type\": \"function\",\n  \"name\": \"lineNum\",",
              "lineStart": 267,
              "lineEnd": 273
            },
            {
              "type": "function",
              "name": "lineNum",
              "code": "  \"code\": \"let lineNum = 0;\\n\",\n  \"lineStart\": 138,\n  \"lineEnd\": 139\n},\n{\n  \"type\": \"function\",\n  \"name\": \"i\",",
              "lineStart": 274,
              "lineEnd": 280
            },
            {
              "type": "function",
              "name": "i",
              "code": "  \"code\": \"for (let i = 0; i < lines.length; i++) {\",\n  \"lineStart\": 140,\n  \"lineEnd\": 140\n},\n{\n  \"type\": \"function\",\n  \"name\": \"line\",",
              "lineStart": 281,
              "lineEnd": 287
            },
            {
              "type": "function",
              "name": "line",
              "code": "  \"code\": \"const line = lines[i];\\n\\n// Track line numbers from hunk headers\",\n  \"lineStart\": 141,\n  \"lineEnd\": 143\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hunkMatch\",",
              "lineStart": 288,
              "lineEnd": 294
            },
            {
              "type": "function",
              "name": "hunkMatch",
              "code": "  \"code\": \"const hunkMatch = line.match(/^@@ -\\\\d+(?:,\\\\d+)? \\\\+(\\\\d+)(?:,\\\\d+)? @@/);\\nif (hunkMatch) {\\n  lineNum = parseInt(hunkMatch[1], 10);\\n  continue;\\n}\\n\\n// Skip diff headers\\nif (\\n  line.startsWith('diff --git') ||\\n  line.startsWith('index ') ||\\n  line.startsWith('---') ||\\n  line.startsWith('+++')\\n) {\\n  continue;\\n}\",\n  \"lineStart\": 144,\n  \"lineEnd\": 159\n},\n{\n  \"type\": \"class\",\n  \"name\": \"definitions\",",
              "lineStart": 295,
              "lineEnd": 301
            },
            {
              "type": "class",
              "name": "definitions",
              "code": "  \"code\": \"// Look for function/class definitions in added lines\\nif (line.startsWith('+')) {\",\n  \"lineStart\": 160,\n  \"lineEnd\": 161\n},\n{\n  \"type\": \"function\",\n  \"name\": \"content\",",
              "lineStart": 302,
              "lineEnd": 308
            },
            {
              "type": "function",
              "name": "content",
              "code": "  \"code\": \"const content = line.substring(1);\\n\",\n  \"lineStart\": 162,\n  \"lineEnd\": 163\n},\n{\n  \"type\": \"function\",\n  \"name\": \"definitions\",",
              "lineStart": 309,
              "lineEnd": 315
            },
            {
              "type": "function",
              "name": "definitions",
              "code": "  \"code\": \"// Match function definitions\",\n  \"lineStart\": 164,\n  \"lineEnd\": 164\n},\n{\n  \"type\": \"function\",\n  \"name\": \"funcMatch\",",
              "lineStart": 316,
              "lineEnd": 322
            },
            {
              "type": "function",
              "name": "funcMatch",
              "code": "  \"code\": \"const funcMatch = content.match(/(?:export\\\\s+)?(?:async\\\\s+)?(?:function|const|let|var)\\\\s+(\\\\w+)/);\",\n  \"lineStart\": 165,\n  \"lineEnd\": 165\n},\n{\n  \"type\": \"class\",\n  \"name\": \"definitions\",",
              "lineStart": 323,
              "lineEnd": 329
            },
            {
              "type": "class",
              "name": "definitions",
              "code": "  \"code\": \"// Match class definitions\",\n  \"lineStart\": 166,\n  \"lineEnd\": 166\n},\n{\n  \"type\": \"function\",\n  \"name\": \"classMatch\",",
              "lineStart": 330,
              "lineEnd": 336
            },
            {
              "type": "function",
              "name": "classMatch",
              "code": "  \"code\": \"const classMatch = content.match(/(?:export\\\\s+)?class\\\\s+(\\\\w+)/);\",\n  \"lineStart\": 167,\n  \"lineEnd\": 167\n},\n{\n  \"type\": \"interface\",\n  \"name\": \"definitions\",",
              "lineStart": 337,
              "lineEnd": 343
            },
            {
              "type": "interface",
              "name": "definitions",
              "code": "  \"code\": \"// Match interface definitions (TypeScript)\",\n  \"lineStart\": 168,\n  \"lineEnd\": 168\n},\n{\n  \"type\": \"function\",\n  \"name\": \"interfaceMatch\",",
              "lineStart": 344,
              "lineEnd": 350
            },
            {
              "type": "function",
              "name": "interfaceMatch",
              "code": "  \"code\": \"const interfaceMatch = content.match(/(?:export\\\\s+)?interface\\\\s+(\\\\w+)/);\\n\\nif (funcMatch || classMatch || interfaceMatch) {\\n  if (currentSnippet && currentSnippet.lines.length > 0) {\\n    // Save previous snippet if exists\\n    // Dedent the code by removing common leading whitespace\",\n  \"lineStart\": 169,\n  \"lineEnd\": 174\n},\n{\n  \"type\": \"function\",\n  \"name\": \"dedentedCode\",",
              "lineStart": 351,
              "lineEnd": 357
            },
            {
              "type": "function",
              "name": "dedentedCode",
              "code": "  \"code\": \"  const dedentedCode = dedentCode(currentSnippet.lines);\\n  snippets.push({\\n    type: currentSnippet.type,\\n    name: currentSnippet.name,\\n    code: dedentedCode,\\n    lineStart: currentSnippet.lineStart,\\n    lineEnd: lineNum - 1,\\n  });\\n}\\n\\n// Start new snippet\\ncurrentSnippet = {\\n  type: funcMatch ? 'function' : classMatch ? 'class' : 'interface',\\n  name: (funcMatch || classMatch || interfaceMatch)[1],\\n  lines: [content],\",\n  \"lineStart\": 175,\n  \"lineEnd\": 204\n},\n{\n  \"type\": \"function\",\n  \"name\": \"dedentedCode\",",
              "lineStart": 358,
              "lineEnd": 364
            },
            {
              "type": "function",
              "name": "dedentedCode",
              "code": "  \"code\": \"    const dedentedCode = dedentCode(currentSnippet.lines);\\n    snippets.push({\\n      type: currentSnippet.type,\\n      name: currentSnippet.name,\\n      code: dedentedCode,\\n      lineStart: currentSnippet.lineStart,\\n      lineEnd: lineNum - 1,\\n    });\\n  }\\n\\n  return snippets;\\n};\\n\\n/**\\n * Remove common leading whitespace from code lines\",\n  \"lineStart\": 205,\n  \"lineEnd\": 222\n},\n{\n  \"type\": \"function\",\n  \"name\": \"dedentCode\",",
              "lineStart": 365,
              "lineEnd": 371
            },
            {
              "type": "function",
              "name": "dedentCode",
              "code": "  \"code\": \"const dedentCode = (lines) => {\\n  if (lines.length === 0) return '';\\n\\n  // Find minimum indentation (excluding empty lines)\",\n  \"lineStart\": 223,\n  \"lineEnd\": 226\n},\n{\n  \"type\": \"function\",\n  \"name\": \"minIndent\",",
              "lineStart": 372,
              "lineEnd": 378
            },
            {
              "type": "function",
              "name": "minIndent",
              "code": "  \"code\": \"let minIndent = Infinity;\",\n  \"lineStart\": 227,\n  \"lineEnd\": 227\n},\n{\n  \"type\": \"function\",\n  \"name\": \"line\",",
              "lineStart": 379,
              "lineEnd": 385
            },
            {
              "type": "function",
              "name": "line",
              "code": "  \"code\": \"for (const line of lines) {\\n  if (line.trim().length === 0) continue; // Skip empty lines\",\n  \"lineStart\": 228,\n  \"lineEnd\": 229\n},\n{\n  \"type\": \"function\",\n  \"name\": \"indent\",",
              "lineStart": 386,
              "lineEnd": 392
            },
            {
              "type": "function",
              "name": "indent",
              "code": "  \"code\": \"  const indent = line.match(/^\\\\s*/)[0].length;\\n  minIndent = Math.min(minIndent, indent);\\n}\\n\\n// If all lines are empty or no indentation found, return as-is\\nif (minIndent === Infinity || minIndent === 0) {\\n  return lines.join('\\\\n');\\n}\\n\\n// Remove common indentation\",\n  \"lineStart\": 230,\n  \"lineEnd\": 239\n},\n{\n  \"type\": \"function\",\n  \"name\": \"dedented\",",
              "lineStart": 393,
              "lineEnd": 399
            },
            {
              "type": "function",
              "name": "dedented",
              "code": "  \"code\": \"  const dedented = lines.map((line) => {\\n    if (line.trim().length === 0) return ''; // Keep empty lines empty\\n    return line.substring(minIndent);\\n  });\\n\\n  return dedented.join('\\\\n');\\n};\\n\\n/**\\n * Determine change type from numstat\\n * @param {number|null} additions\\n * @param {number|null} deletions\\n * @returns {string}\\n */\",\n  \"lineStart\": 240,\n  \"lineEnd\": 253\n},\n{\n  \"type\": \"function\",\n  \"name\": \"getChangeType\",",
              "lineStart": 400,
              "lineEnd": 406
            },
            {
              "type": "function",
              "name": "getChangeType",
              "code": "  \"code\": \"const getChangeType = (additions, deletions) => {\\n  if (additions === null || deletions === null) return 'binary';\\n  if (additions > 0 && deletions === 0) return 'added';\\n  if (additions === 0 && deletions > 0) return 'deleted';\\n  if (additions > 0 && deletions > 0) return 'modified';\\n  return 'renamed';\\n};\\n\\n\\n        // Extract code snippets from patch\",\n  \"lineStart\": 254,\n  \"lineEnd\": 304\n},\n{\n  \"type\": \"function\",\n  \"name\": \"codeSnippets\",",
              "lineStart": 407,
              "lineEnd": 413
            },
            {
              "type": "function",
              "name": "codeSnippets",
              "code": "  \"code\": \"const codeSnippets = extractCodeSnippets(patch, stat.path);\\n\\n// Determine change type\",\n  \"lineStart\": 305,\n  \"lineEnd\": 307\n},\n{\n  \"type\": \"function\",\n  \"name\": \"changeType\",",
              "lineStart": 414,
              "lineEnd": 420
            },
            {
              "type": "function",
              "name": "changeType",
              "code": "  \"code\": \"    const changeType = getChangeType(stat.additions, stat.deletions);\\n\\n    files.push({\\n      ...stat,\\n      changeType,\\n      patch,\\n      codeSnippets,\\n    });\\n    files.push({\\n      ...stat,\\n      changeType: 'unknown',\\n      patch: null,\\n      codeSnippets: [],\\n    });\\n// Parse conventional commit\",\n  \"lineStart\": 308,\n  \"lineEnd\": 328\n},\n{\n  \"type\": \"function\",\n  \"name\": \"conventionalCommit\",",
              "lineStart": 421,
              "lineEnd": 427
            },
            {
              "type": "function",
              "name": "conventionalCommit",
              "code": "  \"code\": \"    const conventionalCommit = parseConventionalCommit(subject);\\n\\n    commits.push({\\n      hash,\\n      short,\\n      author,\\n      email,\\n      authoredAt,\\n      subject,\\n      conventionalCommit,\\n      files,\\n    });\\n/**\\n * Analyze commits to identify technical domains\\n * @param {Array} commits - Array of commit objects\",\n  \"lineStart\": 329,\n  \"lineEnd\": 350\n},\n{\n  \"type\": \"function\",\n  \"name\": \"analyzeDomains\",",
              "lineStart": 428,
              "lineEnd": 434
            },
            {
              "type": "function",
              "name": "analyzeDomains",
              "code": "  \"code\": \"const analyzeDomains = (commits) => {\",\n  \"lineStart\": 351,\n  \"lineEnd\": 351\n},\n{\n  \"type\": \"function\",\n  \"name\": \"domainMap\",",
              "lineStart": 435,
              "lineEnd": 441
            },
            {
              "type": "function",
              "name": "domainMap",
              "code": "  \"code\": \"const domainMap = new Map();\\n\\n// Domain patterns based on file paths and commit types\",\n  \"lineStart\": 352,\n  \"lineEnd\": 354\n},\n{\n  \"type\": \"function\",\n  \"name\": \"patterns\",",
              "lineStart": 442,
              "lineEnd": 448
            },
            {
              "type": "function",
              "name": "patterns",
              "code": "  \"code\": \"const patterns = {\\n  API请求优化与限速: {\\n    paths: /src\\\\/(public-data|api|services).*\\\\/(quote|request|client)\\\\.ts/,\\n    types: ['feat', 'perf'],\\n  },\\n  错误处理与观测: { paths: /error|log|monitor|metric|observe/, types: ['fix', 'refactor'] },\\n  安全与鉴权: { paths: /auth|credential|sign|security|token/, types: ['feat', 'fix'] },\\n  订单与交易: { paths: /order|trade|submit|cancel|modify/, types: ['feat', 'fix'] },\\n  账户管理: { paths: /account|balance|position|margin/, types: ['feat', 'fix'] },\\n  市场数据: { paths: /quote|price|ohlc|ticker|depth/, types: ['feat', 'fix'] },\\n  接口重构: { paths: /api|interface|types/, types: ['refactor'] },\\n  配置与环境: { paths: /config|env|\\\\.json|\\\\.yaml/, types: ['chore', 'feat'] },\\n  测试: { paths: /test|spec|__tests__/, types: ['test'] },\\n  文档: { paths: /README|CHANGELOG|\\\\.md/, types: ['docs'] },\\n};\",\n  \"lineStart\": 355,\n  \"lineEnd\": 370\n},\n{\n  \"type\": \"function\",\n  \"name\": \"commit\",",
              "lineStart": 449,
              "lineEnd": 455
            },
            {
              "type": "function",
              "name": "commit",
              "code": "  \"code\": \"for (const commit of commits) {\\n  for (const [domainName, pattern] of Object.entries(patterns)) {\",\n  \"lineStart\": 371,\n  \"lineEnd\": 372\n},\n{\n  \"type\": \"function\",\n  \"name\": \"matchesPath\",",
              "lineStart": 456,
              "lineEnd": 462
            },
            {
              "type": "function",
              "name": "matchesPath",
              "code": "  \"code\": \"const matchesPath = commit.files.some((file) => pattern.paths.test(file.path));\",\n  \"lineStart\": 373,\n  \"lineEnd\": 373\n},\n{\n  \"type\": \"function\",\n  \"name\": \"matchesType\",",
              "lineStart": 463,
              "lineEnd": 469
            },
            {
              "type": "function",
              "name": "matchesType",
              "code": "  \"code\": \"    const matchesType = pattern.types.includes(commit.conventionalCommit.type);\\n\\n    if (matchesPath || matchesType) {\\n      if (!domainMap.has(domainName)) {\\n        domainMap.set(domainName, { commits: new Set(), files: new Set() });\\n      }\\n      domainMap.get(domainName).commits.add(commit.short);\\n      commit.files.forEach((file) => domainMap.get(domainName).files.add(file.path));\\n    }\\n  }\\n}\\n\\nreturn Array.from(domainMap.entries()).map(([name, data]) => ({\\n  name,\\n  commits: Array.from(data.commits),\",\n  \"lineStart\": 374,\n  \"lineEnd\": 397\n},\n{\n  \"type\": \"function\",\n  \"name\": \"identifyRisks\",",
              "lineStart": 470,
              "lineEnd": 476
            },
            {
              "type": "function",
              "name": "identifyRisks",
              "code": "  \"code\": \"const identifyRisks = (commits) => {\",\n  \"lineStart\": 398,\n  \"lineEnd\": 398\n},\n{\n  \"type\": \"function\",\n  \"name\": \"risks\",",
              "lineStart": 477,
              "lineEnd": 483
            },
            {
              "type": "function",
              "name": "risks",
              "code": "  \"code\": \"const risks = [];\\n\\n// Check for breaking changes\",\n  \"lineStart\": 399,\n  \"lineEnd\": 401\n},\n{\n  \"type\": \"function\",\n  \"name\": \"breakingCommits\",",
              "lineStart": 484,
              "lineEnd": 490
            },
            {
              "type": "function",
              "name": "breakingCommits",
              "code": "  \"code\": \"const breakingCommits = commits.filter((c) => c.conventionalCommit.breaking);\\nif (breakingCommits.length > 0) {\\n  risks.push({\\n    type: 'breaking_change',\\n    severity: 'high',\\n    details: `${breakingCommits.length} 个提交标记为破坏性变更`,\\n    commits: breakingCommits.map((c) => c.short),\\n  });\\n}\\n\\n// Check for large refactoring\",\n  \"lineStart\": 402,\n  \"lineEnd\": 412\n},\n{\n  \"type\": \"function\",\n  \"name\": \"largeRefactors\",",
              "lineStart": 491,
              "lineEnd": 497
            },
            {
              "type": "function",
              "name": "largeRefactors",
              "code": "  \"code\": \"const largeRefactors = commits.filter(\\n  (c) => c.conventionalCommit.type === 'refactor' && c.files.some((f) => f.deletions > 100),\\n);\\nif (largeRefactors.length > 0) {\\n  risks.push({\\n    type: 'large_refactor',\\n    severity: 'medium',\\n    details: `${largeRefactors.length} 个大规模重构提交（删除超过100行）`,\\n    commits: largeRefactors.map((c) => c.short),\\n  });\\n}\\n\\n// Check for missing tests\",\n  \"lineStart\": 413,\n  \"lineEnd\": 425\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasTestFiles\",",
              "lineStart": 498,
              "lineEnd": 504
            },
            {
              "type": "function",
              "name": "hasTestFiles",
              "code": "  \"code\": \"const hasTestFiles = commits.some((c) => c.files.some((f) => /test|spec|__tests__/.test(f.path)));\",\n  \"lineStart\": 426,\n  \"lineEnd\": 426\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasFeatOrFix\",",
              "lineStart": 505,
              "lineEnd": 511
            },
            {
              "type": "function",
              "name": "hasFeatOrFix",
              "code": "  \"code\": \"const hasFeatOrFix = commits.some((c) => ['feat', 'fix'].includes(c.conventionalCommit.type));\\nif (hasFeatOrFix && !hasTestFiles) {\\n  risks.push({\\n    type: 'no_tests',\\n    severity: 'medium',\\n    details: '包含功能或修复提交但未见测试文件更新',\\n    commits: [],\\n  });\\n}\\n\",\n  \"lineStart\": 427,\n  \"lineEnd\": 436\n},\n{\n  \"type\": \"interface\",\n  \"name\": \"changes\",",
              "lineStart": 512,
              "lineEnd": 518
            },
            {
              "type": "interface",
              "name": "changes",
              "code": "  \"code\": \"// Check for API/interface changes\",\n  \"lineStart\": 437,\n  \"lineEnd\": 437\n},\n{\n  \"type\": \"function\",\n  \"name\": \"apiChanges\",",
              "lineStart": 519,
              "lineEnd": 525
            },
            {
              "type": "function",
              "name": "apiChanges",
              "code": "  \"code\": \"  const apiChanges = commits.filter((c) =>\\n    c.files.some((f) => /api|interface|types/.test(f.path) && f.changeType !== 'added'),\\n  );\\n  if (apiChanges.length > 0) {\\n    risks.push({\\n      type: 'api_change',\\n      severity: 'high',\\n      details: `${apiChanges.length} 个提交修改了API或接口定义`,\\n      commits: apiChanges.map((c) => c.short),\\n    });\\n  }\\n\\n  return risks;\\n};\\n\",\n  \"lineStart\": 438,\n  \"lineEnd\": 508\n},\n{\n  \"type\": \"function\",\n  \"name\": \"domains\",",
              "lineStart": 526,
              "lineEnd": 532
            },
            {
              "type": "function",
              "name": "domains",
              "code": "  \"code\": \"const domains = analyzeDomains(commits);\\n\\nconsole.info('Identifying risk indicators...');\",\n  \"lineStart\": 509,\n  \"lineEnd\": 511\n},\n{\n  \"type\": \"function\",\n  \"name\": \"riskIndicators\",",
              "lineStart": 533,
              "lineEnd": 539
            },
            {
              "type": "function",
              "name": "riskIndicators",
              "code": "      \"code\": \"const riskIndicators = identifyRisks(commits);\\n\\n  analysis: {\\n    domains,\\n    riskIndicators,\\n  },\\n    version: '2.0.0',\\nconsole.info(\\n  `🔍 Analysis: ${domains.length} domains identified, ${riskIndicators.length} risk indicators found`,\\n);\",\n      \"lineStart\": 512,\n      \"lineEnd\": 548\n    }\n  ]\n},\n{\n  \"additions\": 518,\n  \"deletions\": 0,\n  \"path\": \".claude/skills/git-changes-reporter/scripts/validate-report.js\",\n  \"changeType\": \"added\",",
              "lineStart": 540,
              "lineEnd": 550
            },
            {
              "type": "function",
              "name": "usage",
              "code": "\"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/validate-report.js b/.claude/skills/git-changes-reporter/scripts/validate-report.js\\nnew file mode 100755\\nindex 000000000..8de8c535d\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/scripts/validate-report.js\\n@@ -0,0 +1,518 @@\\n+#!/usr/bin/env node\\n+/* eslint-disable no-console */\\n+import { readFile } from 'node:fs/promises';\\n+\\n+const usage = () => {\\n+  console.error(\\n+    [\\n+      'Usage: validate-report.js <markdown_file>',\\n+      '',\\n+      'Validate Markdown report quality against skill requirements.',\\n+      '',\\n+      'Based on:',\\n+      '  - references/report-template.md',\\n+      '  - references/bad-examples.md',\\n+      '',\\n+      'Arguments:',\\n+      '  <markdown_file>  Path to Markdown report file',\\n+      '',\\n+      'Exit codes:',\\n+      '  0  - Report passes all checks',\\n+      '  1  - Report has issues',\\n+      '',\\n+      'Examples:',\\n+      '  validate-report.js docs/reports/git-changes-2025-12-05.md',\\n+    ].join('\\\\n'),\\n+  );\\n+};\\n+\\n+/**\\n+ * Check result structure\\n+ */\\n+class CheckResult {\\n+  constructor() {\\n+    this.passed = [];\\n+    this.failed = [];\\n+    this.warnings = [];\\n+  }\\n+\\n+  pass(message) {\\n+    this.passed.push(message);\\n+  }\\n+\\n+  fail(message) {\\n+    this.failed.push(message);\\n+  }\\n+\\n+  warn(message) {\\n+    this.warnings.push(message);\\n+  }\\n+\\n+  hasFailures() {\\n+    return this.failed.length > 0;\\n+  }\\n+\\n+  print() {\\n+    if (this.passed.length > 0) {\\n+      console.info('\\\\n✅ Passed checks:');\\n+      this.passed.forEach((msg) => console.info(`   ${msg}`));\\n+    }\\n+\\n+    if (this.warnings.length > 0) {\\n+      console.info('\\\\n⚠️  Warnings:');\\n+      this.warnings.forEach((msg) => console.warn(`   ${msg}`));\\n+    }\\n+\\n+    if (this.failed.length > 0) {\\n+      console.info('\\\\n❌ Failed checks:');\\n+      this.failed.forEach((msg) => console.error(`   ${msg}`));\\n+    }\\n+\\n+    console.info(\\n+      `\\\\n📊 Summary: ${this.passed.length} passed, ${this.warnings.length} warnings, ${this.failed.length} failed`,\\n+    );\\n+  }\\n+}\\n+\\n+/**\\n+ * Check for required sections\\n+ * Based on report-template.md structure\\n+ */\\n+const checkRequiredSections = (content, result) => {\\n+  const requiredSections = [\\n+    { pattern: /^## 1\\\\. 概览/m, name: '概览' },\\n+    { pattern: /^## 2\\\\. (核心变更|改动聚焦领域)/m, name: '核心变更/改动聚焦领域' },\\n+    { pattern: /^## 3\\\\. (贡献者|贡献者分析)/m, name: '贡献者分析' },\\n+    { pattern: /^## 4\\\\. (风险评估|技术影响与风险)/m, name: '风险评估' },\\n+  ];\\n+\\n+  requiredSections.forEach((section) => {\\n+    if (section.pattern.test(content)) {\\n+      result.pass(`包含\\\"${section.name}\\\"章节`);\\n+    } else {\\n+      result.fail(`缺少\\\"${section.name}\\\"章节`);\\n+    }\\n+  });\\n+\\n+  // Optional section: 单提交摘要\\n+  if (/^## 5\\\\. 单提交摘要/m.test(content)) {\\n+    result.pass('包含\\\"单提交摘要\\\"章节（可选）');\\n+  }\\n+};\\n+\\n+/**\\n+ * Check overview section content\\n+ */\\n+const checkOverview = (content, result) => {\\n+  const overviewSection = content.match(/## 1\\\\. 概览\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n## |$)/);\\n+\\n+  if (!overviewSection) {\\n+    return;\\n+  }\\n+\\n+  const section = overviewSection[1];\\n+\\n+  // Check for key overview fields based on template\\n+  const checks = [\\n+    { pattern: /时间范围/, name: '时间范围' },\\n+    { pattern: /提交数量/, name: '提交数量' },\\n+    { pattern: /(主要)?贡献者/, name: '贡献者' },\\n+    { pattern: /热点目录/, name: '热点目录' },\\n+  ];\\n+\\n+  const missing = checks.filter((c) => !c.pattern.test(section));\\n+\\n+  if (missing.length === 0) {\\n+    result.pass('概览包含所有必需字段（时间范围、提交数量、贡献者、热点目录）');\\n+  } else {\\n+    missing.forEach((c) => result.warn(`概览缺少\\\"${c.name}\\\"`));\\n+  }\\n+};\\n+\\n+/**\\n+ * Check for code snippets in domain/change sections\\n+ * Bad example: 只说\\\"新增函数\\\"没有代码\\n+ */\\n+const checkCodeSnippets = (content, result) => {\\n+  const codeBlocks = content.match(/```[\\\\s\\\\S]*?```/g) || [];\\n+  const domainSections = content.match(/### 2\\\\.\\\\d+ .+?\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n### 2\\\\.\\\\d|\\\\n## |$)/g) || [];\\n+\\n+  if (codeBlocks.length > 0) {\\n+    result.pass(`包含 ${codeBlocks.length} 个代码片段`);\\n+\\n+    // Check if code blocks have language annotation\\n+    const annotatedBlocks = codeBlocks.filter((block) => /^```\\\\w+/m.test(block));\\n+    if (annotatedBlocks.length === codeBlocks.length) {\\n+      result.pass('所有代码片段都有语言标注');\\n+    } else {\\n+      result.warn(\\n+        `${codeBlocks.length - annotatedBlocks.length} 个代码片段缺少语言标注（应使用 \\\\`\\\\`\\\\`typescript 等）`,\\n+      );\\n+    }\\n+  } else {\\n+    result.fail('未找到代码片段 - 每个技术领域应包含 5-15 行核心代码');\\n+  }\\n+\\n+  // Check if each domain section has at least one code snippet or file reference\\n+  let missingSnippets = 0;\\n+  domainSections.forEach((section, index) => {\\n+    const hasCodeBlock = /```[\\\\s\\\\S]*?```/.test(section);\\n+    const hasFileReference = /\\\\[.*?:L\\\\d+.*?\\\\]\\\\(.*?#L\\\\d+.*?\\\\)/.test(section);\\n+\\n+    if (!hasCodeBlock && !hasFileReference) {\\n+      missingSnippets++;\\n+      result.fail(`领域 2.${index + 1} 缺少代码片段或文件引用`);\\n+    }\\n+  });\\n+\\n+  if (missingSnippets === 0 && domainSections.length > 0) {\\n+    result.pass(`所有 ${domainSections.length} 个领域都有代码片段或文件引用`);\\n+  }\\n+};\\n+\\n+/**\\n+ * Check for TODO markers - report should not contain any\\n+ */\\n+const checkTodoMarkers = (content, result) => {\\n+  const todos = content.match(/<!-- TODO.*?-->/g) || [];\\n+\\n+  if (todos.length === 0) {\\n+    result.pass('无未完成的 TODO 标记');\\n+  } else {\\n+    result.fail(`发现 ${todos.length} 个未完成的 TODO 标记`);\\n+    todos.slice(0, 3).forEach((todo) => {\\n+      result.fail(`  ${todo.substring(0, 60)}...`);\\n+    });\\n+    if (todos.length > 3) {\\n+      result.fail(`  ...以及 ${todos.length - 3} 个其他 TODO`);\\n+    }\\n+  }\\n+};\\n+\\n+/**\\n+ * Check for file references with line numbers\\n+ * Bad example: 只说 `quote.ts` 没有行号\\n+ * Good example: [quote.ts:L65-L78](apps/.../quote.ts#L65-L78)\\n+ */\\n+const checkFileReferences = (content, result) => {\\n+  // Correct format: [name:L1-L10](path#L1-L10)\\n+  const correctRefs = content.match(/\\\\[[^\\\\]]*:L\\\\d+[^\\\\]]*\\\\]\\\\([^)]+#L\\\\d+[^)]*\\\\)/g) || [];\\n+\\n+  // Incorrect format: just path without line numbers in markdown link\\n+  const incorrectRefs = content.match(/\\\\[[^\\\\]]+\\\\.ts\\\\]\\\\([^)]+\\\\)/g) || [];\\n+  const incorrectWithoutLines = incorrectRefs.filter((ref) => !/#L\\\\d+/.test(ref));\\n+\\n+  if (correctRefs.length > 0) {\\n+    result.pass(`包含 ${correctRefs.length} 个正确格式的文件引用（含行号链接）`);\\n+  } else {\\n+    result.warn('未找到带行号的文件引用 - 应使用 [file:L1-L10](path#L1-L10) 格式');\\n+  }\\n+\\n+  if (incorrectWithoutLines.length > 0) {\\n+    result.warn(`发现 ${incorrectWithoutLines.length} 个缺少行号的文件引用 - 应添加行号如 #L42-L58`);\\n+  }\\n+};\\n+\\n+/**\\n+ * Check commit hash format\\n+ * Bad example: `1279`, `703` (JSON line numbers)\\n+ * Good example: `b285cde59` (7+ hex chars)\\n+ */\\n+const checkCommitHashFormat = (content, result) => {\\n+  // Look for potential line numbers used as commit IDs (common mistake)\\n+  // Pattern: backtick + 3-4 digits + backtick, not part of a larger number\\n+  const lineNumbers = content.match(/`\\\\d{3,4}`(?!\\\\d)/g) || [];\\n+\\n+  if (lineNumbers.length > 0) {\\n+    result.fail(\\n+      `发现可疑的数字引用 ${lineNumbers.slice(0, 5).join(', ')} - 可能错误使用了 JSON 行号作为 commit ID`,\\n+    );\\n+    result.fail('  正确的 commit ID 应该是 7+ 位十六进制字符，如 `b285cde59`');\\n+  }\\n+\\n+  // Check for proper commit hash format (7+ hex characters)\\n+  const commitHashes = content.match(/`[0-9a-f]{7,}`/g) || [];\\n+\\n+  if (commitHashes.length > 0) {\\n+    result.pass(`包含 ${commitHashes.length} 个正确格式的 commit 哈希引用`);\\n+  } else {\\n+    result.warn('未找到 commit 哈希引用 - 应使用 `短哈希` 格式');\\n+  }\\n+};\\n+\\n+/**\\n+ * Check contributor table format\\n+ * Required columns: 作者、提交数、主要领域、关键提交\\n+ */\\n+const checkContributorTable = (content, result) => {\\n+  const tableMatch = content.match(/## 3\\\\. (贡献者|贡献者分析)\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n## |$)/);\\n+\\n+  if (!tableMatch) {\\n+    result.fail('缺少贡献者表格');\\n+    return;\\n+  }\\n+\\n+  const section = tableMatch[2];\\n+  const hasTable = /\\\\|.*\\\\|.*\\\\|/.test(section);\\n+\\n+  if (!hasTable) {\\n+    result.fail('贡献者章节缺少表格');\\n+    return;\\n+  }\\n+\\n+  // Check required columns\\n+  const headerLine = section.match(/\\\\|[^|]+\\\\|[^|]+\\\\|[^|]+\\\\|[^|]*\\\\|?/);\\n+  if (!headerLine) {\\n+    result.fail('贡献者表格格式不正确');\\n+    return;\\n+  }\\n+\\n+  const header = headerLine[0].toLowerCase();\\n+  const hasAuthor = /作者/.test(header);\\n+  const hasCommitCount = /提交数/.test(header);\\n+  const hasDomain = /(领域|工作|贡献)/.test(header);\\n+  const hasKeyCommit = /(关键提交|提交)/.test(header);\\n+\\n+  if (hasAuthor && hasCommitCount && hasDomain && hasKeyCommit) {\\n+    result.pass('贡献者表格包含所有必需列（作者、提交数、主要领域、关键提交）');\\n+  } else {\\n+    if (!hasAuthor) result.warn('贡献者表格缺少\\\"作者\\\"列');\\n+    if (!hasCommitCount) result.warn('贡献者表格缺少\\\"提交数\\\"列');\\n+    if (!hasDomain) result.warn('贡献者表格缺少\\\"主要领域\\\"列');\\n+    if (!hasKeyCommit) result.fail('贡献者表格缺少\\\"关键提交\\\"列');\\n+  }\\n+\\n+  // Check if table has data rows\\n+  const rows = section.split('\\\\n').filter((line) => /^\\\\|[^-]/.test(line));\\n+  const dataRows = rows.length - 1; // Subtract header row\\n+\\n+  if (dataRows > 0) {\\n+    result.pass(`贡献者表格包含 ${dataRows} 行数据`);\\n+  } else {\\n+    result.fail('贡献者表格无数据');\\n+  }\\n+\\n+  // Check if key commits use proper hash format\\n+  const keyCommitCells = section.match(/\\\\|\\\\s*`[^`]+`\\\\s*\\\\|?\\\\s*$/gm) || [];\\n+  const validHashes = keyCommitCells.filter((cell) => /`[0-9a-f]{7,}`/.test(cell));\\n+\\n+  if (keyCommitCells.length > 0 && validHashes.length === keyCommitCells.length) {\\n+    result.pass('关键提交列使用正确的 commit 哈希格式');\\n+  } else if (keyCommitCells.length > 0) {\\n+    result.warn('关键提交列中部分提交可能未使用正确的哈希格式');\\n+  }\\n+};\\n+\\n+/**\\n+ * Check for design intent explanations\\n+ * Bad example: \\\"添加了 getRequestIntervalMs 函数\\\" (只说做了什么)\\n+ * Good example: 解释为什么需要、解决什么问题、方案选择理由 (至少50字)\\n+ */\\n+const checkDesignIntent = (content, result) => {\\n+  const domainSections = content.match(/### 2\\\\.\\\\d+ .+?\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n### 2\\\\.\\\\d|\\\\n## |$)/g) || [];\\n+\\n+  if (domainSections.length === 0) {\\n+    result.warn('未找到领域/变更章节');\\n+    return;\\n+  }\\n+\\n+  let hasIntent = 0;\\n+  let missingIntent = 0;\\n+  let tooShort = 0;\\n+\\n+  domainSections.forEach((section) => {\\n+    // Check if design intent is present\\n+    const intentMatch = section.match(/\\\\*\\\\*设计意图\\\\*\\\\*[：:]\\\\s*\\\\n?([\\\\s\\\\S]*?)(?=\\\\n\\\\*\\\\*|\\\\n###|\\\\n##|$)/);\\n+\\n+    if (!intentMatch) {\\n+      missingIntent++;\\n+      return;\\n+    }\\n+\\n+    const intentContent = intentMatch[1].trim();\\n+\\n+    // Check minimum length (50 chars for meaningful explanation)\\n+    if (intentContent.length < 50) {\\n+      tooShort++;\\n+    } else {\\n+      hasIntent++;\\n+    }\\n+  });\\n+\\n+  if (missingIntent === 0 && tooShort === 0) {\\n+    result.pass(`所有 ${hasIntent} 个领域都包含充分的设计意图说明（≥50字）`);\\n+  } else {\\n+    if (missingIntent > 0) {\\n+      result.fail(`${missingIntent} 个领域缺少\\\"设计意图\\\"字段`);\\n+    }\\n+    if (tooShort > 0) {\\n+      result.fail(`${tooShort} 个领域的设计意图过短（应至少 50 字，解释\\\"为什么\\\"而非\\\"做了什么\\\"）`);\\n+    }\\n+  }\\n+};\\n+\\n+/**\\n+ * Check risk assessment section\\n+ * Bad example: \\\"API 有变更，调用方需要注意\\\" (过于笼统)\\n+ * Good example: 列出具体受影响的模块/服务、风险级别、迁移要求\\n+ */\\n+const checkRiskAssessment = (content, result) => {\\n+  const riskSection = content.match(/## 4\\\\. (风险评估|技术影响与风险)\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n## |$)/);\\n+\\n+  if (!riskSection) {\\n+    result.fail('缺少风险评估章节');\\n+    return;\\n+  }\\n+\\n+  const section = riskSection[2];\\n+\\n+  // Check for subsections\\n+  const requiredSubsections = [\\n+    { pattern: /### 兼容性影响/, name: '兼容性影响' },\\n+    { pattern: /### 配置变更/, name: '配置变更' },\\n+    { pattern: /### 性能影响/, name: '性能影响' },\\n+    { pattern: /### 测试覆盖/, name: '测试覆盖' },\\n+  ];\\n+\\n+  const missing = requiredSubsections.filter((s) => !s.pattern.test(section));\\n+\\n+  if (missing.length === 0) {\\n+    result.pass('风险评估包含所有必需的子章节');\\n+  } else {\\n+    missing.forEach((s) => result.fail(`风险评估缺少\\\"${s.name}\\\"小节`));\\n+  }\\n+\\n+  // Check if subsections have substantial content (not just placeholders)\\n+  requiredSubsections.forEach((sub) => {\\n+    const subMatch = section.match(\\n+      new RegExp(`${sub.pattern.source}\\\\\\\\n\\\\\\\\n?([\\\\\\\\s\\\\\\\\S]*?)(?=\\\\\\\\n### |\\\\\\\\n## |$)`),\\n+    );\\n+\\n+    if (subMatch) {\\n+      const subContent = subMatch[1].trim();\\n+\\n+      // Check for TODO markers\\n+      if (/<!-- TODO/.test(subContent)) {\\n+        result.warn(`\\\"${sub.name}\\\"小节包含未完成的 TODO 标记`);\\n+        return;\\n+      }\\n+\\n+      // Check minimum content length\\n+      if (subContent.length < 20) {\\n+        result.warn(`\\\"${sub.name}\\\"小节内容过短`);\\n+      } else {\\n+        // Check for specificity (mentions specific modules/services)\\n+        const hasSpecificContent =\\n+          /`[^`]+`/.test(subContent) || // Has code references\\n+          /apps\\\\/|libraries\\\\/|services\\\\//.test(subContent) || // Has paths\\n+          /(高风险|中风险|低风险)/.test(subContent); // Has risk levels\\n+\\n+        if (hasSpecificContent) {\\n+          result.pass(`\\\"${sub.name}\\\"小节包含具体内容`);\\n+        } else {\\n+          result.warn(`\\\"${sub.name}\\\"小节可能过于笼统 - 建议列出具体受影响的模块/服务`);\\n+        }\\n+      }\\n+    }\\n+  });\\n+};\\n+\\n+/**\\n+ * Check commit summaries section (optional but thorough if present)\\n+ */\\n+const checkCommitSummaries = (content, result) => {\\n+  const summarySection = content.match(/## 5\\\\. 单提交摘要.*?\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n---\\\\n|$)/);\\n+\\n+  if (!summarySection) {\\n+    return; // Optional section\\n+  }\\n+\\n+  const section = summarySection[1];\\n+  const commits = section.match(/### [`']?[0-9a-f]{7,}[`']?/gi) || [];\\n+\\n+  if (commits.length > 0) {\\n+    result.pass(`单提交摘要包含 ${commits.length} 个提交详情`);\\n+  } else {\\n+    result.warn('单提交摘要章节无有效内容');\\n+    return;\\n+  }\\n+\\n+  // Check if summaries have required fields\\n+  const summaries = section.split(/### [`']?[0-9a-f]{7,}/i).slice(1);\\n+  let completeCount = 0;\\n+\\n+  summaries.forEach((summary) => {\\n+    const hasSubject = /\\\\*\\\\*主题\\\\*\\\\*/.test(summary);\\n+    const hasChanges = /\\\\*\\\\*变更要点\\\\*\\\\*/.test(summary);\\n+\\n+    if (hasSubject && hasChanges) {\\n+      completeCount++;\\n+    }\\n+  });\\n+\\n+  if (completeCount === summaries.length) {\\n+    result.pass('所有单提交摘要包含必需字段（主题、变更要点）');\\n+  } else {\\n+    result.warn(`${summaries.length - completeCount} 个单提交摘要缺少必需字段`);\\n+  }\\n+};\\n+\\n+/**\\n+ * Main function\\n+ */\\n+const main = async () => {\\n+  const markdownFile = process.argv[2];\\n+\\n+  if (!markdownFile) {\\n+    usage();\\n+    process.exit(1);\\n+  }\\n+\\n+  console.info(`Validating report: ${markdownFile}`);\\n+  console.info('='.repeat(60));\\n+\\n+  // Read file\\n+  let content;\\n+  try {\\n+    content = await readFile(markdownFile, 'utf8');\\n+  } catch (error) {\\n+    console.error(`❌ Error reading file: ${error.message}`);\\n+    process.exit(1);\\n+  }\\n+\\n+  const result = new CheckResult();\\n+\\n+  // Run all checks\\n+  checkRequiredSections(content, result);\\n+  checkOverview(content, result);\\n+  checkCodeSnippets(content, result);\\n+  checkTodoMarkers(content, result);\\n+  checkFileReferences(content, result);\\n+  checkCommitHashFormat(content, result);\\n+  checkContributorTable(content, result);\\n+  checkDesignIntent(content, result);\\n+  checkRiskAssessment(content, result);\\n+  checkCommitSummaries(content, result);\\n+\\n+  // Print results\\n+  result.print();\\n+\\n+  // Exit with appropriate code\\n+  if (result.hasFailures()) {\\n+    console.info('\\\\n💡 Tip: 参考以下文件改进报告：');\\n+    console.info('   - references/report-template.md（正确格式）');\\n+    console.info('   - references/bad-examples.md（常见错误）');\\n+    process.exit(1);\\n+  } else if (result.warnings.length > 0) {\\n+    console.info('\\\\n✨ 报告通过基本检查，但有一些建议可以改进质量');\\n+    process.exit(0);\\n+  } else {\\n+    console.info('\\\\n🎉 报告通过所有质量检查！');\\n+    process.exit(0);\\n+  }\\n+};\\n+\\n+main().catch((err) => {\\n+  console.error('❌ Error:', err?.stack || err?.message || err);\\n+  process.exit(1);\\n+});\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"usage\",",
              "lineStart": 551,
              "lineEnd": 555
            },
            {
              "type": "function",
              "name": "usage",
              "code": "  \"code\": \"const usage = () => {\\n  console.error(\\n    [\\n      'Usage: validate-report.js <markdown_file>',\\n      '',\\n      'Validate Markdown report quality against skill requirements.',\\n      '',\\n      'Based on:',\\n      '  - references/report-template.md',\\n      '  - references/bad-examples.md',\\n      '',\\n      'Arguments:',\\n      '  <markdown_file>  Path to Markdown report file',\\n      '',\\n      'Exit codes:',\",\n  \"lineStart\": 5,\n  \"lineEnd\": 31\n},\n{\n  \"type\": \"class\",\n  \"name\": \"CheckResult\",",
              "lineStart": 556,
              "lineEnd": 562
            },
            {
              "type": "class",
              "name": "CheckResult",
              "code": "  \"code\": \"class CheckResult {\\n  constructor() {\\n    this.passed = [];\\n    this.failed = [];\\n    this.warnings = [];\\n  }\\n\\n  pass(message) {\\n    this.passed.push(message);\\n  }\\n\\n  fail(message) {\\n    this.failed.push(message);\\n  }\\n\",\n  \"lineStart\": 32,\n  \"lineEnd\": 80\n},\n{\n  \"type\": \"function\",\n  \"name\": \"checkRequiredSections\",",
              "lineStart": 563,
              "lineEnd": 569
            },
            {
              "type": "function",
              "name": "checkRequiredSections",
              "code": "  \"code\": \"const checkRequiredSections = (content, result) => {\",\n  \"lineStart\": 81,\n  \"lineEnd\": 81\n},\n{\n  \"type\": \"function\",\n  \"name\": \"requiredSections\",",
              "lineStart": 570,
              "lineEnd": 576
            },
            {
              "type": "function",
              "name": "requiredSections",
              "code": "  \"code\": \"const requiredSections = [\\n  { pattern: /^## 1\\\\. 概览/m, name: '概览' },\\n  { pattern: /^## 2\\\\. (核心变更|改动聚焦领域)/m, name: '核心变更/改动聚焦领域' },\\n  { pattern: /^## 3\\\\. (贡献者|贡献者分析)/m, name: '贡献者分析' },\\n  { pattern: /^## 4\\\\. (风险评估|技术影响与风险)/m, name: '风险评估' },\\n];\\n\\nrequiredSections.forEach((section) => {\\n  if (section.pattern.test(content)) {\\n    result.pass(`包含\\\"${section.name}\\\"章节`);\\n  } else {\\n    result.fail(`缺少\\\"${section.name}\\\"章节`);\\n  }\\n});\\n\",\n  \"lineStart\": 82,\n  \"lineEnd\": 105\n},\n{\n  \"type\": \"function\",\n  \"name\": \"checkOverview\",",
              "lineStart": 577,
              "lineEnd": 583
            },
            {
              "type": "function",
              "name": "checkOverview",
              "code": "  \"code\": \"const checkOverview = (content, result) => {\",\n  \"lineStart\": 106,\n  \"lineEnd\": 106\n},\n{\n  \"type\": \"function\",\n  \"name\": \"overviewSection\",",
              "lineStart": 584,
              "lineEnd": 590
            },
            {
              "type": "function",
              "name": "overviewSection",
              "code": "  \"code\": \"const overviewSection = content.match(/## 1\\\\. 概览\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n## |$)/);\\n\\nif (!overviewSection) {\\n  return;\\n}\\n\",\n  \"lineStart\": 107,\n  \"lineEnd\": 112\n},\n{\n  \"type\": \"function\",\n  \"name\": \"section\",",
              "lineStart": 591,
              "lineEnd": 597
            },
            {
              "type": "function",
              "name": "section",
              "code": "  \"code\": \"const section = overviewSection[1];\\n\\n// Check for key overview fields based on template\",\n  \"lineStart\": 113,\n  \"lineEnd\": 115\n},\n{\n  \"type\": \"function\",\n  \"name\": \"checks\",",
              "lineStart": 598,
              "lineEnd": 604
            },
            {
              "type": "function",
              "name": "checks",
              "code": "  \"code\": \"const checks = [\\n  { pattern: /时间范围/, name: '时间范围' },\\n  { pattern: /提交数量/, name: '提交数量' },\\n  { pattern: /(主要)?贡献者/, name: '贡献者' },\\n  { pattern: /热点目录/, name: '热点目录' },\\n];\\n\",\n  \"lineStart\": 116,\n  \"lineEnd\": 122\n},\n{\n  \"type\": \"function\",\n  \"name\": \"missing\",",
              "lineStart": 605,
              "lineEnd": 611
            },
            {
              "type": "function",
              "name": "missing",
              "code": "  \"code\": \"  const missing = checks.filter((c) => !c.pattern.test(section));\\n\\n  if (missing.length === 0) {\\n    result.pass('概览包含所有必需字段（时间范围、提交数量、贡献者、热点目录）');\\n  } else {\\n    missing.forEach((c) => result.warn(`概览缺少\\\"${c.name}\\\"`));\\n  }\\n};\\n\\n/**\\n * Check for code snippets in domain/change sections\\n * Bad example: 只说\\\"新增函数\\\"没有代码\\n */\",\n  \"lineStart\": 123,\n  \"lineEnd\": 135\n},\n{\n  \"type\": \"function\",\n  \"name\": \"checkCodeSnippets\",",
              "lineStart": 612,
              "lineEnd": 618
            },
            {
              "type": "function",
              "name": "checkCodeSnippets",
              "code": "  \"code\": \"const checkCodeSnippets = (content, result) => {\",\n  \"lineStart\": 136,\n  \"lineEnd\": 136\n},\n{\n  \"type\": \"function\",\n  \"name\": \"codeBlocks\",",
              "lineStart": 619,
              "lineEnd": 625
            },
            {
              "type": "function",
              "name": "codeBlocks",
              "code": "  \"code\": \"const codeBlocks = content.match(/```[\\\\s\\\\S]*?```/g) || [];\",\n  \"lineStart\": 137,\n  \"lineEnd\": 137\n},\n{\n  \"type\": \"function\",\n  \"name\": \"domainSections\",",
              "lineStart": 626,
              "lineEnd": 632
            },
            {
              "type": "function",
              "name": "domainSections",
              "code": "  \"code\": \"const domainSections = content.match(/### 2\\\\.\\\\d+ .+?\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n### 2\\\\.\\\\d|\\\\n## |$)/g) || [];\\n\\nif (codeBlocks.length > 0) {\\n  result.pass(`包含 ${codeBlocks.length} 个代码片段`);\\n\\n  // Check if code blocks have language annotation\",\n  \"lineStart\": 138,\n  \"lineEnd\": 143\n},\n{\n  \"type\": \"function\",\n  \"name\": \"annotatedBlocks\",",
              "lineStart": 633,
              "lineEnd": 639
            },
            {
              "type": "function",
              "name": "annotatedBlocks",
              "code": "  \"code\": \"  const annotatedBlocks = codeBlocks.filter((block) => /^```\\\\w+/m.test(block));\\n  if (annotatedBlocks.length === codeBlocks.length) {\\n    result.pass('所有代码片段都有语言标注');\\n  } else {\\n    result.warn(\\n      `${codeBlocks.length - annotatedBlocks.length} 个代码片段缺少语言标注（应使用 \\\\`\\\\`\\\\`typescript 等）`,\\n    );\\n  }\\n} else {\\n  result.fail('未找到代码片段 - 每个技术领域应包含 5-15 行核心代码');\\n}\\n\\n// Check if each domain section has at least one code snippet or file reference\",\n  \"lineStart\": 144,\n  \"lineEnd\": 156\n},\n{\n  \"type\": \"function\",\n  \"name\": \"missingSnippets\",",
              "lineStart": 640,
              "lineEnd": 646
            },
            {
              "type": "function",
              "name": "missingSnippets",
              "code": "  \"code\": \"let missingSnippets = 0;\\ndomainSections.forEach((section, index) => {\",\n  \"lineStart\": 157,\n  \"lineEnd\": 158\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasCodeBlock\",",
              "lineStart": 647,
              "lineEnd": 653
            },
            {
              "type": "function",
              "name": "hasCodeBlock",
              "code": "  \"code\": \"const hasCodeBlock = /```[\\\\s\\\\S]*?```/.test(section);\",\n  \"lineStart\": 159,\n  \"lineEnd\": 159\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasFileReference\",",
              "lineStart": 654,
              "lineEnd": 660
            },
            {
              "type": "function",
              "name": "hasFileReference",
              "code": "  \"code\": \"    const hasFileReference = /\\\\[.*?:L\\\\d+.*?\\\\]\\\\(.*?#L\\\\d+.*?\\\\)/.test(section);\\n\\n    if (!hasCodeBlock && !hasFileReference) {\\n      missingSnippets++;\\n      result.fail(`领域 2.${index + 1} 缺少代码片段或文件引用`);\\n    }\\n  });\\n\\n  if (missingSnippets === 0 && domainSections.length > 0) {\\n    result.pass(`所有 ${domainSections.length} 个领域都有代码片段或文件引用`);\\n  }\\n};\\n\\n/**\\n * Check for TODO markers - report should not contain any\",\n  \"lineStart\": 160,\n  \"lineEnd\": 175\n},\n{\n  \"type\": \"function\",\n  \"name\": \"checkTodoMarkers\",",
              "lineStart": 661,
              "lineEnd": 667
            },
            {
              "type": "function",
              "name": "checkTodoMarkers",
              "code": "  \"code\": \"const checkTodoMarkers = (content, result) => {\",\n  \"lineStart\": 176,\n  \"lineEnd\": 176\n},\n{\n  \"type\": \"function\",\n  \"name\": \"todos\",",
              "lineStart": 668,
              "lineEnd": 674
            },
            {
              "type": "function",
              "name": "todos",
              "code": "  \"code\": \"  const todos = content.match(/<!-- TODO.*?-->/g) || [];\\n\\n  if (todos.length === 0) {\\n    result.pass('无未完成的 TODO 标记');\\n  } else {\\n    result.fail(`发现 ${todos.length} 个未完成的 TODO 标记`);\\n    todos.slice(0, 3).forEach((todo) => {\\n      result.fail(`  ${todo.substring(0, 60)}...`);\\n    });\\n    if (todos.length > 3) {\\n      result.fail(`  ...以及 ${todos.length - 3} 个其他 TODO`);\\n    }\\n  }\\n};\\n\",\n  \"lineStart\": 177,\n  \"lineEnd\": 196\n},\n{\n  \"type\": \"function\",\n  \"name\": \"checkFileReferences\",",
              "lineStart": 675,
              "lineEnd": 681
            },
            {
              "type": "function",
              "name": "checkFileReferences",
              "code": "  \"code\": \"const checkFileReferences = (content, result) => {\\n  // Correct format: [name:L1-L10](path#L1-L10)\",\n  \"lineStart\": 197,\n  \"lineEnd\": 198\n},\n{\n  \"type\": \"function\",\n  \"name\": \"correctRefs\",",
              "lineStart": 682,
              "lineEnd": 688
            },
            {
              "type": "function",
              "name": "correctRefs",
              "code": "  \"code\": \"const correctRefs = content.match(/\\\\[[^\\\\]]*:L\\\\d+[^\\\\]]*\\\\]\\\\([^)]+#L\\\\d+[^)]*\\\\)/g) || [];\\n\\n// Incorrect format: just path without line numbers in markdown link\",\n  \"lineStart\": 199,\n  \"lineEnd\": 201\n},\n{\n  \"type\": \"function\",\n  \"name\": \"incorrectRefs\",",
              "lineStart": 689,
              "lineEnd": 695
            },
            {
              "type": "function",
              "name": "incorrectRefs",
              "code": "  \"code\": \"const incorrectRefs = content.match(/\\\\[[^\\\\]]+\\\\.ts\\\\]\\\\([^)]+\\\\)/g) || [];\",\n  \"lineStart\": 202,\n  \"lineEnd\": 202\n},\n{\n  \"type\": \"function\",\n  \"name\": \"incorrectWithoutLines\",",
              "lineStart": 696,
              "lineEnd": 702
            },
            {
              "type": "function",
              "name": "incorrectWithoutLines",
              "code": "  \"code\": \"  const incorrectWithoutLines = incorrectRefs.filter((ref) => !/#L\\\\d+/.test(ref));\\n\\n  if (correctRefs.length > 0) {\\n    result.pass(`包含 ${correctRefs.length} 个正确格式的文件引用（含行号链接）`);\\n  } else {\\n    result.warn('未找到带行号的文件引用 - 应使用 [file:L1-L10](path#L1-L10) 格式');\\n  }\\n\\n  if (incorrectWithoutLines.length > 0) {\\n    result.warn(`发现 ${incorrectWithoutLines.length} 个缺少行号的文件引用 - 应添加行号如 #L42-L58`);\\n  }\\n};\\n\\n/**\\n * Check commit hash format\",\n  \"lineStart\": 203,\n  \"lineEnd\": 220\n},\n{\n  \"type\": \"function\",\n  \"name\": \"checkCommitHashFormat\",",
              "lineStart": 703,
              "lineEnd": 709
            },
            {
              "type": "function",
              "name": "checkCommitHashFormat",
              "code": "  \"code\": \"const checkCommitHashFormat = (content, result) => {\\n  // Look for potential line numbers used as commit IDs (common mistake)\\n  // Pattern: backtick + 3-4 digits + backtick, not part of a larger number\",\n  \"lineStart\": 221,\n  \"lineEnd\": 223\n},\n{\n  \"type\": \"function\",\n  \"name\": \"lineNumbers\",",
              "lineStart": 710,
              "lineEnd": 716
            },
            {
              "type": "function",
              "name": "lineNumbers",
              "code": "  \"code\": \"const lineNumbers = content.match(/`\\\\d{3,4}`(?!\\\\d)/g) || [];\\n\\nif (lineNumbers.length > 0) {\\n  result.fail(\\n    `发现可疑的数字引用 ${lineNumbers.slice(0, 5).join(', ')} - 可能错误使用了 JSON 行号作为 commit ID`,\\n  );\\n  result.fail('  正确的 commit ID 应该是 7+ 位十六进制字符，如 `b285cde59`');\\n}\\n\\n// Check for proper commit hash format (7+ hex characters)\",\n  \"lineStart\": 224,\n  \"lineEnd\": 233\n},\n{\n  \"type\": \"function\",\n  \"name\": \"commitHashes\",",
              "lineStart": 717,
              "lineEnd": 723
            },
            {
              "type": "function",
              "name": "commitHashes",
              "code": "  \"code\": \"  const commitHashes = content.match(/`[0-9a-f]{7,}`/g) || [];\\n\\n  if (commitHashes.length > 0) {\\n    result.pass(`包含 ${commitHashes.length} 个正确格式的 commit 哈希引用`);\\n  } else {\\n    result.warn('未找到 commit 哈希引用 - 应使用 `短哈希` 格式');\\n  }\\n};\\n\\n/**\\n * Check contributor table format\\n * Required columns: 作者、提交数、主要领域、关键提交\\n */\",\n  \"lineStart\": 234,\n  \"lineEnd\": 246\n},\n{\n  \"type\": \"function\",\n  \"name\": \"checkContributorTable\",",
              "lineStart": 724,
              "lineEnd": 730
            },
            {
              "type": "function",
              "name": "checkContributorTable",
              "code": "  \"code\": \"const checkContributorTable = (content, result) => {\",\n  \"lineStart\": 247,\n  \"lineEnd\": 247\n},\n{\n  \"type\": \"function\",\n  \"name\": \"tableMatch\",",
              "lineStart": 731,
              "lineEnd": 737
            },
            {
              "type": "function",
              "name": "tableMatch",
              "code": "  \"code\": \"const tableMatch = content.match(/## 3\\\\. (贡献者|贡献者分析)\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n## |$)/);\\n\\nif (!tableMatch) {\\n  result.fail('缺少贡献者表格');\\n  return;\\n}\\n\",\n  \"lineStart\": 248,\n  \"lineEnd\": 254\n},\n{\n  \"type\": \"function\",\n  \"name\": \"section\",",
              "lineStart": 738,
              "lineEnd": 744
            },
            {
              "type": "function",
              "name": "section",
              "code": "  \"code\": \"const section = tableMatch[2];\",\n  \"lineStart\": 255,\n  \"lineEnd\": 255\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasTable\",",
              "lineStart": 745,
              "lineEnd": 751
            },
            {
              "type": "function",
              "name": "hasTable",
              "code": "  \"code\": \"const hasTable = /\\\\|.*\\\\|.*\\\\|/.test(section);\\n\\nif (!hasTable) {\\n  result.fail('贡献者章节缺少表格');\\n  return;\\n}\\n\\n// Check required columns\",\n  \"lineStart\": 256,\n  \"lineEnd\": 263\n},\n{\n  \"type\": \"function\",\n  \"name\": \"headerLine\",",
              "lineStart": 752,
              "lineEnd": 758
            },
            {
              "type": "function",
              "name": "headerLine",
              "code": "  \"code\": \"const headerLine = section.match(/\\\\|[^|]+\\\\|[^|]+\\\\|[^|]+\\\\|[^|]*\\\\|?/);\\nif (!headerLine) {\\n  result.fail('贡献者表格格式不正确');\\n  return;\\n}\\n\",\n  \"lineStart\": 264,\n  \"lineEnd\": 269\n},\n{\n  \"type\": \"function\",\n  \"name\": \"header\",",
              "lineStart": 759,
              "lineEnd": 765
            },
            {
              "type": "function",
              "name": "header",
              "code": "  \"code\": \"const header = headerLine[0].toLowerCase();\",\n  \"lineStart\": 270,\n  \"lineEnd\": 270\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasAuthor\",",
              "lineStart": 766,
              "lineEnd": 772
            },
            {
              "type": "function",
              "name": "hasAuthor",
              "code": "  \"code\": \"const hasAuthor = /作者/.test(header);\",\n  \"lineStart\": 271,\n  \"lineEnd\": 271\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasCommitCount\",",
              "lineStart": 773,
              "lineEnd": 779
            },
            {
              "type": "function",
              "name": "hasCommitCount",
              "code": "  \"code\": \"const hasCommitCount = /提交数/.test(header);\",\n  \"lineStart\": 272,\n  \"lineEnd\": 272\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasDomain\",",
              "lineStart": 780,
              "lineEnd": 786
            },
            {
              "type": "function",
              "name": "hasDomain",
              "code": "  \"code\": \"const hasDomain = /(领域|工作|贡献)/.test(header);\",\n  \"lineStart\": 273,\n  \"lineEnd\": 273\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasKeyCommit\",",
              "lineStart": 787,
              "lineEnd": 793
            },
            {
              "type": "function",
              "name": "hasKeyCommit",
              "code": "  \"code\": \"const hasKeyCommit = /(关键提交|提交)/.test(header);\\n\\nif (hasAuthor && hasCommitCount && hasDomain && hasKeyCommit) {\\n  result.pass('贡献者表格包含所有必需列（作者、提交数、主要领域、关键提交）');\\n} else {\\n  if (!hasAuthor) result.warn('贡献者表格缺少\\\"作者\\\"列');\\n  if (!hasCommitCount) result.warn('贡献者表格缺少\\\"提交数\\\"列');\\n  if (!hasDomain) result.warn('贡献者表格缺少\\\"主要领域\\\"列');\\n  if (!hasKeyCommit) result.fail('贡献者表格缺少\\\"关键提交\\\"列');\\n}\\n\\n// Check if table has data rows\",\n  \"lineStart\": 274,\n  \"lineEnd\": 285\n},\n{\n  \"type\": \"function\",\n  \"name\": \"rows\",",
              "lineStart": 794,
              "lineEnd": 800
            },
            {
              "type": "function",
              "name": "rows",
              "code": "  \"code\": \"const rows = section.split('\\\\n').filter((line) => /^\\\\|[^-]/.test(line));\",\n  \"lineStart\": 286,\n  \"lineEnd\": 286\n},\n{\n  \"type\": \"function\",\n  \"name\": \"dataRows\",",
              "lineStart": 801,
              "lineEnd": 807
            },
            {
              "type": "function",
              "name": "dataRows",
              "code": "  \"code\": \"const dataRows = rows.length - 1; // Subtract header row\\n\\nif (dataRows > 0) {\\n  result.pass(`贡献者表格包含 ${dataRows} 行数据`);\\n} else {\\n  result.fail('贡献者表格无数据');\\n}\\n\\n// Check if key commits use proper hash format\",\n  \"lineStart\": 287,\n  \"lineEnd\": 295\n},\n{\n  \"type\": \"function\",\n  \"name\": \"keyCommitCells\",",
              "lineStart": 808,
              "lineEnd": 814
            },
            {
              "type": "function",
              "name": "keyCommitCells",
              "code": "  \"code\": \"const keyCommitCells = section.match(/\\\\|\\\\s*`[^`]+`\\\\s*\\\\|?\\\\s*$/gm) || [];\",\n  \"lineStart\": 296,\n  \"lineEnd\": 296\n},\n{\n  \"type\": \"function\",\n  \"name\": \"validHashes\",",
              "lineStart": 815,
              "lineEnd": 821
            },
            {
              "type": "function",
              "name": "validHashes",
              "code": "  \"code\": \"  const validHashes = keyCommitCells.filter((cell) => /`[0-9a-f]{7,}`/.test(cell));\\n\\n  if (keyCommitCells.length > 0 && validHashes.length === keyCommitCells.length) {\\n    result.pass('关键提交列使用正确的 commit 哈希格式');\\n  } else if (keyCommitCells.length > 0) {\\n    result.warn('关键提交列中部分提交可能未使用正确的哈希格式');\\n  }\\n};\\n\\n/**\\n * Check for design intent explanations\\n * Bad example: \\\"添加了 getRequestIntervalMs 函数\\\" (只说做了什么)\\n * Good example: 解释为什么需要、解决什么问题、方案选择理由 (至少50字)\\n */\",\n  \"lineStart\": 297,\n  \"lineEnd\": 310\n},\n{\n  \"type\": \"function\",\n  \"name\": \"checkDesignIntent\",",
              "lineStart": 822,
              "lineEnd": 828
            },
            {
              "type": "function",
              "name": "checkDesignIntent",
              "code": "  \"code\": \"const checkDesignIntent = (content, result) => {\",\n  \"lineStart\": 311,\n  \"lineEnd\": 311\n},\n{\n  \"type\": \"function\",\n  \"name\": \"domainSections\",",
              "lineStart": 829,
              "lineEnd": 835
            },
            {
              "type": "function",
              "name": "domainSections",
              "code": "  \"code\": \"const domainSections = content.match(/### 2\\\\.\\\\d+ .+?\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n### 2\\\\.\\\\d|\\\\n## |$)/g) || [];\\n\\nif (domainSections.length === 0) {\\n  result.warn('未找到领域/变更章节');\\n  return;\\n}\\n\",\n  \"lineStart\": 312,\n  \"lineEnd\": 318\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasIntent\",",
              "lineStart": 836,
              "lineEnd": 842
            },
            {
              "type": "function",
              "name": "hasIntent",
              "code": "  \"code\": \"let hasIntent = 0;\",\n  \"lineStart\": 319,\n  \"lineEnd\": 319\n},\n{\n  \"type\": \"function\",\n  \"name\": \"missingIntent\",",
              "lineStart": 843,
              "lineEnd": 849
            },
            {
              "type": "function",
              "name": "missingIntent",
              "code": "  \"code\": \"let missingIntent = 0;\",\n  \"lineStart\": 320,\n  \"lineEnd\": 320\n},\n{\n  \"type\": \"function\",\n  \"name\": \"tooShort\",",
              "lineStart": 850,
              "lineEnd": 856
            },
            {
              "type": "function",
              "name": "tooShort",
              "code": "  \"code\": \"let tooShort = 0;\\n\\ndomainSections.forEach((section) => {\\n  // Check if design intent is present\",\n  \"lineStart\": 321,\n  \"lineEnd\": 324\n},\n{\n  \"type\": \"function\",\n  \"name\": \"intentMatch\",",
              "lineStart": 857,
              "lineEnd": 863
            },
            {
              "type": "function",
              "name": "intentMatch",
              "code": "  \"code\": \"const intentMatch = section.match(/\\\\*\\\\*设计意图\\\\*\\\\*[：:]\\\\s*\\\\n?([\\\\s\\\\S]*?)(?=\\\\n\\\\*\\\\*|\\\\n###|\\\\n##|$)/);\\n\\nif (!intentMatch) {\\n  missingIntent++;\\n  return;\\n}\\n\",\n  \"lineStart\": 325,\n  \"lineEnd\": 331\n},\n{\n  \"type\": \"function\",\n  \"name\": \"intentContent\",",
              "lineStart": 864,
              "lineEnd": 870
            },
            {
              "type": "function",
              "name": "intentContent",
              "code": "  \"code\": \"  const intentContent = intentMatch[1].trim();\\n\\n  // Check minimum length (50 chars for meaningful explanation)\\n  if (intentContent.length < 50) {\\n    tooShort++;\\n  } else {\\n    hasIntent++;\\n  }\\n});\\n\\nif (missingIntent === 0 && tooShort === 0) {\\n  result.pass(`所有 ${hasIntent} 个领域都包含充分的设计意图说明（≥50字）`);\\n} else {\\n  if (missingIntent > 0) {\\n    result.fail(`${missingIntent} 个领域缺少\\\"设计意图\\\"字段`);\",\n  \"lineStart\": 332,\n  \"lineEnd\": 358\n},\n{\n  \"type\": \"function\",\n  \"name\": \"checkRiskAssessment\",",
              "lineStart": 871,
              "lineEnd": 877
            },
            {
              "type": "function",
              "name": "checkRiskAssessment",
              "code": "  \"code\": \"const checkRiskAssessment = (content, result) => {\",\n  \"lineStart\": 359,\n  \"lineEnd\": 359\n},\n{\n  \"type\": \"function\",\n  \"name\": \"riskSection\",",
              "lineStart": 878,
              "lineEnd": 884
            },
            {
              "type": "function",
              "name": "riskSection",
              "code": "  \"code\": \"const riskSection = content.match(/## 4\\\\. (风险评估|技术影响与风险)\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n## |$)/);\\n\\nif (!riskSection) {\\n  result.fail('缺少风险评估章节');\\n  return;\\n}\\n\",\n  \"lineStart\": 360,\n  \"lineEnd\": 366\n},\n{\n  \"type\": \"function\",\n  \"name\": \"section\",",
              "lineStart": 885,
              "lineEnd": 891
            },
            {
              "type": "function",
              "name": "section",
              "code": "  \"code\": \"const section = riskSection[2];\\n\\n// Check for subsections\",\n  \"lineStart\": 367,\n  \"lineEnd\": 369\n},\n{\n  \"type\": \"function\",\n  \"name\": \"requiredSubsections\",",
              "lineStart": 892,
              "lineEnd": 898
            },
            {
              "type": "function",
              "name": "requiredSubsections",
              "code": "  \"code\": \"const requiredSubsections = [\\n  { pattern: /### 兼容性影响/, name: '兼容性影响' },\\n  { pattern: /### 配置变更/, name: '配置变更' },\\n  { pattern: /### 性能影响/, name: '性能影响' },\\n  { pattern: /### 测试覆盖/, name: '测试覆盖' },\\n];\\n\",\n  \"lineStart\": 370,\n  \"lineEnd\": 376\n},\n{\n  \"type\": \"function\",\n  \"name\": \"missing\",",
              "lineStart": 899,
              "lineEnd": 905
            },
            {
              "type": "function",
              "name": "missing",
              "code": "  \"code\": \"const missing = requiredSubsections.filter((s) => !s.pattern.test(section));\\n\\nif (missing.length === 0) {\\n  result.pass('风险评估包含所有必需的子章节');\\n} else {\\n  missing.forEach((s) => result.fail(`风险评估缺少\\\"${s.name}\\\"小节`));\\n}\\n\\n// Check if subsections have substantial content (not just placeholders)\\nrequiredSubsections.forEach((sub) => {\",\n  \"lineStart\": 377,\n  \"lineEnd\": 386\n},\n{\n  \"type\": \"function\",\n  \"name\": \"subMatch\",",
              "lineStart": 906,
              "lineEnd": 912
            },
            {
              "type": "function",
              "name": "subMatch",
              "code": "  \"code\": \"const subMatch = section.match(\\n  new RegExp(`${sub.pattern.source}\\\\\\\\n\\\\\\\\n?([\\\\\\\\s\\\\\\\\S]*?)(?=\\\\\\\\n### |\\\\\\\\n## |$)`),\\n);\\n\\nif (subMatch) {\",\n  \"lineStart\": 387,\n  \"lineEnd\": 391\n},\n{\n  \"type\": \"function\",\n  \"name\": \"subContent\",",
              "lineStart": 913,
              "lineEnd": 919
            },
            {
              "type": "function",
              "name": "subContent",
              "code": "  \"code\": \"const subContent = subMatch[1].trim();\\n\\n// Check for TODO markers\\nif (/<!-- TODO/.test(subContent)) {\\n  result.warn(`\\\"${sub.name}\\\"小节包含未完成的 TODO 标记`);\\n  return;\\n}\\n\\n// Check minimum content length\\nif (subContent.length < 20) {\\n  result.warn(`\\\"${sub.name}\\\"小节内容过短`);\\n} else {\\n  // Check for specificity (mentions specific modules/services)\",\n  \"lineStart\": 392,\n  \"lineEnd\": 404\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasSpecificContent\",",
              "lineStart": 920,
              "lineEnd": 926
            },
            {
              "type": "function",
              "name": "hasSpecificContent",
              "code": "  \"code\": \"        const hasSpecificContent =\\n          /`[^`]+`/.test(subContent) || // Has code references\\n          /apps\\\\/|libraries\\\\/|services\\\\//.test(subContent) || // Has paths\\n          /(高风险|中风险|低风险)/.test(subContent); // Has risk levels\\n\\n        if (hasSpecificContent) {\\n          result.pass(`\\\"${sub.name}\\\"小节包含具体内容`);\\n        } else {\\n          result.warn(`\\\"${sub.name}\\\"小节可能过于笼统 - 建议列出具体受影响的模块/服务`);\\n        }\\n      }\\n    }\\n  });\\n};\\n\",\n  \"lineStart\": 405,\n  \"lineEnd\": 422\n},\n{\n  \"type\": \"function\",\n  \"name\": \"checkCommitSummaries\",",
              "lineStart": 927,
              "lineEnd": 933
            },
            {
              "type": "function",
              "name": "checkCommitSummaries",
              "code": "  \"code\": \"const checkCommitSummaries = (content, result) => {\",\n  \"lineStart\": 423,\n  \"lineEnd\": 423\n},\n{\n  \"type\": \"function\",\n  \"name\": \"summarySection\",",
              "lineStart": 934,
              "lineEnd": 940
            },
            {
              "type": "function",
              "name": "summarySection",
              "code": "  \"code\": \"const summarySection = content.match(/## 5\\\\. 单提交摘要.*?\\\\n\\\\n([\\\\s\\\\S]*?)(?=\\\\n---\\\\n|$)/);\\n\\nif (!summarySection) {\\n  return; // Optional section\\n}\\n\",\n  \"lineStart\": 424,\n  \"lineEnd\": 429\n},\n{\n  \"type\": \"function\",\n  \"name\": \"section\",",
              "lineStart": 941,
              "lineEnd": 947
            },
            {
              "type": "function",
              "name": "section",
              "code": "  \"code\": \"const section = summarySection[1];\",\n  \"lineStart\": 430,\n  \"lineEnd\": 430\n},\n{\n  \"type\": \"function\",\n  \"name\": \"commits\",",
              "lineStart": 948,
              "lineEnd": 954
            },
            {
              "type": "function",
              "name": "commits",
              "code": "  \"code\": \"const commits = section.match(/### [`']?[0-9a-f]{7,}[`']?/gi) || [];\\n\\nif (commits.length > 0) {\\n  result.pass(`单提交摘要包含 ${commits.length} 个提交详情`);\\n} else {\\n  result.warn('单提交摘要章节无有效内容');\\n  return;\\n}\\n\\n// Check if summaries have required fields\",\n  \"lineStart\": 431,\n  \"lineEnd\": 440\n},\n{\n  \"type\": \"function\",\n  \"name\": \"summaries\",",
              "lineStart": 955,
              "lineEnd": 961
            },
            {
              "type": "function",
              "name": "summaries",
              "code": "  \"code\": \"const summaries = section.split(/### [`']?[0-9a-f]{7,}/i).slice(1);\",\n  \"lineStart\": 441,\n  \"lineEnd\": 441\n},\n{\n  \"type\": \"function\",\n  \"name\": \"completeCount\",",
              "lineStart": 962,
              "lineEnd": 968
            },
            {
              "type": "function",
              "name": "completeCount",
              "code": "  \"code\": \"let completeCount = 0;\\n\\nsummaries.forEach((summary) => {\",\n  \"lineStart\": 442,\n  \"lineEnd\": 444\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasSubject\",",
              "lineStart": 969,
              "lineEnd": 975
            },
            {
              "type": "function",
              "name": "hasSubject",
              "code": "  \"code\": \"const hasSubject = /\\\\*\\\\*主题\\\\*\\\\*/.test(summary);\",\n  \"lineStart\": 445,\n  \"lineEnd\": 445\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hasChanges\",",
              "lineStart": 976,
              "lineEnd": 982
            },
            {
              "type": "function",
              "name": "hasChanges",
              "code": "  \"code\": \"    const hasChanges = /\\\\*\\\\*变更要点\\\\*\\\\*/.test(summary);\\n\\n    if (hasSubject && hasChanges) {\\n      completeCount++;\\n    }\\n  });\\n\\n  if (completeCount === summaries.length) {\\n    result.pass('所有单提交摘要包含必需字段（主题、变更要点）');\\n  } else {\\n    result.warn(`${summaries.length - completeCount} 个单提交摘要缺少必需字段`);\\n  }\\n};\\n\\n/**\",\n  \"lineStart\": 446,\n  \"lineEnd\": 462\n},\n{\n  \"type\": \"function\",\n  \"name\": \"main\",",
              "lineStart": 983,
              "lineEnd": 989
            },
            {
              "type": "function",
              "name": "main",
              "code": "  \"code\": \"const main = async () => {\",\n  \"lineStart\": 463,\n  \"lineEnd\": 463\n},\n{\n  \"type\": \"function\",\n  \"name\": \"markdownFile\",",
              "lineStart": 990,
              "lineEnd": 996
            },
            {
              "type": "function",
              "name": "markdownFile",
              "code": "  \"code\": \"const markdownFile = process.argv[2];\\n\\nif (!markdownFile) {\\n  usage();\\n  process.exit(1);\\n}\\n\\nconsole.info(`Validating report: ${markdownFile}`);\\nconsole.info('='.repeat(60));\\n\\n// Read file\",\n  \"lineStart\": 464,\n  \"lineEnd\": 474\n},\n{\n  \"type\": \"function\",\n  \"name\": \"content\",",
              "lineStart": 997,
              "lineEnd": 1003
            },
            {
              "type": "function",
              "name": "content",
              "code": "  \"code\": \"let content;\\ntry {\\n  content = await readFile(markdownFile, 'utf8');\\n} catch (error) {\\n  console.error(`❌ Error reading file: ${error.message}`);\\n  process.exit(1);\\n}\\n\",\n  \"lineStart\": 475,\n  \"lineEnd\": 482\n},\n{\n  \"type\": \"function\",\n  \"name\": \"result\",",
              "lineStart": 1004,
              "lineEnd": 1010
            },
            {
              "type": "function",
              "name": "result",
              "code": "      \"code\": \"const result = new CheckResult();\\n\\n// Run all checks\\ncheckRequiredSections(content, result);\\ncheckOverview(content, result);\\ncheckCodeSnippets(content, result);\\ncheckTodoMarkers(content, result);\\ncheckFileReferences(content, result);\\ncheckCommitHashFormat(content, result);\\ncheckContributorTable(content, result);\\ncheckDesignIntent(content, result);\\ncheckRiskAssessment(content, result);\\ncheckCommitSummaries(content, result);\\n\\n// Print results\",\n      \"lineStart\": 483,\n      \"lineEnd\": 519\n    }\n  ]\n},\n{\n  \"additions\": 0,\n  \"deletions\": 189,\n  \"path\": \".claude/skills/recent-changes-digest/SKILL.md\",\n  \"changeType\": \"deleted\",\n  \"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/skills/recent-changes-digest/SKILL.md b/.claude/skills/recent-changes-digest/SKILL.md\\ndeleted file mode 100644\\nindex 1fe54584e..000000000\\n--- a/.claude/skills/recent-changes-digest/SKILL.md\\n+++ /dev/null\\n@@ -1,189 +0,0 @@\\n----\\n-name: recent-changes-digest\\n-description: 总结指定 git 提交区间的变更，输出含聚焦领域、作者、设计意图与速览的 Markdown 报告。\\n----\\n-\\n-# Recent Changes Digest\\n-\\n-## 目标与交付物\\n-\\n-- 先生成结构化 JSON（含每个文件的 patch），再据此撰写结构化 Markdown 文档，概览提交区间（`<old>`..`<new>`）的关键改动。\\n-- 报告应至少包含：整体概览、改动聚焦领域、贡献者、设计意图、改动速览表；必要时补充技术影响、测试验证、后续建议，并按语义模块聚类（如“错误处理/观测性/Vendor/前端/工具”等）。\\n-- 改动聚焦领域需写足细节并显式关联涉及的 commit 短 hash，方便读者对照。\\n-- 需基于 JSON 生成每个 commit 的摘要（可用于正文或附录），每条使用 Markdown 标题+正文的格式（非单行），确保读者单条即可理解改动。\\n-- 确保读者“开卷即得”，能快速定位目录与重点文件。\\n-\\n-## 触发条件（When to load this Skill）\\n-\\n-- 用户提及“近期改动 / commit 摘要 / release note”等需求。\\n-- 用户提供具体 commit、tag、分支或默认最新提交，需要在仓库上下文内梳理变更。\\n-- 需要跨多个目录梳理主题、作者与动机，而不仅仅是列出 `git log`。\\n-\\n-## 输入预期\\n-\\n-- 一个可访问的 Git 仓库（默认 `/home/c1/Work/Yuan`）。\\n-- 至少一个提交范围：\\n-  - `old..new`（标准范围）；\\n-  - 单一起点或终点时，可用 `git rev-parse` 补齐；\\n-  - 若完全缺省，可提示用户或默认使用 `HEAD~10..HEAD`。\\n-\\n-## 前置检查\\n-\\n-1. `git status --short`，确认无必要的未提交文件影响判断。\\n-2. `git rev-parse --show-toplevel`，确保在仓库根目录执行命令。\\n-3. 创建输出目录：`docs/reports/`；若无权限需提示用户。\\n-\\n-## 用法（先跑脚本，再用 JSON 写摘要）\\n-\\n-1. 生成结构化 JSON（含每个文件的 patch）：\\n-   ```bash\\n-   .claude/skills/recent-changes-digest/scripts/generate-digest.js <old> <new> [output_path]\\n-   # 默认输出 docs/reports/recent-changes-YYYY-MM-DD.json\\n-   ```\\n-2. 基于生成的 JSON 写 Markdown 摘要，建议用 `jq` 快速查看：\\n-   ```bash\\n-   jq '.range, .contributors, .topDirs | .commits[0]' docs/reports/recent-changes-YYYY-MM-DD.json\\n-   ```\\n-   输出数据结构示例：\\n-\\n-```json\\n-{\\n-  \\\"range\\\": {\\n-    \\\"old\\\": \\\"<old>\\\",\\n-    \\\"new\\\": \\\"<new>\\\",\\n-    \\\"label\\\": \\\"old..new\\\",\\n-    \\\"startDate\\\": \\\"2025-11-22\\\",\\n-    \\\"endDate\\\": \\\"2025-11-25\\\",\\n-    \\\"commitCount\\\": 36,\\n-    \\\"generatedAt\\\": \\\"2025-11-25T07:00:00Z\\\"\\n-  },\\n-  \\\"contributors\\\": [{ \\\"name\\\": \\\"CZ\\\", \\\"email\\\": \\\"zheng.chen@...\\\", \\\"commits\\\": 20 }],\\n-  \\\"topDirs\\\": [{ \\\"dir\\\": \\\"apps\\\", \\\"fileCount\\\": 176 }],\\n-  \\\"commits\\\": [\\n-    {\\n-      \\\"hash\\\": \\\"03a48cfc40aa113fb47a6458a1f9619b7c005614\\\",\\n-      \\\"short\\\": \\\"03a48cfc4\\\",\\n-      \\\"author\\\": \\\"CZ\\\",\\n-      \\\"email\\\": \\\"zheng.chen@...\\\",\\n-      \\\"authoredAt\\\": \\\"2025-11-22T01:07:13+08:00\\\",\\n-      \\\"subject\\\": \\\"feat: ...\\\",\\n-      \\\"files\\\": [\\n-        {\\n-          \\\"path\\\": \\\"libraries/protocol/src/terminal.ts\\\",\\n-          \\\"additions\\\": 6,\\n-          \\\"deletions\\\": 3,\\n-          \\\"patch\\\": \\\"diff --git a/... b/...\\\\n@@ ...\\\"\\n-        }\\n-      ]\\n-    }\\n-  ]\\n-}\\n-```\\n-\\n-## 工作流（遵循渐进披露理念）\\n-\\n-1. **生成原始数据**\\n-\\n-   - 运行脚本生成 JSON：`.claude/skills/recent-changes-digest/scripts/generate-digest.js <old> <new>`.\\n-   - 确认输出文件存在，路径默认 `docs/reports/recent-changes-YYYY-MM-DD.json`。\\n-\\n-2. **快速审阅（Level 2 信息）**\\n-\\n-   - 查看范围与作者：`jq '.range, .contributors' <json>`.\\n-   - 查看顶层目录热度：`jq '.topDirs' <json>`.\\n-   - 抽样首尾 commit：`jq '.commits[0], .commits[-1]' <json>`.\\n-\\n-3. **逐条调研（基于 JSON）**\\n-\\n-   - 按需查看关键提交的文件与 patch：`jq '.commits[] | {subject, files}' <json>`.\\n-   - 关注：\\n-     - 涉及目录/项目（`apps/`, `libraries/`, `docs/`, `tools/`）。\\n-     - 技术焦点（功能/重构/依赖/安全/运维）。\\n-     - 作者与潜在意图（从 subject 与 patch 推断）。\\n-\\n-4. **语义聚类**\\n-\\n-   - 将 commits 按问题域聚类并命名模块（示例：“错误处理与观测”、“终端安全与鉴权”、“Vendor 接入与行情”、“前端体验与工具”、“运维与监控”）。\\n-   - 每个模块包含：涉及目录/文件、主要提交（短 hash）、意图与风险。\\n-\\n-5. **撰写报告（Level 3 输出，必须基于 JSON 数据）**\\n-\\n-   - 先加载 JSON（不可跳过脚本生成步骤），用其中的 commits/files/patch 聚合后写 Markdown，输出文件命名建议：`docs/reports/recent-changes-<YYYY-MM-DD>.md`。\\n-   - 推荐结构：\\n-     ```\\n-     # 近期变动摘要（<range>）\\n-     ## 1. 概览\\n-     ## 2. 改动聚焦领域（按语义模块分组）\\n-     ## 3. 贡献者\\n-     ## 4. 设计意图\\n-     ## 5. 改动速览（表格）\\n-     ## 6. 技术影响与风险\\n-     ## 7. 测试与验证\\n-     ## 8. 单 commit 摘要（可放附录，正文可引用关键条目）\\n-     ## 9. 后续建议\\n-     ## 10. 参考资料（可选）\\n-     ```\\n-   - 语义模块建议：错误处理与观测、安全鉴权、Vendor 与交易所、前端体验与工具、运维与部署/监控、依赖/发布同步；每个模块要列出涉及目录/文件、关键提交（短 hash + 主题）、核心意图与风险，并在描述中挂上对应 commit 短 hash。\\n-   - 速览表用 JSON 的 commit 列表生成：短 hash / 作者 / 主题 / 核心目录。\\n-   - 引用文件路径并可附行号（`apps/vendor-aster/src/quote.ts:1-40`）方便跳转；补充 patch 中体现的关键行为（新增接口、移除字段、校验/指标调整等）。\\n-   - 自动化提交（版本号 bump）可简述为“无业务逻辑改动”。\\n-   - 在正文或附录附上“单 commit 摘要”列表，格式见下文，确保每条可独立理解变更内容；正文可挑选关键 commit 的摘要作为模块内证据，其余放入附录。\\n-\\n-6. **自检与交付**\\n-   - `git status --short docs/reports`，确认文件生成位置正确。\\n-   - 人检：\\n-     - 四个核心问题是否回答。\\n-     - 是否覆盖关键作者、目录、意图与风险。\\n-     - 语义模块划分是否清晰，摘要是否简明。\\n-\\n-### 单 commit 摘要格式（基于 JSON 自动生成）\\n-\\n-- 生成流程：\\n-  1. 运行脚本产出 JSON。\\n-  2. 对 JSON 中每个 commit 生成独立摘要，供全文速览或附录引用。\\n-  3. 写总览时可择要抽取关键 commit。\\n-- 输出格式（每条）：\\n-  - `hash(short)` 作者 | 日期 | 模块标签（1~2 个，如「安全」「错误处理」「Vendor」「前端」「运维」）\\n-  - 主题：原 commit subject\\n-  - 变更要点（3~5 条，覆盖文件/行为/接口/校验/观测）：\\n-    - 文件/目录：具体路径（可含行号），描述改动动作（新增/移除/重构）与目的。\\n-    - 接口/协议/校验：指出新增参数、字段来源变化、校验逻辑变更。\\n-    - 行为/数据流：运行时行为或数据来源的变化。\\n-    - 观测/指标：新增或变更的指标、日志、错误计数等。\\n-  - 风险/影响（1~2 条）：兼容性/配置/依赖/运维影响。\\n-  - 测试：列出新增/修改的测试文件；若无，标注“未见测试记录”。\\n-- 示例（说明用）：\\n-  - `03a48cfc4` CZ | 2025-11-22 | 安全\\n-  - 主题：feat: enforce terminal_id to be derived from public_key in Terminal...\\n-  - 变更要点：\\n-    - `libraries/protocol/src/terminal.ts:138`：连接 URL 中强制用公钥派生 `terminal_id`，保证 ID 与密钥绑定。\\n-    - `libraries/protocol/src/terminal.ts:140-143`：对 `host_token` 进行签名并随连接参数发送，用于身份校验。\\n-    - `common/changes/@yuants/protocol/2025-11-21-16-55.json`：同步记录协议变更。\\n-  - 风险/影响：依赖自定义 `terminal_id` 的客户端需改为公钥派生，否则连接可能被拒。\\n-  - 测试：未见测试记录。\\n-\\n-## 写作风格指南\\n-\\n-- **语气**：客观、面向工程同事；突出事实与洞察。\\n-- **结构**：短段落 + 列表优先；表格用于比较提交。\\n-- **引用**：路径 + 行号（如 `apps/vendor-okx/src/account.ts:1-80`）。\\n-- **语言**：保持中文输出，如需引用代码/命令使用英文。\\n-- **单 commit 摘要**：保持简洁但覆盖关键点（文件、接口、行为、风险、测试），可直接复制至附录或正文。\\n-\\n-## 质量检查清单\\n-\\n-- [ ] 范围无误，起止 commit 正确。\\n-- [ ] 每个主题附带至少一个具体文件或模块引用。\\n-- [ ] 明确列出作者与角色（个人 / bot）。\\n-- [ ] 给出潜在风险或下一步建议。\\n-- [ ] 脚本或命令在仓库根目录可直接执行。\\n-- [ ] 为每个 commit 生成独立摘要（含文件/行为/风险/测试），正文或附录可直接使用。\\n-\\n-## 常见错误 & 规避\\n-\\n-- **仅罗列 commit**：需抽象出主题与意图。\\n-- **忽视自动化提交**：虽无逻辑变更，仍需说明“版本同步”。\\n-- **引用路径不准确**：使用 `rg -n` 或 `nl -ba` 确认行号。\\n-- **上下文缺失**：必要时说明链路（例如“先新增 cache，再在 vendors 引入”）。\\n-\\n-> 若需扩展更多自动化（如生成表格、同步到文档系统），可在 `skills/recent-changes-digest/scripts/` 内继续添加脚本，并在上述工作流中引用。\\n\",\n  \"codeSnippets\": []\n},\n{",
              "lineStart": 1011,
              "lineEnd": 1029
            },
            {
              "type": "function",
              "name": "exec",
              "code": "      \"patch\": \"commit 56216a2d6f0e6d06124c6e01fe163a8f992c2e4b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 11:39:03 2025 +0800\\n\\n    chore(skill): enhance git-changes-report skill (#2223)\\n\\ndiff --git a/.claude/skills/recent-changes-digest/scripts/generate-digest.js b/.claude/skills/recent-changes-digest/scripts/generate-digest.js\\ndeleted file mode 100755\\nindex b5e076dce..000000000\\n--- a/.claude/skills/recent-changes-digest/scripts/generate-digest.js\\n+++ /dev/null\\n@@ -1,143 +0,0 @@\\n-#!/usr/bin/env node\\n-/* eslint-disable no-console */\\n-import { mkdir, writeFile } from 'node:fs/promises';\\n-import { dirname, resolve } from 'node:path';\\n-import { execFile } from 'node:child_process';\\n-import { promisify } from 'node:util';\\n-\\n-const exec = promisify(execFile);\\n-\\n-const usage = () => {\\n-  console.error(\\n-    [\\n-      'Usage: scripts/generate-digest.js <old_commit> <new_commit> [output_path]',\\n-      '',\\n-      'Generate structured JSON for commits in range <old_commit>..<new_commit>',\\n-      'including per-file stats and patch text. Default output: docs/reports/recent-changes-YYYY-MM-DD.json',\\n-      '',\\n-      'Example:',\\n-      '  .claude/skills/recent-changes-digest/scripts/generate-digest.js HEAD~10 HEAD',\\n-    ].join('\\\\n'),\\n-  );\\n-};\\n-\\n-const main = async () => {\\n-  const [oldRef, newRef, outputArg] = process.argv.slice(2);\\n-  if (!oldRef || !newRef) {\\n-    usage();\\n-    process.exit(1);\\n-  }\\n-\\n-  const repoRoot = (await exec('git', ['rev-parse', '--show-toplevel'])).stdout.trim();\\n-  process.chdir(repoRoot);\\n-\\n-  const shortOld = (await exec('git', ['rev-parse', '--short', oldRef])).stdout.trim();\\n-  const shortNew = (await exec('git', ['rev-parse', '--short', newRef])).stdout.trim();\\n-  const today = new Date().toISOString().slice(0, 10);\\n-  const output = outputArg || `docs/reports/recent-changes-${today}.json`;\\n-\\n-  await mkdir(dirname(output), { recursive: true });\\n-\\n-  const startDate =\\n-    (await exec('git', ['log', '--reverse', '--date=short', '--format=%ad', `${oldRef}..${newRef}`])).stdout\\n-      .split('\\\\n')\\n-      .filter(Boolean)[0] || null;\\n-  const endDate =\\n-    (\\n-      await exec('git', ['log', '-1', '--date=short', '--format=%ad', `${oldRef}..${newRef}`])\\n-    ).stdout.trim() || null;\\n-  const commitCount = Number(\\n-    (await exec('git', ['rev-list', '--count', `${oldRef}..${newRef}`])).stdout.trim() || '0',\\n-  );\\n-  if (!startDate || !endDate || commitCount === 0) {\\n-    throw new Error(`No commits found in range ${shortOld}..${shortNew}`);\\n-  }\\n-\\n-  const authorLines = (await exec('git', ['log', `${oldRef}..${newRef}`, '--format=%an|%ae'])).stdout\\n-    .split('\\\\n')\\n-    .filter(Boolean);\\n-  const contributorMap = new Map();\\n-  for (const line of authorLines) {\\n-    const [name, email] = line.split('|');\\n-    const key = `${name}|${email}`;\\n-    contributorMap.set(key, (contributorMap.get(key) || 0) + 1);\\n-  }\\n-  const contributors = Array.from(contributorMap.entries()).map(([key, commits]) => {\\n-    const [name, email] = key.split('|');\\n-    return { name, email, commits };\\n-  });\\n-\\n-  const topDirs = (await exec('git', ['diff', '--name-only', `${oldRef}..${newRef}`])).stdout\\n-    .split('\\\\n')\\n-    .filter(Boolean)\\n-    .map((p) => p.split('/')[0] || '.')\\n-    .reduce((acc, dir) => acc.set(dir, (acc.get(dir) || 0) + 1), new Map());\\n-  const topDirList = Array.from(topDirs.entries())\\n-    .map(([dir, fileCount]) => ({ dir, fileCount }))\\n-    .sort((a, b) => b.fileCount - a.fileCount);\\n-\\n-  const rawCommits = (\\n-    await exec('git', [\\n-      'log',\\n-      '--reverse',\\n-      '--date=iso8601',\\n-      '--format=%H|%h|%an|%ae|%ad|%s',\\n-      `${oldRef}..${newRef}`,\\n-    ])\\n-  ).stdout\\n-    .split('\\\\n')\\n-    .filter(Boolean);\\n-\\n-  const commits = [];\\n-  for (const line of rawCommits) {\\n-    const [hash, short, author, email, authoredAt, subject] = line.split('|');\\n-    // per-file stats\\n-    const numstat = (await exec('git', ['show', '--numstat', '--format=', hash])).stdout\\n-      .split('\\\\n')\\n-      .filter(Boolean)\\n-      .map((row) => {\\n-        const [add, del, ...rest] = row.split('\\\\t');\\n-        return {\\n-          additions: add === '-' ? null : Number(add),\\n-          deletions: del === '-' ? null : Number(del),\\n-          path: rest.join('\\\\t'),\\n-        };\\n-      });\\n-\\n-    const files = [];\\n-    for (const stat of numstat) {\\n-      if (!stat.path) continue;\\n-      const patch = (\\n-        await exec('git', ['show', '--unified=0', '--no-color', `${hash}^!`, '--', stat.path], {\\n-          maxBuffer: 10 * 1024 * 1024,\\n-        })\\n-      ).stdout;\\n-      files.push({ ...stat, patch });\\n-    }\\n-\\n-    commits.push({ hash, short, author, email, authoredAt, subject, files });\\n-  }\\n-\\n-  const outputData = {\\n-    range: {\\n-      old: oldRef,\\n-      new: newRef,\\n-      label: `${shortOld}..${shortNew}`,\\n-      startDate,\\n-      endDate,\\n-      commitCount,\\n-      generatedAt: new Date().toISOString(),\\n-    },\\n-    contributors,\\n-    topDirs: topDirList,\\n-    commits,\\n-  };\\n-\\n-  await writeFile(output, JSON.stringify(outputData, null, 2));\\n-  console.info(`Digest written to ${output}`);\\n-};\\n-\\n-main().catch((err) => {\\n-  console.error(err?.stack || err?.message || err);\\n-  process.exit(1);\\n-});\\n\",\n      \"codeSnippets\": []\n    }\n  ]\n},\n{\n  \"hash\": \"f0ca149d40d7a475daaa287adef6162b22882985\",\n  \"short\": \"f0ca149d4\",\n  \"author\": \"Siyuan Wang\",\n  \"email\": \"c.one@thrimbda.com\",\n  \"authoredAt\": \"2025-12-06 12:08:39 +0800\",\n  \"subject\": \"feat(ci): add report into pr (#2224)\",\n  \"conventionalCommit\": {\n    \"type\": \"feat\",\n    \"scope\": \"ci\",",
              "lineStart": 1030,
              "lineEnd": 1075
            },
            {
              "type": "function",
              "name": "getSeverityIndex",
              "code": "\"patch\": \"commit ac680a8a1d0d7d4817d059cae1ec5e517b04ed8d\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 13:33:10 2025 +0800\\n\\n    feat(alert-receiver): 限制告警详情元素数量以优化显示 (#2225)\\n\\ndiff --git a/apps/alert-receiver/src/feishu/render-alert-message-card.ts b/apps/alert-receiver/src/feishu/render-alert-message-card.ts\\nindex ec41e5125..ba4dcd182 100644\\n--- a/apps/alert-receiver/src/feishu/render-alert-message-card.ts\\n+++ b/apps/alert-receiver/src/feishu/render-alert-message-card.ts\\n@@ -7,0 +8 @@ const getSeverityIndex = (value: string) => SEVERITY_ORDER.indexOf(value as (typ\\n+const MAX_ALERT_ITEMS = 30; // 避免超过 Feishu 2.0 卡片 200 元素上限\\n@@ -18 +19,3 @@ export const renderAlertMessageCard = (group: IAlertGroup) => {\\n-  const detailElements = group.alerts.flatMap((alert) => {\\n+  const visibleAlerts = group.alerts.slice(0, MAX_ALERT_ITEMS);\\n+  const hiddenCount = Math.max(group.alerts.length - visibleAlerts.length, 0);\\n+  const detailElements = visibleAlerts.map((alert, index) => {\\n@@ -27,117 +30,9 @@ export const renderAlertMessageCard = (group: IAlertGroup) => {\\n-    return [\\n-      { tag: 'hr', margin },\\n-      {\\n-        tag: 'column_set',\\n-        horizontal_spacing: '8px',\\n-        horizontal_align: 'left',\\n-        columns: [\\n-          {\\n-            tag: 'column',\\n-            width: 'weighted',\\n-            elements: [\\n-              {\\n-                tag: 'markdown',\\n-                content: `<font color=\\\"grey\\\">当前状态</font>：<font color=\\\"${isFiring ? 'red' : 'green'}\\\">${\\n-                  isFiring ? '告警中' : '已解决'\\n-                }</font>`,\\n-                text_align: 'left',\\n-                text_size: 'normal_v2',\\n-                margin,\\n-              },\\n-            ],\\n-            vertical_align: 'top',\\n-            weight: 1,\\n-          },\\n-        ],\\n-        margin,\\n-      },\\n-      {\\n-        tag: 'column_set',\\n-        horizontal_spacing: '8px',\\n-        horizontal_align: 'left',\\n-        columns: [\\n-          {\\n-            tag: 'column',\\n-            width: 'weighted',\\n-            elements: [\\n-              {\\n-                tag: 'markdown',\\n-                content: `<font color=\\\"grey\\\">告警时间</font>\\\\n${alert.start_time}`,\\n-                text_align: 'left',\\n-                text_size: 'normal_v2',\\n-                margin,\\n-              },\\n-            ],\\n-            vertical_spacing: '8px',\\n-            horizontal_align: 'left',\\n-            vertical_align: 'top',\\n-            weight: 1,\\n-          },\\n-          {\\n-            tag: 'column',\\n-            width: 'weighted',\\n-            elements: [\\n-              {\\n-                tag: 'markdown',\\n-                content: `<font color=\\\"grey\\\">结束时间</font>\\\\n${endTime}`,\\n-                text_align: 'left',\\n-                text_size: 'normal_v2',\\n-                margin,\\n-              },\\n-            ],\\n-            vertical_align: 'top',\\n-            weight: 1,\\n-          },\\n-        ],\\n-        margin,\\n-      },\\n-      {\\n-        tag: 'column_set',\\n-        horizontal_spacing: '8px',\\n-        horizontal_align: 'left',\\n-        columns: [\\n-          {\\n-            tag: 'column',\\n-            width: 'weighted',\\n-            elements: [\\n-              {\\n-                tag: 'markdown',\\n-                content: `<font color=\\\"grey\\\">告警详情</font>：${alert.description ?? 'No description'}`,\\n-                text_align: 'left',\\n-                text_size: 'normal_v2',\\n-                margin,\\n-              },\\n-            ],\\n-            vertical_spacing: '8px',\\n-            horizontal_align: 'left',\\n-            vertical_align: 'top',\\n-            weight: 1,\\n-          },\\n-        ],\\n-        margin,\\n-      },\\n-      {\\n-        tag: 'column_set',\\n-        horizontal_spacing: '8px',\\n-        horizontal_align: 'left',\\n-        columns: [\\n-          {\\n-            tag: 'column',\\n-            width: 'weighted',\\n-            elements: [\\n-              {\\n-                tag: 'markdown',\\n-                content: `<font color=\\\"grey\\\">当前值</font>：${alert.current_value ?? 'N/A'}`,\\n-                text_align: 'left',\\n-                text_size: 'normal_v2',\\n-                margin,\\n-              },\\n-            ],\\n-            vertical_align: 'top',\\n-            weight: 1,\\n-          },\\n-        ],\\n-        margin,\\n-      },\\n-      { tag: 'hr', margin },\\n-    ];\\n+    const prefix = `${index + 1}. ${isFiring ? '[告警中]' : '[已解决]'}`;\\n+    const summary = alert.summary ?? alert.description ?? 'No description';\\n+    return {\\n+      tag: 'markdown',\\n+      content: `${prefix} ${alert.start_time} → ${endTime}\\\\n${summary}`,\\n+      text_align: 'left',\\n+      text_size: 'normal_v2',\\n+      margin,\\n+    };\\n@@ -273,0 +169,11 @@ export const renderAlertMessageCard = (group: IAlertGroup) => {\\n+          ...(hiddenCount > 0\\n+            ? [\\n+                {\\n+                  tag: 'markdown',\\n+                  content: `其余 ${hiddenCount} 条已隐藏，查看 Runbook 或链接获取完整列表。`,\\n+                  text_align: 'left',\\n+                  text_size: 'normal_v2',\\n+                  margin,\\n+                },\\n+              ]\\n+            : []),\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"MAX_ALERT_ITEMS\",",
              "lineStart": 1076,
              "lineEnd": 1080
            },
            {
              "type": "function",
              "name": "MAX_ALERT_ITEMS",
              "code": "  \"code\": \"const MAX_ALERT_ITEMS = 30; // 避免超过 Feishu 2.0 卡片 200 元素上限\",\n  \"lineStart\": 8,\n  \"lineEnd\": 18\n},\n{\n  \"type\": \"function\",\n  \"name\": \"visibleAlerts\",",
              "lineStart": 1081,
              "lineEnd": 1087
            },
            {
              "type": "function",
              "name": "visibleAlerts",
              "code": "  \"code\": \"const visibleAlerts = group.alerts.slice(0, MAX_ALERT_ITEMS);\",\n  \"lineStart\": 19,\n  \"lineEnd\": 19\n},\n{\n  \"type\": \"function\",\n  \"name\": \"hiddenCount\",",
              "lineStart": 1088,
              "lineEnd": 1094
            },
            {
              "type": "function",
              "name": "hiddenCount",
              "code": "  \"code\": \"const hiddenCount = Math.max(group.alerts.length - visibleAlerts.length, 0);\",\n  \"lineStart\": 20,\n  \"lineEnd\": 20\n},\n{\n  \"type\": \"function\",\n  \"name\": \"detailElements\",",
              "lineStart": 1095,
              "lineEnd": 1101
            },
            {
              "type": "function",
              "name": "detailElements",
              "code": "  \"code\": \"const detailElements = visibleAlerts.map((alert, index) => {\",\n  \"lineStart\": 21,\n  \"lineEnd\": 29\n},\n{\n  \"type\": \"function\",\n  \"name\": \"prefix\",",
              "lineStart": 1102,
              "lineEnd": 1108
            },
            {
              "type": "function",
              "name": "prefix",
              "code": "  \"code\": \"const prefix = `${index + 1}. ${isFiring ? '[告警中]' : '[已解决]'}`;\",\n  \"lineStart\": 30,\n  \"lineEnd\": 30\n},\n{\n  \"type\": \"function\",\n  \"name\": \"summary\",",
              "lineStart": 1109,
              "lineEnd": 1115
            },
            {
              "type": "function",
              "name": "summary",
              "code": "        \"code\": \"const summary = alert.summary ?? alert.description ?? 'No description';\\nreturn {\\n  tag: 'markdown',\\n  content: `${prefix} ${alert.start_time} → ${endTime}\\\\n${summary}`,\\n  text_align: 'left',\\n  text_size: 'normal_v2',\\n  margin,\\n};\\n      ...(hiddenCount > 0\\n        ? [\\n            {\\n              tag: 'markdown',\\n              content: `其余 ${hiddenCount} 条已隐藏，查看 Runbook 或链接获取完整列表。`,\\n              text_align: 'left',\\n              text_size: 'normal_v2',\",\n        \"lineStart\": 31,\n        \"lineEnd\": 180\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit ac680a8a1d0d7d4817d059cae1ec5e517b04ed8d\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sat Dec 6 13:33:10 2025 +0800\\n\\n    feat(alert-receiver): 限制告警详情元素数量以优化显示 (#2225)\\n\\ndiff --git a/common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json b/common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\\nnew file mode 100644\\nindex 000000000..bd628486b\\n--- /dev/null\\n+++ b/common/changes/@yuants/app-alert-receiver/2025-12-06-05-16.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/app-alert-receiver\\\",\\n+      \\\"comment\\\": \\\"reduce number of elements in alert details\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/app-alert-receiver\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 1116,
              "lineEnd": 1204
            },
            {
              "type": "function",
              "name": "accountConfigCache",
              "code": "\"patch\": \"commit 903a168628d3b7e10924a677b0fc4e9517f928f0\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sat Dec 6 15:39:51 2025 +0800\\n\\n    feat(submitOrder): enhance error handling and add portfolio margin mode support (#2228)\\n\\ndiff --git a/apps/vendor-okx/src/accountInfos/uid.ts b/apps/vendor-okx/src/accountInfos/uid.ts\\nindex 348b64b20..6dd95c14f 100644\\n--- a/apps/vendor-okx/src/accountInfos/uid.ts\\n+++ b/apps/vendor-okx/src/accountInfos/uid.ts\\n@@ -4,3 +4,3 @@ import { getAccountConfig, ICredential } from '../api/private-api';\\n-const accountConfigCache = createCache((key) => getAccountConfig(JSON.parse(key)), {\\n-  expire: 100_000,\\n-  swrAfter: 10_000,\\n+export const accountConfigCache = createCache((key) => getAccountConfig(JSON.parse(key)), {\\n+  expire: 1000_000, // 缓存 1000 秒\\n+  swrAfter: 100_000, // 100 秒后后台刷新\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"accountConfigCache\",",
              "lineStart": 1205,
              "lineEnd": 1209
            },
            {
              "type": "function",
              "name": "accountConfigCache",
              "code": "      \"code\": \"export const accountConfigCache = createCache((key) => getAccountConfig(JSON.parse(key)), {\\n  expire: 1000_000, // 缓存 1000 秒\\n  swrAfter: 100_000, // 100 秒后后台刷新\",\n      \"lineStart\": 4,\n      \"lineEnd\": 7\n    }\n  ]\n},\n{\n  \"additions\": 24,\n  \"deletions\": 13,\n  \"path\": \"apps/vendor-okx/src/orders/submitOrder.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1210,
              "lineEnd": 1220
            },
            {
              "type": "function",
              "name": "mapOrderDirectionToSide",
              "code": "\"patch\": \"commit 903a168628d3b7e10924a677b0fc4e9517f928f0\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sat Dec 6 15:39:51 2025 +0800\\n\\n    feat(submitOrder): enhance error handling and add portfolio margin mode support (#2228)\\n\\ndiff --git a/apps/vendor-okx/src/orders/submitOrder.ts b/apps/vendor-okx/src/orders/submitOrder.ts\\nindex 564c8a659..626ff6d2f 100644\\n--- a/apps/vendor-okx/src/orders/submitOrder.ts\\n+++ b/apps/vendor-okx/src/orders/submitOrder.ts\\n@@ -2 +2 @@ import { IOrder } from '@yuants/data-order';\\n-import { decodePath, formatTime, roundToStep } from '@yuants/utils';\\n+import { decodePath, formatTime, newError, roundToStep } from '@yuants/utils';\\n@@ -3,0 +4 @@ import { firstValueFrom, map } from 'rxjs';\\n+import { accountConfigCache } from '../accountInfos/uid';\\n@@ -20,12 +20,0 @@ const mapOrderDirectionToSide = (direction?: string) => {\\n-const mapOrderDirectionToPosSide = (direction?: string) => {\\n-  switch (direction) {\\n-    case 'OPEN_LONG':\\n-    case 'CLOSE_LONG':\\n-      return 'long';\\n-    case 'CLOSE_SHORT':\\n-    case 'OPEN_SHORT':\\n-      return 'short';\\n-  }\\n-  throw new Error(`Unknown direction: ${direction}`);\\n-};\\n-\\n@@ -44,0 +34,9 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n+  const accountConfigRes = await accountConfigCache.query(JSON.stringify(credential));\\n+  if (!accountConfigRes) throw newError('ACCOUNT_CONFIG_FETCH_ERROR', { accountConfigRes });\\n+  if (!accountConfigRes.data?.[0]) throw newError('ACCOUNT_CONFIG_FETCH_ERROR', { accountConfigRes });\\n+\\n+  /**\\n+   * 是否为组合保证金模式\\n+   */\\n+  const isPortfolioMarginMode = accountConfigRes.data[0].acctLv === '4';\\n+\\n@@ -100,0 +99,13 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n+  const mapOrderDirectionToPosSide = (direction?: string) => {\\n+    if (isPortfolioMarginMode) return undefined;\\n+    switch (direction) {\\n+      case 'OPEN_LONG':\\n+      case 'CLOSE_LONG':\\n+        return 'long';\\n+      case 'CLOSE_SHORT':\\n+      case 'OPEN_SHORT':\\n+        return 'short';\\n+    }\\n+    throw new Error(`Unknown direction: ${direction}`);\\n+  };\\n+\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"accountConfigRes\",",
              "lineStart": 1221,
              "lineEnd": 1225
            },
            {
              "type": "function",
              "name": "accountConfigRes",
              "code": "  \"code\": \"const accountConfigRes = await accountConfigCache.query(JSON.stringify(credential));\\nif (!accountConfigRes) throw newError('ACCOUNT_CONFIG_FETCH_ERROR', { accountConfigRes });\\nif (!accountConfigRes.data?.[0]) throw newError('ACCOUNT_CONFIG_FETCH_ERROR', { accountConfigRes });\\n\\n/**\\n * 是否为组合保证金模式\\n */\",\n  \"lineStart\": 34,\n  \"lineEnd\": 40\n},\n{\n  \"type\": \"function\",\n  \"name\": \"isPortfolioMarginMode\",",
              "lineStart": 1226,
              "lineEnd": 1232
            },
            {
              "type": "function",
              "name": "isPortfolioMarginMode",
              "code": "  \"code\": \"const isPortfolioMarginMode = accountConfigRes.data[0].acctLv === '4';\\n\",\n  \"lineStart\": 41,\n  \"lineEnd\": 98\n},\n{\n  \"type\": \"function\",\n  \"name\": \"mapOrderDirectionToPosSide\",",
              "lineStart": 1233,
              "lineEnd": 1239
            },
            {
              "type": "function",
              "name": "mapOrderDirectionToPosSide",
              "code": "        \"code\": \"const mapOrderDirectionToPosSide = (direction?: string) => {\\n  if (isPortfolioMarginMode) return undefined;\\n  switch (direction) {\\n    case 'OPEN_LONG':\\n    case 'CLOSE_LONG':\\n      return 'long';\\n    case 'CLOSE_SHORT':\\n    case 'OPEN_SHORT':\\n      return 'short';\\n  }\\n  throw new Error(`Unknown direction: ${direction}`);\\n};\\n\",\n        \"lineStart\": 99,\n        \"lineEnd\": 112\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit 903a168628d3b7e10924a677b0fc4e9517f928f0\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sat Dec 6 15:39:51 2025 +0800\\n\\n    feat(submitOrder): enhance error handling and add portfolio margin mode support (#2228)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-06-07-38.json b/common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\\nnew file mode 100644\\nindex 000000000..dd930f2db\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-06-07-38.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"fix portfolio submitOrder\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 1240,
              "lineEnd": 1336
            },
            {
              "type": "function",
              "name": "getFuturesTickers",
              "code": "  \"patch\": \"commit 0c88bb63e6e1d4e41e07c9d5253f37cea3a11962\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 16:57:41 2025 +0800\\n\\n    feat: add gate quote (#2230)\\n\\ndiff --git a/apps/vendor-gate/src/api/public-api.ts b/apps/vendor-gate/src/api/public-api.ts\\nindex 2371d8be2..faaad3eee 100644\\n--- a/apps/vendor-gate/src/api/public-api.ts\\n+++ b/apps/vendor-gate/src/api/public-api.ts\\n@@ -145 +145 @@ export const getFuturesTickers = (\\n- * https://www.gate.io/docs/developers/apiv4/zh_CN/#%E6%9F%A5%E8%AF%A2%E5%8D%95%E4%B8%AA%E4%BA%A4%E6%98%93%E5%AF%B9%E8%AF%A6%E6%83%85\\n+ * https://www.gate.com/docs/developers/apiv4/zh_CN/#%E8%8E%B7%E5%8F%96%E4%BA%A4%E6%98%93%E5%AF%B9-ticker-%E4%BF%A1%E6%81%AF\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 1,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-gate/src/index.ts\",\n  \"changeType\": \"added\",\n  \"patch\": \"commit 0c88bb63e6e1d4e41e07c9d5253f37cea3a11962\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 16:57:41 2025 +0800\\n\\n    feat: add gate quote (#2230)\\n\\ndiff --git a/apps/vendor-gate/src/index.ts b/apps/vendor-gate/src/index.ts\\nindex 0b87307ab..31888627b 100644\\n--- a/apps/vendor-gate/src/index.ts\\n+++ b/apps/vendor-gate/src/index.ts\\n@@ -4,0 +5 @@ import './services/exchange';\\n+import './services/markets/quote';\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 122,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-gate/src/services/markets/quote.ts\",",
              "lineStart": 1337,
              "lineEnd": 1352
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "\"patch\": \"commit 0c88bb63e6e1d4e41e07c9d5253f37cea3a11962\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 16:57:41 2025 +0800\\n\\n    feat: add gate quote (#2230)\\n\\ndiff --git a/apps/vendor-gate/src/services/markets/quote.ts b/apps/vendor-gate/src/services/markets/quote.ts\\nnew file mode 100644\\nindex 000000000..1624d58b9\\n--- /dev/null\\n+++ b/apps/vendor-gate/src/services/markets/quote.ts\\n@@ -0,0 +1,122 @@\\n+import { IQuote } from '@yuants/data-quote';\\n+import { Terminal } from '@yuants/protocol';\\n+import { writeToSQL } from '@yuants/sql';\\n+import { decodePath, encodePath, formatTime } from '@yuants/utils';\\n+import {\\n+  defer,\\n+  filter,\\n+  from,\\n+  map,\\n+  mergeMap,\\n+  repeat,\\n+  retry,\\n+  shareReplay,\\n+  merge,\\n+  catchError,\\n+  EMPTY,\\n+  groupBy,\\n+  scan,\\n+  share,\\n+  tap,\\n+} from 'rxjs';\\n+import { getFuturesTickers, getFuturesContracts, getSpotTickers } from '../../api/public-api';\\n+\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n+// 获取所有USDT永续合约\\n+const usdtFutureContracts$ = defer(() => getFuturesContracts('usdt', {})).pipe(\\n+  repeat({ delay: 3600_000 }),\\n+  retry({ delay: 60_000 }),\\n+  shareReplay(1),\\n+);\\n+\\n+// 从tickers获取价格和交易量数据\\n+const quoteFromTickers$ = defer(() => getFuturesTickers('usdt', {})).pipe(\\n+  mergeMap((tickers) => tickers),\\n+  map(\\n+    (ticker): Partial<IQuote> => ({\\n+      datasource_id: 'GATE',\\n+      product_id: encodePath('GATE', 'FUTURE', ticker.contract),\\n+      last_price: ticker.last,\\n+      ask_price: ticker.lowest_ask,\\n+      bid_price: ticker.highest_bid,\\n+      // GATE API doesn't provide bid/ask volumes in tickers endpoint\\n+      // We'll need to use order book for that if required\\n+      ask_volume: '0',\\n+      bid_volume: '0',\\n+      // total_size is the open interest\\n+      open_interest: ticker.total_size,\\n+      // funding_rate is the current funding rate\\n+      interest_rate_long: ticker.funding_rate ? `${-parseFloat(ticker.funding_rate)}` : undefined,\\n+      interest_rate_short: ticker.funding_rate,\\n+    }),\\n+  ),\\n+  repeat({ delay: 5000 }),\\n+  retry({ delay: 1000 }),\\n+);\\n+\\n+// 从现货tickers获取价格和交易量数据\\n+const quoteFromSpotTickers$ = defer(() => getSpotTickers({})).pipe(\\n+  mergeMap((tickers) => tickers),\\n+  map(\\n+    (ticker): Partial<IQuote> => ({\\n+      datasource_id: 'GATE',\\n+      product_id: encodePath('GATE', 'SPOT', ticker.currency_pair),\\n+      last_price: ticker.last,\\n+      ask_price: ticker.lowest_ask,\\n+      bid_price: ticker.highest_bid,\\n+      ask_volume: ticker.lowest_size ?? '0',\\n+      bid_volume: ticker.highest_size ?? '0',\\n+      // 现货没有持仓量的概念，设置为0\\n+      open_interest: '0',\\n+    }),\\n+  ),\\n+  repeat({ delay: 5000 }),\\n+  retry({ delay: 1000 }),\\n+);\\n+\\n+const quoteSources$ = [quoteFromTickers$, quoteFromSpotTickers$];\\n+\\n+const quote$ = defer(() =>\\n+  merge(\\n+    ...quoteSources$.map((x$) =>\\n+      defer(() => x$).pipe(\\n+        // 防止单个流关闭导致整体关闭\\n+        catchError(() => EMPTY),\\n+      ),\\n+    ),\\n+  ),\\n+).pipe(\\n+  groupBy((x) => encodePath(x.datasource_id, x.product_id)),\\n+  mergeMap((group$) => {\\n+    return group$.pipe(\\n+      //\\n+      scan((acc, cur) => Object.assign(acc, cur), {} as Partial<IQuote>),\\n+    );\\n+  }),\\n+  share(),\\n+);\\n+\\n+// 写入数据库\\n+if (process.env.WRITE_QUOTE_TO_SQL === 'true') {\\n+  terminal.channel.publishChannel('quote', { pattern: `^GATE/` }, (channel_id) => {\\n+    const [datasource_id, product_id] = decodePath(channel_id);\\n+    if (!datasource_id) {\\n+      throw 'datasource_id is required';\\n+    }\\n+    if (!product_id) {\\n+      throw 'product_id is required';\\n+    }\\n+    return quote$.pipe(filter((x) => x.product_id === product_id));\\n+  });\\n+  quote$\\n+    .pipe(\\n+      writeToSQL({\\n+        terminal,\\n+        writeInterval: 1000,\\n+        tableName: 'quote',\\n+        conflictKeys: ['datasource_id', 'product_id'],\\n+      }),\\n+    )\\n+    .subscribe();\\n+}\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"terminal\",",
              "lineStart": 1353,
              "lineEnd": 1357
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "  \"code\": \"const terminal = Terminal.fromNodeEnv();\\n\\n// 获取所有USDT永续合约\",\n  \"lineStart\": 24,\n  \"lineEnd\": 26\n},\n{\n  \"type\": \"function\",\n  \"name\": \"usdtFutureContracts\",",
              "lineStart": 1358,
              "lineEnd": 1364
            },
            {
              "type": "function",
              "name": "usdtFutureContracts",
              "code": "  \"code\": \"const usdtFutureContracts$ = defer(() => getFuturesContracts('usdt', {})).pipe(\\n  repeat({ delay: 3600_000 }),\\n  retry({ delay: 60_000 }),\\n  shareReplay(1),\\n);\\n\\n// 从tickers获取价格和交易量数据\",\n  \"lineStart\": 27,\n  \"lineEnd\": 33\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quoteFromTickers\",",
              "lineStart": 1365,
              "lineEnd": 1371
            },
            {
              "type": "function",
              "name": "quoteFromTickers",
              "code": "  \"code\": \"const quoteFromTickers$ = defer(() => getFuturesTickers('usdt', {})).pipe(\\n  mergeMap((tickers) => tickers),\\n  map(\\n    (ticker): Partial<IQuote> => ({\\n      datasource_id: 'GATE',\\n      product_id: encodePath('GATE', 'FUTURE', ticker.contract),\\n      last_price: ticker.last,\\n      ask_price: ticker.lowest_ask,\\n      bid_price: ticker.highest_bid,\\n      // GATE API doesn't provide bid/ask volumes in tickers endpoint\\n      // We'll need to use order book for that if required\\n      ask_volume: '0',\\n      bid_volume: '0',\\n      // total_size is the open interest\\n      open_interest: ticker.total_size,\",\n  \"lineStart\": 34,\n  \"lineEnd\": 58\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quoteFromSpotTickers\",",
              "lineStart": 1372,
              "lineEnd": 1378
            },
            {
              "type": "function",
              "name": "quoteFromSpotTickers",
              "code": "  \"code\": \"const quoteFromSpotTickers$ = defer(() => getSpotTickers({})).pipe(\\n  mergeMap((tickers) => tickers),\\n  map(\\n    (ticker): Partial<IQuote> => ({\\n      datasource_id: 'GATE',\\n      product_id: encodePath('GATE', 'SPOT', ticker.currency_pair),\\n      last_price: ticker.last,\\n      ask_price: ticker.lowest_ask,\\n      bid_price: ticker.highest_bid,\\n      ask_volume: ticker.lowest_size ?? '0',\\n      bid_volume: ticker.highest_size ?? '0',\\n      // 现货没有持仓量的概念，设置为0\\n      open_interest: '0',\\n    }),\\n  ),\",\n  \"lineStart\": 59,\n  \"lineEnd\": 77\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quoteSources\",",
              "lineStart": 1379,
              "lineEnd": 1385
            },
            {
              "type": "function",
              "name": "quoteSources",
              "code": "  \"code\": \"const quoteSources$ = [quoteFromTickers$, quoteFromSpotTickers$];\\n\",\n  \"lineStart\": 78,\n  \"lineEnd\": 79\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quote\",",
              "lineStart": 1386,
              "lineEnd": 1392
            },
            {
              "type": "function",
              "name": "quote",
              "code": "      \"code\": \"const quote$ = defer(() =>\\n  merge(\\n    ...quoteSources$.map((x$) =>\\n      defer(() => x$).pipe(\\n        // 防止单个流关闭导致整体关闭\\n        catchError(() => EMPTY),\\n      ),\\n    ),\\n  ),\\n).pipe(\\n  groupBy((x) => encodePath(x.datasource_id, x.product_id)),\\n  mergeMap((group$) => {\\n    return group$.pipe(\\n      //\\n      scan((acc, cur) => Object.assign(acc, cur), {} as Partial<IQuote>),\",\n      \"lineStart\": 80,\n      \"lineEnd\": 123\n    }\n  ]\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-gate/2025-12-06-08-55.json\",\n  \"changeType\": \"added\",\n  \"patch\": \"commit 0c88bb63e6e1d4e41e07c9d5253f37cea3a11962\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 16:57:41 2025 +0800\\n\\n    feat: add gate quote (#2230)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-06-08-55.json b/common/changes/@yuants/vendor-gate/2025-12-06-08-55.json\\nnew file mode 100644\\nindex 000000000..e92d08095\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-06-08-55.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"add gate quote\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n  \"codeSnippets\": []\n},\n{",
              "lineStart": 1393,
              "lineEnd": 1497
            },
            {
              "type": "function",
              "name": "exec",
              "code": "\"patch\": \"commit 5fc3bbfbb8ac96cfc6bfe30bc948a0ba1f362d58\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Sun Dec 7 00:14:07 2025 +0800\\n\\n    feat(git-changes-report): update skill (#2232)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/generate-json.js b/.claude/skills/git-changes-reporter/scripts/generate-json.js\\nindex 0922ee16a..da46bc31d 100755\\n--- a/.claude/skills/git-changes-reporter/scripts/generate-json.js\\n+++ b/.claude/skills/git-changes-reporter/scripts/generate-json.js\\n@@ -9,0 +10,21 @@ const exec = promisify(execFile);\\n+/**\\n+ * Default marker files that indicate project boundaries in monorepos\\n+ */\\n+const DEFAULT_PROJECT_MARKERS = [\\n+  'package.json',\\n+  'Cargo.toml',\\n+  'go.mod',\\n+  'requirements.txt',\\n+  'pyproject.toml',\\n+  'setup.py',\\n+  'pom.xml',\\n+  'build.gradle',\\n+  'build.gradle.kts',\\n+  'CMakeLists.txt',\\n+  'Makefile',\\n+  'pubspec.yaml', // Flutter/Dart\\n+  'mix.exs', // Elixir\\n+  'Gemfile', // Ruby\\n+  'composer.json', // PHP\\n+];\\n+\\n@@ -13 +34 @@ const usage = () => {\\n-      'Usage: generate-json.js <old_commit> <new_commit> [output_path]',\\n+      'Usage: generate-json.js <old_commit> <new_commit> [output_path] [options]',\\n@@ -22,0 +44,4 @@ const usage = () => {\\n+      'Options:',\\n+      '  --markers=FILE1,FILE2,...   Comma-separated list of marker files for project detection',\\n+      `                              Default: ${DEFAULT_PROJECT_MARKERS.slice(0, 4).join(',')},...`,\\n+      '',\\n@@ -26 +51 @@ const usage = () => {\\n-      '  generate-json.js 6df6ea741 1b4e97ac5',\\n+      '  generate-json.js 6df6ea741 1b4e97ac5 --markers=package.json,Cargo.toml',\\n@@ -90 +115,65 @@ const getContributors = async (oldRef, newRef) => {\\n-const getTopDirectories = async (oldRef, newRef) => {\\n+/**\\n+ * Scan repository for project roots by finding directories containing marker files\\n+ * @param {string[]} markers - List of marker file names (e.g., ['package.json', 'Cargo.toml'])\\n+ * @returns {Promise<Map<string, string>>} Map of directory path to marker file found\\n+ */\\n+const scanProjectRoots = async (markers) => {\\n+  const projectRoots = new Map();\\n+\\n+  // Use git ls-files to find all tracked marker files (faster than find)\\n+  for (const marker of markers) {\\n+    try {\\n+      const { stdout } = await exec('git', ['ls-files', '--full-name', `**/${marker}`, marker]);\\n+      const markerPaths = stdout.split('\\\\n').filter(Boolean);\\n+\\n+      for (const markerPath of markerPaths) {\\n+        // Extract directory containing the marker file\\n+        const dir = markerPath.includes('/') ? markerPath.substring(0, markerPath.lastIndexOf('/')) : '.';\\n+        // Only keep the first marker found for each directory\\n+        if (!projectRoots.has(dir)) {\\n+          projectRoots.set(dir, marker);\\n+        }\\n+      }\\n+    } catch {\\n+      // Ignore errors (marker not found)\\n+    }\\n+  }\\n+\\n+  return projectRoots;\\n+};\\n+\\n+/**\\n+ * Find the closest project root for a given file path\\n+ * @param {string} filePath - File path relative to repo root\\n+ * @param {Map<string, string>} projectRoots - Map of project directories to markers\\n+ * @returns {{project: string, marker: string} | null}\\n+ */\\n+const findProjectRoot = (filePath, projectRoots) => {\\n+  // Build list of ancestor directories from most specific to least\\n+  const parts = filePath.split('/');\\n+  const ancestors = [];\\n+\\n+  for (let i = parts.length - 1; i >= 0; i--) {\\n+    const ancestor = parts.slice(0, i).join('/') || '.';\\n+    ancestors.push(ancestor);\\n+  }\\n+\\n+  // Find the closest ancestor that is a project root\\n+  for (const ancestor of ancestors) {\\n+    if (projectRoots.has(ancestor)) {\\n+      return { project: ancestor, marker: projectRoots.get(ancestor) };\\n+    }\\n+  }\\n+\\n+  return null;\\n+};\\n+\\n+/**\\n+ * Analyze directory hotspots at both top-level and project-level\\n+ * @param {string} oldRef - Old commit reference\\n+ * @param {string} newRef - New commit reference\\n+ * @param {string[]} markers - Marker files for project detection\\n+ * @returns {Promise<{topLevel: Array, projects: Array}>}\\n+ */\\n+const getTopDirectories = async (oldRef, newRef, markers = DEFAULT_PROJECT_MARKERS) => {\\n+  // Get all changed files\\n@@ -95,5 +184,24 @@ const getTopDirectories = async (oldRef, newRef) => {\\n-  const dirCounts = files.reduce((acc, filePath) => {\\n-    const dir = filePath.split('/')[0] || '.';\\n-    acc.set(dir, (acc.get(dir) || 0) + 1);\\n-    return acc;\\n-  }, new Map());\\n+  // Scan for project roots\\n+  const projectRoots = await scanProjectRoots(markers);\\n+\\n+  const topLevelCounts = new Map();\\n+  const projectCounts = new Map();\\n+\\n+  for (const filePath of files) {\\n+    // Top-level directory (e.g., \\\"apps\\\", \\\"libraries\\\")\\n+    const topDir = filePath.split('/')[0] || '.';\\n+    topLevelCounts.set(topDir, (topLevelCounts.get(topDir) || 0) + 1);\\n+\\n+    // Project-level path based on marker detection\\n+    const projectInfo = findProjectRoot(filePath, projectRoots);\\n+    if (projectInfo) {\\n+      const key = projectInfo.project;\\n+      const existing = projectCounts.get(key) || { fileCount: 0, marker: projectInfo.marker };\\n+      projectCounts.set(key, { fileCount: existing.fileCount + 1, marker: existing.marker });\\n+    } else {\\n+      // File not under any detected project - use top-level dir\\n+      const key = topDir;\\n+      const existing = projectCounts.get(key) || { fileCount: 0, marker: null };\\n+      projectCounts.set(key, { fileCount: existing.fileCount + 1, marker: null });\\n+    }\\n+  }\\n@@ -101 +209 @@ const getTopDirectories = async (oldRef, newRef) => {\\n-  return Array.from(dirCounts.entries())\\n+  const topLevel = Array.from(topLevelCounts.entries())\\n@@ -103,0 +212,6 @@ const getTopDirectories = async (oldRef, newRef) => {\\n+\\n+  const projects = Array.from(projectCounts.entries())\\n+    .map(([project, data]) => ({ project, fileCount: data.fileCount, marker: data.marker }))\\n+    .sort((a, b) => b.fileCount - a.fileCount);\\n+\\n+  return { topLevel, projects, markersUsed: markers };\\n@@ -452,0 +567,26 @@ const identifyRisks = (commits) => {\\n+/**\\n+ * Parse command line arguments\\n+ * @param {string[]} args - Command line arguments\\n+ * @returns {{oldRef: string, newRef: string, output: string|null, markers: string[]}}\\n+ */\\n+const parseArgs = (args) => {\\n+  let oldRef = null;\\n+  let newRef = null;\\n+  let output = null;\\n+  let markers = DEFAULT_PROJECT_MARKERS;\\n+\\n+  for (const arg of args) {\\n+    if (arg.startsWith('--markers=')) {\\n+      markers = arg.substring('--markers='.length).split(',').filter(Boolean);\\n+    } else if (!oldRef) {\\n+      oldRef = arg;\\n+    } else if (!newRef) {\\n+      newRef = arg;\\n+    } else if (!output && !arg.startsWith('--')) {\\n+      output = arg;\\n+    }\\n+  }\\n+\\n+  return { oldRef, newRef, output, markers };\\n+};\\n+\\n@@ -454 +594 @@ const main = async () => {\\n-  const [oldRef, newRef, outputArg] = process.argv.slice(2);\\n+  const { oldRef, newRef, output: outputArg, markers } = parseArgs(process.argv.slice(2));\\n@@ -501,2 +641,2 @@ const main = async () => {\\n-  console.info('Analyzing file changes...');\\n-  const topDirs = await getTopDirectories(oldRef, newRef);\\n+  console.info('Analyzing file changes (detecting project boundaries)...');\\n+  const directoryAnalysis = await getTopDirectories(oldRef, newRef, markers);\\n@@ -526 +666 @@ const main = async () => {\\n-    topDirs,\\n+    directoryAnalysis,\\n@@ -534 +674 @@ const main = async () => {\\n-      version: '2.0.0',\\n+      version: '3.0.0',\\n@@ -541,0 +682 @@ const main = async () => {\\n+  console.info(`📊 Summary: ${commitCount} commits, ${contributors.length} contributors`);\\n@@ -543 +684 @@ const main = async () => {\\n-    `📊 Summary: ${commitCount} commits, ${contributors.length} contributors, ${topDirs.length} directories changed`,\\n+    `📁 Directories: ${directoryAnalysis.topLevel.length} top-level, ${directoryAnalysis.projects.length} projects detected`,\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"DEFAULT_PROJECT_MARKERS\",",
              "lineStart": 1498,
              "lineEnd": 1502
            },
            {
              "type": "function",
              "name": "DEFAULT_PROJECT_MARKERS",
              "code": "  \"code\": \"const DEFAULT_PROJECT_MARKERS = [\\n  'package.json',\\n  'Cargo.toml',\\n  'go.mod',\\n  'requirements.txt',\\n  'pyproject.toml',\\n  'setup.py',\\n  'pom.xml',\\n  'build.gradle',\\n  'build.gradle.kts',\\n  'CMakeLists.txt',\\n  'Makefile',\\n  'pubspec.yaml', // Flutter/Dart\\n  'mix.exs', // Elixir\\n  'Gemfile', // Ruby\",\n  \"lineStart\": 13,\n  \"lineEnd\": 119\n},\n{\n  \"type\": \"function\",\n  \"name\": \"scanProjectRoots\",",
              "lineStart": 1503,
              "lineEnd": 1509
            },
            {
              "type": "function",
              "name": "scanProjectRoots",
              "code": "  \"code\": \"const scanProjectRoots = async (markers) => {\",\n  \"lineStart\": 120,\n  \"lineEnd\": 120\n},\n{\n  \"type\": \"function\",\n  \"name\": \"projectRoots\",",
              "lineStart": 1510,
              "lineEnd": 1516
            },
            {
              "type": "function",
              "name": "projectRoots",
              "code": "  \"code\": \"const projectRoots = new Map();\\n\\n// Use git ls-files to find all tracked marker files (faster than find)\",\n  \"lineStart\": 121,\n  \"lineEnd\": 123\n},\n{\n  \"type\": \"function\",\n  \"name\": \"marker\",",
              "lineStart": 1517,
              "lineEnd": 1523
            },
            {
              "type": "function",
              "name": "marker",
              "code": "  \"code\": \"for (const marker of markers) {\\n  try {\\n    const { stdout } = await exec('git', ['ls-files', '--full-name', `**/${marker}`, marker]);\",\n  \"lineStart\": 124,\n  \"lineEnd\": 126\n},\n{\n  \"type\": \"function\",\n  \"name\": \"markerPaths\",",
              "lineStart": 1524,
              "lineEnd": 1530
            },
            {
              "type": "function",
              "name": "markerPaths",
              "code": "  \"code\": \"const markerPaths = stdout.split('\\\\n').filter(Boolean);\\n\",\n  \"lineStart\": 127,\n  \"lineEnd\": 128\n},\n{\n  \"type\": \"function\",\n  \"name\": \"markerPath\",",
              "lineStart": 1531,
              "lineEnd": 1537
            },
            {
              "type": "function",
              "name": "markerPath",
              "code": "  \"code\": \"for (const markerPath of markerPaths) {\\n  // Extract directory containing the marker file\",\n  \"lineStart\": 129,\n  \"lineEnd\": 130\n},\n{\n  \"type\": \"function\",\n  \"name\": \"dir\",",
              "lineStart": 1538,
              "lineEnd": 1544
            },
            {
              "type": "function",
              "name": "dir",
              "code": "  \"code\": \"        const dir = markerPath.includes('/') ? markerPath.substring(0, markerPath.lastIndexOf('/')) : '.';\\n        // Only keep the first marker found for each directory\\n        if (!projectRoots.has(dir)) {\\n          projectRoots.set(dir, marker);\\n        }\\n      }\\n    } catch {\\n      // Ignore errors (marker not found)\\n    }\\n  }\\n\\n  return projectRoots;\\n};\\n\\n/**\",\n  \"lineStart\": 131,\n  \"lineEnd\": 150\n},\n{\n  \"type\": \"function\",\n  \"name\": \"findProjectRoot\",",
              "lineStart": 1545,
              "lineEnd": 1551
            },
            {
              "type": "function",
              "name": "findProjectRoot",
              "code": "  \"code\": \"const findProjectRoot = (filePath, projectRoots) => {\\n  // Build list of ancestor directories from most specific to least\",\n  \"lineStart\": 151,\n  \"lineEnd\": 152\n},\n{\n  \"type\": \"function\",\n  \"name\": \"parts\",",
              "lineStart": 1552,
              "lineEnd": 1558
            },
            {
              "type": "function",
              "name": "parts",
              "code": "  \"code\": \"const parts = filePath.split('/');\",\n  \"lineStart\": 153,\n  \"lineEnd\": 153\n},\n{\n  \"type\": \"function\",\n  \"name\": \"ancestors\",",
              "lineStart": 1559,
              "lineEnd": 1565
            },
            {
              "type": "function",
              "name": "ancestors",
              "code": "  \"code\": \"const ancestors = [];\\n\",\n  \"lineStart\": 154,\n  \"lineEnd\": 155\n},\n{\n  \"type\": \"function\",\n  \"name\": \"i\",",
              "lineStart": 1566,
              "lineEnd": 1572
            },
            {
              "type": "function",
              "name": "i",
              "code": "  \"code\": \"for (let i = parts.length - 1; i >= 0; i--) {\",\n  \"lineStart\": 156,\n  \"lineEnd\": 156\n},\n{\n  \"type\": \"function\",\n  \"name\": \"ancestor\",",
              "lineStart": 1573,
              "lineEnd": 1579
            },
            {
              "type": "function",
              "name": "ancestor",
              "code": "  \"code\": \"  const ancestor = parts.slice(0, i).join('/') || '.';\\n  ancestors.push(ancestor);\\n}\\n\\n// Find the closest ancestor that is a project root\",\n  \"lineStart\": 157,\n  \"lineEnd\": 161\n},\n{\n  \"type\": \"function\",\n  \"name\": \"ancestor\",",
              "lineStart": 1580,
              "lineEnd": 1586
            },
            {
              "type": "function",
              "name": "ancestor",
              "code": "  \"code\": \"  for (const ancestor of ancestors) {\\n    if (projectRoots.has(ancestor)) {\\n      return { project: ancestor, marker: projectRoots.get(ancestor) };\\n    }\\n  }\\n\\n  return null;\\n};\\n\\n/**\\n * Analyze directory hotspots at both top-level and project-level\\n * @param {string} oldRef - Old commit reference\\n * @param {string} newRef - New commit reference\\n * @param {string[]} markers - Marker files for project detection\\n * @returns {Promise<{topLevel: Array, projects: Array}>}\",\n  \"lineStart\": 162,\n  \"lineEnd\": 177\n},\n{\n  \"type\": \"function\",\n  \"name\": \"getTopDirectories\",",
              "lineStart": 1587,
              "lineEnd": 1593
            },
            {
              "type": "function",
              "name": "getTopDirectories",
              "code": "  \"code\": \"const getTopDirectories = async (oldRef, newRef, markers = DEFAULT_PROJECT_MARKERS) => {\\n  // Get all changed files\\n  // Scan for project roots\",\n  \"lineStart\": 178,\n  \"lineEnd\": 184\n},\n{\n  \"type\": \"function\",\n  \"name\": \"projectRoots\",",
              "lineStart": 1594,
              "lineEnd": 1600
            },
            {
              "type": "function",
              "name": "projectRoots",
              "code": "  \"code\": \"const projectRoots = await scanProjectRoots(markers);\\n\",\n  \"lineStart\": 185,\n  \"lineEnd\": 186\n},\n{\n  \"type\": \"function\",\n  \"name\": \"topLevelCounts\",",
              "lineStart": 1601,
              "lineEnd": 1607
            },
            {
              "type": "function",
              "name": "topLevelCounts",
              "code": "  \"code\": \"const topLevelCounts = new Map();\",\n  \"lineStart\": 187,\n  \"lineEnd\": 187\n},\n{\n  \"type\": \"function\",\n  \"name\": \"projectCounts\",",
              "lineStart": 1608,
              "lineEnd": 1614
            },
            {
              "type": "function",
              "name": "projectCounts",
              "code": "  \"code\": \"const projectCounts = new Map();\\n\",\n  \"lineStart\": 188,\n  \"lineEnd\": 189\n},\n{\n  \"type\": \"function\",\n  \"name\": \"filePath\",",
              "lineStart": 1615,
              "lineEnd": 1621
            },
            {
              "type": "function",
              "name": "filePath",
              "code": "  \"code\": \"for (const filePath of files) {\\n  // Top-level directory (e.g., \\\"apps\\\", \\\"libraries\\\")\",\n  \"lineStart\": 190,\n  \"lineEnd\": 191\n},\n{\n  \"type\": \"function\",\n  \"name\": \"topDir\",",
              "lineStart": 1622,
              "lineEnd": 1628
            },
            {
              "type": "function",
              "name": "topDir",
              "code": "  \"code\": \"const topDir = filePath.split('/')[0] || '.';\\ntopLevelCounts.set(topDir, (topLevelCounts.get(topDir) || 0) + 1);\\n\\n// Project-level path based on marker detection\",\n  \"lineStart\": 192,\n  \"lineEnd\": 195\n},\n{\n  \"type\": \"function\",\n  \"name\": \"projectInfo\",",
              "lineStart": 1629,
              "lineEnd": 1635
            },
            {
              "type": "function",
              "name": "projectInfo",
              "code": "  \"code\": \"const projectInfo = findProjectRoot(filePath, projectRoots);\\nif (projectInfo) {\",\n  \"lineStart\": 196,\n  \"lineEnd\": 197\n},\n{\n  \"type\": \"function\",\n  \"name\": \"key\",",
              "lineStart": 1636,
              "lineEnd": 1642
            },
            {
              "type": "function",
              "name": "key",
              "code": "  \"code\": \"const key = projectInfo.project;\",\n  \"lineStart\": 198,\n  \"lineEnd\": 198\n},\n{\n  \"type\": \"function\",\n  \"name\": \"existing\",",
              "lineStart": 1643,
              "lineEnd": 1649
            },
            {
              "type": "function",
              "name": "existing",
              "code": "  \"code\": \"  const existing = projectCounts.get(key) || { fileCount: 0, marker: projectInfo.marker };\\n  projectCounts.set(key, { fileCount: existing.fileCount + 1, marker: existing.marker });\\n} else {\\n  // File not under any detected project - use top-level dir\",\n  \"lineStart\": 199,\n  \"lineEnd\": 202\n},\n{\n  \"type\": \"function\",\n  \"name\": \"key\",",
              "lineStart": 1650,
              "lineEnd": 1656
            },
            {
              "type": "function",
              "name": "key",
              "code": "  \"code\": \"const key = topDir;\",\n  \"lineStart\": 203,\n  \"lineEnd\": 203\n},\n{\n  \"type\": \"function\",\n  \"name\": \"existing\",",
              "lineStart": 1657,
              "lineEnd": 1663
            },
            {
              "type": "function",
              "name": "existing",
              "code": "  \"code\": \"    const existing = projectCounts.get(key) || { fileCount: 0, marker: null };\\n    projectCounts.set(key, { fileCount: existing.fileCount + 1, marker: null });\\n  }\\n}\",\n  \"lineStart\": 204,\n  \"lineEnd\": 208\n},\n{\n  \"type\": \"function\",\n  \"name\": \"topLevel\",",
              "lineStart": 1664,
              "lineEnd": 1670
            },
            {
              "type": "function",
              "name": "topLevel",
              "code": "  \"code\": \"const topLevel = Array.from(topLevelCounts.entries())\\n\",\n  \"lineStart\": 209,\n  \"lineEnd\": 212\n},\n{\n  \"type\": \"function\",\n  \"name\": \"projects\",",
              "lineStart": 1671,
              "lineEnd": 1677
            },
            {
              "type": "function",
              "name": "projects",
              "code": "  \"code\": \"  const projects = Array.from(projectCounts.entries())\\n    .map(([project, data]) => ({ project, fileCount: data.fileCount, marker: data.marker }))\\n    .sort((a, b) => b.fileCount - a.fileCount);\\n\\n  return { topLevel, projects, markersUsed: markers };\\n/**\\n * Parse command line arguments\\n * @param {string[]} args - Command line arguments\\n * @returns {{oldRef: string, newRef: string, output: string|null, markers: string[]}}\\n */\",\n  \"lineStart\": 213,\n  \"lineEnd\": 571\n},\n{\n  \"type\": \"function\",\n  \"name\": \"parseArgs\",",
              "lineStart": 1678,
              "lineEnd": 1684
            },
            {
              "type": "function",
              "name": "parseArgs",
              "code": "  \"code\": \"const parseArgs = (args) => {\",\n  \"lineStart\": 572,\n  \"lineEnd\": 572\n},\n{\n  \"type\": \"function\",\n  \"name\": \"oldRef\",",
              "lineStart": 1685,
              "lineEnd": 1691
            },
            {
              "type": "function",
              "name": "oldRef",
              "code": "  \"code\": \"let oldRef = null;\",\n  \"lineStart\": 573,\n  \"lineEnd\": 573\n},\n{\n  \"type\": \"function\",\n  \"name\": \"newRef\",",
              "lineStart": 1692,
              "lineEnd": 1698
            },
            {
              "type": "function",
              "name": "newRef",
              "code": "  \"code\": \"let newRef = null;\",\n  \"lineStart\": 574,\n  \"lineEnd\": 574\n},\n{\n  \"type\": \"function\",\n  \"name\": \"output\",",
              "lineStart": 1699,
              "lineEnd": 1705
            },
            {
              "type": "function",
              "name": "output",
              "code": "  \"code\": \"let output = null;\",\n  \"lineStart\": 575,\n  \"lineEnd\": 575\n},\n{\n  \"type\": \"function\",\n  \"name\": \"markers\",",
              "lineStart": 1706,
              "lineEnd": 1712
            },
            {
              "type": "function",
              "name": "markers",
              "code": "  \"code\": \"let markers = DEFAULT_PROJECT_MARKERS;\\n\",\n  \"lineStart\": 576,\n  \"lineEnd\": 577\n},\n{\n  \"type\": \"function\",\n  \"name\": \"arg\",",
              "lineStart": 1713,
              "lineEnd": 1719
            },
            {
              "type": "function",
              "name": "arg",
              "code": "  \"code\": \"  for (const arg of args) {\\n    if (arg.startsWith('--markers=')) {\\n      markers = arg.substring('--markers='.length).split(',').filter(Boolean);\\n    } else if (!oldRef) {\\n      oldRef = arg;\\n    } else if (!newRef) {\\n      newRef = arg;\\n    } else if (!output && !arg.startsWith('--')) {\\n      output = arg;\\n    }\\n  }\\n\\n  return { oldRef, newRef, output, markers };\\n};\\n\",\n  \"lineStart\": 578,\n  \"lineEnd\": 641\n},\n{\n  \"type\": \"function\",\n  \"name\": \"directoryAnalysis\",",
              "lineStart": 1720,
              "lineEnd": 1726
            },
            {
              "type": "function",
              "name": "directoryAnalysis",
              "code": "          \"code\": \"const directoryAnalysis = await getTopDirectories(oldRef, newRef, markers);\\n  directoryAnalysis,\\n    version: '3.0.0',\\nconsole.info(`📊 Summary: ${commitCount} commits, ${contributors.length} contributors`);\\n  `📁 Directories: ${directoryAnalysis.topLevel.length} top-level, ${directoryAnalysis.projects.length} projects detected`,\",\n          \"lineStart\": 642,\n          \"lineEnd\": 685\n        }\n      ]\n    }\n  ]\n},\n{\n  \"hash\": \"ed665d773f1ea325ab878d1c0a862e1529e99ea4\",\n  \"short\": \"ed665d773\",\n  \"author\": \"Ryan\",\n  \"email\": \"stayrealrhr@gmail.com\",\n  \"authoredAt\": \"2025-12-07 00:55:15 +0800\",\n  \"subject\": \"fix: fix trade product id (#2233)\",",
              "lineStart": 1727,
              "lineEnd": 1752
            },
            {
              "type": "function",
              "name": "tradeParser",
              "code": "      \"patch\": \"commit ed665d773f1ea325ab878d1c0a862e1529e99ea4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sun Dec 7 00:55:15 2025 +0800\\n\\n    fix: fix trade product id (#2233)\\n\\ndiff --git a/apps/vendor-okx/src/trade.ts b/apps/vendor-okx/src/trade.ts\\nindex cbb88bc53..dac18a969 100644\\n--- a/apps/vendor-okx/src/trade.ts\\n+++ b/apps/vendor-okx/src/trade.ts\\n@@ -56 +56 @@ const tradeParser = async (accountId: string, params: Record<string, string>): P\\n-        trade.product_id = encodePath(bill.instType, bill.instId);\\n+        trade.product_id = encodePath('OKX', bill.instType, bill.instId);\\n\",\n      \"codeSnippets\": []\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-okx/2025-12-06-16-53.json\",\n      \"changeType\": \"added\",\n      \"patch\": \"commit ed665d773f1ea325ab878d1c0a862e1529e99ea4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sun Dec 7 00:55:15 2025 +0800\\n\\n    fix: fix trade product id (#2233)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-06-16-53.json b/common/changes/@yuants/vendor-okx/2025-12-06-16-53.json\\nnew file mode 100644\\nindex 000000000..a7c7d92a1\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-06-16-53.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"fix trade product id\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n      \"codeSnippets\": []\n    }\n  ]\n},\n{\n  \"hash\": \"7df40da19d36cf9dbc8542e9138dd31f58c63213\",",
              "lineStart": 1753,
              "lineEnd": 1838
            },
            {
              "type": "function",
              "name": "loadFuturePositions",
              "code": "\"patch\": \"commit 2db8e6cb93e6c269af8041785d297eec3521aef6\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 03:51:16 2025 +0800\\n\\n    feat: refactor future positions loading and update margin rate calculation (#2235)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/future.ts b/apps/vendor-gate/src/services/accounts/future.ts\\nindex 840e18154..4e762c193 100644\\n--- a/apps/vendor-gate/src/services/accounts/future.ts\\n+++ b/apps/vendor-gate/src/services/accounts/future.ts\\n@@ -1,4 +1 @@\\n-import type { IActionHandlerOfGetAccountInfo, IPosition } from '@yuants/data-account';\\n-import { firstValueFrom } from 'rxjs';\\n-import { getFuturePositions, getFuturesAccounts, ICredential } from '../../api/private-api';\\n-import { mapProductIdToUsdtFutureProduct$ } from '../markets/product';\\n+import type { IPosition } from '@yuants/data-account';\\n@@ -5,0 +3,2 @@ import { encodePath } from '@yuants/utils';\\n+import { getFuturePositions, getFuturesAccounts, ICredential } from '../../api/private-api';\\n+import { productCache } from '../markets/product';\\n@@ -8,32 +7,29 @@ export const loadFuturePositions = async (credential: ICredential): Promise<IPos\\n-  const [positionsRes, productMap] = await Promise.all([\\n-    getFuturePositions(credential, 'usdt'),\\n-    firstValueFrom(mapProductIdToUsdtFutureProduct$),\\n-  ]);\\n-  const positions = Array.isArray(positionsRes) ? positionsRes : [];\\n-  return positions\\n-    .filter((pos) => Math.abs(pos.size) > 0)\\n-    .map((position): IPosition => {\\n-      const product_id = encodePath('GATE', 'FUTURE', position.contract);\\n-      const theProduct = productMap.get(product_id);\\n-      const volume = Math.abs(position.size);\\n-      const closable_price = Number(position.mark_price);\\n-      const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\\n-      return {\\n-        datasource_id: 'GATE',\\n-        position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n-        product_id,\\n-        direction:\\n-          position.mode === 'dual_long'\\n-            ? 'LONG'\\n-            : position.mode === 'dual_short'\\n-            ? 'SHORT'\\n-            : position.size > 0\\n-            ? 'LONG'\\n-            : 'SHORT',\\n-        volume,\\n-        free_volume: Math.abs(position.size),\\n-        position_price: Number(position.entry_price),\\n-        closable_price,\\n-        floating_profit: Number(position.unrealised_pnl),\\n-        valuation,\\n-      };\\n+  const positions: IPosition[] = [];\\n+  const positionsRes = await getFuturePositions(credential, 'usdt');\\n+\\n+  for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\\n+    if (!(Math.abs(position.size) > 0)) continue;\\n+\\n+    const product_id = encodePath('GATE', 'FUTURE', position.contract);\\n+    const theProduct = await productCache.query(product_id);\\n+    const volume = Math.abs(position.size);\\n+    const closable_price = Number(position.mark_price);\\n+    const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\\n+    positions.push({\\n+      datasource_id: 'GATE',\\n+      position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n+      product_id,\\n+      direction:\\n+        position.mode === 'dual_long'\\n+          ? 'LONG'\\n+          : position.mode === 'dual_short'\\n+          ? 'SHORT'\\n+          : position.size > 0\\n+          ? 'LONG'\\n+          : 'SHORT',\\n+      volume,\\n+      free_volume: Math.abs(position.size),\\n+      position_price: Number(position.entry_price),\\n+      closable_price,\\n+      floating_profit: Number(position.unrealised_pnl),\\n+      valuation,\\n@@ -40,0 +37,3 @@ export const loadFuturePositions = async (credential: ICredential): Promise<IPos\\n+  }\\n+\\n+  return positions;\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"positions\",",
              "lineStart": 1839,
              "lineEnd": 1843
            },
            {
              "type": "function",
              "name": "positions",
              "code": "  \"code\": \"const positions: IPosition[] = [];\",\n  \"lineStart\": 7,\n  \"lineEnd\": 7\n},\n{\n  \"type\": \"function\",\n  \"name\": \"positionsRes\",",
              "lineStart": 1844,
              "lineEnd": 1850
            },
            {
              "type": "function",
              "name": "positionsRes",
              "code": "  \"code\": \"const positionsRes = await getFuturePositions(credential, 'usdt');\\n\",\n  \"lineStart\": 8,\n  \"lineEnd\": 9\n},\n{\n  \"type\": \"function\",\n  \"name\": \"position\",",
              "lineStart": 1851,
              "lineEnd": 1857
            },
            {
              "type": "function",
              "name": "position",
              "code": "  \"code\": \"for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\\n  if (!(Math.abs(position.size) > 0)) continue;\\n\",\n  \"lineStart\": 10,\n  \"lineEnd\": 12\n},\n{\n  \"type\": \"function\",\n  \"name\": \"product_id\",",
              "lineStart": 1858,
              "lineEnd": 1864
            },
            {
              "type": "function",
              "name": "product_id",
              "code": "  \"code\": \"const product_id = encodePath('GATE', 'FUTURE', position.contract);\",\n  \"lineStart\": 13,\n  \"lineEnd\": 13\n},\n{\n  \"type\": \"function\",\n  \"name\": \"theProduct\",",
              "lineStart": 1865,
              "lineEnd": 1871
            },
            {
              "type": "function",
              "name": "theProduct",
              "code": "  \"code\": \"const theProduct = await productCache.query(product_id);\",\n  \"lineStart\": 14,\n  \"lineEnd\": 14\n},\n{\n  \"type\": \"function\",\n  \"name\": \"volume\",",
              "lineStart": 1872,
              "lineEnd": 1878
            },
            {
              "type": "function",
              "name": "volume",
              "code": "  \"code\": \"const volume = Math.abs(position.size);\",\n  \"lineStart\": 15,\n  \"lineEnd\": 15\n},\n{\n  \"type\": \"function\",\n  \"name\": \"closable_price\",",
              "lineStart": 1879,
              "lineEnd": 1885
            },
            {
              "type": "function",
              "name": "closable_price",
              "code": "  \"code\": \"const closable_price = Number(position.mark_price);\",\n  \"lineStart\": 16,\n  \"lineEnd\": 16\n},\n{\n  \"type\": \"function\",\n  \"name\": \"valuation\",",
              "lineStart": 1886,
              "lineEnd": 1892
            },
            {
              "type": "function",
              "name": "valuation",
              "code": "      \"code\": \"const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\\npositions.push({\\n  datasource_id: 'GATE',\\n  position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n  product_id,\\n  direction:\\n    position.mode === 'dual_long'\\n      ? 'LONG'\\n      : position.mode === 'dual_short'\\n      ? 'SHORT'\\n      : position.size > 0\\n      ? 'LONG'\\n      : 'SHORT',\\n  volume,\\n  free_volume: Math.abs(position.size),\",\n      \"lineStart\": 17,\n      \"lineEnd\": 40\n    }\n  ]\n},\n{\n  \"additions\": 4,\n  \"deletions\": 57,\n  \"path\": \"apps/vendor-gate/src/services/markets/product.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1893,
              "lineEnd": 1903
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "\"patch\": \"commit 2db8e6cb93e6c269af8041785d297eec3521aef6\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 03:51:16 2025 +0800\\n\\n    feat: refactor future positions loading and update margin rate calculation (#2235)\\n\\ndiff --git a/apps/vendor-gate/src/services/markets/product.ts b/apps/vendor-gate/src/services/markets/product.ts\\nindex 38f600251..64b6c0758 100644\\n--- a/apps/vendor-gate/src/services/markets/product.ts\\n+++ b/apps/vendor-gate/src/services/markets/product.ts\\n@@ -1 +1 @@\\n-import { IProduct } from '@yuants/data-product';\\n+import { createProductCache } from '@yuants/data-product';\\n@@ -3,3 +2,0 @@ import { Terminal } from '@yuants/protocol';\\n-import { createSQLWriter } from '@yuants/sql';\\n-import { defer, from, map, mergeMap, repeat, retry, shareReplay, Subject, tap, toArray } from 'rxjs';\\n-import { getFuturesContracts, getSpotCurrencyPairs } from '../../api/public-api';\\n@@ -6,0 +4 @@ import { encodePath } from '@yuants/utils';\\n+import { getFuturesContracts, getSpotCurrencyPairs } from '../../api/public-api';\\n@@ -8,52 +6 @@ import { encodePath } from '@yuants/utils';\\n-const terminal = Terminal.fromNodeEnv();\\n-\\n-const product$ = new Subject<IProduct>();\\n-\\n-const usdtFutureProducts$ = defer(() => getFuturesContracts('usdt', {})).pipe(\\n-  mergeMap((contracts) =>\\n-    from(contracts).pipe(\\n-      map((contract): IProduct => {\\n-        const [base, quote] = contract.name.split('_');\\n-        return {\\n-          datasource_id: 'GATE',\\n-          product_id: encodePath('GATE', 'FUTURE', contract.name),\\n-          base_currency: base,\\n-          quote_currency: quote,\\n-          value_scale: Number(contract.quanto_multiplier),\\n-          price_step: Number(contract.order_price_round),\\n-          volume_step: 1,\\n-          name: '',\\n-          value_scale_unit: '',\\n-          margin_rate: 0,\\n-          value_based_cost: 0,\\n-          volume_based_cost: 0,\\n-          max_position: 0,\\n-          max_volume: 0,\\n-          allow_long: true,\\n-          allow_short: true,\\n-          market_id: 'GATE/USDT-FUTURE',\\n-          no_interest_rate: false,\\n-        };\\n-      }),\\n-      tap((item) => product$.next(item)),\\n-      toArray(),\\n-    ),\\n-  ),\\n-  repeat({ delay: 3_600_000 }),\\n-  retry({ delay: 60_000 }),\\n-  shareReplay(1),\\n-);\\n-\\n-usdtFutureProducts$.subscribe();\\n-\\n-export const mapProductIdToUsdtFutureProduct$ = usdtFutureProducts$.pipe(\\n-  map((items) => new Map(items.map((item) => [item.product_id, item]))),\\n-  shareReplay(1),\\n-);\\n-\\n-createSQLWriter(terminal, {\\n-  data$: product$,\\n-  tableName: 'product',\\n-  conflictKeys: ['datasource_id', 'product_id'],\\n-  writeInterval: 1000,\\n-});\\n+export const productCache = createProductCache(Terminal.fromNodeEnv());\\n@@ -78 +25 @@ export const listProducts = async () => {\\n-      margin_rate: 0,\\n+      margin_rate: 1 / Number(contract.leverage_max),\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"productCache\",",
              "lineStart": 1904,
              "lineEnd": 1908
            },
            {
              "type": "function",
              "name": "productCache",
              "code": "        \"code\": \"export const productCache = createProductCache(Terminal.fromNodeEnv());\\n      margin_rate: 1 / Number(contract.leverage_max),\",\n        \"lineStart\": 6,\n        \"lineEnd\": 26\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-gate/2025-12-06-19-49.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit 2db8e6cb93e6c269af8041785d297eec3521aef6\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 03:51:16 2025 +0800\\n\\n    feat: refactor future positions loading and update margin rate calculation (#2235)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-06-19-49.json b/common/changes/@yuants/vendor-gate/2025-12-06-19-49.json\\nnew file mode 100644\\nindex 000000000..3e3441d42\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-06-19-49.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"fix margin rate of swap\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 1909,
              "lineEnd": 1942
            },
            {
              "type": "function",
              "name": "submitOrder",
              "code": "      \"patch\": \"commit cbd12db67dfff0a77ac9b150763df5f52a8facbe\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 04:03:29 2025 +0800\\n\\n    fix: update contract extraction in submitOrder and add change log (#2237)\\n\\ndiff --git a/apps/vendor-gate/src/services/orders/submitOrder.ts b/apps/vendor-gate/src/services/orders/submitOrder.ts\\nindex 830e79b7e..321398ad1 100644\\n--- a/apps/vendor-gate/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-gate/src/services/orders/submitOrder.ts\\n@@ -40 +40 @@ export const submitOrder: IActionHandlerOfSubmitOrder<ICredential> = async (cred\\n-  const [, TYPE] = decodePath(order.product_id);\\n+  const [, TYPE, contract] = decodePath(order.product_id);\\n@@ -43 +43 @@ export const submitOrder: IActionHandlerOfSubmitOrder<ICredential> = async (cred\\n-      contract: order.product_id,\\n+      contract,\\n\",\n      \"codeSnippets\": []\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-gate/2025-12-06-20-01.json\",\n      \"changeType\": \"added\",\n      \"patch\": \"commit cbd12db67dfff0a77ac9b150763df5f52a8facbe\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Sun Dec 7 04:03:29 2025 +0800\\n\\n    fix: update contract extraction in submitOrder and add change log (#2237)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-06-20-01.json b/common/changes/@yuants/vendor-gate/2025-12-06-20-01.json\\nnew file mode 100644\\nindex 000000000..f1eaf84bb\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-06-20-01.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"fix submit order\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n      \"codeSnippets\": []\n    }\n  ]\n},\n{\n  \"hash\": \"b5b0452ca84f640607c9064e978c40c318b37783\",",
              "lineStart": 1943,
              "lineEnd": 2036
            },
            {
              "type": "function",
              "name": "handleSwapOrder",
              "code": "      \"patch\": \"commit 7644c64a58627d52225e3cfc611ef1d4f04d73a4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sun Dec 7 04:12:40 2025 +0800\\n\\n    feat: fix huobi submit order (#2238)\\n\\ndiff --git a/apps/vendor-huobi/src/services/orders/submitOrder.ts b/apps/vendor-huobi/src/services/orders/submitOrder.ts\\nindex 7699595d2..876e70b54 100644\\n--- a/apps/vendor-huobi/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-huobi/src/services/orders/submitOrder.ts\\n@@ -25,0 +26 @@ async function handleSwapOrder(order: IOrder, credential: ICredential): Promise<\\n+  const [, instType, contractCode] = decodePath(order.product_id);\\n@@ -27 +28 @@ async function handleSwapOrder(order: IOrder, credential: ICredential): Promise<\\n-    contract_code: order.product_id,\\n+    contract_code: contractCode,\\n@@ -60,0 +62,2 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n+  const [, instType, contractCode] = decodePath(order.product_id);\\n+\\n@@ -65 +68 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n-    getSpotTick({ symbol: order.product_id }),\\n+    getSpotTick({ symbol: contractCode }),\\n@@ -81 +84 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n-    symbol: order.product_id,\\n+    symbol: contractCode,\\n\",\n      \"codeSnippets\": []\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-huobi/2025-12-06-20-10.json\",\n      \"changeType\": \"added\",\n      \"patch\": \"commit 7644c64a58627d52225e3cfc611ef1d4f04d73a4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sun Dec 7 04:12:40 2025 +0800\\n\\n    feat: fix huobi submit order (#2238)\\n\\ndiff --git a/common/changes/@yuants/vendor-huobi/2025-12-06-20-10.json b/common/changes/@yuants/vendor-huobi/2025-12-06-20-10.json\\nnew file mode 100644\\nindex 000000000..0522c10f9\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-huobi/2025-12-06-20-10.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\",\\n+      \\\"comment\\\": \\\"fix submit order\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n      \"codeSnippets\": []\n    }\n  ]\n},\n{\n  \"hash\": \"e44fdfa6c14e001dbe5c89d96e42b08a9694ecf4\",",
              "lineStart": 2037,
              "lineEnd": 2346
            }
          ]
        },
        {
          "additions": 189,
          "deletions": 0,
          "path": "docs/reports/git-changes-report-2025-12-07.md",
          "changeType": "added",
          "patch": "commit e71d2e5cdc1cd09625f02f5c9640927bd807db50\nAuthor: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 15:30:03 2025 +0800\n\n    feat: add daily git change report for 2025-12-07 - 16 commits (#2240)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n    Co-authored-by: Siyuan Wang <c.one@thrimbda.com>\n\ndiff --git a/docs/reports/git-changes-report-2025-12-07.md b/docs/reports/git-changes-report-2025-12-07.md\nnew file mode 100644\nindex 000000000..341a8b0fa\n--- /dev/null\n+++ b/docs/reports/git-changes-report-2025-12-07.md\n@@ -0,0 +1,189 @@\n+# Git 变更报告（c3b9a3726..e44fdfa6c）\n+\n+> **时间范围**：2025-12-06 至 2025-12-07\n+> **分析深度**：Level 2\n+\n+## 1. 概览\n+\n+- **提交数量**：16\n+- **主要贡献者**：humblelittlec1[bot] (6 commits), Siyuan Wang (4 commits), CZ (3 commits), Ryan (3 commits)\n+- **热点项目**：`apps/vendor-gate` (9 文件), `apps/vendor-okx` (6 文件), `apps/alert-receiver` (4 文件)\n+- **风险指标**：⚠️ 2 个风险项（1 个高风险，1 个中风险）\n+\n+## 2. 核心变更\n+\n+### 2.1 Git 变更报告技能增强\n+\n+**相关提交**：`56216a2d6`\n+**作者**：Siyuan Wang\n+\n+**设计意图**：\n+增强 git-changes-reporter skill 的功能和文档质量，使其更适合自动化报告生成。主要改进包括：重构技能文档结构，明确使用场景和核心原则；增强 JSON 生成脚本，自动提取代码片段和解析 conventional commit 格式；添加风险指标识别和领域聚类分析；提供更详细的报告模板和质量检查清单。这些改进使技能能够生成更结构化、更有洞察力的变更报告，减少人工分析工作量。\n+\n+**核心代码**：\n+[generate-json.js:L111-L131](.claude/skills/git-changes-reporter/scripts/generate-json.js#L111-L131)\n+\n+```javascript\n+const parseConventionalCommit = (subject) => {\n+  const conventionalRegex = /^(\\w+)(\\(([^)]+)\\))?(!)?:\\s*(.+)$/;\n+  const match = subject.match(conventionalRegex);\n+\n+  if (!match) {\n+    return { type: 'other', scope: null, breaking: false };\n+  }\n+\n+  return {\n+    type: match[1], // feat, fix, refactor, etc.\n+    scope: match[3] || null,\n+    breaking: match[4] === '!',\n+  };\n+};\n+```\n+\n+**影响范围**：\n+- 影响模块：`.claude/skills/git-changes-reporter/`\n+- 需要关注：所有使用该技能生成报告的场景都将受益于更丰富的分析功能\n+\n+### 2.2 Gate 期货仓位加载重构与保证金率计算更新\n+\n+**相关提交**：`2db8e6cb9`\n+**作者**：CZ\n+\n+**设计意图**：\n+重构 Gate 交易所期货仓位加载逻辑，优化性能和代码结构。原实现使用 `Promise.all` 并行获取仓位数据和产品映射，但产品映射的 RxJS 流可能导致不必要的复杂性。新实现改为顺序处理，使用 `productCache.query()` 按需查询产品信息，减少不必要的网络请求和内存占用。同时更新保证金率计算逻辑，确保仓位估值更准确。这种重构提高了代码可读性和维护性，同时保持功能一致性。\n+\n+**核心代码**：\n+[future.ts:L8-L37](apps/vendor-gate/src/services/accounts/future.ts#L8-L37)\n+\n+```typescript\n+export const loadFuturePositions = async (credential: ICredential): Promise<IPosition[]> => {\n+  const positions: IPosition[] = [];\n+  const positionsRes = await getFuturePositions(credential, 'usdt');\n+\n+  for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\n+    if (!(Math.abs(position.size) > 0)) continue;\n+\n+    const product_id = encodePath('GATE', 'FUTURE', position.contract);\n+    const theProduct = await productCache.query(product_id);\n+    const volume = Math.abs(position.size);\n+    const closable_price = Number(position.mark_price);\n+    const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\n+    positions.push({\n+      datasource_id: 'GATE',\n+      position_id: `${position.contract}-${position.leverage}-${position.mode}`,\n+      product_id,\n+      direction:\n+        position.mode === 'dual_long'\n+          ? 'LONG'\n+          : position.mode === 'dual_short'\n+          ? 'SHORT'\n+          : position.size > 0\n+          ? 'LONG'\n+          : 'SHORT',\n+      volume,\n+      free_volume: Math.abs(position.size),\n+      position_price: Number(position.entry_price),\n+      closable_price,\n+      floating_profit: Number(position.unrealised_pnl),\n+      valuation,\n+    });\n+  }\n+\n+  return positions;\n+};\n+```\n+\n+**影响范围**：\n+- 影响模块：`apps/vendor-gate` 期货仓位查询功能\n+- 需要关注：仓位估值计算逻辑变化，可能影响风险监控和报表\n+\n+### 2.3 Huobi 订单提交修复\n+\n+**相关提交**：`7644c64a5`\n+**作者**：Ryan\n+\n+**设计意图**：\n+修复 Huobi 交易所订单提交中的产品 ID 解析问题。原代码直接使用 `order.product_id` 作为合约代码，但实际需要从编码路径中解析出合约代码部分。通过添加 `decodePath(order.product_id)` 调用，正确提取合约代码，确保 swap 订单和超级保证金订单能够正确提交到交易所。这个修复解决了因产品 ID 格式不匹配导致的订单提交失败问题，提高了交易系统的稳定性。\n+\n+**核心代码**：\n+[submitOrder.ts:L25-L28](apps/vendor-huobi/src/services/orders/submitOrder.ts#L25-L28)\n+\n+```typescript\n+async function handleSwapOrder(order: IOrder, credential: ICredential): Promise<IOrder> {\n+  const [, instType, contractCode] = decodePath(order.product_id);\n+  const res = await submitSwapOrder(credential, {\n+    contract_code: contractCode,\n+    // ... 其他参数\n+  });\n+}\n+```\n+\n+**影响范围**：\n+- 影响模块：`apps/vendor-huobi` 订单提交功能\n+- 需要关注：所有 Huobi swap 和超级保证金订单提交\n+\n+### 2.4 Gate API 接口重构\n+\n+**相关提交**：`0c88bb63e`\n+**作者**：humblelittlec1[bot]\n+\n+**设计意图**：\n+重构 Gate 交易所的 API 接口结构，提升代码组织和维护性。主要改动包括重新组织公共 API 模块，优化市场数据查询接口，改进产品缓存机制。这些重构旨在减少代码重复，提高接口一致性，为后续功能扩展提供更好的基础架构。虽然这是技术性重构，但对依赖 Gate API 的交易策略和数据流有潜在影响。\n+\n+**影响范围**：\n+- 影响模块：`apps/vendor-gate/src/api/`, `apps/vendor-gate/src/services/markets/`\n+- 需要关注：API 调用路径可能发生变化，需要验证现有集成\n+\n+## 3. 贡献者\n+\n+| 作者 | 提交数 | 主要工作 | 关键提交 |\n+| ---- | ------ | -------- | -------- |\n+| humblelittlec1[bot] | 6 | 版本发布自动化、接口重构 | `0c88bb63e` |\n+| Siyuan Wang | 4 | Git 报告技能增强、文档改进 | `56216a2d6` |\n+| CZ | 3 | 期货仓位加载重构、保证金计算 | `2db8e6cb9` |\n+| Ryan | 3 | Huobi 订单提交修复、错误处理 | `7644c64a5` |\n+\n+## 4. 风险评估\n+\n+### 兼容性影响\n+\n+**高风险**：Gate API 接口重构（`0c88bb63e`）\n+\n+- **变更内容**：重构了 `apps/vendor-gate/src/api/public-api.ts` 和 `apps/vendor-gate/src/services/markets/quote.ts`\n+- **受影响服务**：\n+  - 依赖 Gate 公共 API 的数据查询服务\n+  - 使用 Gate 市场数据的产品缓存机制\n+- **验证要求**：需要测试市场数据查询和产品信息获取功能是否正常工作\n+\n+### 配置变更\n+\n+- **无重大配置变更**：本次变更主要涉及代码重构和功能修复，未引入新的配置项或修改现有配置格式\n+\n+### 性能影响\n+\n+**中风险**：Gate 期货仓位加载重构（`2db8e6cb9`）\n+\n+- **性能影响**：从并行处理改为顺序处理，可能略微增加仓位加载时间\n+- **内存优化**：减少不必要的产品映射缓存，降低内存使用\n+- **业务影响**：对高频仓位查询场景可能有轻微性能影响，但提高了代码稳定性和可维护性\n+\n+### 测试覆盖\n+\n+**中风险**：测试覆盖不足\n+\n+- **现状**：本次变更包含多个功能修复和重构，但未见相应的测试文件更新\n+- **建议**：\n+  - 为 Huobi 订单提交修复添加集成测试\n+  - 为 Gate 期货仓位加载重构添加单元测试\n+  - 验证 Gate API 接口重构后的功能完整性\n+- **风险缓解**：在 staging 环境充分测试相关功能模块\n+\n+---\n+\n+**报告生成时间**：2025-12-07  \n+**数据源**：`docs/reports/git-changes-2025-12-07.json`  \n+**技能版本**：git-changes-reporter 3.0.0\n+\n+🤖 Generated with [Claude Code](https://claude.ai/code)\n+\n+Co-Authored-By: Claude <noreply@anthropic.com>\n\\ No newline at end of file\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "parseConventionalCommit",
              "code": "const parseConventionalCommit = (subject) => {",
              "lineStart": 27,
              "lineEnd": 27
            },
            {
              "type": "function",
              "name": "conventionalRegex",
              "code": "const conventionalRegex = /^(\\w+)(\\(([^)]+)\\))?(!)?:\\s*(.+)$/;",
              "lineStart": 28,
              "lineEnd": 28
            },
            {
              "type": "function",
              "name": "match",
              "code": "  const match = subject.match(conventionalRegex);\n\n  if (!match) {\n    return { type: 'other', scope: null, breaking: false };\n  }\n\n  return {\n    type: match[1], // feat, fix, refactor, etc.\n    scope: match[3] || null,\n    breaking: match[4] === '!',\n  };\n};\n```\n\n**影响范围**：",
              "lineStart": 29,
              "lineEnd": 58
            },
            {
              "type": "function",
              "name": "loadFuturePositions",
              "code": "export const loadFuturePositions = async (credential: ICredential): Promise<IPosition[]> => {",
              "lineStart": 59,
              "lineEnd": 59
            },
            {
              "type": "function",
              "name": "positions",
              "code": "const positions: IPosition[] = [];",
              "lineStart": 60,
              "lineEnd": 60
            },
            {
              "type": "function",
              "name": "positionsRes",
              "code": "const positionsRes = await getFuturePositions(credential, 'usdt');\n",
              "lineStart": 61,
              "lineEnd": 62
            },
            {
              "type": "function",
              "name": "position",
              "code": "for (const position of Array.isArray(positionsRes) ? positionsRes : []) {\n  if (!(Math.abs(position.size) > 0)) continue;\n",
              "lineStart": 63,
              "lineEnd": 65
            },
            {
              "type": "function",
              "name": "product_id",
              "code": "const product_id = encodePath('GATE', 'FUTURE', position.contract);",
              "lineStart": 66,
              "lineEnd": 66
            },
            {
              "type": "function",
              "name": "theProduct",
              "code": "const theProduct = await productCache.query(product_id);",
              "lineStart": 67,
              "lineEnd": 67
            },
            {
              "type": "function",
              "name": "volume",
              "code": "const volume = Math.abs(position.size);",
              "lineStart": 68,
              "lineEnd": 68
            },
            {
              "type": "function",
              "name": "closable_price",
              "code": "const closable_price = Number(position.mark_price);",
              "lineStart": 69,
              "lineEnd": 69
            },
            {
              "type": "function",
              "name": "valuation",
              "code": "const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\npositions.push({\n  datasource_id: 'GATE',\n  position_id: `${position.contract}-${position.leverage}-${position.mode}`,\n  product_id,\n  direction:\n    position.mode === 'dual_long'\n      ? 'LONG'\n      : position.mode === 'dual_short'\n      ? 'SHORT'\n      : position.size > 0\n      ? 'LONG'\n      : 'SHORT',\n  volume,\n  free_volume: Math.abs(position.size),",
              "lineStart": 70,
              "lineEnd": 111
            },
            {
              "type": "function",
              "name": "handleSwapOrder",
              "code": "async function handleSwapOrder(order: IOrder, credential: ICredential): Promise<IOrder> {\n  const [, instType, contractCode] = decodePath(order.product_id);",
              "lineStart": 112,
              "lineEnd": 113
            },
            {
              "type": "function",
              "name": "res",
              "code": "  const res = await submitSwapOrder(credential, {\n    contract_code: contractCode,\n    // ... 其他参数\n  });\n}\n```\n\n**影响范围**：\n- 影响模块：`apps/vendor-huobi` 订单提交功能\n- 需要关注：所有 Huobi swap 和超级保证金订单提交\n\n### 2.4 Gate API 接口重构\n\n**相关提交**：`0c88bb63e`\n**作者**：humblelittlec1[bot]",
              "lineStart": 114,
              "lineEnd": 191
            }
          ]
        }
      ]
    },
    {
      "hash": "492e1c7840e0268304776cbff8e6e74ef69e3dab",
      "short": "492e1c784",
      "author": "github-actions[bot]",
      "email": "41898282+github-actions[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-09 15:30:54 +0800",
      "subject": "feat: add daily git change report for 2025-12-06 - 21 commits (#2227)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 1800,
          "deletions": 0,
          "path": "docs/reports/git-changes-2025-12-06.json",
          "changeType": "added",
          "patch": "commit 492e1c7840e0268304776cbff8e6e74ef69e3dab\nAuthor: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 15:30:54 2025 +0800\n\n    feat: add daily git change report for 2025-12-06 - 21 commits (#2227)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n    Co-authored-by: Siyuan Wang <c.one@thrimbda.com>\n\ndiff --git a/docs/reports/git-changes-2025-12-06.json b/docs/reports/git-changes-2025-12-06.json\nnew file mode 100644\nindex 000000000..4a15cee6b\n--- /dev/null\n+++ b/docs/reports/git-changes-2025-12-06.json\n@@ -0,0 +1,1800 @@\n+{\n+  \"range\": {\n+    \"old\": \"c36262caddee5b4ee9ada840501c81e554b5de6a\",\n+    \"new\": \"c3b9a3726918ed17e9a53614b7ccf8673e97e88d\",\n+    \"label\": \"c36262cad..c3b9a3726\",\n+    \"startDate\": \"2025-12-05\",\n+    \"endDate\": \"2025-12-06\",\n+    \"commitCount\": 21,\n+    \"generatedAt\": \"2025-12-06T06:36:33.236Z\"\n+  },\n+  \"contributors\": [\n+    {\n+      \"name\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"commits\": 9\n+    },\n+    {\n+      \"name\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"commits\": 8\n+    },\n+    {\n+      \"name\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"commits\": 4\n+    }\n+  ],\n+  \"topDirs\": [\n+    {\n+      \"dir\": \"apps\",\n+      \"fileCount\": 24\n+    },\n+    {\n+      \"dir\": \"common\",\n+      \"fileCount\": 3\n+    }\n+  ],\n+  \"commits\": [\n+    {\n+      \"hash\": \"6f0d6e65cf5ac4f2cfd3b2236b067f325a5fd017\",\n+      \"short\": \"6f0d6e65c\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-05 13:39:48 +0800\",\n+      \"subject\": \"feat: add broker tag to order submission parameters (#2201)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/experimental/submitOrder.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 6f0d6e65cf5ac4f2cfd3b2236b067f325a5fd017\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 13:39:48 2025 +0800\\n\\n    feat: add broker tag to order submission parameters (#2201)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/submitOrder.ts b/apps/vendor-okx/src/experimental/submitOrder.ts\\nindex 343ec45f3..bfeca4a48 100644\\n--- a/apps/vendor-okx/src/experimental/submitOrder.ts\\n+++ b/apps/vendor-okx/src/experimental/submitOrder.ts\\n@@ -117,0 +118 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n+    tag: process.env.BROKER_TAG,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 6f0d6e65cf5ac4f2cfd3b2236b067f325a5fd017\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 13:39:48 2025 +0800\\n\\n    feat: add broker tag to order submission parameters (#2201)\\n\\ndiff --git a/apps/vendor-okx/src/orders/submitOrder.ts b/apps/vendor-okx/src/orders/submitOrder.ts\\nindex d9200e3cf..5a161696c 100644\\n--- a/apps/vendor-okx/src/orders/submitOrder.ts\\n+++ b/apps/vendor-okx/src/orders/submitOrder.ts\\n@@ -117,0 +118 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n+    tag: process.env.BROKER_TAG,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 6f0d6e65cf5ac4f2cfd3b2236b067f325a5fd017\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 13:39:48 2025 +0800\\n\\n    feat: add broker tag to order submission parameters (#2201)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-05-38.json b/common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\\nnew file mode 100644\\nindex 000000000..4363f35a4\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"add broker tag\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"60338d13357d6778e0d82ccaa0a5a438f112f814\",\n+      \"short\": \"60338d133\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-05 13:44:12 +0800\",\n+      \"subject\": \"feat: add broker tag to algo order (#2202)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 3,\n+          \"path\": \"apps/vendor-okx/src/services.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 60338d13357d6778e0d82ccaa0a5a438f112f814\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 13:44:12 2025 +0800\\n\\n    feat: add broker tag to algo order (#2202)\\n\\ndiff --git a/apps/vendor-okx/src/services.ts b/apps/vendor-okx/src/services.ts\\nindex 2cbbc938f..9c8c077ad 100644\\n--- a/apps/vendor-okx/src/services.ts\\n+++ b/apps/vendor-okx/src/services.ts\\n@@ -3 +2,0 @@ import { defer } from 'rxjs';\\n-import { getDefaultCredential, postGridAlgoOrder } from './api/private-api';\\n@@ -4,0 +4 @@ import { getTradingAccountId } from './accountInfos/uid';\\n+import { getDefaultCredential, postGridAlgoOrder } from './api/private-api';\\n@@ -12 +12,3 @@ defer(async () => {\\n-  terminal.server.provideService(\\n+  type Request = Parameters<typeof postGridAlgoOrder>[1];\\n+\\n+  terminal.server.provideService<Request, any>(\\n@@ -22 +24,2 @@ defer(async () => {\\n-        const result = await postGridAlgoOrder(credential, msg.req as any);\\n+        msg.req.tag = process.env.BROKER_TAG;\\n+        const result = await postGridAlgoOrder(credential, msg.req);\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"result\",\n+              \"code\": \"const result = await postGridAlgoOrder(credential, msg.req);\",\n+              \"lineStart\": 25,\n+              \"lineEnd\": 26\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 60338d13357d6778e0d82ccaa0a5a438f112f814\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 13:44:12 2025 +0800\\n\\n    feat: add broker tag to algo order (#2202)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-05-42.json b/common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\\nnew file mode 100644\\nindex 000000000..e1ee03ccf\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"add broker tag to algo order\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"624436a6e4c829649ce41eba3eb5d343c669779f\",\n+      \"short\": \"624436a6e\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-05 13:48:23 +0800\",\n+      \"subject\": \"chore: bump version (#2203)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 22,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 624436a6e4c829649ce41eba3eb5d343c669779f\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 13:48:23 2025 +0800\\n\\n    chore: bump version (#2203)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex 7649a74c2..b372c1ad7 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,22 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.0\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.0\\\",\\n+      \\\"date\\\": \\\"Fri, 05 Dec 2025 05:46:23 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"minor\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add broker tag\\\"\\n+          }\\n+        ],\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add broker tag to algo order\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 12,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 624436a6e4c829649ce41eba3eb5d343c669779f\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 13:48:23 2025 +0800\\n\\n    chore: bump version (#2203)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex 8acce7199..2c57a21cc 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,12 @@\\n-This log was last generated on Thu, 04 Dec 2025 16:51:07 GMT and should not be manually modified.\\n+This log was last generated on Fri, 05 Dec 2025 05:46:23 GMT and should not be manually modified.\\n+\\n+## 0.29.0\\n+Fri, 05 Dec 2025 05:46:23 GMT\\n+\\n+### Minor changes\\n+\\n+- add broker tag\\n+\\n+### Patches\\n+\\n+- add broker tag to algo order\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 624436a6e4c829649ce41eba3eb5d343c669779f\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 13:48:23 2025 +0800\\n\\n    chore: bump version (#2203)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 3e058d461..5a652b575 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.28.4\\\",\\n+  \\\"version\\\": \\\"0.29.0\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 624436a6e4c829649ce41eba3eb5d343c669779f\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 13:48:23 2025 +0800\\n\\n    chore: bump version (#2203)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-05-38.json b/common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\\ndeleted file mode 100644\\nindex 4363f35a4..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"add broker tag\\\",\\n-      \\\"type\\\": \\\"minor\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 624436a6e4c829649ce41eba3eb5d343c669779f\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 13:48:23 2025 +0800\\n\\n    chore: bump version (#2203)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-05-42.json b/common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\\ndeleted file mode 100644\\nindex e1ee03ccf..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"add broker tag to algo order\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-04-16-51.json => main_2025-12-05-05-46.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\",\n+      \"short\": \"ac108ab9d\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-05 14:28:04 +0800\",\n+      \"subject\": \"refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"refactor\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 14,\n+          \"path\": \"apps/vendor-okx/src/experimental/cancelOrder.ts\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/cancelOrder.ts b/apps/vendor-okx/src/experimental/cancelOrder.ts\\ndeleted file mode 100644\\nindex 6c4b53b5a..000000000\\n--- a/apps/vendor-okx/src/experimental/cancelOrder.ts\\n+++ /dev/null\\n@@ -1,14 +0,0 @@\\n-import { IOrder } from '@yuants/data-order';\\n-import { decodePath } from '@yuants/utils';\\n-import { ICredential, postTradeCancelOrder } from '../api/private-api';\\n-\\n-export const cancelOrder = async (credential: ICredential, order: IOrder) => {\\n-  const [, , instId] = decodePath(order.product_id);\\n-  const res = await postTradeCancelOrder(credential, {\\n-    instId,\\n-    ordId: order.order_id!,\\n-  });\\n-  if (res.code !== '0') {\\n-    throw new Error(`Cancel order failed: code=${res.code} msg=${res.msg}`);\\n-  }\\n-};\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 3,\n+          \"path\": \"apps/vendor-okx/src/experimental/exchange.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/exchange.ts b/apps/vendor-okx/src/experimental/exchange.ts\\nindex 98e379e8a..df5c9dc9e 100644\\n--- a/apps/vendor-okx/src/experimental/exchange.ts\\n+++ b/apps/vendor-okx/src/experimental/exchange.ts\\n@@ -5 +5,3 @@ import { getAccountConfig, ICredential } from '../api/private-api';\\n-import { cancelOrder } from './cancelOrder';\\n+import { cancelOrder } from '../orders/cancelOrder';\\n+import { modifyOrder } from '../orders/modifyOrder';\\n+import { submitOrder } from '../orders/submitOrder';\\n@@ -8 +9,0 @@ import { getPositions } from './getPositions';\\n-import { modifyOrder } from './modifyOrder';\\n@@ -10 +10,0 @@ import { listProducts } from './product';\\n-import { submitOrder } from './submitOrder';\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 73,\n+          \"path\": \"apps/vendor-okx/src/experimental/modifyOrder.ts\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/modifyOrder.ts b/apps/vendor-okx/src/experimental/modifyOrder.ts\\ndeleted file mode 100644\\nindex 5e1e31188..000000000\\n--- a/apps/vendor-okx/src/experimental/modifyOrder.ts\\n+++ /dev/null\\n@@ -1,73 +0,0 @@\\n-import { IOrder } from '@yuants/data-order';\\n-import { formatTime, decodePath, roundToStep } from '@yuants/utils';\\n-import { firstValueFrom, map } from 'rxjs';\\n-import { ICredential, postTradeAmendOrder } from '../api/private-api';\\n-import { productService } from '../public-data/product';\\n-import { spotMarketTickers$ } from '../public-data/quote';\\n-\\n-export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n-  const [, instType, instId] = decodePath(order.product_id);\\n-  const params: {\\n-    instId: string;\\n-    ordId: string;\\n-    newPx?: string;\\n-    newSz?: string;\\n-  } = {\\n-    instId,\\n-    ordId: order.order_id!, // 使用现有订单ID\\n-  };\\n-\\n-  // 如果需要修改价格\\n-  if (order.price !== undefined) {\\n-    params.newPx = order.price.toString();\\n-  }\\n-\\n-  // 如果需要修改数量\\n-  if (order.volume !== undefined) {\\n-    // 处理数量修改，类似于 SubmitOrder 中的逻辑\\n-    if (instType === 'SWAP') {\\n-      params.newSz = order.volume.toString();\\n-    } else if (instType === 'SPOT') {\\n-      params.newSz = order.volume.toString();\\n-    } else if (instType === 'MARGIN') {\\n-      if (order.order_type === 'LIMIT') {\\n-        params.newSz = order.volume.toString();\\n-      }\\n-      if (order.order_type === 'MAKER') {\\n-        params.newSz = order.volume.toString();\\n-      }\\n-      if (order.order_type === 'MARKET') {\\n-        // 对于市价单，可能需要根据当前价格计算新的数量\\n-        const price = await firstValueFrom(\\n-          spotMarketTickers$.pipe(\\n-            map((x) =>\\n-              order.order_direction === 'OPEN_LONG' || order.order_direction === 'CLOSE_SHORT'\\n-                ? +x[instId].askPx\\n-                : +x[instId].bidPx,\\n-            ),\\n-          ),\\n-        );\\n-        if (!price) {\\n-          throw new Error(`invalid tick: ${price}`);\\n-        }\\n-        console.info(formatTime(Date.now()), 'ModifyOrder', 'price', price);\\n-        const theProduct = await firstValueFrom(\\n-          productService.mapProductIdToProduct$.pipe(map((x) => x.get(order.product_id))),\\n-        );\\n-        if (!theProduct) {\\n-          throw new Error(`Unknown product: ${order.position_id}`);\\n-        }\\n-        params.newSz = roundToStep(order.volume * price, theProduct.volume_step!).toString();\\n-      }\\n-    } else {\\n-      throw new Error(`Unknown instType: ${instType}`);\\n-    }\\n-  }\\n-\\n-  console.info(formatTime(Date.now()), 'ModifyOrder', 'params', JSON.stringify(params));\\n-\\n-  const res = await postTradeAmendOrder(credential, params);\\n-  if (res.code !== '0') {\\n-    throw new Error(`ModifyOrder failed: code=${res.code}, msg=${res.msg}`);\\n-  }\\n-};\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 128,\n+          \"path\": \"apps/vendor-okx/src/experimental/submitOrder.ts\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/submitOrder.ts b/apps/vendor-okx/src/experimental/submitOrder.ts\\ndeleted file mode 100644\\nindex bfeca4a48..000000000\\n--- a/apps/vendor-okx/src/experimental/submitOrder.ts\\n+++ /dev/null\\n@@ -1,128 +0,0 @@\\n-import { IOrder } from '@yuants/data-order';\\n-import { decodePath, formatTime, roundToStep } from '@yuants/utils';\\n-import { firstValueFrom, map } from 'rxjs';\\n-import { ICredential, postTradeOrder } from '../api/private-api';\\n-import { productService } from '../public-data/product';\\n-import { spotMarketTickers$ } from '../public-data/quote';\\n-\\n-const mapOrderDirectionToSide = (direction?: string) => {\\n-  switch (direction) {\\n-    case 'OPEN_LONG':\\n-    case 'CLOSE_SHORT':\\n-      return 'buy';\\n-    case 'OPEN_SHORT':\\n-    case 'CLOSE_LONG':\\n-      return 'sell';\\n-  }\\n-  throw new Error(`Unknown direction: ${direction}`);\\n-};\\n-\\n-const mapOrderDirectionToPosSide = (direction?: string) => {\\n-  switch (direction) {\\n-    case 'OPEN_LONG':\\n-    case 'CLOSE_LONG':\\n-      return 'long';\\n-    case 'CLOSE_SHORT':\\n-    case 'OPEN_SHORT':\\n-      return 'short';\\n-  }\\n-  throw new Error(`Unknown direction: ${direction}`);\\n-};\\n-\\n-const mapOrderTypeToOrdType = (order_type?: string) => {\\n-  switch (order_type) {\\n-    case 'LIMIT':\\n-      return 'limit';\\n-    case 'MARKET':\\n-      return 'market';\\n-    case 'MAKER':\\n-      return 'post_only';\\n-  }\\n-  throw new Error(`Unknown order type: ${order_type}`);\\n-};\\n-\\n-export const submitOrder = async (credential: ICredential, order: IOrder): Promise<{ order_id: string }> => {\\n-  const [, instType, instId] = decodePath(order.product_id);\\n-\\n-  // 交易数量，表示要购买或者出售的数量。\\n-  // 当币币/币币杠杆以限价买入和卖出时，指交易货币数量。\\n-  // 当币币杠杆以市价买入时，指计价货币的数量。\\n-  // 当币币杠杆以市价卖出时，指交易货币的数量。\\n-  // 对于币币市价单，单位由 tgtCcy 决定\\n-  // 当交割、永续、期权买入和卖出时，指合约张数。\\n-  const mapOrderVolumeToSz = async (order: IOrder) => {\\n-    if (instType === 'SWAP') {\\n-      return order.volume;\\n-    }\\n-    if (instType === 'MARGIN') {\\n-      if (order.order_type === 'LIMIT') {\\n-        return order.volume;\\n-      }\\n-      if (order.order_type === 'MAKER') {\\n-        return order.volume;\\n-      }\\n-      if (order.order_type === 'MARKET') {\\n-        if (order.order_direction === 'OPEN_SHORT' || order.order_direction === 'CLOSE_LONG') {\\n-          return order.volume;\\n-        }\\n-        //\\n-        const price = await firstValueFrom(\\n-          spotMarketTickers$.pipe(\\n-            map((x) =>\\n-              mapOrderDirectionToPosSide(order.order_direction) === 'long'\\n-                ? +x[instId].askPx\\n-                : +x[instId].bidPx,\\n-            ),\\n-          ),\\n-        );\\n-        if (!price) {\\n-          throw new Error(`invalid tick: ${price}`);\\n-        }\\n-        console.info(formatTime(Date.now()), 'SubmitOrder', 'price', price);\\n-        const theProduct = await firstValueFrom(\\n-          productService.mapProductIdToProduct$.pipe(map((x) => x.get(order.product_id))),\\n-        );\\n-        if (!theProduct) {\\n-          throw new Error(`Unknown product: ${order.position_id}`);\\n-        }\\n-        return roundToStep(order.volume * price, theProduct.volume_step!);\\n-      }\\n-\\n-      return 0;\\n-    }\\n-\\n-    if (instType === 'SPOT') {\\n-      return order.volume;\\n-    }\\n-\\n-    throw new Error(`Unknown instType: ${instType}`);\\n-  };\\n-\\n-  const params = {\\n-    instId,\\n-    tdMode: instType === 'SPOT' ? 'cash' : 'cross',\\n-    side: mapOrderDirectionToSide(order.order_direction),\\n-    posSide:\\n-      instType === 'MARGIN' || instType === 'SPOT'\\n-        ? 'net'\\n-        : mapOrderDirectionToPosSide(order.order_direction),\\n-    ordType: mapOrderTypeToOrdType(order.order_type),\\n-    sz: (await mapOrderVolumeToSz(order)).toString(),\\n-    tgtCcy: instType === 'SPOT' && order.order_type === 'MARKET' ? 'base_ccy' : undefined,\\n-    reduceOnly:\\n-      instType === 'MARGIN' && ['CLOSE_LONG', 'CLOSE_SHORT'].includes(order.order_direction ?? '')\\n-        ? 'true'\\n-        : undefined,\\n-    px: order.order_type === 'LIMIT' || order.order_type === 'MAKER' ? order.price!.toString() : undefined,\\n-    ccy: instType === 'MARGIN' ? 'USDT' : undefined,\\n-    tag: process.env.BROKER_TAG,\\n-  };\\n-  console.info(formatTime(Date.now()), 'SubmitOrder', 'params', JSON.stringify(params));\\n-  const res = await postTradeOrder(credential, params);\\n-  if (res.code === '0' && res.data?.[0]?.ordId) {\\n-    return { order_id: res.data[0].ordId };\\n-  }\\n-  throw `Failed to submit order: ${res.code} ${res.msg}: ${res.data\\n-    .map((x) => `${x.sCode} ${x.sMsg}`)\\n-    .join('; ')}`;\\n-};\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/src/orders/cancelOrder.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/orders/cancelOrder.ts b/apps/vendor-okx/src/orders/cancelOrder.ts\\nindex db8741b6f..9a6c6d976 100644\\n--- a/apps/vendor-okx/src/orders/cancelOrder.ts\\n+++ b/apps/vendor-okx/src/orders/cancelOrder.ts\\n@@ -6 +6 @@ export const cancelOrder = async (credential: ICredential, order: IOrder) => {\\n-  const [, instId] = decodePath(order.product_id);\\n+  const [instId] = decodePath(order.product_id).slice(-1);\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/src/orders/modifyOrder.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/orders/modifyOrder.ts b/apps/vendor-okx/src/orders/modifyOrder.ts\\nindex ab30a4b20..9101b5049 100644\\n--- a/apps/vendor-okx/src/orders/modifyOrder.ts\\n+++ b/apps/vendor-okx/src/orders/modifyOrder.ts\\n@@ -9 +9 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n-  const [instType, instId] = decodePath(order.product_id);\\n+  const [instType, instId] = decodePath(order.product_id).slice(-2);\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/orders/submitOrder.ts b/apps/vendor-okx/src/orders/submitOrder.ts\\nindex 5a161696c..564c8a659 100644\\n--- a/apps/vendor-okx/src/orders/submitOrder.ts\\n+++ b/apps/vendor-okx/src/orders/submitOrder.ts\\n@@ -45 +45 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n-  const [instType, instId] = decodePath(order.product_id);\\n+  const [instType, instId] = decodePath(order.product_id).slice(-2);\\n@@ -118 +118 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n-    tag: process.env.BROKER_TAG,\\n+    tag: process.env.BROKER_CODE,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/src/services.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/services.ts b/apps/vendor-okx/src/services.ts\\nindex 9c8c077ad..aeaf5f9d0 100644\\n--- a/apps/vendor-okx/src/services.ts\\n+++ b/apps/vendor-okx/src/services.ts\\n@@ -24 +24 @@ defer(async () => {\\n-        msg.req.tag = process.env.BROKER_TAG;\\n+        msg.req.tag = process.env.BROKER_CODE;\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-06-24.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-06-24.json b/common/changes/@yuants/vendor-okx/2025-12-05-06-24.json\\nnew file mode 100644\\nindex 000000000..480fd1904\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-06-24.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"fix order actions\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"d8d60c1f208f08ba0c8566d6d83f7ddb46d457e1\",\n+      \"short\": \"d8d60c1f2\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-05 14:33:05 +0800\",\n+      \"subject\": \"chore: bump version (#2205)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit d8d60c1f208f08ba0c8566d6d83f7ddb46d457e1\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 14:33:05 2025 +0800\\n\\n    chore: bump version (#2205)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex b372c1ad7..96e11227a 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.1\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.1\\\",\\n+      \\\"date\\\": \\\"Fri, 05 Dec 2025 06:30:56 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix order actions\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit d8d60c1f208f08ba0c8566d6d83f7ddb46d457e1\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 14:33:05 2025 +0800\\n\\n    chore: bump version (#2205)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex 2c57a21cc..2cdf45546 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Fri, 05 Dec 2025 05:46:23 GMT and should not be manually modified.\\n+This log was last generated on Fri, 05 Dec 2025 06:30:56 GMT and should not be manually modified.\\n+\\n+## 0.29.1\\n+Fri, 05 Dec 2025 06:30:56 GMT\\n+\\n+### Patches\\n+\\n+- fix order actions\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit d8d60c1f208f08ba0c8566d6d83f7ddb46d457e1\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 14:33:05 2025 +0800\\n\\n    chore: bump version (#2205)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 5a652b575..1d18b3e95 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.29.0\\\",\\n+  \\\"version\\\": \\\"0.29.1\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-06-24.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit d8d60c1f208f08ba0c8566d6d83f7ddb46d457e1\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 14:33:05 2025 +0800\\n\\n    chore: bump version (#2205)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-06-24.json b/common/changes/@yuants/vendor-okx/2025-12-05-06-24.json\\ndeleted file mode 100644\\nindex 480fd1904..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-05-06-24.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"fix order actions\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-05-05-46.json => main_2025-12-05-06-30.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"ec771df32a8c5881d8e3313c6cf879739af57964\",\n+      \"short\": \"ec771df32\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-05 17:28:14 +0800\",\n+      \"subject\": \"chore: temporarily remove open interest caching and related logic (#2206)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 45,\n+          \"deletions\": 42,\n+          \"path\": \"apps/vendor-aster/src/services/markets/quote.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit ec771df32a8c5881d8e3313c6cf879739af57964\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 17:28:14 2025 +0800\\n\\n    chore: temporarily remove open interest caching and related logic (#2206)\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/quote.ts b/apps/vendor-aster/src/services/markets/quote.ts\\nindex ead158a55..9ea420c98 100644\\n--- a/apps/vendor-aster/src/services/markets/quote.ts\\n+++ b/apps/vendor-aster/src/services/markets/quote.ts\\n@@ -64,12 +64,12 @@ const getRequestIntervalMs = (rateLimits: IAsterRateLimit[] | undefined, fallbac\\n-const openInterestCache = createCache<string>(\\n-  async (symbol: string) => {\\n-    try {\\n-      const data = await getFApiV1OpenInterest({ symbol });\\n-      return data.openInterest;\\n-    } catch (error) {\\n-      console.warn('getFApiV1OpenInterest failed', symbol, error);\\n-      return undefined;\\n-    }\\n-  },\\n-  { expire: OPEN_INTEREST_TTL },\\n-);\\n+// const openInterestCache = createCache<string>(\\n+//   async (symbol: string) => {\\n+//     try {\\n+//       const data = await getFApiV1OpenInterest({ symbol });\\n+//       return data.openInterest;\\n+//     } catch (error) {\\n+//       console.warn('getFApiV1OpenInterest failed', symbol, error);\\n+//       return undefined;\\n+//     }\\n+//   },\\n+//   { expire: OPEN_INTEREST_TTL },\\n+// );\\n@@ -77,10 +77,10 @@ const openInterestCache = createCache<string>(\\n-const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n-  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n-  catchError((err) => {\\n-    console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n-    return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n-  }),\\n-  startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n-  retry({ delay: 60_000 }),\\n-  shareReplay({ bufferSize: 1, refCount: true }),\\n-);\\n+// const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n+//   map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n+//   catchError((err) => {\\n+//     console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n+//     return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n+//   }),\\n+//   startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n+//   retry({ delay: 60_000 }),\\n+//   shareReplay({ bufferSize: 1, refCount: true }),\\n+// );\\n@@ -109,19 +109,19 @@ const quoteFromTicker$ = ticker$.pipe(\\n-const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\\n-  mergeMap(([tickers, requestInterval]) =>\\n-    from(tickers).pipe(\\n-      concatMap((ticker, index) =>\\n-        (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n-          mergeMap(() => from(openInterestCache.query(ticker.symbol))),\\n-          map(\\n-            (openInterest): Partial<IQuote> => ({\\n-              datasource_id: 'ASTER',\\n-              product_id: encodePath('ASTER', 'PERP', ticker.symbol),\\n-              open_interest: `${openInterest ?? 0}`,\\n-              updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n-            }),\\n-          ),\\n-        ),\\n-      ),\\n-    ),\\n-  ),\\n-);\\n+// const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\\n+//   mergeMap(([tickers, requestInterval]) =>\\n+//     from(tickers).pipe(\\n+//       concatMap((ticker, index) =>\\n+//         (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n+//           mergeMap(() => from(openInterestCache.query(ticker.symbol))),\\n+//           map(\\n+//             (openInterest): Partial<IQuote> => ({\\n+//               datasource_id: 'ASTER',\\n+//               product_id: encodePath('ASTER', 'PERP', ticker.symbol),\\n+//               open_interest: `${openInterest ?? 0}`,\\n+//               updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n+//             }),\\n+//           ),\\n+//         ),\\n+//       ),\\n+//     ),\\n+//   ),\\n+// );\\n@@ -129 +129,4 @@ const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\\n-const quote$ = merge(quoteFromTicker$, quoteFromOpenInterest$).pipe(\\n+const quote$ = merge(\\n+  quoteFromTicker$,\\n+  // quoteFromOpenInterest$\\n+).pipe(\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"openInterestCache\",\n+              \"code\": \"// const openInterestCache = createCache<string>(\\n//   async (symbol: string) => {\\n//     try {\",\n+              \"lineStart\": 64,\n+              \"lineEnd\": 66\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"data\",\n+              \"code\": \"//       const data = await getFApiV1OpenInterest({ symbol });\\n//       return data.openInterest;\\n//     } catch (error) {\\n//       console.warn('getFApiV1OpenInterest failed', symbol, error);\\n//       return undefined;\\n//     }\\n//   },\\n//   { expire: OPEN_INTEREST_TTL },\\n// );\",\n+              \"lineStart\": 67,\n+              \"lineEnd\": 76\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"requestInterval\",\n+              \"code\": \"// const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n//   map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n//   catchError((err) => {\\n//     console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n//     return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n//   }),\\n//   startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n//   retry({ delay: 60_000 }),\\n//   shareReplay({ bufferSize: 1, refCount: true }),\\n// );\",\n+              \"lineStart\": 77,\n+              \"lineEnd\": 108\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quoteFromOpenInterest\",\n+              \"code\": \"// const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\\n//   mergeMap(([tickers, requestInterval]) =>\\n//     from(tickers).pipe(\\n//       concatMap((ticker, index) =>\\n//         (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n//           mergeMap(() => from(openInterestCache.query(ticker.symbol))),\\n//           map(\\n//             (openInterest): Partial<IQuote> => ({\\n//               datasource_id: 'ASTER',\\n//               product_id: encodePath('ASTER', 'PERP', ticker.symbol),\\n//               open_interest: `${openInterest ?? 0}`,\\n//               updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n//             }),\\n//           ),\\n//         ),\",\n+              \"lineStart\": 109,\n+              \"lineEnd\": 128\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quote\",\n+              \"code\": \"const quote$ = merge(\\n  quoteFromTicker$,\\n  // quoteFromOpenInterest$\\n).pipe(\",\n+              \"lineStart\": 129,\n+              \"lineEnd\": 133\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-05-09-26.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit ec771df32a8c5881d8e3313c6cf879739af57964\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 17:28:14 2025 +0800\\n\\n    chore: temporarily remove open interest caching and related logic (#2206)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-05-09-26.json b/common/changes/@yuants/vendor-aster/2025-12-05-09-26.json\\nnew file mode 100644\\nindex 000000000..fdae00998\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-05-09-26.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"temp remove code sick\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"82809689b13ce6890dc934748f5ad84a028b5053\",\n+      \"short\": \"82809689b\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-05 17:36:06 +0800\",\n+      \"subject\": \"chore: bump version (#2207)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 82809689b13ce6890dc934748f5ad84a028b5053\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 17:36:06 2025 +0800\\n\\n    chore: bump version (#2207)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex 157e86d10..098dec2b3 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.19\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.19\\\",\\n+      \\\"date\\\": \\\"Fri, 05 Dec 2025 09:35:39 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"temp remove code sick\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 82809689b13ce6890dc934748f5ad84a028b5053\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 17:36:06 2025 +0800\\n\\n    chore: bump version (#2207)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex 102ea3be5..d31cd102a 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\\n+This log was last generated on Fri, 05 Dec 2025 09:35:39 GMT and should not be manually modified.\\n+\\n+## 0.7.19\\n+Fri, 05 Dec 2025 09:35:39 GMT\\n+\\n+### Patches\\n+\\n+- temp remove code sick\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 82809689b13ce6890dc934748f5ad84a028b5053\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 17:36:06 2025 +0800\\n\\n    chore: bump version (#2207)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex 86120e2ae..073099d7a 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.18\\\",\\n+  \\\"version\\\": \\\"0.7.19\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-05-09-26.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 82809689b13ce6890dc934748f5ad84a028b5053\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 17:36:06 2025 +0800\\n\\n    chore: bump version (#2207)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-05-09-26.json b/common/changes/@yuants/vendor-aster/2025-12-05-09-26.json\\ndeleted file mode 100644\\nindex fdae00998..000000000\\n--- a/common/changes/@yuants/vendor-aster/2025-12-05-09-26.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n-      \\\"comment\\\": \\\"temp remove code sick\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-04-10-36.json => main_2025-12-05-09-35.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"af56c8e8a565fb8340b703f1c86545d15848b57c\",\n+      \"short\": \"af56c8e8a\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-05 22:24:08 +0800\",\n+      \"subject\": \"feat: add interest rate (#2208)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 30,\n+          \"deletions\": 11,\n+          \"path\": \"apps/vendor-okx/src/public-data/quote.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit af56c8e8a565fb8340b703f1c86545d15848b57c\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:24:08 2025 +0800\\n\\n    feat: add interest rate (#2208)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/quote.ts b/apps/vendor-okx/src/public-data/quote.ts\\nindex 4ab43a1d6..6ed5cb051 100644\\n--- a/apps/vendor-okx/src/public-data/quote.ts\\n+++ b/apps/vendor-okx/src/public-data/quote.ts\\n@@ -30 +30 @@ import { getInstruments, getMarketTickers, getOpenInterest, getPositionTiers } f\\n-import { useOpenInterest, useTicker } from '../ws';\\n+import { useFundingRate, useOpenInterest, useTicker } from '../ws';\\n@@ -92 +92 @@ const quoteOfSwapFromRest$ = defer(() => getMarketTickers({ instType: 'SWAP' }))\\n-      product_id: encodePath(x.instType, x.instId),\\n+      product_id: encodePath('OKX', x.instType, x.instId),\\n@@ -109 +109 @@ const quoteOfSpotAndMarginFromRest$ = defer(() => getMarketTickers({ instType: '\\n-      product_id: encodePath('SPOT', x.instId),\\n+      product_id: encodePath('OKX', 'SPOT', x.instId),\\n@@ -118 +118 @@ const quoteOfSpotAndMarginFromRest$ = defer(() => getMarketTickers({ instType: '\\n-      product_id: encodePath('MARGIN', x.instId),\\n+      product_id: encodePath('OKX', 'MARGIN', x.instId),\\n@@ -139 +139 @@ const quoteOfSwapFromWs$ = swapInstruments$.pipe(\\n-      product_id: encodePath('SWAP', ticker[0].instId),\\n+      product_id: encodePath('OKX', 'SWAP', ticker[0].instId),\\n@@ -153 +153 @@ const quoteOfSpotAndMarginFromWs$ = spotTicker$.pipe(\\n-      product_id: encodePath('SPOT', ticker[0].instId),\\n+      product_id: encodePath('OKX', 'SPOT', ticker[0].instId),\\n@@ -162 +162 @@ const quoteOfSpotAndMarginFromWs$ = spotTicker$.pipe(\\n-      product_id: encodePath('MARGIN', ticker[0].instId),\\n+      product_id: encodePath('OKX', 'MARGIN', ticker[0].instId),\\n@@ -178 +178 @@ const swapOpenInterests$ = defer(() => getOpenInterest({ instType: 'SWAP' })).pi\\n-const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n+const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n@@ -187 +187 @@ const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n-      product_id: encodePath('SWAP', x[0].instId),\\n+      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n@@ -193,0 +194,18 @@ const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n+const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n+  listWatch(\\n+    (x) => x.instId,\\n+    (x) => useFundingRate(x.instId),\\n+    () => true,\\n+  ),\\n+  map(\\n+    (x): Partial<IQuote> => ({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n+      interest_rate_long: `-${x[0].fundingRate}`,\\n+      interest_rate_short: x[0].fundingRate,\\n+      interest_rate_next_settled_at: x[0].fundingTime,\\n+    }),\\n+  ),\\n+  share(),\\n+);\\n+\\n@@ -285 +303 @@ const marginOpenInterest$ = spotInstIds$.pipe(\\n-      product_id: encodePath('MARGIN', instId),\\n+      product_id: encodePath('OKX', 'MARGIN', instId),\\n@@ -299 +317 @@ const quoteSources$ = [\\n-  interestRateOfSwapFromWS$,\\n+  openInterestOfSwapFromWS$,\\n@@ -303,0 +322 @@ const quoteSources$ = [\\n+  interestRateOfSwapFromWS$,\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"openInterestOfSwapFromWS\",\n+              \"code\": \"const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n      product_id: encodePath('OKX', 'SWAP', x[0].instId),\",\n+              \"lineStart\": 178,\n+              \"lineEnd\": 193\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"interestRateOfSwapFromWS\",\n+              \"code\": \"const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n  listWatch(\\n    (x) => x.instId,\\n    (x) => useFundingRate(x.instId),\\n    () => true,\\n  ),\\n  map(\\n    (x): Partial<IQuote> => ({\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n      interest_rate_long: `-${x[0].fundingRate}`,\\n      interest_rate_short: x[0].fundingRate,\\n      interest_rate_next_settled_at: x[0].fundingTime,\\n    }),\\n  ),\",\n+              \"lineStart\": 194,\n+              \"lineEnd\": 323\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 22,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/ws.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit af56c8e8a565fb8340b703f1c86545d15848b57c\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:24:08 2025 +0800\\n\\n    feat: add interest rate (#2208)\\n\\ndiff --git a/apps/vendor-okx/src/ws.ts b/apps/vendor-okx/src/ws.ts\\nindex 67e46658d..c3e29df77 100644\\n--- a/apps/vendor-okx/src/ws.ts\\n+++ b/apps/vendor-okx/src/ws.ts\\n@@ -331,0 +332,22 @@ export const useMarketBooks = (\\n+\\n+export const useFundingRate = (instId: string) =>\\n+  fromWsChannelAndInstId<\\n+    {\\n+      fundingRate: string;\\n+      fundingTime: string;\\n+      instId: string;\\n+      instType: string;\\n+      method: string;\\n+      maxFundingRate: string;\\n+      minFundingRate: string;\\n+      nextFundingRate: string;\\n+      nextFundingTime: string;\\n+      premium: string;\\n+      settFundingRate: string;\\n+      settState: string;\\n+      ts: string;\\n+    }[]\\n+  >('ws/v5/public', 'funding-rate', instId).pipe(\\n+    //\\n+    filter((data) => data.length > 0),\\n+  );\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"useFundingRate\",\n+              \"code\": \"export const useFundingRate = (instId: string) =>\\n  fromWsChannelAndInstId<\\n    {\\n      fundingRate: string;\\n      fundingTime: string;\\n      instId: string;\\n      instType: string;\\n      method: string;\\n      maxFundingRate: string;\\n      minFundingRate: string;\\n      nextFundingRate: string;\\n      nextFundingTime: string;\\n      premium: string;\\n      settFundingRate: string;\\n      settState: string;\",\n+              \"lineStart\": 333,\n+              \"lineEnd\": 354\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit af56c8e8a565fb8340b703f1c86545d15848b57c\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:24:08 2025 +0800\\n\\n    feat: add interest rate (#2208)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-14-21.json b/common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\\nnew file mode 100644\\nindex 000000000..983bf70cd\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"add interest rate for okx\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"4ecf8af008db1b477bf99100d1c34d81c1cc4830\",\n+      \"short\": \"4ecf8af00\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-05 22:33:29 +0800\",\n+      \"subject\": \"feat: add new quote (#2209)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/index.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 4ecf8af008db1b477bf99100d1c34d81c1cc4830\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:33:29 2025 +0800\\n\\n    feat: add new quote (#2209)\\n\\ndiff --git a/apps/vendor-okx/src/index.ts b/apps/vendor-okx/src/index.ts\\nindex 9432e574a..4bad32deb 100644\\n--- a/apps/vendor-okx/src/index.ts\\n+++ b/apps/vendor-okx/src/index.ts\\n@@ -15,0 +16 @@ import './transfer';\\n+import './public-data/new-quote';\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 373,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/public-data/new-quote.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 4ecf8af008db1b477bf99100d1c34d81c1cc4830\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:33:29 2025 +0800\\n\\n    feat: add new quote (#2209)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/new-quote.ts b/apps/vendor-okx/src/public-data/new-quote.ts\\nnew file mode 100644\\nindex 000000000..6ed5cb051\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/public-data/new-quote.ts\\n@@ -0,0 +1,373 @@\\n+import { IQuote } from '@yuants/data-quote';\\n+import { Terminal } from '@yuants/protocol';\\n+import { writeToSQL } from '@yuants/sql';\\n+import { decodePath, encodePath, formatTime, listWatch } from '@yuants/utils';\\n+import {\\n+  catchError,\\n+  concatMap,\\n+  defer,\\n+  distinctUntilChanged,\\n+  EMPTY,\\n+  filter,\\n+  first,\\n+  firstValueFrom,\\n+  from,\\n+  groupBy,\\n+  map,\\n+  merge,\\n+  mergeMap,\\n+  reduce,\\n+  repeat,\\n+  retry,\\n+  scan,\\n+  share,\\n+  shareReplay,\\n+  switchMap,\\n+  tap,\\n+  toArray,\\n+} from 'rxjs';\\n+import { getInstruments, getMarketTickers, getOpenInterest, getPositionTiers } from '../api/public-api';\\n+import { useFundingRate, useOpenInterest, useTicker } from '../ws';\\n+\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n+const swapInstruments$ = defer(() => getInstruments({ instType: 'SWAP' })).pipe(\\n+  repeat({ delay: 3600_000 }),\\n+  retry({ delay: 10_000 }),\\n+  map((x) => x.data),\\n+  shareReplay(1),\\n+);\\n+const spotInstruments$ = defer(() => getInstruments({ instType: 'SPOT' })).pipe(\\n+  repeat({ delay: 3600_000 }),\\n+  retry({ delay: 10_000 }),\\n+  map((x) => x.data),\\n+  shareReplay(1),\\n+);\\n+\\n+const shallowEqual = (a: string[], b: string[]) => a.length === b.length && a.every((v, i) => v === b[i]);\\n+\\n+const spotInstIds$ = spotInstruments$.pipe(\\n+  map((items) => items.map((item) => item.instId)),\\n+  distinctUntilChanged(shallowEqual),\\n+  shareReplay(1),\\n+);\\n+\\n+const spotTickers$ = defer(() => getMarketTickers({ instType: 'SPOT' })).pipe(\\n+  repeat({ delay: 5000 }),\\n+  retry({ delay: 5000 }),\\n+  shareReplay(1),\\n+);\\n+\\n+// depend by SubmitOrders\\n+export const spotMarketTickers$ = defer(() => spotTickers$).pipe(\\n+  mergeMap((x) =>\\n+    from(x.data).pipe(\\n+      map((x) => [x.instId, x] as const),\\n+      toArray(),\\n+      map((x) => Object.fromEntries(x)),\\n+    ),\\n+  ),\\n+  repeat({ delay: 5000 }),\\n+  retry({ delay: 5000 }),\\n+  shareReplay(1),\\n+);\\n+\\n+const spotTicker$ = spotInstruments$.pipe(\\n+  tap((x) => {\\n+    console.info('SPOT INSTRUMENTS', x.length);\\n+  }),\\n+  listWatch(\\n+    (x) => x.instId,\\n+    (x) => useTicker(x.instId),\\n+    () => true,\\n+  ),\\n+  share(),\\n+);\\n+\\n+const quoteOfSwapFromRest$ = defer(() => getMarketTickers({ instType: 'SWAP' })).pipe(\\n+  mergeMap((x) => x.data || []),\\n+  map(\\n+    (x): Partial<IQuote> => ({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', x.instType, x.instId),\\n+      last_price: x.last,\\n+      ask_price: x.askPx,\\n+      bid_price: x.bidPx,\\n+      ask_volume: x.askSz,\\n+      bid_volume: x.bidSz,\\n+    }),\\n+  ),\\n+  repeat({ delay: 1000 }),\\n+  retry({ delay: 1000 }),\\n+);\\n+\\n+const quoteOfSpotAndMarginFromRest$ = defer(() => getMarketTickers({ instType: 'SPOT' })).pipe(\\n+  mergeMap((x) => x.data || []),\\n+  mergeMap((x): Partial<IQuote>[] => [\\n+    {\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SPOT', x.instId),\\n+      last_price: x.last,\\n+      ask_price: x.askPx,\\n+      bid_price: x.bidPx,\\n+      ask_volume: x.askSz,\\n+      bid_volume: x.bidSz,\\n+    },\\n+    {\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'MARGIN', x.instId),\\n+      last_price: x.last,\\n+      ask_price: x.askPx,\\n+      bid_price: x.bidPx,\\n+      ask_volume: x.askSz,\\n+      bid_volume: x.bidSz,\\n+    },\\n+  ]),\\n+  repeat({ delay: 1000 }),\\n+  retry({ delay: 1000 }),\\n+);\\n+\\n+const quoteOfSwapFromWs$ = swapInstruments$.pipe(\\n+  listWatch(\\n+    (x) => x.instId,\\n+    (x) => useTicker(x.instId),\\n+    () => true,\\n+  ),\\n+  map(\\n+    (ticker): Partial<IQuote> => ({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SWAP', ticker[0].instId),\\n+      last_price: ticker[0].last,\\n+      ask_price: ticker[0].askPx,\\n+      bid_price: ticker[0].bidPx,\\n+      ask_volume: ticker[0].askSz,\\n+      bid_volume: ticker[0].bidSz,\\n+    }),\\n+  ),\\n+);\\n+\\n+const quoteOfSpotAndMarginFromWs$ = spotTicker$.pipe(\\n+  mergeMap((ticker): Partial<IQuote>[] => [\\n+    {\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SPOT', ticker[0].instId),\\n+      last_price: ticker[0].last,\\n+      ask_price: ticker[0].askPx,\\n+      bid_price: ticker[0].bidPx,\\n+      ask_volume: ticker[0].askSz,\\n+      bid_volume: ticker[0].bidSz,\\n+    },\\n+    {\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'MARGIN', ticker[0].instId),\\n+      last_price: ticker[0].last,\\n+      ask_price: ticker[0].askPx,\\n+      bid_price: ticker[0].bidPx,\\n+      ask_volume: ticker[0].askSz,\\n+      bid_volume: ticker[0].bidSz,\\n+    },\\n+  ]),\\n+);\\n+\\n+const swapOpenInterests$ = defer(() => getOpenInterest({ instType: 'SWAP' })).pipe(\\n+  repeat({ delay: 10_000 }),\\n+  retry({ delay: 10_000 }),\\n+  shareReplay(1),\\n+);\\n+\\n+const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n+  listWatch(\\n+    (x) => x.instId,\\n+    (x) => useOpenInterest(x.instId),\\n+    () => true,\\n+  ),\\n+  map(\\n+    (x): Partial<IQuote> => ({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n+      open_interest: x[0].oi,\\n+    }),\\n+  ),\\n+  share(),\\n+);\\n+\\n+const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n+  listWatch(\\n+    (x) => x.instId,\\n+    (x) => useFundingRate(x.instId),\\n+    () => true,\\n+  ),\\n+  map(\\n+    (x): Partial<IQuote> => ({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n+      interest_rate_long: `-${x[0].fundingRate}`,\\n+      interest_rate_short: x[0].fundingRate,\\n+      interest_rate_next_settled_at: x[0].fundingTime,\\n+    }),\\n+  ),\\n+  share(),\\n+);\\n+\\n+type PositionTiersResponse = Awaited<ReturnType<typeof getPositionTiers>>;\\n+type PositionTiersEntry = PositionTiersResponse['data'];\\n+\\n+const marginPositionTiersMap$ = defer(() =>\\n+  spotInstIds$.pipe(\\n+    first(),\\n+    map((instIds) => instIds.filter((id) => id.endsWith('USDT') || id.endsWith('USDC'))),\\n+    switchMap((instIds) => {\\n+      const total = instIds.length;\\n+      let processed = 0;\\n+      return from(instIds).pipe(\\n+        concatMap((instId) =>\\n+          defer(async () => {\\n+            const tiers = await terminal.client.requestForResponseData<\\n+              { instType: string; tdMode: string; instId: string },\\n+              PositionTiersResponse\\n+            >('OKX/PositionTiers', {\\n+              instType: 'MARGIN',\\n+              tdMode: 'cross',\\n+              instId,\\n+            });\\n+            if (!tiers?.data) {\\n+              throw new Error(`Failed to load position tiers for ${instId}: ${tiers.msg}`);\\n+            }\\n+            return {\\n+              instId,\\n+              tiers,\\n+            };\\n+          }).pipe(retry({ delay: 2000 })),\\n+        ),\\n+        reduce((map, { instId, tiers }) => {\\n+          processed += 1;\\n+          console.info(\\n+            formatTime(Date.now()),\\n+            `Loaded margin position tiers ${processed}/${total} (${instId})`,\\n+          );\\n+          if (tiers?.data) {\\n+            map.set(instId, tiers.data);\\n+          }\\n+          return map;\\n+        }, new Map<string, PositionTiersEntry>()),\\n+      );\\n+    }),\\n+  ),\\n+).pipe(\\n+  //\\n+  retry({ delay: 60_000 }),\\n+  repeat({ delay: 86400_000 }),\\n+  shareReplay(1),\\n+);\\n+\\n+// Margin 的 open interest 只依赖 position-tier：\\n+// 1) 启动时先拉全量 MARGIN 仓位档位并缓存，下次直接命中；\\n+// 2) 档位内只保留同 tier 杠杆最高的记录；\\n+// 3) 当前策略只使用 tier=1 的 quoteMaxLoan 作为持仓上限，不再混合 /account/max-size；\\n+// 4) 每个 instId 60 秒刷新一次，并在接口报错时 10 秒重试。\\n+const marginOpenInterest$ = spotInstIds$.pipe(\\n+  mergeMap((instIds) =>\\n+    from(instIds).pipe(\\n+      mergeMap((instId) =>\\n+        defer(async () => {\\n+          const tiersMap = await firstValueFrom(marginPositionTiersMap$);\\n+          const tiers = tiersMap.get(instId);\\n+          if (!tiers?.length) {\\n+            return null;\\n+          }\\n+\\n+          const tierByLevel = tiers\\n+            .filter((tier) => !tier.instId || tier.instId === instId)\\n+            .reduce((mapTierToTierInfo, tierInfo) => {\\n+              const existing = mapTierToTierInfo.get(tierInfo.tier);\\n+              if (!existing || +tierInfo.maxLever > +existing.maxLever) {\\n+                mapTierToTierInfo.set(tierInfo.tier, tierInfo);\\n+              }\\n+              return mapTierToTierInfo;\\n+            }, new Map<string, (typeof tiers)[number]>());\\n+          // 获取一级杠杆的最大可借贷额度作为持仓量\\n+          const openInterest = +(tierByLevel.get('1')?.quoteMaxLoan || 0);\\n+\\n+          return {\\n+            instId,\\n+            openInterest,\\n+          };\\n+        }).pipe(retry({ delay: 10_000 }), repeat({ delay: 60_000 })),\\n+      ),\\n+    ),\\n+  ),\\n+  filter((result): result is { instId: string; openInterest: number } => result !== null),\\n+  map(({ instId, openInterest }) => {\\n+    const partial: Partial<IQuote> = {\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'MARGIN', instId),\\n+    };\\n+    if (typeof openInterest === 'number' && Number.isFinite(openInterest)) {\\n+      partial.open_interest = `${openInterest}`;\\n+    }\\n+    return partial;\\n+  }),\\n+  share(),\\n+);\\n+\\n+marginOpenInterest$.subscribe();\\n+\\n+const quoteSources$ = [\\n+  quoteOfSwapFromWs$,\\n+  openInterestOfSwapFromWS$,\\n+  quoteOfSwapFromRest$,\\n+  quoteOfSpotAndMarginFromWs$,\\n+  quoteOfSpotAndMarginFromRest$,\\n+  marginOpenInterest$,\\n+  interestRateOfSwapFromWS$,\\n+];\\n+\\n+const quote$ = defer(() =>\\n+  merge(\\n+    ...quoteSources$.map((x$) =>\\n+      defer(() => x$).pipe(\\n+        // 防止单个流关闭导致整体关闭\\n+        catchError(() => EMPTY),\\n+      ),\\n+    ),\\n+  ),\\n+).pipe(\\n+  groupBy((x) => encodePath(x.datasource_id, x.product_id)),\\n+  mergeMap((group$) => {\\n+    return group$.pipe(\\n+      //\\n+      scan((acc, cur) => Object.assign(acc, cur), {} as Partial<IQuote>),\\n+    );\\n+  }),\\n+  share(),\\n+);\\n+\\n+// 合并不同来源的数据并进行合并，避免死锁\\n+if (process.env.WRITE_QUOTE_TO_SQL === 'true') {\\n+  terminal.channel.publishChannel('quote', { pattern: `^OKX/` }, (channel_id) => {\\n+    const [datasource_id, product_id] = decodePath(channel_id);\\n+    if (!datasource_id) {\\n+      throw 'datasource_id is required';\\n+    }\\n+    if (!product_id) {\\n+      throw 'product_id is required';\\n+    }\\n+    return quote$.pipe(filter((x) => x.product_id === product_id));\\n+  });\\n+\\n+  quote$\\n+    .pipe(\\n+      writeToSQL({\\n+        terminal,\\n+        writeInterval: 1000,\\n+        tableName: 'quote',\\n+        conflictKeys: ['datasource_id', 'product_id'],\\n+      }),\\n+    )\\n+    .subscribe();\\n+}\\n+\\n+export const swapOpenInterest$ = defer(() => swapOpenInterests$).pipe(\\n+  map((x) => new Map(x.data.map((x) => [x.instId, +x.oi] as const))),\\n+  shareReplay(1),\\n+);\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"terminal\",\n+              \"code\": \"const terminal = Terminal.fromNodeEnv();\\n\",\n+              \"lineStart\": 32,\n+              \"lineEnd\": 33\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"swapInstruments\",\n+              \"code\": \"const swapInstruments$ = defer(() => getInstruments({ instType: 'SWAP' })).pipe(\\n  repeat({ delay: 3600_000 }),\\n  retry({ delay: 10_000 }),\\n  map((x) => x.data),\\n  shareReplay(1),\\n);\",\n+              \"lineStart\": 34,\n+              \"lineEnd\": 39\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"spotInstruments\",\n+              \"code\": \"const spotInstruments$ = defer(() => getInstruments({ instType: 'SPOT' })).pipe(\\n  repeat({ delay: 3600_000 }),\\n  retry({ delay: 10_000 }),\\n  map((x) => x.data),\\n  shareReplay(1),\\n);\\n\",\n+              \"lineStart\": 40,\n+              \"lineEnd\": 46\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"shallowEqual\",\n+              \"code\": \"const shallowEqual = (a: string[], b: string[]) => a.length === b.length && a.every((v, i) => v === b[i]);\\n\",\n+              \"lineStart\": 47,\n+              \"lineEnd\": 48\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"spotInstIds\",\n+              \"code\": \"const spotInstIds$ = spotInstruments$.pipe(\\n  map((items) => items.map((item) => item.instId)),\\n  distinctUntilChanged(shallowEqual),\\n  shareReplay(1),\\n);\\n\",\n+              \"lineStart\": 49,\n+              \"lineEnd\": 54\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"spotTickers\",\n+              \"code\": \"const spotTickers$ = defer(() => getMarketTickers({ instType: 'SPOT' })).pipe(\\n  repeat({ delay: 5000 }),\\n  retry({ delay: 5000 }),\\n  shareReplay(1),\\n);\\n\\n// depend by SubmitOrders\",\n+              \"lineStart\": 55,\n+              \"lineEnd\": 61\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"spotMarketTickers\",\n+              \"code\": \"export const spotMarketTickers$ = defer(() => spotTickers$).pipe(\\n  mergeMap((x) =>\\n    from(x.data).pipe(\\n      map((x) => [x.instId, x] as const),\\n      toArray(),\\n      map((x) => Object.fromEntries(x)),\\n    ),\\n  ),\\n  repeat({ delay: 5000 }),\\n  retry({ delay: 5000 }),\\n  shareReplay(1),\\n);\\n\",\n+              \"lineStart\": 62,\n+              \"lineEnd\": 74\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"spotTicker\",\n+              \"code\": \"const spotTicker$ = spotInstruments$.pipe(\\n  tap((x) => {\\n    console.info('SPOT INSTRUMENTS', x.length);\\n  }),\\n  listWatch(\\n    (x) => x.instId,\\n    (x) => useTicker(x.instId),\\n    () => true,\\n  ),\\n  share(),\\n);\\n\",\n+              \"lineStart\": 75,\n+              \"lineEnd\": 86\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quoteOfSwapFromRest\",\n+              \"code\": \"const quoteOfSwapFromRest$ = defer(() => getMarketTickers({ instType: 'SWAP' })).pipe(\\n  mergeMap((x) => x.data || []),\\n  map(\\n    (x): Partial<IQuote> => ({\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', x.instType, x.instId),\\n      last_price: x.last,\\n      ask_price: x.askPx,\\n      bid_price: x.bidPx,\\n      ask_volume: x.askSz,\\n      bid_volume: x.bidSz,\\n    }),\\n  ),\\n  repeat({ delay: 1000 }),\\n  retry({ delay: 1000 }),\",\n+              \"lineStart\": 87,\n+              \"lineEnd\": 103\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quoteOfSpotAndMarginFromRest\",\n+              \"code\": \"const quoteOfSpotAndMarginFromRest$ = defer(() => getMarketTickers({ instType: 'SPOT' })).pipe(\\n  mergeMap((x) => x.data || []),\\n  mergeMap((x): Partial<IQuote>[] => [\\n    {\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SPOT', x.instId),\\n      last_price: x.last,\\n      ask_price: x.askPx,\\n      bid_price: x.bidPx,\\n      ask_volume: x.askSz,\\n      bid_volume: x.bidSz,\\n    },\\n    {\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'MARGIN', x.instId),\",\n+              \"lineStart\": 104,\n+              \"lineEnd\": 129\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quoteOfSwapFromWs\",\n+              \"code\": \"const quoteOfSwapFromWs$ = swapInstruments$.pipe(\\n  listWatch(\\n    (x) => x.instId,\\n    (x) => useTicker(x.instId),\\n    () => true,\\n  ),\\n  map(\\n    (ticker): Partial<IQuote> => ({\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SWAP', ticker[0].instId),\\n      last_price: ticker[0].last,\\n      ask_price: ticker[0].askPx,\\n      bid_price: ticker[0].bidPx,\\n      ask_volume: ticker[0].askSz,\\n      bid_volume: ticker[0].bidSz,\",\n+              \"lineStart\": 130,\n+              \"lineEnd\": 148\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quoteOfSpotAndMarginFromWs\",\n+              \"code\": \"const quoteOfSpotAndMarginFromWs$ = spotTicker$.pipe(\\n  mergeMap((ticker): Partial<IQuote>[] => [\\n    {\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SPOT', ticker[0].instId),\\n      last_price: ticker[0].last,\\n      ask_price: ticker[0].askPx,\\n      bid_price: ticker[0].bidPx,\\n      ask_volume: ticker[0].askSz,\\n      bid_volume: ticker[0].bidSz,\\n    },\\n    {\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'MARGIN', ticker[0].instId),\\n      last_price: ticker[0].last,\",\n+              \"lineStart\": 149,\n+              \"lineEnd\": 171\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"swapOpenInterests\",\n+              \"code\": \"const swapOpenInterests$ = defer(() => getOpenInterest({ instType: 'SWAP' })).pipe(\\n  repeat({ delay: 10_000 }),\\n  retry({ delay: 10_000 }),\\n  shareReplay(1),\\n);\\n\",\n+              \"lineStart\": 172,\n+              \"lineEnd\": 177\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"openInterestOfSwapFromWS\",\n+              \"code\": \"const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n  listWatch(\\n    (x) => x.instId,\\n    (x) => useOpenInterest(x.instId),\\n    () => true,\\n  ),\\n  map(\\n    (x): Partial<IQuote> => ({\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n      open_interest: x[0].oi,\\n    }),\\n  ),\\n  share(),\\n);\",\n+              \"lineStart\": 178,\n+              \"lineEnd\": 193\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"interestRateOfSwapFromWS\",\n+              \"code\": \"const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n  listWatch(\\n    (x) => x.instId,\\n    (x) => useFundingRate(x.instId),\\n    () => true,\\n  ),\\n  map(\\n    (x): Partial<IQuote> => ({\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n      interest_rate_long: `-${x[0].fundingRate}`,\\n      interest_rate_short: x[0].fundingRate,\\n      interest_rate_next_settled_at: x[0].fundingTime,\\n    }),\\n  ),\",\n+              \"lineStart\": 194,\n+              \"lineEnd\": 214\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"marginPositionTiersMap\",\n+              \"code\": \"const marginPositionTiersMap$ = defer(() =>\\n  spotInstIds$.pipe(\\n    first(),\\n    map((instIds) => instIds.filter((id) => id.endsWith('USDT') || id.endsWith('USDC'))),\\n    switchMap((instIds) => {\",\n+              \"lineStart\": 215,\n+              \"lineEnd\": 219\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"total\",\n+              \"code\": \"const total = instIds.length;\",\n+              \"lineStart\": 220,\n+              \"lineEnd\": 220\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"processed\",\n+              \"code\": \"let processed = 0;\\nreturn from(instIds).pipe(\\n  concatMap((instId) =>\\n    defer(async () => {\",\n+              \"lineStart\": 221,\n+              \"lineEnd\": 224\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"tiers\",\n+              \"code\": \"const tiers = await terminal.client.requestForResponseData<\\n  { instType: string; tdMode: string; instId: string },\\n  PositionTiersResponse\\n>('OKX/PositionTiers', {\\n  instType: 'MARGIN',\\n  tdMode: 'cross',\\n  instId,\\n});\\nif (!tiers?.data) {\\n  throw new Error(`Failed to load position tiers for ${instId}: ${tiers.msg}`);\\n}\\nreturn {\\n  instId,\\n  tiers,\\n};\",\n+              \"lineStart\": 225,\n+              \"lineEnd\": 267\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"marginOpenInterest\",\n+              \"code\": \"const marginOpenInterest$ = spotInstIds$.pipe(\\n  mergeMap((instIds) =>\\n    from(instIds).pipe(\\n      mergeMap((instId) =>\\n        defer(async () => {\",\n+              \"lineStart\": 268,\n+              \"lineEnd\": 272\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"tiersMap\",\n+              \"code\": \"const tiersMap = await firstValueFrom(marginPositionTiersMap$);\",\n+              \"lineStart\": 273,\n+              \"lineEnd\": 273\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"tiers\",\n+              \"code\": \"const tiers = tiersMap.get(instId);\\nif (!tiers?.length) {\\n  return null;\\n}\\n\",\n+              \"lineStart\": 274,\n+              \"lineEnd\": 278\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"tierByLevel\",\n+              \"code\": \"const tierByLevel = tiers\\n  .filter((tier) => !tier.instId || tier.instId === instId)\\n  .reduce((mapTierToTierInfo, tierInfo) => {\",\n+              \"lineStart\": 279,\n+              \"lineEnd\": 281\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"existing\",\n+              \"code\": \"    const existing = mapTierToTierInfo.get(tierInfo.tier);\\n    if (!existing || +tierInfo.maxLever > +existing.maxLever) {\\n      mapTierToTierInfo.set(tierInfo.tier, tierInfo);\\n    }\\n    return mapTierToTierInfo;\\n  }, new Map<string, (typeof tiers)[number]>());\\n// 获取一级杠杆的最大可借贷额度作为持仓量\",\n+              \"lineStart\": 282,\n+              \"lineEnd\": 288\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"openInterest\",\n+              \"code\": \"        const openInterest = +(tierByLevel.get('1')?.quoteMaxLoan || 0);\\n\\n        return {\\n          instId,\\n          openInterest,\\n        };\\n      }).pipe(retry({ delay: 10_000 }), repeat({ delay: 60_000 })),\\n    ),\\n  ),\\n),\\nfilter((result): result is { instId: string; openInterest: number } => result !== null),\\nmap(({ instId, openInterest }) => {\",\n+              \"lineStart\": 289,\n+              \"lineEnd\": 300\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"partial\",\n+              \"code\": \"    const partial: Partial<IQuote> = {\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'MARGIN', instId),\\n    };\\n    if (typeof openInterest === 'number' && Number.isFinite(openInterest)) {\\n      partial.open_interest = `${openInterest}`;\\n    }\\n    return partial;\\n  }),\\n  share(),\\n);\\n\\nmarginOpenInterest$.subscribe();\\n\",\n+              \"lineStart\": 301,\n+              \"lineEnd\": 314\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quoteSources\",\n+              \"code\": \"const quoteSources$ = [\\n  quoteOfSwapFromWs$,\\n  openInterestOfSwapFromWS$,\\n  quoteOfSwapFromRest$,\\n  quoteOfSpotAndMarginFromWs$,\\n  quoteOfSpotAndMarginFromRest$,\\n  marginOpenInterest$,\\n  interestRateOfSwapFromWS$,\\n];\\n\",\n+              \"lineStart\": 315,\n+              \"lineEnd\": 324\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quote\",\n+              \"code\": \"const quote$ = defer(() =>\\n  merge(\\n    ...quoteSources$.map((x$) =>\\n      defer(() => x$).pipe(\\n        // 防止单个流关闭导致整体关闭\\n        catchError(() => EMPTY),\\n      ),\\n    ),\\n  ),\\n).pipe(\\n  groupBy((x) => encodePath(x.datasource_id, x.product_id)),\\n  mergeMap((group$) => {\\n    return group$.pipe(\\n      //\\n      scan((acc, cur) => Object.assign(acc, cur), {} as Partial<IQuote>),\",\n+              \"lineStart\": 325,\n+              \"lineEnd\": 369\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"swapOpenInterest\",\n+              \"code\": \"export const swapOpenInterest$ = defer(() => swapOpenInterests$).pipe(\\n  map((x) => new Map(x.data.map((x) => [x.instId, +x.oi] as const))),\\n  shareReplay(1),\\n);\",\n+              \"lineStart\": 370,\n+              \"lineEnd\": 374\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 9,\n+          \"deletions\": 9,\n+          \"path\": \"apps/vendor-okx/src/public-data/quote.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 4ecf8af008db1b477bf99100d1c34d81c1cc4830\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:33:29 2025 +0800\\n\\n    feat: add new quote (#2209)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/quote.ts b/apps/vendor-okx/src/public-data/quote.ts\\nindex 6ed5cb051..e6a73bb79 100644\\n--- a/apps/vendor-okx/src/public-data/quote.ts\\n+++ b/apps/vendor-okx/src/public-data/quote.ts\\n@@ -92 +92 @@ const quoteOfSwapFromRest$ = defer(() => getMarketTickers({ instType: 'SWAP' }))\\n-      product_id: encodePath('OKX', x.instType, x.instId),\\n+      product_id: encodePath(x.instType, x.instId),\\n@@ -109 +109 @@ const quoteOfSpotAndMarginFromRest$ = defer(() => getMarketTickers({ instType: '\\n-      product_id: encodePath('OKX', 'SPOT', x.instId),\\n+      product_id: encodePath('SPOT', x.instId),\\n@@ -118 +118 @@ const quoteOfSpotAndMarginFromRest$ = defer(() => getMarketTickers({ instType: '\\n-      product_id: encodePath('OKX', 'MARGIN', x.instId),\\n+      product_id: encodePath('MARGIN', x.instId),\\n@@ -139 +139 @@ const quoteOfSwapFromWs$ = swapInstruments$.pipe(\\n-      product_id: encodePath('OKX', 'SWAP', ticker[0].instId),\\n+      product_id: encodePath('SWAP', ticker[0].instId),\\n@@ -153 +153 @@ const quoteOfSpotAndMarginFromWs$ = spotTicker$.pipe(\\n-      product_id: encodePath('OKX', 'SPOT', ticker[0].instId),\\n+      product_id: encodePath('SPOT', ticker[0].instId),\\n@@ -162 +162 @@ const quoteOfSpotAndMarginFromWs$ = spotTicker$.pipe(\\n-      product_id: encodePath('OKX', 'MARGIN', ticker[0].instId),\\n+      product_id: encodePath('MARGIN', ticker[0].instId),\\n@@ -187 +187 @@ const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n-      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n+      product_id: encodePath('SWAP', x[0].instId),\\n@@ -203 +203 @@ const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n-      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n+      product_id: encodePath('SWAP', x[0].instId),\\n@@ -303 +303 @@ const marginOpenInterest$ = spotInstIds$.pipe(\\n-      product_id: encodePath('OKX', 'MARGIN', instId),\\n+      product_id: encodePath('MARGIN', instId),\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-14-31.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 4ecf8af008db1b477bf99100d1c34d81c1cc4830\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:33:29 2025 +0800\\n\\n    feat: add new quote (#2209)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-14-31.json b/common/changes/@yuants/vendor-okx/2025-12-05-14-31.json\\nnew file mode 100644\\nindex 000000000..ecebf1b48\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-14-31.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"add new quote\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"b7e2101680d95c25d53a77647295e2e09094c7aa\",\n+      \"short\": \"b7e210168\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-05 22:34:48 +0800\",\n+      \"subject\": \"chore: bump version (#2210)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit b7e2101680d95c25d53a77647295e2e09094c7aa\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 22:34:48 2025 +0800\\n\\n    chore: bump version (#2210)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex 96e11227a..5dbb9eb6a 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.2\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.2\\\",\\n+      \\\"date\\\": \\\"Fri, 05 Dec 2025 14:34:29 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add interest rate for okx\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"add new quote\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 9,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit b7e2101680d95c25d53a77647295e2e09094c7aa\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 22:34:48 2025 +0800\\n\\n    chore: bump version (#2210)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex 2cdf45546..09f58fed9 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,9 @@\\n-This log was last generated on Fri, 05 Dec 2025 06:30:56 GMT and should not be manually modified.\\n+This log was last generated on Fri, 05 Dec 2025 14:34:29 GMT and should not be manually modified.\\n+\\n+## 0.29.2\\n+Fri, 05 Dec 2025 14:34:29 GMT\\n+\\n+### Patches\\n+\\n+- add interest rate for okx\\n+- add new quote\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit b7e2101680d95c25d53a77647295e2e09094c7aa\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 22:34:48 2025 +0800\\n\\n    chore: bump version (#2210)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 1d18b3e95..314748c28 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.29.1\\\",\\n+  \\\"version\\\": \\\"0.29.2\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit b7e2101680d95c25d53a77647295e2e09094c7aa\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 22:34:48 2025 +0800\\n\\n    chore: bump version (#2210)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-14-21.json b/common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\\ndeleted file mode 100644\\nindex 983bf70cd..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"add interest rate for okx\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-14-31.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit b7e2101680d95c25d53a77647295e2e09094c7aa\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 22:34:48 2025 +0800\\n\\n    chore: bump version (#2210)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-14-31.json b/common/changes/@yuants/vendor-okx/2025-12-05-14-31.json\\ndeleted file mode 100644\\nindex ecebf1b48..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-05-14-31.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"add new quote\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-05-06-30.json => main_2025-12-05-14-34.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"1e77d860ac517c51538e701d845557f9f386c35a\",\n+      \"short\": \"1e77d860a\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-05 23:20:55 +0800\",\n+      \"subject\": \"feat: add hl interest rate (#2211)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/src/services/markets/quote.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 1e77d860ac517c51538e701d845557f9f386c35a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 23:20:55 2025 +0800\\n\\n    feat: add hl interest rate (#2211)\\n    \\n    * feat: add hl interest rate\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/markets/quote.ts b/apps/vendor-hyperliquid/src/services/markets/quote.ts\\nindex 25f888666..f7d97a992 100644\\n--- a/apps/vendor-hyperliquid/src/services/markets/quote.ts\\n+++ b/apps/vendor-hyperliquid/src/services/markets/quote.ts\\n@@ -39,0 +40,2 @@ const quote$ = defer(() => getAllMids()).pipe(\\n+      interest_rate_long: ctx?.funding ? `${-+ctx.funding}` : undefined,\\n+      interest_rate_short: ctx?.funding,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/src/public-data/new-quote.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 1e77d860ac517c51538e701d845557f9f386c35a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 23:20:55 2025 +0800\\n\\n    feat: add hl interest rate (#2211)\\n    \\n    * feat: add hl interest rate\\n\\ndiff --git a/apps/vendor-okx/src/public-data/new-quote.ts b/apps/vendor-okx/src/public-data/new-quote.ts\\nindex 6ed5cb051..703eaa20f 100644\\n--- a/apps/vendor-okx/src/public-data/new-quote.ts\\n+++ b/apps/vendor-okx/src/public-data/new-quote.ts\\n@@ -204 +204 @@ const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n-      interest_rate_long: `-${x[0].fundingRate}`,\\n+      interest_rate_long: `${-+x[0].fundingRate}`,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-05-14-46.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 1e77d860ac517c51538e701d845557f9f386c35a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 23:20:55 2025 +0800\\n\\n    feat: add hl interest rate (#2211)\\n    \\n    * feat: add hl interest rate\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-05-14-46.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-05-14-46.json\\nnew file mode 100644\\nindex 000000000..ec6762b4a\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-hyperliquid/2025-12-05-14-46.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n+      \\\"comment\\\": \\\"add hl interest rate\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-15-19.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 1e77d860ac517c51538e701d845557f9f386c35a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 23:20:55 2025 +0800\\n\\n    feat: add hl interest rate (#2211)\\n    \\n    * feat: add hl interest rate\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-15-19.json b/common/changes/@yuants/vendor-okx/2025-12-05-15-19.json\\nnew file mode 100644\\nindex 000000000..0d31100d1\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-15-19.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"fix\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"c840c382e85f76e6ea73540c60cab59a7c6a4a62\",\n+      \"short\": \"c840c382e\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-05 23:22:42 +0800\",\n+      \"subject\": \"chore: bump version (#2212)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit c840c382e85f76e6ea73540c60cab59a7c6a4a62\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 23:22:42 2025 +0800\\n\\n    chore: bump version (#2212)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.json b/apps/vendor-hyperliquid/CHANGELOG.json\\nindex 3de161f60..bb50049e2 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.json\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.9\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-hyperliquid_v0.7.9\\\",\\n+      \\\"date\\\": \\\"Fri, 05 Dec 2025 15:22:22 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add hl interest rate\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit c840c382e85f76e6ea73540c60cab59a7c6a4a62\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 23:22:42 2025 +0800\\n\\n    chore: bump version (#2212)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.md b/apps/vendor-hyperliquid/CHANGELOG.md\\nindex 5c3abad78..ca255f704 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.md\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Thu, 04 Dec 2025 16:51:07 GMT and should not be manually modified.\\n+This log was last generated on Fri, 05 Dec 2025 15:22:22 GMT and should not be manually modified.\\n+\\n+## 0.7.9\\n+Fri, 05 Dec 2025 15:22:22 GMT\\n+\\n+### Patches\\n+\\n+- add hl interest rate\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit c840c382e85f76e6ea73540c60cab59a7c6a4a62\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 23:22:42 2025 +0800\\n\\n    chore: bump version (#2212)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/package.json b/apps/vendor-hyperliquid/package.json\\nindex 267ed6867..07748d229 100644\\n--- a/apps/vendor-hyperliquid/package.json\\n+++ b/apps/vendor-hyperliquid/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.8\\\",\\n+  \\\"version\\\": \\\"0.7.9\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit c840c382e85f76e6ea73540c60cab59a7c6a4a62\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 23:22:42 2025 +0800\\n\\n    chore: bump version (#2212)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex 5dbb9eb6a..bdad91c7a 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.3\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.3\\\",\\n+      \\\"date\\\": \\\"Fri, 05 Dec 2025 15:22:22 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit c840c382e85f76e6ea73540c60cab59a7c6a4a62\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 23:22:42 2025 +0800\\n\\n    chore: bump version (#2212)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex 09f58fed9..0a58ccbc1 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Fri, 05 Dec 2025 14:34:29 GMT and should not be manually modified.\\n+This log was last generated on Fri, 05 Dec 2025 15:22:22 GMT and should not be manually modified.\\n+\\n+## 0.29.3\\n+Fri, 05 Dec 2025 15:22:22 GMT\\n+\\n+### Patches\\n+\\n+- fix\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit c840c382e85f76e6ea73540c60cab59a7c6a4a62\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 23:22:42 2025 +0800\\n\\n    chore: bump version (#2212)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 314748c28..b07c8112a 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.29.2\\\",\\n+  \\\"version\\\": \\\"0.29.3\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-05-14-46.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit c840c382e85f76e6ea73540c60cab59a7c6a4a62\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 23:22:42 2025 +0800\\n\\n    chore: bump version (#2212)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-05-14-46.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-05-14-46.json\\ndeleted file mode 100644\\nindex ec6762b4a..000000000\\n--- a/common/changes/@yuants/vendor-hyperliquid/2025-12-05-14-46.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n-      \\\"comment\\\": \\\"add hl interest rate\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/{main_2025-12-04-16-51.json => main_2025-12-05-15-22.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-15-19.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit c840c382e85f76e6ea73540c60cab59a7c6a4a62\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 23:22:42 2025 +0800\\n\\n    chore: bump version (#2212)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-15-19.json b/common/changes/@yuants/vendor-okx/2025-12-05-15-19.json\\ndeleted file mode 100644\\nindex 0d31100d1..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-05-15-19.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"fix\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-05-14-34.json => main_2025-12-05-15-22.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"8aa2e3f9dce77c78c4482ecfa248769a464c5d2a\",\n+      \"short\": \"8aa2e3f9d\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-06 01:10:11 +0800\",\n+      \"subject\": \"feat: add aster interest rate (#2213)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"feat\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 30,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/src/api/public-api.ts\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 8aa2e3f9dce77c78c4482ecfa248769a464c5d2a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 01:10:11 2025 +0800\\n\\n    feat: add aster interest rate (#2213)\\n    \\n    * feat: add aster interest rate\\n\\ndiff --git a/apps/vendor-aster/src/api/public-api.ts b/apps/vendor-aster/src/api/public-api.ts\\nindex 516014a16..4cd51f4b6 100644\\n--- a/apps/vendor-aster/src/api/public-api.ts\\n+++ b/apps/vendor-aster/src/api/public-api.ts\\n@@ -112,0 +113,30 @@ export const getFApiV1TickerPrice = createApi<\\n+\\n+/**\\n+ * 获取资金费率\\n+ * https://github.com/asterdex/api-docs/blob/master/aster-finance-futures-api_CN.md\\n+ */\\n+export const getFApiV1PremiumIndex = createApi<\\n+  {\\n+    symbol?: string;\\n+  },\\n+  | {\\n+      symbol: string; // 交易对\\n+      markPrice: string; // 标记价格\\n+      indexPrice: string; // 指数价格\\n+      estimatedSettlePrice: string; // 预估结算价,仅在交割开始前最后一小时有意义\\n+      lastFundingRate: string; // 最近更新的资金费率\\n+      nextFundingTime: number; // 下次资金费时间\\n+      interestRate: string; // 标的资产基础利率\\n+      time: number; // 更新时间\\n+    }\\n+  | {\\n+      symbol: string; // 交易对\\n+      markPrice: string; // 标记价格\\n+      indexPrice: string; // 指数价格\\n+      estimatedSettlePrice: string; // 预估结算价,仅在交割开始前最后一小时有意义\\n+      lastFundingRate: string; // 最近更新的资金费率\\n+      nextFundingTime: number; // 下次资金费时间\\n+      interestRate: string; // 标的资产基础利率\\n+      time: number; // 更新时间\\n+    }[]\\n+>('GET', '/fapi/v1/premiumIndex');\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"getFApiV1PremiumIndex\",\n+              \"code\": \"export const getFApiV1PremiumIndex = createApi<\\n  {\\n    symbol?: string;\\n  },\\n  | {\\n      symbol: string; // 交易对\\n      markPrice: string; // 标记价格\\n      indexPrice: string; // 指数价格\\n      estimatedSettlePrice: string; // 预估结算价,仅在交割开始前最后一小时有意义\\n      lastFundingRate: string; // 最近更新的资金费率\\n      nextFundingTime: number; // 下次资金费时间\\n      interestRate: string; // 标的资产基础利率\\n      time: number; // 更新时间\\n    }\\n  | {\",\n+              \"lineStart\": 118,\n+              \"lineEnd\": 143\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 103,\n+          \"deletions\": 48,\n+          \"path\": \"apps/vendor-aster/src/services/markets/quote.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 8aa2e3f9dce77c78c4482ecfa248769a464c5d2a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 01:10:11 2025 +0800\\n\\n    feat: add aster interest rate (#2213)\\n    \\n    * feat: add aster interest rate\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/quote.ts b/apps/vendor-aster/src/services/markets/quote.ts\\nindex 9ea420c98..ba022abb8 100644\\n--- a/apps/vendor-aster/src/services/markets/quote.ts\\n+++ b/apps/vendor-aster/src/services/markets/quote.ts\\n@@ -10,0 +11 @@ import {\\n+  exhaustMap,\\n@@ -22,0 +24 @@ import {\\n+  tap,\\n@@ -27,0 +30 @@ import {\\n+  getFApiV1PremiumIndex,\\n@@ -64,23 +67,23 @@ const getRequestIntervalMs = (rateLimits: IAsterRateLimit[] | undefined, fallbac\\n-// const openInterestCache = createCache<string>(\\n-//   async (symbol: string) => {\\n-//     try {\\n-//       const data = await getFApiV1OpenInterest({ symbol });\\n-//       return data.openInterest;\\n-//     } catch (error) {\\n-//       console.warn('getFApiV1OpenInterest failed', symbol, error);\\n-//       return undefined;\\n-//     }\\n-//   },\\n-//   { expire: OPEN_INTEREST_TTL },\\n-// );\\n-\\n-// const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n-//   map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n-//   catchError((err) => {\\n-//     console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n-//     return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n-//   }),\\n-//   startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n-//   retry({ delay: 60_000 }),\\n-//   shareReplay({ bufferSize: 1, refCount: true }),\\n-// );\\n+const openInterestCache = createCache<string>(\\n+  async (symbol: string) => {\\n+    try {\\n+      const data = await getFApiV1OpenInterest({ symbol });\\n+      return data.openInterest;\\n+    } catch (error) {\\n+      console.warn('getFApiV1OpenInterest failed', symbol, error);\\n+      return undefined;\\n+    }\\n+  },\\n+  { expire: OPEN_INTEREST_TTL },\\n+);\\n+\\n+const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n+  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n+  catchError((err) => {\\n+    console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n+    return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n+  }),\\n+  startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n+  retry({ delay: 60_000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+);\\n@@ -104 +106,0 @@ const quoteFromTicker$ = ticker$.pipe(\\n-      updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n@@ -109,24 +111,77 @@ const quoteFromTicker$ = ticker$.pipe(\\n-// const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\\n-//   mergeMap(([tickers, requestInterval]) =>\\n-//     from(tickers).pipe(\\n-//       concatMap((ticker, index) =>\\n-//         (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n-//           mergeMap(() => from(openInterestCache.query(ticker.symbol))),\\n-//           map(\\n-//             (openInterest): Partial<IQuote> => ({\\n-//               datasource_id: 'ASTER',\\n-//               product_id: encodePath('ASTER', 'PERP', ticker.symbol),\\n-//               open_interest: `${openInterest ?? 0}`,\\n-//               updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n-//             }),\\n-//           ),\\n-//         ),\\n-//       ),\\n-//     ),\\n-//   ),\\n-// );\\n-\\n-const quote$ = merge(\\n-  quoteFromTicker$,\\n-  // quoteFromOpenInterest$\\n-).pipe(\\n+// Extract unique symbols from ticker stream\\n+const symbolList$ = ticker$.pipe(\\n+  map((tickers) => tickers.map((t) => t.symbol)),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+);\\n+\\n+// Create a controlled rotation stream for fetching open interest\\n+// This cycles through all symbols with proper delays, independent of ticker updates\\n+const OPEN_INTEREST_CYCLE_DELAY = process.env.OPEN_INTEREST_CYCLE_DELAY\\n+  ? Number(process.env.OPEN_INTEREST_CYCLE_DELAY)\\n+  : 60_000; // 60 seconds between full cycles\\n+\\n+const openInterestRotation$ = combineLatest([symbolList$, requestInterval$]).pipe(\\n+  exhaustMap(([symbols, requestInterval]) =>\\n+    defer(() => {\\n+      console.info(\\n+        `Starting open interest rotation for ${symbols.length} symbols with ${requestInterval}ms interval`,\\n+      );\\n+      return from(symbols).pipe(\\n+        concatMap((symbol, index) =>\\n+          (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n+            mergeMap(() => from(openInterestCache.query(symbol))),\\n+            map((openInterest) => ({\\n+              symbol,\\n+              openInterest: openInterest ?? '0',\\n+              timestamp: Date.now(),\\n+            })),\\n+            catchError((err) => {\\n+              console.warn(`Failed to fetch open interest for ${symbol}:`, err);\\n+              return of(undefined);\\n+            }),\\n+          ),\\n+        ),\\n+      );\\n+    }),\\n+  ),\\n+  filter((x) => !!x),\\n+  shareReplay({ bufferSize: 1000, refCount: true }), // Cache open interest for all symbols\\n+);\\n+\\n+// Convert open interest rotation data to quote format\\n+const quoteFromOpenInterest$ = openInterestRotation$.pipe(\\n+  map(\\n+    (data): Partial<IQuote> => ({\\n+      datasource_id: 'ASTER',\\n+      product_id: encodePath('ASTER', 'PERP', data?.symbol),\\n+      open_interest: data?.openInterest,\\n+    }),\\n+  ),\\n+);\\n+\\n+// Funding rate stream - fetches all symbols at once (more efficient than per-symbol)\\n+const fundingRate$ = defer(() => getFApiV1PremiumIndex({})).pipe(\\n+  map((data) => {\\n+    // Handle both single object and array responses\\n+    const premiumDataArray = Array.isArray(data) ? data : [data];\\n+    return premiumDataArray;\\n+  }),\\n+  repeat({ delay: OPEN_INTEREST_CYCLE_DELAY }),\\n+  retry({ delay: 5000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+);\\n+\\n+// Convert funding rate data to quote format\\n+const quoteFromFundingRate$ = fundingRate$.pipe(\\n+  mergeMap((premiumDataArray) => premiumDataArray),\\n+  map(\\n+    (premiumData): Partial<IQuote> => ({\\n+      datasource_id: 'ASTER',\\n+      product_id: encodePath('ASTER', 'PERP', premiumData.symbol),\\n+      interest_rate_long: premiumData.lastFundingRate ? `${-+premiumData.lastFundingRate}` : undefined,\\n+      interest_rate_short: premiumData.lastFundingRate,\\n+    }),\\n+  ),\\n+);\\n+\\n+const quote$ = merge(quoteFromTicker$, quoteFromOpenInterest$, quoteFromFundingRate$).pipe(\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"openInterestCache\",\n+              \"code\": \"const openInterestCache = createCache<string>(\\n  async (symbol: string) => {\\n    try {\",\n+              \"lineStart\": 67,\n+              \"lineEnd\": 69\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"data\",\n+              \"code\": \"      const data = await getFApiV1OpenInterest({ symbol });\\n      return data.openInterest;\\n    } catch (error) {\\n      console.warn('getFApiV1OpenInterest failed', symbol, error);\\n      return undefined;\\n    }\\n  },\\n  { expire: OPEN_INTEREST_TTL },\\n);\\n\",\n+              \"lineStart\": 70,\n+              \"lineEnd\": 79\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"requestInterval\",\n+              \"code\": \"const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n  catchError((err) => {\\n    console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n    return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n  }),\\n  startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n  retry({ delay: 60_000 }),\\n  shareReplay({ bufferSize: 1, refCount: true }),\\n);\\n// Extract unique symbols from ticker stream\",\n+              \"lineStart\": 80,\n+              \"lineEnd\": 111\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"symbolList\",\n+              \"code\": \"const symbolList$ = ticker$.pipe(\\n  map((tickers) => tickers.map((t) => t.symbol)),\\n  shareReplay({ bufferSize: 1, refCount: true }),\\n);\\n\\n// Create a controlled rotation stream for fetching open interest\\n// This cycles through all symbols with proper delays, independent of ticker updates\",\n+              \"lineStart\": 112,\n+              \"lineEnd\": 118\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"OPEN_INTEREST_CYCLE_DELAY\",\n+              \"code\": \"const OPEN_INTEREST_CYCLE_DELAY = process.env.OPEN_INTEREST_CYCLE_DELAY\\n  ? Number(process.env.OPEN_INTEREST_CYCLE_DELAY)\\n  : 60_000; // 60 seconds between full cycles\\n\",\n+              \"lineStart\": 119,\n+              \"lineEnd\": 122\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"openInterestRotation\",\n+              \"code\": \"const openInterestRotation$ = combineLatest([symbolList$, requestInterval$]).pipe(\\n  exhaustMap(([symbols, requestInterval]) =>\\n    defer(() => {\\n      console.info(\\n        `Starting open interest rotation for ${symbols.length} symbols with ${requestInterval}ms interval`,\\n      );\\n      return from(symbols).pipe(\\n        concatMap((symbol, index) =>\\n          (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n            mergeMap(() => from(openInterestCache.query(symbol))),\\n            map((openInterest) => ({\\n              symbol,\\n              openInterest: openInterest ?? '0',\\n              timestamp: Date.now(),\\n            })),\",\n+              \"lineStart\": 123,\n+              \"lineEnd\": 151\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quoteFromOpenInterest\",\n+              \"code\": \"const quoteFromOpenInterest$ = openInterestRotation$.pipe(\\n  map(\\n    (data): Partial<IQuote> => ({\\n      datasource_id: 'ASTER',\\n      product_id: encodePath('ASTER', 'PERP', data?.symbol),\\n      open_interest: data?.openInterest,\\n    }),\\n  ),\\n);\\n\\n// Funding rate stream - fetches all symbols at once (more efficient than per-symbol)\",\n+              \"lineStart\": 152,\n+              \"lineEnd\": 162\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"fundingRate\",\n+              \"code\": \"const fundingRate$ = defer(() => getFApiV1PremiumIndex({})).pipe(\\n  map((data) => {\\n    // Handle both single object and array responses\",\n+              \"lineStart\": 163,\n+              \"lineEnd\": 165\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"premiumDataArray\",\n+              \"code\": \"    const premiumDataArray = Array.isArray(data) ? data : [data];\\n    return premiumDataArray;\\n  }),\\n  repeat({ delay: OPEN_INTEREST_CYCLE_DELAY }),\\n  retry({ delay: 5000 }),\\n  shareReplay({ bufferSize: 1, refCount: true }),\\n);\\n\\n// Convert funding rate data to quote format\",\n+              \"lineStart\": 166,\n+              \"lineEnd\": 174\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quoteFromFundingRate\",\n+              \"code\": \"const quoteFromFundingRate$ = fundingRate$.pipe(\\n  mergeMap((premiumDataArray) => premiumDataArray),\\n  map(\\n    (premiumData): Partial<IQuote> => ({\\n      datasource_id: 'ASTER',\\n      product_id: encodePath('ASTER', 'PERP', premiumData.symbol),\\n      interest_rate_long: premiumData.lastFundingRate ? `${-+premiumData.lastFundingRate}` : undefined,\\n      interest_rate_short: premiumData.lastFundingRate,\\n    }),\\n  ),\\n);\\n\",\n+              \"lineStart\": 175,\n+              \"lineEnd\": 186\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"quote\",\n+              \"code\": \"const quote$ = merge(quoteFromTicker$, quoteFromOpenInterest$, quoteFromFundingRate$).pipe(\",\n+              \"lineStart\": 187,\n+              \"lineEnd\": 188\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-05-16-39.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 8aa2e3f9dce77c78c4482ecfa248769a464c5d2a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 01:10:11 2025 +0800\\n\\n    feat: add aster interest rate (#2213)\\n    \\n    * feat: add aster interest rate\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-05-16-39.json b/common/changes/@yuants/vendor-aster/2025-12-05-16-39.json\\nnew file mode 100644\\nindex 000000000..343b32f4f\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-05-16-39.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"add aster interest rate\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"4f88a860d31c3c87a87c8a17f08874df4f165926\",\n+      \"short\": \"4f88a860d\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-06 01:15:09 +0800\",\n+      \"subject\": \"chore: bump version (#2214)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 4f88a860d31c3c87a87c8a17f08874df4f165926\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 01:15:09 2025 +0800\\n\\n    chore: bump version (#2214)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex 098dec2b3..ed645a9b9 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.20\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.20\\\",\\n+      \\\"date\\\": \\\"Fri, 05 Dec 2025 17:11:30 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add aster interest rate\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 4f88a860d31c3c87a87c8a17f08874df4f165926\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 01:15:09 2025 +0800\\n\\n    chore: bump version (#2214)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex d31cd102a..7fe7f275a 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Fri, 05 Dec 2025 09:35:39 GMT and should not be manually modified.\\n+This log was last generated on Fri, 05 Dec 2025 17:11:30 GMT and should not be manually modified.\\n+\\n+## 0.7.20\\n+Fri, 05 Dec 2025 17:11:30 GMT\\n+\\n+### Patches\\n+\\n+- add aster interest rate\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 4f88a860d31c3c87a87c8a17f08874df4f165926\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 01:15:09 2025 +0800\\n\\n    chore: bump version (#2214)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex 073099d7a..1976fd5c4 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.19\\\",\\n+  \\\"version\\\": \\\"0.7.20\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-05-16-39.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 4f88a860d31c3c87a87c8a17f08874df4f165926\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 01:15:09 2025 +0800\\n\\n    chore: bump version (#2214)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-05-16-39.json b/common/changes/@yuants/vendor-aster/2025-12-05-16-39.json\\ndeleted file mode 100644\\nindex 343b32f4f..000000000\\n--- a/common/changes/@yuants/vendor-aster/2025-12-05-16-39.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n-      \\\"comment\\\": \\\"add aster interest rate\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-05-09-35.json => main_2025-12-05-17-11.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"c79ad8cf3b8bd4aabdf86cb5715cdfb2baa23529\",\n+      \"short\": \"c79ad8cf3\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-06 02:38:52 +0800\",\n+      \"subject\": \"fix: interest rate (#2215)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"fix\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 47,\n+          \"deletions\": 20,\n+          \"path\": \"apps/vendor-okx/src/public-data/new-quote.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit c79ad8cf3b8bd4aabdf86cb5715cdfb2baa23529\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 02:38:52 2025 +0800\\n\\n    fix: interest rate (#2215)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/new-quote.ts b/apps/vendor-okx/src/public-data/new-quote.ts\\nindex 703eaa20f..e3c6a7098 100644\\n--- a/apps/vendor-okx/src/public-data/new-quote.ts\\n+++ b/apps/vendor-okx/src/public-data/new-quote.ts\\n@@ -29,2 +29,8 @@ import {\\n-import { getInstruments, getMarketTickers, getOpenInterest, getPositionTiers } from '../api/public-api';\\n-import { useFundingRate, useOpenInterest, useTicker } from '../ws';\\n+import {\\n+  getFundingRate,\\n+  getInstruments,\\n+  getMarketTickers,\\n+  getOpenInterest,\\n+  getPositionTiers,\\n+} from '../api/public-api';\\n+import { useOpenInterest, useTicker } from '../ws';\\n@@ -194,17 +200,17 @@ const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n-const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n-  listWatch(\\n-    (x) => x.instId,\\n-    (x) => useFundingRate(x.instId),\\n-    () => true,\\n-  ),\\n-  map(\\n-    (x): Partial<IQuote> => ({\\n-      datasource_id: 'OKX',\\n-      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n-      interest_rate_long: `${-+x[0].fundingRate}`,\\n-      interest_rate_short: x[0].fundingRate,\\n-      interest_rate_next_settled_at: x[0].fundingTime,\\n-    }),\\n-  ),\\n-  share(),\\n-);\\n+// const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n+//   listWatch(\\n+//     (x) => x.instId,\\n+//     (x) => useFundingRate(x.instId),\\n+//     () => true,\\n+//   ),\\n+//   map(\\n+//     (x): Partial<IQuote> => ({\\n+//       datasource_id: 'OKX',\\n+//       product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n+//       interest_rate_long: `-${x[0].fundingRate}`,\\n+//       interest_rate_short: x[0].fundingRate,\\n+//       interest_rate_next_settled_at: x[0].fundingTime,\\n+//     }),\\n+//   ),\\n+//   share(),\\n+// );\\n@@ -312,0 +319,21 @@ const marginOpenInterest$ = spotInstIds$.pipe(\\n+const fundingRate$ = defer(() => getFundingRate({ instId: 'ANY' })).pipe(\\n+  map((data) => data.data),\\n+  repeat({ delay: 50_000 }),\\n+  retry({ delay: 5000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+);\\n+\\n+// Convert funding rate data to quote format\\n+const interestRateOfSwap$ = fundingRate$.pipe(\\n+  mergeMap((premiumDataArray) => premiumDataArray),\\n+  map(\\n+    (premiumData): Partial<IQuote> => ({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SWAP', premiumData.instId),\\n+      interest_rate_long: premiumData.fundingRate ? `${-+premiumData.fundingRate}` : undefined,\\n+      interest_rate_short: premiumData.fundingRate,\\n+      interest_rate_next_settled_at: premiumData.fundingTime,\\n+    }),\\n+  ),\\n+);\\n+\\n@@ -322 +349 @@ const quoteSources$ = [\\n-  interestRateOfSwapFromWS$,\\n+  interestRateOfSwap$,\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"interestRateOfSwapFromWS\",\n+              \"code\": \"// const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n//   listWatch(\\n//     (x) => x.instId,\\n//     (x) => useFundingRate(x.instId),\\n//     () => true,\\n//   ),\\n//   map(\\n//     (x): Partial<IQuote> => ({\\n//       datasource_id: 'OKX',\\n//       product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n//       interest_rate_long: `-${x[0].fundingRate}`,\\n//       interest_rate_short: x[0].fundingRate,\\n//       interest_rate_next_settled_at: x[0].fundingTime,\\n//     }),\\n//   ),\",\n+              \"lineStart\": 200,\n+              \"lineEnd\": 318\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"fundingRate\",\n+              \"code\": \"const fundingRate$ = defer(() => getFundingRate({ instId: 'ANY' })).pipe(\\n  map((data) => data.data),\\n  repeat({ delay: 50_000 }),\\n  retry({ delay: 5000 }),\\n  shareReplay({ bufferSize: 1, refCount: true }),\\n);\\n\\n// Convert funding rate data to quote format\",\n+              \"lineStart\": 319,\n+              \"lineEnd\": 326\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"interestRateOfSwap\",\n+              \"code\": \"const interestRateOfSwap$ = fundingRate$.pipe(\\n  mergeMap((premiumDataArray) => premiumDataArray),\\n  map(\\n    (premiumData): Partial<IQuote> => ({\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SWAP', premiumData.instId),\\n      interest_rate_long: premiumData.fundingRate ? `${-+premiumData.fundingRate}` : undefined,\\n      interest_rate_short: premiumData.fundingRate,\\n      interest_rate_next_settled_at: premiumData.fundingTime,\\n    }),\\n  ),\\n);\\n\\n  interestRateOfSwap$,\",\n+              \"lineStart\": 327,\n+              \"lineEnd\": 350\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 62,\n+          \"deletions\": 22,\n+          \"path\": \"apps/vendor-okx/src/ws.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit c79ad8cf3b8bd4aabdf86cb5715cdfb2baa23529\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 02:38:52 2025 +0800\\n\\n    fix: interest rate (#2215)\\n\\ndiff --git a/apps/vendor-okx/src/ws.ts b/apps/vendor-okx/src/ws.ts\\nindex c3e29df77..5e8fe8c97 100644\\n--- a/apps/vendor-okx/src/ws.ts\\n+++ b/apps/vendor-okx/src/ws.ts\\n@@ -3 +3,11 @@ import { encodePath, formatTime } from '@yuants/utils';\\n-import { catchError, defer, EMPTY, filter, interval, Observable, Subscription, tap, timeout } from 'rxjs';\\n+import {\\n+  catchError,\\n+  EMPTY,\\n+  filter,\\n+  interval,\\n+  Observable,\\n+  shareReplay,\\n+  Subscription,\\n+  tap,\\n+  timeout,\\n+} from 'rxjs';\\n@@ -259,21 +269,33 @@ class OKXWsClient {\\n-const fromWsChannelAndInstId = <T>(path: string, channel: string, instId: string) =>\\n-  defer(\\n-    () =>\\n-      new Observable<T>((subscriber) => {\\n-        const client = OKXWsClient.GetWsClient(path);\\n-        client.subscribe(channel, instId, (data: T) => {\\n-          subscriber.next(data);\\n-        });\\n-        const removeError = client.addConnectionListener('error', (err) => {\\n-          subscriber.error(err);\\n-        });\\n-        const removeClose = client.addConnectionListener('close', () => {\\n-          subscriber.error('WS Connection Closed');\\n-        });\\n-        subscriber.add(() => {\\n-          removeError();\\n-          removeClose();\\n-          client.unsubscribe(channel, instId);\\n-        });\\n-      }),\\n-  ).pipe(\\n+// 全局缓存：存储已创建的 WebSocket Observable，实现订阅复用\\n+// key: encodePath(path, channel, instId)\\n+// value: shared Observable\\n+const wsObservableCache = new Map<string, Observable<any>>();\\n+\\n+const fromWsChannelAndInstId = <T>(path: string, channel: string, instId: string) => {\\n+  const cacheKey = encodePath(path, channel, instId);\\n+\\n+  // 检查缓存中是否已存在该订阅\\n+  const cached = wsObservableCache.get(cacheKey);\\n+  if (cached) {\\n+    console.info(formatTime(Date.now()), `♻️ Reusing cached subscription: ${cacheKey}`);\\n+    return cached as Observable<T>;\\n+  }\\n+\\n+  // 创建新的 Observable\\n+  const observable$ = new Observable<T>((subscriber) => {\\n+    const client = OKXWsClient.GetWsClient(path);\\n+    client.subscribe(channel, instId, (data: T) => {\\n+      subscriber.next(data);\\n+    });\\n+    const removeError = client.addConnectionListener('error', (err) => {\\n+      subscriber.error(err);\\n+    });\\n+    const removeClose = client.addConnectionListener('close', () => {\\n+      subscriber.error('WS Connection Closed');\\n+    });\\n+    subscriber.add(() => {\\n+      removeError();\\n+      removeClose();\\n+      client.unsubscribe(channel, instId);\\n+    });\\n+  }).pipe(\\n@@ -289,0 +312,11 @@ const fromWsChannelAndInstId = <T>(path: string, channel: string, instId: string\\n+    // 🔑 关键：使用 shareReplay 实现订阅复用\\n+    // - bufferSize: 1 - 缓存最新的一个值，新订阅者可以立即获得最新数据\\n+    // - refCount: true - 当所有订阅者都取消订阅时，自动取消上游订阅并清理资源\\n+    shareReplay({ bufferSize: 1, refCount: true }),\\n+    // 当订阅完全结束时，从缓存中移除\\n+    tap({\\n+      finalize: () => {\\n+        console.info(formatTime(Date.now()), `🗑️ Removing from cache: ${cacheKey}`);\\n+        wsObservableCache.delete(cacheKey);\\n+      },\\n+    }),\\n@@ -291,0 +325,7 @@ const fromWsChannelAndInstId = <T>(path: string, channel: string, instId: string\\n+  // 存入缓存\\n+  wsObservableCache.set(cacheKey, observable$);\\n+  console.info(formatTime(Date.now()), `📦 Cached new subscription: ${cacheKey}`);\\n+\\n+  return observable$;\\n+};\\n+\\n\",\n+          \"codeSnippets\": [\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"wsObservableCache\",\n+              \"code\": \"const wsObservableCache = new Map<string, Observable<any>>();\\n\",\n+              \"lineStart\": 272,\n+              \"lineEnd\": 273\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"fromWsChannelAndInstId\",\n+              \"code\": \"const fromWsChannelAndInstId = <T>(path: string, channel: string, instId: string) => {\",\n+              \"lineStart\": 274,\n+              \"lineEnd\": 274\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"cacheKey\",\n+              \"code\": \"const cacheKey = encodePath(path, channel, instId);\\n\\n// 检查缓存中是否已存在该订阅\",\n+              \"lineStart\": 275,\n+              \"lineEnd\": 277\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"cached\",\n+              \"code\": \"const cached = wsObservableCache.get(cacheKey);\\nif (cached) {\\n  console.info(formatTime(Date.now()), `♻️ Reusing cached subscription: ${cacheKey}`);\\n  return cached as Observable<T>;\\n}\\n\\n// 创建新的 Observable\",\n+              \"lineStart\": 278,\n+              \"lineEnd\": 284\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"observable\",\n+              \"code\": \"const observable$ = new Observable<T>((subscriber) => {\",\n+              \"lineStart\": 285,\n+              \"lineEnd\": 285\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"client\",\n+              \"code\": \"const client = OKXWsClient.GetWsClient(path);\\nclient.subscribe(channel, instId, (data: T) => {\\n  subscriber.next(data);\\n});\",\n+              \"lineStart\": 286,\n+              \"lineEnd\": 289\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"removeError\",\n+              \"code\": \"const removeError = client.addConnectionListener('error', (err) => {\\n  subscriber.error(err);\\n});\",\n+              \"lineStart\": 290,\n+              \"lineEnd\": 292\n+            },\n+            {\n+              \"type\": \"function\",\n+              \"name\": \"removeClose\",\n+              \"code\": \"  const removeClose = client.addConnectionListener('close', () => {\\n    subscriber.error('WS Connection Closed');\\n  });\\n  subscriber.add(() => {\\n    removeError();\\n    removeClose();\\n    client.unsubscribe(channel, instId);\\n  });\\n}).pipe(\\n  // 🔑 关键：使用 shareReplay 实现订阅复用\\n  // - bufferSize: 1 - 缓存最新的一个值，新订阅者可以立即获得最新数据\\n  // - refCount: true - 当所有订阅者都取消订阅时，自动取消上游订阅并清理资源\\n  shareReplay({ bufferSize: 1, refCount: true }),\\n  // 当订阅完全结束时，从缓存中移除\\n  tap({\",\n+              \"lineStart\": 293,\n+              \"lineEnd\": 332\n+            }\n+          ]\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-18-36.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit c79ad8cf3b8bd4aabdf86cb5715cdfb2baa23529\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 02:38:52 2025 +0800\\n\\n    fix: interest rate (#2215)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-18-36.json b/common/changes/@yuants/vendor-okx/2025-12-05-18-36.json\\nnew file mode 100644\\nindex 000000000..5ef6e40a5\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-18-36.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"fix ws \\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"9d30c323aa15afab3eae342a638f5017c1b097b4\",\n+      \"short\": \"9d30c323a\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-06 02:43:02 +0800\",\n+      \"subject\": \"fix: interest rate (#2216)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"fix\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-okx/src/public-data/new-quote.ts\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 9d30c323aa15afab3eae342a638f5017c1b097b4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 02:43:02 2025 +0800\\n\\n    fix: interest rate (#2216)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/new-quote.ts b/apps/vendor-okx/src/public-data/new-quote.ts\\nindex e3c6a7098..fd912742c 100644\\n--- a/apps/vendor-okx/src/public-data/new-quote.ts\\n+++ b/apps/vendor-okx/src/public-data/new-quote.ts\\n@@ -340,2 +339,0 @@ const interestRateOfSwap$ = fundingRate$.pipe(\\n-marginOpenInterest$.subscribe();\\n-\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 22,\n+          \"path\": \"apps/vendor-okx/src/public-data/quote.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 9d30c323aa15afab3eae342a638f5017c1b097b4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 02:43:02 2025 +0800\\n\\n    fix: interest rate (#2216)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/quote.ts b/apps/vendor-okx/src/public-data/quote.ts\\nindex e6a73bb79..84db94c5a 100644\\n--- a/apps/vendor-okx/src/public-data/quote.ts\\n+++ b/apps/vendor-okx/src/public-data/quote.ts\\n@@ -30 +30 @@ import { getInstruments, getMarketTickers, getOpenInterest, getPositionTiers } f\\n-import { useFundingRate, useOpenInterest, useTicker } from '../ws';\\n+import { useOpenInterest, useTicker } from '../ws';\\n@@ -194,18 +193,0 @@ const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n-const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n-  listWatch(\\n-    (x) => x.instId,\\n-    (x) => useFundingRate(x.instId),\\n-    () => true,\\n-  ),\\n-  map(\\n-    (x): Partial<IQuote> => ({\\n-      datasource_id: 'OKX',\\n-      product_id: encodePath('SWAP', x[0].instId),\\n-      interest_rate_long: `-${x[0].fundingRate}`,\\n-      interest_rate_short: x[0].fundingRate,\\n-      interest_rate_next_settled_at: x[0].fundingTime,\\n-    }),\\n-  ),\\n-  share(),\\n-);\\n-\\n@@ -313,2 +294,0 @@ const marginOpenInterest$ = spotInstIds$.pipe(\\n-marginOpenInterest$.subscribe();\\n-\\n@@ -322 +301,0 @@ const quoteSources$ = [\\n-  interestRateOfSwapFromWS$,\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-18-41.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 9d30c323aa15afab3eae342a638f5017c1b097b4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 02:43:02 2025 +0800\\n\\n    fix: interest rate (#2216)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-18-41.json b/common/changes/@yuants/vendor-okx/2025-12-05-18-41.json\\nnew file mode 100644\\nindex 000000000..8c8f65674\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-18-41.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"1\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"250b6c5d708cd53b40570b95e60f60e9ebeb509d\",\n+      \"short\": \"250b6c5d7\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-06 02:44:57 +0800\",\n+      \"subject\": \"chore: bump version (#2217)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 250b6c5d708cd53b40570b95e60f60e9ebeb509d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 02:44:57 2025 +0800\\n\\n    chore: bump version (#2217)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex bdad91c7a..d14cb068b 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.4\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.4\\\",\\n+      \\\"date\\\": \\\"Fri, 05 Dec 2025 18:43:51 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix ws \\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"1\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 9,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 250b6c5d708cd53b40570b95e60f60e9ebeb509d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 02:44:57 2025 +0800\\n\\n    chore: bump version (#2217)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex 0a58ccbc1..3fe8571a2 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,9 @@\\n-This log was last generated on Fri, 05 Dec 2025 15:22:22 GMT and should not be manually modified.\\n+This log was last generated on Fri, 05 Dec 2025 18:43:51 GMT and should not be manually modified.\\n+\\n+## 0.29.4\\n+Fri, 05 Dec 2025 18:43:51 GMT\\n+\\n+### Patches\\n+\\n+- fix ws \\n+- 1\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 250b6c5d708cd53b40570b95e60f60e9ebeb509d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 02:44:57 2025 +0800\\n\\n    chore: bump version (#2217)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex b07c8112a..3c4366cb5 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.29.3\\\",\\n+  \\\"version\\\": \\\"0.29.4\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-18-36.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 250b6c5d708cd53b40570b95e60f60e9ebeb509d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 02:44:57 2025 +0800\\n\\n    chore: bump version (#2217)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-18-36.json b/common/changes/@yuants/vendor-okx/2025-12-05-18-36.json\\ndeleted file mode 100644\\nindex 5ef6e40a5..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-05-18-36.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"fix ws \\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-18-41.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 250b6c5d708cd53b40570b95e60f60e9ebeb509d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 02:44:57 2025 +0800\\n\\n    chore: bump version (#2217)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-18-41.json b/common/changes/@yuants/vendor-okx/2025-12-05-18-41.json\\ndeleted file mode 100644\\nindex 8c8f65674..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-05-18-41.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"1\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-05-15-22.json => main_2025-12-05-18-43.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"fff872a17836a27b43cbec5c3d906cadf39d5174\",\n+      \"short\": \"fff872a17\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-06 03:05:09 +0800\",\n+      \"subject\": \"fix: interest rate (#2218)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"fix\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 9,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/src/public-data/new-quote.ts\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit fff872a17836a27b43cbec5c3d906cadf39d5174\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 03:05:09 2025 +0800\\n\\n    fix: interest rate (#2218)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/new-quote.ts b/apps/vendor-okx/src/public-data/new-quote.ts\\nindex fd912742c..dcfc532ee 100644\\n--- a/apps/vendor-okx/src/public-data/new-quote.ts\\n+++ b/apps/vendor-okx/src/public-data/new-quote.ts\\n@@ -335 +335 @@ const interestRateOfSwap$ = fundingRate$.pipe(\\n-      interest_rate_next_settled_at: premiumData.fundingTime,\\n+      interest_rate_next_settled_at: formatTime(+premiumData.fundingTime),\\n@@ -398,0 +399,8 @@ export const swapOpenInterest$ = defer(() => swapOpenInterests$).pipe(\\n+\\n+quote$\\n+  .pipe(\\n+    tap((quote) => {\\n+      console.log(quote);\\n+    }),\\n+  )\\n+  .subscribe();\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-19-03.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit fff872a17836a27b43cbec5c3d906cadf39d5174\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 03:05:09 2025 +0800\\n\\n    fix: interest rate (#2218)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-19-03.json b/common/changes/@yuants/vendor-okx/2025-12-05-19-03.json\\nnew file mode 100644\\nindex 000000000..8c8f65674\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-19-03.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"1\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"80a3e69621a24ebc3b78e18627a9ee7fd3e63290\",\n+      \"short\": \"80a3e6962\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-06 03:07:53 +0800\",\n+      \"subject\": \"chore: bump version (#2219)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 80a3e69621a24ebc3b78e18627a9ee7fd3e63290\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 03:07:53 2025 +0800\\n\\n    chore: bump version (#2219)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex d14cb068b..8432a1a0d 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.5\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.5\\\",\\n+      \\\"date\\\": \\\"Fri, 05 Dec 2025 19:07:36 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"1\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 80a3e69621a24ebc3b78e18627a9ee7fd3e63290\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 03:07:53 2025 +0800\\n\\n    chore: bump version (#2219)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex 3fe8571a2..fed9dc3b7 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Fri, 05 Dec 2025 18:43:51 GMT and should not be manually modified.\\n+This log was last generated on Fri, 05 Dec 2025 19:07:36 GMT and should not be manually modified.\\n+\\n+## 0.29.5\\n+Fri, 05 Dec 2025 19:07:36 GMT\\n+\\n+### Patches\\n+\\n+- 1\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit 80a3e69621a24ebc3b78e18627a9ee7fd3e63290\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 03:07:53 2025 +0800\\n\\n    chore: bump version (#2219)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 3c4366cb5..3a46cbd9b 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.29.4\\\",\\n+  \\\"version\\\": \\\"0.29.5\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-19-03.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 80a3e69621a24ebc3b78e18627a9ee7fd3e63290\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 03:07:53 2025 +0800\\n\\n    chore: bump version (#2219)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-19-03.json b/common/changes/@yuants/vendor-okx/2025-12-05-19-03.json\\ndeleted file mode 100644\\nindex 8c8f65674..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-05-19-03.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"1\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-05-18-43.json => main_2025-12-05-19-07.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"4bc38e98fc3c96675ab4b9be3c5cadce08da81ab\",\n+      \"short\": \"4bc38e98f\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-06 03:11:15 +0800\",\n+      \"subject\": \"fix: interest rate (#2220)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"fix\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 8,\n+          \"path\": \"apps/vendor-okx/src/public-data/new-quote.ts\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit 4bc38e98fc3c96675ab4b9be3c5cadce08da81ab\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 03:11:15 2025 +0800\\n\\n    fix: interest rate (#2220)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/new-quote.ts b/apps/vendor-okx/src/public-data/new-quote.ts\\nindex dcfc532ee..c184aae20 100644\\n--- a/apps/vendor-okx/src/public-data/new-quote.ts\\n+++ b/apps/vendor-okx/src/public-data/new-quote.ts\\n@@ -399,8 +398,0 @@ export const swapOpenInterest$ = defer(() => swapOpenInterests$).pipe(\\n-\\n-quote$\\n-  .pipe(\\n-    tap((quote) => {\\n-      console.log(quote);\\n-    }),\\n-  )\\n-  .subscribe();\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-19-09.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit 4bc38e98fc3c96675ab4b9be3c5cadce08da81ab\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 03:11:15 2025 +0800\\n\\n    fix: interest rate (#2220)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-19-09.json b/common/changes/@yuants/vendor-okx/2025-12-05-19-09.json\\nnew file mode 100644\\nindex 000000000..8c8f65674\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-19-09.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"1\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"c3b9a3726918ed17e9a53614b7ccf8673e97e88d\",\n+      \"short\": \"c3b9a3726\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-06 03:12:16 +0800\",\n+      \"subject\": \"chore: bump version (#2221)\",\n+      \"conventionalCommit\": {\n+        \"type\": \"chore\",\n+        \"scope\": null,\n+        \"breaking\": false\n+      },\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"changeType\": \"added\",\n+          \"patch\": \"commit c3b9a3726918ed17e9a53614b7ccf8673e97e88d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 03:12:16 2025 +0800\\n\\n    chore: bump version (#2221)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex 8432a1a0d..347053c59 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.29.6\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.29.6\\\",\\n+      \\\"date\\\": \\\"Fri, 05 Dec 2025 19:11:57 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"1\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit c3b9a3726918ed17e9a53614b7ccf8673e97e88d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 03:12:16 2025 +0800\\n\\n    chore: bump version (#2221)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex fed9dc3b7..f82f60a78 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Fri, 05 Dec 2025 19:07:36 GMT and should not be manually modified.\\n+This log was last generated on Fri, 05 Dec 2025 19:11:57 GMT and should not be manually modified.\\n+\\n+## 0.29.6\\n+Fri, 05 Dec 2025 19:11:57 GMT\\n+\\n+### Patches\\n+\\n+- 1\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"changeType\": \"modified\",\n+          \"patch\": \"commit c3b9a3726918ed17e9a53614b7ccf8673e97e88d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 03:12:16 2025 +0800\\n\\n    chore: bump version (#2221)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 3a46cbd9b..1a8de4f66 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.29.5\\\",\\n+  \\\"version\\\": \\\"0.29.6\\\",\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-19-09.json\",\n+          \"changeType\": \"deleted\",\n+          \"patch\": \"commit c3b9a3726918ed17e9a53614b7ccf8673e97e88d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Sat Dec 6 03:12:16 2025 +0800\\n\\n    chore: bump version (#2221)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-19-09.json b/common/changes/@yuants/vendor-okx/2025-12-05-19-09.json\\ndeleted file mode 100644\\nindex 8c8f65674..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-05-19-09.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"1\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\",\n+          \"codeSnippets\": []\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-05-19-07.json => main_2025-12-05-19-11.json}\",\n+          \"changeType\": \"renamed\",\n+          \"patch\": \"\",\n+          \"codeSnippets\": []\n+        }\n+      ]\n+    }\n+  ],\n+  \"analysis\": {\n+    \"domains\": [\n+      {\n+        \"name\": \"API请求优化与限速\",\n+        \"commits\": [\n+          \"6f0d6e65c\",\n+          \"60338d133\",\n+          \"ec771df32\",\n+          \"af56c8e8a\",\n+          \"4ecf8af00\",\n+          \"1e77d860a\",\n+          \"8aa2e3f9d\",\n+          \"9d30c323a\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-okx/src/experimental/submitOrder.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\",\n+          \"apps/vendor-okx/src/services.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\",\n+          \"apps/vendor-aster/src/services/markets/quote.ts\",\n+          \"common/changes/@yuants/vendor-aster/2025-12-05-09-26.json\",\n+          \"apps/vendor-okx/src/public-data/quote.ts\",\n+          \"apps/vendor-okx/src/ws.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\"\n+        ]\n+      },\n+      {\n+        \"name\": \"安全与鉴权\",\n+        \"commits\": [\n+          \"6f0d6e65c\",\n+          \"60338d133\",\n+          \"af56c8e8a\",\n+          \"4ecf8af00\",\n+          \"1e77d860a\",\n+          \"8aa2e3f9d\",\n+          \"c79ad8cf3\",\n+          \"9d30c323a\",\n+          \"fff872a17\",\n+          \"4bc38e98f\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-okx/src/experimental/submitOrder.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\",\n+          \"apps/vendor-okx/src/services.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\",\n+          \"apps/vendor-okx/src/public-data/quote.ts\",\n+          \"apps/vendor-okx/src/ws.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\",\n+          \"apps/vendor-okx/src/index.ts\",\n+          \"apps/vendor-okx/src/public-data/new-quote.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"订单与交易\",\n+        \"commits\": [\n+          \"6f0d6e65c\",\n+          \"60338d133\",\n+          \"ac108ab9d\",\n+          \"af56c8e8a\",\n+          \"4ecf8af00\",\n+          \"1e77d860a\",\n+          \"8aa2e3f9d\",\n+          \"c79ad8cf3\",\n+          \"9d30c323a\",\n+          \"fff872a17\",\n+          \"4bc38e98f\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-okx/src/experimental/submitOrder.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\",\n+          \"apps/vendor-okx/src/services.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\",\n+          \"apps/vendor-okx/src/experimental/cancelOrder.ts\",\n+          \"apps/vendor-okx/src/experimental/exchange.ts\",\n+          \"apps/vendor-okx/src/experimental/modifyOrder.ts\",\n+          \"apps/vendor-okx/src/orders/cancelOrder.ts\",\n+          \"apps/vendor-okx/src/orders/modifyOrder.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"账户管理\",\n+        \"commits\": [\n+          \"6f0d6e65c\",\n+          \"60338d133\",\n+          \"af56c8e8a\",\n+          \"4ecf8af00\",\n+          \"1e77d860a\",\n+          \"8aa2e3f9d\",\n+          \"c79ad8cf3\",\n+          \"9d30c323a\",\n+          \"fff872a17\",\n+          \"4bc38e98f\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-okx/src/experimental/submitOrder.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\",\n+          \"apps/vendor-okx/src/services.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\",\n+          \"apps/vendor-okx/src/public-data/quote.ts\",\n+          \"apps/vendor-okx/src/ws.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\",\n+          \"apps/vendor-okx/src/index.ts\",\n+          \"apps/vendor-okx/src/public-data/new-quote.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"市场数据\",\n+        \"commits\": [\n+          \"6f0d6e65c\",\n+          \"60338d133\",\n+          \"ec771df32\",\n+          \"af56c8e8a\",\n+          \"4ecf8af00\",\n+          \"1e77d860a\",\n+          \"8aa2e3f9d\",\n+          \"c79ad8cf3\",\n+          \"9d30c323a\",\n+          \"fff872a17\",\n+          \"4bc38e98f\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-okx/src/experimental/submitOrder.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\",\n+          \"apps/vendor-okx/src/services.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\",\n+          \"apps/vendor-aster/src/services/markets/quote.ts\",\n+          \"common/changes/@yuants/vendor-aster/2025-12-05-09-26.json\",\n+          \"apps/vendor-okx/src/public-data/quote.ts\",\n+          \"apps/vendor-okx/src/ws.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\"\n+        ]\n+      },\n+      {\n+        \"name\": \"配置与环境\",\n+        \"commits\": [\n+          \"6f0d6e65c\",\n+          \"60338d133\",\n+          \"624436a6e\",\n+          \"ac108ab9d\",\n+          \"d8d60c1f2\",\n+          \"ec771df32\",\n+          \"82809689b\",\n+          \"af56c8e8a\",\n+          \"4ecf8af00\",\n+          \"b7e210168\",\n+          \"1e77d860a\",\n+          \"c840c382e\",\n+          \"8aa2e3f9d\",\n+          \"4f88a860d\",\n+          \"c79ad8cf3\",\n+          \"9d30c323a\",\n+          \"250b6c5d7\",\n+          \"fff872a17\",\n+          \"80a3e6962\",\n+          \"4bc38e98f\",\n+          \"c3b9a3726\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-okx/src/experimental/submitOrder.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\",\n+          \"apps/vendor-okx/src/services.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\",\n+          \"apps/vendor-okx/CHANGELOG.json\",\n+          \"apps/vendor-okx/CHANGELOG.md\",\n+          \"apps/vendor-okx/package.json\",\n+          \"common/changes/@yuants/vendor-okx/{main_2025-12-04-16-51.json => main_2025-12-05-05-46.json}\",\n+          \"apps/vendor-okx/src/experimental/cancelOrder.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"文档\",\n+        \"commits\": [\n+          \"624436a6e\",\n+          \"d8d60c1f2\",\n+          \"82809689b\",\n+          \"b7e210168\",\n+          \"c840c382e\",\n+          \"4f88a860d\",\n+          \"250b6c5d7\",\n+          \"80a3e6962\",\n+          \"c3b9a3726\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-okx/CHANGELOG.json\",\n+          \"apps/vendor-okx/CHANGELOG.md\",\n+          \"apps/vendor-okx/package.json\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\",\n+          \"common/changes/@yuants/vendor-okx/{main_2025-12-04-16-51.json => main_2025-12-05-05-46.json}\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-06-24.json\",\n+          \"common/changes/@yuants/vendor-okx/{main_2025-12-05-05-46.json => main_2025-12-05-06-30.json}\",\n+          \"apps/vendor-aster/CHANGELOG.json\",\n+          \"apps/vendor-aster/CHANGELOG.md\"\n+        ]\n+      },\n+      {\n+        \"name\": \"错误处理与观测\",\n+        \"commits\": [\n+          \"ac108ab9d\",\n+          \"c79ad8cf3\",\n+          \"9d30c323a\",\n+          \"fff872a17\",\n+          \"4bc38e98f\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-okx/src/experimental/cancelOrder.ts\",\n+          \"apps/vendor-okx/src/experimental/exchange.ts\",\n+          \"apps/vendor-okx/src/experimental/modifyOrder.ts\",\n+          \"apps/vendor-okx/src/experimental/submitOrder.ts\",\n+          \"apps/vendor-okx/src/orders/cancelOrder.ts\",\n+          \"apps/vendor-okx/src/orders/modifyOrder.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"apps/vendor-okx/src/services.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-06-24.json\",\n+          \"apps/vendor-okx/src/public-data/new-quote.ts\"\n+        ]\n+      },\n+      {\n+        \"name\": \"接口重构\",\n+        \"commits\": [\n+          \"ac108ab9d\",\n+          \"8aa2e3f9d\"\n+        ],\n+        \"files\": [\n+          \"apps/vendor-okx/src/experimental/cancelOrder.ts\",\n+          \"apps/vendor-okx/src/experimental/exchange.ts\",\n+          \"apps/vendor-okx/src/experimental/modifyOrder.ts\",\n+          \"apps/vendor-okx/src/experimental/submitOrder.ts\",\n+          \"apps/vendor-okx/src/orders/cancelOrder.ts\",\n+          \"apps/vendor-okx/src/orders/modifyOrder.ts\",\n+          \"apps/vendor-okx/src/orders/submitOrder.ts\",\n+          \"apps/vendor-okx/src/services.ts\",\n+          \"common/changes/@yuants/vendor-okx/2025-12-05-06-24.json\",\n+          \"apps/vendor-aster/src/api/public-api.ts\"\n+        ]\n+      }\n+    ],\n+    \"riskIndicators\": [\n+      {\n+        \"type\": \"large_refactor\",\n+        \"severity\": \"medium\",\n+        \"details\": \"1 个大规模重构提交（删除超过100行）\",\n+        \"commits\": [\n+          \"ac108ab9d\"\n+        ]\n+      },\n+      {\n+        \"type\": \"no_tests\",\n+        \"severity\": \"medium\",\n+        \"details\": \"包含功能或修复提交但未见测试文件更新\",\n+        \"commits\": []\n+      }\n+    ]\n+  },\n+  \"metadata\": {\n+    \"tool\": \"git-changes-reporter\",\n+    \"version\": \"2.0.0\",\n+    \"repository\": \"/home/runner/work/Yuan/Yuan\"\n+  }\n+}\n\\ No newline at end of file\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "submitOrder",
              "code": "  \"patch\": \"commit 6f0d6e65cf5ac4f2cfd3b2236b067f325a5fd017\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 13:39:48 2025 +0800\\n\\n    feat: add broker tag to order submission parameters (#2201)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/submitOrder.ts b/apps/vendor-okx/src/experimental/submitOrder.ts\\nindex 343ec45f3..bfeca4a48 100644\\n--- a/apps/vendor-okx/src/experimental/submitOrder.ts\\n+++ b/apps/vendor-okx/src/experimental/submitOrder.ts\\n@@ -117,0 +118 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n+    tag: process.env.BROKER_TAG,\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 1,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-okx/src/orders/submitOrder.ts\",\n  \"changeType\": \"added\",",
              "lineStart": 57,
              "lineEnd": 64
            },
            {
              "type": "function",
              "name": "submitOrder",
              "code": "      \"patch\": \"commit 6f0d6e65cf5ac4f2cfd3b2236b067f325a5fd017\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 13:39:48 2025 +0800\\n\\n    feat: add broker tag to order submission parameters (#2201)\\n\\ndiff --git a/apps/vendor-okx/src/orders/submitOrder.ts b/apps/vendor-okx/src/orders/submitOrder.ts\\nindex d9200e3cf..5a161696c 100644\\n--- a/apps/vendor-okx/src/orders/submitOrder.ts\\n+++ b/apps/vendor-okx/src/orders/submitOrder.ts\\n@@ -117,0 +118 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n+    tag: process.env.BROKER_TAG,\\n\",\n      \"codeSnippets\": []\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\",\n      \"changeType\": \"added\",\n      \"patch\": \"commit 6f0d6e65cf5ac4f2cfd3b2236b067f325a5fd017\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 13:39:48 2025 +0800\\n\\n    feat: add broker tag to order submission parameters (#2201)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-05-38.json b/common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\\nnew file mode 100644\\nindex 000000000..4363f35a4\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-05-38.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"add broker tag\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n      \"codeSnippets\": []\n    }\n  ]\n},\n{\n  \"hash\": \"60338d13357d6778e0d82ccaa0a5a438f112f814\",",
              "lineStart": 65,
              "lineEnd": 95
            },
            {
              "type": "function",
              "name": "result",
              "code": "\"patch\": \"commit 60338d13357d6778e0d82ccaa0a5a438f112f814\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 13:44:12 2025 +0800\\n\\n    feat: add broker tag to algo order (#2202)\\n\\ndiff --git a/apps/vendor-okx/src/services.ts b/apps/vendor-okx/src/services.ts\\nindex 2cbbc938f..9c8c077ad 100644\\n--- a/apps/vendor-okx/src/services.ts\\n+++ b/apps/vendor-okx/src/services.ts\\n@@ -3 +2,0 @@ import { defer } from 'rxjs';\\n-import { getDefaultCredential, postGridAlgoOrder } from './api/private-api';\\n@@ -4,0 +4 @@ import { getTradingAccountId } from './accountInfos/uid';\\n+import { getDefaultCredential, postGridAlgoOrder } from './api/private-api';\\n@@ -12 +12,3 @@ defer(async () => {\\n-  terminal.server.provideService(\\n+  type Request = Parameters<typeof postGridAlgoOrder>[1];\\n+\\n+  terminal.server.provideService<Request, any>(\\n@@ -22 +24,2 @@ defer(async () => {\\n-        const result = await postGridAlgoOrder(credential, msg.req as any);\\n+        msg.req.tag = process.env.BROKER_TAG;\\n+        const result = await postGridAlgoOrder(credential, msg.req);\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"result\",",
              "lineStart": 96,
              "lineEnd": 100
            },
            {
              "type": "function",
              "name": "result",
              "code": "        \"code\": \"const result = await postGridAlgoOrder(credential, msg.req);\",\n        \"lineStart\": 25,\n        \"lineEnd\": 26\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit 60338d13357d6778e0d82ccaa0a5a438f112f814\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 13:44:12 2025 +0800\\n\\n    feat: add broker tag to algo order (#2202)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-05-42.json b/common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\\nnew file mode 100644\\nindex 000000000..e1ee03ccf\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-05-42.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"add broker tag to algo order\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 101,
              "lineEnd": 197
            },
            {
              "type": "function",
              "name": "cancelOrder",
              "code": "  \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/cancelOrder.ts b/apps/vendor-okx/src/experimental/cancelOrder.ts\\ndeleted file mode 100644\\nindex 6c4b53b5a..000000000\\n--- a/apps/vendor-okx/src/experimental/cancelOrder.ts\\n+++ /dev/null\\n@@ -1,14 +0,0 @@\\n-import { IOrder } from '@yuants/data-order';\\n-import { decodePath } from '@yuants/utils';\\n-import { ICredential, postTradeCancelOrder } from '../api/private-api';\\n-\\n-export const cancelOrder = async (credential: ICredential, order: IOrder) => {\\n-  const [, , instId] = decodePath(order.product_id);\\n-  const res = await postTradeCancelOrder(credential, {\\n-    instId,\\n-    ordId: order.order_id!,\\n-  });\\n-  if (res.code !== '0') {\\n-    throw new Error(`Cancel order failed: code=${res.code} msg=${res.msg}`);\\n-  }\\n-};\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 3,\n  \"deletions\": 3,\n  \"path\": \"apps/vendor-okx/src/experimental/exchange.ts\",\n  \"changeType\": \"modified\",\n  \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/exchange.ts b/apps/vendor-okx/src/experimental/exchange.ts\\nindex 98e379e8a..df5c9dc9e 100644\\n--- a/apps/vendor-okx/src/experimental/exchange.ts\\n+++ b/apps/vendor-okx/src/experimental/exchange.ts\\n@@ -5 +5,3 @@ import { getAccountConfig, ICredential } from '../api/private-api';\\n-import { cancelOrder } from './cancelOrder';\\n+import { cancelOrder } from '../orders/cancelOrder';\\n+import { modifyOrder } from '../orders/modifyOrder';\\n+import { submitOrder } from '../orders/submitOrder';\\n@@ -8 +9,0 @@ import { getPositions } from './getPositions';\\n-import { modifyOrder } from './modifyOrder';\\n@@ -10 +10,0 @@ import { listProducts } from './product';\\n-import { submitOrder } from './submitOrder';\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 0,\n  \"deletions\": 73,\n  \"path\": \"apps/vendor-okx/src/experimental/modifyOrder.ts\",",
              "lineStart": 198,
              "lineEnd": 213
            },
            {
              "type": "function",
              "name": "modifyOrder",
              "code": "  \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/modifyOrder.ts b/apps/vendor-okx/src/experimental/modifyOrder.ts\\ndeleted file mode 100644\\nindex 5e1e31188..000000000\\n--- a/apps/vendor-okx/src/experimental/modifyOrder.ts\\n+++ /dev/null\\n@@ -1,73 +0,0 @@\\n-import { IOrder } from '@yuants/data-order';\\n-import { formatTime, decodePath, roundToStep } from '@yuants/utils';\\n-import { firstValueFrom, map } from 'rxjs';\\n-import { ICredential, postTradeAmendOrder } from '../api/private-api';\\n-import { productService } from '../public-data/product';\\n-import { spotMarketTickers$ } from '../public-data/quote';\\n-\\n-export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n-  const [, instType, instId] = decodePath(order.product_id);\\n-  const params: {\\n-    instId: string;\\n-    ordId: string;\\n-    newPx?: string;\\n-    newSz?: string;\\n-  } = {\\n-    instId,\\n-    ordId: order.order_id!, // 使用现有订单ID\\n-  };\\n-\\n-  // 如果需要修改价格\\n-  if (order.price !== undefined) {\\n-    params.newPx = order.price.toString();\\n-  }\\n-\\n-  // 如果需要修改数量\\n-  if (order.volume !== undefined) {\\n-    // 处理数量修改，类似于 SubmitOrder 中的逻辑\\n-    if (instType === 'SWAP') {\\n-      params.newSz = order.volume.toString();\\n-    } else if (instType === 'SPOT') {\\n-      params.newSz = order.volume.toString();\\n-    } else if (instType === 'MARGIN') {\\n-      if (order.order_type === 'LIMIT') {\\n-        params.newSz = order.volume.toString();\\n-      }\\n-      if (order.order_type === 'MAKER') {\\n-        params.newSz = order.volume.toString();\\n-      }\\n-      if (order.order_type === 'MARKET') {\\n-        // 对于市价单，可能需要根据当前价格计算新的数量\\n-        const price = await firstValueFrom(\\n-          spotMarketTickers$.pipe(\\n-            map((x) =>\\n-              order.order_direction === 'OPEN_LONG' || order.order_direction === 'CLOSE_SHORT'\\n-                ? +x[instId].askPx\\n-                : +x[instId].bidPx,\\n-            ),\\n-          ),\\n-        );\\n-        if (!price) {\\n-          throw new Error(`invalid tick: ${price}`);\\n-        }\\n-        console.info(formatTime(Date.now()), 'ModifyOrder', 'price', price);\\n-        const theProduct = await firstValueFrom(\\n-          productService.mapProductIdToProduct$.pipe(map((x) => x.get(order.product_id))),\\n-        );\\n-        if (!theProduct) {\\n-          throw new Error(`Unknown product: ${order.position_id}`);\\n-        }\\n-        params.newSz = roundToStep(order.volume * price, theProduct.volume_step!).toString();\\n-      }\\n-    } else {\\n-      throw new Error(`Unknown instType: ${instType}`);\\n-    }\\n-  }\\n-\\n-  console.info(formatTime(Date.now()), 'ModifyOrder', 'params', JSON.stringify(params));\\n-\\n-  const res = await postTradeAmendOrder(credential, params);\\n-  if (res.code !== '0') {\\n-    throw new Error(`ModifyOrder failed: code=${res.code}, msg=${res.msg}`);\\n-  }\\n-};\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 0,\n  \"deletions\": 128,\n  \"path\": \"apps/vendor-okx/src/experimental/submitOrder.ts\",\n  \"changeType\": \"deleted\",",
              "lineStart": 214,
              "lineEnd": 221
            },
            {
              "type": "function",
              "name": "mapOrderDirectionToSide",
              "code": "  \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/submitOrder.ts b/apps/vendor-okx/src/experimental/submitOrder.ts\\ndeleted file mode 100644\\nindex bfeca4a48..000000000\\n--- a/apps/vendor-okx/src/experimental/submitOrder.ts\\n+++ /dev/null\\n@@ -1,128 +0,0 @@\\n-import { IOrder } from '@yuants/data-order';\\n-import { decodePath, formatTime, roundToStep } from '@yuants/utils';\\n-import { firstValueFrom, map } from 'rxjs';\\n-import { ICredential, postTradeOrder } from '../api/private-api';\\n-import { productService } from '../public-data/product';\\n-import { spotMarketTickers$ } from '../public-data/quote';\\n-\\n-const mapOrderDirectionToSide = (direction?: string) => {\\n-  switch (direction) {\\n-    case 'OPEN_LONG':\\n-    case 'CLOSE_SHORT':\\n-      return 'buy';\\n-    case 'OPEN_SHORT':\\n-    case 'CLOSE_LONG':\\n-      return 'sell';\\n-  }\\n-  throw new Error(`Unknown direction: ${direction}`);\\n-};\\n-\\n-const mapOrderDirectionToPosSide = (direction?: string) => {\\n-  switch (direction) {\\n-    case 'OPEN_LONG':\\n-    case 'CLOSE_LONG':\\n-      return 'long';\\n-    case 'CLOSE_SHORT':\\n-    case 'OPEN_SHORT':\\n-      return 'short';\\n-  }\\n-  throw new Error(`Unknown direction: ${direction}`);\\n-};\\n-\\n-const mapOrderTypeToOrdType = (order_type?: string) => {\\n-  switch (order_type) {\\n-    case 'LIMIT':\\n-      return 'limit';\\n-    case 'MARKET':\\n-      return 'market';\\n-    case 'MAKER':\\n-      return 'post_only';\\n-  }\\n-  throw new Error(`Unknown order type: ${order_type}`);\\n-};\\n-\\n-export const submitOrder = async (credential: ICredential, order: IOrder): Promise<{ order_id: string }> => {\\n-  const [, instType, instId] = decodePath(order.product_id);\\n-\\n-  // 交易数量，表示要购买或者出售的数量。\\n-  // 当币币/币币杠杆以限价买入和卖出时，指交易货币数量。\\n-  // 当币币杠杆以市价买入时，指计价货币的数量。\\n-  // 当币币杠杆以市价卖出时，指交易货币的数量。\\n-  // 对于币币市价单，单位由 tgtCcy 决定\\n-  // 当交割、永续、期权买入和卖出时，指合约张数。\\n-  const mapOrderVolumeToSz = async (order: IOrder) => {\\n-    if (instType === 'SWAP') {\\n-      return order.volume;\\n-    }\\n-    if (instType === 'MARGIN') {\\n-      if (order.order_type === 'LIMIT') {\\n-        return order.volume;\\n-      }\\n-      if (order.order_type === 'MAKER') {\\n-        return order.volume;\\n-      }\\n-      if (order.order_type === 'MARKET') {\\n-        if (order.order_direction === 'OPEN_SHORT' || order.order_direction === 'CLOSE_LONG') {\\n-          return order.volume;\\n-        }\\n-        //\\n-        const price = await firstValueFrom(\\n-          spotMarketTickers$.pipe(\\n-            map((x) =>\\n-              mapOrderDirectionToPosSide(order.order_direction) === 'long'\\n-                ? +x[instId].askPx\\n-                : +x[instId].bidPx,\\n-            ),\\n-          ),\\n-        );\\n-        if (!price) {\\n-          throw new Error(`invalid tick: ${price}`);\\n-        }\\n-        console.info(formatTime(Date.now()), 'SubmitOrder', 'price', price);\\n-        const theProduct = await firstValueFrom(\\n-          productService.mapProductIdToProduct$.pipe(map((x) => x.get(order.product_id))),\\n-        );\\n-        if (!theProduct) {\\n-          throw new Error(`Unknown product: ${order.position_id}`);\\n-        }\\n-        return roundToStep(order.volume * price, theProduct.volume_step!);\\n-      }\\n-\\n-      return 0;\\n-    }\\n-\\n-    if (instType === 'SPOT') {\\n-      return order.volume;\\n-    }\\n-\\n-    throw new Error(`Unknown instType: ${instType}`);\\n-  };\\n-\\n-  const params = {\\n-    instId,\\n-    tdMode: instType === 'SPOT' ? 'cash' : 'cross',\\n-    side: mapOrderDirectionToSide(order.order_direction),\\n-    posSide:\\n-      instType === 'MARGIN' || instType === 'SPOT'\\n-        ? 'net'\\n-        : mapOrderDirectionToPosSide(order.order_direction),\\n-    ordType: mapOrderTypeToOrdType(order.order_type),\\n-    sz: (await mapOrderVolumeToSz(order)).toString(),\\n-    tgtCcy: instType === 'SPOT' && order.order_type === 'MARKET' ? 'base_ccy' : undefined,\\n-    reduceOnly:\\n-      instType === 'MARGIN' && ['CLOSE_LONG', 'CLOSE_SHORT'].includes(order.order_direction ?? '')\\n-        ? 'true'\\n-        : undefined,\\n-    px: order.order_type === 'LIMIT' || order.order_type === 'MAKER' ? order.price!.toString() : undefined,\\n-    ccy: instType === 'MARGIN' ? 'USDT' : undefined,\\n-    tag: process.env.BROKER_TAG,\\n-  };\\n-  console.info(formatTime(Date.now()), 'SubmitOrder', 'params', JSON.stringify(params));\\n-  const res = await postTradeOrder(credential, params);\\n-  if (res.code === '0' && res.data?.[0]?.ordId) {\\n-    return { order_id: res.data[0].ordId };\\n-  }\\n-  throw `Failed to submit order: ${res.code} ${res.msg}: ${res.data\\n-    .map((x) => `${x.sCode} ${x.sMsg}`)\\n-    .join('; ')}`;\\n-};\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 1,\n  \"deletions\": 1,\n  \"path\": \"apps/vendor-okx/src/orders/cancelOrder.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 222,
              "lineEnd": 229
            },
            {
              "type": "function",
              "name": "cancelOrder",
              "code": "  \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/orders/cancelOrder.ts b/apps/vendor-okx/src/orders/cancelOrder.ts\\nindex db8741b6f..9a6c6d976 100644\\n--- a/apps/vendor-okx/src/orders/cancelOrder.ts\\n+++ b/apps/vendor-okx/src/orders/cancelOrder.ts\\n@@ -6 +6 @@ export const cancelOrder = async (credential: ICredential, order: IOrder) => {\\n-  const [, instId] = decodePath(order.product_id);\\n+  const [instId] = decodePath(order.product_id).slice(-1);\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 1,\n  \"deletions\": 1,\n  \"path\": \"apps/vendor-okx/src/orders/modifyOrder.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 230,
              "lineEnd": 237
            },
            {
              "type": "function",
              "name": "modifyOrder",
              "code": "  \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/orders/modifyOrder.ts b/apps/vendor-okx/src/orders/modifyOrder.ts\\nindex ab30a4b20..9101b5049 100644\\n--- a/apps/vendor-okx/src/orders/modifyOrder.ts\\n+++ b/apps/vendor-okx/src/orders/modifyOrder.ts\\n@@ -9 +9 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n-  const [instType, instId] = decodePath(order.product_id);\\n+  const [instType, instId] = decodePath(order.product_id).slice(-2);\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 2,\n  \"deletions\": 2,\n  \"path\": \"apps/vendor-okx/src/orders/submitOrder.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 238,
              "lineEnd": 245
            },
            {
              "type": "function",
              "name": "submitOrder",
              "code": "  \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/orders/submitOrder.ts b/apps/vendor-okx/src/orders/submitOrder.ts\\nindex 5a161696c..564c8a659 100644\\n--- a/apps/vendor-okx/src/orders/submitOrder.ts\\n+++ b/apps/vendor-okx/src/orders/submitOrder.ts\\n@@ -45 +45 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n-  const [instType, instId] = decodePath(order.product_id);\\n+  const [instType, instId] = decodePath(order.product_id).slice(-2);\\n@@ -118 +118 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n-    tag: process.env.BROKER_TAG,\\n+    tag: process.env.BROKER_CODE,\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 1,\n  \"deletions\": 1,\n  \"path\": \"apps/vendor-okx/src/services.ts\",\n  \"changeType\": \"modified\",\n  \"patch\": \"commit ac108ab9dc96fd2602b3bae02f6aa6263d4f45e8\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 14:28:04 2025 +0800\\n\\n    refactor: move order-related functions to a dedicated orders directory and update imports (#2204)\\n\\ndiff --git a/apps/vendor-okx/src/services.ts b/apps/vendor-okx/src/services.ts\\nindex 9c8c077ad..aeaf5f9d0 100644\\n--- a/apps/vendor-okx/src/services.ts\\n+++ b/apps/vendor-okx/src/services.ts\\n@@ -24 +24 @@ defer(async () => {\\n-        msg.req.tag = process.env.BROKER_TAG;\\n+        msg.req.tag = process.env.BROKER_CODE;\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-06-24.json\",",
              "lineStart": 246,
              "lineEnd": 339
            },
            {
              "type": "function",
              "name": "getRequestIntervalMs",
              "code": "\"patch\": \"commit ec771df32a8c5881d8e3313c6cf879739af57964\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 17:28:14 2025 +0800\\n\\n    chore: temporarily remove open interest caching and related logic (#2206)\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/quote.ts b/apps/vendor-aster/src/services/markets/quote.ts\\nindex ead158a55..9ea420c98 100644\\n--- a/apps/vendor-aster/src/services/markets/quote.ts\\n+++ b/apps/vendor-aster/src/services/markets/quote.ts\\n@@ -64,12 +64,12 @@ const getRequestIntervalMs = (rateLimits: IAsterRateLimit[] | undefined, fallbac\\n-const openInterestCache = createCache<string>(\\n-  async (symbol: string) => {\\n-    try {\\n-      const data = await getFApiV1OpenInterest({ symbol });\\n-      return data.openInterest;\\n-    } catch (error) {\\n-      console.warn('getFApiV1OpenInterest failed', symbol, error);\\n-      return undefined;\\n-    }\\n-  },\\n-  { expire: OPEN_INTEREST_TTL },\\n-);\\n+// const openInterestCache = createCache<string>(\\n+//   async (symbol: string) => {\\n+//     try {\\n+//       const data = await getFApiV1OpenInterest({ symbol });\\n+//       return data.openInterest;\\n+//     } catch (error) {\\n+//       console.warn('getFApiV1OpenInterest failed', symbol, error);\\n+//       return undefined;\\n+//     }\\n+//   },\\n+//   { expire: OPEN_INTEREST_TTL },\\n+// );\\n@@ -77,10 +77,10 @@ const openInterestCache = createCache<string>(\\n-const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n-  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n-  catchError((err) => {\\n-    console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n-    return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n-  }),\\n-  startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n-  retry({ delay: 60_000 }),\\n-  shareReplay({ bufferSize: 1, refCount: true }),\\n-);\\n+// const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n+//   map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n+//   catchError((err) => {\\n+//     console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n+//     return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n+//   }),\\n+//   startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n+//   retry({ delay: 60_000 }),\\n+//   shareReplay({ bufferSize: 1, refCount: true }),\\n+// );\\n@@ -109,19 +109,19 @@ const quoteFromTicker$ = ticker$.pipe(\\n-const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\\n-  mergeMap(([tickers, requestInterval]) =>\\n-    from(tickers).pipe(\\n-      concatMap((ticker, index) =>\\n-        (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n-          mergeMap(() => from(openInterestCache.query(ticker.symbol))),\\n-          map(\\n-            (openInterest): Partial<IQuote> => ({\\n-              datasource_id: 'ASTER',\\n-              product_id: encodePath('ASTER', 'PERP', ticker.symbol),\\n-              open_interest: `${openInterest ?? 0}`,\\n-              updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n-            }),\\n-          ),\\n-        ),\\n-      ),\\n-    ),\\n-  ),\\n-);\\n+// const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\\n+//   mergeMap(([tickers, requestInterval]) =>\\n+//     from(tickers).pipe(\\n+//       concatMap((ticker, index) =>\\n+//         (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n+//           mergeMap(() => from(openInterestCache.query(ticker.symbol))),\\n+//           map(\\n+//             (openInterest): Partial<IQuote> => ({\\n+//               datasource_id: 'ASTER',\\n+//               product_id: encodePath('ASTER', 'PERP', ticker.symbol),\\n+//               open_interest: `${openInterest ?? 0}`,\\n+//               updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n+//             }),\\n+//           ),\\n+//         ),\\n+//       ),\\n+//     ),\\n+//   ),\\n+// );\\n@@ -129 +129,4 @@ const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\\n-const quote$ = merge(quoteFromTicker$, quoteFromOpenInterest$).pipe(\\n+const quote$ = merge(\\n+  quoteFromTicker$,\\n+  // quoteFromOpenInterest$\\n+).pipe(\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"openInterestCache\",",
              "lineStart": 340,
              "lineEnd": 344
            },
            {
              "type": "function",
              "name": "openInterestCache",
              "code": "  \"code\": \"// const openInterestCache = createCache<string>(\\n//   async (symbol: string) => {\\n//     try {\",\n  \"lineStart\": 64,\n  \"lineEnd\": 66\n},\n{\n  \"type\": \"function\",\n  \"name\": \"data\",",
              "lineStart": 345,
              "lineEnd": 351
            },
            {
              "type": "function",
              "name": "data",
              "code": "  \"code\": \"//       const data = await getFApiV1OpenInterest({ symbol });\\n//       return data.openInterest;\\n//     } catch (error) {\\n//       console.warn('getFApiV1OpenInterest failed', symbol, error);\\n//       return undefined;\\n//     }\\n//   },\\n//   { expire: OPEN_INTEREST_TTL },\\n// );\",\n  \"lineStart\": 67,\n  \"lineEnd\": 76\n},\n{\n  \"type\": \"function\",\n  \"name\": \"requestInterval\",",
              "lineStart": 352,
              "lineEnd": 358
            },
            {
              "type": "function",
              "name": "requestInterval",
              "code": "  \"code\": \"// const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n//   map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n//   catchError((err) => {\\n//     console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n//     return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n//   }),\\n//   startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n//   retry({ delay: 60_000 }),\\n//   shareReplay({ bufferSize: 1, refCount: true }),\\n// );\",\n  \"lineStart\": 77,\n  \"lineEnd\": 108\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quoteFromOpenInterest\",",
              "lineStart": 359,
              "lineEnd": 365
            },
            {
              "type": "function",
              "name": "quoteFromOpenInterest",
              "code": "  \"code\": \"// const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\\n//   mergeMap(([tickers, requestInterval]) =>\\n//     from(tickers).pipe(\\n//       concatMap((ticker, index) =>\\n//         (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n//           mergeMap(() => from(openInterestCache.query(ticker.symbol))),\\n//           map(\\n//             (openInterest): Partial<IQuote> => ({\\n//               datasource_id: 'ASTER',\\n//               product_id: encodePath('ASTER', 'PERP', ticker.symbol),\\n//               open_interest: `${openInterest ?? 0}`,\\n//               updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n//             }),\\n//           ),\\n//         ),\",\n  \"lineStart\": 109,\n  \"lineEnd\": 128\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quote\",",
              "lineStart": 366,
              "lineEnd": 372
            },
            {
              "type": "function",
              "name": "quote",
              "code": "        \"code\": \"const quote$ = merge(\\n  quoteFromTicker$,\\n  // quoteFromOpenInterest$\\n).pipe(\",\n        \"lineStart\": 129,\n        \"lineEnd\": 133\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-aster/2025-12-05-09-26.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit ec771df32a8c5881d8e3313c6cf879739af57964\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 17:28:14 2025 +0800\\n\\n    chore: temporarily remove open interest caching and related logic (#2206)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-05-09-26.json b/common/changes/@yuants/vendor-aster/2025-12-05-09-26.json\\nnew file mode 100644\\nindex 000000000..fdae00998\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-05-09-26.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"temp remove code sick\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 373,
              "lineEnd": 461
            },
            {
              "type": "function",
              "name": "quoteOfSwapFromRest",
              "code": "\"patch\": \"commit af56c8e8a565fb8340b703f1c86545d15848b57c\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:24:08 2025 +0800\\n\\n    feat: add interest rate (#2208)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/quote.ts b/apps/vendor-okx/src/public-data/quote.ts\\nindex 4ab43a1d6..6ed5cb051 100644\\n--- a/apps/vendor-okx/src/public-data/quote.ts\\n+++ b/apps/vendor-okx/src/public-data/quote.ts\\n@@ -30 +30 @@ import { getInstruments, getMarketTickers, getOpenInterest, getPositionTiers } f\\n-import { useOpenInterest, useTicker } from '../ws';\\n+import { useFundingRate, useOpenInterest, useTicker } from '../ws';\\n@@ -92 +92 @@ const quoteOfSwapFromRest$ = defer(() => getMarketTickers({ instType: 'SWAP' }))\\n-      product_id: encodePath(x.instType, x.instId),\\n+      product_id: encodePath('OKX', x.instType, x.instId),\\n@@ -109 +109 @@ const quoteOfSpotAndMarginFromRest$ = defer(() => getMarketTickers({ instType: '\\n-      product_id: encodePath('SPOT', x.instId),\\n+      product_id: encodePath('OKX', 'SPOT', x.instId),\\n@@ -118 +118 @@ const quoteOfSpotAndMarginFromRest$ = defer(() => getMarketTickers({ instType: '\\n-      product_id: encodePath('MARGIN', x.instId),\\n+      product_id: encodePath('OKX', 'MARGIN', x.instId),\\n@@ -139 +139 @@ const quoteOfSwapFromWs$ = swapInstruments$.pipe(\\n-      product_id: encodePath('SWAP', ticker[0].instId),\\n+      product_id: encodePath('OKX', 'SWAP', ticker[0].instId),\\n@@ -153 +153 @@ const quoteOfSpotAndMarginFromWs$ = spotTicker$.pipe(\\n-      product_id: encodePath('SPOT', ticker[0].instId),\\n+      product_id: encodePath('OKX', 'SPOT', ticker[0].instId),\\n@@ -162 +162 @@ const quoteOfSpotAndMarginFromWs$ = spotTicker$.pipe(\\n-      product_id: encodePath('MARGIN', ticker[0].instId),\\n+      product_id: encodePath('OKX', 'MARGIN', ticker[0].instId),\\n@@ -178 +178 @@ const swapOpenInterests$ = defer(() => getOpenInterest({ instType: 'SWAP' })).pi\\n-const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n+const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n@@ -187 +187 @@ const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n-      product_id: encodePath('SWAP', x[0].instId),\\n+      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n@@ -193,0 +194,18 @@ const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n+const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n+  listWatch(\\n+    (x) => x.instId,\\n+    (x) => useFundingRate(x.instId),\\n+    () => true,\\n+  ),\\n+  map(\\n+    (x): Partial<IQuote> => ({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n+      interest_rate_long: `-${x[0].fundingRate}`,\\n+      interest_rate_short: x[0].fundingRate,\\n+      interest_rate_next_settled_at: x[0].fundingTime,\\n+    }),\\n+  ),\\n+  share(),\\n+);\\n+\\n@@ -285 +303 @@ const marginOpenInterest$ = spotInstIds$.pipe(\\n-      product_id: encodePath('MARGIN', instId),\\n+      product_id: encodePath('OKX', 'MARGIN', instId),\\n@@ -299 +317 @@ const quoteSources$ = [\\n-  interestRateOfSwapFromWS$,\\n+  openInterestOfSwapFromWS$,\\n@@ -303,0 +322 @@ const quoteSources$ = [\\n+  interestRateOfSwapFromWS$,\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"openInterestOfSwapFromWS\",",
              "lineStart": 462,
              "lineEnd": 466
            },
            {
              "type": "function",
              "name": "openInterestOfSwapFromWS",
              "code": "  \"code\": \"const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n      product_id: encodePath('OKX', 'SWAP', x[0].instId),\",\n  \"lineStart\": 178,\n  \"lineEnd\": 193\n},\n{\n  \"type\": \"function\",\n  \"name\": \"interestRateOfSwapFromWS\",",
              "lineStart": 467,
              "lineEnd": 473
            },
            {
              "type": "function",
              "name": "interestRateOfSwapFromWS",
              "code": "      \"code\": \"const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n  listWatch(\\n    (x) => x.instId,\\n    (x) => useFundingRate(x.instId),\\n    () => true,\\n  ),\\n  map(\\n    (x): Partial<IQuote> => ({\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n      interest_rate_long: `-${x[0].fundingRate}`,\\n      interest_rate_short: x[0].fundingRate,\\n      interest_rate_next_settled_at: x[0].fundingTime,\\n    }),\\n  ),\",\n      \"lineStart\": 194,\n      \"lineEnd\": 323\n    }\n  ]\n},\n{\n  \"additions\": 22,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-okx/src/ws.ts\",\n  \"changeType\": \"added\",",
              "lineStart": 474,
              "lineEnd": 484
            },
            {
              "type": "function",
              "name": "useMarketBooks",
              "code": "\"patch\": \"commit af56c8e8a565fb8340b703f1c86545d15848b57c\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:24:08 2025 +0800\\n\\n    feat: add interest rate (#2208)\\n\\ndiff --git a/apps/vendor-okx/src/ws.ts b/apps/vendor-okx/src/ws.ts\\nindex 67e46658d..c3e29df77 100644\\n--- a/apps/vendor-okx/src/ws.ts\\n+++ b/apps/vendor-okx/src/ws.ts\\n@@ -331,0 +332,22 @@ export const useMarketBooks = (\\n+\\n+export const useFundingRate = (instId: string) =>\\n+  fromWsChannelAndInstId<\\n+    {\\n+      fundingRate: string;\\n+      fundingTime: string;\\n+      instId: string;\\n+      instType: string;\\n+      method: string;\\n+      maxFundingRate: string;\\n+      minFundingRate: string;\\n+      nextFundingRate: string;\\n+      nextFundingTime: string;\\n+      premium: string;\\n+      settFundingRate: string;\\n+      settState: string;\\n+      ts: string;\\n+    }[]\\n+  >('ws/v5/public', 'funding-rate', instId).pipe(\\n+    //\\n+    filter((data) => data.length > 0),\\n+  );\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"useFundingRate\",",
              "lineStart": 485,
              "lineEnd": 489
            },
            {
              "type": "function",
              "name": "useFundingRate",
              "code": "        \"code\": \"export const useFundingRate = (instId: string) =>\\n  fromWsChannelAndInstId<\\n    {\\n      fundingRate: string;\\n      fundingTime: string;\\n      instId: string;\\n      instType: string;\\n      method: string;\\n      maxFundingRate: string;\\n      minFundingRate: string;\\n      nextFundingRate: string;\\n      nextFundingTime: string;\\n      premium: string;\\n      settFundingRate: string;\\n      settState: string;\",\n        \"lineStart\": 333,\n        \"lineEnd\": 354\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit af56c8e8a565fb8340b703f1c86545d15848b57c\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:24:08 2025 +0800\\n\\n    feat: add interest rate (#2208)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-14-21.json b/common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\\nnew file mode 100644\\nindex 000000000..983bf70cd\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-14-21.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"add interest rate for okx\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 490,
              "lineEnd": 531
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "\"patch\": \"commit 4ecf8af008db1b477bf99100d1c34d81c1cc4830\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:33:29 2025 +0800\\n\\n    feat: add new quote (#2209)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/new-quote.ts b/apps/vendor-okx/src/public-data/new-quote.ts\\nnew file mode 100644\\nindex 000000000..6ed5cb051\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/public-data/new-quote.ts\\n@@ -0,0 +1,373 @@\\n+import { IQuote } from '@yuants/data-quote';\\n+import { Terminal } from '@yuants/protocol';\\n+import { writeToSQL } from '@yuants/sql';\\n+import { decodePath, encodePath, formatTime, listWatch } from '@yuants/utils';\\n+import {\\n+  catchError,\\n+  concatMap,\\n+  defer,\\n+  distinctUntilChanged,\\n+  EMPTY,\\n+  filter,\\n+  first,\\n+  firstValueFrom,\\n+  from,\\n+  groupBy,\\n+  map,\\n+  merge,\\n+  mergeMap,\\n+  reduce,\\n+  repeat,\\n+  retry,\\n+  scan,\\n+  share,\\n+  shareReplay,\\n+  switchMap,\\n+  tap,\\n+  toArray,\\n+} from 'rxjs';\\n+import { getInstruments, getMarketTickers, getOpenInterest, getPositionTiers } from '../api/public-api';\\n+import { useFundingRate, useOpenInterest, useTicker } from '../ws';\\n+\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n+const swapInstruments$ = defer(() => getInstruments({ instType: 'SWAP' })).pipe(\\n+  repeat({ delay: 3600_000 }),\\n+  retry({ delay: 10_000 }),\\n+  map((x) => x.data),\\n+  shareReplay(1),\\n+);\\n+const spotInstruments$ = defer(() => getInstruments({ instType: 'SPOT' })).pipe(\\n+  repeat({ delay: 3600_000 }),\\n+  retry({ delay: 10_000 }),\\n+  map((x) => x.data),\\n+  shareReplay(1),\\n+);\\n+\\n+const shallowEqual = (a: string[], b: string[]) => a.length === b.length && a.every((v, i) => v === b[i]);\\n+\\n+const spotInstIds$ = spotInstruments$.pipe(\\n+  map((items) => items.map((item) => item.instId)),\\n+  distinctUntilChanged(shallowEqual),\\n+  shareReplay(1),\\n+);\\n+\\n+const spotTickers$ = defer(() => getMarketTickers({ instType: 'SPOT' })).pipe(\\n+  repeat({ delay: 5000 }),\\n+  retry({ delay: 5000 }),\\n+  shareReplay(1),\\n+);\\n+\\n+// depend by SubmitOrders\\n+export const spotMarketTickers$ = defer(() => spotTickers$).pipe(\\n+  mergeMap((x) =>\\n+    from(x.data).pipe(\\n+      map((x) => [x.instId, x] as const),\\n+      toArray(),\\n+      map((x) => Object.fromEntries(x)),\\n+    ),\\n+  ),\\n+  repeat({ delay: 5000 }),\\n+  retry({ delay: 5000 }),\\n+  shareReplay(1),\\n+);\\n+\\n+const spotTicker$ = spotInstruments$.pipe(\\n+  tap((x) => {\\n+    console.info('SPOT INSTRUMENTS', x.length);\\n+  }),\\n+  listWatch(\\n+    (x) => x.instId,\\n+    (x) => useTicker(x.instId),\\n+    () => true,\\n+  ),\\n+  share(),\\n+);\\n+\\n+const quoteOfSwapFromRest$ = defer(() => getMarketTickers({ instType: 'SWAP' })).pipe(\\n+  mergeMap((x) => x.data || []),\\n+  map(\\n+    (x): Partial<IQuote> => ({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', x.instType, x.instId),\\n+      last_price: x.last,\\n+      ask_price: x.askPx,\\n+      bid_price: x.bidPx,\\n+      ask_volume: x.askSz,\\n+      bid_volume: x.bidSz,\\n+    }),\\n+  ),\\n+  repeat({ delay: 1000 }),\\n+  retry({ delay: 1000 }),\\n+);\\n+\\n+const quoteOfSpotAndMarginFromRest$ = defer(() => getMarketTickers({ instType: 'SPOT' })).pipe(\\n+  mergeMap((x) => x.data || []),\\n+  mergeMap((x): Partial<IQuote>[] => [\\n+    {\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SPOT', x.instId),\\n+      last_price: x.last,\\n+      ask_price: x.askPx,\\n+      bid_price: x.bidPx,\\n+      ask_volume: x.askSz,\\n+      bid_volume: x.bidSz,\\n+    },\\n+    {\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'MARGIN', x.instId),\\n+      last_price: x.last,\\n+      ask_price: x.askPx,\\n+      bid_price: x.bidPx,\\n+      ask_volume: x.askSz,\\n+      bid_volume: x.bidSz,\\n+    },\\n+  ]),\\n+  repeat({ delay: 1000 }),\\n+  retry({ delay: 1000 }),\\n+);\\n+\\n+const quoteOfSwapFromWs$ = swapInstruments$.pipe(\\n+  listWatch(\\n+    (x) => x.instId,\\n+    (x) => useTicker(x.instId),\\n+    () => true,\\n+  ),\\n+  map(\\n+    (ticker): Partial<IQuote> => ({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SWAP', ticker[0].instId),\\n+      last_price: ticker[0].last,\\n+      ask_price: ticker[0].askPx,\\n+      bid_price: ticker[0].bidPx,\\n+      ask_volume: ticker[0].askSz,\\n+      bid_volume: ticker[0].bidSz,\\n+    }),\\n+  ),\\n+);\\n+\\n+const quoteOfSpotAndMarginFromWs$ = spotTicker$.pipe(\\n+  mergeMap((ticker): Partial<IQuote>[] => [\\n+    {\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SPOT', ticker[0].instId),\\n+      last_price: ticker[0].last,\\n+      ask_price: ticker[0].askPx,\\n+      bid_price: ticker[0].bidPx,\\n+      ask_volume: ticker[0].askSz,\\n+      bid_volume: ticker[0].bidSz,\\n+    },\\n+    {\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'MARGIN', ticker[0].instId),\\n+      last_price: ticker[0].last,\\n+      ask_price: ticker[0].askPx,\\n+      bid_price: ticker[0].bidPx,\\n+      ask_volume: ticker[0].askSz,\\n+      bid_volume: ticker[0].bidSz,\\n+    },\\n+  ]),\\n+);\\n+\\n+const swapOpenInterests$ = defer(() => getOpenInterest({ instType: 'SWAP' })).pipe(\\n+  repeat({ delay: 10_000 }),\\n+  retry({ delay: 10_000 }),\\n+  shareReplay(1),\\n+);\\n+\\n+const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n+  listWatch(\\n+    (x) => x.instId,\\n+    (x) => useOpenInterest(x.instId),\\n+    () => true,\\n+  ),\\n+  map(\\n+    (x): Partial<IQuote> => ({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n+      open_interest: x[0].oi,\\n+    }),\\n+  ),\\n+  share(),\\n+);\\n+\\n+const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n+  listWatch(\\n+    (x) => x.instId,\\n+    (x) => useFundingRate(x.instId),\\n+    () => true,\\n+  ),\\n+  map(\\n+    (x): Partial<IQuote> => ({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n+      interest_rate_long: `-${x[0].fundingRate}`,\\n+      interest_rate_short: x[0].fundingRate,\\n+      interest_rate_next_settled_at: x[0].fundingTime,\\n+    }),\\n+  ),\\n+  share(),\\n+);\\n+\\n+type PositionTiersResponse = Awaited<ReturnType<typeof getPositionTiers>>;\\n+type PositionTiersEntry = PositionTiersResponse['data'];\\n+\\n+const marginPositionTiersMap$ = defer(() =>\\n+  spotInstIds$.pipe(\\n+    first(),\\n+    map((instIds) => instIds.filter((id) => id.endsWith('USDT') || id.endsWith('USDC'))),\\n+    switchMap((instIds) => {\\n+      const total = instIds.length;\\n+      let processed = 0;\\n+      return from(instIds).pipe(\\n+        concatMap((instId) =>\\n+          defer(async () => {\\n+            const tiers = await terminal.client.requestForResponseData<\\n+              { instType: string; tdMode: string; instId: string },\\n+              PositionTiersResponse\\n+            >('OKX/PositionTiers', {\\n+              instType: 'MARGIN',\\n+              tdMode: 'cross',\\n+              instId,\\n+            });\\n+            if (!tiers?.data) {\\n+              throw new Error(`Failed to load position tiers for ${instId}: ${tiers.msg}`);\\n+            }\\n+            return {\\n+              instId,\\n+              tiers,\\n+            };\\n+          }).pipe(retry({ delay: 2000 })),\\n+        ),\\n+        reduce((map, { instId, tiers }) => {\\n+          processed += 1;\\n+          console.info(\\n+            formatTime(Date.now()),\\n+            `Loaded margin position tiers ${processed}/${total} (${instId})`,\\n+          );\\n+          if (tiers?.data) {\\n+            map.set(instId, tiers.data);\\n+          }\\n+          return map;\\n+        }, new Map<string, PositionTiersEntry>()),\\n+      );\\n+    }),\\n+  ),\\n+).pipe(\\n+  //\\n+  retry({ delay: 60_000 }),\\n+  repeat({ delay: 86400_000 }),\\n+  shareReplay(1),\\n+);\\n+\\n+// Margin 的 open interest 只依赖 position-tier：\\n+// 1) 启动时先拉全量 MARGIN 仓位档位并缓存，下次直接命中；\\n+// 2) 档位内只保留同 tier 杠杆最高的记录；\\n+// 3) 当前策略只使用 tier=1 的 quoteMaxLoan 作为持仓上限，不再混合 /account/max-size；\\n+// 4) 每个 instId 60 秒刷新一次，并在接口报错时 10 秒重试。\\n+const marginOpenInterest$ = spotInstIds$.pipe(\\n+  mergeMap((instIds) =>\\n+    from(instIds).pipe(\\n+      mergeMap((instId) =>\\n+        defer(async () => {\\n+          const tiersMap = await firstValueFrom(marginPositionTiersMap$);\\n+          const tiers = tiersMap.get(instId);\\n+          if (!tiers?.length) {\\n+            return null;\\n+          }\\n+\\n+          const tierByLevel = tiers\\n+            .filter((tier) => !tier.instId || tier.instId === instId)\\n+            .reduce((mapTierToTierInfo, tierInfo) => {\\n+              const existing = mapTierToTierInfo.get(tierInfo.tier);\\n+              if (!existing || +tierInfo.maxLever > +existing.maxLever) {\\n+                mapTierToTierInfo.set(tierInfo.tier, tierInfo);\\n+              }\\n+              return mapTierToTierInfo;\\n+            }, new Map<string, (typeof tiers)[number]>());\\n+          // 获取一级杠杆的最大可借贷额度作为持仓量\\n+          const openInterest = +(tierByLevel.get('1')?.quoteMaxLoan || 0);\\n+\\n+          return {\\n+            instId,\\n+            openInterest,\\n+          };\\n+        }).pipe(retry({ delay: 10_000 }), repeat({ delay: 60_000 })),\\n+      ),\\n+    ),\\n+  ),\\n+  filter((result): result is { instId: string; openInterest: number } => result !== null),\\n+  map(({ instId, openInterest }) => {\\n+    const partial: Partial<IQuote> = {\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'MARGIN', instId),\\n+    };\\n+    if (typeof openInterest === 'number' && Number.isFinite(openInterest)) {\\n+      partial.open_interest = `${openInterest}`;\\n+    }\\n+    return partial;\\n+  }),\\n+  share(),\\n+);\\n+\\n+marginOpenInterest$.subscribe();\\n+\\n+const quoteSources$ = [\\n+  quoteOfSwapFromWs$,\\n+  openInterestOfSwapFromWS$,\\n+  quoteOfSwapFromRest$,\\n+  quoteOfSpotAndMarginFromWs$,\\n+  quoteOfSpotAndMarginFromRest$,\\n+  marginOpenInterest$,\\n+  interestRateOfSwapFromWS$,\\n+];\\n+\\n+const quote$ = defer(() =>\\n+  merge(\\n+    ...quoteSources$.map((x$) =>\\n+      defer(() => x$).pipe(\\n+        // 防止单个流关闭导致整体关闭\\n+        catchError(() => EMPTY),\\n+      ),\\n+    ),\\n+  ),\\n+).pipe(\\n+  groupBy((x) => encodePath(x.datasource_id, x.product_id)),\\n+  mergeMap((group$) => {\\n+    return group$.pipe(\\n+      //\\n+      scan((acc, cur) => Object.assign(acc, cur), {} as Partial<IQuote>),\\n+    );\\n+  }),\\n+  share(),\\n+);\\n+\\n+// 合并不同来源的数据并进行合并，避免死锁\\n+if (process.env.WRITE_QUOTE_TO_SQL === 'true') {\\n+  terminal.channel.publishChannel('quote', { pattern: `^OKX/` }, (channel_id) => {\\n+    const [datasource_id, product_id] = decodePath(channel_id);\\n+    if (!datasource_id) {\\n+      throw 'datasource_id is required';\\n+    }\\n+    if (!product_id) {\\n+      throw 'product_id is required';\\n+    }\\n+    return quote$.pipe(filter((x) => x.product_id === product_id));\\n+  });\\n+\\n+  quote$\\n+    .pipe(\\n+      writeToSQL({\\n+        terminal,\\n+        writeInterval: 1000,\\n+        tableName: 'quote',\\n+        conflictKeys: ['datasource_id', 'product_id'],\\n+      }),\\n+    )\\n+    .subscribe();\\n+}\\n+\\n+export const swapOpenInterest$ = defer(() => swapOpenInterests$).pipe(\\n+  map((x) => new Map(x.data.map((x) => [x.instId, +x.oi] as const))),\\n+  shareReplay(1),\\n+);\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"terminal\",",
              "lineStart": 532,
              "lineEnd": 536
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "  \"code\": \"const terminal = Terminal.fromNodeEnv();\\n\",\n  \"lineStart\": 32,\n  \"lineEnd\": 33\n},\n{\n  \"type\": \"function\",\n  \"name\": \"swapInstruments\",",
              "lineStart": 537,
              "lineEnd": 543
            },
            {
              "type": "function",
              "name": "swapInstruments",
              "code": "  \"code\": \"const swapInstruments$ = defer(() => getInstruments({ instType: 'SWAP' })).pipe(\\n  repeat({ delay: 3600_000 }),\\n  retry({ delay: 10_000 }),\\n  map((x) => x.data),\\n  shareReplay(1),\\n);\",\n  \"lineStart\": 34,\n  \"lineEnd\": 39\n},\n{\n  \"type\": \"function\",\n  \"name\": \"spotInstruments\",",
              "lineStart": 544,
              "lineEnd": 550
            },
            {
              "type": "function",
              "name": "spotInstruments",
              "code": "  \"code\": \"const spotInstruments$ = defer(() => getInstruments({ instType: 'SPOT' })).pipe(\\n  repeat({ delay: 3600_000 }),\\n  retry({ delay: 10_000 }),\\n  map((x) => x.data),\\n  shareReplay(1),\\n);\\n\",\n  \"lineStart\": 40,\n  \"lineEnd\": 46\n},\n{\n  \"type\": \"function\",\n  \"name\": \"shallowEqual\",",
              "lineStart": 551,
              "lineEnd": 557
            },
            {
              "type": "function",
              "name": "shallowEqual",
              "code": "  \"code\": \"const shallowEqual = (a: string[], b: string[]) => a.length === b.length && a.every((v, i) => v === b[i]);\\n\",\n  \"lineStart\": 47,\n  \"lineEnd\": 48\n},\n{\n  \"type\": \"function\",\n  \"name\": \"spotInstIds\",",
              "lineStart": 558,
              "lineEnd": 564
            },
            {
              "type": "function",
              "name": "spotInstIds",
              "code": "  \"code\": \"const spotInstIds$ = spotInstruments$.pipe(\\n  map((items) => items.map((item) => item.instId)),\\n  distinctUntilChanged(shallowEqual),\\n  shareReplay(1),\\n);\\n\",\n  \"lineStart\": 49,\n  \"lineEnd\": 54\n},\n{\n  \"type\": \"function\",\n  \"name\": \"spotTickers\",",
              "lineStart": 565,
              "lineEnd": 571
            },
            {
              "type": "function",
              "name": "spotTickers",
              "code": "  \"code\": \"const spotTickers$ = defer(() => getMarketTickers({ instType: 'SPOT' })).pipe(\\n  repeat({ delay: 5000 }),\\n  retry({ delay: 5000 }),\\n  shareReplay(1),\\n);\\n\\n// depend by SubmitOrders\",\n  \"lineStart\": 55,\n  \"lineEnd\": 61\n},\n{\n  \"type\": \"function\",\n  \"name\": \"spotMarketTickers\",",
              "lineStart": 572,
              "lineEnd": 578
            },
            {
              "type": "function",
              "name": "spotMarketTickers",
              "code": "  \"code\": \"export const spotMarketTickers$ = defer(() => spotTickers$).pipe(\\n  mergeMap((x) =>\\n    from(x.data).pipe(\\n      map((x) => [x.instId, x] as const),\\n      toArray(),\\n      map((x) => Object.fromEntries(x)),\\n    ),\\n  ),\\n  repeat({ delay: 5000 }),\\n  retry({ delay: 5000 }),\\n  shareReplay(1),\\n);\\n\",\n  \"lineStart\": 62,\n  \"lineEnd\": 74\n},\n{\n  \"type\": \"function\",\n  \"name\": \"spotTicker\",",
              "lineStart": 579,
              "lineEnd": 585
            },
            {
              "type": "function",
              "name": "spotTicker",
              "code": "  \"code\": \"const spotTicker$ = spotInstruments$.pipe(\\n  tap((x) => {\\n    console.info('SPOT INSTRUMENTS', x.length);\\n  }),\\n  listWatch(\\n    (x) => x.instId,\\n    (x) => useTicker(x.instId),\\n    () => true,\\n  ),\\n  share(),\\n);\\n\",\n  \"lineStart\": 75,\n  \"lineEnd\": 86\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quoteOfSwapFromRest\",",
              "lineStart": 586,
              "lineEnd": 592
            },
            {
              "type": "function",
              "name": "quoteOfSwapFromRest",
              "code": "  \"code\": \"const quoteOfSwapFromRest$ = defer(() => getMarketTickers({ instType: 'SWAP' })).pipe(\\n  mergeMap((x) => x.data || []),\\n  map(\\n    (x): Partial<IQuote> => ({\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', x.instType, x.instId),\\n      last_price: x.last,\\n      ask_price: x.askPx,\\n      bid_price: x.bidPx,\\n      ask_volume: x.askSz,\\n      bid_volume: x.bidSz,\\n    }),\\n  ),\\n  repeat({ delay: 1000 }),\\n  retry({ delay: 1000 }),\",\n  \"lineStart\": 87,\n  \"lineEnd\": 103\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quoteOfSpotAndMarginFromRest\",",
              "lineStart": 593,
              "lineEnd": 599
            },
            {
              "type": "function",
              "name": "quoteOfSpotAndMarginFromRest",
              "code": "  \"code\": \"const quoteOfSpotAndMarginFromRest$ = defer(() => getMarketTickers({ instType: 'SPOT' })).pipe(\\n  mergeMap((x) => x.data || []),\\n  mergeMap((x): Partial<IQuote>[] => [\\n    {\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SPOT', x.instId),\\n      last_price: x.last,\\n      ask_price: x.askPx,\\n      bid_price: x.bidPx,\\n      ask_volume: x.askSz,\\n      bid_volume: x.bidSz,\\n    },\\n    {\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'MARGIN', x.instId),\",\n  \"lineStart\": 104,\n  \"lineEnd\": 129\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quoteOfSwapFromWs\",",
              "lineStart": 600,
              "lineEnd": 606
            },
            {
              "type": "function",
              "name": "quoteOfSwapFromWs",
              "code": "  \"code\": \"const quoteOfSwapFromWs$ = swapInstruments$.pipe(\\n  listWatch(\\n    (x) => x.instId,\\n    (x) => useTicker(x.instId),\\n    () => true,\\n  ),\\n  map(\\n    (ticker): Partial<IQuote> => ({\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SWAP', ticker[0].instId),\\n      last_price: ticker[0].last,\\n      ask_price: ticker[0].askPx,\\n      bid_price: ticker[0].bidPx,\\n      ask_volume: ticker[0].askSz,\\n      bid_volume: ticker[0].bidSz,\",\n  \"lineStart\": 130,\n  \"lineEnd\": 148\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quoteOfSpotAndMarginFromWs\",",
              "lineStart": 607,
              "lineEnd": 613
            },
            {
              "type": "function",
              "name": "quoteOfSpotAndMarginFromWs",
              "code": "  \"code\": \"const quoteOfSpotAndMarginFromWs$ = spotTicker$.pipe(\\n  mergeMap((ticker): Partial<IQuote>[] => [\\n    {\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SPOT', ticker[0].instId),\\n      last_price: ticker[0].last,\\n      ask_price: ticker[0].askPx,\\n      bid_price: ticker[0].bidPx,\\n      ask_volume: ticker[0].askSz,\\n      bid_volume: ticker[0].bidSz,\\n    },\\n    {\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'MARGIN', ticker[0].instId),\\n      last_price: ticker[0].last,\",\n  \"lineStart\": 149,\n  \"lineEnd\": 171\n},\n{\n  \"type\": \"function\",\n  \"name\": \"swapOpenInterests\",",
              "lineStart": 614,
              "lineEnd": 620
            },
            {
              "type": "function",
              "name": "swapOpenInterests",
              "code": "  \"code\": \"const swapOpenInterests$ = defer(() => getOpenInterest({ instType: 'SWAP' })).pipe(\\n  repeat({ delay: 10_000 }),\\n  retry({ delay: 10_000 }),\\n  shareReplay(1),\\n);\\n\",\n  \"lineStart\": 172,\n  \"lineEnd\": 177\n},\n{\n  \"type\": \"function\",\n  \"name\": \"openInterestOfSwapFromWS\",",
              "lineStart": 621,
              "lineEnd": 627
            },
            {
              "type": "function",
              "name": "openInterestOfSwapFromWS",
              "code": "  \"code\": \"const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n  listWatch(\\n    (x) => x.instId,\\n    (x) => useOpenInterest(x.instId),\\n    () => true,\\n  ),\\n  map(\\n    (x): Partial<IQuote> => ({\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n      open_interest: x[0].oi,\\n    }),\\n  ),\\n  share(),\\n);\",\n  \"lineStart\": 178,\n  \"lineEnd\": 193\n},\n{\n  \"type\": \"function\",\n  \"name\": \"interestRateOfSwapFromWS\",",
              "lineStart": 628,
              "lineEnd": 634
            },
            {
              "type": "function",
              "name": "interestRateOfSwapFromWS",
              "code": "  \"code\": \"const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n  listWatch(\\n    (x) => x.instId,\\n    (x) => useFundingRate(x.instId),\\n    () => true,\\n  ),\\n  map(\\n    (x): Partial<IQuote> => ({\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n      interest_rate_long: `-${x[0].fundingRate}`,\\n      interest_rate_short: x[0].fundingRate,\\n      interest_rate_next_settled_at: x[0].fundingTime,\\n    }),\\n  ),\",\n  \"lineStart\": 194,\n  \"lineEnd\": 214\n},\n{\n  \"type\": \"function\",\n  \"name\": \"marginPositionTiersMap\",",
              "lineStart": 635,
              "lineEnd": 641
            },
            {
              "type": "function",
              "name": "marginPositionTiersMap",
              "code": "  \"code\": \"const marginPositionTiersMap$ = defer(() =>\\n  spotInstIds$.pipe(\\n    first(),\\n    map((instIds) => instIds.filter((id) => id.endsWith('USDT') || id.endsWith('USDC'))),\\n    switchMap((instIds) => {\",\n  \"lineStart\": 215,\n  \"lineEnd\": 219\n},\n{\n  \"type\": \"function\",\n  \"name\": \"total\",",
              "lineStart": 642,
              "lineEnd": 648
            },
            {
              "type": "function",
              "name": "total",
              "code": "  \"code\": \"const total = instIds.length;\",\n  \"lineStart\": 220,\n  \"lineEnd\": 220\n},\n{\n  \"type\": \"function\",\n  \"name\": \"processed\",",
              "lineStart": 649,
              "lineEnd": 655
            },
            {
              "type": "function",
              "name": "processed",
              "code": "  \"code\": \"let processed = 0;\\nreturn from(instIds).pipe(\\n  concatMap((instId) =>\\n    defer(async () => {\",\n  \"lineStart\": 221,\n  \"lineEnd\": 224\n},\n{\n  \"type\": \"function\",\n  \"name\": \"tiers\",",
              "lineStart": 656,
              "lineEnd": 662
            },
            {
              "type": "function",
              "name": "tiers",
              "code": "  \"code\": \"const tiers = await terminal.client.requestForResponseData<\\n  { instType: string; tdMode: string; instId: string },\\n  PositionTiersResponse\\n>('OKX/PositionTiers', {\\n  instType: 'MARGIN',\\n  tdMode: 'cross',\\n  instId,\\n});\\nif (!tiers?.data) {\\n  throw new Error(`Failed to load position tiers for ${instId}: ${tiers.msg}`);\\n}\\nreturn {\\n  instId,\\n  tiers,\\n};\",\n  \"lineStart\": 225,\n  \"lineEnd\": 267\n},\n{\n  \"type\": \"function\",\n  \"name\": \"marginOpenInterest\",",
              "lineStart": 663,
              "lineEnd": 669
            },
            {
              "type": "function",
              "name": "marginOpenInterest",
              "code": "  \"code\": \"const marginOpenInterest$ = spotInstIds$.pipe(\\n  mergeMap((instIds) =>\\n    from(instIds).pipe(\\n      mergeMap((instId) =>\\n        defer(async () => {\",\n  \"lineStart\": 268,\n  \"lineEnd\": 272\n},\n{\n  \"type\": \"function\",\n  \"name\": \"tiersMap\",",
              "lineStart": 670,
              "lineEnd": 676
            },
            {
              "type": "function",
              "name": "tiersMap",
              "code": "  \"code\": \"const tiersMap = await firstValueFrom(marginPositionTiersMap$);\",\n  \"lineStart\": 273,\n  \"lineEnd\": 273\n},\n{\n  \"type\": \"function\",\n  \"name\": \"tiers\",",
              "lineStart": 677,
              "lineEnd": 683
            },
            {
              "type": "function",
              "name": "tiers",
              "code": "  \"code\": \"const tiers = tiersMap.get(instId);\\nif (!tiers?.length) {\\n  return null;\\n}\\n\",\n  \"lineStart\": 274,\n  \"lineEnd\": 278\n},\n{\n  \"type\": \"function\",\n  \"name\": \"tierByLevel\",",
              "lineStart": 684,
              "lineEnd": 690
            },
            {
              "type": "function",
              "name": "tierByLevel",
              "code": "  \"code\": \"const tierByLevel = tiers\\n  .filter((tier) => !tier.instId || tier.instId === instId)\\n  .reduce((mapTierToTierInfo, tierInfo) => {\",\n  \"lineStart\": 279,\n  \"lineEnd\": 281\n},\n{\n  \"type\": \"function\",\n  \"name\": \"existing\",",
              "lineStart": 691,
              "lineEnd": 697
            },
            {
              "type": "function",
              "name": "existing",
              "code": "  \"code\": \"    const existing = mapTierToTierInfo.get(tierInfo.tier);\\n    if (!existing || +tierInfo.maxLever > +existing.maxLever) {\\n      mapTierToTierInfo.set(tierInfo.tier, tierInfo);\\n    }\\n    return mapTierToTierInfo;\\n  }, new Map<string, (typeof tiers)[number]>());\\n// 获取一级杠杆的最大可借贷额度作为持仓量\",\n  \"lineStart\": 282,\n  \"lineEnd\": 288\n},\n{\n  \"type\": \"function\",\n  \"name\": \"openInterest\",",
              "lineStart": 698,
              "lineEnd": 704
            },
            {
              "type": "function",
              "name": "openInterest",
              "code": "  \"code\": \"        const openInterest = +(tierByLevel.get('1')?.quoteMaxLoan || 0);\\n\\n        return {\\n          instId,\\n          openInterest,\\n        };\\n      }).pipe(retry({ delay: 10_000 }), repeat({ delay: 60_000 })),\\n    ),\\n  ),\\n),\\nfilter((result): result is { instId: string; openInterest: number } => result !== null),\\nmap(({ instId, openInterest }) => {\",\n  \"lineStart\": 289,\n  \"lineEnd\": 300\n},\n{\n  \"type\": \"function\",\n  \"name\": \"partial\",",
              "lineStart": 705,
              "lineEnd": 711
            },
            {
              "type": "function",
              "name": "partial",
              "code": "  \"code\": \"    const partial: Partial<IQuote> = {\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'MARGIN', instId),\\n    };\\n    if (typeof openInterest === 'number' && Number.isFinite(openInterest)) {\\n      partial.open_interest = `${openInterest}`;\\n    }\\n    return partial;\\n  }),\\n  share(),\\n);\\n\\nmarginOpenInterest$.subscribe();\\n\",\n  \"lineStart\": 301,\n  \"lineEnd\": 314\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quoteSources\",",
              "lineStart": 712,
              "lineEnd": 718
            },
            {
              "type": "function",
              "name": "quoteSources",
              "code": "  \"code\": \"const quoteSources$ = [\\n  quoteOfSwapFromWs$,\\n  openInterestOfSwapFromWS$,\\n  quoteOfSwapFromRest$,\\n  quoteOfSpotAndMarginFromWs$,\\n  quoteOfSpotAndMarginFromRest$,\\n  marginOpenInterest$,\\n  interestRateOfSwapFromWS$,\\n];\\n\",\n  \"lineStart\": 315,\n  \"lineEnd\": 324\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quote\",",
              "lineStart": 719,
              "lineEnd": 725
            },
            {
              "type": "function",
              "name": "quote",
              "code": "  \"code\": \"const quote$ = defer(() =>\\n  merge(\\n    ...quoteSources$.map((x$) =>\\n      defer(() => x$).pipe(\\n        // 防止单个流关闭导致整体关闭\\n        catchError(() => EMPTY),\\n      ),\\n    ),\\n  ),\\n).pipe(\\n  groupBy((x) => encodePath(x.datasource_id, x.product_id)),\\n  mergeMap((group$) => {\\n    return group$.pipe(\\n      //\\n      scan((acc, cur) => Object.assign(acc, cur), {} as Partial<IQuote>),\",\n  \"lineStart\": 325,\n  \"lineEnd\": 369\n},\n{\n  \"type\": \"function\",\n  \"name\": \"swapOpenInterest\",",
              "lineStart": 726,
              "lineEnd": 732
            },
            {
              "type": "function",
              "name": "swapOpenInterest",
              "code": "      \"code\": \"export const swapOpenInterest$ = defer(() => swapOpenInterests$).pipe(\\n  map((x) => new Map(x.data.map((x) => [x.instId, +x.oi] as const))),\\n  shareReplay(1),\\n);\",\n      \"lineStart\": 370,\n      \"lineEnd\": 374\n    }\n  ]\n},\n{\n  \"additions\": 9,\n  \"deletions\": 9,\n  \"path\": \"apps/vendor-okx/src/public-data/quote.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 733,
              "lineEnd": 743
            },
            {
              "type": "function",
              "name": "quoteOfSwapFromRest",
              "code": "      \"patch\": \"commit 4ecf8af008db1b477bf99100d1c34d81c1cc4830\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:33:29 2025 +0800\\n\\n    feat: add new quote (#2209)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/quote.ts b/apps/vendor-okx/src/public-data/quote.ts\\nindex 6ed5cb051..e6a73bb79 100644\\n--- a/apps/vendor-okx/src/public-data/quote.ts\\n+++ b/apps/vendor-okx/src/public-data/quote.ts\\n@@ -92 +92 @@ const quoteOfSwapFromRest$ = defer(() => getMarketTickers({ instType: 'SWAP' }))\\n-      product_id: encodePath('OKX', x.instType, x.instId),\\n+      product_id: encodePath(x.instType, x.instId),\\n@@ -109 +109 @@ const quoteOfSpotAndMarginFromRest$ = defer(() => getMarketTickers({ instType: '\\n-      product_id: encodePath('OKX', 'SPOT', x.instId),\\n+      product_id: encodePath('SPOT', x.instId),\\n@@ -118 +118 @@ const quoteOfSpotAndMarginFromRest$ = defer(() => getMarketTickers({ instType: '\\n-      product_id: encodePath('OKX', 'MARGIN', x.instId),\\n+      product_id: encodePath('MARGIN', x.instId),\\n@@ -139 +139 @@ const quoteOfSwapFromWs$ = swapInstruments$.pipe(\\n-      product_id: encodePath('OKX', 'SWAP', ticker[0].instId),\\n+      product_id: encodePath('SWAP', ticker[0].instId),\\n@@ -153 +153 @@ const quoteOfSpotAndMarginFromWs$ = spotTicker$.pipe(\\n-      product_id: encodePath('OKX', 'SPOT', ticker[0].instId),\\n+      product_id: encodePath('SPOT', ticker[0].instId),\\n@@ -162 +162 @@ const quoteOfSpotAndMarginFromWs$ = spotTicker$.pipe(\\n-      product_id: encodePath('OKX', 'MARGIN', ticker[0].instId),\\n+      product_id: encodePath('MARGIN', ticker[0].instId),\\n@@ -187 +187 @@ const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n-      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n+      product_id: encodePath('SWAP', x[0].instId),\\n@@ -203 +203 @@ const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n-      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n+      product_id: encodePath('SWAP', x[0].instId),\\n@@ -303 +303 @@ const marginOpenInterest$ = spotInstIds$.pipe(\\n-      product_id: encodePath('OKX', 'MARGIN', instId),\\n+      product_id: encodePath('MARGIN', instId),\\n\",\n      \"codeSnippets\": []\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-14-31.json\",\n      \"changeType\": \"added\",\n      \"patch\": \"commit 4ecf8af008db1b477bf99100d1c34d81c1cc4830\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 22:33:29 2025 +0800\\n\\n    feat: add new quote (#2209)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-14-31.json b/common/changes/@yuants/vendor-okx/2025-12-05-14-31.json\\nnew file mode 100644\\nindex 000000000..ecebf1b48\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-14-31.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"add new quote\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n      \"codeSnippets\": []\n    }\n  ]\n},\n{\n  \"hash\": \"b7e2101680d95c25d53a77647295e2e09094c7aa\",",
              "lineStart": 744,
              "lineEnd": 837
            },
            {
              "type": "function",
              "name": "quote",
              "code": "  \"patch\": \"commit 1e77d860ac517c51538e701d845557f9f386c35a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 23:20:55 2025 +0800\\n\\n    feat: add hl interest rate (#2211)\\n    \\n    * feat: add hl interest rate\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/markets/quote.ts b/apps/vendor-hyperliquid/src/services/markets/quote.ts\\nindex 25f888666..f7d97a992 100644\\n--- a/apps/vendor-hyperliquid/src/services/markets/quote.ts\\n+++ b/apps/vendor-hyperliquid/src/services/markets/quote.ts\\n@@ -39,0 +40,2 @@ const quote$ = defer(() => getAllMids()).pipe(\\n+      interest_rate_long: ctx?.funding ? `${-+ctx.funding}` : undefined,\\n+      interest_rate_short: ctx?.funding,\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 1,\n  \"deletions\": 1,\n  \"path\": \"apps/vendor-okx/src/public-data/new-quote.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 838,
              "lineEnd": 845
            },
            {
              "type": "function",
              "name": "interestRateOfSwapFromWS",
              "code": "  \"patch\": \"commit 1e77d860ac517c51538e701d845557f9f386c35a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 23:20:55 2025 +0800\\n\\n    feat: add hl interest rate (#2211)\\n    \\n    * feat: add hl interest rate\\n\\ndiff --git a/apps/vendor-okx/src/public-data/new-quote.ts b/apps/vendor-okx/src/public-data/new-quote.ts\\nindex 6ed5cb051..703eaa20f 100644\\n--- a/apps/vendor-okx/src/public-data/new-quote.ts\\n+++ b/apps/vendor-okx/src/public-data/new-quote.ts\\n@@ -204 +204 @@ const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n-      interest_rate_long: `-${x[0].fundingRate}`,\\n+      interest_rate_long: `${-+x[0].fundingRate}`,\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-05-14-46.json\",\n  \"changeType\": \"added\",\n  \"patch\": \"commit 1e77d860ac517c51538e701d845557f9f386c35a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Fri Dec 5 23:20:55 2025 +0800\\n\\n    feat: add hl interest rate (#2211)\\n    \\n    * feat: add hl interest rate\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-05-14-46.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-05-14-46.json\\nnew file mode 100644\\nindex 000000000..ec6762b4a\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-hyperliquid/2025-12-05-14-46.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n+      \\\"comment\\\": \\\"add hl interest rate\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-15-19.json\",",
              "lineStart": 846,
              "lineEnd": 979
            },
            {
              "type": "function",
              "name": "getFApiV1TickerPrice",
              "code": "\"patch\": \"commit 8aa2e3f9dce77c78c4482ecfa248769a464c5d2a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 01:10:11 2025 +0800\\n\\n    feat: add aster interest rate (#2213)\\n    \\n    * feat: add aster interest rate\\n\\ndiff --git a/apps/vendor-aster/src/api/public-api.ts b/apps/vendor-aster/src/api/public-api.ts\\nindex 516014a16..4cd51f4b6 100644\\n--- a/apps/vendor-aster/src/api/public-api.ts\\n+++ b/apps/vendor-aster/src/api/public-api.ts\\n@@ -112,0 +113,30 @@ export const getFApiV1TickerPrice = createApi<\\n+\\n+/**\\n+ * 获取资金费率\\n+ * https://github.com/asterdex/api-docs/blob/master/aster-finance-futures-api_CN.md\\n+ */\\n+export const getFApiV1PremiumIndex = createApi<\\n+  {\\n+    symbol?: string;\\n+  },\\n+  | {\\n+      symbol: string; // 交易对\\n+      markPrice: string; // 标记价格\\n+      indexPrice: string; // 指数价格\\n+      estimatedSettlePrice: string; // 预估结算价,仅在交割开始前最后一小时有意义\\n+      lastFundingRate: string; // 最近更新的资金费率\\n+      nextFundingTime: number; // 下次资金费时间\\n+      interestRate: string; // 标的资产基础利率\\n+      time: number; // 更新时间\\n+    }\\n+  | {\\n+      symbol: string; // 交易对\\n+      markPrice: string; // 标记价格\\n+      indexPrice: string; // 指数价格\\n+      estimatedSettlePrice: string; // 预估结算价,仅在交割开始前最后一小时有意义\\n+      lastFundingRate: string; // 最近更新的资金费率\\n+      nextFundingTime: number; // 下次资金费时间\\n+      interestRate: string; // 标的资产基础利率\\n+      time: number; // 更新时间\\n+    }[]\\n+>('GET', '/fapi/v1/premiumIndex');\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"getFApiV1PremiumIndex\",",
              "lineStart": 980,
              "lineEnd": 984
            },
            {
              "type": "function",
              "name": "getFApiV1PremiumIndex",
              "code": "      \"code\": \"export const getFApiV1PremiumIndex = createApi<\\n  {\\n    symbol?: string;\\n  },\\n  | {\\n      symbol: string; // 交易对\\n      markPrice: string; // 标记价格\\n      indexPrice: string; // 指数价格\\n      estimatedSettlePrice: string; // 预估结算价,仅在交割开始前最后一小时有意义\\n      lastFundingRate: string; // 最近更新的资金费率\\n      nextFundingTime: number; // 下次资金费时间\\n      interestRate: string; // 标的资产基础利率\\n      time: number; // 更新时间\\n    }\\n  | {\",\n      \"lineStart\": 118,\n      \"lineEnd\": 143\n    }\n  ]\n},\n{\n  \"additions\": 103,\n  \"deletions\": 48,\n  \"path\": \"apps/vendor-aster/src/services/markets/quote.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 985,
              "lineEnd": 995
            },
            {
              "type": "function",
              "name": "getRequestIntervalMs",
              "code": "\"patch\": \"commit 8aa2e3f9dce77c78c4482ecfa248769a464c5d2a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 01:10:11 2025 +0800\\n\\n    feat: add aster interest rate (#2213)\\n    \\n    * feat: add aster interest rate\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/quote.ts b/apps/vendor-aster/src/services/markets/quote.ts\\nindex 9ea420c98..ba022abb8 100644\\n--- a/apps/vendor-aster/src/services/markets/quote.ts\\n+++ b/apps/vendor-aster/src/services/markets/quote.ts\\n@@ -10,0 +11 @@ import {\\n+  exhaustMap,\\n@@ -22,0 +24 @@ import {\\n+  tap,\\n@@ -27,0 +30 @@ import {\\n+  getFApiV1PremiumIndex,\\n@@ -64,23 +67,23 @@ const getRequestIntervalMs = (rateLimits: IAsterRateLimit[] | undefined, fallbac\\n-// const openInterestCache = createCache<string>(\\n-//   async (symbol: string) => {\\n-//     try {\\n-//       const data = await getFApiV1OpenInterest({ symbol });\\n-//       return data.openInterest;\\n-//     } catch (error) {\\n-//       console.warn('getFApiV1OpenInterest failed', symbol, error);\\n-//       return undefined;\\n-//     }\\n-//   },\\n-//   { expire: OPEN_INTEREST_TTL },\\n-// );\\n-\\n-// const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n-//   map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n-//   catchError((err) => {\\n-//     console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n-//     return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n-//   }),\\n-//   startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n-//   retry({ delay: 60_000 }),\\n-//   shareReplay({ bufferSize: 1, refCount: true }),\\n-// );\\n+const openInterestCache = createCache<string>(\\n+  async (symbol: string) => {\\n+    try {\\n+      const data = await getFApiV1OpenInterest({ symbol });\\n+      return data.openInterest;\\n+    } catch (error) {\\n+      console.warn('getFApiV1OpenInterest failed', symbol, error);\\n+      return undefined;\\n+    }\\n+  },\\n+  { expire: OPEN_INTEREST_TTL },\\n+);\\n+\\n+const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n+  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n+  catchError((err) => {\\n+    console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n+    return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n+  }),\\n+  startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n+  retry({ delay: 60_000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+);\\n@@ -104 +106,0 @@ const quoteFromTicker$ = ticker$.pipe(\\n-      updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n@@ -109,24 +111,77 @@ const quoteFromTicker$ = ticker$.pipe(\\n-// const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\\n-//   mergeMap(([tickers, requestInterval]) =>\\n-//     from(tickers).pipe(\\n-//       concatMap((ticker, index) =>\\n-//         (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n-//           mergeMap(() => from(openInterestCache.query(ticker.symbol))),\\n-//           map(\\n-//             (openInterest): Partial<IQuote> => ({\\n-//               datasource_id: 'ASTER',\\n-//               product_id: encodePath('ASTER', 'PERP', ticker.symbol),\\n-//               open_interest: `${openInterest ?? 0}`,\\n-//               updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n-//             }),\\n-//           ),\\n-//         ),\\n-//       ),\\n-//     ),\\n-//   ),\\n-// );\\n-\\n-const quote$ = merge(\\n-  quoteFromTicker$,\\n-  // quoteFromOpenInterest$\\n-).pipe(\\n+// Extract unique symbols from ticker stream\\n+const symbolList$ = ticker$.pipe(\\n+  map((tickers) => tickers.map((t) => t.symbol)),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+);\\n+\\n+// Create a controlled rotation stream for fetching open interest\\n+// This cycles through all symbols with proper delays, independent of ticker updates\\n+const OPEN_INTEREST_CYCLE_DELAY = process.env.OPEN_INTEREST_CYCLE_DELAY\\n+  ? Number(process.env.OPEN_INTEREST_CYCLE_DELAY)\\n+  : 60_000; // 60 seconds between full cycles\\n+\\n+const openInterestRotation$ = combineLatest([symbolList$, requestInterval$]).pipe(\\n+  exhaustMap(([symbols, requestInterval]) =>\\n+    defer(() => {\\n+      console.info(\\n+        `Starting open interest rotation for ${symbols.length} symbols with ${requestInterval}ms interval`,\\n+      );\\n+      return from(symbols).pipe(\\n+        concatMap((symbol, index) =>\\n+          (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n+            mergeMap(() => from(openInterestCache.query(symbol))),\\n+            map((openInterest) => ({\\n+              symbol,\\n+              openInterest: openInterest ?? '0',\\n+              timestamp: Date.now(),\\n+            })),\\n+            catchError((err) => {\\n+              console.warn(`Failed to fetch open interest for ${symbol}:`, err);\\n+              return of(undefined);\\n+            }),\\n+          ),\\n+        ),\\n+      );\\n+    }),\\n+  ),\\n+  filter((x) => !!x),\\n+  shareReplay({ bufferSize: 1000, refCount: true }), // Cache open interest for all symbols\\n+);\\n+\\n+// Convert open interest rotation data to quote format\\n+const quoteFromOpenInterest$ = openInterestRotation$.pipe(\\n+  map(\\n+    (data): Partial<IQuote> => ({\\n+      datasource_id: 'ASTER',\\n+      product_id: encodePath('ASTER', 'PERP', data?.symbol),\\n+      open_interest: data?.openInterest,\\n+    }),\\n+  ),\\n+);\\n+\\n+// Funding rate stream - fetches all symbols at once (more efficient than per-symbol)\\n+const fundingRate$ = defer(() => getFApiV1PremiumIndex({})).pipe(\\n+  map((data) => {\\n+    // Handle both single object and array responses\\n+    const premiumDataArray = Array.isArray(data) ? data : [data];\\n+    return premiumDataArray;\\n+  }),\\n+  repeat({ delay: OPEN_INTEREST_CYCLE_DELAY }),\\n+  retry({ delay: 5000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+);\\n+\\n+// Convert funding rate data to quote format\\n+const quoteFromFundingRate$ = fundingRate$.pipe(\\n+  mergeMap((premiumDataArray) => premiumDataArray),\\n+  map(\\n+    (premiumData): Partial<IQuote> => ({\\n+      datasource_id: 'ASTER',\\n+      product_id: encodePath('ASTER', 'PERP', premiumData.symbol),\\n+      interest_rate_long: premiumData.lastFundingRate ? `${-+premiumData.lastFundingRate}` : undefined,\\n+      interest_rate_short: premiumData.lastFundingRate,\\n+    }),\\n+  ),\\n+);\\n+\\n+const quote$ = merge(quoteFromTicker$, quoteFromOpenInterest$, quoteFromFundingRate$).pipe(\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"openInterestCache\",",
              "lineStart": 996,
              "lineEnd": 1000
            },
            {
              "type": "function",
              "name": "openInterestCache",
              "code": "  \"code\": \"const openInterestCache = createCache<string>(\\n  async (symbol: string) => {\\n    try {\",\n  \"lineStart\": 67,\n  \"lineEnd\": 69\n},\n{\n  \"type\": \"function\",\n  \"name\": \"data\",",
              "lineStart": 1001,
              "lineEnd": 1007
            },
            {
              "type": "function",
              "name": "data",
              "code": "  \"code\": \"      const data = await getFApiV1OpenInterest({ symbol });\\n      return data.openInterest;\\n    } catch (error) {\\n      console.warn('getFApiV1OpenInterest failed', symbol, error);\\n      return undefined;\\n    }\\n  },\\n  { expire: OPEN_INTEREST_TTL },\\n);\\n\",\n  \"lineStart\": 70,\n  \"lineEnd\": 79\n},\n{\n  \"type\": \"function\",\n  \"name\": \"requestInterval\",",
              "lineStart": 1008,
              "lineEnd": 1014
            },
            {
              "type": "function",
              "name": "requestInterval",
              "code": "  \"code\": \"const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n  catchError((err) => {\\n    console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n    return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n  }),\\n  startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n  retry({ delay: 60_000 }),\\n  shareReplay({ bufferSize: 1, refCount: true }),\\n);\\n// Extract unique symbols from ticker stream\",\n  \"lineStart\": 80,\n  \"lineEnd\": 111\n},\n{\n  \"type\": \"function\",\n  \"name\": \"symbolList\",",
              "lineStart": 1015,
              "lineEnd": 1021
            },
            {
              "type": "function",
              "name": "symbolList",
              "code": "  \"code\": \"const symbolList$ = ticker$.pipe(\\n  map((tickers) => tickers.map((t) => t.symbol)),\\n  shareReplay({ bufferSize: 1, refCount: true }),\\n);\\n\\n// Create a controlled rotation stream for fetching open interest\\n// This cycles through all symbols with proper delays, independent of ticker updates\",\n  \"lineStart\": 112,\n  \"lineEnd\": 118\n},\n{\n  \"type\": \"function\",\n  \"name\": \"OPEN_INTEREST_CYCLE_DELAY\",",
              "lineStart": 1022,
              "lineEnd": 1028
            },
            {
              "type": "function",
              "name": "OPEN_INTEREST_CYCLE_DELAY",
              "code": "  \"code\": \"const OPEN_INTEREST_CYCLE_DELAY = process.env.OPEN_INTEREST_CYCLE_DELAY\\n  ? Number(process.env.OPEN_INTEREST_CYCLE_DELAY)\\n  : 60_000; // 60 seconds between full cycles\\n\",\n  \"lineStart\": 119,\n  \"lineEnd\": 122\n},\n{\n  \"type\": \"function\",\n  \"name\": \"openInterestRotation\",",
              "lineStart": 1029,
              "lineEnd": 1035
            },
            {
              "type": "function",
              "name": "openInterestRotation",
              "code": "  \"code\": \"const openInterestRotation$ = combineLatest([symbolList$, requestInterval$]).pipe(\\n  exhaustMap(([symbols, requestInterval]) =>\\n    defer(() => {\\n      console.info(\\n        `Starting open interest rotation for ${symbols.length} symbols with ${requestInterval}ms interval`,\\n      );\\n      return from(symbols).pipe(\\n        concatMap((symbol, index) =>\\n          (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n            mergeMap(() => from(openInterestCache.query(symbol))),\\n            map((openInterest) => ({\\n              symbol,\\n              openInterest: openInterest ?? '0',\\n              timestamp: Date.now(),\\n            })),\",\n  \"lineStart\": 123,\n  \"lineEnd\": 151\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quoteFromOpenInterest\",",
              "lineStart": 1036,
              "lineEnd": 1042
            },
            {
              "type": "function",
              "name": "quoteFromOpenInterest",
              "code": "  \"code\": \"const quoteFromOpenInterest$ = openInterestRotation$.pipe(\\n  map(\\n    (data): Partial<IQuote> => ({\\n      datasource_id: 'ASTER',\\n      product_id: encodePath('ASTER', 'PERP', data?.symbol),\\n      open_interest: data?.openInterest,\\n    }),\\n  ),\\n);\\n\\n// Funding rate stream - fetches all symbols at once (more efficient than per-symbol)\",\n  \"lineStart\": 152,\n  \"lineEnd\": 162\n},\n{\n  \"type\": \"function\",\n  \"name\": \"fundingRate\",",
              "lineStart": 1043,
              "lineEnd": 1049
            },
            {
              "type": "function",
              "name": "fundingRate",
              "code": "  \"code\": \"const fundingRate$ = defer(() => getFApiV1PremiumIndex({})).pipe(\\n  map((data) => {\\n    // Handle both single object and array responses\",\n  \"lineStart\": 163,\n  \"lineEnd\": 165\n},\n{\n  \"type\": \"function\",\n  \"name\": \"premiumDataArray\",",
              "lineStart": 1050,
              "lineEnd": 1056
            },
            {
              "type": "function",
              "name": "premiumDataArray",
              "code": "  \"code\": \"    const premiumDataArray = Array.isArray(data) ? data : [data];\\n    return premiumDataArray;\\n  }),\\n  repeat({ delay: OPEN_INTEREST_CYCLE_DELAY }),\\n  retry({ delay: 5000 }),\\n  shareReplay({ bufferSize: 1, refCount: true }),\\n);\\n\\n// Convert funding rate data to quote format\",\n  \"lineStart\": 166,\n  \"lineEnd\": 174\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quoteFromFundingRate\",",
              "lineStart": 1057,
              "lineEnd": 1063
            },
            {
              "type": "function",
              "name": "quoteFromFundingRate",
              "code": "  \"code\": \"const quoteFromFundingRate$ = fundingRate$.pipe(\\n  mergeMap((premiumDataArray) => premiumDataArray),\\n  map(\\n    (premiumData): Partial<IQuote> => ({\\n      datasource_id: 'ASTER',\\n      product_id: encodePath('ASTER', 'PERP', premiumData.symbol),\\n      interest_rate_long: premiumData.lastFundingRate ? `${-+premiumData.lastFundingRate}` : undefined,\\n      interest_rate_short: premiumData.lastFundingRate,\\n    }),\\n  ),\\n);\\n\",\n  \"lineStart\": 175,\n  \"lineEnd\": 186\n},\n{\n  \"type\": \"function\",\n  \"name\": \"quote\",",
              "lineStart": 1064,
              "lineEnd": 1070
            },
            {
              "type": "function",
              "name": "quote",
              "code": "        \"code\": \"const quote$ = merge(quoteFromTicker$, quoteFromOpenInterest$, quoteFromFundingRate$).pipe(\",\n        \"lineStart\": 187,\n        \"lineEnd\": 188\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-aster/2025-12-05-16-39.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit 8aa2e3f9dce77c78c4482ecfa248769a464c5d2a\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 01:10:11 2025 +0800\\n\\n    feat: add aster interest rate (#2213)\\n    \\n    * feat: add aster interest rate\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-05-16-39.json b/common/changes/@yuants/vendor-aster/2025-12-05-16-39.json\\nnew file mode 100644\\nindex 000000000..343b32f4f\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-05-16-39.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"add aster interest rate\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 1071,
              "lineEnd": 1159
            },
            {
              "type": "function",
              "name": "openInterestOfSwapFromWS",
              "code": "\"patch\": \"commit c79ad8cf3b8bd4aabdf86cb5715cdfb2baa23529\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 02:38:52 2025 +0800\\n\\n    fix: interest rate (#2215)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/new-quote.ts b/apps/vendor-okx/src/public-data/new-quote.ts\\nindex 703eaa20f..e3c6a7098 100644\\n--- a/apps/vendor-okx/src/public-data/new-quote.ts\\n+++ b/apps/vendor-okx/src/public-data/new-quote.ts\\n@@ -29,2 +29,8 @@ import {\\n-import { getInstruments, getMarketTickers, getOpenInterest, getPositionTiers } from '../api/public-api';\\n-import { useFundingRate, useOpenInterest, useTicker } from '../ws';\\n+import {\\n+  getFundingRate,\\n+  getInstruments,\\n+  getMarketTickers,\\n+  getOpenInterest,\\n+  getPositionTiers,\\n+} from '../api/public-api';\\n+import { useOpenInterest, useTicker } from '../ws';\\n@@ -194,17 +200,17 @@ const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n-const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n-  listWatch(\\n-    (x) => x.instId,\\n-    (x) => useFundingRate(x.instId),\\n-    () => true,\\n-  ),\\n-  map(\\n-    (x): Partial<IQuote> => ({\\n-      datasource_id: 'OKX',\\n-      product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n-      interest_rate_long: `${-+x[0].fundingRate}`,\\n-      interest_rate_short: x[0].fundingRate,\\n-      interest_rate_next_settled_at: x[0].fundingTime,\\n-    }),\\n-  ),\\n-  share(),\\n-);\\n+// const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n+//   listWatch(\\n+//     (x) => x.instId,\\n+//     (x) => useFundingRate(x.instId),\\n+//     () => true,\\n+//   ),\\n+//   map(\\n+//     (x): Partial<IQuote> => ({\\n+//       datasource_id: 'OKX',\\n+//       product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n+//       interest_rate_long: `-${x[0].fundingRate}`,\\n+//       interest_rate_short: x[0].fundingRate,\\n+//       interest_rate_next_settled_at: x[0].fundingTime,\\n+//     }),\\n+//   ),\\n+//   share(),\\n+// );\\n@@ -312,0 +319,21 @@ const marginOpenInterest$ = spotInstIds$.pipe(\\n+const fundingRate$ = defer(() => getFundingRate({ instId: 'ANY' })).pipe(\\n+  map((data) => data.data),\\n+  repeat({ delay: 50_000 }),\\n+  retry({ delay: 5000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+);\\n+\\n+// Convert funding rate data to quote format\\n+const interestRateOfSwap$ = fundingRate$.pipe(\\n+  mergeMap((premiumDataArray) => premiumDataArray),\\n+  map(\\n+    (premiumData): Partial<IQuote> => ({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', 'SWAP', premiumData.instId),\\n+      interest_rate_long: premiumData.fundingRate ? `${-+premiumData.fundingRate}` : undefined,\\n+      interest_rate_short: premiumData.fundingRate,\\n+      interest_rate_next_settled_at: premiumData.fundingTime,\\n+    }),\\n+  ),\\n+);\\n+\\n@@ -322 +349 @@ const quoteSources$ = [\\n-  interestRateOfSwapFromWS$,\\n+  interestRateOfSwap$,\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"interestRateOfSwapFromWS\",",
              "lineStart": 1160,
              "lineEnd": 1164
            },
            {
              "type": "function",
              "name": "interestRateOfSwapFromWS",
              "code": "  \"code\": \"// const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n//   listWatch(\\n//     (x) => x.instId,\\n//     (x) => useFundingRate(x.instId),\\n//     () => true,\\n//   ),\\n//   map(\\n//     (x): Partial<IQuote> => ({\\n//       datasource_id: 'OKX',\\n//       product_id: encodePath('OKX', 'SWAP', x[0].instId),\\n//       interest_rate_long: `-${x[0].fundingRate}`,\\n//       interest_rate_short: x[0].fundingRate,\\n//       interest_rate_next_settled_at: x[0].fundingTime,\\n//     }),\\n//   ),\",\n  \"lineStart\": 200,\n  \"lineEnd\": 318\n},\n{\n  \"type\": \"function\",\n  \"name\": \"fundingRate\",",
              "lineStart": 1165,
              "lineEnd": 1171
            },
            {
              "type": "function",
              "name": "fundingRate",
              "code": "  \"code\": \"const fundingRate$ = defer(() => getFundingRate({ instId: 'ANY' })).pipe(\\n  map((data) => data.data),\\n  repeat({ delay: 50_000 }),\\n  retry({ delay: 5000 }),\\n  shareReplay({ bufferSize: 1, refCount: true }),\\n);\\n\\n// Convert funding rate data to quote format\",\n  \"lineStart\": 319,\n  \"lineEnd\": 326\n},\n{\n  \"type\": \"function\",\n  \"name\": \"interestRateOfSwap\",",
              "lineStart": 1172,
              "lineEnd": 1178
            },
            {
              "type": "function",
              "name": "interestRateOfSwap",
              "code": "      \"code\": \"const interestRateOfSwap$ = fundingRate$.pipe(\\n  mergeMap((premiumDataArray) => premiumDataArray),\\n  map(\\n    (premiumData): Partial<IQuote> => ({\\n      datasource_id: 'OKX',\\n      product_id: encodePath('OKX', 'SWAP', premiumData.instId),\\n      interest_rate_long: premiumData.fundingRate ? `${-+premiumData.fundingRate}` : undefined,\\n      interest_rate_short: premiumData.fundingRate,\\n      interest_rate_next_settled_at: premiumData.fundingTime,\\n    }),\\n  ),\\n);\\n\\n  interestRateOfSwap$,\",\n      \"lineStart\": 327,\n      \"lineEnd\": 350\n    }\n  ]\n},\n{\n  \"additions\": 62,\n  \"deletions\": 22,\n  \"path\": \"apps/vendor-okx/src/ws.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1179,
              "lineEnd": 1189
            },
            {
              "type": "function",
              "name": "fromWsChannelAndInstId",
              "code": "\"patch\": \"commit c79ad8cf3b8bd4aabdf86cb5715cdfb2baa23529\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 02:38:52 2025 +0800\\n\\n    fix: interest rate (#2215)\\n\\ndiff --git a/apps/vendor-okx/src/ws.ts b/apps/vendor-okx/src/ws.ts\\nindex c3e29df77..5e8fe8c97 100644\\n--- a/apps/vendor-okx/src/ws.ts\\n+++ b/apps/vendor-okx/src/ws.ts\\n@@ -3 +3,11 @@ import { encodePath, formatTime } from '@yuants/utils';\\n-import { catchError, defer, EMPTY, filter, interval, Observable, Subscription, tap, timeout } from 'rxjs';\\n+import {\\n+  catchError,\\n+  EMPTY,\\n+  filter,\\n+  interval,\\n+  Observable,\\n+  shareReplay,\\n+  Subscription,\\n+  tap,\\n+  timeout,\\n+} from 'rxjs';\\n@@ -259,21 +269,33 @@ class OKXWsClient {\\n-const fromWsChannelAndInstId = <T>(path: string, channel: string, instId: string) =>\\n-  defer(\\n-    () =>\\n-      new Observable<T>((subscriber) => {\\n-        const client = OKXWsClient.GetWsClient(path);\\n-        client.subscribe(channel, instId, (data: T) => {\\n-          subscriber.next(data);\\n-        });\\n-        const removeError = client.addConnectionListener('error', (err) => {\\n-          subscriber.error(err);\\n-        });\\n-        const removeClose = client.addConnectionListener('close', () => {\\n-          subscriber.error('WS Connection Closed');\\n-        });\\n-        subscriber.add(() => {\\n-          removeError();\\n-          removeClose();\\n-          client.unsubscribe(channel, instId);\\n-        });\\n-      }),\\n-  ).pipe(\\n+// 全局缓存：存储已创建的 WebSocket Observable，实现订阅复用\\n+// key: encodePath(path, channel, instId)\\n+// value: shared Observable\\n+const wsObservableCache = new Map<string, Observable<any>>();\\n+\\n+const fromWsChannelAndInstId = <T>(path: string, channel: string, instId: string) => {\\n+  const cacheKey = encodePath(path, channel, instId);\\n+\\n+  // 检查缓存中是否已存在该订阅\\n+  const cached = wsObservableCache.get(cacheKey);\\n+  if (cached) {\\n+    console.info(formatTime(Date.now()), `♻️ Reusing cached subscription: ${cacheKey}`);\\n+    return cached as Observable<T>;\\n+  }\\n+\\n+  // 创建新的 Observable\\n+  const observable$ = new Observable<T>((subscriber) => {\\n+    const client = OKXWsClient.GetWsClient(path);\\n+    client.subscribe(channel, instId, (data: T) => {\\n+      subscriber.next(data);\\n+    });\\n+    const removeError = client.addConnectionListener('error', (err) => {\\n+      subscriber.error(err);\\n+    });\\n+    const removeClose = client.addConnectionListener('close', () => {\\n+      subscriber.error('WS Connection Closed');\\n+    });\\n+    subscriber.add(() => {\\n+      removeError();\\n+      removeClose();\\n+      client.unsubscribe(channel, instId);\\n+    });\\n+  }).pipe(\\n@@ -289,0 +312,11 @@ const fromWsChannelAndInstId = <T>(path: string, channel: string, instId: string\\n+    // 🔑 关键：使用 shareReplay 实现订阅复用\\n+    // - bufferSize: 1 - 缓存最新的一个值，新订阅者可以立即获得最新数据\\n+    // - refCount: true - 当所有订阅者都取消订阅时，自动取消上游订阅并清理资源\\n+    shareReplay({ bufferSize: 1, refCount: true }),\\n+    // 当订阅完全结束时，从缓存中移除\\n+    tap({\\n+      finalize: () => {\\n+        console.info(formatTime(Date.now()), `🗑️ Removing from cache: ${cacheKey}`);\\n+        wsObservableCache.delete(cacheKey);\\n+      },\\n+    }),\\n@@ -291,0 +325,7 @@ const fromWsChannelAndInstId = <T>(path: string, channel: string, instId: string\\n+  // 存入缓存\\n+  wsObservableCache.set(cacheKey, observable$);\\n+  console.info(formatTime(Date.now()), `📦 Cached new subscription: ${cacheKey}`);\\n+\\n+  return observable$;\\n+};\\n+\\n\",\n\"codeSnippets\": [\n  {\n    \"type\": \"function\",\n    \"name\": \"wsObservableCache\",",
              "lineStart": 1190,
              "lineEnd": 1194
            },
            {
              "type": "function",
              "name": "wsObservableCache",
              "code": "  \"code\": \"const wsObservableCache = new Map<string, Observable<any>>();\\n\",\n  \"lineStart\": 272,\n  \"lineEnd\": 273\n},\n{\n  \"type\": \"function\",\n  \"name\": \"fromWsChannelAndInstId\",",
              "lineStart": 1195,
              "lineEnd": 1201
            },
            {
              "type": "function",
              "name": "fromWsChannelAndInstId",
              "code": "  \"code\": \"const fromWsChannelAndInstId = <T>(path: string, channel: string, instId: string) => {\",\n  \"lineStart\": 274,\n  \"lineEnd\": 274\n},\n{\n  \"type\": \"function\",\n  \"name\": \"cacheKey\",",
              "lineStart": 1202,
              "lineEnd": 1208
            },
            {
              "type": "function",
              "name": "cacheKey",
              "code": "  \"code\": \"const cacheKey = encodePath(path, channel, instId);\\n\\n// 检查缓存中是否已存在该订阅\",\n  \"lineStart\": 275,\n  \"lineEnd\": 277\n},\n{\n  \"type\": \"function\",\n  \"name\": \"cached\",",
              "lineStart": 1209,
              "lineEnd": 1215
            },
            {
              "type": "function",
              "name": "cached",
              "code": "  \"code\": \"const cached = wsObservableCache.get(cacheKey);\\nif (cached) {\\n  console.info(formatTime(Date.now()), `♻️ Reusing cached subscription: ${cacheKey}`);\\n  return cached as Observable<T>;\\n}\\n\\n// 创建新的 Observable\",\n  \"lineStart\": 278,\n  \"lineEnd\": 284\n},\n{\n  \"type\": \"function\",\n  \"name\": \"observable\",",
              "lineStart": 1216,
              "lineEnd": 1222
            },
            {
              "type": "function",
              "name": "observable",
              "code": "  \"code\": \"const observable$ = new Observable<T>((subscriber) => {\",\n  \"lineStart\": 285,\n  \"lineEnd\": 285\n},\n{\n  \"type\": \"function\",\n  \"name\": \"client\",",
              "lineStart": 1223,
              "lineEnd": 1229
            },
            {
              "type": "function",
              "name": "client",
              "code": "  \"code\": \"const client = OKXWsClient.GetWsClient(path);\\nclient.subscribe(channel, instId, (data: T) => {\\n  subscriber.next(data);\\n});\",\n  \"lineStart\": 286,\n  \"lineEnd\": 289\n},\n{\n  \"type\": \"function\",\n  \"name\": \"removeError\",",
              "lineStart": 1230,
              "lineEnd": 1236
            },
            {
              "type": "function",
              "name": "removeError",
              "code": "  \"code\": \"const removeError = client.addConnectionListener('error', (err) => {\\n  subscriber.error(err);\\n});\",\n  \"lineStart\": 290,\n  \"lineEnd\": 292\n},\n{\n  \"type\": \"function\",\n  \"name\": \"removeClose\",",
              "lineStart": 1237,
              "lineEnd": 1243
            },
            {
              "type": "function",
              "name": "removeClose",
              "code": "        \"code\": \"  const removeClose = client.addConnectionListener('close', () => {\\n    subscriber.error('WS Connection Closed');\\n  });\\n  subscriber.add(() => {\\n    removeError();\\n    removeClose();\\n    client.unsubscribe(channel, instId);\\n  });\\n}).pipe(\\n  // 🔑 关键：使用 shareReplay 实现订阅复用\\n  // - bufferSize: 1 - 缓存最新的一个值，新订阅者可以立即获得最新数据\\n  // - refCount: true - 当所有订阅者都取消订阅时，自动取消上游订阅并清理资源\\n  shareReplay({ bufferSize: 1, refCount: true }),\\n  // 当订阅完全结束时，从缓存中移除\\n  tap({\",\n        \"lineStart\": 293,\n        \"lineEnd\": 332\n      }\n    ]\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-18-36.json\",\n    \"changeType\": \"added\",\n    \"patch\": \"commit c79ad8cf3b8bd4aabdf86cb5715cdfb2baa23529\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 02:38:52 2025 +0800\\n\\n    fix: interest rate (#2215)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-18-36.json b/common/changes/@yuants/vendor-okx/2025-12-05-18-36.json\\nnew file mode 100644\\nindex 000000000..5ef6e40a5\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-18-36.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"fix ws \\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n    \"codeSnippets\": []\n  }\n]",
              "lineStart": 1244,
              "lineEnd": 1277
            },
            {
              "type": "function",
              "name": "interestRateOfSwap",
              "code": "  \"patch\": \"commit 9d30c323aa15afab3eae342a638f5017c1b097b4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 02:43:02 2025 +0800\\n\\n    fix: interest rate (#2216)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/new-quote.ts b/apps/vendor-okx/src/public-data/new-quote.ts\\nindex e3c6a7098..fd912742c 100644\\n--- a/apps/vendor-okx/src/public-data/new-quote.ts\\n+++ b/apps/vendor-okx/src/public-data/new-quote.ts\\n@@ -340,2 +339,0 @@ const interestRateOfSwap$ = fundingRate$.pipe(\\n-marginOpenInterest$.subscribe();\\n-\\n\",\n  \"codeSnippets\": []\n},\n{\n  \"additions\": 1,\n  \"deletions\": 22,\n  \"path\": \"apps/vendor-okx/src/public-data/quote.ts\",\n  \"changeType\": \"modified\",",
              "lineStart": 1278,
              "lineEnd": 1285
            },
            {
              "type": "function",
              "name": "openInterestOfSwapFromWS",
              "code": "      \"patch\": \"commit 9d30c323aa15afab3eae342a638f5017c1b097b4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 02:43:02 2025 +0800\\n\\n    fix: interest rate (#2216)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/quote.ts b/apps/vendor-okx/src/public-data/quote.ts\\nindex e6a73bb79..84db94c5a 100644\\n--- a/apps/vendor-okx/src/public-data/quote.ts\\n+++ b/apps/vendor-okx/src/public-data/quote.ts\\n@@ -30 +30 @@ import { getInstruments, getMarketTickers, getOpenInterest, getPositionTiers } f\\n-import { useFundingRate, useOpenInterest, useTicker } from '../ws';\\n+import { useOpenInterest, useTicker } from '../ws';\\n@@ -194,18 +193,0 @@ const openInterestOfSwapFromWS$ = swapInstruments$.pipe(\\n-const interestRateOfSwapFromWS$ = swapInstruments$.pipe(\\n-  listWatch(\\n-    (x) => x.instId,\\n-    (x) => useFundingRate(x.instId),\\n-    () => true,\\n-  ),\\n-  map(\\n-    (x): Partial<IQuote> => ({\\n-      datasource_id: 'OKX',\\n-      product_id: encodePath('SWAP', x[0].instId),\\n-      interest_rate_long: `-${x[0].fundingRate}`,\\n-      interest_rate_short: x[0].fundingRate,\\n-      interest_rate_next_settled_at: x[0].fundingTime,\\n-    }),\\n-  ),\\n-  share(),\\n-);\\n-\\n@@ -313,2 +294,0 @@ const marginOpenInterest$ = spotInstIds$.pipe(\\n-marginOpenInterest$.subscribe();\\n-\\n@@ -322 +301,0 @@ const quoteSources$ = [\\n-  interestRateOfSwapFromWS$,\\n\",\n      \"codeSnippets\": []\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-18-41.json\",\n      \"changeType\": \"added\",\n      \"patch\": \"commit 9d30c323aa15afab3eae342a638f5017c1b097b4\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 02:43:02 2025 +0800\\n\\n    fix: interest rate (#2216)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-18-41.json b/common/changes/@yuants/vendor-okx/2025-12-05-18-41.json\\nnew file mode 100644\\nindex 000000000..8c8f65674\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-18-41.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"1\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n      \"codeSnippets\": []\n    }\n  ]\n},\n{\n  \"hash\": \"250b6c5d708cd53b40570b95e60f60e9ebeb509d\",",
              "lineStart": 1286,
              "lineEnd": 1379
            },
            {
              "type": "function",
              "name": "interestRateOfSwap",
              "code": "      \"patch\": \"commit fff872a17836a27b43cbec5c3d906cadf39d5174\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 03:05:09 2025 +0800\\n\\n    fix: interest rate (#2218)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/new-quote.ts b/apps/vendor-okx/src/public-data/new-quote.ts\\nindex fd912742c..dcfc532ee 100644\\n--- a/apps/vendor-okx/src/public-data/new-quote.ts\\n+++ b/apps/vendor-okx/src/public-data/new-quote.ts\\n@@ -335 +335 @@ const interestRateOfSwap$ = fundingRate$.pipe(\\n-      interest_rate_next_settled_at: premiumData.fundingTime,\\n+      interest_rate_next_settled_at: formatTime(+premiumData.fundingTime),\\n@@ -398,0 +399,8 @@ export const swapOpenInterest$ = defer(() => swapOpenInterests$).pipe(\\n+\\n+quote$\\n+  .pipe(\\n+    tap((quote) => {\\n+      console.log(quote);\\n+    }),\\n+  )\\n+  .subscribe();\\n\",\n      \"codeSnippets\": []\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-19-03.json\",\n      \"changeType\": \"added\",\n      \"patch\": \"commit fff872a17836a27b43cbec5c3d906cadf39d5174\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 03:05:09 2025 +0800\\n\\n    fix: interest rate (#2218)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-19-03.json b/common/changes/@yuants/vendor-okx/2025-12-05-19-03.json\\nnew file mode 100644\\nindex 000000000..8c8f65674\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-19-03.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"1\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n      \"codeSnippets\": []\n    }\n  ]\n},\n{\n  \"hash\": \"80a3e69621a24ebc3b78e18627a9ee7fd3e63290\",",
              "lineStart": 1380,
              "lineEnd": 1465
            },
            {
              "type": "function",
              "name": "swapOpenInterest",
              "code": "      \"patch\": \"commit 4bc38e98fc3c96675ab4b9be3c5cadce08da81ab\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 03:11:15 2025 +0800\\n\\n    fix: interest rate (#2220)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/new-quote.ts b/apps/vendor-okx/src/public-data/new-quote.ts\\nindex dcfc532ee..c184aae20 100644\\n--- a/apps/vendor-okx/src/public-data/new-quote.ts\\n+++ b/apps/vendor-okx/src/public-data/new-quote.ts\\n@@ -399,8 +398,0 @@ export const swapOpenInterest$ = defer(() => swapOpenInterests$).pipe(\\n-\\n-quote$\\n-  .pipe(\\n-    tap((quote) => {\\n-      console.log(quote);\\n-    }),\\n-  )\\n-  .subscribe();\\n\",\n      \"codeSnippets\": []\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-okx/2025-12-05-19-09.json\",\n      \"changeType\": \"added\",\n      \"patch\": \"commit 4bc38e98fc3c96675ab4b9be3c5cadce08da81ab\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Sat Dec 6 03:11:15 2025 +0800\\n\\n    fix: interest rate (#2220)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-05-19-09.json b/common/changes/@yuants/vendor-okx/2025-12-05-19-09.json\\nnew file mode 100644\\nindex 000000000..8c8f65674\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-05-19-09.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"1\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\",\n      \"codeSnippets\": []\n    }\n  ]\n},\n{\n  \"hash\": \"c3b9a3726918ed17e9a53614b7ccf8673e97e88d\",",
              "lineStart": 1466,
              "lineEnd": 1802
            }
          ]
        },
        {
          "additions": 186,
          "deletions": 0,
          "path": "docs/reports/git-changes-report-2025-12-06.md",
          "changeType": "added",
          "patch": "commit 492e1c7840e0268304776cbff8e6e74ef69e3dab\nAuthor: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 15:30:54 2025 +0800\n\n    feat: add daily git change report for 2025-12-06 - 21 commits (#2227)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n    Co-authored-by: Siyuan Wang <c.one@thrimbda.com>\n\ndiff --git a/docs/reports/git-changes-report-2025-12-06.md b/docs/reports/git-changes-report-2025-12-06.md\nnew file mode 100644\nindex 000000000..620fe50a6\n--- /dev/null\n+++ b/docs/reports/git-changes-report-2025-12-06.md\n@@ -0,0 +1,186 @@\n+# Git 变更报告（c36262cad..c3b9a3726）\n+\n+## 1. 概览\n+\n+- **时间范围**：2025-12-05 至 2025-12-06\n+- **提交数量**：21 个提交\n+- **主要贡献者**：humblelittlec1[bot] (9 commits), Ryan (8 commits), CZ (4 commits)\n+- **热点目录**：`apps` (24 文件), `common` (3 文件)\n+- **生成时间**：2025-12-06T06:36:33.236Z\n+- **分析深度**：Level 2\n+\n+## 2. 改动聚焦领域\n+\n+### 2.1 市场数据与资金费率\n+\n+- **涉及目录**：`apps/vendor-okx/`, `apps/vendor-aster/`, `apps/vendor-hyperliquid/`\n+- **关键提交**：\n+  - `af56c8e8a`：`feat: add interest rate (#2208)`\n+  - `4ecf8af00`：`feat: add new quote (#2209)`\n+  - `1e77d860a`：`feat: add hl interest rate (#2211)`\n+  - `8aa2e3f9d`：`feat: add aster interest rate (#2213)`\n+- **核心改动**：\n+  - `apps/vendor-okx/src/public-data/quote.ts:194-214`：添加资金费率 WebSocket 订阅，为永续合约提供多头和空头利率数据\n+  - `apps/vendor-okx/src/ws.ts:333-354`：新增 `useFundingRate` 函数，支持资金费率 WebSocket 通道订阅\n+  - `apps/vendor-aster/src/api/public-api.ts:118-143`：新增 `getFApiV1PremiumIndex` API 接口，获取标记价格、指数价格和资金费率\n+  - `apps/vendor-aster/src/services/markets/quote.ts:175-186`：将资金费率数据转换为报价格式，提供多头和空头利率\n+  - `apps/vendor-hyperliquid/src/services/markets/quote.ts:40-41`：为 Hyperliquid 添加资金费率支持\n+- **设计意图**：统一各交易所的资金费率数据收集，为风险管理和资金成本计算提供基础数据。通过 WebSocket 和 REST API 两种方式获取实时资金费率，确保数据的及时性和准确性。\n+\n+### 2.2 订单相关功能重构\n+\n+- **涉及目录**：`apps/vendor-okx/src/orders/`, `apps/vendor-okx/src/experimental/`\n+- **关键提交**：\n+  - `ac108ab9d`：`refactor: move order-related functions to a dedicated orders directory and update imports (#2204)`\n+  - `6f0d6e65c`：`feat: add broker tag to order submission parameters (#2201)`\n+  - `60338d133`：`feat: add broker tag to algo order (#2202)`\n+- **核心改动**：\n+  - `apps/vendor-okx/src/experimental/exchange.ts:5-10`：更新导入路径，从 `experimental` 目录改为 `orders` 目录\n+  - `apps/vendor-okx/src/orders/submitOrder.ts:45-118`：重构订单提交逻辑，使用 `slice(-2)` 获取正确的 `instType` 和 `instId`\n+  - `apps/vendor-okx/src/orders/submitOrder.ts:118`：将 `BROKER_TAG` 改为 `BROKER_CODE` 环境变量\n+  - `apps/vendor-okx/src/services.ts:24`：算法订单服务中同样将 `BROKER_TAG` 改为 `BROKER_CODE`\n+- **设计意图**：将订单相关函数从实验性目录迁移到专门的 `orders` 目录，提高代码组织性。同时添加经纪商标签支持，便于订单追踪和佣金计算。\n+\n+### 2.3 API 请求优化与缓存\n+\n+- **涉及目录**：`apps/vendor-aster/src/services/markets/`, `apps/vendor-okx/src/ws.ts`\n+- **关键提交**：\n+  - `ec771df32`：`chore: temporarily remove open interest caching and related logic (#2206)`\n+  - `c79ad8cf3`：`fix: interest rate (#2215)`\n+  - `9d30c323a`：`fix: interest rate (#2216)`\n+- **核心改动**：\n+  - `apps/vendor-aster/src/services/markets/quote.ts:64-128`：暂时注释掉未平仓合约缓存和相关逻辑，避免 API 限速问题\n+  - `apps/vendor-okx/src/ws.ts:272-332`：实现 WebSocket Observable 全局缓存，通过 `shareReplay` 实现订阅复用\n+  - `apps/vendor-okx/src/public-data/new-quote.ts:319-350`：将资金费率获取从 WebSocket 改为 REST API，避免连接数过多\n+- **设计意图**：优化 API 请求策略，避免触发交易所限速机制。通过缓存和请求间隔控制，提高系统稳定性。\n+\n+### 2.4 配置与环境管理\n+\n+- **涉及目录**：`apps/vendor-okx/`, `apps/vendor-aster/`, `apps/vendor-hyperliquid/`\n+- **关键提交**：\n+  - `624436a6e`：`chore: bump version (#2203)`\n+  - `d8d60c1f2`：`chore: bump version (#2205)`\n+  - `82809689b`：`chore: bump version (#2207)`\n+  - `b7e210168`：`chore: bump version (#2210)`\n+  - `c840c382e`：`chore: bump version (#2212)`\n+  - `4f88a860d`：`chore: bump version (#2214)`\n+  - `250b6c5d7`：`chore: bump version (#2217)`\n+  - `80a3e6962`：`chore: bump version (#2219)`\n+  - `c3b9a3726`：`chore: bump version (#2221)`\n+- **核心改动**：\n+  - 各 vendor 包的版本号更新和 CHANGELOG 维护\n+  - 环境变量从 `BROKER_TAG` 改为 `BROKER_CODE`\n+  - 新增 `OPEN_INTEREST_CYCLE_DELAY` 环境变量控制\n+- **设计意图**：保持各包版本同步，记录变更历史，便于依赖管理和发布追踪。\n+\n+## 3. 贡献者分析\n+\n+| 作者 | 提交数 | 主要贡献领域 | 关键提交 |\n+| ---- | ------ | ------------ | -------- |\n+| humblelittlec1[bot] | 9 | 版本管理、文档更新 | `624436a6e`, `d8d60c1f2`, `82809689b` |\n+| Ryan | 8 | 市场数据、资金费率功能 | `af56c8e8a`, `4ecf8af00`, `1e77d860a` |\n+| CZ | 4 | 订单功能重构、API 优化 | `ac108ab9d`, `6f0d6e65c`, `60338d133` |\n+\n+## 4. 技术影响与风险\n+\n+### 兼容性影响\n+\n+- **环境变量变更**：`BROKER_TAG` 改为 `BROKER_CODE`，使用旧环境变量的部署需要更新\n+- **目录结构变更**：订单相关函数从 `experimental` 目录迁移到 `orders` 目录，相关导入需要更新\n+- **资金费率数据源**：OKX 的资金费率获取从 WebSocket 改为 REST API，可能影响数据更新频率\n+\n+### 配置变更\n+\n+- **新增环境变量**：\n+  - `BROKER_CODE`：替换原来的 `BROKER_TAG`\n+  - `OPEN_INTEREST_CYCLE_DELAY`：控制未平仓合约数据获取间隔（默认 60 秒）\n+- **依赖更新**：各 vendor 包版本号更新，需要重新安装依赖\n+\n+### 性能影响\n+\n+- **WebSocket 连接优化**：通过 Observable 缓存减少重复连接，降低资源消耗\n+- **API 请求控制**：Aster 暂时移除未平仓合约缓存，避免触发限速\n+- **资金费率获取**：从实时 WebSocket 改为定时 REST API 请求，减少连接数但可能降低实时性\n+\n+### 测试覆盖\n+\n+- **未见测试记录**：本次变更主要集中在功能添加和重构，未见相关测试文件更新\n+- **建议**：新增的资金费率功能和订单重构应添加单元测试和集成测试\n+\n+## 5. 单提交摘要（附录）\n+\n+### ac108ab9d CZ | 2025-12-05T06:28:04+00:00 | 重构\n+\n+**主题**：`refactor: move order-related functions to a dedicated orders directory and update imports (#2204)`\n+\n+**变更要点**：\n+\n+- **文件/目录**：`apps/vendor-okx/src/experimental/` → `apps/vendor-okx/src/orders/` - 将订单相关函数迁移到专门目录\n+- **接口/协议**：更新所有相关文件的导入路径，使用 `slice(-2)` 正确获取 `instType` 和 `instId`\n+- **行为/数据流**：订单提交、修改、取消功能保持相同行为，仅代码位置变化\n+- **观测/指标**：无新增监控\n+\n+**风险/影响**：\n+\n+- 需要更新所有引用这些函数的代码\n+- 大规模重构（删除 215 行，新增 10 行），需仔细测试\n+\n+**测试**：未见测试记录\n+\n+### af56c8e8a Ryan | 2025-12-05T14:24:08+00:00 | 功能\n+\n+**主题**：`feat: add interest rate (#2208)`\n+\n+**变更要点**：\n+\n+- **文件/目录**：`apps/vendor-okx/src/public-data/quote.ts` - 添加资金费率 WebSocket 订阅\n+- **接口/协议**：新增 `useFundingRate` WebSocket 通道，返回资金费率、下次结算时间等数据\n+- **行为/数据流**：为永续合约提供多头利率（负值）和空头利率（正值）\n+- **观测/指标**：新增 `interest_rate_long`、`interest_rate_short`、`interest_rate_next_settled_at` 字段\n+\n+**风险/影响**：\n+\n+- 新增 WebSocket 连接，可能增加连接数\n+- 需要交易所支持 `funding-rate` 通道\n+\n+**测试**：未见测试记录\n+\n+### 4ecf8af00 Ryan | 2025-12-05T14:33:29+00:00 | 功能\n+\n+**主题**：`feat: add new quote (#2209)`\n+\n+**变更要点**：\n+\n+- **文件/目录**：`apps/vendor-okx/src/public-data/new-quote.ts` - 新增独立的报价模块\n+- **接口/协议**：复制原有报价逻辑，但使用 `encodePath('OKX', ...)` 格式\n+- **行为/数据流**：提供与原有报价模块相同的功能，但数据结构略有不同\n+- **观测/指标**：新增模块需要手动导入到主入口文件\n+\n+**风险/影响**：\n+\n+- 创建重复功能模块，可能造成代码冗余\n+- 需要手动添加到 `index.ts` 才能生效\n+\n+**测试**：未见测试记录\n+\n+### ec771df32 CZ | 2025-12-05T09:28:14+00:00 | 优化\n+\n+**主题**：`chore: temporarily remove open interest caching and related logic (#2206)`\n+\n+**变更要点**：\n+\n+- **文件/目录**：`apps/vendor-aster/src/services/markets/quote.ts` - 暂时移除未平仓合约缓存\n+- **接口/协议**：注释掉 `openInterestCache`、`requestInterval$`、`quoteFromOpenInterest$` 相关代码\n+- **行为/数据流**：避免触发交易所 API 限速，提高系统稳定性\n+- **观测/指标**：控制台输出调整，减少日志噪音\n+\n+**风险/影响**：\n+\n+- 暂时失去未平仓合约数据\n+- 需要后续优化 API 请求策略后重新启用\n+\n+**测试**：未见测试记录\n+\n+---\n+\n+**报告生成说明**：本报告基于 `docs/reports/git-changes-2025-12-06.json` 数据生成，遵循 git-changes-reporter skill 规范。所有 commit 引用使用短哈希格式，避免使用 JSON 行号。\n\\ No newline at end of file\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "f69e5a73aab9d463c49340a3a65122e391d880d0",
      "short": "f69e5a73a",
      "author": "github-actions[bot]",
      "email": "41898282+github-actions[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-09 15:31:44 +0800",
      "subject": "feat: add daily git change report for 2025-12-05 - 12 commits (#2200)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 669,
          "deletions": 0,
          "path": "docs/reports/git-changes-2025-12-05.json",
          "changeType": "added",
          "patch": "commit f69e5a73aab9d463c49340a3a65122e391d880d0\nAuthor: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 15:31:44 2025 +0800\n\n    feat: add daily git change report for 2025-12-05 - 12 commits (#2200)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n    Co-authored-by: Siyuan Wang <c.one@thrimbda.com>\n\ndiff --git a/docs/reports/git-changes-2025-12-05.json b/docs/reports/git-changes-2025-12-05.json\nnew file mode 100644\nindex 000000000..712947753\n--- /dev/null\n+++ b/docs/reports/git-changes-2025-12-05.json\n@@ -0,0 +1,669 @@\n+{\n+  \"range\": {\n+    \"old\": \"a126bbb4025a5e602bf4f1f50f6ca225c5f96573\",\n+    \"new\": \"c36262caddee5b4ee9ada840501c81e554b5de6a\",\n+    \"label\": \"a126bbb40..c36262cad\",\n+    \"startDate\": \"2025-12-04\",\n+    \"endDate\": \"2025-12-05\",\n+    \"commitCount\": 12,\n+    \"generatedAt\": \"2025-12-05T00:06:04.490Z\"\n+  },\n+  \"contributors\": [\n+    {\n+      \"name\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"commits\": 5\n+    },\n+    {\n+      \"name\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"commits\": 4\n+    },\n+    {\n+      \"name\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"commits\": 3\n+    }\n+  ],\n+  \"topDirs\": [\n+    {\n+      \"dir\": \"apps\",\n+      \"fileCount\": 49\n+    },\n+    {\n+      \"dir\": \"common\",\n+      \"fileCount\": 7\n+    }\n+  ],\n+  \"commits\": [\n+    {\n+      \"hash\": \"52651345fdf859c9d0198c4f26f1e50aa2e3ddd0\",\n+      \"short\": \"52651345f\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-04 10:53:32 +0800\",\n+      \"subject\": \"feat: enhance order submission logic to round volume for close positions (#2189)\",\n+      \"files\": [\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-turboflow/src/services/orders/submitOrder.ts\",\n+          \"patch\": \"commit 52651345fdf859c9d0198c4f26f1e50aa2e3ddd0\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 10:53:32 2025 +0800\\n\\n    feat: enhance order submission logic to round volume for close positions (#2189)\\n\\ndiff --git a/apps/vendor-turboflow/src/services/orders/submitOrder.ts b/apps/vendor-turboflow/src/services/orders/submitOrder.ts\\nindex e2bba4841..d7f2d601b 100644\\n--- a/apps/vendor-turboflow/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-turboflow/src/services/orders/submitOrder.ts\\n@@ -2 +2 @@ import { IOrder } from '@yuants/data-order';\\n-import { decodePath, newError } from '@yuants/utils';\\n+import { decodePath, newError, roundToStep } from '@yuants/utils';\\n@@ -50 +50,2 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n-  const size = order.order_direction.includes('CLOSE') ? order.volume.toString() : undefined; // 头寸名义价值\\n+  // 平仓时，剩余小于 1 USDC 时会自动平仓\\n+  const size = order.order_direction.includes('CLOSE') ? Math.floor(order.volume).toString() : undefined; // 头寸名义价值\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\",\n+          \"patch\": \"commit 52651345fdf859c9d0198c4f26f1e50aa2e3ddd0\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 10:53:32 2025 +0800\\n\\n    feat: enhance order submission logic to round volume for close positions (#2189)\\n\\ndiff --git a/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json b/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\\nnew file mode 100644\\nindex 000000000..68d6bcf2d\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-turboflow\\\",\\n+      \\\"comment\\\": \\\"fix close position\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-turboflow\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"7737136846486c3710874a554a7e3d3392e4fe1f\",\n+      \"short\": \"773713684\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-04 11:11:56 +0800\",\n+      \"subject\": \"chore: bump version (#2190)\",\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-turboflow/CHANGELOG.json\",\n+          \"patch\": \"commit 7737136846486c3710874a554a7e3d3392e4fe1f\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 11:11:56 2025 +0800\\n\\n    chore: bump version (#2190)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/CHANGELOG.json b/apps/vendor-turboflow/CHANGELOG.json\\nindex fe3de1a15..530f445eb 100644\\n--- a/apps/vendor-turboflow/CHANGELOG.json\\n+++ b/apps/vendor-turboflow/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"1.2.9\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-turboflow_v1.2.9\\\",\\n+      \\\"date\\\": \\\"Thu, 04 Dec 2025 03:10:55 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix close position\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-turboflow/CHANGELOG.md\",\n+          \"patch\": \"commit 7737136846486c3710874a554a7e3d3392e4fe1f\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 11:11:56 2025 +0800\\n\\n    chore: bump version (#2190)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/CHANGELOG.md b/apps/vendor-turboflow/CHANGELOG.md\\nindex 1685f0091..f5095878f 100644\\n--- a/apps/vendor-turboflow/CHANGELOG.md\\n+++ b/apps/vendor-turboflow/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+This log was last generated on Thu, 04 Dec 2025 03:10:55 GMT and should not be manually modified.\\n+\\n+## 1.2.9\\n+Thu, 04 Dec 2025 03:10:55 GMT\\n+\\n+### Patches\\n+\\n+- fix close position\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-turboflow/package.json\",\n+          \"patch\": \"commit 7737136846486c3710874a554a7e3d3392e4fe1f\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 11:11:56 2025 +0800\\n\\n    chore: bump version (#2190)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/package.json b/apps/vendor-turboflow/package.json\\nindex 7c584f57e..36afa6ee1 100644\\n--- a/apps/vendor-turboflow/package.json\\n+++ b/apps/vendor-turboflow/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"1.2.8\\\",\\n+  \\\"version\\\": \\\"1.2.9\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\",\n+          \"patch\": \"commit 7737136846486c3710874a554a7e3d3392e4fe1f\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 11:11:56 2025 +0800\\n\\n    chore: bump version (#2190)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json b/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\\ndeleted file mode 100644\\nindex 68d6bcf2d..000000000\\n--- a/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-turboflow\\\",\\n-      \\\"comment\\\": \\\"fix close position\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-turboflow\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-turboflow/{main_2025-12-03-18-20.json => main_2025-12-04-03-10.json}\",\n+          \"patch\": \"\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"65358bffab9382823fc92ec877897bb4ee296182\",\n+      \"short\": \"65358bffa\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-04 14:29:30 +0800\",\n+      \"subject\": \"refactor(vendor-bitget) API integration for futures and spot markets (#2183)\",\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-bitget/AGENTS.md\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/AGENTS.md b/apps/vendor-bitget/AGENTS.md\\nindex 79485d60c..30c06b0a9 100644\\n--- a/apps/vendor-bitget/AGENTS.md\\n+++ b/apps/vendor-bitget/AGENTS.md\\n@@ -93,0 +94 @@\\n+- UTA v3 API 已替换旧 spot/margin/futures v2 接口，所有新增/维护需使用 `src/api/private-api.ts` 与 `src/api/public-api.ts` 的 UTA 端点，避免回退旧版。\\n\"\n+        },\n+        {\n+          \"additions\": 32,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-bitget/SESSION_NOTES.md\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/SESSION_NOTES.md b/apps/vendor-bitget/SESSION_NOTES.md\\nindex 00e2300b1..a7ef4101f 100644\\n--- a/apps/vendor-bitget/SESSION_NOTES.md\\n+++ b/apps/vendor-bitget/SESSION_NOTES.md\\n@@ -101,0 +102,26 @@\\n+### 2025-12-04 — Codex\\n+\\n+- **本轮摘要**：\\n+  - product 服务新增对 SPOT 产品的获取与写库，`listProducts` 现在返回 futures + spot 并定期写入 `product` 表。\\n+  - 账户服务合并 futures/spot，统一通过 `getAccountAssets` + `getCurrentPosition` 获取资产与持仓，并用 SPOT tickers 估算 `closable_price`。\\n+  - 修正 UTA 下单参数：去除 futures 下单的 `reduceOnly`，避免与 `posSide` 并存触发 25238 错误。\\n+  - 支持下单 Post-only（MAKER）：当 `order_type === 'MAKER'` 时传 `timeInForce: post_only`；product margin_rate 使用 `maxLeverage`，修正 coin futures `market_id`。\\n+- **运行的测试 / 检查**：\\n+  - 命令：`npx -y typescript@5.6.3 --noEmit --project apps/vendor-bitget/tsconfig.json`\\n+  - 结果：失败（npm 报错 could not determine executable to run；本地未能通过 npx 拉起 tsc）\\n+\\n+### 2025-12-09 — Codex\\n+\\n+- **本轮摘要**：\\n+  - 全量切换到 UTA v3 API：删除旧版 `api/private-api.ts`、`api/public-api.ts`，用新版 UTA 接口（账户/订单/行情/资金费率/产品）替代并重命名。\\n+  - 重构账户、订单、行情服务以适配 UTA：账户配置改用 `getAccountSettings`，持仓/挂单改用 `getCurrentPosition`/`getUnfilledOrders`，下撤改单统一走 `postPlaceOrder`/`postCancelOrder`/`postModifyOrder`，现货资产用 `getAccountFundingAssets`，行情/产品/利率改用 UTA 公共端点。\\n+  - 清理根目录 `node_modules`，用 `npx -y node@22.12.0 common/scripts/install-run-rush.js build --to @yuants/vendor-bitget` 通过构建。\\n+  - 补充合约账户余额为 position：`services/accounts/futures.ts` 将 UTA 账户资产（USDT 等）映射为 balance position，与持仓列表合并输出。\\n+- **修改的文件**：\\n+  - 删除 `apps/vendor-bitget/src/api/private-api.ts`, `apps/vendor-bitget/src/api/public-api.ts`；重命名并扩充 UTA 版本。\\n+  - 更新 `services/accounts/*`, `services/orders/*`, `services/markets/*` 依赖新的 UTA API。\\n+  - `apps/vendor-bitget/SESSION_NOTES.md`, `apps/vendor-bitget/AGENTS.md`（指令同步）。\\n+- **运行的测试 / 检查**：\\n+  - 命令：`npx -y node@22.12.0 common/scripts/install-run-rush.js build --to @yuants/vendor-bitget`\\n+  - 结果：通过\\n+\\n@@ -325 +351 @@\\n-### 2025-11-17 12:21 — Codex\\n+### 2025-12-08 — Codex\\n@@ -327 +353,5 @@\\n-- 草稿内容已结算至各章节，本节暂留空。\\n+- 新增 UTA “Get Account Assets” API helper（GET `/api/v3/account/assets`，20/s UID），类型对齐文档，仅返回非零余额；已从 `private-api.ts` 拆出单独文件 `src/api/uta-account-api.ts`，尚未接入账户服务。\\n+- 在 `src/api/private-api` 中补充 UTA 资产/交易接口：资金账户资产 `getAccountFundingAssets`、持仓 `getCurrentPosition`、未成交订单 `getUnfilledOrders`、下单 `postPlaceOrder`、改单 `postModifyOrder`、撤单 `postCancelOrder`、账户设置 `getAccountSettings`；保留转账/提现相关接口以兼容 transfer 服务。\\n+- 新增 `src/api/public-api` 覆盖 UTA 公共接口：`getInstruments`、`getTickers`、`getOpenInterestV3`、`getCurrentFundingRate`、`getHistoryFundingRate`、`getHistoryCandles`。\\n+- 删除老版 `api/private-api.ts`、`api/public-api.ts`，并重构账户/订单/行情服务依赖 UTA 接口。\\n+- 运行 `npx tsc --noEmit --project apps/vendor-bitget/tsconfig.json` ✅。\\n\"\n+        },\n+        {\n+          \"additions\": 209,\n+          \"deletions\": 420,\n+          \"path\": \"apps/vendor-bitget/src/api/private-api.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/api/private-api.ts b/apps/vendor-bitget/src/api/private-api.ts\\nindex 910b6e098..b716b1bd7 100644\\n--- a/apps/vendor-bitget/src/api/private-api.ts\\n+++ b/apps/vendor-bitget/src/api/private-api.ts\\n@@ -11 +11,51 @@ type ApiResponse<T> = {\\n-interface IFuturePendingOrder {\\n+export interface IUtaAccountAsset {\\n+  coin: string;\\n+  equity: string;\\n+  usdValue: string;\\n+  balance: string;\\n+  available: string;\\n+  debt: string;\\n+  locked: string;\\n+}\\n+\\n+export interface IUtaFundingAsset {\\n+  coin: string;\\n+  balance: string;\\n+  available: string;\\n+  frozen: string;\\n+}\\n+\\n+export interface IUtaPosition {\\n+  category: string;\\n+  symbol: string;\\n+  marginCoin: string;\\n+  holdMode: string;\\n+  posSide: string;\\n+  marginMode: string;\\n+  positionBalance: string;\\n+  available: string;\\n+  frozen: string;\\n+  total: string;\\n+  leverage: string;\\n+  curRealisedPnl: string;\\n+  avgPrice: string;\\n+  positionStatus: string;\\n+  unrealisedPnl: string;\\n+  liquidationPrice: string;\\n+  mmr: string;\\n+  profitRate: string;\\n+  markPrice: string;\\n+  breakEvenPrice: string;\\n+  totalFunding: string;\\n+  openFeeTotal: string;\\n+  closeFeeTotal: string;\\n+  createdTime: string;\\n+  updatedTime: string;\\n+}\\n+\\n+export interface IUtaPendingOrderFeeDetail {\\n+  feeCoin: string | null;\\n+  fee: string | null;\\n+}\\n+\\n+export interface IUtaPendingOrder {\\n@@ -13,0 +64 @@ interface IFuturePendingOrder {\\n+  category: string;\\n@@ -15,7 +65,0 @@ interface IFuturePendingOrder {\\n-  productType: string;\\n-  marginCoin: string;\\n-  size: string;\\n-  filledQty: string;\\n-  price: string;\\n-  priceAvg: string;\\n-  state: string;\\n@@ -24,3 +68,11 @@ interface IFuturePendingOrder {\\n-  tradeSide?: string;\\n-  posSide?: string;\\n-  marginMode?: string;\\n+  price: string;\\n+  qty: string;\\n+  amount: string;\\n+  cumExecQty: string;\\n+  cumExecValue: string;\\n+  avgPrice: string;\\n+  timeInForce: string;\\n+  orderStatus: string;\\n+  posSide: string;\\n+  holdMode: string;\\n+  stpMode?: string;\\n@@ -28,3 +80,3 @@ interface IFuturePendingOrder {\\n-  createdTime?: string;\\n-  cTime?: string;\\n-  uTime?: string;\\n+  feeDetail: IUtaPendingOrderFeeDetail[];\\n+  createdTime: string;\\n+  updatedTime: string;\\n@@ -33,18 +85,5 @@ interface IFuturePendingOrder {\\n-interface ISpotPendingOrder {\\n-  orderId?: string;\\n-  clientOid?: string;\\n-  symbol?: string;\\n-  instId?: string;\\n-  orderType?: string;\\n-  side?: string;\\n-  size?: string;\\n-  quantity?: string;\\n-  baseSz?: string;\\n-  baseAmount?: string;\\n-  fillSz?: string;\\n-  filledQty?: string;\\n-  baseFilled?: string;\\n-  cTime?: string;\\n-  createTime?: string;\\n-  createdTime?: string;\\n-  price?: string;\\n+export interface IUtaSymbolConfig {\\n+  category: string;\\n+  symbol: string;\\n+  marginMode: string;\\n+  leverage: string;\\n@@ -53,3 +92 @@ interface ISpotPendingOrder {\\n-interface IWithdrawalRecord {\\n-  orderId: string;\\n-  tradeId: string;\\n+export interface IUtaCoinConfig {\\n@@ -57,9 +94 @@ interface IWithdrawalRecord {\\n-  clientOid: string;\\n-  type: string;\\n-  dest: string;\\n-  size: string;\\n-  status: string;\\n-  fromAddress: string;\\n-  toAddress: string;\\n-  chain: string;\\n-  cTime: string;\\n+  leverage: string;\\n@@ -68,12 +97,8 @@ interface IWithdrawalRecord {\\n-interface IDepositRecord {\\n-  orderId: string;\\n-  tradeId: string;\\n-  coin: string;\\n-  type: string;\\n-  dest: string;\\n-  size: string;\\n-  status: string;\\n-  fromAddress: string;\\n-  toAddress: string;\\n-  chain: string;\\n-  cTime: string;\\n+export interface IUtaAccountSettings {\\n+  uid: string;\\n+  accountMode: string;\\n+  assetMode: string;\\n+  holdMode: string;\\n+  stpMode: string;\\n+  symbolConfigList: IUtaSymbolConfig[];\\n+  coinConfigList: IUtaCoinConfig[];\\n@@ -83 +108 @@ interface IDepositRecord {\\n- * 资产概览\\n+ * 获取统一账户资产\\n@@ -85,18 +110 @@ interface IDepositRecord {\\n- * 限速规则: 1次/1s (Uid)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/common/account/All-Account-Balance\\n- */\\n-export const getAllAccountBalance = (credential: ICredential) =>\\n-  requestPrivate<\\n-    ApiResponse<\\n-      {\\n-        accountType: string;\\n-        usdtBalance: string;\\n-      }[]\\n-    >\\n-  >(credential, 'GET', '/api/v2/account/all-account-balance');\\n-\\n-/**\\n- * 获取账户信息\\n- *\\n- * 限速规则 1次/秒/UID\\n+ * 限速规则: 20次/1s (UID)\\n@@ -104 +112 @@ export const getAllAccountBalance = (credential: ICredential) =>\\n- * 获取账户信息 (需要现货只读或者读写权限)\\n+ * 查询账户信息与资产（仅返回非 0 余额）\\n@@ -106 +114 @@ export const getAllAccountBalance = (credential: ICredential) =>\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Account-Info\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/account/Get-Account\\n@@ -108 +116 @@ export const getAllAccountBalance = (credential: ICredential) =>\\n-export const getAccountInfo = (credential: ICredential) =>\\n+export const getAccountAssets = (credential: ICredential) =>\\n@@ -111,9 +119,12 @@ export const getAccountInfo = (credential: ICredential) =>\\n-      userId: string;\\n-      inviterId: string;\\n-      channelCode: string;\\n-      channel: string;\\n-      ips: string;\\n-      authorities: string[];\\n-      parentId: number;\\n-      traderType: string;\\n-      regisTime: string;\\n+      accountEquity: string;\\n+      usdtEquity: string;\\n+      btcEquity: string;\\n+      unrealisedPnl: string;\\n+      usdtUnrealisedPnl: string;\\n+      btcUnrealizedPnl: string;\\n+      effEquity: string;\\n+      mmr: string;\\n+      imr: string;\\n+      mgnRatio: string;\\n+      positionMgnRatio: string;\\n+      assets: IUtaAccountAsset[];\\n@@ -121 +132 @@ export const getAccountInfo = (credential: ICredential) =>\\n-  >(credential, 'GET', '/api/v2/spot/account/info');\\n+  >(credential, 'GET', '/api/v3/account/assets');\\n@@ -124 +135 @@ export const getAccountInfo = (credential: ICredential) =>\\n- * 获取账户信息列表\\n+ * 获取统一账户设置\\n@@ -126 +137 @@ export const getAccountInfo = (credential: ICredential) =>\\n- * 限速规则: 10次/1s (uid)\\n+ * 限速规则: 20次/1s (UID)\\n@@ -128 +139 @@ export const getAccountInfo = (credential: ICredential) =>\\n- * 查询某产品类型下所有账户信息\\n+ * 查询持仓/保证金模式、杠杆等账户配置\\n@@ -130 +141 @@ export const getAccountInfo = (credential: ICredential) =>\\n- * https://www.bitget.com/zh-CN/api-doc/contract/account/Get-Account-List\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/account/Get-Account-Setting\\n@@ -132,19 +143,2 @@ export const getAccountInfo = (credential: ICredential) =>\\n-export const getFutureAccounts = (credential: ICredential, params: { productType: string }) =>\\n-  requestPrivate<\\n-    ApiResponse<\\n-      {\\n-        marginCoin: string;\\n-        locked: string;\\n-        available: string;\\n-        crossedMaxAvailable: string;\\n-        isolatedMaxAvailable: string;\\n-        maxTransferOut: string;\\n-        accountEquity: string;\\n-        usdtEquity: string;\\n-        btcEquity: string;\\n-        crossedRiskRate: string;\\n-        unrealizedPL: string;\\n-        coupon: string;\\n-      }[]\\n-    >\\n-  >(credential, 'GET', '/api/v2/mix/account/accounts', params);\\n+export const getAccountSettings = (credential: ICredential) =>\\n+  requestPrivate<ApiResponse<IUtaAccountSettings>>(credential, 'GET', '/api/v3/account/settings');\\n@@ -153,2 +147 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\\n- * 获取全部合约仓位信息\\n- * 5次/S 根据uid限频\\n+ * 获取资金账户资产\\n@@ -156 +149 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\\n- * 返回指定productType当前全部的持仓信息\\n+ * 限速规则: 20次/1s (UID)\\n@@ -158,3 +151 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\\n- * 此接口返回数据可能会在以下场景下出现延迟，建议订阅Websocket监控仓位信息：\\n- * 资金费率结算时\\n- * 行情波动剧烈\\n+ * 仅返回有资产的币种\\n@@ -162 +153 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\\n- * https://www.bitget.com/zh-CN/api-doc/contract/position/get-all-position\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/account/Get-Account-Funding-Assets\\n@@ -164,31 +155,7 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\\n-export const getAllPositions = (\\n-  credential: ICredential,\\n-  params: { productType: string; marginCoin: string },\\n-) =>\\n-  requestPrivate<\\n-    ApiResponse<\\n-      {\\n-        symbol: string;\\n-        marginCoin: string;\\n-        holdSide: string;\\n-        openDelegateSize: string;\\n-        marginSize: string;\\n-        available: string;\\n-        locked: string;\\n-        total: string;\\n-        leverage: string;\\n-        achievedProfits: string;\\n-        openPriceAvg: string;\\n-        marginMode: string;\\n-        posMode: string;\\n-        unrealizedPL: string;\\n-        liquidationPrice: string;\\n-        keepMarginRate: string;\\n-        markPrice: string;\\n-        breakEvenPrice: string;\\n-        totalFee: string;\\n-        deductedFee: string;\\n-        cTime: string;\\n-      }[]\\n-    >\\n-  >(credential, 'GET', '/api/v2/mix/position/all-position', params);\\n+export const getAccountFundingAssets = (credential: ICredential, params?: { coin?: string }) =>\\n+  requestPrivate<ApiResponse<IUtaFundingAsset[]>>(\\n+    credential,\\n+    'GET',\\n+    '/api/v3/account/funding-assets',\\n+    params,\\n+  );\\n@@ -197 +164 @@ export const getAllPositions = (\\n- * 获取合约未完成订单列表\\n+ * 查询持仓\\n@@ -199 +166 @@ export const getAllPositions = (\\n- * 限速规则: 10次/1s (UID)\\n+ * 限速规则: 20次/1s (UID)\\n@@ -201 +168 @@ export const getAllPositions = (\\n- * https://www.bitget.com/zh-CN/api-doc/contract/trade/Get-Orders-Pending\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Get-Position\\n@@ -203 +170 @@ export const getAllPositions = (\\n-export const getFutureOrdersPending = (\\n+export const getCurrentPosition = (\\n@@ -205,11 +172 @@ export const getFutureOrdersPending = (\\n-  params: {\\n-    productType: string;\\n-    symbol?: string;\\n-    marginCoin?: string;\\n-    isPlan?: string;\\n-    orderType?: string;\\n-    startTime?: string;\\n-    endTime?: string;\\n-    pageSize?: string;\\n-    lastEndId?: string;\\n-  },\\n+  params: { category: string; symbol?: string; posSide?: string },\\n@@ -219,3 +176 @@ export const getFutureOrdersPending = (\\n-      nextFlag: boolean;\\n-      endId: string;\\n-      orderList: IFuturePendingOrder[];\\n+      list: IUtaPosition[];\\n@@ -223 +178 @@ export const getFutureOrdersPending = (\\n-  >(credential, 'GET', '/api/v2/mix/order/orders-pending', params);\\n+  >(credential, 'GET', '/api/v3/position/current-position', params);\\n@@ -226 +181 @@ export const getFutureOrdersPending = (\\n- * 获取现货未完成订单\\n+ * 查询未成交订单\\n@@ -228 +183 @@ export const getFutureOrdersPending = (\\n- * 限速规则 20次/1s (UID)\\n+ * 限速规则: 20次/1s (UID)\\n@@ -230 +185 @@ export const getFutureOrdersPending = (\\n- * https://www.bitget.com/zh-CN/api-doc/spot/trade/Get-Unfilled-Orders\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Get-Order-Pending\\n@@ -232 +187 @@ export const getFutureOrdersPending = (\\n-export const getSpotOrdersPending = (\\n+export const getUnfilledOrders = (\\n@@ -234,0 +190 @@ export const getSpotOrdersPending = (\\n+    category?: string;\\n@@ -238 +193,0 @@ export const getSpotOrdersPending = (\\n-    idLessThan?: string;\\n@@ -240,4 +195 @@ export const getSpotOrdersPending = (\\n-    orderId?: string;\\n-    tpslType?: string;\\n-    requestTime?: string;\\n-    receiveWindow?: string;\\n+    cursor?: string;\\n@@ -246,6 +198,6 @@ export const getSpotOrdersPending = (\\n-  requestPrivate<ApiResponse<ISpotPendingOrder[]>>(\\n-    credential,\\n-    'GET',\\n-    '/api/v2/spot/trade/unfilled-orders',\\n-    params,\\n-  );\\n+  requestPrivate<\\n+    ApiResponse<{\\n+      list: IUtaPendingOrder[];\\n+      cursor?: string;\\n+    }>\\n+  >(credential, 'GET', '/api/v3/trade/unfilled-orders', params);\\n@@ -256,3 +208 @@ export const getSpotOrdersPending = (\\n- * 普通用户:限速10次/秒，根据uid限频\\n- *\\n- * 跟单交易员:限速1次/秒，根据uid限频\\n+ * 限速规则: 10次/1s (UID)\\n@@ -260 +210 @@ export const getSpotOrdersPending = (\\n- * https://www.bitget.com/zh-CN/api-doc/contract/trade/Place-Order\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Place-Order\\n@@ -262 +212 @@ export const getSpotOrdersPending = (\\n-export const postFuturePlaceOrder = (\\n+export const postPlaceOrder = (\\n@@ -264,0 +215 @@ export const postFuturePlaceOrder = (\\n+    category: string;\\n@@ -266,5 +217 @@ export const postFuturePlaceOrder = (\\n-    productType: string;\\n-    marginMode: string;\\n-    marginCoin: string;\\n-    size: string;\\n-    price?: string;\\n+    qty: string;\\n@@ -272 +218,0 @@ export const postFuturePlaceOrder = (\\n-    tradeSide?: string;\\n@@ -274 +220,3 @@ export const postFuturePlaceOrder = (\\n-    force?: string;\\n+    price?: string;\\n+    timeInForce?: string;\\n+    posSide?: string;\\n@@ -277,2 +225,9 @@ export const postFuturePlaceOrder = (\\n-    presetStopSurplusPrice?: string;\\n-    presetStopLossPrice?: string;\\n+    stpMode?: string;\\n+    tpTriggerBy?: string;\\n+    slTriggerBy?: string;\\n+    takeProfit?: string;\\n+    stopLoss?: string;\\n+    tpOrderType?: string;\\n+    slOrderType?: string;\\n+    tpLimitPrice?: string;\\n+    slLimitPrice?: string;\\n@@ -284 +239 @@ export const postFuturePlaceOrder = (\\n-    '/api/v2/mix/order/place-order',\\n+    '/api/v3/trade/place-order',\\n@@ -291 +246,19 @@ export const postFuturePlaceOrder = (\\n- * 限速规则: 10次/1s\\n+ * 限速规则: 10次/1s (UID)\\n+ *\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Cancel-Order\\n+ */\\n+export const postCancelOrder = (\\n+  credential: ICredential,\\n+  params: { orderId?: string; clientOid?: string; category?: string },\\n+) =>\\n+  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\\n+    credential,\\n+    'POST',\\n+    '/api/v3/trade/cancel-order',\\n+    params,\\n+  );\\n+\\n+/**\\n+ * 改单\\n+ *\\n+ * 限速规则: 10次/1s (UID)\\n@@ -293 +266 @@ export const postFuturePlaceOrder = (\\n- * https://www.bitget.com/zh-CN/api-doc/contract/trade/Cancel-Order\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Modify-Order\\n@@ -295 +268 @@ export const postFuturePlaceOrder = (\\n-export const postFutureCancelOrder = (\\n+export const postModifyOrder = (\\n@@ -298,3 +270,0 @@ export const postFutureCancelOrder = (\\n-    symbol: string;\\n-    productType: string;\\n-    marginCoin?: string;\\n@@ -302,0 +273,5 @@ export const postFutureCancelOrder = (\\n+    qty?: string;\\n+    price?: string;\\n+    autoCancel?: string;\\n+    symbol?: string;\\n+    category?: string;\\n@@ -308 +283 @@ export const postFutureCancelOrder = (\\n-    '/api/v2/mix/order/cancel-order',\\n+    '/api/v3/trade/modify-order',\\n@@ -311,0 +287,29 @@ export const postFutureCancelOrder = (\\n+interface IWithdrawalRecord {\\n+  orderId: string;\\n+  tradeId: string;\\n+  coin: string;\\n+  clientOid: string;\\n+  type: string;\\n+  dest: string;\\n+  size: string;\\n+  status: string;\\n+  fromAddress: string;\\n+  toAddress: string;\\n+  chain: string;\\n+  cTime: string;\\n+}\\n+\\n+interface IDepositRecord {\\n+  orderId: string;\\n+  tradeId: string;\\n+  coin: string;\\n+  type: string;\\n+  dest: string;\\n+  size: string;\\n+  status: string;\\n+  fromAddress: string;\\n+  toAddress: string;\\n+  chain: string;\\n+  cTime: string;\\n+}\\n+\\n@@ -313,4 +316,0 @@ export const postFutureCancelOrder = (\\n- * 划转\\n- *\\n- * 限速规则 10次/1s (UID)\\n- *\\n@@ -318,2 +317,0 @@ export const postFutureCancelOrder = (\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Wallet-Transfer\\n@@ -341,12 +338,0 @@ export const postTransfer = (\\n- *\\n- * 限速规则 20次/1s (UID)\\n- *\\n- * 子母账户资产划转，该接口支持的划转类型包括\\n- *\\n- * 母账户转子账户（仅母账户APIKey有权限）\\n- * 子账户转母账户（仅母账户APIKey有权限）\\n- * 子账户转子账户（仅母账户APIKey有权限，并要求发起与接收方子账户归属于同一母账户）\\n- * 子账户内部划转（仅母账户APIKey有权限，并要求发起与接收方子账户为同一子账户）\\n- * 请求参数中的转入及转出账户UID须为母子/兄弟关系，且所有转账操作均只有母账户才有操作权限\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Sub-Transfer\\n@@ -376,6 +361,0 @@ export const postSubAccountTransfer = (\\n- *\\n- * 限速规则 5次/1s (UID)\\n- *\\n- * 提币接口 包括链上提币和内部提币。(需要在网页端添加地址到地址簿中)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Wallet-Withdrawal\\n@@ -407,6 +386,0 @@ export const postWithdraw = (\\n- *\\n- * 限速规则 10 次/1s (UID)\\n- *\\n- * 获取当前账号充币地址\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Deposit-Address\\n@@ -427,6 +400,0 @@ export const getDepositAddress = (credential: ICredential, params: { coin: strin\\n- *\\n- * 限速规则 10次/1s (UID)\\n- *\\n- * 获取提币记录\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Withdraw-Record\\n@@ -455,6 +422,0 @@ export const getWithdrawalRecords = (\\n- *\\n- * 限速规则 10次/1s (UID)\\n- *\\n- * 获取充币记录(不包含法币充值)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Deposit-Record\\n@@ -481,51 +442,0 @@ export const getDepositRecords = (\\n- * 获取账户现货资产\\n- *\\n- * 限速规则 10次/1s (UID)\\n- *\\n- * 获取账户币种资产\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Account-Assets\\n- */\\n-export const getSpotAssets = (credential: ICredential, params?: { coin?: string; assetType?: string }) =>\\n-  requestPrivate<\\n-    ApiResponse<\\n-      {\\n-        coin: string;\\n-        available: string;\\n-        frozen: string;\\n-        locked: string;\\n-        limitAvailable: string;\\n-        uTime: string;\\n-      }[]\\n-    >\\n-  >(credential, 'GET', '/api/v2/spot/account/assets', params);\\n-\\n-/**\\n- * 获取所有子账户现货资产\\n- *\\n- * 限速规则 10次/1s (UID)\\n- *\\n- * 获取所有子账户现货资产。仅限非代理商(非ND Broker)用户调用。\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Subaccount-Assets\\n- */\\n-export const getSubAccountSpotAssets = (credential: ICredential) =>\\n-  requestPrivate<\\n-    ApiResponse<{\\n-      userId: string;\\n-      assetsList: {\\n-        coin: string;\\n-        available: string;\\n-        limitAvailable: string;\\n-        frozen: string;\\n-        locked: string;\\n-        uTime: string;\\n-      }[];\\n-    }>\\n-  >(credential, 'GET', '/api/v2/spot/account/subaccount-assets');\\n-\\n-/**\\n- * 查询子账户列表\\n- *\\n- * 限速规则 1次/1s (UID)\\n- *\\n@@ -533,2 +443,0 @@ export const getSubAccountSpotAssets = (credential: ICredential) =>\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/common/vsubaccount/Get-Virtual-Subaccount-List\\n@@ -551,120 +459,0 @@ export const getVirtualSubAccountList = (\\n-/**\\n- * 获取财务记录\\n- *\\n- * 限速规则 20次/1s (UID)\\n- *\\n- * 获取财务记录\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/uta/account/Get-Financial-Records\\n- */\\n-export const getAccountFinancialRecord = (\\n-  credential: ICredential,\\n-  params?: {\\n-    category: string;\\n-    coin?: string;\\n-    type?: string;\\n-    startTime?: string;\\n-    endTime?: string;\\n-    limit?: string;\\n-    cursor?: string;\\n-  },\\n-) => requestPrivate<ApiResponse<unknown>>(credential, 'GET', '/api/v3/account/financial-records', params);\\n-\\n-/**\\n- * 现货下单\\n- *\\n- * 限速规则: 20次/1s (UID)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/trade/Place-Order\\n- */\\n-export const postSpotPlaceOrder = (\\n-  credential: ICredential,\\n-  params: {\\n-    symbol: string;\\n-    side: string;\\n-    orderType: string;\\n-    force?: string;\\n-    price?: string;\\n-    quantity?: string;\\n-    clientOid?: string;\\n-  },\\n-) =>\\n-  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\\n-    credential,\\n-    'POST',\\n-    '/api/v2/spot/trade/place-order',\\n-    params,\\n-  );\\n-\\n-/**\\n- * 现货撤单\\n- *\\n- * 限速规则: 20次/1s (UID)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/trade/Cancel-Order\\n- */\\n-export const postSpotCancelOrder = (\\n-  credential: ICredential,\\n-  params: {\\n-    symbol: string;\\n-    orderId?: string;\\n-    clientOid?: string;\\n-  },\\n-) =>\\n-  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\\n-    credential,\\n-    'POST',\\n-    '/api/v2/spot/trade/cancel-order',\\n-    params,\\n-  );\\n-\\n-/**\\n- * 现货改单 (Cancel-Replace)\\n- *\\n- * 限速规则: 20次/1s (UID)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/trade/cancel-replace-order\\n- */\\n-export const postSpotCancelReplaceOrder = (\\n-  credential: ICredential,\\n-  params: {\\n-    symbol: string;\\n-    orderId?: string;\\n-    clientOid?: string;\\n-    newSize?: string;\\n-    newPrice?: string;\\n-    newClientOid?: string;\\n-  },\\n-) =>\\n-  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\\n-    credential,\\n-    'POST',\\n-    '/api/v2/spot/trade/cancel-replace-order',\\n-    params,\\n-  );\\n-\\n-/**\\n- * 合约改单\\n- *\\n- * 限速规则: 20次/1s (UID)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/trade/Modify-Order\\n- */\\n-export const postFutureModifyOrder = (\\n-  credential: ICredential,\\n-  params: {\\n-    symbol: string;\\n-    productType: string;\\n-    orderId?: string;\\n-    clientOid?: string;\\n-    newSize?: string;\\n-    newPrice?: string;\\n-  },\\n-) =>\\n-  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\\n-    credential,\\n-    'POST',\\n-    '/api/v2/mix/order/modify-order',\\n-    params,\\n-  );\\n-\\n\"\n+        },\n+        {\n+          \"additions\": 99,\n+          \"deletions\": 195,\n+          \"path\": \"apps/vendor-bitget/src/api/public-api.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/api/public-api.ts b/apps/vendor-bitget/src/api/public-api.ts\\nindex 9a3f8b0c9..3101848ad 100644\\n--- a/apps/vendor-bitget/src/api/public-api.ts\\n+++ b/apps/vendor-bitget/src/api/public-api.ts\\n@@ -10 +10,2 @@ type ApiResponse<T> = {\\n-export interface IMixMarketContract {\\n+export interface IUtaInstrument {\\n+  category: string;\\n@@ -11,0 +13 @@ export interface IMixMarketContract {\\n+  isRwa?: string;\\n@@ -16,51 +18,5 @@ export interface IMixMarketContract {\\n-  feeRateUpRatio: string;\\n-  makerFeeRate: string;\\n-  takerFeeRate: string;\\n-  openCostUpRatio: string;\\n-  supportMarginCoins: string[];\\n-  minTradeNum: string;\\n-  priceEndStep: string;\\n-  volumePlace: string;\\n-  pricePlace: string;\\n-  sizeMultiplier: string;\\n-  symbolType: string;\\n-  minTradeUSDT: string;\\n-  maxSymbolOrderNum: string;\\n-  maxProductOrderNum: string;\\n-  maxPositionNum: string;\\n-  symbolStatus: string;\\n-  offTime: string;\\n-  limitOpenTime: string;\\n-  deliveryTime: string;\\n-  deliveryStartTime: string;\\n-  deliveryPeriod: string;\\n-  launchTime: string;\\n-  fundInterval: string;\\n-  minLever: string;\\n-  maxLever: string;\\n-  posLimit: string;\\n-  maintainTime: string;\\n-  openTime: string;\\n-  maxMarketOrderQty: string;\\n-  maxOrderQty: string;\\n-  isRwa: string;\\n-}\\n-\\n-export interface IMixMarketSymbol {\\n-  symbol: string;\\n-  baseCoin: string;\\n-  quoteCoin: string;\\n-}\\n-\\n-export interface IMarginCurrency {\\n-  symbol: string;\\n-  baseCoin: string;\\n-  quoteCoin: string;\\n-  maxCrossedLeverage: string;\\n-  maxIsolatedLeverage: string;\\n-  warningRiskRatio: string;\\n-  liquidationRiskRatio: string;\\n-  minTradeAmount: string;\\n-  maxTradeAmount: string;\\n-  takerFeeRate: string;\\n-  makerFeeRate: string;\\n+  feeRateUpRatio?: string;\\n+  openCostUpRatio?: string;\\n+  minOrderQty?: string;\\n+  maxOrderQty?: string;\\n+  minOrderAmount?: string;\\n@@ -69,3 +25,7 @@ export interface IMarginCurrency {\\n-  minTradeUSDT: string;\\n-  isBorrowable: boolean;\\n-  userMinBorrow: string;\\n+  quotePrecision?: string;\\n+  priceMultiplier?: string;\\n+  quantityMultiplier?: string;\\n+  symbolType?: string;\\n+  maxSymbolOrderNum?: string;\\n+  maxProductOrderNum?: string;\\n+  maxPositionNum?: string;\\n@@ -73,3 +33,19 @@ export interface IMarginCurrency {\\n-  isIsolatedBaseBorrowable: boolean;\\n-  isIsolatedQuoteBorrowable: boolean;\\n-  isCrossBorrowable: boolean;\\n+  offTime?: string;\\n+  limitOpenTime?: string;\\n+  deliveryTime?: string;\\n+  deliveryStartTime?: string;\\n+  deliveryPeriod?: string;\\n+  launchTime?: string;\\n+  fundInterval?: string;\\n+  minLeverage?: string;\\n+  maxLeverage?: string;\\n+  maintainTime?: string;\\n+  maxMarketOrderQty?: string;\\n+  isIsolatedBaseBorrowable?: string;\\n+  isIsolatedQuotedBorrowable?: string;\\n+  warningRiskRatio?: string;\\n+  liquidationRiskRatio?: string;\\n+  maxCrossedLeverage?: string;\\n+  maxIsolatedLeverage?: string;\\n+  userMinBorrow?: string;\\n+  areaSymbol?: string;\\n@@ -78 +54,2 @@ export interface IMarginCurrency {\\n-export interface IFutureMarketTicker {\\n+export interface IUtaTicker {\\n+  category: string;\\n@@ -80,10 +57,18 @@ export interface IFutureMarketTicker {\\n-  productType: string;\\n-  lastPr: string;\\n-  askPr: string;\\n-  askSz: string;\\n-  bidPr: string;\\n-  bidSz: string;\\n-  fundingRate: string;\\n-  holdingAmount: string;\\n-  high24h?: string;\\n-  low24h?: string;\\n+  lastPrice: string;\\n+  openPrice24h: string;\\n+  highPrice24h: string;\\n+  lowPrice24h: string;\\n+  ask1Price: string;\\n+  bid1Price: string;\\n+  bid1Size: string;\\n+  ask1Size: string;\\n+  price24hPcnt: string;\\n+  volume24h: string;\\n+  turnover24h: string;\\n+  indexPrice?: string;\\n+  markPrice?: string;\\n+  fundingRate?: string;\\n+  openInterest?: string;\\n+  deliveryStartTime?: string;\\n+  deliveryTime?: string;\\n+  deliveryStatus?: string;\\n@@ -93 +78 @@ export interface IFutureMarketTicker {\\n-export interface IFundingTimeInfo {\\n+export interface IUtaOpenInterestRow {\\n@@ -95,3 +80 @@ export interface IFundingTimeInfo {\\n-  productType: string;\\n-  nextFundingTime: string;\\n-  ratePeriod: string;\\n+  openInterest: string;\\n@@ -100 +83 @@ export interface IFundingTimeInfo {\\n-export interface IHistoricalFundingRate {\\n+export interface IUtaCurrentFundingRate {\\n@@ -102 +84,0 @@ export interface IHistoricalFundingRate {\\n-  productType: string;\\n@@ -104,2 +86,4 @@ export interface IHistoricalFundingRate {\\n-  fundingTime: string;\\n-  ratePeriod: string;\\n+  fundingRateInterval: string;\\n+  nextUpdate: string;\\n+  minFundingRate: string;\\n+  maxFundingRate: string;\\n@@ -108,34 +92 @@ export interface IHistoricalFundingRate {\\n-/**\\n- * 获取合约信息\\n- *\\n- * 20次/S 根据ip限频\\n- *\\n- * 获取合约详情信息。\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-All-Symbols-Contracts\\n- */\\n-export const getMarketContracts = (params: {\\n-  symbol?: string;\\n-  productType: string;\\n-}): Promise<ApiResponse<IMixMarketContract[]>> =>\\n-  requestPublic<ApiResponse<IMixMarketContract[]>>('GET', '/api/v2/mix/market/contracts', params);\\n-\\n-/**\\n- * 获取支持杠杆的所有交易对\\n- * 限速规则 10次/1s (IP)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/margin/common/support-currencies\\n- */\\n-export const getMarginCurrencies = (): Promise<ApiResponse<IMarginCurrency[]>> =>\\n-  requestPublic<ApiResponse<IMarginCurrency[]>>('GET', '/api/v2/margin/currencies');\\n-\\n-/**\\n- * 获取单个交易对行情\\n- *\\n- * 限速规则: 20次/1s (IP)\\n- *\\n- * 获取指定产品类型下，单个交易对的行情数据\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-Ticker\\n- */\\n-export const getFutureMarketTicker = (params: {\\n+export interface IUtaHistoricalFundingRate {\\n@@ -143,3 +94,3 @@ export const getFutureMarketTicker = (params: {\\n-  productType: string;\\n-}): Promise<ApiResponse<IFutureMarketTicker>> =>\\n-  requestPublic<ApiResponse<IFutureMarketTicker>>('GET', '/api/v2/mix/market/ticker', params);\\n+  fundingRate: string;\\n+  fundingRateTimestamp: string;\\n+}\\n@@ -148 +99 @@ export const getFutureMarketTicker = (params: {\\n- * 获取全部交易对行情\\n+ * 获取交易产品\\n@@ -152,3 +103 @@ export const getFutureMarketTicker = (params: {\\n- * 获取指定产品类型下，全部交易对的行情数据\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-All-Symbol-Ticker\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Instruments\\n@@ -156,4 +105,2 @@ export const getFutureMarketTicker = (params: {\\n-export const getFutureMarketTickers = (params: {\\n-  productType: string;\\n-}): Promise<ApiResponse<IFutureMarketTicker[]>> =>\\n-  requestPublic<ApiResponse<IFutureMarketTicker[]>>('GET', '/api/v2/mix/market/tickers', params);\\n+export const getInstruments = (params: { category: string; symbol?: string }) =>\\n+  requestPublic<ApiResponse<IUtaInstrument[]>>('GET', '/api/v3/market/instruments', params);\\n@@ -162 +109 @@ export const getFutureMarketTickers = (params: {\\n- * 获取平台总持仓量\\n+ * 获取行情 Tickers\\n@@ -166,3 +113 @@ export const getFutureMarketTickers = (params: {\\n- * 获取某交易对在平台的总持仓量\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-Open-Interest\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Tickers\\n@@ -170,9 +115,2 @@ export const getFutureMarketTickers = (params: {\\n-export const getOpenInterest = (params: {\\n-  symbol: string;\\n-  productType: string;\\n-}): Promise<ApiResponse<{ symbol: string; amount: string }[]>> =>\\n-  requestPublic<ApiResponse<{ symbol: string; amount: string }[]>>(\\n-    'GET',\\n-    '/api/v2/mix/market/open-interest',\\n-    params,\\n-  );\\n+export const getTickers = (params: { category: string; symbol?: string }) =>\\n+  requestPublic<ApiResponse<IUtaTicker[]>>('GET', '/api/v3/market/tickers', params);\\n@@ -181 +119 @@ export const getOpenInterest = (params: {\\n- * 获取下次资金费结算时间\\n+ * 获取持仓量\\n@@ -185,3 +123 @@ export const getOpenInterest = (params: {\\n- * 获取合约下一次的结算时间以及该合约的结算周期\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-Symbol-Next-Funding-Time\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Get-Open-Interest\\n@@ -189,5 +125,2 @@ export const getOpenInterest = (params: {\\n-export const getNextFundingTime = (params: {\\n-  symbol: string;\\n-  productType: string;\\n-}): Promise<ApiResponse<IFundingTimeInfo[]>> =>\\n-  requestPublicWithFlowControl<ApiResponse<IFundingTimeInfo[]>>(\\n+export const getOpenInterestV3 = (params: { category: string; symbol?: string }) =>\\n+  requestPublic<ApiResponse<{ list: IUtaOpenInterestRow[]; ts: string }>>(\\n@@ -195,2 +128 @@ export const getNextFundingTime = (params: {\\n-    '/api/v2/mix/market/funding-time',\\n-    { period: 1000, limit: 20 },\\n+    '/api/v3/market/open-interest',\\n@@ -201 +133 @@ export const getNextFundingTime = (params: {\\n- * 获取历史资金费率\\n+ * 获取当前资金费率\\n@@ -205,3 +137 @@ export const getNextFundingTime = (params: {\\n- * 获取合约的历史资金费率\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-History-Funding-Rate\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Get-Current-Funding-Rate\\n@@ -209,12 +139,2 @@ export const getNextFundingTime = (params: {\\n-export const getHistoricalFundingRate = (params: {\\n-  symbol: string;\\n-  productType: string;\\n-  pageSize?: string;\\n-  pageNo?: string;\\n-}): Promise<ApiResponse<IHistoricalFundingRate[]>> =>\\n-  requestPublicWithFlowControl<ApiResponse<IHistoricalFundingRate[]>>(\\n-    'GET',\\n-    '/api/v2/mix/market/history-fund-rate',\\n-    { period: 1000, limit: 20 },\\n-    params,\\n-  );\\n+export const getCurrentFundingRate = (params: { symbol: string }) =>\\n+  requestPublic<ApiResponse<IUtaCurrentFundingRate[]>>('GET', '/api/v3/market/current-fund-rate', params);\\n@@ -223 +143 @@ export const getHistoricalFundingRate = (params: {\\n- * 获取合约 K 线数据\\n+ * 获取历史资金费率\\n@@ -227 +147 @@ export const getHistoricalFundingRate = (params: {\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-Candle-Data\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Get-History-Funding-Rate\\n@@ -229 +149,2 @@ export const getHistoricalFundingRate = (params: {\\n-export const getMixCandles = (params: {\\n+export const getHistoryFundingRate = (params: {\\n+  category: string;\\n@@ -231,4 +152 @@ export const getMixCandles = (params: {\\n-  productType: string;\\n-  granularity: string;\\n-  startTime?: string;\\n-  endTime?: string;\\n+  cursor?: string;\\n@@ -236,2 +154,2 @@ export const getMixCandles = (params: {\\n-}): Promise<ApiResponse<[string, string, string, string, string, string, string][]>> =>\\n-  requestPublic<ApiResponse<[string, string, string, string, string, string, string][]>>(\\n+}) =>\\n+  requestPublicWithFlowControl<ApiResponse<{ resultList: IUtaHistoricalFundingRate[] }>>(\\n@@ -239 +157,2 @@ export const getMixCandles = (params: {\\n-    '/api/v2/mix/market/candles',\\n+    '/api/v3/market/history-fund-rate',\\n+    { period: 1000, limit: 20 },\\n@@ -244 +163 @@ export const getMixCandles = (params: {\\n- * 获取现货 K 线数据\\n+ * 获取历史 K 线\\n@@ -248 +167 @@ export const getMixCandles = (params: {\\n- * https://www.bitget.com/zh-CN/api-doc/spot/market/Get-Candle-Data\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Get-History-Candle-Data\\n@@ -250 +169,2 @@ export const getMixCandles = (params: {\\n-export const getSpotCandles = (params: {\\n+export const getHistoryCandles = (params: {\\n+  category: string;\\n@@ -252 +172 @@ export const getSpotCandles = (params: {\\n-  granularity: string;\\n+  interval: string;\\n@@ -254,0 +175 @@ export const getSpotCandles = (params: {\\n+  type?: string;\\n@@ -256 +177 @@ export const getSpotCandles = (params: {\\n-}): Promise<ApiResponse<[string, string, string, string, string, string, string][]>> =>\\n+}) =>\\n@@ -259 +180 @@ export const getSpotCandles = (params: {\\n-    '/api/v2/spot/market/candles',\\n+    '/api/v3/market/history-candles',\\n@@ -262,17 +182,0 @@ export const getSpotCandles = (params: {\\n-\\n-export interface ISpotSymbol {\\n-  symbol: string;\\n-  baseCoin: string;\\n-  quoteCoin: string;\\n-  status: string;\\n-}\\n-\\n-/**\\n- * 获取所有现货交易对\\n- *\\n- * 限速规则: 20次/1s (IP)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/market/Get-Symbols\\n- */\\n-export const getSpotSymbols = (): Promise<ApiResponse<ISpotSymbol[]>> =>\\n-  requestPublic<ApiResponse<ISpotSymbol[]>>('GET', '/api/v2/spot/public/symbols');\\n\"\n+        },\n+        {\n+          \"additions\": 59,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-bitget/src/services/accounts/account.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/accounts/account.ts b/apps/vendor-bitget/src/services/accounts/account.ts\\nnew file mode 100644\\nindex 000000000..27c6fca03\\n--- /dev/null\\n+++ b/apps/vendor-bitget/src/services/accounts/account.ts\\n@@ -0,0 +1,59 @@\\n+import { IPosition, makeSpotPosition } from '@yuants/data-account';\\n+import { encodePath } from '@yuants/utils';\\n+import { getAccountAssets, getCurrentPosition, IUtaPosition } from '../../api/private-api';\\n+import { getTickers } from '../../api/public-api';\\n+import { ICredential } from '../../api/types';\\n+\\n+const mapDerivativePosition = (position: IUtaPosition): IPosition => ({\\n+  position_id: `${position.symbol}-${position.posSide}`,\\n+  datasource_id: 'BITGET',\\n+  product_id: encodePath('BITGET', position.category, position.symbol),\\n+  direction: position.posSide === 'long' ? 'LONG' : 'SHORT',\\n+  volume: +position.total,\\n+  free_volume: +(position.available ?? 0),\\n+  position_price: +position.avgPrice,\\n+  closable_price: +(position.markPrice ?? 0),\\n+  floating_profit: +(position.unrealisedPnl ?? 0),\\n+  valuation: +position.total * +(position.markPrice ?? 0),\\n+});\\n+\\n+export const getAccountInfo = async (credential: ICredential): Promise<IPosition[]> => {\\n+  const categories = ['USDT-FUTURES', 'COIN-FUTURES'];\\n+  const [assetsRes, positionsResList, spotTickersRes] = await Promise.all([\\n+    getAccountAssets(credential),\\n+    Promise.all(categories.map((category) => getCurrentPosition(credential, { category }))),\\n+    getTickers({ category: 'SPOT' }),\\n+  ]);\\n+\\n+  if (assetsRes.msg !== 'success') {\\n+    throw new Error(assetsRes.msg);\\n+  }\\n+  if (spotTickersRes.msg !== 'success') {\\n+    throw new Error(spotTickersRes.msg);\\n+  }\\n+\\n+  const spotPriceMap = new Map<string, number>(\\n+    (spotTickersRes.data ?? []).map((ticker) => [ticker.symbol, Number(ticker.lastPrice)]),\\n+  );\\n+\\n+  const derivativePositions = positionsResList.flatMap((res, idx) => {\\n+    if (res.msg !== 'success') {\\n+      throw new Error(res.msg);\\n+    }\\n+    const category = categories[idx];\\n+    return (res.data?.list ?? []).map((position) => mapDerivativePosition({ ...position, category }));\\n+  });\\n+\\n+  const spotPositions =\\n+    assetsRes.data?.assets?.map((asset) =>\\n+      makeSpotPosition({\\n+        position_id: asset.coin,\\n+        product_id: encodePath('BITGET', 'SPOT', `${asset.coin}USDT`),\\n+        volume: +asset.available,\\n+        free_volume: +asset.available,\\n+        closable_price: spotPriceMap.get(`${asset.coin}USDT`) ?? 1,\\n+      }),\\n+    ) ?? [];\\n+\\n+  return [...derivativePositions, ...spotPositions];\\n+};\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 64,\n+          \"path\": \"apps/vendor-bitget/src/services/accounts/futures.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/accounts/futures.ts b/apps/vendor-bitget/src/services/accounts/futures.ts\\ndeleted file mode 100644\\nindex 957cd06b1..000000000\\n--- a/apps/vendor-bitget/src/services/accounts/futures.ts\\n+++ /dev/null\\n@@ -1,64 +0,0 @@\\n-import { IPosition } from '@yuants/data-account';\\n-import { IOrder } from '@yuants/data-order';\\n-import { encodePath } from '@yuants/utils';\\n-import { getAllPositions, getFutureOrdersPending } from '../../api/private-api';\\n-import { ICredential } from '../../api/types';\\n-\\n-const mapPosition = (position: any): IPosition => ({\\n-  position_id: `${position.symbol}-${position.holdSide}`,\\n-  datasource_id: 'BITGET',\\n-  product_id: encodePath('BITGET', 'USDT-FUTURES', position.symbol),\\n-  direction: position.holdSide === 'long' ? 'LONG' : 'SHORT',\\n-  volume: +position.total,\\n-  free_volume: +position.available,\\n-  position_price: +position.openPriceAvg,\\n-  closable_price: +position.markPrice,\\n-  floating_profit: +position.unrealizedPL,\\n-  valuation: +position.total * +position.markPrice,\\n-});\\n-\\n-const mapOrderDirection = (order: any) => {\\n-  const side = order.side;\\n-  const tradeSide = order.tradeSide ?? order.posSide;\\n-  if (tradeSide === 'open') {\\n-    return side === 'buy' ? 'OPEN_LONG' : 'OPEN_SHORT';\\n-  }\\n-  if (tradeSide === 'close') {\\n-    return side === 'buy' ? 'CLOSE_SHORT' : 'CLOSE_LONG';\\n-  }\\n-  if (tradeSide === 'long') {\\n-    return side === 'buy' ? 'OPEN_LONG' : 'CLOSE_LONG';\\n-  }\\n-  if (tradeSide === 'short') {\\n-    return side === 'buy' ? 'CLOSE_SHORT' : 'OPEN_SHORT';\\n-  }\\n-  return side === 'buy' ? 'OPEN_LONG' : 'OPEN_SHORT';\\n-};\\n-\\n-export const getFuturesAccountInfo = async (credential: ICredential) => {\\n-  const positionsRes = await getAllPositions(credential, { productType: 'USDT-FUTURES', marginCoin: 'USDT' });\\n-  if (positionsRes.msg !== 'success') {\\n-    throw new Error(positionsRes.msg);\\n-  }\\n-  return positionsRes.data.map(mapPosition);\\n-};\\n-\\n-export const listFuturePendingOrders = async (credential: ICredential): Promise<IOrder[]> => {\\n-  const res = await getFutureOrdersPending(credential, { productType: 'USDT-FUTURES', marginCoin: 'USDT' });\\n-  if (res.msg !== 'success') {\\n-    throw new Error(res.msg);\\n-  }\\n-  const list = res.data?.orderList ?? [];\\n-  return list.map((order: any) => ({\\n-    order_id: order.orderId,\\n-    account_id: '',\\n-    product_id: encodePath('BITGET', order.productType ?? 'USDT-FUTURES', order.symbol),\\n-    submit_at: +(order.cTime ?? order.createdTime ?? order.uTime ?? Date.now()),\\n-    order_type: order.orderType === 'limit' ? 'LIMIT' : order.orderType === 'market' ? 'MARKET' : 'UNKNOWN',\\n-    order_direction: mapOrderDirection(order),\\n-    volume: +order.size,\\n-    traded_volume: +(order.filledQty ?? 0),\\n-    price: order.price ? +order.price : undefined,\\n-    traded_price: order.priceAvg ? +order.priceAvg : undefined,\\n-  }));\\n-};\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 8,\n+          \"path\": \"apps/vendor-bitget/src/services/accounts/profile.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/accounts/profile.ts b/apps/vendor-bitget/src/services/accounts/profile.ts\\nindex e87037066..e70f94f70 100644\\n--- a/apps/vendor-bitget/src/services/accounts/profile.ts\\n+++ b/apps/vendor-bitget/src/services/accounts/profile.ts\\n@@ -3 +3 @@ import { getDefaultCredential } from '../../api/client';\\n-import { getAccountInfo } from '../../api/private-api';\\n+import { getAccountSettings } from '../../api/private-api';\\n@@ -14 +14 @@ const fetchAccountProfile = async (credential: ICredential): Promise<IAccountPro\\n-  const res = await getAccountInfo(credential);\\n+  const res = await getAccountSettings(credential);\\n@@ -16 +16 @@ const fetchAccountProfile = async (credential: ICredential): Promise<IAccountPro\\n-    throw new Error(`Bitget getAccountInfo failed: ${res.code} ${res.msg}`);\\n+    throw new Error(`Bitget getAccountSettings failed: ${res.code} ${res.msg}`);\\n@@ -19,2 +19,2 @@ const fetchAccountProfile = async (credential: ICredential): Promise<IAccountPro\\n-  if (!data?.userId) {\\n-    throw new Error(`Bitget getAccountInfo returned invalid payload: ${JSON.stringify(data)}`);\\n+  if (!data?.uid) {\\n+    throw new Error(`Bitget getAccountSettings returned invalid payload: ${JSON.stringify(data)}`);\\n@@ -22,3 +22,3 @@ const fetchAccountProfile = async (credential: ICredential): Promise<IAccountPro\\n-  const uid = data.userId;\\n-  const parentId = `${data.parentId ?? data.userId}`;\\n-  return { uid, parentId, isMainAccount: uid === parentId };\\n+  const uid = data.uid;\\n+  const parentId = uid;\\n+  return { uid, parentId, isMainAccount: true };\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 57,\n+          \"path\": \"apps/vendor-bitget/src/services/accounts/spot.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/accounts/spot.ts b/apps/vendor-bitget/src/services/accounts/spot.ts\\ndeleted file mode 100644\\nindex bb1de5316..000000000\\n--- a/apps/vendor-bitget/src/services/accounts/spot.ts\\n+++ /dev/null\\n@@ -1,57 +0,0 @@\\n-import { makeSpotPosition } from '@yuants/data-account';\\n-import { IOrder } from '@yuants/data-order';\\n-import { encodePath } from '@yuants/utils';\\n-import { getSpotAssets, getSpotOrdersPending } from '../../api/private-api';\\n-import { ICredential } from '../../api/types';\\n-\\n-const mapSpotOrders = (data: any): any[] => {\\n-  if (!data) return [];\\n-  if (Array.isArray(data)) return data;\\n-  if (Array.isArray(data.orderList)) return data.orderList;\\n-  if (Array.isArray(data.orders)) return data.orders;\\n-  if (Array.isArray(data.resultList)) return data.resultList;\\n-  return [];\\n-};\\n-\\n-const mapSpotOrderDirection = (side?: string) => (side === 'sell' ? 'OPEN_SHORT' : 'OPEN_LONG');\\n-\\n-export const getSpotAccountInfo = async (credential: ICredential) => {\\n-  const res = await getSpotAssets(credential);\\n-  if (res.msg !== 'success') {\\n-    throw new Error(res.msg);\\n-  }\\n-  return res.data.map((v) => {\\n-    return makeSpotPosition({\\n-      position_id: v.coin,\\n-      product_id: encodePath('BITGET', 'SPOT', `${v.coin}-USDT`),\\n-      volume: +v.available,\\n-      free_volume: +v.available,\\n-      closable_price: 1, // TODO: use real price\\n-    });\\n-  });\\n-};\\n-\\n-export const listSpotPendingOrders = async (credential: ICredential): Promise<IOrder[]> => {\\n-  const res = await getSpotOrdersPending(credential);\\n-  if (res.msg !== 'success') {\\n-    throw new Error(res.msg);\\n-  }\\n-  const list = mapSpotOrders(res.data);\\n-  return list\\n-    .map((order) => {\\n-      const symbol = order.symbol ?? order.instId;\\n-      if (!symbol) return null;\\n-      return {\\n-        order_id: order.orderId ?? order.clientOid,\\n-        account_id: '',\\n-        product_id: encodePath('BITGET', 'SPOT', symbol),\\n-        order_type: order.orderType === 'market' ? 'MARKET' : 'LIMIT',\\n-        order_direction: mapSpotOrderDirection(order.side),\\n-        volume: +(order.size ?? order.quantity ?? order.baseSz ?? order.baseAmount ?? 0),\\n-        traded_volume: +(order.fillSz ?? order.filledQty ?? order.baseFilled ?? 0),\\n-        price: order.price ? +order.price : undefined,\\n-        submit_at: +(order.cTime ?? order.createTime ?? order.createdTime ?? Date.now()),\\n-      };\\n-    })\\n-    .filter((order): order is NonNullable<typeof order> => Boolean(order));\\n-};\\n\"\n+        },\n+        {\n+          \"additions\": 4,\n+          \"deletions\": 18,\n+          \"path\": \"apps/vendor-bitget/src/services/exchange.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/exchange.ts b/apps/vendor-bitget/src/services/exchange.ts\\nindex d6487220d..e2b19e2a0 100644\\n--- a/apps/vendor-bitget/src/services/exchange.ts\\n+++ b/apps/vendor-bitget/src/services/exchange.ts\\n@@ -7 +6,0 @@ import { ICredential } from '../api/types';\\n-import { getFuturesAccountInfo as getFuturesPositions } from './accounts/futures';\\n@@ -9 +8 @@ import { resolveAccountProfile } from './accounts/profile';\\n-import { getSpotAccountInfo as getSpotPositions } from './accounts/spot';\\n+import { getAccountInfo } from './accounts/account';\\n@@ -37,6 +36 @@ provideExchangeServices<ICredential>(terminal, {\\n-    const profile = await resolveAccountProfile(credential);\\n-    const [futuresPositions, spotPositions] = await Promise.all([\\n-      getFuturesPositions(credential),\\n-      getSpotPositions(credential),\\n-    ]);\\n-    return [...futuresPositions, ...spotPositions];\\n+    return getAccountInfo(credential);\\n@@ -56,10 +50,2 @@ provideExchangeServices<ICredential>(terminal, {\\n-    const profile = await resolveAccountProfile(credential);\\n-    if (instType === 'SPOT') {\\n-      const positions = await getSpotPositions(credential);\\n-      return positions.filter((position) => position.product_id === product_id);\\n-    }\\n-    if (instType === 'USDT-FUTURES') {\\n-      const positions = await getFuturesPositions(credential);\\n-      return positions.filter((position) => position.product_id === product_id);\\n-    }\\n-    throw new Error(`Unsupported instType: ${instType}`);\\n+    const positions = await getAccountInfo(credential);\\n+    return positions.filter((position) => position.product_id === product_id);\\n\"\n+        },\n+        {\n+          \"additions\": 15,\n+          \"deletions\": 14,\n+          \"path\": \"apps/vendor-bitget/src/services/markets/interest-rate.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/markets/interest-rate.ts b/apps/vendor-bitget/src/services/markets/interest-rate.ts\\nindex bfe937852..9ed0ce9b3 100644\\n--- a/apps/vendor-bitget/src/services/markets/interest-rate.ts\\n+++ b/apps/vendor-bitget/src/services/markets/interest-rate.ts\\n@@ -9 +9 @@ import { getSpotCrossInterestRate } from '../../api/private-api';\\n-import { IHistoricalFundingRate, getHistoricalFundingRate, getSpotSymbols } from '../../api/public-api';\\n+import { IUtaHistoricalFundingRate, getHistoryFundingRate, getInstruments } from '../../api/public-api';\\n@@ -13 +13 @@ const spotSymbolCache = createCache(\\n-    const res = await getSpotSymbols();\\n+    const res = await getInstruments({ category: 'SPOT' });\\n@@ -15 +15 @@ const spotSymbolCache = createCache(\\n-      throw new Error(`Bitget getSpotSymbols failed: ${res.code} ${res.msg}`);\\n+      throw new Error(`Bitget getInstruments failed: ${res.code} ${res.msg}`);\\n@@ -17 +17 @@ const spotSymbolCache = createCache(\\n-    return res.data.reduce((acc, v) => {\\n+    return res.data.reduce((acc: Record<string, { baseCoin: string; quoteCoin: string }>, v) => {\\n@@ -20 +20 @@ const spotSymbolCache = createCache(\\n-    }, {} as Record<string, { baseCoin: string; quoteCoin: string }>);\\n+    }, {});\\n@@ -36 +36,2 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-        const res = await getHistoricalFundingRate({\\n+        const res = await getHistoryFundingRate({\\n+          category: 'USDT-FUTURES',\\n@@ -38,3 +39,2 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-          productType: instType,\\n-          pageSize: '100',\\n-          pageNo: '' + current_page,\\n+          limit: '100',\\n+          cursor: '' + current_page,\\n@@ -45,3 +45,4 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-        if (res.data.length === 0) break;\\n-        yield res.data.map(\\n-          (v: IHistoricalFundingRate): IInterestRate => ({\\n+        const list = res.data?.resultList ?? [];\\n+        if (list.length === 0) break;\\n+        yield list.map(\\n+          (v: IUtaHistoricalFundingRate): IInterestRate => ({\\n@@ -51 +52 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-            created_at: formatTime(+v.fundingTime),\\n+            created_at: formatTime(+v.fundingRateTimestamp),\\n@@ -57 +58 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-        if (+res.data[res.data.length - 1].fundingTime <= started_at) break;\\n+        if (+list[list.length - 1].fundingRateTimestamp <= started_at) break;\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 23,\n+          \"path\": \"apps/vendor-bitget/src/services/markets/ohlc.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/markets/ohlc.ts b/apps/vendor-bitget/src/services/markets/ohlc.ts\\nindex a12d2da25..e93ac84b2 100644\\n--- a/apps/vendor-bitget/src/services/markets/ohlc.ts\\n+++ b/apps/vendor-bitget/src/services/markets/ohlc.ts\\n@@ -6 +6 @@ import { firstValueFrom, timer } from 'rxjs';\\n-import { getMixCandles, getSpotCandles } from '../../api/public-api';\\n+import { getHistoryCandles } from '../../api/public-api';\\n@@ -41,22 +41,9 @@ createSeriesProvider<IOHLC>(Terminal.fromNodeEnv(), {\\n-      if (instType === 'USDT-FUTURES') {\\n-        const res = await getMixCandles({\\n-          symbol: instId,\\n-          productType: instType,\\n-          granularity,\\n-          endTime: '' + currentEndTime,\\n-          limit: '100',\\n-        });\\n-        if (res.msg !== 'success') throw new Error(`Bitget get mix candles failed: ${res.code} ${res.msg}`);\\n-        candles = res.data;\\n-      } else if (instType === 'SPOT') {\\n-        const res = await getSpotCandles({\\n-          symbol: instId,\\n-          granularity,\\n-          endTime: '' + currentEndTime,\\n-          limit: '100',\\n-        });\\n-        if (res.msg !== 'success') throw new Error(`Bitget get spot candles failed: ${res.code} ${res.msg}`);\\n-        candles = res.data;\\n-      } else {\\n-        throw new Error(`Unsupported product type: ${instType}`);\\n-      }\\n+      const res = await getHistoryCandles({\\n+        category: instType,\\n+        symbol: instId,\\n+        interval: granularity,\\n+        endTime: '' + currentEndTime,\\n+        limit: '100',\\n+      });\\n+      if (res.msg !== 'success') throw new Error(`Bitget get history candles failed: ${res.code} ${res.msg}`);\\n+      candles = res.data;\\n\"\n+        },\n+        {\n+          \"additions\": 47,\n+          \"deletions\": 42,\n+          \"path\": \"apps/vendor-bitget/src/services/markets/product.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/markets/product.ts b/apps/vendor-bitget/src/services/markets/product.ts\\nindex 1a59f6074..26120b1f4 100644\\n--- a/apps/vendor-bitget/src/services/markets/product.ts\\n+++ b/apps/vendor-bitget/src/services/markets/product.ts\\n@@ -2,7 +2,2 @@ import { IProduct } from '@yuants/data-product';\\n-import { Terminal } from '@yuants/protocol';\\n-import { createSQLWriter } from '@yuants/sql';\\n-import { encodePath, formatTime } from '@yuants/utils';\\n-import { Subject, defer, repeat, retry, shareReplay, tap } from 'rxjs';\\n-import { IMixMarketContract, getMarketContracts } from '../../api/public-api';\\n-\\n-const product$ = new Subject<IProduct>();\\n+import { encodePath } from '@yuants/utils';\\n+import { IUtaInstrument, getInstruments } from '../../api/public-api';\\n@@ -13 +8 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-  const usdtFuturesProductRes = await getMarketContracts({ productType: 'USDT-FUTURES' });\\n+  const usdtFuturesProductRes = await getInstruments({ category: 'USDT-FUTURES' });\\n@@ -18 +13 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-  const coinFuturesProductRes = await getMarketContracts({ productType: 'COIN-FUTURES' });\\n+  const coinFuturesProductRes = await getInstruments({ category: 'COIN-FUTURES' });\\n@@ -21,0 +17,4 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n+  const spotProductRes = await getInstruments({ category: 'SPOT' });\\n+  if (spotProductRes.msg !== 'success') {\\n+    throw new Error(spotProductRes.msg);\\n+  }\\n@@ -23 +22 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-    (product: IMixMarketContract): IProduct => ({\\n+    (product: IUtaInstrument): IProduct => ({\\n@@ -28,2 +27,4 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      price_step: Number(`1e-${product.pricePlace}`),\\n-      volume_step: +product.sizeMultiplier,\\n+      price_step: Number(`1e-${product.pricePrecision}`),\\n+      volume_step: product.quantityMultiplier\\n+        ? +product.quantityMultiplier\\n+        : Number(`1e-${product.quantityPrecision}`),\\n@@ -33 +34 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      margin_rate: 1 / Number(product.maxLever),\\n+      margin_rate: product.maxLeverage ? 1 / Number(product.maxLeverage) : 0,\\n@@ -45 +46 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-    (product: IMixMarketContract): IProduct => ({\\n+    (product: IUtaInstrument): IProduct => ({\\n@@ -50,2 +51,4 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      price_step: Number(`1e-${product.pricePlace}`),\\n-      volume_step: +product.sizeMultiplier,\\n+      price_step: Number(`1e-${product.pricePrecision}`),\\n+      volume_step: product.quantityMultiplier\\n+        ? +product.quantityMultiplier\\n+        : Number(`1e-${product.quantityPrecision}`),\\n@@ -55 +58 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      margin_rate: 1 / Number(product.maxLever),\\n+      margin_rate: product.maxLeverage ? 1 / Number(product.maxLeverage) : 0,\\n@@ -62 +65 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      market_id: 'BITGET/USDT-FUTURES',\\n+      market_id: 'BITGET/COIN-FUTURES',\\n@@ -67,23 +70,24 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-  return [...usdtFutures, ...coinFutures];\\n-};\\n-\\n-const futureProducts$ = defer(listProducts).pipe(\\n-  tap((list) => {\\n-    list.forEach((product) => product$.next(product));\\n-  }),\\n-  tap({\\n-    error: (e) => {\\n-      console.error(formatTime(Date.now()), 'FuturesProducts', e);\\n-    },\\n-  }),\\n-  retry({ delay: 5000 }),\\n-  repeat({ delay: 86400_000 }),\\n-  shareReplay(1),\\n-);\\n-\\n-createSQLWriter<IProduct>(Terminal.fromNodeEnv(), {\\n-  data$: product$,\\n-  tableName: 'product',\\n-  conflictKeys: ['datasource_id', 'product_id'],\\n-  writeInterval: 1000,\\n-});\\n+  const spots = spotProductRes.data.map(\\n+    (product: IUtaInstrument): IProduct => ({\\n+      product_id: encodePath('BITGET', 'SPOT', product.symbol),\\n+      datasource_id: 'BITGET',\\n+      quote_currency: product.quoteCoin,\\n+      base_currency: product.baseCoin,\\n+      price_step: Number(`1e-${product.pricePrecision}`),\\n+      volume_step: product.quantityMultiplier\\n+        ? +product.quantityMultiplier\\n+        : Number(`1e-${product.quantityPrecision}`),\\n+      name: '',\\n+      value_scale: 1,\\n+      value_scale_unit: '',\\n+      margin_rate: 0,\\n+      value_based_cost: 0,\\n+      volume_based_cost: 0,\\n+      max_position: 0,\\n+      max_volume: 0,\\n+      allow_long: true,\\n+      allow_short: false,\\n+      market_id: 'BITGET/SPOT',\\n+      no_interest_rate: false,\\n+    }),\\n+  );\\n@@ -91 +95,2 @@ createSQLWriter<IProduct>(Terminal.fromNodeEnv(), {\\n-futureProducts$.subscribe();\\n+  return [...usdtFutures, ...coinFutures, ...spots];\\n+};\\n\"\n+        },\n+        {\n+          \"additions\": 21,\n+          \"deletions\": 25,\n+          \"path\": \"apps/vendor-bitget/src/services/markets/quote.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/markets/quote.ts b/apps/vendor-bitget/src/services/markets/quote.ts\\nindex 77ddd221a..7c7958dad 100644\\n--- a/apps/vendor-bitget/src/services/markets/quote.ts\\n+++ b/apps/vendor-bitget/src/services/markets/quote.ts\\n@@ -6,6 +6 @@ import { defer, groupBy, map, merge, mergeMap, repeat, retry, scan, shareReplay,\\n-import {\\n-  IFundingTimeInfo,\\n-  IFutureMarketTicker,\\n-  getFutureMarketTickers,\\n-  getNextFundingTime,\\n-} from '../../api/public-api';\\n+import { IUtaCurrentFundingRate, IUtaTicker, getCurrentFundingRate, getTickers } from '../../api/public-api';\\n@@ -14 +9 @@ import { createCyclicTask } from './utils/cyclic-task';\\n-const usdtFuturesTickers$ = defer(() => getFutureMarketTickers({ productType: 'USDT-FUTURES' })).pipe(\\n+const usdtFuturesTickers$ = defer(() => getTickers({ category: 'USDT-FUTURES' })).pipe(\\n@@ -20 +15 @@ const usdtFuturesTickers$ = defer(() => getFutureMarketTickers({ productType: 'U\\n-const coinFuturesTickers$ = defer(() => getFutureMarketTickers({ productType: 'COIN-FUTURES' })).pipe(\\n+const coinFuturesTickers$ = defer(() => getTickers({ category: 'COIN-FUTURES' })).pipe(\\n@@ -28 +23 @@ const mapTickerToQuote =\\n-  (ticker: IFutureMarketTicker): Partial<IQuote> => ({\\n+  (ticker: IUtaTicker): Partial<IQuote> => ({\\n@@ -30,9 +25,9 @@ const mapTickerToQuote =\\n-    product_id: encodePath(instType, ticker.symbol),\\n-    last_price: ticker.lastPr,\\n-    ask_price: ticker.askPr,\\n-    ask_volume: ticker.askSz,\\n-    bid_price: ticker.bidPr,\\n-    bid_volume: ticker.bidSz,\\n-    interest_rate_long: `${-Number(ticker.fundingRate)}`,\\n-    interest_rate_short: `${Number(ticker.fundingRate)}`,\\n-    open_interest: ticker.holdingAmount,\\n+    product_id: encodePath('BITGET', instType, ticker.symbol),\\n+    last_price: ticker.lastPrice,\\n+    ask_price: ticker.ask1Price,\\n+    ask_volume: ticker.ask1Size,\\n+    bid_price: ticker.bid1Price,\\n+    bid_volume: ticker.bid1Size,\\n+    interest_rate_long: ticker.fundingRate ? `${-Number(ticker.fundingRate)}` : undefined,\\n+    interest_rate_short: ticker.fundingRate ? `${Number(ticker.fundingRate)}` : undefined,\\n+    open_interest: ticker.openInterest,\\n@@ -97 +92 @@ createCyclicTask({\\n-    const res = await getNextFundingTime({\\n+    const res = await getCurrentFundingRate({\\n@@ -99 +93,0 @@ createCyclicTask({\\n-      productType: instType,\\n@@ -106,3 +100 @@ createCyclicTask({\\n-    console.info(formatTime(Date.now()), 'FundingTime', product_id, res.data[0].nextFundingTime);\\n-\\n-    const data: IFundingTimeInfo | undefined = res.data[0];\\n+    const data: IUtaCurrentFundingRate | undefined = res.data?.[0];\\n@@ -112,0 +105,4 @@ createCyclicTask({\\n+    console.info(formatTime(Date.now()), 'FundingTime', product_id, data.nextUpdate);\\n+\\n+    const nextUpdateTs = +data.nextUpdate;\\n+\\n@@ -116,2 +112,2 @@ createCyclicTask({\\n-      interest_rate_next_settled_at: formatTime(+data.nextFundingTime),\\n-      interest_rate_prev_settled_at: formatTime(+data.nextFundingTime - +data.ratePeriod * 3600_000),\\n+      interest_rate_next_settled_at: formatTime(nextUpdateTs),\\n+      interest_rate_prev_settled_at: formatTime(nextUpdateTs - +data.fundingRateInterval * 3600_000),\\n\"\n+        },\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 10,\n+          \"path\": \"apps/vendor-bitget/src/services/orders/cancelOrder.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/orders/cancelOrder.ts b/apps/vendor-bitget/src/services/orders/cancelOrder.ts\\nindex 6baa1613e..6694acb08 100644\\n--- a/apps/vendor-bitget/src/services/orders/cancelOrder.ts\\n+++ b/apps/vendor-bitget/src/services/orders/cancelOrder.ts\\n@@ -3 +3 @@ import { decodePath } from '@yuants/utils';\\n-import { postFutureCancelOrder, postSpotCancelOrder } from '../../api/private-api';\\n+import { postCancelOrder } from '../../api/private-api';\\n@@ -10,5 +10 @@ export const cancelOrder = async (credential: ICredential, order: IOrder) => {\\n-    const res = await postFutureCancelOrder(credential, {\\n-      symbol: instId,\\n-      productType: instType,\\n-      orderId: order.order_id,\\n-    });\\n+    const res = await postCancelOrder(credential, { orderId: order.order_id, category: 'USDT-FUTURES' });\\n@@ -22,4 +18 @@ export const cancelOrder = async (credential: ICredential, order: IOrder) => {\\n-    const res = await postSpotCancelOrder(credential, {\\n-      symbol: instId,\\n-      orderId: order.order_id,\\n-    });\\n+    const res = await postCancelOrder(credential, { orderId: order.order_id, category: 'SPOT' });\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 21,\n+          \"path\": \"apps/vendor-bitget/src/services/orders/listOrders.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/orders/listOrders.ts b/apps/vendor-bitget/src/services/orders/listOrders.ts\\nindex 5503ba9c0..242727167 100644\\n--- a/apps/vendor-bitget/src/services/orders/listOrders.ts\\n+++ b/apps/vendor-bitget/src/services/orders/listOrders.ts\\n@@ -2 +2 @@ import { IOrder } from '@yuants/data-order';\\n-import { getFutureOrdersPending, getSpotOrdersPending } from '../../api/private-api';\\n+import { getUnfilledOrders } from '../../api/private-api';\\n@@ -6,4 +6 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-  // Future\\n-  const res = await getFutureOrdersPending(credential, {\\n-    productType: 'USDT-FUTURES',\\n-  });\\n+  const res = await getUnfilledOrders(credential, { category: 'USDT-FUTURES' });\\n@@ -14 +11 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-    res.data.orderList?.map((v) => ({\\n+    res.data.list?.map((v) => ({\\n@@ -18 +15 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-      order_type: v.orderType.toUpperCase(),\\n+      order_type: v.orderType?.toUpperCase(),\\n@@ -20 +17 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-        v.tradeSide === 'open'\\n+        v.posSide === 'long'\\n@@ -23 +20 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-            : 'OPEN_SHORT'\\n+            : 'CLOSE_LONG'\\n@@ -26 +23 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-          : 'CLOSE_LONG',\\n+          : 'OPEN_SHORT',\\n@@ -28,2 +25,2 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-      volume: Number(v.size),\\n-      traded_volume: Number(v.filledQty),\\n+      volume: Number(v.qty),\\n+      traded_volume: Number(v.cumExecQty),\\n@@ -31,2 +28,2 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-      created_at: new Date(Number(v.cTime)).toISOString(),\\n-      submit_at: Number(v.cTime),\\n+      created_at: new Date(Number(v.createdTime)).toISOString(),\\n+      submit_at: Number(v.createdTime),\\n@@ -38,2 +35 @@ export const listSpotOrders = async (credential: ICredential): Promise<IOrder[]>\\n-  // Spot\\n-  const res = await getSpotOrdersPending(credential, {});\\n+  const res = await getUnfilledOrders(credential, { category: 'SPOT' });\\n@@ -44 +40 @@ export const listSpotOrders = async (credential: ICredential): Promise<IOrder[]>\\n-    res.data?.map((v) => ({\\n+    res.data?.list?.map((v) => ({\\n@@ -51,2 +47,2 @@ export const listSpotOrders = async (credential: ICredential): Promise<IOrder[]>\\n-      volume: Number(v.quantity),\\n-      traded_volume: Number(v.filledQty),\\n+      volume: Number(v.qty),\\n+      traded_volume: Number(v.cumExecQty),\\n@@ -54,2 +50,2 @@ export const listSpotOrders = async (credential: ICredential): Promise<IOrder[]>\\n-      created_at: new Date(Number(v.cTime)).toISOString(),\\n-      submit_at: Number(v.cTime),\\n+      created_at: new Date(Number(v.createdTime)).toISOString(),\\n+      submit_at: Number(v.createdTime),\\n\"\n+        },\n+        {\n+          \"additions\": 11,\n+          \"deletions\": 10,\n+          \"path\": \"apps/vendor-bitget/src/services/orders/modifyOrder.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/orders/modifyOrder.ts b/apps/vendor-bitget/src/services/orders/modifyOrder.ts\\nindex fa2f6f42b..5f3b6aaea 100644\\n--- a/apps/vendor-bitget/src/services/orders/modifyOrder.ts\\n+++ b/apps/vendor-bitget/src/services/orders/modifyOrder.ts\\n@@ -3 +3 @@ import { decodePath } from '@yuants/utils';\\n-import { postFutureModifyOrder, postSpotCancelReplaceOrder } from '../../api/private-api';\\n+import { postModifyOrder } from '../../api/private-api';\\n@@ -10,3 +10 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n-    const res = await postFutureModifyOrder(credential, {\\n-      symbol: instId,\\n-      productType: instType,\\n+    const res = await postModifyOrder(credential, {\\n@@ -14,2 +12,4 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n-      newPrice: order.price?.toString(),\\n-      newSize: order.volume?.toString(),\\n+      price: order.price?.toString(),\\n+      qty: order.volume?.toString(),\\n+      category: 'USDT-FUTURES',\\n+      symbol: instId,\\n@@ -24,2 +24 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n-    const res = await postSpotCancelReplaceOrder(credential, {\\n-      symbol: instId,\\n+    const res = await postModifyOrder(credential, {\\n@@ -27,2 +26,4 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n-      newPrice: order.price?.toString(),\\n-      newSize: order.volume?.toString(),\\n+      price: order.price?.toString(),\\n+      qty: order.volume?.toString(),\\n+      category: 'SPOT',\\n+      symbol: instId,\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 15,\n+          \"path\": \"apps/vendor-bitget/src/services/orders/order-utils.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/orders/order-utils.ts b/apps/vendor-bitget/src/services/orders/order-utils.ts\\nindex 044509abd..bfb7811de 100644\\n--- a/apps/vendor-bitget/src/services/orders/order-utils.ts\\n+++ b/apps/vendor-bitget/src/services/orders/order-utils.ts\\n@@ -27,15 +26,0 @@ export const mapOrderDirectionToTradeSide = (direction?: IOrder['order_direction\\n-\\n-export const buildFutureOrderParams = (order: IOrder) => {\\n-  const [datasource_id, instType, instId] = decodePath(order.product_id);\\n-  return {\\n-    symbol: instId,\\n-    productType: instType,\\n-    marginMode: 'crossed',\\n-    marginCoin: 'USDT',\\n-    size: '' + order.volume,\\n-    price: order.price !== undefined ? '' + order.price : undefined,\\n-    side: mapOrderDirectionToSide(order.order_direction),\\n-    tradeSide: mapOrderDirectionToTradeSide(order.order_direction),\\n-    orderType: order.order_type === 'LIMIT' ? 'limit' : 'market',\\n-  };\\n-};\\n\"\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 9,\n+          \"path\": \"apps/vendor-bitget/src/services/orders/submitOrder.ts\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/orders/submitOrder.ts b/apps/vendor-bitget/src/services/orders/submitOrder.ts\\nindex 969f8a87f..5658795c4 100644\\n--- a/apps/vendor-bitget/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-bitget/src/services/orders/submitOrder.ts\\n@@ -3 +3 @@ import { decodePath } from '@yuants/utils';\\n-import { postFuturePlaceOrder, postSpotPlaceOrder } from '../../api/private-api';\\n+import { postPlaceOrder } from '../../api/private-api';\\n@@ -5 +5 @@ import { ICredential } from '../../api/types';\\n-import { buildFutureOrderParams, mapOrderDirectionToSide } from './order-utils';\\n+import { mapOrderDirectionToSide } from './order-utils';\\n@@ -8,0 +9 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\\n+  const isMaker = order.order_type === 'MAKER';\\n@@ -11,2 +12,11 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\\n-    const params = buildFutureOrderParams(order);\\n-    const res = await postFuturePlaceOrder(credential, params);\\n+    const res = await postPlaceOrder(credential, {\\n+      category: 'USDT-FUTURES',\\n+      symbol: instId,\\n+      qty: '' + order.volume,\\n+      price: order.price !== undefined ? '' + order.price : undefined,\\n+      side: mapOrderDirectionToSide(order.order_direction),\\n+      orderType: order.order_type === 'LIMIT' || isMaker ? 'limit' : 'market',\\n+      timeInForce: isMaker ? 'post_only' : undefined,\\n+      posSide: order.order_direction?.includes('LONG') ? 'long' : 'short',\\n+      // UTA error 25238: posSide and reduceOnly cannot be used together; hedge mode relies on posSide+side.\\n+    });\\n@@ -20 +30,2 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\\n-    const res = await postSpotPlaceOrder(credential, {\\n+    const res = await postPlaceOrder(credential, {\\n+      category: 'SPOT',\\n@@ -23,3 +34,4 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\\n-      orderType: 'limit', // Default to limit for now\\n-      price: order.price?.toString(),\\n-      quantity: order.volume?.toString(),\\n+      orderType: order.order_type === 'MARKET' ? 'market' : 'limit',\\n+      timeInForce: isMaker ? 'post_only' : undefined,\\n+      price: order.price !== undefined ? '' + order.price : undefined,\\n+      qty: order.volume?.toString() ?? '0',\\n@@ -27 +38,0 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\\n-      force: 'normal',\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\",\n+          \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json b/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\\nnew file mode 100644\\nindex 000000000..f55addc83\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\",\\n+      \\\"comment\\\": \\\"Refactor Bitget API integration for futures and spot markets\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"759b18e5c241cd012ed0251d184116a001211528\",\n+      \"short\": \"759b18e5c\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-04 14:37:34 +0800\",\n+      \"subject\": \"chore: bump version (#2191)\",\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-bitget/CHANGELOG.json\",\n+          \"patch\": \"commit 759b18e5c241cd012ed0251d184116a001211528\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 14:37:34 2025 +0800\\n\\n    chore: bump version (#2191)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/CHANGELOG.json b/apps/vendor-bitget/CHANGELOG.json\\nindex ec75dd35e..def2eb706 100644\\n--- a/apps/vendor-bitget/CHANGELOG.json\\n+++ b/apps/vendor-bitget/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.11.0\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-bitget_v0.11.0\\\",\\n+      \\\"date\\\": \\\"Thu, 04 Dec 2025 06:30:10 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"minor\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Refactor Bitget API integration for futures and spot markets\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/CHANGELOG.md\",\n+          \"patch\": \"commit 759b18e5c241cd012ed0251d184116a001211528\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 14:37:34 2025 +0800\\n\\n    chore: bump version (#2191)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/CHANGELOG.md b/apps/vendor-bitget/CHANGELOG.md\\nindex 623a78f75..488d5bac4 100644\\n--- a/apps/vendor-bitget/CHANGELOG.md\\n+++ b/apps/vendor-bitget/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+This log was last generated on Thu, 04 Dec 2025 06:30:10 GMT and should not be manually modified.\\n+\\n+## 0.11.0\\n+Thu, 04 Dec 2025 06:30:10 GMT\\n+\\n+### Minor changes\\n+\\n+- Refactor Bitget API integration for futures and spot markets\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/package.json\",\n+          \"patch\": \"commit 759b18e5c241cd012ed0251d184116a001211528\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 14:37:34 2025 +0800\\n\\n    chore: bump version (#2191)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/package.json b/apps/vendor-bitget/package.json\\nindex 4e8fcb99f..1bf9bfbff 100644\\n--- a/apps/vendor-bitget/package.json\\n+++ b/apps/vendor-bitget/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.4\\\",\\n+  \\\"version\\\": \\\"0.11.0\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\",\n+          \"patch\": \"commit 759b18e5c241cd012ed0251d184116a001211528\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 14:37:34 2025 +0800\\n\\n    chore: bump version (#2191)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json b/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\\ndeleted file mode 100644\\nindex f55addc83..000000000\\n--- a/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\",\\n-      \\\"comment\\\": \\\"Refactor Bitget API integration for futures and spot markets\\\",\\n-      \\\"type\\\": \\\"minor\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-bitget/{main_2025-12-03-18-20.json => main_2025-12-04-06-30.json}\",\n+          \"patch\": \"\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"9b9495d1e3b8feb7d23fccebc8d5eecca5e734ac\",\n+      \"short\": \"9b9495d1e\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-04 14:57:47 +0800\",\n+      \"subject\": \"feat: update credential handling to use secret_id and enhance error management (#2192)\",\n+      \"files\": [\n+        {\n+          \"additions\": 31,\n+          \"deletions\": 4,\n+          \"path\": \"apps/virtual-exchange/src/credential.ts\",\n+          \"patch\": \"commit 9b9495d1e3b8feb7d23fccebc8d5eecca5e734ac\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 14:57:47 2025 +0800\\n\\n    feat: update credential handling to use secret_id and enhance error management (#2192)\\n\\ndiff --git a/apps/virtual-exchange/src/credential.ts b/apps/virtual-exchange/src/credential.ts\\nindex f72728008..e03200075 100644\\n--- a/apps/virtual-exchange/src/credential.ts\\n+++ b/apps/virtual-exchange/src/credential.ts\\n@@ -0,0 +1 @@\\n+import { createCache } from '@yuants/cache';\\n@@ -4,0 +6 @@ import { escapeSQL, requestSQL } from '@yuants/sql';\\n+import { newError } from '@yuants/utils';\\n@@ -52 +54 @@ export const listAllCredentials = async () => {\\n-terminal.server.provideService<IExchangeCredential, void>(\\n+terminal.server.provideService<IExchangeCredential, ISecret>(\\n@@ -65,2 +67,2 @@ terminal.server.provideService<IExchangeCredential, void>(\\n-    await writeSecret(terminal, credentialReader, { type: 'exchange_credential' }, secretData);\\n-    return { res: { code: 0, message: 'OK' } };\\n+    const secret = await writeSecret(terminal, credentialReader, { type: 'exchange_credential' }, secretData);\\n+    return { res: { code: 0, message: 'OK', data: secret } };\\n@@ -83 +85,3 @@ terminal.server.provideService<void, string[]>('VEX/ListCredentials', {}, async\\n-export const validCredentials$ = defer(() => listAllCredentials()).pipe(\\n+const credentialCache = createCache(() => listAllCredentials(), { swrAfter: 10_000, expire: 3600_000 });\\n+\\n+export const validCredentials$ = defer(() => credentialCache.query('')).pipe(\\n@@ -85,0 +90 @@ export const validCredentials$ = defer(() => listAllCredentials()).pipe(\\n+    if (!x) return map;\\n@@ -111,0 +117,22 @@ export const getCredentialById = async (credential_id: string) => {\\n+\\n+export const getCredentialBySecretId = async (\\n+  secret_id: string,\\n+): Promise<Required<Pick<ICredentialResolvedStatus, 'secret' | 'credential' | 'credentialId'>>> => {\\n+  const allCredentials = await credentialCache.query('');\\n+  const theCredential = allCredentials?.find((x) => x.secret.sign === secret_id);\\n+  if (!theCredential) {\\n+    throw newError('CREDENTIAL_NOT_FOUND', { secret_id });\\n+  }\\n+  if (!theCredential.credential) {\\n+    throw newError('CREDENTIAL_NOT_RESOLVED', { secret_id });\\n+  }\\n+  if (!theCredential.credentialId) {\\n+    throw newError('CREDENTIAL_ID_NOT_RESOLVED', { secret_id });\\n+  }\\n+\\n+  return {\\n+    secret: theCredential.secret,\\n+    credential: theCredential.credential,\\n+    credentialId: theCredential.credentialId,\\n+  };\\n+};\\n\"\n+        },\n+        {\n+          \"additions\": 27,\n+          \"deletions\": 42,\n+          \"path\": \"apps/virtual-exchange/src/general.ts\",\n+          \"patch\": \"commit 9b9495d1e3b8feb7d23fccebc8d5eecca5e734ac\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 14:57:47 2025 +0800\\n\\n    feat: update credential handling to use secret_id and enhance error management (#2192)\\n\\ndiff --git a/apps/virtual-exchange/src/general.ts b/apps/virtual-exchange/src/general.ts\\nindex 068a19f33..5ffe52c4f 100644\\n--- a/apps/virtual-exchange/src/general.ts\\n+++ b/apps/virtual-exchange/src/general.ts\\n@@ -5 +5 @@ import { Terminal } from '@yuants/protocol';\\n-import { getCredentialById } from './credential';\\n+import { getCredentialBySecretId } from './credential';\\n@@ -9 +9 @@ const terminal = Terminal.fromNodeEnv();\\n-terminal.server.provideService<{ credential_id: string; product_id?: string }, IPosition[]>(\\n+terminal.server.provideService<{ secret_id: string; product_id?: string }, IPosition[]>(\\n@@ -13 +13 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-    required: ['credential_id'],\\n+    required: ['secret_id'],\\n@@ -15 +15 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-      credential_id: { type: 'string' },\\n+      secret_id: { type: 'string' },\\n@@ -20,5 +20,2 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-    const credential = await getCredentialById(msg.req.credential_id);\\n-    if (!credential) {\\n-      return { res: { code: 404, message: 'Credential not found' } };\\n-    }\\n-    const res = await getPositions(terminal, credential, msg.req.product_id);\\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\\n+    const res = await getPositions(terminal, credential.credential, msg.req.product_id);\\n@@ -29 +26 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-terminal.server.provideService<{ credential_id: string; product_id?: string }, IOrder[]>(\\n+terminal.server.provideService<{ secret_id: string; product_id?: string }, IOrder[]>(\\n@@ -33 +30 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-    required: ['credential_id'],\\n+    required: ['secret_id'],\\n@@ -35 +32 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-      credential_id: { type: 'string' },\\n+      secret_id: { type: 'string' },\\n@@ -40,5 +37,2 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-    const credential = await getCredentialById(msg.req.credential_id);\\n-    if (!credential) {\\n-      return { res: { code: 404, message: 'Credential not found' } };\\n-    }\\n-    const res = await getOrders(terminal, credential, msg.req.product_id);\\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\\n+    const res = await getOrders(terminal, credential.credential, msg.req.product_id);\\n@@ -46 +40 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-      order.account_id = msg.req.credential_id;\\n+      order.account_id = credential.credentialId;\\n@@ -54 +48 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-terminal.server.provideService<{ order: IOrder; credential_id: string }, { order_id: string }>(\\n+terminal.server.provideService<{ order: IOrder; secret_id: string }, { order_id: string }>(\\n@@ -58 +52 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, { order\\n-    required: ['order', 'credential_id'],\\n+    required: ['order', 'secret_id'],\\n@@ -61 +55 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, { order\\n-      credential_id: { type: 'string' },\\n+      secret_id: { type: 'string' },\\n@@ -65,5 +59,2 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, { order\\n-    const credential = await getCredentialById(msg.req.credential_id);\\n-    if (!credential) {\\n-      return { res: { code: 404, message: 'Credential not found' } };\\n-    }\\n-    const res = await submitOrder(terminal, credential, msg.req.order);\\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\\n+    const res = await submitOrder(terminal, credential.credential, msg.req.order);\\n@@ -75 +66 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, { order\\n-terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n+terminal.server.provideService<{ order: IOrder; secret_id: string }, void>(\\n@@ -79 +70 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-    required: ['order', 'credential_id'],\\n+    required: ['order', 'secret_id'],\\n@@ -82 +73 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-      credential_id: { type: 'string' },\\n+      secret_id: { type: 'string' },\\n@@ -86,5 +77,2 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-    const credential = await getCredentialById(msg.req.credential_id);\\n-    if (!credential) {\\n-      return { res: { code: 404, message: 'Credential not found' } };\\n-    }\\n-    const res = await modifyOrder(terminal, credential, msg.req.order);\\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\\n+    const res = await modifyOrder(terminal, credential.credential, msg.req.order);\\n@@ -96 +84 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n+terminal.server.provideService<{ order: IOrder; secret_id: string }, void>(\\n@@ -100 +88 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-    required: ['order', 'credential_id'],\\n+    required: ['order', 'secret_id'],\\n@@ -103 +91 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-      credential_id: { type: 'string' },\\n+      secret_id: { type: 'string' },\\n@@ -107,5 +95,2 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-    const credential = await getCredentialById(msg.req.credential_id);\\n-    if (!credential) {\\n-      return { res: { code: 404, message: 'Credential not found' } };\\n-    }\\n-    const res = await cancelOrder(terminal, credential, msg.req.order);\\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\\n+    const res = await cancelOrder(terminal, credential.credential, msg.req.order);\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\",\n+          \"patch\": \"commit 9b9495d1e3b8feb7d23fccebc8d5eecca5e734ac\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 14:57:47 2025 +0800\\n\\n    feat: update credential handling to use secret_id and enhance error management (#2192)\\n\\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json b/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\\nnew file mode 100644\\nindex 000000000..6bf18df2e\\n--- /dev/null\\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\",\\n+      \\\"comment\\\": \\\"fix\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"e6d5d8b1242877eecf9bf99d82a955e5fba4b893\",\n+      \"short\": \"e6d5d8b12\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-04 15:31:47 +0800\",\n+      \"subject\": \"chore: bump version (#2193)\",\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/virtual-exchange/CHANGELOG.json\",\n+          \"patch\": \"commit e6d5d8b1242877eecf9bf99d82a955e5fba4b893\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 15:31:47 2025 +0800\\n\\n    chore: bump version (#2193)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\\nindex 07abfeb46..ed8d1d46a 100644\\n--- a/apps/virtual-exchange/CHANGELOG.json\\n+++ b/apps/virtual-exchange/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.5.3\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-virtual-exchange_v0.5.3\\\",\\n+      \\\"date\\\": \\\"Thu, 04 Dec 2025 07:31:18 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/CHANGELOG.md\",\n+          \"patch\": \"commit e6d5d8b1242877eecf9bf99d82a955e5fba4b893\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 15:31:47 2025 +0800\\n\\n    chore: bump version (#2193)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\\nindex e02fcc74f..590da04f5 100644\\n--- a/apps/virtual-exchange/CHANGELOG.md\\n+++ b/apps/virtual-exchange/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+This log was last generated on Thu, 04 Dec 2025 07:31:18 GMT and should not be manually modified.\\n+\\n+## 0.5.3\\n+Thu, 04 Dec 2025 07:31:18 GMT\\n+\\n+### Patches\\n+\\n+- fix\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/package.json\",\n+          \"patch\": \"commit e6d5d8b1242877eecf9bf99d82a955e5fba4b893\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 15:31:47 2025 +0800\\n\\n    chore: bump version (#2193)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\\nindex c88895351..7c18e3358 100644\\n--- a/apps/virtual-exchange/package.json\\n+++ b/apps/virtual-exchange/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.5.2\\\",\\n+  \\\"version\\\": \\\"0.5.3\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\",\n+          \"patch\": \"commit e6d5d8b1242877eecf9bf99d82a955e5fba4b893\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 15:31:47 2025 +0800\\n\\n    chore: bump version (#2193)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json b/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\\ndeleted file mode 100644\\nindex 6bf18df2e..000000000\\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\",\\n-      \\\"comment\\\": \\\"fix\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-virtual-exchange/{main_2025-12-03-18-20.json => main_2025-12-04-07-31.json}\",\n+          \"patch\": \"\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"c1217ecbc28bcfebf5f31a164983c625dcb43e91\",\n+      \"short\": \"c1217ecbc\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-04 17:39:37 +0800\",\n+      \"subject\": \"fix: update interest rate handling and product configuration for spot markets (#2194)\",\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/src/services/markets/product.ts\",\n+          \"patch\": \"commit c1217ecbc28bcfebf5f31a164983c625dcb43e91\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 17:39:37 2025 +0800\\n\\n    fix: update interest rate handling and product configuration for spot markets (#2194)\\n\\ndiff --git a/apps/vendor-bitget/src/services/markets/product.ts b/apps/vendor-bitget/src/services/markets/product.ts\\nindex 26120b1f4..58a9ed5ca 100644\\n--- a/apps/vendor-bitget/src/services/markets/product.ts\\n+++ b/apps/vendor-bitget/src/services/markets/product.ts\\n@@ -91 +91 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      no_interest_rate: false,\\n+      no_interest_rate: true,\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 7,\n+          \"path\": \"apps/vendor-okx/src/public-data/interest_rate.ts\",\n+          \"patch\": \"commit c1217ecbc28bcfebf5f31a164983c625dcb43e91\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 17:39:37 2025 +0800\\n\\n    fix: update interest rate handling and product configuration for spot markets (#2194)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/interest_rate.ts b/apps/vendor-okx/src/public-data/interest_rate.ts\\nindex cd7e76172..a03083ef5 100644\\n--- a/apps/vendor-okx/src/public-data/interest_rate.ts\\n+++ b/apps/vendor-okx/src/public-data/interest_rate.ts\\n@@ -15 +15 @@ createSQLWriter<ISeriesCollectingTask>(Terminal.fromNodeEnv(), {\\n-        series_id: encodePath(x.datasource_id, x.product_id),\\n+        series_id: x.product_id,\\n@@ -37,2 +37 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-    const [datasource_id, product_id] = decodePath(series_id);\\n-    const [instType, instId] = decodePath(product_id);\\n+    const [, instType, instId] = decodePath(series_id);\\n@@ -59,2 +58,2 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-            product_id,\\n-            datasource_id,\\n+            product_id: series_id,\\n+            datasource_id: 'OKX',\\n@@ -117,2 +116,2 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-            product_id,\\n-            datasource_id,\\n+            product_id: series_id,\\n+            datasource_id: 'OKX',\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\",\n+          \"patch\": \"commit c1217ecbc28bcfebf5f31a164983c625dcb43e91\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 17:39:37 2025 +0800\\n\\n    fix: update interest rate handling and product configuration for spot markets (#2194)\\n\\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json b/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\\nnew file mode 100644\\nindex 000000000..0f78c4bf3\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\",\\n+      \\\"comment\\\": \\\"fix product of spot\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-04-09-37.json\",\n+          \"patch\": \"commit c1217ecbc28bcfebf5f31a164983c625dcb43e91\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 17:39:37 2025 +0800\\n\\n    fix: update interest rate handling and product configuration for spot markets (#2194)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-04-09-37.json b/common/changes/@yuants/vendor-okx/2025-12-04-09-37.json\\nnew file mode 100644\\nindex 000000000..d044d2716\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-04-09-37.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"fix interest rate\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"b285cde5901f5637b57f2bab6309c58615ecea3a\",\n+      \"short\": \"b285cde59\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-04 17:56:36 +0800\",\n+      \"subject\": \"feat: 添加请求间隔处理以优化 Binance 数据请求 (#2195)\",\n+      \"files\": [\n+        {\n+          \"additions\": 11,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/SESSION_NOTES.md\",\n+          \"patch\": \"commit b285cde5901f5637b57f2bab6309c58615ecea3a\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 17:56:36 2025 +0800\\n\\n    feat: 添加请求间隔处理以优化 Binance 数据请求 (#2195)\\n\\ndiff --git a/apps/vendor-binance/SESSION_NOTES.md b/apps/vendor-binance/SESSION_NOTES.md\\nindex 323540130..dd49b3364 100644\\n--- a/apps/vendor-binance/SESSION_NOTES.md\\n+++ b/apps/vendor-binance/SESSION_NOTES.md\\n@@ -103,0 +104,11 @@\\n+### 2025-12-04 — Codex\\n+\\n+- **本轮摘要**：\\n+  - quote 的 open interest 与 margin 利率请求按 `exchangeInfo.rateLimits` 计算的间隔串行发送，并设置默认间隔（Futures 500ms、Spot/Margin 200ms），避免瞬时请求过快导致 IP 被封。\\n+  - `margin/allPairs` 返回非数组或 4xx 时降级为空数组并记录日志，防止 quote pipeline 由于不可迭代输入崩溃。\\n+  - 串行请求的节流改为使用 RxJS `timer` + `concatMap`，不再使用 `await wait`。\\n+- **修改的文件**：\\n+  - `apps/vendor-binance/src/public-data/quote.ts`\\n+- **运行的测试 / 检查**：\\n+  - `./node_modules/.bin/tsc --noEmit --project apps/vendor-binance/tsconfig.json`\\n+\\n\"\n+        },\n+        {\n+          \"additions\": 122,\n+          \"deletions\": 32,\n+          \"path\": \"apps/vendor-binance/src/public-data/quote.ts\",\n+          \"patch\": \"commit b285cde5901f5637b57f2bab6309c58615ecea3a\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 17:56:36 2025 +0800\\n\\n    feat: 添加请求间隔处理以优化 Binance 数据请求 (#2195)\\n\\ndiff --git a/apps/vendor-binance/src/public-data/quote.ts b/apps/vendor-binance/src/public-data/quote.ts\\nindex 5a034f952..0445513ea 100644\\n--- a/apps/vendor-binance/src/public-data/quote.ts\\n+++ b/apps/vendor-binance/src/public-data/quote.ts\\n@@ -6,0 +7,3 @@ import {\\n+  catchError,\\n+  combineLatest,\\n+  concatMap,\\n@@ -7,0 +11 @@ import {\\n+  exhaustMap,\\n@@ -13,0 +18 @@ import {\\n+  of,\\n@@ -18,0 +24,3 @@ import {\\n+  startWith,\\n+  tap,\\n+  timer,\\n@@ -22,0 +31 @@ import {\\n+  getFutureExchangeInfo,\\n@@ -25,0 +35 @@ import {\\n+  getSpotExchangeInfo,\\n@@ -29 +39,40 @@ const terminal = Terminal.fromNodeEnv();\\n-const OPEN_INTEREST_TTL = process.env.OPEN_INTEREST_TTL ? Number(process.env.OPEN_INTEREST_TTL) : 120_000;\\n+const DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS = 500;\\n+const DEFAULT_MARGIN_RATE_REQUEST_INTERVAL_MS = 500;\\n+const OPEN_INTEREST_TTL = process.env.OPEN_INTEREST_TTL ? Number(process.env.OPEN_INTEREST_TTL) : 300_000;\\n+\\n+interface IRateLimit {\\n+  rateLimitType?: string;\\n+  interval?: string;\\n+  intervalNum?: number;\\n+  limit?: number;\\n+}\\n+\\n+const toIntervalMs = (interval?: string, intervalNum?: number) => {\\n+  switch (interval) {\\n+    case 'SECOND':\\n+      return (intervalNum ?? 1) * 1_000;\\n+    case 'MINUTE':\\n+      return (intervalNum ?? 1) * 60_000;\\n+    case 'HOUR':\\n+      return (intervalNum ?? 1) * 3_600_000;\\n+    case 'DAY':\\n+      return (intervalNum ?? 1) * 86_400_000;\\n+    default:\\n+      return undefined;\\n+  }\\n+};\\n+\\n+const getRequestIntervalMs = (rateLimits: IRateLimit[] | undefined, fallbackMs: number) => {\\n+  const intervals: number[] = [];\\n+  for (const item of rateLimits ?? []) {\\n+    if (item.rateLimitType !== 'REQUEST_WEIGHT' && item.rateLimitType !== 'RAW_REQUESTS') continue;\\n+    const duration = toIntervalMs(item.interval, item.intervalNum);\\n+    console.info('!!!!!', item, duration);\\n+    const limit = item.limit;\\n+    if (duration == null || limit == null || limit <= 0) continue;\\n+    intervals.push(Math.ceil(duration / limit));\\n+  }\\n+  console.info('!!!!!', intervals);\\n+  if (!intervals.length) return fallbackMs;\\n+  return Math.max(fallbackMs, Math.max(...intervals));\\n+};\\n@@ -45,0 +95,13 @@ const openInterestCache = createCache<number>(\\n+const futureRequestInterval$ = defer(() => getFutureExchangeInfo()).pipe(\\n+  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n+  catchError((err) => {\\n+    console.warn('getFutureExchangeInfo failed when calculating request interval', err);\\n+    return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n+  }),\\n+  retry({ delay: 60_000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+  tap((v) => {\\n+    console.info(`!!!!Determined future request interval: ${v} ms`);\\n+  }),\\n+);\\n+\\n@@ -87,11 +149,13 @@ const quoteFromBookTicker$ = futureBookTicker$.pipe(\\n-const quoteFromOpenInterest$ = futureBookTicker$.pipe(\\n-  mergeMap((entries) => from(entries || [])),\\n-  mergeMap(\\n-    (entry) =>\\n-      from(openInterestCache.query(entry.symbol)).pipe(\\n-        map(\\n-          (openInterest): Partial<IQuote> => ({\\n-            datasource_id: 'BINANCE',\\n-            product_id: encodePath('BINANCE', 'USDT-FUTURE', entry.symbol),\\n-            open_interest: `${openInterest ?? 0}`,\\n-          }),\\n+const quoteFromOpenInterest$ = combineLatest([futureBookTicker$, futureRequestInterval$]).pipe(\\n+  exhaustMap(([entries, requestInterval]) =>\\n+    from(entries || []).pipe(\\n+      concatMap((entry, index) =>\\n+        (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n+          mergeMap(() => from(openInterestCache.query(entry.symbol))),\\n+          map(\\n+            (openInterest): Partial<IQuote> => ({\\n+              datasource_id: 'BINANCE',\\n+              product_id: encodePath('BINANCE', 'USDT-FUTURE', entry.symbol),\\n+              open_interest: `${openInterest ?? 0}`,\\n+            }),\\n+          ),\\n@@ -100 +164 @@ const quoteFromOpenInterest$ = futureBookTicker$.pipe(\\n-    5,\\n+    ),\\n@@ -139,0 +204,11 @@ const marginPairs$ = defer(() => getMarginAllPairs()).pipe(\\n+  map((pairs) => {\\n+    if (!Array.isArray(pairs)) {\\n+      console.warn('getMarginAllPairs returned non-array payload', pairs);\\n+      return [];\\n+    }\\n+    return pairs;\\n+  }),\\n+  catchError((err) => {\\n+    console.warn('getMarginAllPairs failed', err);\\n+    return of([] as IMarginPair[]);\\n+  }),\\n@@ -145,2 +220,15 @@ const marginPairs$ = defer(() => getMarginAllPairs()).pipe(\\n-const quoteFromMarginRates$ = marginPairs$.pipe(\\n-  mergeMap((pairs: IMarginPair[]) =>\\n+const spotRequestInterval$ = defer(() => getSpotExchangeInfo()).pipe(\\n+  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_MARGIN_RATE_REQUEST_INTERVAL_MS)),\\n+  catchError((err) => {\\n+    console.warn('getSpotExchangeInfo failed when calculating request interval', err);\\n+    return of(DEFAULT_MARGIN_RATE_REQUEST_INTERVAL_MS);\\n+  }),\\n+  retry({ delay: 60_000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+  tap((v) => {\\n+    console.info(`!!!!Determined spot request interval: ${v} ms`);\\n+  }),\\n+);\\n+\\n+const quoteFromMarginRates$ = combineLatest([marginPairs$, spotRequestInterval$]).pipe(\\n+  mergeMap(([pairs, requestInterval]) =>\\n@@ -148,17 +236,19 @@ const quoteFromMarginRates$ = marginPairs$.pipe(\\n-      mergeMap(\\n-        (pair) =>\\n-          defer(async () => {\\n-            const [baseRate, quoteRate] = await Promise.all([\\n-              marginInterestRateCache.query(pair.base),\\n-              marginInterestRateCache.query(pair.quote),\\n-            ]);\\n-            return {\\n-              datasource_id: 'BINANCE',\\n-              product_id: encodePath('BINANCE', 'SPOT', pair.symbol),\\n-              // User instruction: Long = Quote Rate, Short = Base Rate\\n-              interest_rate_long: quoteRate,\\n-              interest_rate_short: baseRate,\\n-              updated_at: formatTime(Date.now()),\\n-            } as Partial<IQuote>;\\n-          }),\\n-        5, // Concurrency\\n+      concatMap((pair, index) =>\\n+        (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n+          mergeMap(() => from(marginInterestRateCache.query(pair.base))),\\n+          mergeMap((baseRate) =>\\n+            timer(requestInterval).pipe(\\n+              mergeMap(() => from(marginInterestRateCache.query(pair.quote))),\\n+              map(\\n+                (quoteRate): Partial<IQuote> => ({\\n+                  datasource_id: 'BINANCE',\\n+                  product_id: encodePath('BINANCE', 'SPOT', pair.symbol),\\n+                  // User instruction: Long = Quote Rate, Short = Base Rate\\n+                  interest_rate_long: quoteRate,\\n+                  interest_rate_short: baseRate,\\n+                  updated_at: formatTime(Date.now()),\\n+                }),\\n+              ),\\n+            ),\\n+          ),\\n+        ),\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\",\n+          \"patch\": \"commit b285cde5901f5637b57f2bab6309c58615ecea3a\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 17:56:36 2025 +0800\\n\\n    feat: 添加请求间隔处理以优化 Binance 数据请求 (#2195)\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json b/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\\nnew file mode 100644\\nindex 000000000..b95a3b843\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n+      \\\"comment\\\": \\\"add request interval to binance\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"76802e0c0641c1b8fc26e883fa5d114200c367f4\",\n+      \"short\": \"76802e0c0\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-04 18:07:33 +0800\",\n+      \"subject\": \"feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)\",\n+      \"files\": [\n+        {\n+          \"additions\": 11,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/SESSION_NOTES.md\",\n+          \"patch\": \"commit 76802e0c0641c1b8fc26e883fa5d114200c367f4\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 18:07:33 2025 +0800\\n\\n    feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)\\n\\ndiff --git a/apps/vendor-aster/SESSION_NOTES.md b/apps/vendor-aster/SESSION_NOTES.md\\nindex f54c13cf4..8a7aaa694 100644\\n--- a/apps/vendor-aster/SESSION_NOTES.md\\n+++ b/apps/vendor-aster/SESSION_NOTES.md\\n@@ -114,0 +115,11 @@\\n+### 2025-12-04 — Codex\\n+\\n+- **本轮摘要**：\\n+  - quote 服务按 `exchangeInfo` 的限频信息（若缺失则用默认 500ms）推算请求间隔，串行查询 open interest，避免过快轮询导致封禁。\\n+  - ticker 与 open interest 通过 `groupBy + scan` 合并，持续输出同一 product 的增量字段；exchangeInfo 类型增加可选 `rateLimits`。\\n+- **修改的文件**：\\n+  - `apps/vendor-aster/src/api/public-api.ts`\\n+  - `apps/vendor-aster/src/services/markets/quote.ts`\\n+- **运行的测试 / 检查**：\\n+  - `./node_modules/.bin/tsc --noEmit --project apps/vendor-aster/tsconfig.json`\\n+\\n\"\n+        },\n+        {\n+          \"additions\": 26,\n+          \"deletions\": 19,\n+          \"path\": \"apps/vendor-aster/src/api/public-api.ts\",\n+          \"patch\": \"commit 76802e0c0641c1b8fc26e883fa5d114200c367f4\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 18:07:33 2025 +0800\\n\\n    feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)\\n\\ndiff --git a/apps/vendor-aster/src/api/public-api.ts b/apps/vendor-aster/src/api/public-api.ts\\nindex 052be628a..516014a16 100644\\n--- a/apps/vendor-aster/src/api/public-api.ts\\n+++ b/apps/vendor-aster/src/api/public-api.ts\\n@@ -51,0 +52,25 @@ export const getFApiV1FundingRate = createApi<\\n+export interface IAsterRateLimit {\\n+  rateLimitType?: string;\\n+  interval?: string;\\n+  intervalNum?: number;\\n+  limit?: number;\\n+}\\n+\\n+export interface IAsterExchangeInfo {\\n+  symbols: {\\n+    symbol: string;\\n+    status: 'TRADING' | 'BREAK' | 'HALT';\\n+    baseAsset: string;\\n+    quoteAsset: string;\\n+    pricePrecision: number;\\n+    quantityPrecision: number;\\n+    baseAssetPrecision: number;\\n+    quotePrecision: number;\\n+    filters: {\\n+      filterType: string;\\n+      [key: string]: any;\\n+    }[];\\n+  }[];\\n+  rateLimits?: IAsterRateLimit[];\\n+}\\n+\\n@@ -57,19 +82 @@ export const getFApiV1FundingRate = createApi<\\n-export const getFApiV1ExchangeInfo = createApi<\\n-  {},\\n-  {\\n-    symbols: {\\n-      symbol: string;\\n-      status: 'TRADING' | 'BREAK' | 'HALT';\\n-      baseAsset: string;\\n-      quoteAsset: string;\\n-      pricePrecision: number;\\n-      quantityPrecision: number;\\n-      baseAssetPrecision: number;\\n-      quotePrecision: number;\\n-      filters: {\\n-        filterType: string;\\n-        [key: string]: any;\\n-      }[];\\n-    }[];\\n-  }\\n->('GET', '/fapi/v1/exchangeInfo');\\n+export const getFApiV1ExchangeInfo = createApi<{}, IAsterExchangeInfo>('GET', '/fapi/v1/exchangeInfo');\\n\"\n+        },\n+        {\n+          \"additions\": 109,\n+          \"deletions\": 6,\n+          \"path\": \"apps/vendor-aster/src/services/markets/quote.ts\",\n+          \"patch\": \"commit 76802e0c0641c1b8fc26e883fa5d114200c367f4\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 18:07:33 2025 +0800\\n\\n    feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/quote.ts b/apps/vendor-aster/src/services/markets/quote.ts\\nindex 68bcc4255..ead158a55 100644\\n--- a/apps/vendor-aster/src/services/markets/quote.ts\\n+++ b/apps/vendor-aster/src/services/markets/quote.ts\\n@@ -6,2 +6,25 @@ import { decodePath, encodePath } from '@yuants/utils';\\n-import { defer, filter, from, map, mergeMap, repeat, retry, shareReplay } from 'rxjs';\\n-import { getFApiV1OpenInterest, getFApiV1TickerPrice } from '../../api/public-api';\\n+import {\\n+  catchError,\\n+  combineLatest,\\n+  concatMap,\\n+  defer,\\n+  filter,\\n+  from,\\n+  groupBy,\\n+  map,\\n+  merge,\\n+  mergeMap,\\n+  of,\\n+  repeat,\\n+  retry,\\n+  scan,\\n+  shareReplay,\\n+  startWith,\\n+  timer,\\n+} from 'rxjs';\\n+import {\\n+  getFApiV1ExchangeInfo,\\n+  getFApiV1OpenInterest,\\n+  getFApiV1TickerPrice,\\n+  IAsterRateLimit,\\n+} from '../../api/public-api';\\n@@ -9,0 +33 @@ const terminal = Terminal.fromNodeEnv();\\n+const DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS = 500;\\n@@ -11,0 +36,28 @@ const OPEN_INTEREST_TTL = process.env.OPEN_INTEREST_TTL ? Number(process.env.OPE\\n+const toIntervalMs = (interval?: string, intervalNum?: number) => {\\n+  switch (interval) {\\n+    case 'SECOND':\\n+      return (intervalNum ?? 1) * 1_000;\\n+    case 'MINUTE':\\n+      return (intervalNum ?? 1) * 60_000;\\n+    case 'HOUR':\\n+      return (intervalNum ?? 1) * 3_600_000;\\n+    case 'DAY':\\n+      return (intervalNum ?? 1) * 86_400_000;\\n+    default:\\n+      return undefined;\\n+  }\\n+};\\n+\\n+const getRequestIntervalMs = (rateLimits: IAsterRateLimit[] | undefined, fallbackMs: number) => {\\n+  const intervals: number[] = [];\\n+  for (const item of rateLimits ?? []) {\\n+    if (item.rateLimitType !== 'REQUEST_WEIGHT' && item.rateLimitType !== 'RAW_REQUESTS') continue;\\n+    const duration = toIntervalMs(item.interval, item.intervalNum);\\n+    const limit = item.limit;\\n+    if (duration == null || limit == null || limit <= 0) continue;\\n+    intervals.push(Math.ceil(duration / limit));\\n+  }\\n+  if (!intervals.length) return fallbackMs;\\n+  return Math.max(fallbackMs, Math.max(...intervals));\\n+};\\n+\\n@@ -25 +77,19 @@ const openInterestCache = createCache<string>(\\n-const quote$ = defer(() => getFApiV1TickerPrice({})).pipe(\\n+const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n+  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n+  catchError((err) => {\\n+    console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n+    return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n+  }),\\n+  startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n+  retry({ delay: 60_000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+);\\n+\\n+const ticker$ = defer(() => getFApiV1TickerPrice({})).pipe(\\n+  map((tickers) => (Array.isArray(tickers) ? tickers : [])),\\n+  repeat({ delay: 1000 }),\\n+  retry({ delay: 5000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+);\\n+\\n+const quoteFromTicker$ = ticker$.pipe(\\n@@ -34 +103,0 @@ const quote$ = defer(() => getFApiV1TickerPrice({})).pipe(\\n-      open_interest: '0',\\n@@ -38,2 +107,36 @@ const quote$ = defer(() => getFApiV1TickerPrice({})).pipe(\\n-  repeat({ delay: 1000 }),\\n-  retry({ delay: 5000 }),\\n+);\\n+\\n+const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\\n+  mergeMap(([tickers, requestInterval]) =>\\n+    from(tickers).pipe(\\n+      concatMap((ticker, index) =>\\n+        (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n+          mergeMap(() => from(openInterestCache.query(ticker.symbol))),\\n+          map(\\n+            (openInterest): Partial<IQuote> => ({\\n+              datasource_id: 'ASTER',\\n+              product_id: encodePath('ASTER', 'PERP', ticker.symbol),\\n+              open_interest: `${openInterest ?? 0}`,\\n+              updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n+            }),\\n+          ),\\n+        ),\\n+      ),\\n+    ),\\n+  ),\\n+);\\n+\\n+const quote$ = merge(quoteFromTicker$, quoteFromOpenInterest$).pipe(\\n+  groupBy((quote) => quote.product_id),\\n+  mergeMap((group$) =>\\n+    group$.pipe(\\n+      scan(\\n+        (acc, cur) =>\\n+          Object.assign(acc, cur, {\\n+            datasource_id: 'ASTER',\\n+            product_id: group$.key,\\n+          }),\\n+        {} as Partial<IQuote>,\\n+      ),\\n+    ),\\n+  ),\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\",\n+          \"patch\": \"commit 76802e0c0641c1b8fc26e883fa5d114200c367f4\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 18:07:33 2025 +0800\\n\\n    feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json b/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\\nnew file mode 100644\\nindex 000000000..6013a6596\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"添加请求间隔处理以优化 Aster 数据请求\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\",\n+      \"short\": \"61e0a8bf8\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-04 18:37:01 +0800\",\n+      \"subject\": \"chore: bump version (#2196)\",\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex 36d113212..157e86d10 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.18\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.18\\\",\\n+      \\\"date\\\": \\\"Thu, 04 Dec 2025 10:36:34 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"添加请求间隔处理以优化 Aster 数据请求\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex e54418abb..102ea3be5 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\\n+\\n+## 0.7.18\\n+Thu, 04 Dec 2025 10:36:34 GMT\\n+\\n+### Patches\\n+\\n+- 添加请求间隔处理以优化 Aster 数据请求\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex c65261618..86120e2ae 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.17\\\",\\n+  \\\"version\\\": \\\"0.7.18\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.json\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\\nindex dfcef644e..3c0f26e0c 100644\\n--- a/apps/vendor-binance/CHANGELOG.json\\n+++ b/apps/vendor-binance/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.10\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-binance_v0.10.10\\\",\\n+      \\\"date\\\": \\\"Thu, 04 Dec 2025 10:36:34 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add request interval to binance\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.md\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\\nindex ef4fba6e7..eda868de2 100644\\n--- a/apps/vendor-binance/CHANGELOG.md\\n+++ b/apps/vendor-binance/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\\n+\\n+## 0.10.10\\n+Thu, 04 Dec 2025 10:36:34 GMT\\n+\\n+### Patches\\n+\\n+- add request interval to binance\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/package.json\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\\nindex 401e06f8e..2a11fca6e 100644\\n--- a/apps/vendor-binance/package.json\\n+++ b/apps/vendor-binance/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.9\\\",\\n+  \\\"version\\\": \\\"0.10.10\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-bitget/CHANGELOG.json\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/CHANGELOG.json b/apps/vendor-bitget/CHANGELOG.json\\nindex def2eb706..7246ddf96 100644\\n--- a/apps/vendor-bitget/CHANGELOG.json\\n+++ b/apps/vendor-bitget/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.11.1\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-bitget_v0.11.1\\\",\\n+      \\\"date\\\": \\\"Thu, 04 Dec 2025 10:36:34 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix product of spot\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/CHANGELOG.md\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/CHANGELOG.md b/apps/vendor-bitget/CHANGELOG.md\\nindex 488d5bac4..4801566cf 100644\\n--- a/apps/vendor-bitget/CHANGELOG.md\\n+++ b/apps/vendor-bitget/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Thu, 04 Dec 2025 06:30:10 GMT and should not be manually modified.\\n+This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\\n+\\n+## 0.11.1\\n+Thu, 04 Dec 2025 10:36:34 GMT\\n+\\n+### Patches\\n+\\n+- fix product of spot\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/package.json\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/package.json b/apps/vendor-bitget/package.json\\nindex 1bf9bfbff..7d2107e02 100644\\n--- a/apps/vendor-bitget/package.json\\n+++ b/apps/vendor-bitget/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.11.0\\\",\\n+  \\\"version\\\": \\\"0.11.1\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex 8d65b1d3c..1274e028e 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.28.3\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.28.3\\\",\\n+      \\\"date\\\": \\\"Thu, 04 Dec 2025 10:36:34 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix interest rate\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex aa516f4b8..2059225e3 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\\n+\\n+## 0.28.3\\n+Thu, 04 Dec 2025 10:36:34 GMT\\n+\\n+### Patches\\n+\\n+- fix interest rate\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 8adb8de71..22fafd82e 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.28.2\\\",\\n+  \\\"version\\\": \\\"0.28.3\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json b/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\\ndeleted file mode 100644\\nindex 6013a6596..000000000\\n--- a/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n-      \\\"comment\\\": \\\"添加请求间隔处理以优化 Aster 数据请求\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-03-18-20.json => main_2025-12-04-10-36.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json b/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\\ndeleted file mode 100644\\nindex b95a3b843..000000000\\n--- a/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n-      \\\"comment\\\": \\\"add request interval to binance\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/{main_2025-12-03-18-20.json => main_2025-12-04-10-36.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json b/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\\ndeleted file mode 100644\\nindex 0f78c4bf3..000000000\\n--- a/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\",\\n-      \\\"comment\\\": \\\"fix product of spot\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-bitget/{main_2025-12-04-06-30.json => main_2025-12-04-10-36.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-04-09-37.json\",\n+          \"patch\": \"commit 61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 18:37:01 2025 +0800\\n\\n    chore: bump version (#2196)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-04-09-37.json b/common/changes/@yuants/vendor-okx/2025-12-04-09-37.json\\ndeleted file mode 100644\\nindex d044d2716..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-04-09-37.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"fix interest rate\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-03-18-20.json => main_2025-12-04-10-36.json}\",\n+          \"patch\": \"\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"a723dba9dcfcbaf655d2a4aa62602e78f670ae29\",\n+      \"short\": \"a723dba9d\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-05 00:34:31 +0800\",\n+      \"subject\": \"feat: 移除系列收集任务写入器 (#2198)\",\n+      \"files\": [\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 39,\n+          \"path\": \"apps/vendor-hyperliquid/src/services/markets/interest-rate.ts\",\n+          \"patch\": \"commit a723dba9dcfcbaf655d2a4aa62602e78f670ae29\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 00:34:31 2025 +0800\\n\\n    feat: 移除系列收集任务写入器 (#2198)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/markets/interest-rate.ts b/apps/vendor-hyperliquid/src/services/markets/interest-rate.ts\\nindex af194dc1f..a93246729 100644\\n--- a/apps/vendor-hyperliquid/src/services/markets/interest-rate.ts\\n+++ b/apps/vendor-hyperliquid/src/services/markets/interest-rate.ts\\n@@ -2 +2 @@ import { IInterestRate } from '@yuants/data-interest-rate';\\n-import { createSeriesProvider, ISeriesCollectingTask } from '@yuants/data-series';\\n+import { createSeriesProvider } from '@yuants/data-series';\\n@@ -4,4 +4,2 @@ import { Terminal } from '@yuants/protocol';\\n-import { createSQLWriter } from '@yuants/sql';\\n-import { decodePath, encodePath, formatTime } from '@yuants/utils';\\n-import { defer, map, mergeAll, repeat, retry, shareReplay, tap } from 'rxjs';\\n-import { getHistoricalFundingRates, getPerpetualsMetaData } from '../../api/public-api';\\n+import { decodePath, formatTime } from '@yuants/utils';\\n+import { getHistoricalFundingRates } from '../../api/public-api';\\n@@ -11,34 +8,0 @@ const terminal = Terminal.fromNodeEnv();\\n-const perpetualProducts$ = defer(async () => {\\n-  const meta = await getPerpetualsMetaData();\\n-  return meta.universe.map((product) => ({\\n-    product_id: encodePath('HYPERLIQUID', 'PERPETUAL', `${product.name}-USD`),\\n-    datasource_id: 'HYPERLIQUID',\\n-    no_interest_rate: false,\\n-  }));\\n-}).pipe(\\n-  tap({ error: (err) => console.error(formatTime(Date.now()), 'PerpetualProductFetchFailed', err) }),\\n-  retry({ delay: 10_000 }),\\n-  repeat({ delay: 3600_000 }),\\n-  shareReplay({ bufferSize: 1, refCount: true }),\\n-);\\n-\\n-createSQLWriter<ISeriesCollectingTask>(terminal, {\\n-  data$: perpetualProducts$.pipe(\\n-    map((products) => products.filter((product) => product.no_interest_rate === false)),\\n-    mergeAll(),\\n-    map(\\n-      (product): ISeriesCollectingTask => ({\\n-        series_id: product.product_id,\\n-        table_name: 'interest_rate',\\n-        cron_pattern: '0 * * * *',\\n-        cron_timezone: 'UTC',\\n-        disabled: false,\\n-        replay_count: 0,\\n-      }),\\n-    ),\\n-  ),\\n-  tableName: 'series_collecting_task',\\n-  writeInterval: 1000,\\n-  conflictKeys: ['series_id', 'table_name'],\\n-});\\n-\\n\"\n+        },\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 24,\n+          \"path\": \"apps/vendor-okx/src/public-data/interest_rate.ts\",\n+          \"patch\": \"commit a723dba9dcfcbaf655d2a4aa62602e78f670ae29\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 00:34:31 2025 +0800\\n\\n    feat: 移除系列收集任务写入器 (#2198)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/interest_rate.ts b/apps/vendor-okx/src/public-data/interest_rate.ts\\nindex a03083ef5..f3171f275 100644\\n--- a/apps/vendor-okx/src/public-data/interest_rate.ts\\n+++ b/apps/vendor-okx/src/public-data/interest_rate.ts\\n@@ -2 +2 @@ import { IInterestRate } from '@yuants/data-interest-rate';\\n-import { createSeriesProvider, ISeriesCollectingTask } from '@yuants/data-series';\\n+import { createSeriesProvider } from '@yuants/data-series';\\n@@ -4,3 +4,2 @@ import { Terminal } from '@yuants/protocol';\\n-import { createSQLWriter } from '@yuants/sql';\\n-import { decodePath, encodePath, formatTime } from '@yuants/utils';\\n-import { firstValueFrom, map, mergeAll, timer } from 'rxjs';\\n+import { decodePath, formatTime } from '@yuants/utils';\\n+import { firstValueFrom, timer } from 'rxjs';\\n@@ -8,20 +6,0 @@ import { getFundingRateHistory, getLendingRateHistory } from '../api/public-api'\\n-import { productService } from './product';\\n-\\n-createSQLWriter<ISeriesCollectingTask>(Terminal.fromNodeEnv(), {\\n-  data$: productService.products$.pipe(\\n-    mergeAll(),\\n-    map(\\n-      (x): ISeriesCollectingTask => ({\\n-        series_id: x.product_id,\\n-        table_name: 'interest_rate',\\n-        cron_pattern: '0 * * * *', // 每小时执行一次\\n-        cron_timezone: 'UTC',\\n-        disabled: false,\\n-        replay_count: 0,\\n-      }),\\n-    ),\\n-  ),\\n-  tableName: 'series_collecting_task',\\n-  writeInterval: 1000,\\n-  conflictKeys: ['series_id', 'table_name'],\\n-});\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\",\n+          \"patch\": \"commit a723dba9dcfcbaf655d2a4aa62602e78f670ae29\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 00:34:31 2025 +0800\\n\\n    feat: 移除系列收集任务写入器 (#2198)\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\\nnew file mode 100644\\nindex 000000000..b8b1e588a\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n+      \\\"comment\\\": \\\"remove series_collector_task writer\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-04-16-30.json\",\n+          \"patch\": \"commit a723dba9dcfcbaf655d2a4aa62602e78f670ae29\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 00:34:31 2025 +0800\\n\\n    feat: 移除系列收集任务写入器 (#2198)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-04-16-30.json b/common/changes/@yuants/vendor-okx/2025-12-04-16-30.json\\nnew file mode 100644\\nindex 000000000..b331ba422\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-04-16-30.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"remove series_collector_task writer\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"c36262caddee5b4ee9ada840501c81e554b5de6a\",\n+      \"short\": \"c36262cad\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-05 00:51:27 +0800\",\n+      \"subject\": \"chore: bump version (#2199)\",\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.json\",\n+          \"patch\": \"commit c36262caddee5b4ee9ada840501c81e554b5de6a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 00:51:27 2025 +0800\\n\\n    chore: bump version (#2199)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.json b/apps/vendor-hyperliquid/CHANGELOG.json\\nindex 04b02727f..3de161f60 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.json\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.8\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-hyperliquid_v0.7.8\\\",\\n+      \\\"date\\\": \\\"Thu, 04 Dec 2025 16:51:07 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"remove series_collector_task writer\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.md\",\n+          \"patch\": \"commit c36262caddee5b4ee9ada840501c81e554b5de6a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 00:51:27 2025 +0800\\n\\n    chore: bump version (#2199)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.md b/apps/vendor-hyperliquid/CHANGELOG.md\\nindex 632f8ed01..5c3abad78 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.md\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+This log was last generated on Thu, 04 Dec 2025 16:51:07 GMT and should not be manually modified.\\n+\\n+## 0.7.8\\n+Thu, 04 Dec 2025 16:51:07 GMT\\n+\\n+### Patches\\n+\\n+- remove series_collector_task writer\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/package.json\",\n+          \"patch\": \"commit c36262caddee5b4ee9ada840501c81e554b5de6a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 00:51:27 2025 +0800\\n\\n    chore: bump version (#2199)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/package.json b/apps/vendor-hyperliquid/package.json\\nindex 5a46f1033..267ed6867 100644\\n--- a/apps/vendor-hyperliquid/package.json\\n+++ b/apps/vendor-hyperliquid/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.7\\\",\\n+  \\\"version\\\": \\\"0.7.8\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"patch\": \"commit c36262caddee5b4ee9ada840501c81e554b5de6a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 00:51:27 2025 +0800\\n\\n    chore: bump version (#2199)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex 1274e028e..7649a74c2 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.28.4\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.28.4\\\",\\n+      \\\"date\\\": \\\"Thu, 04 Dec 2025 16:51:07 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"remove series_collector_task writer\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"patch\": \"commit c36262caddee5b4ee9ada840501c81e554b5de6a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 00:51:27 2025 +0800\\n\\n    chore: bump version (#2199)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex 2059225e3..8acce7199 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Thu, 04 Dec 2025 10:36:34 GMT and should not be manually modified.\\n+This log was last generated on Thu, 04 Dec 2025 16:51:07 GMT and should not be manually modified.\\n+\\n+## 0.28.4\\n+Thu, 04 Dec 2025 16:51:07 GMT\\n+\\n+### Patches\\n+\\n+- remove series_collector_task writer\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"patch\": \"commit c36262caddee5b4ee9ada840501c81e554b5de6a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 00:51:27 2025 +0800\\n\\n    chore: bump version (#2199)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 22fafd82e..3e058d461 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.28.3\\\",\\n+  \\\"version\\\": \\\"0.28.4\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\",\n+          \"patch\": \"commit c36262caddee5b4ee9ada840501c81e554b5de6a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 00:51:27 2025 +0800\\n\\n    chore: bump version (#2199)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\\ndeleted file mode 100644\\nindex b8b1e588a..000000000\\n--- a/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n-      \\\"comment\\\": \\\"remove series_collector_task writer\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/{main_2025-12-03-18-20.json => main_2025-12-04-16-51.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-04-16-30.json\",\n+          \"patch\": \"commit c36262caddee5b4ee9ada840501c81e554b5de6a\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Fri Dec 5 00:51:27 2025 +0800\\n\\n    chore: bump version (#2199)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-04-16-30.json b/common/changes/@yuants/vendor-okx/2025-12-04-16-30.json\\ndeleted file mode 100644\\nindex b331ba422..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-04-16-30.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"remove series_collector_task writer\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-04-10-36.json => main_2025-12-04-16-51.json}\",\n+          \"patch\": \"\"\n+        }\n+      ]\n+    }\n+  ],\n+  \"metadata\": {\n+    \"tool\": \"git-changes-reporter\",\n+    \"version\": \"1.0.0\",\n+    \"repository\": \"/home/runner/work/Yuan/Yuan\"\n+  }\n+}\n\\ No newline at end of file\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "submitOrder",
              "code": "      \"patch\": \"commit 52651345fdf859c9d0198c4f26f1e50aa2e3ddd0\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 10:53:32 2025 +0800\\n\\n    feat: enhance order submission logic to round volume for close positions (#2189)\\n\\ndiff --git a/apps/vendor-turboflow/src/services/orders/submitOrder.ts b/apps/vendor-turboflow/src/services/orders/submitOrder.ts\\nindex e2bba4841..d7f2d601b 100644\\n--- a/apps/vendor-turboflow/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-turboflow/src/services/orders/submitOrder.ts\\n@@ -2 +2 @@ import { IOrder } from '@yuants/data-order';\\n-import { decodePath, newError } from '@yuants/utils';\\n+import { decodePath, newError, roundToStep } from '@yuants/utils';\\n@@ -50 +50,2 @@ export const submitOrder = async (credential: ICredential, order: IOrder): Promi\\n-  const size = order.order_direction.includes('CLOSE') ? order.volume.toString() : undefined; // 头寸名义价值\\n+  // 平仓时，剩余小于 1 USDC 时会自动平仓\\n+  const size = order.order_direction.includes('CLOSE') ? Math.floor(order.volume).toString() : undefined; // 头寸名义价值\\n\"\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\",\n      \"patch\": \"commit 52651345fdf859c9d0198c4f26f1e50aa2e3ddd0\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 10:53:32 2025 +0800\\n\\n    feat: enhance order submission logic to round volume for close positions (#2189)\\n\\ndiff --git a/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json b/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\\nnew file mode 100644\\nindex 000000000..68d6bcf2d\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-turboflow/2025-12-04-02-49.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-turboflow\\\",\\n+      \\\"comment\\\": \\\"fix close position\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-turboflow\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"7737136846486c3710874a554a7e3d3392e4fe1f\",\n  \"short\": \"773713684\",\n  \"author\": \"humblelittlec1[bot]\",\n  \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",",
              "lineStart": 51,
              "lineEnd": 124
            },
            {
              "type": "function",
              "name": "getAllAccountBalance",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/api/private-api.ts b/apps/vendor-bitget/src/api/private-api.ts\\nindex 910b6e098..b716b1bd7 100644\\n--- a/apps/vendor-bitget/src/api/private-api.ts\\n+++ b/apps/vendor-bitget/src/api/private-api.ts\\n@@ -11 +11,51 @@ type ApiResponse<T> = {\\n-interface IFuturePendingOrder {\\n+export interface IUtaAccountAsset {\\n+  coin: string;\\n+  equity: string;\\n+  usdValue: string;\\n+  balance: string;\\n+  available: string;\\n+  debt: string;\\n+  locked: string;\\n+}\\n+\\n+export interface IUtaFundingAsset {\\n+  coin: string;\\n+  balance: string;\\n+  available: string;\\n+  frozen: string;\\n+}\\n+\\n+export interface IUtaPosition {\\n+  category: string;\\n+  symbol: string;\\n+  marginCoin: string;\\n+  holdMode: string;\\n+  posSide: string;\\n+  marginMode: string;\\n+  positionBalance: string;\\n+  available: string;\\n+  frozen: string;\\n+  total: string;\\n+  leverage: string;\\n+  curRealisedPnl: string;\\n+  avgPrice: string;\\n+  positionStatus: string;\\n+  unrealisedPnl: string;\\n+  liquidationPrice: string;\\n+  mmr: string;\\n+  profitRate: string;\\n+  markPrice: string;\\n+  breakEvenPrice: string;\\n+  totalFunding: string;\\n+  openFeeTotal: string;\\n+  closeFeeTotal: string;\\n+  createdTime: string;\\n+  updatedTime: string;\\n+}\\n+\\n+export interface IUtaPendingOrderFeeDetail {\\n+  feeCoin: string | null;\\n+  fee: string | null;\\n+}\\n+\\n+export interface IUtaPendingOrder {\\n@@ -13,0 +64 @@ interface IFuturePendingOrder {\\n+  category: string;\\n@@ -15,7 +65,0 @@ interface IFuturePendingOrder {\\n-  productType: string;\\n-  marginCoin: string;\\n-  size: string;\\n-  filledQty: string;\\n-  price: string;\\n-  priceAvg: string;\\n-  state: string;\\n@@ -24,3 +68,11 @@ interface IFuturePendingOrder {\\n-  tradeSide?: string;\\n-  posSide?: string;\\n-  marginMode?: string;\\n+  price: string;\\n+  qty: string;\\n+  amount: string;\\n+  cumExecQty: string;\\n+  cumExecValue: string;\\n+  avgPrice: string;\\n+  timeInForce: string;\\n+  orderStatus: string;\\n+  posSide: string;\\n+  holdMode: string;\\n+  stpMode?: string;\\n@@ -28,3 +80,3 @@ interface IFuturePendingOrder {\\n-  createdTime?: string;\\n-  cTime?: string;\\n-  uTime?: string;\\n+  feeDetail: IUtaPendingOrderFeeDetail[];\\n+  createdTime: string;\\n+  updatedTime: string;\\n@@ -33,18 +85,5 @@ interface IFuturePendingOrder {\\n-interface ISpotPendingOrder {\\n-  orderId?: string;\\n-  clientOid?: string;\\n-  symbol?: string;\\n-  instId?: string;\\n-  orderType?: string;\\n-  side?: string;\\n-  size?: string;\\n-  quantity?: string;\\n-  baseSz?: string;\\n-  baseAmount?: string;\\n-  fillSz?: string;\\n-  filledQty?: string;\\n-  baseFilled?: string;\\n-  cTime?: string;\\n-  createTime?: string;\\n-  createdTime?: string;\\n-  price?: string;\\n+export interface IUtaSymbolConfig {\\n+  category: string;\\n+  symbol: string;\\n+  marginMode: string;\\n+  leverage: string;\\n@@ -53,3 +92 @@ interface ISpotPendingOrder {\\n-interface IWithdrawalRecord {\\n-  orderId: string;\\n-  tradeId: string;\\n+export interface IUtaCoinConfig {\\n@@ -57,9 +94 @@ interface IWithdrawalRecord {\\n-  clientOid: string;\\n-  type: string;\\n-  dest: string;\\n-  size: string;\\n-  status: string;\\n-  fromAddress: string;\\n-  toAddress: string;\\n-  chain: string;\\n-  cTime: string;\\n+  leverage: string;\\n@@ -68,12 +97,8 @@ interface IWithdrawalRecord {\\n-interface IDepositRecord {\\n-  orderId: string;\\n-  tradeId: string;\\n-  coin: string;\\n-  type: string;\\n-  dest: string;\\n-  size: string;\\n-  status: string;\\n-  fromAddress: string;\\n-  toAddress: string;\\n-  chain: string;\\n-  cTime: string;\\n+export interface IUtaAccountSettings {\\n+  uid: string;\\n+  accountMode: string;\\n+  assetMode: string;\\n+  holdMode: string;\\n+  stpMode: string;\\n+  symbolConfigList: IUtaSymbolConfig[];\\n+  coinConfigList: IUtaCoinConfig[];\\n@@ -83 +108 @@ interface IDepositRecord {\\n- * 资产概览\\n+ * 获取统一账户资产\\n@@ -85,18 +110 @@ interface IDepositRecord {\\n- * 限速规则: 1次/1s (Uid)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/common/account/All-Account-Balance\\n- */\\n-export const getAllAccountBalance = (credential: ICredential) =>\\n-  requestPrivate<\\n-    ApiResponse<\\n-      {\\n-        accountType: string;\\n-        usdtBalance: string;\\n-      }[]\\n-    >\\n-  >(credential, 'GET', '/api/v2/account/all-account-balance');\\n-\\n-/**\\n- * 获取账户信息\\n- *\\n- * 限速规则 1次/秒/UID\\n+ * 限速规则: 20次/1s (UID)\\n@@ -104 +112 @@ export const getAllAccountBalance = (credential: ICredential) =>\\n- * 获取账户信息 (需要现货只读或者读写权限)\\n+ * 查询账户信息与资产（仅返回非 0 余额）\\n@@ -106 +114 @@ export const getAllAccountBalance = (credential: ICredential) =>\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Account-Info\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/account/Get-Account\\n@@ -108 +116 @@ export const getAllAccountBalance = (credential: ICredential) =>\\n-export const getAccountInfo = (credential: ICredential) =>\\n+export const getAccountAssets = (credential: ICredential) =>\\n@@ -111,9 +119,12 @@ export const getAccountInfo = (credential: ICredential) =>\\n-      userId: string;\\n-      inviterId: string;\\n-      channelCode: string;\\n-      channel: string;\\n-      ips: string;\\n-      authorities: string[];\\n-      parentId: number;\\n-      traderType: string;\\n-      regisTime: string;\\n+      accountEquity: string;\\n+      usdtEquity: string;\\n+      btcEquity: string;\\n+      unrealisedPnl: string;\\n+      usdtUnrealisedPnl: string;\\n+      btcUnrealizedPnl: string;\\n+      effEquity: string;\\n+      mmr: string;\\n+      imr: string;\\n+      mgnRatio: string;\\n+      positionMgnRatio: string;\\n+      assets: IUtaAccountAsset[];\\n@@ -121 +132 @@ export const getAccountInfo = (credential: ICredential) =>\\n-  >(credential, 'GET', '/api/v2/spot/account/info');\\n+  >(credential, 'GET', '/api/v3/account/assets');\\n@@ -124 +135 @@ export const getAccountInfo = (credential: ICredential) =>\\n- * 获取账户信息列表\\n+ * 获取统一账户设置\\n@@ -126 +137 @@ export const getAccountInfo = (credential: ICredential) =>\\n- * 限速规则: 10次/1s (uid)\\n+ * 限速规则: 20次/1s (UID)\\n@@ -128 +139 @@ export const getAccountInfo = (credential: ICredential) =>\\n- * 查询某产品类型下所有账户信息\\n+ * 查询持仓/保证金模式、杠杆等账户配置\\n@@ -130 +141 @@ export const getAccountInfo = (credential: ICredential) =>\\n- * https://www.bitget.com/zh-CN/api-doc/contract/account/Get-Account-List\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/account/Get-Account-Setting\\n@@ -132,19 +143,2 @@ export const getAccountInfo = (credential: ICredential) =>\\n-export const getFutureAccounts = (credential: ICredential, params: { productType: string }) =>\\n-  requestPrivate<\\n-    ApiResponse<\\n-      {\\n-        marginCoin: string;\\n-        locked: string;\\n-        available: string;\\n-        crossedMaxAvailable: string;\\n-        isolatedMaxAvailable: string;\\n-        maxTransferOut: string;\\n-        accountEquity: string;\\n-        usdtEquity: string;\\n-        btcEquity: string;\\n-        crossedRiskRate: string;\\n-        unrealizedPL: string;\\n-        coupon: string;\\n-      }[]\\n-    >\\n-  >(credential, 'GET', '/api/v2/mix/account/accounts', params);\\n+export const getAccountSettings = (credential: ICredential) =>\\n+  requestPrivate<ApiResponse<IUtaAccountSettings>>(credential, 'GET', '/api/v3/account/settings');\\n@@ -153,2 +147 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\\n- * 获取全部合约仓位信息\\n- * 5次/S 根据uid限频\\n+ * 获取资金账户资产\\n@@ -156 +149 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\\n- * 返回指定productType当前全部的持仓信息\\n+ * 限速规则: 20次/1s (UID)\\n@@ -158,3 +151 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\\n- * 此接口返回数据可能会在以下场景下出现延迟，建议订阅Websocket监控仓位信息：\\n- * 资金费率结算时\\n- * 行情波动剧烈\\n+ * 仅返回有资产的币种\\n@@ -162 +153 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\\n- * https://www.bitget.com/zh-CN/api-doc/contract/position/get-all-position\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/account/Get-Account-Funding-Assets\\n@@ -164,31 +155,7 @@ export const getFutureAccounts = (credential: ICredential, params: { productType\\n-export const getAllPositions = (\\n-  credential: ICredential,\\n-  params: { productType: string; marginCoin: string },\\n-) =>\\n-  requestPrivate<\\n-    ApiResponse<\\n-      {\\n-        symbol: string;\\n-        marginCoin: string;\\n-        holdSide: string;\\n-        openDelegateSize: string;\\n-        marginSize: string;\\n-        available: string;\\n-        locked: string;\\n-        total: string;\\n-        leverage: string;\\n-        achievedProfits: string;\\n-        openPriceAvg: string;\\n-        marginMode: string;\\n-        posMode: string;\\n-        unrealizedPL: string;\\n-        liquidationPrice: string;\\n-        keepMarginRate: string;\\n-        markPrice: string;\\n-        breakEvenPrice: string;\\n-        totalFee: string;\\n-        deductedFee: string;\\n-        cTime: string;\\n-      }[]\\n-    >\\n-  >(credential, 'GET', '/api/v2/mix/position/all-position', params);\\n+export const getAccountFundingAssets = (credential: ICredential, params?: { coin?: string }) =>\\n+  requestPrivate<ApiResponse<IUtaFundingAsset[]>>(\\n+    credential,\\n+    'GET',\\n+    '/api/v3/account/funding-assets',\\n+    params,\\n+  );\\n@@ -197 +164 @@ export const getAllPositions = (\\n- * 获取合约未完成订单列表\\n+ * 查询持仓\\n@@ -199 +166 @@ export const getAllPositions = (\\n- * 限速规则: 10次/1s (UID)\\n+ * 限速规则: 20次/1s (UID)\\n@@ -201 +168 @@ export const getAllPositions = (\\n- * https://www.bitget.com/zh-CN/api-doc/contract/trade/Get-Orders-Pending\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Get-Position\\n@@ -203 +170 @@ export const getAllPositions = (\\n-export const getFutureOrdersPending = (\\n+export const getCurrentPosition = (\\n@@ -205,11 +172 @@ export const getFutureOrdersPending = (\\n-  params: {\\n-    productType: string;\\n-    symbol?: string;\\n-    marginCoin?: string;\\n-    isPlan?: string;\\n-    orderType?: string;\\n-    startTime?: string;\\n-    endTime?: string;\\n-    pageSize?: string;\\n-    lastEndId?: string;\\n-  },\\n+  params: { category: string; symbol?: string; posSide?: string },\\n@@ -219,3 +176 @@ export const getFutureOrdersPending = (\\n-      nextFlag: boolean;\\n-      endId: string;\\n-      orderList: IFuturePendingOrder[];\\n+      list: IUtaPosition[];\\n@@ -223 +178 @@ export const getFutureOrdersPending = (\\n-  >(credential, 'GET', '/api/v2/mix/order/orders-pending', params);\\n+  >(credential, 'GET', '/api/v3/position/current-position', params);\\n@@ -226 +181 @@ export const getFutureOrdersPending = (\\n- * 获取现货未完成订单\\n+ * 查询未成交订单\\n@@ -228 +183 @@ export const getFutureOrdersPending = (\\n- * 限速规则 20次/1s (UID)\\n+ * 限速规则: 20次/1s (UID)\\n@@ -230 +185 @@ export const getFutureOrdersPending = (\\n- * https://www.bitget.com/zh-CN/api-doc/spot/trade/Get-Unfilled-Orders\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Get-Order-Pending\\n@@ -232 +187 @@ export const getFutureOrdersPending = (\\n-export const getSpotOrdersPending = (\\n+export const getUnfilledOrders = (\\n@@ -234,0 +190 @@ export const getSpotOrdersPending = (\\n+    category?: string;\\n@@ -238 +193,0 @@ export const getSpotOrdersPending = (\\n-    idLessThan?: string;\\n@@ -240,4 +195 @@ export const getSpotOrdersPending = (\\n-    orderId?: string;\\n-    tpslType?: string;\\n-    requestTime?: string;\\n-    receiveWindow?: string;\\n+    cursor?: string;\\n@@ -246,6 +198,6 @@ export const getSpotOrdersPending = (\\n-  requestPrivate<ApiResponse<ISpotPendingOrder[]>>(\\n-    credential,\\n-    'GET',\\n-    '/api/v2/spot/trade/unfilled-orders',\\n-    params,\\n-  );\\n+  requestPrivate<\\n+    ApiResponse<{\\n+      list: IUtaPendingOrder[];\\n+      cursor?: string;\\n+    }>\\n+  >(credential, 'GET', '/api/v3/trade/unfilled-orders', params);\\n@@ -256,3 +208 @@ export const getSpotOrdersPending = (\\n- * 普通用户:限速10次/秒，根据uid限频\\n- *\\n- * 跟单交易员:限速1次/秒，根据uid限频\\n+ * 限速规则: 10次/1s (UID)\\n@@ -260 +210 @@ export const getSpotOrdersPending = (\\n- * https://www.bitget.com/zh-CN/api-doc/contract/trade/Place-Order\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Place-Order\\n@@ -262 +212 @@ export const getSpotOrdersPending = (\\n-export const postFuturePlaceOrder = (\\n+export const postPlaceOrder = (\\n@@ -264,0 +215 @@ export const postFuturePlaceOrder = (\\n+    category: string;\\n@@ -266,5 +217 @@ export const postFuturePlaceOrder = (\\n-    productType: string;\\n-    marginMode: string;\\n-    marginCoin: string;\\n-    size: string;\\n-    price?: string;\\n+    qty: string;\\n@@ -272 +218,0 @@ export const postFuturePlaceOrder = (\\n-    tradeSide?: string;\\n@@ -274 +220,3 @@ export const postFuturePlaceOrder = (\\n-    force?: string;\\n+    price?: string;\\n+    timeInForce?: string;\\n+    posSide?: string;\\n@@ -277,2 +225,9 @@ export const postFuturePlaceOrder = (\\n-    presetStopSurplusPrice?: string;\\n-    presetStopLossPrice?: string;\\n+    stpMode?: string;\\n+    tpTriggerBy?: string;\\n+    slTriggerBy?: string;\\n+    takeProfit?: string;\\n+    stopLoss?: string;\\n+    tpOrderType?: string;\\n+    slOrderType?: string;\\n+    tpLimitPrice?: string;\\n+    slLimitPrice?: string;\\n@@ -284 +239 @@ export const postFuturePlaceOrder = (\\n-    '/api/v2/mix/order/place-order',\\n+    '/api/v3/trade/place-order',\\n@@ -291 +246,19 @@ export const postFuturePlaceOrder = (\\n- * 限速规则: 10次/1s\\n+ * 限速规则: 10次/1s (UID)\\n+ *\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Cancel-Order\\n+ */\\n+export const postCancelOrder = (\\n+  credential: ICredential,\\n+  params: { orderId?: string; clientOid?: string; category?: string },\\n+) =>\\n+  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\\n+    credential,\\n+    'POST',\\n+    '/api/v3/trade/cancel-order',\\n+    params,\\n+  );\\n+\\n+/**\\n+ * 改单\\n+ *\\n+ * 限速规则: 10次/1s (UID)\\n@@ -293 +266 @@ export const postFuturePlaceOrder = (\\n- * https://www.bitget.com/zh-CN/api-doc/contract/trade/Cancel-Order\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/trade/Modify-Order\\n@@ -295 +268 @@ export const postFuturePlaceOrder = (\\n-export const postFutureCancelOrder = (\\n+export const postModifyOrder = (\\n@@ -298,3 +270,0 @@ export const postFutureCancelOrder = (\\n-    symbol: string;\\n-    productType: string;\\n-    marginCoin?: string;\\n@@ -302,0 +273,5 @@ export const postFutureCancelOrder = (\\n+    qty?: string;\\n+    price?: string;\\n+    autoCancel?: string;\\n+    symbol?: string;\\n+    category?: string;\\n@@ -308 +283 @@ export const postFutureCancelOrder = (\\n-    '/api/v2/mix/order/cancel-order',\\n+    '/api/v3/trade/modify-order',\\n@@ -311,0 +287,29 @@ export const postFutureCancelOrder = (\\n+interface IWithdrawalRecord {\\n+  orderId: string;\\n+  tradeId: string;\\n+  coin: string;\\n+  clientOid: string;\\n+  type: string;\\n+  dest: string;\\n+  size: string;\\n+  status: string;\\n+  fromAddress: string;\\n+  toAddress: string;\\n+  chain: string;\\n+  cTime: string;\\n+}\\n+\\n+interface IDepositRecord {\\n+  orderId: string;\\n+  tradeId: string;\\n+  coin: string;\\n+  type: string;\\n+  dest: string;\\n+  size: string;\\n+  status: string;\\n+  fromAddress: string;\\n+  toAddress: string;\\n+  chain: string;\\n+  cTime: string;\\n+}\\n+\\n@@ -313,4 +316,0 @@ export const postFutureCancelOrder = (\\n- * 划转\\n- *\\n- * 限速规则 10次/1s (UID)\\n- *\\n@@ -318,2 +317,0 @@ export const postFutureCancelOrder = (\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Wallet-Transfer\\n@@ -341,12 +338,0 @@ export const postTransfer = (\\n- *\\n- * 限速规则 20次/1s (UID)\\n- *\\n- * 子母账户资产划转，该接口支持的划转类型包括\\n- *\\n- * 母账户转子账户（仅母账户APIKey有权限）\\n- * 子账户转母账户（仅母账户APIKey有权限）\\n- * 子账户转子账户（仅母账户APIKey有权限，并要求发起与接收方子账户归属于同一母账户）\\n- * 子账户内部划转（仅母账户APIKey有权限，并要求发起与接收方子账户为同一子账户）\\n- * 请求参数中的转入及转出账户UID须为母子/兄弟关系，且所有转账操作均只有母账户才有操作权限\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Sub-Transfer\\n@@ -376,6 +361,0 @@ export const postSubAccountTransfer = (\\n- *\\n- * 限速规则 5次/1s (UID)\\n- *\\n- * 提币接口 包括链上提币和内部提币。(需要在网页端添加地址到地址簿中)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Wallet-Withdrawal\\n@@ -407,6 +386,0 @@ export const postWithdraw = (\\n- *\\n- * 限速规则 10 次/1s (UID)\\n- *\\n- * 获取当前账号充币地址\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Deposit-Address\\n@@ -427,6 +400,0 @@ export const getDepositAddress = (credential: ICredential, params: { coin: strin\\n- *\\n- * 限速规则 10次/1s (UID)\\n- *\\n- * 获取提币记录\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Withdraw-Record\\n@@ -455,6 +422,0 @@ export const getWithdrawalRecords = (\\n- *\\n- * 限速规则 10次/1s (UID)\\n- *\\n- * 获取充币记录(不包含法币充值)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Deposit-Record\\n@@ -481,51 +442,0 @@ export const getDepositRecords = (\\n- * 获取账户现货资产\\n- *\\n- * 限速规则 10次/1s (UID)\\n- *\\n- * 获取账户币种资产\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Account-Assets\\n- */\\n-export const getSpotAssets = (credential: ICredential, params?: { coin?: string; assetType?: string }) =>\\n-  requestPrivate<\\n-    ApiResponse<\\n-      {\\n-        coin: string;\\n-        available: string;\\n-        frozen: string;\\n-        locked: string;\\n-        limitAvailable: string;\\n-        uTime: string;\\n-      }[]\\n-    >\\n-  >(credential, 'GET', '/api/v2/spot/account/assets', params);\\n-\\n-/**\\n- * 获取所有子账户现货资产\\n- *\\n- * 限速规则 10次/1s (UID)\\n- *\\n- * 获取所有子账户现货资产。仅限非代理商(非ND Broker)用户调用。\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/account/Get-Subaccount-Assets\\n- */\\n-export const getSubAccountSpotAssets = (credential: ICredential) =>\\n-  requestPrivate<\\n-    ApiResponse<{\\n-      userId: string;\\n-      assetsList: {\\n-        coin: string;\\n-        available: string;\\n-        limitAvailable: string;\\n-        frozen: string;\\n-        locked: string;\\n-        uTime: string;\\n-      }[];\\n-    }>\\n-  >(credential, 'GET', '/api/v2/spot/account/subaccount-assets');\\n-\\n-/**\\n- * 查询子账户列表\\n- *\\n- * 限速规则 1次/1s (UID)\\n- *\\n@@ -533,2 +443,0 @@ export const getSubAccountSpotAssets = (credential: ICredential) =>\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/common/vsubaccount/Get-Virtual-Subaccount-List\\n@@ -551,120 +459,0 @@ export const getVirtualSubAccountList = (\\n-/**\\n- * 获取财务记录\\n- *\\n- * 限速规则 20次/1s (UID)\\n- *\\n- * 获取财务记录\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/uta/account/Get-Financial-Records\\n- */\\n-export const getAccountFinancialRecord = (\\n-  credential: ICredential,\\n-  params?: {\\n-    category: string;\\n-    coin?: string;\\n-    type?: string;\\n-    startTime?: string;\\n-    endTime?: string;\\n-    limit?: string;\\n-    cursor?: string;\\n-  },\\n-) => requestPrivate<ApiResponse<unknown>>(credential, 'GET', '/api/v3/account/financial-records', params);\\n-\\n-/**\\n- * 现货下单\\n- *\\n- * 限速规则: 20次/1s (UID)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/trade/Place-Order\\n- */\\n-export const postSpotPlaceOrder = (\\n-  credential: ICredential,\\n-  params: {\\n-    symbol: string;\\n-    side: string;\\n-    orderType: string;\\n-    force?: string;\\n-    price?: string;\\n-    quantity?: string;\\n-    clientOid?: string;\\n-  },\\n-) =>\\n-  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\\n-    credential,\\n-    'POST',\\n-    '/api/v2/spot/trade/place-order',\\n-    params,\\n-  );\\n-\\n-/**\\n- * 现货撤单\\n- *\\n- * 限速规则: 20次/1s (UID)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/trade/Cancel-Order\\n- */\\n-export const postSpotCancelOrder = (\\n-  credential: ICredential,\\n-  params: {\\n-    symbol: string;\\n-    orderId?: string;\\n-    clientOid?: string;\\n-  },\\n-) =>\\n-  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\\n-    credential,\\n-    'POST',\\n-    '/api/v2/spot/trade/cancel-order',\\n-    params,\\n-  );\\n-\\n-/**\\n- * 现货改单 (Cancel-Replace)\\n- *\\n- * 限速规则: 20次/1s (UID)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/trade/cancel-replace-order\\n- */\\n-export const postSpotCancelReplaceOrder = (\\n-  credential: ICredential,\\n-  params: {\\n-    symbol: string;\\n-    orderId?: string;\\n-    clientOid?: string;\\n-    newSize?: string;\\n-    newPrice?: string;\\n-    newClientOid?: string;\\n-  },\\n-) =>\\n-  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\\n-    credential,\\n-    'POST',\\n-    '/api/v2/spot/trade/cancel-replace-order',\\n-    params,\\n-  );\\n-\\n-/**\\n- * 合约改单\\n- *\\n- * 限速规则: 20次/1s (UID)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/trade/Modify-Order\\n- */\\n-export const postFutureModifyOrder = (\\n-  credential: ICredential,\\n-  params: {\\n-    symbol: string;\\n-    productType: string;\\n-    orderId?: string;\\n-    clientOid?: string;\\n-    newSize?: string;\\n-    newPrice?: string;\\n-  },\\n-) =>\\n-  requestPrivate<ApiResponse<{ orderId: string; clientOid: string }>>(\\n-    credential,\\n-    'POST',\\n-    '/api/v2/mix/order/modify-order',\\n-    params,\\n-  );\\n-\\n\"\n},\n{\n  \"additions\": 99,\n  \"deletions\": 195,\n  \"path\": \"apps/vendor-bitget/src/api/public-api.ts\",",
              "lineStart": 125,
              "lineEnd": 130
            },
            {
              "type": "function",
              "name": "getMarketContracts",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/api/public-api.ts b/apps/vendor-bitget/src/api/public-api.ts\\nindex 9a3f8b0c9..3101848ad 100644\\n--- a/apps/vendor-bitget/src/api/public-api.ts\\n+++ b/apps/vendor-bitget/src/api/public-api.ts\\n@@ -10 +10,2 @@ type ApiResponse<T> = {\\n-export interface IMixMarketContract {\\n+export interface IUtaInstrument {\\n+  category: string;\\n@@ -11,0 +13 @@ export interface IMixMarketContract {\\n+  isRwa?: string;\\n@@ -16,51 +18,5 @@ export interface IMixMarketContract {\\n-  feeRateUpRatio: string;\\n-  makerFeeRate: string;\\n-  takerFeeRate: string;\\n-  openCostUpRatio: string;\\n-  supportMarginCoins: string[];\\n-  minTradeNum: string;\\n-  priceEndStep: string;\\n-  volumePlace: string;\\n-  pricePlace: string;\\n-  sizeMultiplier: string;\\n-  symbolType: string;\\n-  minTradeUSDT: string;\\n-  maxSymbolOrderNum: string;\\n-  maxProductOrderNum: string;\\n-  maxPositionNum: string;\\n-  symbolStatus: string;\\n-  offTime: string;\\n-  limitOpenTime: string;\\n-  deliveryTime: string;\\n-  deliveryStartTime: string;\\n-  deliveryPeriod: string;\\n-  launchTime: string;\\n-  fundInterval: string;\\n-  minLever: string;\\n-  maxLever: string;\\n-  posLimit: string;\\n-  maintainTime: string;\\n-  openTime: string;\\n-  maxMarketOrderQty: string;\\n-  maxOrderQty: string;\\n-  isRwa: string;\\n-}\\n-\\n-export interface IMixMarketSymbol {\\n-  symbol: string;\\n-  baseCoin: string;\\n-  quoteCoin: string;\\n-}\\n-\\n-export interface IMarginCurrency {\\n-  symbol: string;\\n-  baseCoin: string;\\n-  quoteCoin: string;\\n-  maxCrossedLeverage: string;\\n-  maxIsolatedLeverage: string;\\n-  warningRiskRatio: string;\\n-  liquidationRiskRatio: string;\\n-  minTradeAmount: string;\\n-  maxTradeAmount: string;\\n-  takerFeeRate: string;\\n-  makerFeeRate: string;\\n+  feeRateUpRatio?: string;\\n+  openCostUpRatio?: string;\\n+  minOrderQty?: string;\\n+  maxOrderQty?: string;\\n+  minOrderAmount?: string;\\n@@ -69,3 +25,7 @@ export interface IMarginCurrency {\\n-  minTradeUSDT: string;\\n-  isBorrowable: boolean;\\n-  userMinBorrow: string;\\n+  quotePrecision?: string;\\n+  priceMultiplier?: string;\\n+  quantityMultiplier?: string;\\n+  symbolType?: string;\\n+  maxSymbolOrderNum?: string;\\n+  maxProductOrderNum?: string;\\n+  maxPositionNum?: string;\\n@@ -73,3 +33,19 @@ export interface IMarginCurrency {\\n-  isIsolatedBaseBorrowable: boolean;\\n-  isIsolatedQuoteBorrowable: boolean;\\n-  isCrossBorrowable: boolean;\\n+  offTime?: string;\\n+  limitOpenTime?: string;\\n+  deliveryTime?: string;\\n+  deliveryStartTime?: string;\\n+  deliveryPeriod?: string;\\n+  launchTime?: string;\\n+  fundInterval?: string;\\n+  minLeverage?: string;\\n+  maxLeverage?: string;\\n+  maintainTime?: string;\\n+  maxMarketOrderQty?: string;\\n+  isIsolatedBaseBorrowable?: string;\\n+  isIsolatedQuotedBorrowable?: string;\\n+  warningRiskRatio?: string;\\n+  liquidationRiskRatio?: string;\\n+  maxCrossedLeverage?: string;\\n+  maxIsolatedLeverage?: string;\\n+  userMinBorrow?: string;\\n+  areaSymbol?: string;\\n@@ -78 +54,2 @@ export interface IMarginCurrency {\\n-export interface IFutureMarketTicker {\\n+export interface IUtaTicker {\\n+  category: string;\\n@@ -80,10 +57,18 @@ export interface IFutureMarketTicker {\\n-  productType: string;\\n-  lastPr: string;\\n-  askPr: string;\\n-  askSz: string;\\n-  bidPr: string;\\n-  bidSz: string;\\n-  fundingRate: string;\\n-  holdingAmount: string;\\n-  high24h?: string;\\n-  low24h?: string;\\n+  lastPrice: string;\\n+  openPrice24h: string;\\n+  highPrice24h: string;\\n+  lowPrice24h: string;\\n+  ask1Price: string;\\n+  bid1Price: string;\\n+  bid1Size: string;\\n+  ask1Size: string;\\n+  price24hPcnt: string;\\n+  volume24h: string;\\n+  turnover24h: string;\\n+  indexPrice?: string;\\n+  markPrice?: string;\\n+  fundingRate?: string;\\n+  openInterest?: string;\\n+  deliveryStartTime?: string;\\n+  deliveryTime?: string;\\n+  deliveryStatus?: string;\\n@@ -93 +78 @@ export interface IFutureMarketTicker {\\n-export interface IFundingTimeInfo {\\n+export interface IUtaOpenInterestRow {\\n@@ -95,3 +80 @@ export interface IFundingTimeInfo {\\n-  productType: string;\\n-  nextFundingTime: string;\\n-  ratePeriod: string;\\n+  openInterest: string;\\n@@ -100 +83 @@ export interface IFundingTimeInfo {\\n-export interface IHistoricalFundingRate {\\n+export interface IUtaCurrentFundingRate {\\n@@ -102 +84,0 @@ export interface IHistoricalFundingRate {\\n-  productType: string;\\n@@ -104,2 +86,4 @@ export interface IHistoricalFundingRate {\\n-  fundingTime: string;\\n-  ratePeriod: string;\\n+  fundingRateInterval: string;\\n+  nextUpdate: string;\\n+  minFundingRate: string;\\n+  maxFundingRate: string;\\n@@ -108,34 +92 @@ export interface IHistoricalFundingRate {\\n-/**\\n- * 获取合约信息\\n- *\\n- * 20次/S 根据ip限频\\n- *\\n- * 获取合约详情信息。\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-All-Symbols-Contracts\\n- */\\n-export const getMarketContracts = (params: {\\n-  symbol?: string;\\n-  productType: string;\\n-}): Promise<ApiResponse<IMixMarketContract[]>> =>\\n-  requestPublic<ApiResponse<IMixMarketContract[]>>('GET', '/api/v2/mix/market/contracts', params);\\n-\\n-/**\\n- * 获取支持杠杆的所有交易对\\n- * 限速规则 10次/1s (IP)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/margin/common/support-currencies\\n- */\\n-export const getMarginCurrencies = (): Promise<ApiResponse<IMarginCurrency[]>> =>\\n-  requestPublic<ApiResponse<IMarginCurrency[]>>('GET', '/api/v2/margin/currencies');\\n-\\n-/**\\n- * 获取单个交易对行情\\n- *\\n- * 限速规则: 20次/1s (IP)\\n- *\\n- * 获取指定产品类型下，单个交易对的行情数据\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-Ticker\\n- */\\n-export const getFutureMarketTicker = (params: {\\n+export interface IUtaHistoricalFundingRate {\\n@@ -143,3 +94,3 @@ export const getFutureMarketTicker = (params: {\\n-  productType: string;\\n-}): Promise<ApiResponse<IFutureMarketTicker>> =>\\n-  requestPublic<ApiResponse<IFutureMarketTicker>>('GET', '/api/v2/mix/market/ticker', params);\\n+  fundingRate: string;\\n+  fundingRateTimestamp: string;\\n+}\\n@@ -148 +99 @@ export const getFutureMarketTicker = (params: {\\n- * 获取全部交易对行情\\n+ * 获取交易产品\\n@@ -152,3 +103 @@ export const getFutureMarketTicker = (params: {\\n- * 获取指定产品类型下，全部交易对的行情数据\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-All-Symbol-Ticker\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Instruments\\n@@ -156,4 +105,2 @@ export const getFutureMarketTicker = (params: {\\n-export const getFutureMarketTickers = (params: {\\n-  productType: string;\\n-}): Promise<ApiResponse<IFutureMarketTicker[]>> =>\\n-  requestPublic<ApiResponse<IFutureMarketTicker[]>>('GET', '/api/v2/mix/market/tickers', params);\\n+export const getInstruments = (params: { category: string; symbol?: string }) =>\\n+  requestPublic<ApiResponse<IUtaInstrument[]>>('GET', '/api/v3/market/instruments', params);\\n@@ -162 +109 @@ export const getFutureMarketTickers = (params: {\\n- * 获取平台总持仓量\\n+ * 获取行情 Tickers\\n@@ -166,3 +113 @@ export const getFutureMarketTickers = (params: {\\n- * 获取某交易对在平台的总持仓量\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-Open-Interest\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Tickers\\n@@ -170,9 +115,2 @@ export const getFutureMarketTickers = (params: {\\n-export const getOpenInterest = (params: {\\n-  symbol: string;\\n-  productType: string;\\n-}): Promise<ApiResponse<{ symbol: string; amount: string }[]>> =>\\n-  requestPublic<ApiResponse<{ symbol: string; amount: string }[]>>(\\n-    'GET',\\n-    '/api/v2/mix/market/open-interest',\\n-    params,\\n-  );\\n+export const getTickers = (params: { category: string; symbol?: string }) =>\\n+  requestPublic<ApiResponse<IUtaTicker[]>>('GET', '/api/v3/market/tickers', params);\\n@@ -181 +119 @@ export const getOpenInterest = (params: {\\n- * 获取下次资金费结算时间\\n+ * 获取持仓量\\n@@ -185,3 +123 @@ export const getOpenInterest = (params: {\\n- * 获取合约下一次的结算时间以及该合约的结算周期\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-Symbol-Next-Funding-Time\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Get-Open-Interest\\n@@ -189,5 +125,2 @@ export const getOpenInterest = (params: {\\n-export const getNextFundingTime = (params: {\\n-  symbol: string;\\n-  productType: string;\\n-}): Promise<ApiResponse<IFundingTimeInfo[]>> =>\\n-  requestPublicWithFlowControl<ApiResponse<IFundingTimeInfo[]>>(\\n+export const getOpenInterestV3 = (params: { category: string; symbol?: string }) =>\\n+  requestPublic<ApiResponse<{ list: IUtaOpenInterestRow[]; ts: string }>>(\\n@@ -195,2 +128 @@ export const getNextFundingTime = (params: {\\n-    '/api/v2/mix/market/funding-time',\\n-    { period: 1000, limit: 20 },\\n+    '/api/v3/market/open-interest',\\n@@ -201 +133 @@ export const getNextFundingTime = (params: {\\n- * 获取历史资金费率\\n+ * 获取当前资金费率\\n@@ -205,3 +137 @@ export const getNextFundingTime = (params: {\\n- * 获取合约的历史资金费率\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-History-Funding-Rate\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Get-Current-Funding-Rate\\n@@ -209,12 +139,2 @@ export const getNextFundingTime = (params: {\\n-export const getHistoricalFundingRate = (params: {\\n-  symbol: string;\\n-  productType: string;\\n-  pageSize?: string;\\n-  pageNo?: string;\\n-}): Promise<ApiResponse<IHistoricalFundingRate[]>> =>\\n-  requestPublicWithFlowControl<ApiResponse<IHistoricalFundingRate[]>>(\\n-    'GET',\\n-    '/api/v2/mix/market/history-fund-rate',\\n-    { period: 1000, limit: 20 },\\n-    params,\\n-  );\\n+export const getCurrentFundingRate = (params: { symbol: string }) =>\\n+  requestPublic<ApiResponse<IUtaCurrentFundingRate[]>>('GET', '/api/v3/market/current-fund-rate', params);\\n@@ -223 +143 @@ export const getHistoricalFundingRate = (params: {\\n- * 获取合约 K 线数据\\n+ * 获取历史资金费率\\n@@ -227 +147 @@ export const getHistoricalFundingRate = (params: {\\n- * https://www.bitget.com/zh-CN/api-doc/contract/market/Get-Candle-Data\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Get-History-Funding-Rate\\n@@ -229 +149,2 @@ export const getHistoricalFundingRate = (params: {\\n-export const getMixCandles = (params: {\\n+export const getHistoryFundingRate = (params: {\\n+  category: string;\\n@@ -231,4 +152 @@ export const getMixCandles = (params: {\\n-  productType: string;\\n-  granularity: string;\\n-  startTime?: string;\\n-  endTime?: string;\\n+  cursor?: string;\\n@@ -236,2 +154,2 @@ export const getMixCandles = (params: {\\n-}): Promise<ApiResponse<[string, string, string, string, string, string, string][]>> =>\\n-  requestPublic<ApiResponse<[string, string, string, string, string, string, string][]>>(\\n+}) =>\\n+  requestPublicWithFlowControl<ApiResponse<{ resultList: IUtaHistoricalFundingRate[] }>>(\\n@@ -239 +157,2 @@ export const getMixCandles = (params: {\\n-    '/api/v2/mix/market/candles',\\n+    '/api/v3/market/history-fund-rate',\\n+    { period: 1000, limit: 20 },\\n@@ -244 +163 @@ export const getMixCandles = (params: {\\n- * 获取现货 K 线数据\\n+ * 获取历史 K 线\\n@@ -248 +167 @@ export const getMixCandles = (params: {\\n- * https://www.bitget.com/zh-CN/api-doc/spot/market/Get-Candle-Data\\n+ * https://www.bitget.com/zh-CN/api-doc/uta/public/Get-History-Candle-Data\\n@@ -250 +169,2 @@ export const getMixCandles = (params: {\\n-export const getSpotCandles = (params: {\\n+export const getHistoryCandles = (params: {\\n+  category: string;\\n@@ -252 +172 @@ export const getSpotCandles = (params: {\\n-  granularity: string;\\n+  interval: string;\\n@@ -254,0 +175 @@ export const getSpotCandles = (params: {\\n+  type?: string;\\n@@ -256 +177 @@ export const getSpotCandles = (params: {\\n-}): Promise<ApiResponse<[string, string, string, string, string, string, string][]>> =>\\n+}) =>\\n@@ -259 +180 @@ export const getSpotCandles = (params: {\\n-    '/api/v2/spot/market/candles',\\n+    '/api/v3/market/history-candles',\\n@@ -262,17 +182,0 @@ export const getSpotCandles = (params: {\\n-\\n-export interface ISpotSymbol {\\n-  symbol: string;\\n-  baseCoin: string;\\n-  quoteCoin: string;\\n-  status: string;\\n-}\\n-\\n-/**\\n- * 获取所有现货交易对\\n- *\\n- * 限速规则: 20次/1s (IP)\\n- *\\n- * https://www.bitget.com/zh-CN/api-doc/spot/market/Get-Symbols\\n- */\\n-export const getSpotSymbols = (): Promise<ApiResponse<ISpotSymbol[]>> =>\\n-  requestPublic<ApiResponse<ISpotSymbol[]>>('GET', '/api/v2/spot/public/symbols');\\n\"\n},\n{\n  \"additions\": 59,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-bitget/src/services/accounts/account.ts\",",
              "lineStart": 131,
              "lineEnd": 136
            },
            {
              "type": "function",
              "name": "mapDerivativePosition",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/accounts/account.ts b/apps/vendor-bitget/src/services/accounts/account.ts\\nnew file mode 100644\\nindex 000000000..27c6fca03\\n--- /dev/null\\n+++ b/apps/vendor-bitget/src/services/accounts/account.ts\\n@@ -0,0 +1,59 @@\\n+import { IPosition, makeSpotPosition } from '@yuants/data-account';\\n+import { encodePath } from '@yuants/utils';\\n+import { getAccountAssets, getCurrentPosition, IUtaPosition } from '../../api/private-api';\\n+import { getTickers } from '../../api/public-api';\\n+import { ICredential } from '../../api/types';\\n+\\n+const mapDerivativePosition = (position: IUtaPosition): IPosition => ({\\n+  position_id: `${position.symbol}-${position.posSide}`,\\n+  datasource_id: 'BITGET',\\n+  product_id: encodePath('BITGET', position.category, position.symbol),\\n+  direction: position.posSide === 'long' ? 'LONG' : 'SHORT',\\n+  volume: +position.total,\\n+  free_volume: +(position.available ?? 0),\\n+  position_price: +position.avgPrice,\\n+  closable_price: +(position.markPrice ?? 0),\\n+  floating_profit: +(position.unrealisedPnl ?? 0),\\n+  valuation: +position.total * +(position.markPrice ?? 0),\\n+});\\n+\\n+export const getAccountInfo = async (credential: ICredential): Promise<IPosition[]> => {\\n+  const categories = ['USDT-FUTURES', 'COIN-FUTURES'];\\n+  const [assetsRes, positionsResList, spotTickersRes] = await Promise.all([\\n+    getAccountAssets(credential),\\n+    Promise.all(categories.map((category) => getCurrentPosition(credential, { category }))),\\n+    getTickers({ category: 'SPOT' }),\\n+  ]);\\n+\\n+  if (assetsRes.msg !== 'success') {\\n+    throw new Error(assetsRes.msg);\\n+  }\\n+  if (spotTickersRes.msg !== 'success') {\\n+    throw new Error(spotTickersRes.msg);\\n+  }\\n+\\n+  const spotPriceMap = new Map<string, number>(\\n+    (spotTickersRes.data ?? []).map((ticker) => [ticker.symbol, Number(ticker.lastPrice)]),\\n+  );\\n+\\n+  const derivativePositions = positionsResList.flatMap((res, idx) => {\\n+    if (res.msg !== 'success') {\\n+      throw new Error(res.msg);\\n+    }\\n+    const category = categories[idx];\\n+    return (res.data?.list ?? []).map((position) => mapDerivativePosition({ ...position, category }));\\n+  });\\n+\\n+  const spotPositions =\\n+    assetsRes.data?.assets?.map((asset) =>\\n+      makeSpotPosition({\\n+        position_id: asset.coin,\\n+        product_id: encodePath('BITGET', 'SPOT', `${asset.coin}USDT`),\\n+        volume: +asset.available,\\n+        free_volume: +asset.available,\\n+        closable_price: spotPriceMap.get(`${asset.coin}USDT`) ?? 1,\\n+      }),\\n+    ) ?? [];\\n+\\n+  return [...derivativePositions, ...spotPositions];\\n+};\\n\"\n},\n{\n  \"additions\": 0,\n  \"deletions\": 64,\n  \"path\": \"apps/vendor-bitget/src/services/accounts/futures.ts\",",
              "lineStart": 137,
              "lineEnd": 142
            },
            {
              "type": "function",
              "name": "mapPosition",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/accounts/futures.ts b/apps/vendor-bitget/src/services/accounts/futures.ts\\ndeleted file mode 100644\\nindex 957cd06b1..000000000\\n--- a/apps/vendor-bitget/src/services/accounts/futures.ts\\n+++ /dev/null\\n@@ -1,64 +0,0 @@\\n-import { IPosition } from '@yuants/data-account';\\n-import { IOrder } from '@yuants/data-order';\\n-import { encodePath } from '@yuants/utils';\\n-import { getAllPositions, getFutureOrdersPending } from '../../api/private-api';\\n-import { ICredential } from '../../api/types';\\n-\\n-const mapPosition = (position: any): IPosition => ({\\n-  position_id: `${position.symbol}-${position.holdSide}`,\\n-  datasource_id: 'BITGET',\\n-  product_id: encodePath('BITGET', 'USDT-FUTURES', position.symbol),\\n-  direction: position.holdSide === 'long' ? 'LONG' : 'SHORT',\\n-  volume: +position.total,\\n-  free_volume: +position.available,\\n-  position_price: +position.openPriceAvg,\\n-  closable_price: +position.markPrice,\\n-  floating_profit: +position.unrealizedPL,\\n-  valuation: +position.total * +position.markPrice,\\n-});\\n-\\n-const mapOrderDirection = (order: any) => {\\n-  const side = order.side;\\n-  const tradeSide = order.tradeSide ?? order.posSide;\\n-  if (tradeSide === 'open') {\\n-    return side === 'buy' ? 'OPEN_LONG' : 'OPEN_SHORT';\\n-  }\\n-  if (tradeSide === 'close') {\\n-    return side === 'buy' ? 'CLOSE_SHORT' : 'CLOSE_LONG';\\n-  }\\n-  if (tradeSide === 'long') {\\n-    return side === 'buy' ? 'OPEN_LONG' : 'CLOSE_LONG';\\n-  }\\n-  if (tradeSide === 'short') {\\n-    return side === 'buy' ? 'CLOSE_SHORT' : 'OPEN_SHORT';\\n-  }\\n-  return side === 'buy' ? 'OPEN_LONG' : 'OPEN_SHORT';\\n-};\\n-\\n-export const getFuturesAccountInfo = async (credential: ICredential) => {\\n-  const positionsRes = await getAllPositions(credential, { productType: 'USDT-FUTURES', marginCoin: 'USDT' });\\n-  if (positionsRes.msg !== 'success') {\\n-    throw new Error(positionsRes.msg);\\n-  }\\n-  return positionsRes.data.map(mapPosition);\\n-};\\n-\\n-export const listFuturePendingOrders = async (credential: ICredential): Promise<IOrder[]> => {\\n-  const res = await getFutureOrdersPending(credential, { productType: 'USDT-FUTURES', marginCoin: 'USDT' });\\n-  if (res.msg !== 'success') {\\n-    throw new Error(res.msg);\\n-  }\\n-  const list = res.data?.orderList ?? [];\\n-  return list.map((order: any) => ({\\n-    order_id: order.orderId,\\n-    account_id: '',\\n-    product_id: encodePath('BITGET', order.productType ?? 'USDT-FUTURES', order.symbol),\\n-    submit_at: +(order.cTime ?? order.createdTime ?? order.uTime ?? Date.now()),\\n-    order_type: order.orderType === 'limit' ? 'LIMIT' : order.orderType === 'market' ? 'MARKET' : 'UNKNOWN',\\n-    order_direction: mapOrderDirection(order),\\n-    volume: +order.size,\\n-    traded_volume: +(order.filledQty ?? 0),\\n-    price: order.price ? +order.price : undefined,\\n-    traded_price: order.priceAvg ? +order.priceAvg : undefined,\\n-  }));\\n-};\\n\"\n},\n{\n  \"additions\": 8,\n  \"deletions\": 8,\n  \"path\": \"apps/vendor-bitget/src/services/accounts/profile.ts\",",
              "lineStart": 143,
              "lineEnd": 148
            },
            {
              "type": "function",
              "name": "fetchAccountProfile",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/accounts/profile.ts b/apps/vendor-bitget/src/services/accounts/profile.ts\\nindex e87037066..e70f94f70 100644\\n--- a/apps/vendor-bitget/src/services/accounts/profile.ts\\n+++ b/apps/vendor-bitget/src/services/accounts/profile.ts\\n@@ -3 +3 @@ import { getDefaultCredential } from '../../api/client';\\n-import { getAccountInfo } from '../../api/private-api';\\n+import { getAccountSettings } from '../../api/private-api';\\n@@ -14 +14 @@ const fetchAccountProfile = async (credential: ICredential): Promise<IAccountPro\\n-  const res = await getAccountInfo(credential);\\n+  const res = await getAccountSettings(credential);\\n@@ -16 +16 @@ const fetchAccountProfile = async (credential: ICredential): Promise<IAccountPro\\n-    throw new Error(`Bitget getAccountInfo failed: ${res.code} ${res.msg}`);\\n+    throw new Error(`Bitget getAccountSettings failed: ${res.code} ${res.msg}`);\\n@@ -19,2 +19,2 @@ const fetchAccountProfile = async (credential: ICredential): Promise<IAccountPro\\n-  if (!data?.userId) {\\n-    throw new Error(`Bitget getAccountInfo returned invalid payload: ${JSON.stringify(data)}`);\\n+  if (!data?.uid) {\\n+    throw new Error(`Bitget getAccountSettings returned invalid payload: ${JSON.stringify(data)}`);\\n@@ -22,3 +22,3 @@ const fetchAccountProfile = async (credential: ICredential): Promise<IAccountPro\\n-  const uid = data.userId;\\n-  const parentId = `${data.parentId ?? data.userId}`;\\n-  return { uid, parentId, isMainAccount: uid === parentId };\\n+  const uid = data.uid;\\n+  const parentId = uid;\\n+  return { uid, parentId, isMainAccount: true };\\n\"\n},\n{\n  \"additions\": 0,\n  \"deletions\": 57,\n  \"path\": \"apps/vendor-bitget/src/services/accounts/spot.ts\",",
              "lineStart": 149,
              "lineEnd": 154
            },
            {
              "type": "function",
              "name": "mapSpotOrders",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/accounts/spot.ts b/apps/vendor-bitget/src/services/accounts/spot.ts\\ndeleted file mode 100644\\nindex bb1de5316..000000000\\n--- a/apps/vendor-bitget/src/services/accounts/spot.ts\\n+++ /dev/null\\n@@ -1,57 +0,0 @@\\n-import { makeSpotPosition } from '@yuants/data-account';\\n-import { IOrder } from '@yuants/data-order';\\n-import { encodePath } from '@yuants/utils';\\n-import { getSpotAssets, getSpotOrdersPending } from '../../api/private-api';\\n-import { ICredential } from '../../api/types';\\n-\\n-const mapSpotOrders = (data: any): any[] => {\\n-  if (!data) return [];\\n-  if (Array.isArray(data)) return data;\\n-  if (Array.isArray(data.orderList)) return data.orderList;\\n-  if (Array.isArray(data.orders)) return data.orders;\\n-  if (Array.isArray(data.resultList)) return data.resultList;\\n-  return [];\\n-};\\n-\\n-const mapSpotOrderDirection = (side?: string) => (side === 'sell' ? 'OPEN_SHORT' : 'OPEN_LONG');\\n-\\n-export const getSpotAccountInfo = async (credential: ICredential) => {\\n-  const res = await getSpotAssets(credential);\\n-  if (res.msg !== 'success') {\\n-    throw new Error(res.msg);\\n-  }\\n-  return res.data.map((v) => {\\n-    return makeSpotPosition({\\n-      position_id: v.coin,\\n-      product_id: encodePath('BITGET', 'SPOT', `${v.coin}-USDT`),\\n-      volume: +v.available,\\n-      free_volume: +v.available,\\n-      closable_price: 1, // TODO: use real price\\n-    });\\n-  });\\n-};\\n-\\n-export const listSpotPendingOrders = async (credential: ICredential): Promise<IOrder[]> => {\\n-  const res = await getSpotOrdersPending(credential);\\n-  if (res.msg !== 'success') {\\n-    throw new Error(res.msg);\\n-  }\\n-  const list = mapSpotOrders(res.data);\\n-  return list\\n-    .map((order) => {\\n-      const symbol = order.symbol ?? order.instId;\\n-      if (!symbol) return null;\\n-      return {\\n-        order_id: order.orderId ?? order.clientOid,\\n-        account_id: '',\\n-        product_id: encodePath('BITGET', 'SPOT', symbol),\\n-        order_type: order.orderType === 'market' ? 'MARKET' : 'LIMIT',\\n-        order_direction: mapSpotOrderDirection(order.side),\\n-        volume: +(order.size ?? order.quantity ?? order.baseSz ?? order.baseAmount ?? 0),\\n-        traded_volume: +(order.fillSz ?? order.filledQty ?? order.baseFilled ?? 0),\\n-        price: order.price ? +order.price : undefined,\\n-        submit_at: +(order.cTime ?? order.createTime ?? order.createdTime ?? Date.now()),\\n-      };\\n-    })\\n-    .filter((order): order is NonNullable<typeof order> => Boolean(order));\\n-};\\n\"\n},\n{\n  \"additions\": 4,\n  \"deletions\": 18,\n  \"path\": \"apps/vendor-bitget/src/services/exchange.ts\",",
              "lineStart": 155,
              "lineEnd": 160
            },
            {
              "type": "function",
              "name": "profile",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/exchange.ts b/apps/vendor-bitget/src/services/exchange.ts\\nindex d6487220d..e2b19e2a0 100644\\n--- a/apps/vendor-bitget/src/services/exchange.ts\\n+++ b/apps/vendor-bitget/src/services/exchange.ts\\n@@ -7 +6,0 @@ import { ICredential } from '../api/types';\\n-import { getFuturesAccountInfo as getFuturesPositions } from './accounts/futures';\\n@@ -9 +8 @@ import { resolveAccountProfile } from './accounts/profile';\\n-import { getSpotAccountInfo as getSpotPositions } from './accounts/spot';\\n+import { getAccountInfo } from './accounts/account';\\n@@ -37,6 +36 @@ provideExchangeServices<ICredential>(terminal, {\\n-    const profile = await resolveAccountProfile(credential);\\n-    const [futuresPositions, spotPositions] = await Promise.all([\\n-      getFuturesPositions(credential),\\n-      getSpotPositions(credential),\\n-    ]);\\n-    return [...futuresPositions, ...spotPositions];\\n+    return getAccountInfo(credential);\\n@@ -56,10 +50,2 @@ provideExchangeServices<ICredential>(terminal, {\\n-    const profile = await resolveAccountProfile(credential);\\n-    if (instType === 'SPOT') {\\n-      const positions = await getSpotPositions(credential);\\n-      return positions.filter((position) => position.product_id === product_id);\\n-    }\\n-    if (instType === 'USDT-FUTURES') {\\n-      const positions = await getFuturesPositions(credential);\\n-      return positions.filter((position) => position.product_id === product_id);\\n-    }\\n-    throw new Error(`Unsupported instType: ${instType}`);\\n+    const positions = await getAccountInfo(credential);\\n+    return positions.filter((position) => position.product_id === product_id);\\n\"\n},\n{\n  \"additions\": 15,\n  \"deletions\": 14,\n  \"path\": \"apps/vendor-bitget/src/services/markets/interest-rate.ts\",",
              "lineStart": 161,
              "lineEnd": 166
            },
            {
              "type": "function",
              "name": "spotSymbolCache",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/markets/interest-rate.ts b/apps/vendor-bitget/src/services/markets/interest-rate.ts\\nindex bfe937852..9ed0ce9b3 100644\\n--- a/apps/vendor-bitget/src/services/markets/interest-rate.ts\\n+++ b/apps/vendor-bitget/src/services/markets/interest-rate.ts\\n@@ -9 +9 @@ import { getSpotCrossInterestRate } from '../../api/private-api';\\n-import { IHistoricalFundingRate, getHistoricalFundingRate, getSpotSymbols } from '../../api/public-api';\\n+import { IUtaHistoricalFundingRate, getHistoryFundingRate, getInstruments } from '../../api/public-api';\\n@@ -13 +13 @@ const spotSymbolCache = createCache(\\n-    const res = await getSpotSymbols();\\n+    const res = await getInstruments({ category: 'SPOT' });\\n@@ -15 +15 @@ const spotSymbolCache = createCache(\\n-      throw new Error(`Bitget getSpotSymbols failed: ${res.code} ${res.msg}`);\\n+      throw new Error(`Bitget getInstruments failed: ${res.code} ${res.msg}`);\\n@@ -17 +17 @@ const spotSymbolCache = createCache(\\n-    return res.data.reduce((acc, v) => {\\n+    return res.data.reduce((acc: Record<string, { baseCoin: string; quoteCoin: string }>, v) => {\\n@@ -20 +20 @@ const spotSymbolCache = createCache(\\n-    }, {} as Record<string, { baseCoin: string; quoteCoin: string }>);\\n+    }, {});\\n@@ -36 +36,2 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-        const res = await getHistoricalFundingRate({\\n+        const res = await getHistoryFundingRate({\\n+          category: 'USDT-FUTURES',\\n@@ -38,3 +39,2 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-          productType: instType,\\n-          pageSize: '100',\\n-          pageNo: '' + current_page,\\n+          limit: '100',\\n+          cursor: '' + current_page,\\n@@ -45,3 +45,4 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-        if (res.data.length === 0) break;\\n-        yield res.data.map(\\n-          (v: IHistoricalFundingRate): IInterestRate => ({\\n+        const list = res.data?.resultList ?? [];\\n+        if (list.length === 0) break;\\n+        yield list.map(\\n+          (v: IUtaHistoricalFundingRate): IInterestRate => ({\\n@@ -51 +52 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-            created_at: formatTime(+v.fundingTime),\\n+            created_at: formatTime(+v.fundingRateTimestamp),\\n@@ -57 +58 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-        if (+res.data[res.data.length - 1].fundingTime <= started_at) break;\\n+        if (+list[list.length - 1].fundingRateTimestamp <= started_at) break;\\n\"\n},\n{\n  \"additions\": 10,\n  \"deletions\": 23,\n  \"path\": \"apps/vendor-bitget/src/services/markets/ohlc.ts\",",
              "lineStart": 167,
              "lineEnd": 172
            },
            {
              "type": "function",
              "name": "res",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/markets/ohlc.ts b/apps/vendor-bitget/src/services/markets/ohlc.ts\\nindex a12d2da25..e93ac84b2 100644\\n--- a/apps/vendor-bitget/src/services/markets/ohlc.ts\\n+++ b/apps/vendor-bitget/src/services/markets/ohlc.ts\\n@@ -6 +6 @@ import { firstValueFrom, timer } from 'rxjs';\\n-import { getMixCandles, getSpotCandles } from '../../api/public-api';\\n+import { getHistoryCandles } from '../../api/public-api';\\n@@ -41,22 +41,9 @@ createSeriesProvider<IOHLC>(Terminal.fromNodeEnv(), {\\n-      if (instType === 'USDT-FUTURES') {\\n-        const res = await getMixCandles({\\n-          symbol: instId,\\n-          productType: instType,\\n-          granularity,\\n-          endTime: '' + currentEndTime,\\n-          limit: '100',\\n-        });\\n-        if (res.msg !== 'success') throw new Error(`Bitget get mix candles failed: ${res.code} ${res.msg}`);\\n-        candles = res.data;\\n-      } else if (instType === 'SPOT') {\\n-        const res = await getSpotCandles({\\n-          symbol: instId,\\n-          granularity,\\n-          endTime: '' + currentEndTime,\\n-          limit: '100',\\n-        });\\n-        if (res.msg !== 'success') throw new Error(`Bitget get spot candles failed: ${res.code} ${res.msg}`);\\n-        candles = res.data;\\n-      } else {\\n-        throw new Error(`Unsupported product type: ${instType}`);\\n-      }\\n+      const res = await getHistoryCandles({\\n+        category: instType,\\n+        symbol: instId,\\n+        interval: granularity,\\n+        endTime: '' + currentEndTime,\\n+        limit: '100',\\n+      });\\n+      if (res.msg !== 'success') throw new Error(`Bitget get history candles failed: ${res.code} ${res.msg}`);\\n+      candles = res.data;\\n\"\n},\n{\n  \"additions\": 47,\n  \"deletions\": 42,\n  \"path\": \"apps/vendor-bitget/src/services/markets/product.ts\",",
              "lineStart": 173,
              "lineEnd": 178
            },
            {
              "type": "function",
              "name": "product",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/markets/product.ts b/apps/vendor-bitget/src/services/markets/product.ts\\nindex 1a59f6074..26120b1f4 100644\\n--- a/apps/vendor-bitget/src/services/markets/product.ts\\n+++ b/apps/vendor-bitget/src/services/markets/product.ts\\n@@ -2,7 +2,2 @@ import { IProduct } from '@yuants/data-product';\\n-import { Terminal } from '@yuants/protocol';\\n-import { createSQLWriter } from '@yuants/sql';\\n-import { encodePath, formatTime } from '@yuants/utils';\\n-import { Subject, defer, repeat, retry, shareReplay, tap } from 'rxjs';\\n-import { IMixMarketContract, getMarketContracts } from '../../api/public-api';\\n-\\n-const product$ = new Subject<IProduct>();\\n+import { encodePath } from '@yuants/utils';\\n+import { IUtaInstrument, getInstruments } from '../../api/public-api';\\n@@ -13 +8 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-  const usdtFuturesProductRes = await getMarketContracts({ productType: 'USDT-FUTURES' });\\n+  const usdtFuturesProductRes = await getInstruments({ category: 'USDT-FUTURES' });\\n@@ -18 +13 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-  const coinFuturesProductRes = await getMarketContracts({ productType: 'COIN-FUTURES' });\\n+  const coinFuturesProductRes = await getInstruments({ category: 'COIN-FUTURES' });\\n@@ -21,0 +17,4 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n+  const spotProductRes = await getInstruments({ category: 'SPOT' });\\n+  if (spotProductRes.msg !== 'success') {\\n+    throw new Error(spotProductRes.msg);\\n+  }\\n@@ -23 +22 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-    (product: IMixMarketContract): IProduct => ({\\n+    (product: IUtaInstrument): IProduct => ({\\n@@ -28,2 +27,4 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      price_step: Number(`1e-${product.pricePlace}`),\\n-      volume_step: +product.sizeMultiplier,\\n+      price_step: Number(`1e-${product.pricePrecision}`),\\n+      volume_step: product.quantityMultiplier\\n+        ? +product.quantityMultiplier\\n+        : Number(`1e-${product.quantityPrecision}`),\\n@@ -33 +34 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      margin_rate: 1 / Number(product.maxLever),\\n+      margin_rate: product.maxLeverage ? 1 / Number(product.maxLeverage) : 0,\\n@@ -45 +46 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-    (product: IMixMarketContract): IProduct => ({\\n+    (product: IUtaInstrument): IProduct => ({\\n@@ -50,2 +51,4 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      price_step: Number(`1e-${product.pricePlace}`),\\n-      volume_step: +product.sizeMultiplier,\\n+      price_step: Number(`1e-${product.pricePrecision}`),\\n+      volume_step: product.quantityMultiplier\\n+        ? +product.quantityMultiplier\\n+        : Number(`1e-${product.quantityPrecision}`),\\n@@ -55 +58 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      margin_rate: 1 / Number(product.maxLever),\\n+      margin_rate: product.maxLeverage ? 1 / Number(product.maxLeverage) : 0,\\n@@ -62 +65 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      market_id: 'BITGET/USDT-FUTURES',\\n+      market_id: 'BITGET/COIN-FUTURES',\\n@@ -67,23 +70,24 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-  return [...usdtFutures, ...coinFutures];\\n-};\\n-\\n-const futureProducts$ = defer(listProducts).pipe(\\n-  tap((list) => {\\n-    list.forEach((product) => product$.next(product));\\n-  }),\\n-  tap({\\n-    error: (e) => {\\n-      console.error(formatTime(Date.now()), 'FuturesProducts', e);\\n-    },\\n-  }),\\n-  retry({ delay: 5000 }),\\n-  repeat({ delay: 86400_000 }),\\n-  shareReplay(1),\\n-);\\n-\\n-createSQLWriter<IProduct>(Terminal.fromNodeEnv(), {\\n-  data$: product$,\\n-  tableName: 'product',\\n-  conflictKeys: ['datasource_id', 'product_id'],\\n-  writeInterval: 1000,\\n-});\\n+  const spots = spotProductRes.data.map(\\n+    (product: IUtaInstrument): IProduct => ({\\n+      product_id: encodePath('BITGET', 'SPOT', product.symbol),\\n+      datasource_id: 'BITGET',\\n+      quote_currency: product.quoteCoin,\\n+      base_currency: product.baseCoin,\\n+      price_step: Number(`1e-${product.pricePrecision}`),\\n+      volume_step: product.quantityMultiplier\\n+        ? +product.quantityMultiplier\\n+        : Number(`1e-${product.quantityPrecision}`),\\n+      name: '',\\n+      value_scale: 1,\\n+      value_scale_unit: '',\\n+      margin_rate: 0,\\n+      value_based_cost: 0,\\n+      volume_based_cost: 0,\\n+      max_position: 0,\\n+      max_volume: 0,\\n+      allow_long: true,\\n+      allow_short: false,\\n+      market_id: 'BITGET/SPOT',\\n+      no_interest_rate: false,\\n+    }),\\n+  );\\n@@ -91 +95,2 @@ createSQLWriter<IProduct>(Terminal.fromNodeEnv(), {\\n-futureProducts$.subscribe();\\n+  return [...usdtFutures, ...coinFutures, ...spots];\\n+};\\n\"\n},\n{\n  \"additions\": 21,\n  \"deletions\": 25,\n  \"path\": \"apps/vendor-bitget/src/services/markets/quote.ts\",",
              "lineStart": 179,
              "lineEnd": 184
            },
            {
              "type": "function",
              "name": "usdtFuturesTickers",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/markets/quote.ts b/apps/vendor-bitget/src/services/markets/quote.ts\\nindex 77ddd221a..7c7958dad 100644\\n--- a/apps/vendor-bitget/src/services/markets/quote.ts\\n+++ b/apps/vendor-bitget/src/services/markets/quote.ts\\n@@ -6,6 +6 @@ import { defer, groupBy, map, merge, mergeMap, repeat, retry, scan, shareReplay,\\n-import {\\n-  IFundingTimeInfo,\\n-  IFutureMarketTicker,\\n-  getFutureMarketTickers,\\n-  getNextFundingTime,\\n-} from '../../api/public-api';\\n+import { IUtaCurrentFundingRate, IUtaTicker, getCurrentFundingRate, getTickers } from '../../api/public-api';\\n@@ -14 +9 @@ import { createCyclicTask } from './utils/cyclic-task';\\n-const usdtFuturesTickers$ = defer(() => getFutureMarketTickers({ productType: 'USDT-FUTURES' })).pipe(\\n+const usdtFuturesTickers$ = defer(() => getTickers({ category: 'USDT-FUTURES' })).pipe(\\n@@ -20 +15 @@ const usdtFuturesTickers$ = defer(() => getFutureMarketTickers({ productType: 'U\\n-const coinFuturesTickers$ = defer(() => getFutureMarketTickers({ productType: 'COIN-FUTURES' })).pipe(\\n+const coinFuturesTickers$ = defer(() => getTickers({ category: 'COIN-FUTURES' })).pipe(\\n@@ -28 +23 @@ const mapTickerToQuote =\\n-  (ticker: IFutureMarketTicker): Partial<IQuote> => ({\\n+  (ticker: IUtaTicker): Partial<IQuote> => ({\\n@@ -30,9 +25,9 @@ const mapTickerToQuote =\\n-    product_id: encodePath(instType, ticker.symbol),\\n-    last_price: ticker.lastPr,\\n-    ask_price: ticker.askPr,\\n-    ask_volume: ticker.askSz,\\n-    bid_price: ticker.bidPr,\\n-    bid_volume: ticker.bidSz,\\n-    interest_rate_long: `${-Number(ticker.fundingRate)}`,\\n-    interest_rate_short: `${Number(ticker.fundingRate)}`,\\n-    open_interest: ticker.holdingAmount,\\n+    product_id: encodePath('BITGET', instType, ticker.symbol),\\n+    last_price: ticker.lastPrice,\\n+    ask_price: ticker.ask1Price,\\n+    ask_volume: ticker.ask1Size,\\n+    bid_price: ticker.bid1Price,\\n+    bid_volume: ticker.bid1Size,\\n+    interest_rate_long: ticker.fundingRate ? `${-Number(ticker.fundingRate)}` : undefined,\\n+    interest_rate_short: ticker.fundingRate ? `${Number(ticker.fundingRate)}` : undefined,\\n+    open_interest: ticker.openInterest,\\n@@ -97 +92 @@ createCyclicTask({\\n-    const res = await getNextFundingTime({\\n+    const res = await getCurrentFundingRate({\\n@@ -99 +93,0 @@ createCyclicTask({\\n-      productType: instType,\\n@@ -106,3 +100 @@ createCyclicTask({\\n-    console.info(formatTime(Date.now()), 'FundingTime', product_id, res.data[0].nextFundingTime);\\n-\\n-    const data: IFundingTimeInfo | undefined = res.data[0];\\n+    const data: IUtaCurrentFundingRate | undefined = res.data?.[0];\\n@@ -112,0 +105,4 @@ createCyclicTask({\\n+    console.info(formatTime(Date.now()), 'FundingTime', product_id, data.nextUpdate);\\n+\\n+    const nextUpdateTs = +data.nextUpdate;\\n+\\n@@ -116,2 +112,2 @@ createCyclicTask({\\n-      interest_rate_next_settled_at: formatTime(+data.nextFundingTime),\\n-      interest_rate_prev_settled_at: formatTime(+data.nextFundingTime - +data.ratePeriod * 3600_000),\\n+      interest_rate_next_settled_at: formatTime(nextUpdateTs),\\n+      interest_rate_prev_settled_at: formatTime(nextUpdateTs - +data.fundingRateInterval * 3600_000),\\n\"\n},\n{\n  \"additions\": 3,\n  \"deletions\": 10,\n  \"path\": \"apps/vendor-bitget/src/services/orders/cancelOrder.ts\",",
              "lineStart": 185,
              "lineEnd": 190
            },
            {
              "type": "function",
              "name": "cancelOrder",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/orders/cancelOrder.ts b/apps/vendor-bitget/src/services/orders/cancelOrder.ts\\nindex 6baa1613e..6694acb08 100644\\n--- a/apps/vendor-bitget/src/services/orders/cancelOrder.ts\\n+++ b/apps/vendor-bitget/src/services/orders/cancelOrder.ts\\n@@ -3 +3 @@ import { decodePath } from '@yuants/utils';\\n-import { postFutureCancelOrder, postSpotCancelOrder } from '../../api/private-api';\\n+import { postCancelOrder } from '../../api/private-api';\\n@@ -10,5 +10 @@ export const cancelOrder = async (credential: ICredential, order: IOrder) => {\\n-    const res = await postFutureCancelOrder(credential, {\\n-      symbol: instId,\\n-      productType: instType,\\n-      orderId: order.order_id,\\n-    });\\n+    const res = await postCancelOrder(credential, { orderId: order.order_id, category: 'USDT-FUTURES' });\\n@@ -22,4 +18 @@ export const cancelOrder = async (credential: ICredential, order: IOrder) => {\\n-    const res = await postSpotCancelOrder(credential, {\\n-      symbol: instId,\\n-      orderId: order.order_id,\\n-    });\\n+    const res = await postCancelOrder(credential, { orderId: order.order_id, category: 'SPOT' });\\n\"\n},\n{\n  \"additions\": 17,\n  \"deletions\": 21,\n  \"path\": \"apps/vendor-bitget/src/services/orders/listOrders.ts\",",
              "lineStart": 191,
              "lineEnd": 196
            },
            {
              "type": "function",
              "name": "listFuturesOrders",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/orders/listOrders.ts b/apps/vendor-bitget/src/services/orders/listOrders.ts\\nindex 5503ba9c0..242727167 100644\\n--- a/apps/vendor-bitget/src/services/orders/listOrders.ts\\n+++ b/apps/vendor-bitget/src/services/orders/listOrders.ts\\n@@ -2 +2 @@ import { IOrder } from '@yuants/data-order';\\n-import { getFutureOrdersPending, getSpotOrdersPending } from '../../api/private-api';\\n+import { getUnfilledOrders } from '../../api/private-api';\\n@@ -6,4 +6 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-  // Future\\n-  const res = await getFutureOrdersPending(credential, {\\n-    productType: 'USDT-FUTURES',\\n-  });\\n+  const res = await getUnfilledOrders(credential, { category: 'USDT-FUTURES' });\\n@@ -14 +11 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-    res.data.orderList?.map((v) => ({\\n+    res.data.list?.map((v) => ({\\n@@ -18 +15 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-      order_type: v.orderType.toUpperCase(),\\n+      order_type: v.orderType?.toUpperCase(),\\n@@ -20 +17 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-        v.tradeSide === 'open'\\n+        v.posSide === 'long'\\n@@ -23 +20 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-            : 'OPEN_SHORT'\\n+            : 'CLOSE_LONG'\\n@@ -26 +23 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-          : 'CLOSE_LONG',\\n+          : 'OPEN_SHORT',\\n@@ -28,2 +25,2 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-      volume: Number(v.size),\\n-      traded_volume: Number(v.filledQty),\\n+      volume: Number(v.qty),\\n+      traded_volume: Number(v.cumExecQty),\\n@@ -31,2 +28,2 @@ export const listFuturesOrders = async (credential: ICredential): Promise<IOrder\\n-      created_at: new Date(Number(v.cTime)).toISOString(),\\n-      submit_at: Number(v.cTime),\\n+      created_at: new Date(Number(v.createdTime)).toISOString(),\\n+      submit_at: Number(v.createdTime),\\n@@ -38,2 +35 @@ export const listSpotOrders = async (credential: ICredential): Promise<IOrder[]>\\n-  // Spot\\n-  const res = await getSpotOrdersPending(credential, {});\\n+  const res = await getUnfilledOrders(credential, { category: 'SPOT' });\\n@@ -44 +40 @@ export const listSpotOrders = async (credential: ICredential): Promise<IOrder[]>\\n-    res.data?.map((v) => ({\\n+    res.data?.list?.map((v) => ({\\n@@ -51,2 +47,2 @@ export const listSpotOrders = async (credential: ICredential): Promise<IOrder[]>\\n-      volume: Number(v.quantity),\\n-      traded_volume: Number(v.filledQty),\\n+      volume: Number(v.qty),\\n+      traded_volume: Number(v.cumExecQty),\\n@@ -54,2 +50,2 @@ export const listSpotOrders = async (credential: ICredential): Promise<IOrder[]>\\n-      created_at: new Date(Number(v.cTime)).toISOString(),\\n-      submit_at: Number(v.cTime),\\n+      created_at: new Date(Number(v.createdTime)).toISOString(),\\n+      submit_at: Number(v.createdTime),\\n\"\n},\n{\n  \"additions\": 11,\n  \"deletions\": 10,\n  \"path\": \"apps/vendor-bitget/src/services/orders/modifyOrder.ts\",",
              "lineStart": 197,
              "lineEnd": 202
            },
            {
              "type": "function",
              "name": "modifyOrder",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/orders/modifyOrder.ts b/apps/vendor-bitget/src/services/orders/modifyOrder.ts\\nindex fa2f6f42b..5f3b6aaea 100644\\n--- a/apps/vendor-bitget/src/services/orders/modifyOrder.ts\\n+++ b/apps/vendor-bitget/src/services/orders/modifyOrder.ts\\n@@ -3 +3 @@ import { decodePath } from '@yuants/utils';\\n-import { postFutureModifyOrder, postSpotCancelReplaceOrder } from '../../api/private-api';\\n+import { postModifyOrder } from '../../api/private-api';\\n@@ -10,3 +10 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n-    const res = await postFutureModifyOrder(credential, {\\n-      symbol: instId,\\n-      productType: instType,\\n+    const res = await postModifyOrder(credential, {\\n@@ -14,2 +12,4 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n-      newPrice: order.price?.toString(),\\n-      newSize: order.volume?.toString(),\\n+      price: order.price?.toString(),\\n+      qty: order.volume?.toString(),\\n+      category: 'USDT-FUTURES',\\n+      symbol: instId,\\n@@ -24,2 +24 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n-    const res = await postSpotCancelReplaceOrder(credential, {\\n-      symbol: instId,\\n+    const res = await postModifyOrder(credential, {\\n@@ -27,2 +26,4 @@ export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n-      newPrice: order.price?.toString(),\\n-      newSize: order.volume?.toString(),\\n+      price: order.price?.toString(),\\n+      qty: order.volume?.toString(),\\n+      category: 'SPOT',\\n+      symbol: instId,\\n\"\n},\n{\n  \"additions\": 0,\n  \"deletions\": 15,\n  \"path\": \"apps/vendor-bitget/src/services/orders/order-utils.ts\",",
              "lineStart": 203,
              "lineEnd": 208
            },
            {
              "type": "function",
              "name": "mapOrderDirectionToTradeSide",
              "code": "  \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/orders/order-utils.ts b/apps/vendor-bitget/src/services/orders/order-utils.ts\\nindex 044509abd..bfb7811de 100644\\n--- a/apps/vendor-bitget/src/services/orders/order-utils.ts\\n+++ b/apps/vendor-bitget/src/services/orders/order-utils.ts\\n@@ -27,15 +26,0 @@ export const mapOrderDirectionToTradeSide = (direction?: IOrder['order_direction\\n-\\n-export const buildFutureOrderParams = (order: IOrder) => {\\n-  const [datasource_id, instType, instId] = decodePath(order.product_id);\\n-  return {\\n-    symbol: instId,\\n-    productType: instType,\\n-    marginMode: 'crossed',\\n-    marginCoin: 'USDT',\\n-    size: '' + order.volume,\\n-    price: order.price !== undefined ? '' + order.price : undefined,\\n-    side: mapOrderDirectionToSide(order.order_direction),\\n-    tradeSide: mapOrderDirectionToTradeSide(order.order_direction),\\n-    orderType: order.order_type === 'LIMIT' ? 'limit' : 'market',\\n-  };\\n-};\\n\"\n},\n{\n  \"additions\": 20,\n  \"deletions\": 9,\n  \"path\": \"apps/vendor-bitget/src/services/orders/submitOrder.ts\",",
              "lineStart": 209,
              "lineEnd": 214
            },
            {
              "type": "function",
              "name": "submitOrder",
              "code": "      \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/apps/vendor-bitget/src/services/orders/submitOrder.ts b/apps/vendor-bitget/src/services/orders/submitOrder.ts\\nindex 969f8a87f..5658795c4 100644\\n--- a/apps/vendor-bitget/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-bitget/src/services/orders/submitOrder.ts\\n@@ -3 +3 @@ import { decodePath } from '@yuants/utils';\\n-import { postFuturePlaceOrder, postSpotPlaceOrder } from '../../api/private-api';\\n+import { postPlaceOrder } from '../../api/private-api';\\n@@ -5 +5 @@ import { ICredential } from '../../api/types';\\n-import { buildFutureOrderParams, mapOrderDirectionToSide } from './order-utils';\\n+import { mapOrderDirectionToSide } from './order-utils';\\n@@ -8,0 +9 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\\n+  const isMaker = order.order_type === 'MAKER';\\n@@ -11,2 +12,11 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\\n-    const params = buildFutureOrderParams(order);\\n-    const res = await postFuturePlaceOrder(credential, params);\\n+    const res = await postPlaceOrder(credential, {\\n+      category: 'USDT-FUTURES',\\n+      symbol: instId,\\n+      qty: '' + order.volume,\\n+      price: order.price !== undefined ? '' + order.price : undefined,\\n+      side: mapOrderDirectionToSide(order.order_direction),\\n+      orderType: order.order_type === 'LIMIT' || isMaker ? 'limit' : 'market',\\n+      timeInForce: isMaker ? 'post_only' : undefined,\\n+      posSide: order.order_direction?.includes('LONG') ? 'long' : 'short',\\n+      // UTA error 25238: posSide and reduceOnly cannot be used together; hedge mode relies on posSide+side.\\n+    });\\n@@ -20 +30,2 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\\n-    const res = await postSpotPlaceOrder(credential, {\\n+    const res = await postPlaceOrder(credential, {\\n+      category: 'SPOT',\\n@@ -23,3 +34,4 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\\n-      orderType: 'limit', // Default to limit for now\\n-      price: order.price?.toString(),\\n-      quantity: order.volume?.toString(),\\n+      orderType: order.order_type === 'MARKET' ? 'market' : 'limit',\\n+      timeInForce: isMaker ? 'post_only' : undefined,\\n+      price: order.price !== undefined ? '' + order.price : undefined,\\n+      qty: order.volume?.toString() ?? '0',\\n@@ -27 +38,0 @@ export const submitOrder = async (credential: ICredential, order: IOrder) => {\\n-      force: 'normal',\\n\"\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\",\n      \"patch\": \"commit 65358bffab9382823fc92ec877897bb4ee296182\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 14:29:30 2025 +0800\\n\\n    refactor(vendor-bitget) API integration for futures and spot markets (#2183)\\n    \\n    - Updated public API interfaces to align with new UTA specifications, including IUtaInstrument, IUtaTicker, IUtaOpenInterestRow, IUtaCurrentFundingRate, and IUtaHistoricalFundingRate.\\n    - Modified service methods to utilize new API endpoints for fetching market contracts, tickers, open interest, and funding rates.\\n    - Consolidated order management functions to use a unified postCancelOrder and postModifyOrder method for both futures and spot orders.\\n    - Enhanced error handling and response mapping for account and order services.\\n    - Removed deprecated methods and streamlined order parameter construction.\\n    - Improved data mapping for positions and orders to ensure consistency across futures and spot services.\\n\\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json b/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\\nnew file mode 100644\\nindex 000000000..f55addc83\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-bitget/2025-12-03-17-16.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\",\\n+      \\\"comment\\\": \\\"Refactor Bitget API integration for futures and spot markets\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"759b18e5c241cd012ed0251d184116a001211528\",\n  \"short\": \"759b18e5c\",\n  \"author\": \"humblelittlec1[bot]\",\n  \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",",
              "lineStart": 215,
              "lineEnd": 276
            },
            {
              "type": "function",
              "name": "listAllCredentials",
              "code": "  \"patch\": \"commit 9b9495d1e3b8feb7d23fccebc8d5eecca5e734ac\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 14:57:47 2025 +0800\\n\\n    feat: update credential handling to use secret_id and enhance error management (#2192)\\n\\ndiff --git a/apps/virtual-exchange/src/credential.ts b/apps/virtual-exchange/src/credential.ts\\nindex f72728008..e03200075 100644\\n--- a/apps/virtual-exchange/src/credential.ts\\n+++ b/apps/virtual-exchange/src/credential.ts\\n@@ -0,0 +1 @@\\n+import { createCache } from '@yuants/cache';\\n@@ -4,0 +6 @@ import { escapeSQL, requestSQL } from '@yuants/sql';\\n+import { newError } from '@yuants/utils';\\n@@ -52 +54 @@ export const listAllCredentials = async () => {\\n-terminal.server.provideService<IExchangeCredential, void>(\\n+terminal.server.provideService<IExchangeCredential, ISecret>(\\n@@ -65,2 +67,2 @@ terminal.server.provideService<IExchangeCredential, void>(\\n-    await writeSecret(terminal, credentialReader, { type: 'exchange_credential' }, secretData);\\n-    return { res: { code: 0, message: 'OK' } };\\n+    const secret = await writeSecret(terminal, credentialReader, { type: 'exchange_credential' }, secretData);\\n+    return { res: { code: 0, message: 'OK', data: secret } };\\n@@ -83 +85,3 @@ terminal.server.provideService<void, string[]>('VEX/ListCredentials', {}, async\\n-export const validCredentials$ = defer(() => listAllCredentials()).pipe(\\n+const credentialCache = createCache(() => listAllCredentials(), { swrAfter: 10_000, expire: 3600_000 });\\n+\\n+export const validCredentials$ = defer(() => credentialCache.query('')).pipe(\\n@@ -85,0 +90 @@ export const validCredentials$ = defer(() => listAllCredentials()).pipe(\\n+    if (!x) return map;\\n@@ -111,0 +117,22 @@ export const getCredentialById = async (credential_id: string) => {\\n+\\n+export const getCredentialBySecretId = async (\\n+  secret_id: string,\\n+): Promise<Required<Pick<ICredentialResolvedStatus, 'secret' | 'credential' | 'credentialId'>>> => {\\n+  const allCredentials = await credentialCache.query('');\\n+  const theCredential = allCredentials?.find((x) => x.secret.sign === secret_id);\\n+  if (!theCredential) {\\n+    throw newError('CREDENTIAL_NOT_FOUND', { secret_id });\\n+  }\\n+  if (!theCredential.credential) {\\n+    throw newError('CREDENTIAL_NOT_RESOLVED', { secret_id });\\n+  }\\n+  if (!theCredential.credentialId) {\\n+    throw newError('CREDENTIAL_ID_NOT_RESOLVED', { secret_id });\\n+  }\\n+\\n+  return {\\n+    secret: theCredential.secret,\\n+    credential: theCredential.credential,\\n+    credentialId: theCredential.credentialId,\\n+  };\\n+};\\n\"\n},\n{\n  \"additions\": 27,\n  \"deletions\": 42,\n  \"path\": \"apps/virtual-exchange/src/general.ts\",",
              "lineStart": 277,
              "lineEnd": 282
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "      \"patch\": \"commit 9b9495d1e3b8feb7d23fccebc8d5eecca5e734ac\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 14:57:47 2025 +0800\\n\\n    feat: update credential handling to use secret_id and enhance error management (#2192)\\n\\ndiff --git a/apps/virtual-exchange/src/general.ts b/apps/virtual-exchange/src/general.ts\\nindex 068a19f33..5ffe52c4f 100644\\n--- a/apps/virtual-exchange/src/general.ts\\n+++ b/apps/virtual-exchange/src/general.ts\\n@@ -5 +5 @@ import { Terminal } from '@yuants/protocol';\\n-import { getCredentialById } from './credential';\\n+import { getCredentialBySecretId } from './credential';\\n@@ -9 +9 @@ const terminal = Terminal.fromNodeEnv();\\n-terminal.server.provideService<{ credential_id: string; product_id?: string }, IPosition[]>(\\n+terminal.server.provideService<{ secret_id: string; product_id?: string }, IPosition[]>(\\n@@ -13 +13 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-    required: ['credential_id'],\\n+    required: ['secret_id'],\\n@@ -15 +15 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-      credential_id: { type: 'string' },\\n+      secret_id: { type: 'string' },\\n@@ -20,5 +20,2 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-    const credential = await getCredentialById(msg.req.credential_id);\\n-    if (!credential) {\\n-      return { res: { code: 404, message: 'Credential not found' } };\\n-    }\\n-    const res = await getPositions(terminal, credential, msg.req.product_id);\\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\\n+    const res = await getPositions(terminal, credential.credential, msg.req.product_id);\\n@@ -29 +26 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-terminal.server.provideService<{ credential_id: string; product_id?: string }, IOrder[]>(\\n+terminal.server.provideService<{ secret_id: string; product_id?: string }, IOrder[]>(\\n@@ -33 +30 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-    required: ['credential_id'],\\n+    required: ['secret_id'],\\n@@ -35 +32 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-      credential_id: { type: 'string' },\\n+      secret_id: { type: 'string' },\\n@@ -40,5 +37,2 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-    const credential = await getCredentialById(msg.req.credential_id);\\n-    if (!credential) {\\n-      return { res: { code: 404, message: 'Credential not found' } };\\n-    }\\n-    const res = await getOrders(terminal, credential, msg.req.product_id);\\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\\n+    const res = await getOrders(terminal, credential.credential, msg.req.product_id);\\n@@ -46 +40 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-      order.account_id = msg.req.credential_id;\\n+      order.account_id = credential.credentialId;\\n@@ -54 +48 @@ terminal.server.provideService<{ credential_id: string; product_id?: string }, I\\n-terminal.server.provideService<{ order: IOrder; credential_id: string }, { order_id: string }>(\\n+terminal.server.provideService<{ order: IOrder; secret_id: string }, { order_id: string }>(\\n@@ -58 +52 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, { order\\n-    required: ['order', 'credential_id'],\\n+    required: ['order', 'secret_id'],\\n@@ -61 +55 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, { order\\n-      credential_id: { type: 'string' },\\n+      secret_id: { type: 'string' },\\n@@ -65,5 +59,2 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, { order\\n-    const credential = await getCredentialById(msg.req.credential_id);\\n-    if (!credential) {\\n-      return { res: { code: 404, message: 'Credential not found' } };\\n-    }\\n-    const res = await submitOrder(terminal, credential, msg.req.order);\\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\\n+    const res = await submitOrder(terminal, credential.credential, msg.req.order);\\n@@ -75 +66 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, { order\\n-terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n+terminal.server.provideService<{ order: IOrder; secret_id: string }, void>(\\n@@ -79 +70 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-    required: ['order', 'credential_id'],\\n+    required: ['order', 'secret_id'],\\n@@ -82 +73 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-      credential_id: { type: 'string' },\\n+      secret_id: { type: 'string' },\\n@@ -86,5 +77,2 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-    const credential = await getCredentialById(msg.req.credential_id);\\n-    if (!credential) {\\n-      return { res: { code: 404, message: 'Credential not found' } };\\n-    }\\n-    const res = await modifyOrder(terminal, credential, msg.req.order);\\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\\n+    const res = await modifyOrder(terminal, credential.credential, msg.req.order);\\n@@ -96 +84 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n+terminal.server.provideService<{ order: IOrder; secret_id: string }, void>(\\n@@ -100 +88 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-    required: ['order', 'credential_id'],\\n+    required: ['order', 'secret_id'],\\n@@ -103 +91 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-      credential_id: { type: 'string' },\\n+      secret_id: { type: 'string' },\\n@@ -107,5 +95,2 @@ terminal.server.provideService<{ order: IOrder; credential_id: string }, void>(\\n-    const credential = await getCredentialById(msg.req.credential_id);\\n-    if (!credential) {\\n-      return { res: { code: 404, message: 'Credential not found' } };\\n-    }\\n-    const res = await cancelOrder(terminal, credential, msg.req.order);\\n+    const credential = await getCredentialBySecretId(msg.req.secret_id);\\n+    const res = await cancelOrder(terminal, credential.credential, msg.req.order);\\n\"\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\",\n      \"patch\": \"commit 9b9495d1e3b8feb7d23fccebc8d5eecca5e734ac\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 14:57:47 2025 +0800\\n\\n    feat: update credential handling to use secret_id and enhance error management (#2192)\\n\\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json b/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\\nnew file mode 100644\\nindex 000000000..6bf18df2e\\n--- /dev/null\\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-04-06-39.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\",\\n+      \\\"comment\\\": \\\"fix\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"e6d5d8b1242877eecf9bf99d82a955e5fba4b893\",\n  \"short\": \"e6d5d8b12\",\n  \"author\": \"humblelittlec1[bot]\",\n  \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",",
              "lineStart": 283,
              "lineEnd": 344
            },
            {
              "type": "function",
              "name": "listProducts",
              "code": "  \"patch\": \"commit c1217ecbc28bcfebf5f31a164983c625dcb43e91\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 17:39:37 2025 +0800\\n\\n    fix: update interest rate handling and product configuration for spot markets (#2194)\\n\\ndiff --git a/apps/vendor-bitget/src/services/markets/product.ts b/apps/vendor-bitget/src/services/markets/product.ts\\nindex 26120b1f4..58a9ed5ca 100644\\n--- a/apps/vendor-bitget/src/services/markets/product.ts\\n+++ b/apps/vendor-bitget/src/services/markets/product.ts\\n@@ -91 +91 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      no_interest_rate: false,\\n+      no_interest_rate: true,\\n\"\n},\n{\n  \"additions\": 6,\n  \"deletions\": 7,\n  \"path\": \"apps/vendor-okx/src/public-data/interest_rate.ts\",\n  \"patch\": \"commit c1217ecbc28bcfebf5f31a164983c625dcb43e91\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 17:39:37 2025 +0800\\n\\n    fix: update interest rate handling and product configuration for spot markets (#2194)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/interest_rate.ts b/apps/vendor-okx/src/public-data/interest_rate.ts\\nindex cd7e76172..a03083ef5 100644\\n--- a/apps/vendor-okx/src/public-data/interest_rate.ts\\n+++ b/apps/vendor-okx/src/public-data/interest_rate.ts\\n@@ -15 +15 @@ createSQLWriter<ISeriesCollectingTask>(Terminal.fromNodeEnv(), {\\n-        series_id: encodePath(x.datasource_id, x.product_id),\\n+        series_id: x.product_id,\\n@@ -37,2 +37 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-    const [datasource_id, product_id] = decodePath(series_id);\\n-    const [instType, instId] = decodePath(product_id);\\n+    const [, instType, instId] = decodePath(series_id);\\n@@ -59,2 +58,2 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-            product_id,\\n-            datasource_id,\\n+            product_id: series_id,\\n+            datasource_id: 'OKX',\\n@@ -117,2 +116,2 @@ createSeriesProvider<IInterestRate>(Terminal.fromNodeEnv(), {\\n-            product_id,\\n-            datasource_id,\\n+            product_id: series_id,\\n+            datasource_id: 'OKX',\\n\"\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\",\n  \"patch\": \"commit c1217ecbc28bcfebf5f31a164983c625dcb43e91\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 17:39:37 2025 +0800\\n\\n    fix: update interest rate handling and product configuration for spot markets (#2194)\\n\\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json b/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\\nnew file mode 100644\\nindex 000000000..0f78c4bf3\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-bitget/2025-12-04-09-37.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\",\\n+      \\\"comment\\\": \\\"fix product of spot\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n},\n{",
              "lineStart": 345,
              "lineEnd": 384
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "      \"patch\": \"commit b285cde5901f5637b57f2bab6309c58615ecea3a\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 17:56:36 2025 +0800\\n\\n    feat: 添加请求间隔处理以优化 Binance 数据请求 (#2195)\\n\\ndiff --git a/apps/vendor-binance/src/public-data/quote.ts b/apps/vendor-binance/src/public-data/quote.ts\\nindex 5a034f952..0445513ea 100644\\n--- a/apps/vendor-binance/src/public-data/quote.ts\\n+++ b/apps/vendor-binance/src/public-data/quote.ts\\n@@ -6,0 +7,3 @@ import {\\n+  catchError,\\n+  combineLatest,\\n+  concatMap,\\n@@ -7,0 +11 @@ import {\\n+  exhaustMap,\\n@@ -13,0 +18 @@ import {\\n+  of,\\n@@ -18,0 +24,3 @@ import {\\n+  startWith,\\n+  tap,\\n+  timer,\\n@@ -22,0 +31 @@ import {\\n+  getFutureExchangeInfo,\\n@@ -25,0 +35 @@ import {\\n+  getSpotExchangeInfo,\\n@@ -29 +39,40 @@ const terminal = Terminal.fromNodeEnv();\\n-const OPEN_INTEREST_TTL = process.env.OPEN_INTEREST_TTL ? Number(process.env.OPEN_INTEREST_TTL) : 120_000;\\n+const DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS = 500;\\n+const DEFAULT_MARGIN_RATE_REQUEST_INTERVAL_MS = 500;\\n+const OPEN_INTEREST_TTL = process.env.OPEN_INTEREST_TTL ? Number(process.env.OPEN_INTEREST_TTL) : 300_000;\\n+\\n+interface IRateLimit {\\n+  rateLimitType?: string;\\n+  interval?: string;\\n+  intervalNum?: number;\\n+  limit?: number;\\n+}\\n+\\n+const toIntervalMs = (interval?: string, intervalNum?: number) => {\\n+  switch (interval) {\\n+    case 'SECOND':\\n+      return (intervalNum ?? 1) * 1_000;\\n+    case 'MINUTE':\\n+      return (intervalNum ?? 1) * 60_000;\\n+    case 'HOUR':\\n+      return (intervalNum ?? 1) * 3_600_000;\\n+    case 'DAY':\\n+      return (intervalNum ?? 1) * 86_400_000;\\n+    default:\\n+      return undefined;\\n+  }\\n+};\\n+\\n+const getRequestIntervalMs = (rateLimits: IRateLimit[] | undefined, fallbackMs: number) => {\\n+  const intervals: number[] = [];\\n+  for (const item of rateLimits ?? []) {\\n+    if (item.rateLimitType !== 'REQUEST_WEIGHT' && item.rateLimitType !== 'RAW_REQUESTS') continue;\\n+    const duration = toIntervalMs(item.interval, item.intervalNum);\\n+    console.info('!!!!!', item, duration);\\n+    const limit = item.limit;\\n+    if (duration == null || limit == null || limit <= 0) continue;\\n+    intervals.push(Math.ceil(duration / limit));\\n+  }\\n+  console.info('!!!!!', intervals);\\n+  if (!intervals.length) return fallbackMs;\\n+  return Math.max(fallbackMs, Math.max(...intervals));\\n+};\\n@@ -45,0 +95,13 @@ const openInterestCache = createCache<number>(\\n+const futureRequestInterval$ = defer(() => getFutureExchangeInfo()).pipe(\\n+  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n+  catchError((err) => {\\n+    console.warn('getFutureExchangeInfo failed when calculating request interval', err);\\n+    return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n+  }),\\n+  retry({ delay: 60_000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+  tap((v) => {\\n+    console.info(`!!!!Determined future request interval: ${v} ms`);\\n+  }),\\n+);\\n+\\n@@ -87,11 +149,13 @@ const quoteFromBookTicker$ = futureBookTicker$.pipe(\\n-const quoteFromOpenInterest$ = futureBookTicker$.pipe(\\n-  mergeMap((entries) => from(entries || [])),\\n-  mergeMap(\\n-    (entry) =>\\n-      from(openInterestCache.query(entry.symbol)).pipe(\\n-        map(\\n-          (openInterest): Partial<IQuote> => ({\\n-            datasource_id: 'BINANCE',\\n-            product_id: encodePath('BINANCE', 'USDT-FUTURE', entry.symbol),\\n-            open_interest: `${openInterest ?? 0}`,\\n-          }),\\n+const quoteFromOpenInterest$ = combineLatest([futureBookTicker$, futureRequestInterval$]).pipe(\\n+  exhaustMap(([entries, requestInterval]) =>\\n+    from(entries || []).pipe(\\n+      concatMap((entry, index) =>\\n+        (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n+          mergeMap(() => from(openInterestCache.query(entry.symbol))),\\n+          map(\\n+            (openInterest): Partial<IQuote> => ({\\n+              datasource_id: 'BINANCE',\\n+              product_id: encodePath('BINANCE', 'USDT-FUTURE', entry.symbol),\\n+              open_interest: `${openInterest ?? 0}`,\\n+            }),\\n+          ),\\n@@ -100 +164 @@ const quoteFromOpenInterest$ = futureBookTicker$.pipe(\\n-    5,\\n+    ),\\n@@ -139,0 +204,11 @@ const marginPairs$ = defer(() => getMarginAllPairs()).pipe(\\n+  map((pairs) => {\\n+    if (!Array.isArray(pairs)) {\\n+      console.warn('getMarginAllPairs returned non-array payload', pairs);\\n+      return [];\\n+    }\\n+    return pairs;\\n+  }),\\n+  catchError((err) => {\\n+    console.warn('getMarginAllPairs failed', err);\\n+    return of([] as IMarginPair[]);\\n+  }),\\n@@ -145,2 +220,15 @@ const marginPairs$ = defer(() => getMarginAllPairs()).pipe(\\n-const quoteFromMarginRates$ = marginPairs$.pipe(\\n-  mergeMap((pairs: IMarginPair[]) =>\\n+const spotRequestInterval$ = defer(() => getSpotExchangeInfo()).pipe(\\n+  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_MARGIN_RATE_REQUEST_INTERVAL_MS)),\\n+  catchError((err) => {\\n+    console.warn('getSpotExchangeInfo failed when calculating request interval', err);\\n+    return of(DEFAULT_MARGIN_RATE_REQUEST_INTERVAL_MS);\\n+  }),\\n+  retry({ delay: 60_000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+  tap((v) => {\\n+    console.info(`!!!!Determined spot request interval: ${v} ms`);\\n+  }),\\n+);\\n+\\n+const quoteFromMarginRates$ = combineLatest([marginPairs$, spotRequestInterval$]).pipe(\\n+  mergeMap(([pairs, requestInterval]) =>\\n@@ -148,17 +236,19 @@ const quoteFromMarginRates$ = marginPairs$.pipe(\\n-      mergeMap(\\n-        (pair) =>\\n-          defer(async () => {\\n-            const [baseRate, quoteRate] = await Promise.all([\\n-              marginInterestRateCache.query(pair.base),\\n-              marginInterestRateCache.query(pair.quote),\\n-            ]);\\n-            return {\\n-              datasource_id: 'BINANCE',\\n-              product_id: encodePath('BINANCE', 'SPOT', pair.symbol),\\n-              // User instruction: Long = Quote Rate, Short = Base Rate\\n-              interest_rate_long: quoteRate,\\n-              interest_rate_short: baseRate,\\n-              updated_at: formatTime(Date.now()),\\n-            } as Partial<IQuote>;\\n-          }),\\n-        5, // Concurrency\\n+      concatMap((pair, index) =>\\n+        (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n+          mergeMap(() => from(marginInterestRateCache.query(pair.base))),\\n+          mergeMap((baseRate) =>\\n+            timer(requestInterval).pipe(\\n+              mergeMap(() => from(marginInterestRateCache.query(pair.quote))),\\n+              map(\\n+                (quoteRate): Partial<IQuote> => ({\\n+                  datasource_id: 'BINANCE',\\n+                  product_id: encodePath('BINANCE', 'SPOT', pair.symbol),\\n+                  // User instruction: Long = Quote Rate, Short = Base Rate\\n+                  interest_rate_long: quoteRate,\\n+                  interest_rate_short: baseRate,\\n+                  updated_at: formatTime(Date.now()),\\n+                }),\\n+              ),\\n+            ),\\n+          ),\\n+        ),\\n\"\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\",\n      \"patch\": \"commit b285cde5901f5637b57f2bab6309c58615ecea3a\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 17:56:36 2025 +0800\\n\\n    feat: 添加请求间隔处理以优化 Binance 数据请求 (#2195)\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json b/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\\nnew file mode 100644\\nindex 000000000..b95a3b843\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-binance/2025-12-04-09-53.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n+      \\\"comment\\\": \\\"add request interval to binance\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"76802e0c0641c1b8fc26e883fa5d114200c367f4\",\n  \"short\": \"76802e0c0\",\n  \"author\": \"Siyuan Wang\",\n  \"email\": \"c.one@thrimbda.com\",",
              "lineStart": 385,
              "lineEnd": 412
            },
            {
              "type": "function",
              "name": "getFApiV1FundingRate",
              "code": "  \"patch\": \"commit 76802e0c0641c1b8fc26e883fa5d114200c367f4\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 18:07:33 2025 +0800\\n\\n    feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)\\n\\ndiff --git a/apps/vendor-aster/src/api/public-api.ts b/apps/vendor-aster/src/api/public-api.ts\\nindex 052be628a..516014a16 100644\\n--- a/apps/vendor-aster/src/api/public-api.ts\\n+++ b/apps/vendor-aster/src/api/public-api.ts\\n@@ -51,0 +52,25 @@ export const getFApiV1FundingRate = createApi<\\n+export interface IAsterRateLimit {\\n+  rateLimitType?: string;\\n+  interval?: string;\\n+  intervalNum?: number;\\n+  limit?: number;\\n+}\\n+\\n+export interface IAsterExchangeInfo {\\n+  symbols: {\\n+    symbol: string;\\n+    status: 'TRADING' | 'BREAK' | 'HALT';\\n+    baseAsset: string;\\n+    quoteAsset: string;\\n+    pricePrecision: number;\\n+    quantityPrecision: number;\\n+    baseAssetPrecision: number;\\n+    quotePrecision: number;\\n+    filters: {\\n+      filterType: string;\\n+      [key: string]: any;\\n+    }[];\\n+  }[];\\n+  rateLimits?: IAsterRateLimit[];\\n+}\\n+\\n@@ -57,19 +82 @@ export const getFApiV1FundingRate = createApi<\\n-export const getFApiV1ExchangeInfo = createApi<\\n-  {},\\n-  {\\n-    symbols: {\\n-      symbol: string;\\n-      status: 'TRADING' | 'BREAK' | 'HALT';\\n-      baseAsset: string;\\n-      quoteAsset: string;\\n-      pricePrecision: number;\\n-      quantityPrecision: number;\\n-      baseAssetPrecision: number;\\n-      quotePrecision: number;\\n-      filters: {\\n-        filterType: string;\\n-        [key: string]: any;\\n-      }[];\\n-    }[];\\n-  }\\n->('GET', '/fapi/v1/exchangeInfo');\\n+export const getFApiV1ExchangeInfo = createApi<{}, IAsterExchangeInfo>('GET', '/fapi/v1/exchangeInfo');\\n\"\n},\n{\n  \"additions\": 109,\n  \"deletions\": 6,\n  \"path\": \"apps/vendor-aster/src/services/markets/quote.ts\",",
              "lineStart": 413,
              "lineEnd": 418
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "      \"patch\": \"commit 76802e0c0641c1b8fc26e883fa5d114200c367f4\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 18:07:33 2025 +0800\\n\\n    feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/quote.ts b/apps/vendor-aster/src/services/markets/quote.ts\\nindex 68bcc4255..ead158a55 100644\\n--- a/apps/vendor-aster/src/services/markets/quote.ts\\n+++ b/apps/vendor-aster/src/services/markets/quote.ts\\n@@ -6,2 +6,25 @@ import { decodePath, encodePath } from '@yuants/utils';\\n-import { defer, filter, from, map, mergeMap, repeat, retry, shareReplay } from 'rxjs';\\n-import { getFApiV1OpenInterest, getFApiV1TickerPrice } from '../../api/public-api';\\n+import {\\n+  catchError,\\n+  combineLatest,\\n+  concatMap,\\n+  defer,\\n+  filter,\\n+  from,\\n+  groupBy,\\n+  map,\\n+  merge,\\n+  mergeMap,\\n+  of,\\n+  repeat,\\n+  retry,\\n+  scan,\\n+  shareReplay,\\n+  startWith,\\n+  timer,\\n+} from 'rxjs';\\n+import {\\n+  getFApiV1ExchangeInfo,\\n+  getFApiV1OpenInterest,\\n+  getFApiV1TickerPrice,\\n+  IAsterRateLimit,\\n+} from '../../api/public-api';\\n@@ -9,0 +33 @@ const terminal = Terminal.fromNodeEnv();\\n+const DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS = 500;\\n@@ -11,0 +36,28 @@ const OPEN_INTEREST_TTL = process.env.OPEN_INTEREST_TTL ? Number(process.env.OPE\\n+const toIntervalMs = (interval?: string, intervalNum?: number) => {\\n+  switch (interval) {\\n+    case 'SECOND':\\n+      return (intervalNum ?? 1) * 1_000;\\n+    case 'MINUTE':\\n+      return (intervalNum ?? 1) * 60_000;\\n+    case 'HOUR':\\n+      return (intervalNum ?? 1) * 3_600_000;\\n+    case 'DAY':\\n+      return (intervalNum ?? 1) * 86_400_000;\\n+    default:\\n+      return undefined;\\n+  }\\n+};\\n+\\n+const getRequestIntervalMs = (rateLimits: IAsterRateLimit[] | undefined, fallbackMs: number) => {\\n+  const intervals: number[] = [];\\n+  for (const item of rateLimits ?? []) {\\n+    if (item.rateLimitType !== 'REQUEST_WEIGHT' && item.rateLimitType !== 'RAW_REQUESTS') continue;\\n+    const duration = toIntervalMs(item.interval, item.intervalNum);\\n+    const limit = item.limit;\\n+    if (duration == null || limit == null || limit <= 0) continue;\\n+    intervals.push(Math.ceil(duration / limit));\\n+  }\\n+  if (!intervals.length) return fallbackMs;\\n+  return Math.max(fallbackMs, Math.max(...intervals));\\n+};\\n+\\n@@ -25 +77,19 @@ const openInterestCache = createCache<string>(\\n-const quote$ = defer(() => getFApiV1TickerPrice({})).pipe(\\n+const requestInterval$ = defer(() => getFApiV1ExchangeInfo({})).pipe(\\n+  map((info) => getRequestIntervalMs(info.rateLimits, DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS)),\\n+  catchError((err) => {\\n+    console.warn('getFApiV1ExchangeInfo failed when calculating request interval', err);\\n+    return of(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS);\\n+  }),\\n+  startWith(DEFAULT_OPEN_INTEREST_REQUEST_INTERVAL_MS),\\n+  retry({ delay: 60_000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+);\\n+\\n+const ticker$ = defer(() => getFApiV1TickerPrice({})).pipe(\\n+  map((tickers) => (Array.isArray(tickers) ? tickers : [])),\\n+  repeat({ delay: 1000 }),\\n+  retry({ delay: 5000 }),\\n+  shareReplay({ bufferSize: 1, refCount: true }),\\n+);\\n+\\n+const quoteFromTicker$ = ticker$.pipe(\\n@@ -34 +103,0 @@ const quote$ = defer(() => getFApiV1TickerPrice({})).pipe(\\n-      open_interest: '0',\\n@@ -38,2 +107,36 @@ const quote$ = defer(() => getFApiV1TickerPrice({})).pipe(\\n-  repeat({ delay: 1000 }),\\n-  retry({ delay: 5000 }),\\n+);\\n+\\n+const quoteFromOpenInterest$ = combineLatest([ticker$, requestInterval$]).pipe(\\n+  mergeMap(([tickers, requestInterval]) =>\\n+    from(tickers).pipe(\\n+      concatMap((ticker, index) =>\\n+        (index > 0 ? timer(requestInterval) : of(0)).pipe(\\n+          mergeMap(() => from(openInterestCache.query(ticker.symbol))),\\n+          map(\\n+            (openInterest): Partial<IQuote> => ({\\n+              datasource_id: 'ASTER',\\n+              product_id: encodePath('ASTER', 'PERP', ticker.symbol),\\n+              open_interest: `${openInterest ?? 0}`,\\n+              updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n+            }),\\n+          ),\\n+        ),\\n+      ),\\n+    ),\\n+  ),\\n+);\\n+\\n+const quote$ = merge(quoteFromTicker$, quoteFromOpenInterest$).pipe(\\n+  groupBy((quote) => quote.product_id),\\n+  mergeMap((group$) =>\\n+    group$.pipe(\\n+      scan(\\n+        (acc, cur) =>\\n+          Object.assign(acc, cur, {\\n+            datasource_id: 'ASTER',\\n+            product_id: group$.key,\\n+          }),\\n+        {} as Partial<IQuote>,\\n+      ),\\n+    ),\\n+  ),\\n\"\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\",\n      \"patch\": \"commit 76802e0c0641c1b8fc26e883fa5d114200c367f4\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 18:07:33 2025 +0800\\n\\n    feat: 添加请求间隔处理以优化 Aster 数据请求 (#2197)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json b/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\\nnew file mode 100644\\nindex 000000000..6013a6596\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-04-10-05.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"添加请求间隔处理以优化 Aster 数据请求\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"61e0a8bf85bd52fa737f3ce4ee16719d12f357b2\",\n  \"short\": \"61e0a8bf8\",\n  \"author\": \"humblelittlec1[bot]\",\n  \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",",
              "lineStart": 419,
              "lineEnd": 570
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "  \"patch\": \"commit a723dba9dcfcbaf655d2a4aa62602e78f670ae29\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 00:34:31 2025 +0800\\n\\n    feat: 移除系列收集任务写入器 (#2198)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/markets/interest-rate.ts b/apps/vendor-hyperliquid/src/services/markets/interest-rate.ts\\nindex af194dc1f..a93246729 100644\\n--- a/apps/vendor-hyperliquid/src/services/markets/interest-rate.ts\\n+++ b/apps/vendor-hyperliquid/src/services/markets/interest-rate.ts\\n@@ -2 +2 @@ import { IInterestRate } from '@yuants/data-interest-rate';\\n-import { createSeriesProvider, ISeriesCollectingTask } from '@yuants/data-series';\\n+import { createSeriesProvider } from '@yuants/data-series';\\n@@ -4,4 +4,2 @@ import { Terminal } from '@yuants/protocol';\\n-import { createSQLWriter } from '@yuants/sql';\\n-import { decodePath, encodePath, formatTime } from '@yuants/utils';\\n-import { defer, map, mergeAll, repeat, retry, shareReplay, tap } from 'rxjs';\\n-import { getHistoricalFundingRates, getPerpetualsMetaData } from '../../api/public-api';\\n+import { decodePath, formatTime } from '@yuants/utils';\\n+import { getHistoricalFundingRates } from '../../api/public-api';\\n@@ -11,34 +8,0 @@ const terminal = Terminal.fromNodeEnv();\\n-const perpetualProducts$ = defer(async () => {\\n-  const meta = await getPerpetualsMetaData();\\n-  return meta.universe.map((product) => ({\\n-    product_id: encodePath('HYPERLIQUID', 'PERPETUAL', `${product.name}-USD`),\\n-    datasource_id: 'HYPERLIQUID',\\n-    no_interest_rate: false,\\n-  }));\\n-}).pipe(\\n-  tap({ error: (err) => console.error(formatTime(Date.now()), 'PerpetualProductFetchFailed', err) }),\\n-  retry({ delay: 10_000 }),\\n-  repeat({ delay: 3600_000 }),\\n-  shareReplay({ bufferSize: 1, refCount: true }),\\n-);\\n-\\n-createSQLWriter<ISeriesCollectingTask>(terminal, {\\n-  data$: perpetualProducts$.pipe(\\n-    map((products) => products.filter((product) => product.no_interest_rate === false)),\\n-    mergeAll(),\\n-    map(\\n-      (product): ISeriesCollectingTask => ({\\n-        series_id: product.product_id,\\n-        table_name: 'interest_rate',\\n-        cron_pattern: '0 * * * *',\\n-        cron_timezone: 'UTC',\\n-        disabled: false,\\n-        replay_count: 0,\\n-      }),\\n-    ),\\n-  ),\\n-  tableName: 'series_collecting_task',\\n-  writeInterval: 1000,\\n-  conflictKeys: ['series_id', 'table_name'],\\n-});\\n-\\n\"\n},\n{\n  \"additions\": 3,\n  \"deletions\": 24,\n  \"path\": \"apps/vendor-okx/src/public-data/interest_rate.ts\",\n  \"patch\": \"commit a723dba9dcfcbaf655d2a4aa62602e78f670ae29\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 00:34:31 2025 +0800\\n\\n    feat: 移除系列收集任务写入器 (#2198)\\n\\ndiff --git a/apps/vendor-okx/src/public-data/interest_rate.ts b/apps/vendor-okx/src/public-data/interest_rate.ts\\nindex a03083ef5..f3171f275 100644\\n--- a/apps/vendor-okx/src/public-data/interest_rate.ts\\n+++ b/apps/vendor-okx/src/public-data/interest_rate.ts\\n@@ -2 +2 @@ import { IInterestRate } from '@yuants/data-interest-rate';\\n-import { createSeriesProvider, ISeriesCollectingTask } from '@yuants/data-series';\\n+import { createSeriesProvider } from '@yuants/data-series';\\n@@ -4,3 +4,2 @@ import { Terminal } from '@yuants/protocol';\\n-import { createSQLWriter } from '@yuants/sql';\\n-import { decodePath, encodePath, formatTime } from '@yuants/utils';\\n-import { firstValueFrom, map, mergeAll, timer } from 'rxjs';\\n+import { decodePath, formatTime } from '@yuants/utils';\\n+import { firstValueFrom, timer } from 'rxjs';\\n@@ -8,20 +6,0 @@ import { getFundingRateHistory, getLendingRateHistory } from '../api/public-api'\\n-import { productService } from './product';\\n-\\n-createSQLWriter<ISeriesCollectingTask>(Terminal.fromNodeEnv(), {\\n-  data$: productService.products$.pipe(\\n-    mergeAll(),\\n-    map(\\n-      (x): ISeriesCollectingTask => ({\\n-        series_id: x.product_id,\\n-        table_name: 'interest_rate',\\n-        cron_pattern: '0 * * * *', // 每小时执行一次\\n-        cron_timezone: 'UTC',\\n-        disabled: false,\\n-        replay_count: 0,\\n-      }),\\n-    ),\\n-  ),\\n-  tableName: 'series_collecting_task',\\n-  writeInterval: 1000,\\n-  conflictKeys: ['series_id', 'table_name'],\\n-});\\n\"\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\",\n  \"patch\": \"commit a723dba9dcfcbaf655d2a4aa62602e78f670ae29\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Fri Dec 5 00:34:31 2025 +0800\\n\\n    feat: 移除系列收集任务写入器 (#2198)\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\\nnew file mode 100644\\nindex 000000000..b8b1e588a\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-hyperliquid/2025-12-04-16-30.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n+      \\\"comment\\\": \\\"remove series_collector_task writer\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n},\n{",
              "lineStart": 571,
              "lineEnd": 671
            }
          ]
        },
        {
          "additions": 205,
          "deletions": 0,
          "path": "docs/reports/git-changes-report-2025-12-05.md",
          "changeType": "added",
          "patch": "commit f69e5a73aab9d463c49340a3a65122e391d880d0\nAuthor: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 15:31:44 2025 +0800\n\n    feat: add daily git change report for 2025-12-05 - 12 commits (#2200)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n    Co-authored-by: Siyuan Wang <c.one@thrimbda.com>\n\ndiff --git a/docs/reports/git-changes-report-2025-12-05.md b/docs/reports/git-changes-report-2025-12-05.md\nnew file mode 100644\nindex 000000000..5ed72113a\n--- /dev/null\n+++ b/docs/reports/git-changes-report-2025-12-05.md\n@@ -0,0 +1,205 @@\n+# Git 变更报告（a126bbb40..c36262cad）\n+\n+## 1. 概览\n+\n+- 时间范围：2025-12-04 至 2025-12-05\n+- 提交数量：12\n+- 主要贡献者：humblelittlec1[bot] (5)、CZ (4)、Siyuan Wang (3)\n+- 热点目录：apps (49)、common (7)\n+\n+## 2. 改动聚焦领域\n+\n+### 2.1 功能开发与 API 集成\n+\n+- **涉及目录**：`apps/vendor-bitget/`、`apps/vendor-turboflow/`、`apps/virtual-exchange/`\n+- **关键提交**：\n+  - `52651345f` (feat: enhance order submission logic to round volume for close positions)\n+  - `65358bffa` (refactor(vendor-bitget) API integration for futures and spot markets)\n+  - `9b9495d1e` (feat: update credential handling to use secret_id and enhance error management)\n+- **核心改动**：\n+  - `apps/vendor-turboflow/src/services/orders/submitOrder.ts:50-51`：平仓时对剩余小于 1 USDC 的仓位自动平仓，使用 `Math.floor(order.volume)` 替代 `order.volume.toString()`\n+  - `apps/vendor-bitget/src/api/private-api.ts:11-442`：全面重构 Bitget API，从旧版 v2 接口迁移到 UTA v3 统一账户接口，新增 `IUtaAccountAsset`、`IUtaPosition` 等类型定义\n+  - `apps/vendor-bitget/src/services/accounts/account.ts:1-59`：新增统一账户服务，合并期货和现货账户查询，支持 `USDT-FUTURES`、`COIN-FUTURES`、`SPOT` 三种产品类型\n+  - `apps/virtual-exchange/src/credential.ts:117-140`：新增 `getCredentialBySecretId` 方法，基于 `secret_id` 获取凭证，增强错误处理\n+  - `apps/virtual-exchange/src/general.ts:13-117`：所有服务接口从 `credential_id` 参数改为 `secret_id`，统一凭证处理流程\n+- **设计意图**：\n+  - 统一 Bitget 期货和现货 API 接口，简化维护复杂度\n+  - 优化 Turboflow 平仓逻辑，避免小额仓位残留\n+  - 改进虚拟交易所凭证管理，支持基于 secret_id 的安全访问\n+\n+### 2.2 重构与优化\n+\n+- **涉及目录**：`apps/vendor-bitget/`、`apps/vendor-binance/`、`apps/vendor-aster/`\n+- **关键提交**：\n+  - `b285cde59` (feat: 添加请求间隔处理以优化 Binance 数据请求)\n+  - `76802e0c0` (feat: 添加请求间隔处理以优化 Aster 数据请求)\n+- **核心改动**：\n+  - `apps/vendor-binance/src/public-data/quote.ts:39-182`：添加请求间隔计算逻辑，根据 `exchangeInfo.rateLimits` 动态调整 open interest 和 margin 利率请求频率\n+  - `apps/vendor-aster/src/services/markets/quote.ts:33-182`：实现类似请求间隔优化，使用 `getFApiV1ExchangeInfo` 获取限频信息\n+  - `apps/vendor-bitget/src/services/markets/product.ts:17-95`：扩展产品列表服务，新增 SPOT 产品支持，设置 `no_interest_rate: true`\n+  - `apps/vendor-bitget/src/services/accounts/futures.ts:1-64`、`apps/vendor-bitget/src/services/accounts/spot.ts:1-57`：删除旧版期货和现货账户服务，统一到新的 `account.ts`\n+- **设计意图**：\n+  - 防止 API 请求过快导致 IP 被封，根据交易所限频规则动态调整请求间隔\n+  - 统一 Bitget 服务架构，减少代码重复\n+  - 完善产品配置，正确标记现货产品无利率特性\n+\n+### 2.3 运维与部署\n+\n+- **涉及目录**：`apps/`、`common/changes/`\n+- **关键提交**：\n+  - `773713684` (chore: bump version)\n+  - `759b18e5c` (chore: bump version)\n+  - `e6d5d8b12` (chore: bump version)\n+  - `61e0a8bf8` (chore: bump version)\n+  - `c36262cad` (chore: bump version)\n+- **核心改动**：\n+  - 多个 vendor 包的版本更新和 CHANGELOG 维护\n+  - `common/changes/` 目录下的变更记录文件创建和清理\n+  - 版本号递增：vendor-turboflow (1.2.8 → 1.2.9)、vendor-bitget (0.10.4 → 0.11.1)、virtual-exchange (0.5.2 → 0.5.3) 等\n+- **设计意图**：\n+  - 保持包版本与代码变更同步\n+  - 维护规范的变更记录流程\n+\n+### 2.4 错误处理与配置修复\n+\n+- **涉及目录**：`apps/vendor-bitget/`、`apps/vendor-okx/`\n+- **关键提交**：\n+  - `c1217ecbc` (fix: update interest rate handling and product configuration for spot markets)\n+  - `a723dba9d` (feat: 移除系列收集任务写入器)\n+- **核心改动**：\n+  - `apps/vendor-bitget/src/services/markets/product.ts:91`：将现货产品的 `no_interest_rate` 从 `false` 改为 `true`\n+  - `apps/vendor-okx/src/public-data/interest_rate.ts:15-117`：修复利率数据收集的 `series_id` 和 `datasource_id` 映射逻辑\n+  - `apps/vendor-hyperliquid/src/services/markets/interest-rate.ts:2-34`、`apps/vendor-okx/src/public-data/interest_rate.ts:2-24`：移除 `series_collecting_task` 写入器，简化架构\n+- **设计意图**：\n+  - 修正产品配置，避免对现货产品进行不必要的利率查询\n+  - 清理过时的任务收集机制，减少系统复杂度\n+\n+## 3. 贡献者分析\n+\n+| 作者 | 提交数 | 主要领域 |\n+|------|--------|----------|\n+| humblelittlec1[bot] | 5 | 版本发布、变更日志维护 |\n+| CZ | 4 | 功能开发、错误修复、架构优化 |\n+| Siyuan Wang | 3 | API 重构、性能优化、请求间隔处理 |\n+\n+## 4. 技术影响与风险\n+\n+- **兼容性影响**：\n+  - Bitget API 从 v2 迁移到 UTA v3 可能影响现有集成，但新接口提供了更好的统一账户支持\n+  - virtual-exchange 从 `credential_id` 改为 `secret_id` 需要客户端更新\n+  \n+- **配置变更**：\n+  - 多个 vendor 包版本更新，部署时需同步更新依赖\n+  - 现货产品配置变更，避免不必要的利率查询\n+  \n+- **性能影响**：\n+  - Binance 和 Aster 的请求间隔优化可降低 API 调用频率，减少被封风险\n+  - 移除系列收集任务写入器可减少数据库写入负载\n+  \n+- **测试覆盖**：\n+  - 未见测试文件变更记录，建议对 API 重构和请求间隔逻辑进行充分测试\n+\n+## 5. 单提交摘要（附录）\n+\n+### 52651345f CZ | 2025-12-04 | feat\n+\n+**主题**：enhance order submission logic to round volume for close positions (#2189)\n+\n+**变更要点**：\n+- `apps/vendor-turboflow/src/services/orders/submitOrder.ts:50-51`：平仓时对剩余小于 1 USDC 的仓位自动平仓\n+- 使用 `Math.floor(order.volume)` 替代 `order.volume.toString()` 进行取整处理\n+\n+**风险/影响**：\n+- 可能影响小额仓位平仓行为，确保取整逻辑符合业务预期\n+\n+**测试**：未见测试记录\n+\n+### 65358bffa Siyuan Wang | 2025-12-04 | refactor\n+\n+**主题**：refactor(vendor-bitget) API integration for futures and spot markets (#2183)\n+\n+**变更要点**：\n+- `apps/vendor-bitget/src/api/private-api.ts:11-442`：全面重构 Bitget API 到 UTA v3\n+- `apps/vendor-bitget/src/services/accounts/account.ts:1-59`：新增统一账户服务\n+- 删除旧版 `futures.ts` 和 `spot.ts` 账户服务\n+- 更新订单、行情、产品服务依赖新的 UTA 接口\n+\n+**风险/影响**：\n+- 重大 API 变更，需要全面测试期货和现货功能\n+- 统一接口简化维护，但迁移期间需确保兼容性\n+\n+**测试**：未见测试记录\n+\n+### 9b9495d1e CZ | 2025-12-04 | feat\n+\n+**主题**：update credential handling to use secret_id and enhance error management (#2192)\n+\n+**变更要点**：\n+- `apps/virtual-exchange/src/credential.ts:117-140`：新增 `getCredentialBySecretId` 方法\n+- `apps/virtual-exchange/src/general.ts:13-117`：所有服务接口参数从 `credential_id` 改为 `secret_id`\n+- 增强错误处理，添加 `CREDENTIAL_NOT_FOUND` 等错误类型\n+\n+**风险/影响**：\n+- 客户端需要更新调用方式，使用 `secret_id` 替代 `credential_id`\n+- 提高凭证查找的安全性和准确性\n+\n+**测试**：未见测试记录\n+\n+### b285cde59 Siyuan Wang | 2025-12-04 | feat\n+\n+**主题**：添加请求间隔处理以优化 Binance 数据请求 (#2195)\n+\n+**变更要点**：\n+- `apps/vendor-binance/src/public-data/quote.ts:39-182`：根据 `exchangeInfo.rateLimits` 计算请求间隔\n+- 默认间隔：Futures 500ms、Spot/Margin 200ms\n+- 使用 RxJS `timer` + `concatMap` 实现串行请求节流\n+\n+**风险/影响**：\n+- 降低 API 调用频率，减少被封风险\n+- 可能略微增加数据更新延迟\n+\n+**测试**：未见测试记录\n+\n+### 76802e0c0 Siyuan Wang | 2025-12-04 | feat\n+\n+**主题**：添加请求间隔处理以优化 Aster 数据请求 (#2197)\n+\n+**变更要点**：\n+- `apps/vendor-aster/src/services/markets/quote.ts:33-182`：实现类似 Binance 的请求间隔优化\n+- 扩展 `IAsterExchangeInfo` 接口，添加 `rateLimits` 支持\n+- 使用 `groupBy + scan` 合并 ticker 与 open interest 数据\n+\n+**风险/影响**：\n+- 防止 Aster API 请求过快被封\n+- 优化数据流处理，减少重复输出\n+\n+**测试**：未见测试记录\n+\n+### c1217ecbc CZ | 2025-12-04 | fix\n+\n+**主题**：update interest rate handling and product configuration for spot markets (#2194)\n+\n+**变更要点**：\n+- `apps/vendor-bitget/src/services/markets/product.ts:91`：修正现货产品 `no_interest_rate: true`\n+- `apps/vendor-okx/src/public-data/interest_rate.ts:15-117`：修复利率数据收集的 ID 映射\n+\n+**风险/影响**：\n+- 避免对现货产品进行不必要的利率查询\n+- 确保 OKX 利率数据正确关联产品\n+\n+**测试**：未见测试记录\n+\n+### a723dba9d CZ | 2025-12-05 | feat\n+\n+**主题**：移除系列收集任务写入器 (#2198)\n+\n+**变更要点**：\n+- `apps/vendor-hyperliquid/src/services/markets/interest-rate.ts:2-34`：移除 `series_collecting_task` 写入器\n+- `apps/vendor-okx/src/public-data/interest_rate.ts:2-24`：移除相同功能\n+- 简化架构，减少不必要的数据库写入\n+\n+**风险/影响**：\n+- 减少系统复杂度\n+- 可能影响任务调度机制，需确认替代方案\n+\n+**测试**：未见测试记录\n\\ No newline at end of file\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "5d803a46dab96b7f30b727678251a3d8f6f0a03d",
      "short": "5d803a46d",
      "author": "github-actions[bot]",
      "email": "41898282+github-actions[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-09 15:32:05 +0800",
      "subject": "feat: add daily git change report for 2025-12-04 - 30 commits (#2188)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 2206,
          "deletions": 0,
          "path": "docs/reports/git-changes-2025-12-04.json",
          "changeType": "added",
          "patch": "commit 5d803a46dab96b7f30b727678251a3d8f6f0a03d\nAuthor: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 15:32:05 2025 +0800\n\n    feat: add daily git change report for 2025-12-04 - 30 commits (#2188)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n    Co-authored-by: Siyuan Wang <c.one@thrimbda.com>\n\ndiff --git a/docs/reports/git-changes-2025-12-04.json b/docs/reports/git-changes-2025-12-04.json\nnew file mode 100644\nindex 000000000..c6320f278\n--- /dev/null\n+++ b/docs/reports/git-changes-2025-12-04.json\n@@ -0,0 +1,2206 @@\n+{\n+  \"range\": {\n+    \"old\": \"935f0cc6f8c651273d39e11d759acfd1a3091e46\",\n+    \"new\": \"a126bbb4025a5e602bf4f1f50f6ca225c5f96573\",\n+    \"label\": \"935f0cc6f..a126bbb40\",\n+    \"startDate\": \"2025-12-03\",\n+    \"endDate\": \"2025-12-04\",\n+    \"commitCount\": 30,\n+    \"generatedAt\": \"2025-12-04T00:06:09.722Z\"\n+  },\n+  \"contributors\": [\n+    {\n+      \"name\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"commits\": 8\n+    },\n+    {\n+      \"name\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"commits\": 5\n+    },\n+    {\n+      \"name\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"commits\": 6\n+    },\n+    {\n+      \"name\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"commits\": 11\n+    }\n+  ],\n+  \"topDirs\": [\n+    {\n+      \"dir\": \"apps\",\n+      \"fileCount\": 90\n+    },\n+    {\n+      \"dir\": \"common\",\n+      \"fileCount\": 24\n+    },\n+    {\n+      \"dir\": \"libraries\",\n+      \"fileCount\": 22\n+    },\n+    {\n+      \"dir\": \".claude\",\n+      \"fileCount\": 8\n+    },\n+    {\n+      \"dir\": \"distributions\",\n+      \"fileCount\": 3\n+    },\n+    {\n+      \"dir\": \".github\",\n+      \"fileCount\": 2\n+    },\n+    {\n+      \"dir\": \"ui\",\n+      \"fileCount\": 1\n+    }\n+  ],\n+  \"commits\": [\n+    {\n+      \"hash\": \"a32bacdad24311b70332b097ba498c47992e36c0\",\n+      \"short\": \"a32bacdad\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-03 14:59:55 +0800\",\n+      \"subject\": \"feat: add api call monitor (#2156)\",\n+      \"files\": [\n+        {\n+          \"additions\": 9,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/src/api/private-api.ts\",\n+          \"patch\": \"commit a32bacdad24311b70332b097ba498c47992e36c0\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 14:59:55 2025 +0800\\n\\n    feat: add api call monitor (#2156)\\n\\ndiff --git a/apps/vendor-aster/src/api/private-api.ts b/apps/vendor-aster/src/api/private-api.ts\\nindex 2987cb0d1..71f2f7943 100644\\n--- a/apps/vendor-aster/src/api/private-api.ts\\n+++ b/apps/vendor-aster/src/api/private-api.ts\\n@@ -2,0 +3,8 @@ import { encodeHex, HmacSHA256 } from '@yuants/utils';\\n+import { GlobalPrometheusRegistry, Terminal } from '@yuants/protocol';\\n+\\n+const MetricsAsterApiCallCounter = GlobalPrometheusRegistry.counter(\\n+  'aster_api_call',\\n+  'Number of aster api call',\\n+);\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n@@ -72,0 +81 @@ const request = async <T>(\\n+  MetricsAsterApiCallCounter.labels({ path: url.pathname, terminal_id: terminal.terminal_id }).inc();\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-03-06-57.json\",\n+          \"patch\": \"commit a32bacdad24311b70332b097ba498c47992e36c0\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 14:59:55 2025 +0800\\n\\n    feat: add api call monitor (#2156)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-03-06-57.json b/common/changes/@yuants/vendor-aster/2025-12-03-06-57.json\\nnew file mode 100644\\nindex 000000000..4209d27f4\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-03-06-57.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"add api call monitor\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"9b890949b291fc568fce5aecd1b934a20100b029\",\n+      \"short\": \"9b890949b\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-03 15:18:06 +0800\",\n+      \"subject\": \"feat: fix open interest call (#2158)\",\n+      \"files\": [\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 16,\n+          \"path\": \"apps/vendor-aster/src/services/markets/quote.ts\",\n+          \"patch\": \"commit 9b890949b291fc568fce5aecd1b934a20100b029\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 15:18:06 2025 +0800\\n\\n    feat: fix open interest call (#2158)\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/quote.ts b/apps/vendor-aster/src/services/markets/quote.ts\\nindex a5a828de8..68bcc4255 100644\\n--- a/apps/vendor-aster/src/services/markets/quote.ts\\n+++ b/apps/vendor-aster/src/services/markets/quote.ts\\n@@ -27,16 +27,10 @@ const quote$ = defer(() => getFApiV1TickerPrice({})).pipe(\\n-  mergeMap(\\n-    (ticker) =>\\n-      from(openInterestCache.query(ticker.symbol)).pipe(\\n-        map(\\n-          (openInterest): Partial<IQuote> => ({\\n-            datasource_id: 'ASTER',\\n-            product_id: encodePath('PERP', ticker.symbol),\\n-            last_price: `${ticker.price}`,\\n-            bid_price: `${ticker.price}`,\\n-            ask_price: `${ticker.price}`,\\n-            open_interest: `${openInterest ?? 0}`,\\n-            updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n-          }),\\n-        ),\\n-      ),\\n-    5,\\n+  map(\\n+    (ticker): Partial<IQuote> => ({\\n+      datasource_id: 'ASTER',\\n+      product_id: encodePath('ASTER', 'PERP', ticker.symbol),\\n+      last_price: `${ticker.price}`,\\n+      bid_price: `${ticker.price}`,\\n+      ask_price: `${ticker.price}`,\\n+      open_interest: '0',\\n+      updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n+    }),\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-03-07-12.json\",\n+          \"patch\": \"commit 9b890949b291fc568fce5aecd1b934a20100b029\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 15:18:06 2025 +0800\\n\\n    feat: fix open interest call (#2158)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-03-07-12.json b/common/changes/@yuants/vendor-aster/2025-12-03-07-12.json\\nnew file mode 100644\\nindex 000000000..0afb16791\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-03-07-12.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"fix aster openinterest call\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"72d270f47b1a90d39cbbd32acaf5b3a0a69095e9\",\n+      \"short\": \"72d270f47\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-03 15:24:13 +0800\",\n+      \"subject\": \"feat: add api call monitor (#2157)\",\n+      \"files\": [\n+        {\n+          \"additions\": 7,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/src/api/public-api.ts\",\n+          \"patch\": \"commit 72d270f47b1a90d39cbbd32acaf5b3a0a69095e9\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 15:24:13 2025 +0800\\n\\n    feat: add api call monitor (#2157)\\n\\ndiff --git a/apps/vendor-aster/src/api/public-api.ts b/apps/vendor-aster/src/api/public-api.ts\\nindex bfc642fff..052be628a 100644\\n--- a/apps/vendor-aster/src/api/public-api.ts\\n+++ b/apps/vendor-aster/src/api/public-api.ts\\n@@ -1,0 +2 @@ const BASE_URL = 'https://fapi.asterdex.com';\\n+import { GlobalPrometheusRegistry, Terminal } from '@yuants/protocol';\\n@@ -2,0 +4,5 @@ const BASE_URL = 'https://fapi.asterdex.com';\\n+const MetricsAsterApiCallCounter = GlobalPrometheusRegistry.counter(\\n+  'aster_api_call',\\n+  'Number of aster api call',\\n+);\\n+const terminal = Terminal.fromNodeEnv();\\n@@ -11,0 +18 @@ const request = async <T>(method: string, endpoint: string, params: any = {}): P\\n+  MetricsAsterApiCallCounter.labels({ path: url.pathname, terminal_id: terminal.terminal_id }).inc();\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-03-07-01.json\",\n+          \"patch\": \"commit 72d270f47b1a90d39cbbd32acaf5b3a0a69095e9\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 15:24:13 2025 +0800\\n\\n    feat: add api call monitor (#2157)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-03-07-01.json b/common/changes/@yuants/vendor-aster/2025-12-03-07-01.json\\nnew file mode 100644\\nindex 000000000..4209d27f4\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-03-07-01.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"add api call monitor\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"786b42e45065cf1639f2edba79a9ec70854c7a06\",\n+      \"short\": \"786b42e45\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-03 15:26:41 +0800\",\n+      \"subject\": \"chore: bump version (#2159)\",\n+      \"files\": [\n+        {\n+          \"additions\": 23,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"patch\": \"commit 786b42e45065cf1639f2edba79a9ec70854c7a06\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 15:26:41 2025 +0800\\n\\n    chore: bump version (#2159)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex fd35038a7..46c097837 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,23 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.13\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.13\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 07:26:21 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add api call monitor\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"add api call monitor\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"fix aster openinterest call\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"patch\": \"commit 786b42e45065cf1639f2edba79a9ec70854c7a06\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 15:26:41 2025 +0800\\n\\n    chore: bump version (#2159)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex 88ac38808..1bb2e5d84 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,10 @@\\n-This log was last generated on Tue, 02 Dec 2025 14:00:52 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 07:26:21 GMT and should not be manually modified.\\n+\\n+## 0.7.13\\n+Wed, 03 Dec 2025 07:26:21 GMT\\n+\\n+### Patches\\n+\\n+- add api call monitor\\n+- add api call monitor\\n+- fix aster openinterest call\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"patch\": \"commit 786b42e45065cf1639f2edba79a9ec70854c7a06\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 15:26:41 2025 +0800\\n\\n    chore: bump version (#2159)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex 29fa77a54..c1fee6f19 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.12\\\",\\n+  \\\"version\\\": \\\"0.7.13\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-03-06-57.json\",\n+          \"patch\": \"commit 786b42e45065cf1639f2edba79a9ec70854c7a06\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 15:26:41 2025 +0800\\n\\n    chore: bump version (#2159)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-03-06-57.json b/common/changes/@yuants/vendor-aster/2025-12-03-06-57.json\\ndeleted file mode 100644\\nindex 4209d27f4..000000000\\n--- a/common/changes/@yuants/vendor-aster/2025-12-03-06-57.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n-      \\\"comment\\\": \\\"add api call monitor\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-03-07-01.json\",\n+          \"patch\": \"commit 786b42e45065cf1639f2edba79a9ec70854c7a06\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 15:26:41 2025 +0800\\n\\n    chore: bump version (#2159)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-03-07-01.json b/common/changes/@yuants/vendor-aster/2025-12-03-07-01.json\\ndeleted file mode 100644\\nindex 4209d27f4..000000000\\n--- a/common/changes/@yuants/vendor-aster/2025-12-03-07-01.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n-      \\\"comment\\\": \\\"add api call monitor\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-03-07-12.json\",\n+          \"patch\": \"commit 786b42e45065cf1639f2edba79a9ec70854c7a06\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 15:26:41 2025 +0800\\n\\n    chore: bump version (#2159)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-03-07-12.json b/common/changes/@yuants/vendor-aster/2025-12-03-07-12.json\\ndeleted file mode 100644\\nindex 0afb16791..000000000\\n--- a/common/changes/@yuants/vendor-aster/2025-12-03-07-12.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n-      \\\"comment\\\": \\\"fix aster openinterest call\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-02-14-01.json => main_2025-12-03-07-26.json}\",\n+          \"patch\": \"\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"a14c2b84b1ff4b55b3fd74e16115eb3789243806\",\n+      \"short\": \"a14c2b84b\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-03 15:56:26 +0800\",\n+      \"subject\": \"feat: add daily Git change report workflow and scripts (#2160)\",\n+      \"files\": [\n+        {\n+          \"additions\": 16,\n+          \"deletions\": 1,\n+          \"path\": \".claude/settings.local.json\",\n+          \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.claude/settings.local.json b/.claude/settings.local.json\\nindex ddda998ce..0eb73438c 100644\\n--- a/.claude/settings.local.json\\n+++ b/.claude/settings.local.json\\n@@ -9 +9,16 @@\\n-      \\\"Skill(recent-changes-digest)\\\"\\n+      \\\"Skill(recent-changes-digest)\\\",\\n+      \\\"Bash(git rev-parse:*)\\\",\\n+      \\\"Bash(.claude/skills/recent-changes-digest/scripts/generate-digest.js:*)\\\",\\n+      \\\"Bash(python3:*)\\\",\\n+      \\\"Skill(skill-creator)\\\",\\n+      \\\"Bash(node .claude/skills/git-changes-reporter/scripts/generate-json.js:*)\\\",\\n+      \\\"Bash(node .claude/skills/git-changes-reporter/scripts/generate-github-links.js:*)\\\",\\n+      \\\"Bash(node -c:*)\\\",\\n+      \\\"Bash(chmod:*)\\\",\\n+      \\\"Skill(git-changes-reporter)\\\",\\n+      \\\"Bash(.claude/skills/git-changes-reporter/scripts/get-daily-commit-range.sh:*)\\\",\\n+      \\\"Bash(node .claude/skills/git-changes-reporter/scripts/generate-daily-report.js:*)\\\",\\n+      \\\"Bash(DEEPSEEK_API_KEY=\\\\\\\"test_key\\\\\\\" node .claude/skills/git-changes-reporter/scripts/deepseek-skill-runner.js:*)\\\",\\n+      \\\"Bash(node .claude/skills/git-changes-reporter/scripts/deepseek-skill-runner.js:*)\\\",\\n+      \\\"Bash(npm install:*)\\\",\\n+      \\\"Bash(DEEPSEEK_API_KEY=\\\\\\\"$DEEPSEEK_API_KEY\\\\\\\" node:*)\\\"\\n\"\n+        },\n+        {\n+          \"additions\": 315,\n+          \"deletions\": 0,\n+          \"path\": \".claude/skills/git-changes-reporter/SKILL.md\",\n+          \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.claude/skills/git-changes-reporter/SKILL.md b/.claude/skills/git-changes-reporter/SKILL.md\\nnew file mode 100644\\nindex 000000000..89141fbc9\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/SKILL.md\\n@@ -0,0 +1,315 @@\\n+---\\n+name: git-changes-reporter\\n+description: 生成结构化 git 变更报告，包含原始 JSON 数据和语义化 Markdown 解读。使用此技能当需要分析指定提交区间的代码变更，生成供工程师快速理解的报告，或为 Agent 提供上下文回答进一步问题。适用于代码审查、发布说明、团队同步、CI 每日摘要等场景。\\n+---\\n+\\n+# Git Changes Reporter\\n+\\n+## 概述\\n+\\n+本技能提供两阶段 git 变更分析工作流：首先生成结构化 JSON 原始数据，然后基于 JSON 和代码解读生成语义化 Markdown 报告。JSON 数据为 Agent 提供完整上下文，Markdown 报告为工程师提供可读摘要。\\n+\\n+## 工作流决策树\\n+\\n+```mermaid\\n+graph TD\\n+    A[用户请求变更报告] --> B{需要原始数据还是语义报告?}\\n+    B -->|仅需原始数据| C[运行 generate-json.js]\\n+    B -->|需要语义报告| D[运行 generate-json.js]\\n+    D --> E[基于 JSON 生成 Markdown 报告]\\n+    C --> F[输出 JSON 文件]\\n+    E --> G[输出 Markdown 报告]\\n+```\\n+\\n+## 第一阶段：生成结构化 JSON 数据\\n+\\n+### 何时使用\\n+\\n+- 需要为 Agent 提供完整 git 变更上下文\\n+- 需要原始数据用于进一步处理或分析\\n+- CI/CD 流水线中存储变更记录\\n+\\n+### 使用方法\\n+\\n+运行脚本生成 JSON：\\n+\\n+```bash\\n+.claude/skills/git-changes-reporter/scripts/generate-json.js <old_commit> <new_commit> [output_path]\\n+```\\n+\\n+**参数说明**：\\n+\\n+- `<old_commit>`：起始提交引用（commit hash、tag、branch）\\n+- `<new_commit>`：结束提交引用\\n+- `[output_path]`：可选输出路径，默认 `docs/reports/git-changes-YYYY-MM-DD.json`\\n+\\n+**示例**：\\n+\\n+```bash\\n+# 分析最近 10 个提交\\n+.claude/skills/git-changes-reporter/scripts/generate-json.js HEAD~10 HEAD\\n+\\n+# 指定输出路径\\n+.claude/skills/git-changes-reporter/scripts/generate-json.js v1.0.0 HEAD ./reports/changes.json\\n+```\\n+\\n+### JSON 数据结构\\n+\\n+生成的 JSON 包含以下字段：\\n+\\n+```json\\n+{\\n+  \\\"range\\\": {\\n+    \\\"old\\\": \\\"起始提交引用\\\",\\n+    \\\"new\\\": \\\"结束提交引用\\\",\\n+    \\\"label\\\": \\\"显示标签\\\",\\n+    \\\"startDate\\\": \\\"起始日期\\\",\\n+    \\\"endDate\\\": \\\"结束日期\\\",\\n+    \\\"commitCount\\\": \\\"提交数量\\\",\\n+    \\\"generatedAt\\\": \\\"生成时间\\\"\\n+  },\\n+  \\\"contributors\\\": [{ \\\"name\\\": \\\"作者名\\\", \\\"email\\\": \\\"邮箱\\\", \\\"commits\\\": \\\"提交数\\\" }],\\n+  \\\"topDirs\\\": [{ \\\"dir\\\": \\\"目录名\\\", \\\"fileCount\\\": \\\"文件数\\\" }],\\n+  \\\"commits\\\": [\\n+    {\\n+      \\\"hash\\\": \\\"完整提交哈希\\\",\\n+      \\\"short\\\": \\\"短哈希\\\",\\n+      \\\"author\\\": \\\"作者\\\",\\n+      \\\"email\\\": \\\"邮箱\\\",\\n+      \\\"authoredAt\\\": \\\"提交时间\\\",\\n+      \\\"subject\\\": \\\"提交信息\\\",\\n+      \\\"files\\\": [\\n+        {\\n+          \\\"path\\\": \\\"文件路径\\\",\\n+          \\\"additions\\\": \\\"新增行数\\\",\\n+          \\\"deletions\\\": \\\"删除行数\\\",\\n+          \\\"patch\\\": \\\"差异内容\\\"\\n+        }\\n+      ]\\n+    }\\n+  ]\\n+}\\n+```\\n+\\n+### 脚本详情\\n+\\n+参见 [scripts/generate-json.js](scripts/generate-json.js) 了解实现细节。该脚本：\\n+\\n+- 验证 git 仓库状态\\n+- 收集提交范围信息\\n+- 提取每个提交的文件变更和 patch\\n+- 生成结构化 JSON 输出\\n+\\n+## 第二阶段：生成语义化 Markdown 报告\\n+\\n+### 何时使用\\n+\\n+- 需要人类可读的变更摘要\\n+- 团队同步或代码审查\\n+- 发布说明或变更日志\\n+- 为工程师提供快速概览\\n+\\n+### 工作流程\\n+\\n+1. **加载 JSON 数据**：首先运行 `generate-json.js` 生成或加载现有 JSON 文件\\n+2. **分析代码变更**：读取 JSON 中的 commits 和 files，必要时查看实际代码文件\\n+3. **语义聚类**：按技术领域分组提交（错误处理、安全、功能、重构等）\\n+4. **生成报告**：基于分析结果撰写 Markdown\\n+\\n+### 报告结构模板\\n+\\n+报告应包含以下部分：\\n+\\n+```markdown\\n+# Git 变更报告（<提交范围>）\\n+\\n+## 1. 概览\\n+\\n+- 时间范围：<startDate> 至 <endDate>\\n+- 提交数量：<commitCount>\\n+- 主要贡献者：<前 3 位作者>\\n+- 热点目录：<前 3 个目录>\\n+\\n+## 2. 改动聚焦领域\\n+\\n+### 2.1 <领域 1：如错误处理与观测>\\n+\\n+- **涉及目录**：<目录列表>\\n+- **关键提交**：<短哈希列表及主题>\\n+- **核心改动**：\\n+  - <文件路径>：<改动描述>\\n+  - <文件路径>：<改动描述>\\n+- **设计意图**：<从代码和提交信息推断>\\n+\\n+### 2.2 <领域 2：如安全与鉴权>\\n+\\n+...\\n+\\n+## 3. 贡献者分析\\n+\\n+| 作者   | 提交数 | 主要领域 |\\n+| ------ | ------ | -------- |\\n+| <作者> | <数量> | <领域>   |\\n+\\n+## 4. 技术影响与风险\\n+\\n+- **兼容性影响**：<描述>\\n+- **配置变更**：<描述>\\n+- **性能影响**：<描述>\\n+- **测试覆盖**：<描述>\\n+\\n+## 5. 单提交摘要（附录）\\n+\\n+### <短哈希> <作者> | <日期> | <标签>\\n+\\n+**主题**：<原提交主题>\\n+\\n+**变更要点**：\\n+\\n+- <文件/目录>：<具体改动与目的>\\n+- <接口/协议>：<变更描述>\\n+- <行为/数据流>：<运行时影响>\\n+\\n+**风险/影响**：\\n+\\n+- <兼容性/配置/依赖影响>\\n+\\n+**测试**：<测试文件或\\\"未见测试记录\\\">\\n+```\\n+\\n+### 写作指南\\n+\\n+#### 语义聚类原则\\n+\\n+- **错误处理与观测**：异常处理、日志、监控、指标\\n+- **安全与鉴权**：认证、授权、加密、输入验证\\n+- **功能开发**：新特性、API 扩展、业务逻辑\\n+- **重构与优化**：代码整理、性能优化、架构调整\\n+- **运维与部署**：配置、脚本、CI/CD、文档\\n+- **依赖更新**：包版本升级、第三方库变更\\n+\\n+#### 文件引用格式\\n+\\n+- 使用完整路径：`apps/vendor-aster/src/quote.ts`\\n+- 包含行号范围：`libraries/protocol/src/terminal.ts:138-143`\\n+- 链接到代码：在 IDE 环境中使用可点击链接格式\\n+\\n+#### 提交引用格式\\n+\\n+- 短哈希：`03a48cfc4`\\n+- 带主题：`03a48cfc4 (feat: enforce terminal_id...)`\\n+- 在描述中显式关联：`在 03a48cfc4 中，CZ 改进了...`\\n+\\n+**⚠️ 重要警告：不要使用 JSON 文件行号作为 commit ID**\\n+\\n+- JSON 文件中的行号（如 `1279`、`703`）只是文件位置，不是 commit 标识符\\n+- 正确的 commit ID 在 JSON 的 `\\\"short\\\"` 字段中（如 `\\\"a9300e76f\\\"`）\\n+- 错误示例：`1279`（行号） ❌\\n+- 正确示例：`a9300e76f`（短哈希） ✅\\n+\\n+#### 语气与风格\\n+\\n+- **客观专业**：面向工程同事，基于事实\\n+- **简明扼要**：短段落，列表优先，表格用于比较\\n+- **中英混合**：正文使用中文，代码/命令使用英文\\n+- **聚焦意图**：不仅描述\\\"做了什么\\\"，还要解释\\\"为什么\\\"\\n+\\n+### 质量检查清单\\n+\\n+生成报告后检查：\\n+\\n+- [ ] 范围正确，起止提交无误\\n+- [ ] 每个技术领域有具体文件引用\\n+- [ ] 作者贡献分析完整\\n+- [ ] 识别了潜在风险和建议\\n+- [ ] 单提交摘要覆盖关键点\\n+- [ ] 报告结构清晰，易于导航\\n+- [ ] **commit 引用使用正确的短哈希，而不是 JSON 文件行号**\\n+\\n+## 高级用法\\n+\\n+### GitHub Commit 链接生成\\n+\\n+对于 GitHub 仓库，可以使用附加脚本生成 commit 链接：\\n+\\n+```bash\\n+.claude/skills/git-changes-reporter/scripts/generate-github-links.js <json_file> <repo_url>\\n+```\\n+\\n+该脚本会为 JSON 中的每个 commit 添加 `githubUrl` 字段，格式为：`https://github.com/<owner>/<repo>/commit/<hash>`\\n+\\n+### CI/CD 集成示例\\n+\\n+在 GitHub Actions 中每日生成报告：\\n+\\n+```yaml\\n+name: Daily Change Report\\n+on:\\n+  schedule:\\n+    - cron: '0 9 * * *' # 每天 9:00 UTC\\n+  workflow_dispatch:\\n+\\n+jobs:\\n+  generate-report:\\n+    runs-on: ubuntu-latest\\n+    steps:\\n+      - uses: actions/checkout@v4\\n+        with:\\n+          fetch-depth: 0 # 获取完整历史\\n+\\n+      - name: Generate JSON data\\n+        run: |\\n+          .claude/skills/git-changes-reporter/scripts/generate-json.js \\\\\\n+            \\\"$(git rev-list -n 1 --before='24 hours ago' HEAD)\\\" \\\\\\n+            HEAD \\\\\\n+            ./reports/daily-changes.json\\n+\\n+      - name: Upload artifact\\n+        uses: actions/upload-artifact@v4\\n+        with:\\n+          name: daily-change-report\\n+          path: ./reports/\\n+```\\n+\\n+> **完整自动化工作流**：项目中包含完整的 GitHub Actions 工作流文件 `.github/workflows/daily-git-report.yml`，使用 `claude-code-action` 配置 DeepSeek API 自动生成报告并创建 PR。\\n+\\n+### 与现有工具集成\\n+\\n+- **JIRA/GitHub Issues**：在报告中引用相关 issue ID\\n+- **Slack/Teams**：生成简要摘要发送到聊天频道\\n+- **文档系统**：将报告集成到内部 wiki 或文档站点\\n+\\n+## 故障排除\\n+\\n+### 常见问题\\n+\\n+1. **无提交找到**：检查提交引用是否存在，确认仓库有足够历史\\n+2. **JSON 解析错误**：确保脚本在 git 仓库根目录运行\\n+3. **权限问题**：确认有权限创建输出目录\\n+4. **内存不足**：对于大量提交，考虑增加 Node.js 内存限制\\n+\\n+### 性能优化\\n+\\n+- 对于大型提交范围（>100 commits），考虑：\\n+  - 使用 `--no-patch` 选项减少内存使用\\n+  - 分批处理提交\\n+  - 仅分析关键目录\\n+\\n+## 资源\\n+\\n+### 脚本文件\\n+\\n+- [generate-json.js](scripts/generate-json.js) - 生成结构化 JSON 数据\\n+- [generate-github-links.js](scripts/generate-github-links.js) - 为 commit 添加 GitHub 链接\\n+\\n+### 报告模板\\n+\\n+- [report-template.md](references/report-template.md) - 详细的报告结构、写作指南和示例\\n+\\n+### 脚本文档\\n+\\n+- [scripts/README.md](scripts/README.md) - 脚本使用说明和示例\\n+\\n+### 参考实现\\n+\\n+基于现有 `recent-changes-digest` 技能改进，提供更规范的接口和更清晰的文档。\\n\"\n+        },\n+        {\n+          \"additions\": 260,\n+          \"deletions\": 0,\n+          \"path\": \".claude/skills/git-changes-reporter/references/report-template.md\",\n+          \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.claude/skills/git-changes-reporter/references/report-template.md b/.claude/skills/git-changes-reporter/references/report-template.md\\nnew file mode 100644\\nindex 000000000..8caf8c68c\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/references/report-template.md\\n@@ -0,0 +1,260 @@\\n+# Git 变更报告模板\\n+\\n+此模板用于指导 Agent 生成语义化 Markdown 报告。报告应基于 `generate-json.js` 生成的 JSON 数据，并结合实际代码分析。\\n+\\n+## 报告结构\\n+\\n+````markdown\\n+# Git 变更报告（<range.label>）\\n+\\n+## 1. 概览\\n+\\n+- **时间范围**：<range.startDate> 至 <range.endDate>\\n+- **提交数量**：<range.commitCount> 个提交\\n+- **主要贡献者**：<前 3 位 contributors>\\n+- **热点目录**：<前 3 个 topDirs>\\n+- **生成时间**：<range.generatedAt>\\n+\\n+## 2. 改动聚焦领域\\n+\\n+### 2.1 <领域名称：如错误处理与观测>\\n+\\n+- **涉及目录**：<相关目录列表>\\n+- **关键提交**：\\n+  - `<commit.short>`：`<commit.subject>`\\n+  - `<commit.short>`：`<commit.subject>`\\n+- **核心改动**：\\n+  - `<file.path>`：<具体改动描述，从 patch 或代码分析得出>\\n+  - `<file.path>`：<具体改动描述>\\n+- **设计意图**：<从提交信息和代码变更推断的意图>\\n+\\n+### 2.2 <领域名称：如安全与鉴权>\\n+\\n+...\\n+\\n+## 3. 贡献者分析\\n+\\n+| 作者               | 提交数                | 主要贡献领域 | 关键提交         |\\n+| ------------------ | --------------------- | ------------ | ---------------- |\\n+| <contributor.name> | <contributor.commits> | <领域>       | `<commit.short>` |\\n+| <contributor.name> | <contributor.commits> | <领域>       | `<commit.short>` |\\n+\\n+## 4. 技术影响与风险\\n+\\n+### 兼容性影响\\n+\\n+- <描述兼容性变更，如 API 变更、配置格式变化>\\n+\\n+### 配置变更\\n+\\n+- <新增、修改或删除的配置项>\\n+\\n+### 性能影响\\n+\\n+- <可能影响性能的变更>\\n+\\n+### 测试覆盖\\n+\\n+- <新增或修改的测试文件>\\n+- <测试策略变化>\\n+\\n+## 5. 单提交摘要（附录）\\n+\\n+### <commit.short> <commit.author> | <commit.authoredAt> | <标签>\\n+\\n+**主题**：`<commit.subject>`\\n+\\n+**变更要点**：\\n+\\n+- **文件/目录**：`<file.path>` - <改动描述与目的>\\n+- **接口/协议**：<接口变更描述>\\n+- **行为/数据流**：<运行时行为变化>\\n+- **观测/指标**：<新增或变更的监控>\\n+\\n+**风险/影响**：\\n+\\n+- <兼容性影响>\\n+- <配置要求>\\n+- <依赖变更>\\n+\\n+**测试**：\\n+\\n+- <测试文件路径> 或 \\\"未见测试记录\\\"\\n+\\n+---\\n+\\n+## 语义聚类指南\\n+\\n+### 领域分类标准\\n+\\n+#### 错误处理与观测\\n+\\n+- 异常处理逻辑变更\\n+- 日志格式或级别调整\\n+- 监控指标新增/修改\\n+- 告警规则变更\\n+- 健康检查改进\\n+\\n+#### 安全与鉴权\\n+\\n+- 认证机制变更\\n+- 授权逻辑调整\\n+- 加密算法更新\\n+- 输入验证增强\\n+- 安全头设置\\n+\\n+#### 功能开发\\n+\\n+- 新特性实现\\n+- API 端点新增/修改\\n+- 业务逻辑变更\\n+- 用户界面改进\\n+- 数据模型扩展\\n+\\n+#### 重构与优化\\n+\\n+- 代码结构重组\\n+- 性能优化\\n+- 内存使用改进\\n+- 代码清理\\n+- 依赖解耦\\n+\\n+#### 运维与部署\\n+\\n+- 配置管理变更\\n+- 部署脚本更新\\n+- CI/CD 流水线调整\\n+- 文档更新\\n+- 环境变量管理\\n+\\n+#### 依赖更新\\n+\\n+- 包版本升级\\n+- 第三方库替换\\n+- 依赖关系调整\\n+- 构建工具变更\\n+\\n+### 分析深度建议\\n+\\n+#### Level 1：基础分析（快速概览）\\n+\\n+- 仅基于 JSON 数据\\n+- 统计信息汇总\\n+- 目录热度分析\\n+- 贡献者统计\\n+\\n+#### Level 2：中级分析（团队同步）\\n+\\n+- 查看关键提交的 patch\\n+- 识别主要技术领域\\n+- 评估风险等级\\n+- 提供改进建议\\n+\\n+#### Level 3：深度分析（代码审查）\\n+\\n+- 查看实际代码文件\\n+- 分析变更上下文\\n+- 评估架构影响\\n+- 提供详细建议\\n+\\n+## 写作风格指南\\n+\\n+### 文件引用格式\\n+\\n+- 完整路径：`apps/vendor-aster/src/quote.ts`\\n+- 带行号：`libraries/protocol/src/terminal.ts:138-143`\\n+- IDE 链接格式：`[terminal.ts:138-143](libraries/protocol/src/terminal.ts#L138-L143)`\\n+\\n+### 提交引用格式\\n+\\n+- 短哈希：`03a48cfc4`\\n+- 带主题：`03a48cfc4 (feat: enforce terminal_id...)`\\n+- 带链接：`[03a48cfc4](https://github.com/owner/repo/commit/03a48cfc4)`\\n+- 上下文引用：`在 03a48cfc4 中，CZ 改进了...`\\n+\\n+**⚠️ 重要警告**：\\n+\\n+- **绝对不要使用 JSON 文件的行号作为 commit ID**（例如：`1279`、`703` 等）\\n+- JSON 文件中的行号（如 `1279`）只是文件位置，不是 commit 标识符\\n+- 正确的 commit ID 在 JSON 的 `\\\"short\\\"` 字段中（如 `\\\"a9300e76f\\\"`）\\n+- 错误示例：`1279`（行号） ❌\\n+- 正确示例：`a9300e76f`（短哈希） ✅\\n+\\n+### 语气与表达\\n+\\n+- **客观专业**：基于事实，避免主观判断\\n+- **简明扼要**：使用短句和列表，避免冗长段落\\n+- **聚焦意图**：解释\\\"为什么\\\"而不仅是\\\"做了什么\\\"\\n+- **Actionable**：提供具体建议而非泛泛而谈\\n+\\n+### 风险描述\\n+\\n+- **高风险**：可能导致系统故障、数据丢失、安全漏洞\\n+- **中风险**：可能影响功能、性能或用户体验\\n+- **低风险**：轻微影响，易于修复\\n+\\n+## 质量检查清单\\n+\\n+生成报告后检查：\\n+\\n+- [ ] 提交范围正确无误\\n+- [ ] 每个技术领域有具体文件引用\\n+- [ ] 贡献者分析完整准确\\n+- [ ] 风险识别全面\\n+- [ ] 建议具体可行\\n+- [ ] 格式规范统一\\n+- [ ] 链接可点击（在 IDE 环境中）\\n+- [ ] 无拼写或语法错误\\n+- [ ] **commit 引用使用正确的短哈希，而不是 JSON 行号**\\n+\\n+## 示例报告片段\\n+\\n+### 概览示例\\n+\\n+```markdown\\n+## 1. 概览\\n+\\n+- **时间范围**：2025-11-26 至 2025-12-02\\n+- **提交数量**：32 个提交\\n+- **主要贡献者**：CZ (16), humblelittlec1[bot] (11), Ryan (2)\\n+- **热点目录**：apps (239 files), libraries (71 files), common (68 files)\\n+- **生成时间**：2025-12-02T06:23:53.974Z\\n+```\\n+````\\n+\\n+### 领域分析示例\\n+\\n+```markdown\\n+### 2.1 错误处理与观测\\n+\\n+- **涉及目录**：`libraries/protocol/`, `apps/vendor-aster/`\\n+- **关键提交**：\\n+  - `03a48cfc4`：`feat: enforce terminal_id to be derived from public_key`\\n+  - `1b4e97ac5`：`fix: improve error handling in quote service`\\n+- **核心改动**：\\n+  - `libraries/protocol/src/terminal.ts:138-143`：连接 URL 中强制用公钥派生 `terminal_id`，保证 ID 与密钥绑定\\n+  - `apps/vendor-aster/src/quote.ts:45-60`：增强报价服务错误处理，添加重试逻辑和详细日志\\n+- **设计意图**：提高系统安全性和可观测性，确保终端身份可验证，改进故障排查能力\\n+```\\n+\\n+### 单提交摘要示例\\n+\\n+```markdown\\n+### 03a48cfc4 CZ | 2025-11-22T01:07:13+08:00 | 安全\\n+\\n+**主题**：`feat: enforce terminal_id to be derived from public_key in Terminal...`\\n+\\n+**变更要点**：\\n+\\n+- **文件/目录**：`libraries/protocol/src/terminal.ts:138` - 连接 URL 中强制用公钥派生 `terminal_id`，保证 ID 与密钥绑定\\n+- **接口/协议**：`terminal.ts:140-143` - 对 `host_token` 进行签名并随连接参数发送，用于身份校验\\n+- **行为/数据流**：终端连接时自动计算并验证身份，无需手动配置 ID\\n+- **观测/指标**：新增连接身份验证成功/失败指标\\n+\\n+**风险/影响**：\\n+\\n+- 依赖自定义 `terminal_id` 的客户端需改为公钥派生，否则连接可能被拒\\n+- 需要更新相关文档和客户端示例\\n+\\n+**测试**：未见测试记录\\n+```\\n\"\n+        },\n+        {\n+          \"additions\": 454,\n+          \"deletions\": 0,\n+          \"path\": \".claude/skills/git-changes-reporter/scripts/README.md\",\n+          \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/README.md b/.claude/skills/git-changes-reporter/scripts/README.md\\nnew file mode 100644\\nindex 000000000..5e249a8bf\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/scripts/README.md\\n@@ -0,0 +1,454 @@\\n+# Git Changes Reporter Scripts\\n+\\n+本目录包含 `git-changes-reporter` 技能的脚本文件，提供完整的 Git 变更分析工作流。\\n+\\n+## 脚本说明\\n+\\n+### 核心脚本\\n+\\n+#### generate-json.js\\n+\\n+生成结构化 JSON 数据，包含指定提交范围内的完整变更信息。这是整个工作流的基础。\\n+\\n+**何时使用**：\\n+\\n+- 需要为 Agent 提供完整的 git 变更上下文\\n+- 需要原始数据用于进一步处理或分析\\n+- CI/CD 流水线中存储变更记录\\n+\\n+**用法**：\\n+\\n+```bash\\n+node .claude/skills/git-changes-reporter/scripts/generate-json.js <old_commit> <new_commit> [output_path]\\n+```\\n+\\n+**示例**：\\n+\\n+```bash\\n+# 分析最近 10 个提交\\n+node .claude/skills/git-changes-reporter/scripts/generate-json.js HEAD~10 HEAD\\n+\\n+# 从特定标签开始分析\\n+node .claude/skills/git-changes-reporter/scripts/generate-json.js v1.0.0 HEAD ./releases/v1.1.0-changes.json\\n+\\n+# 使用具体 commit hash\\n+node .claude/skills/git-changes-reporter/scripts/generate-json.js 6df6ea741 1b4e97ac5\\n+```\\n+\\n+**输出文件**：\\n+\\n+- 默认：`docs/reports/git-changes-YYYY-MM-DD.json`\\n+- 包含：提交范围、贡献者、文件热度、每个提交的详细信息和 patch\\n+\\n+#### generate-github-links.js\\n+\\n+为 JSON 数据中的每个 commit 添加 GitHub 链接。\\n+\\n+**何时使用**：\\n+\\n+- 在 GitHub 仓库中生成报告时\\n+- 需要为每个提交提供可点击的链接\\n+- 生成包含完整上下文的报告\\n+\\n+**用法**：\\n+\\n+```bash\\n+node .claude/skills/git-changes-reporter/scripts/generate-github-links.js <json_file> <repo_url> [output_file]\\n+```\\n+\\n+**示例**：\\n+\\n+```bash\\n+# 为 changes.json 添加 GitHub 链接\\n+node .claude/skills/git-changes-reporter/scripts/generate-github-links.js ./reports/changes.json https://github.com/owner/repo\\n+\\n+# 指定输出文件\\n+node .claude/skills/git-changes-reporter/scripts/generate-github-links.js changes.json https://github.com/owner/repo ./changes-with-links.json\\n+```\\n+\\n+**功能**：\\n+\\n+- 为每个 commit 添加 `githubUrl` 字段\\n+- 在 metadata 中添加仓库信息\\n+- 生成可点击的 commit 链接\\n+\\n+### 自动化脚本\\n+\\n+#### get-daily-commit-range.sh\\n+\\n+提取东八区昨日 8 点到今日 8 点的 commit 范围。\\n+\\n+**何时使用**：\\n+\\n+- 每日报告工作流中计算时间范围\\n+- 需要根据时区偏移计算 commit 范围\\n+- GitHub Actions 自动化\\n+\\n+**用法**：\\n+\\n+```bash\\n+./get-daily-commit-range.sh [timezone_offset]\\n+```\\n+\\n+**示例**：\\n+\\n+```bash\\n+# 默认东八区（+8）\\n+./get-daily-commit-range.sh\\n+\\n+# 指定时区偏移\\n+./get-daily-commit-range.sh +9  # 东九区\\n+./get-daily-commit-range.sh -5  # 西五区\\n+```\\n+\\n+**输出**：\\n+\\n+- 起始 commit hash\\n+- 结束 commit hash（通常是 HEAD）\\n+- 提交数量\\n+- 短哈希版本\\n+\\n+## 工作流决策树\\n+\\n+```mermaid\\n+graph TD\\n+    A[用户请求变更报告] --> B{需要什么类型的输出?}\\n+    B -->|仅需原始数据| C[运行 generate-json.js]\\n+    B -->|需要语义化报告| D{在什么环境中运行?}\\n+    D -->|Claude Code 环境| E[直接使用 git-changes-reporter skill]\\n+    D -->|GitHub Actions/CI| F[使用 claude-code-action 配置 DeepSeek]\\n+    C --> H[输出 JSON 文件]\\n+    E --> I[输出语义化 Markdown 报告]\\n+    F --> I\\n+```\\n+\\n+## 完整工作流示例\\n+\\n+### 场景 4：添加 GitHub 链接\\n+\\n+```bash\\n+# 1. 生成 JSON 数据\\n+node .claude/skills/git-changes-reporter/scripts/generate-json.js v1.0.0 v1.1.0 ./releases/v1.1.0-changes.json\\n+\\n+# 2. 添加 GitHub 链接\\n+node .claude/skills/git-changes-reporter/scripts/generate-github-links.js \\\\\\n+  ./releases/v1.1.0-changes.json \\\\\\n+  https://github.com/owner/repo \\\\\\n+  ./releases/v1.1.0-changes-with-links.json\\n+\\n+# 3. 查看带链接的数据\\n+jq '.commits[0] | {short: .short, subject: .subject, url: .githubUrl}' \\\\\\n+  ./releases/v1.1.0-changes-with-links.json\\n+```\\n+\\n+## 在 CI/CD 中使用\\n+\\n+### GitHub Actions 每日报告工作流\\n+\\n+完整的工作流文件位于 `.github/workflows/daily-git-report.yml`，包含以下步骤：\\n+\\n+1. **获取每日提交范围**：使用 `get-daily-commit-range.sh` 计算时间范围\\n+2. **生成 JSON 数据**：调用 `generate-json.js` 生成结构化数据\\n+3. **通过 Claude Code Action 生成报告**：使用 `anthropics/claude-code-action@v1` 调用 git-changes-reporter skill\\n+4. **检查报告生成**：验证报告文件是否成功生成\\n+5. **创建 Pull Request**：自动创建包含报告文件的 PR\\n+6. **上传制品**：将报告文件上传为工作流制品\\n+\\n+### 环境变量配置\\n+\\n+工作流使用以下环境变量配置 DeepSeek API：\\n+\\n+```yaml\\n+env:\\n+  ANTHROPIC_AUTH_TOKEN: ${{ secrets.ANTHROPIC_AUTH_TOKEN }}\\n+  ANTHROPIC_BASE_URL: 'https://api.deepseek.com/anthropic'\\n+  ANTHROPIC_MODEL: 'deepseek-reasoner'\\n+  ANTHROPIC_SMALL_FAST_MODEL: 'deepseek-chat'\\n+  API_TIMEOUT_MS: '600000'\\n+  CLAUDE_CODE_MAX_OUTPUT_TOKENS: '32000'\\n+  CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC: '1'\\n+```\\n+\\n+### 手动触发工作流\\n+\\n+```bash\\n+# 在 GitHub Actions 页面手动触发\\n+# 或使用 GitHub CLI\\n+gh workflow run daily-git-report.yml\\n+```\\n+\\n+## 脚本关系图\\n+\\n+```mermaid\\n+graph LR\\n+    A[get-daily-commit-range.sh] --> B[generate-json.js]\\n+    B --> C[generate-github-links.js]\\n+    B --> D[GitHub Actions 工作流]\\n+\\n+    subgraph \\\"GitHub Actions 工作流\\\"\\n+        E[claude-code-action] --> F[生成报告]\\n+    end\\n+\\n+    D --> E\\n+```\\n+\\n+## 故障排除\\n+\\n+### 常见问题\\n+\\n+1. **脚本无法执行**：\\n+\\n+   ```bash\\n+   # 添加执行权限（shell脚本需要，JavaScript文件通过 node 运行）\\n+   chmod +x get-daily-commit-range.sh\\n+   ```\\n+\\n+2. **Node.js 模块错误**：\\n+\\n+   ```bash\\n+   # 确保使用正确的 Node.js 版本（>= 18.15.0）\\n+   node --version\\n+\\n+   # 安装必要的 Node.js 模块（如果需要）\\n+   # 当前脚本使用内置模块，通常无需额外安装\\n+   ```\\n+\\n+3. **内存不足**：\\n+\\n+   ```bash\\n+   # 对于大型仓库，增加内存限制\\n+   NODE_OPTIONS=\\\"--max-old-space-size=4096\\\" node generate-json.js HEAD~50 HEAD\\n+   ```\\n+\\n+4. **Git 错误**：\\n+\\n+   ```bash\\n+   # 确保在 git 仓库中运行\\n+   git rev-parse --is-inside-work-tree\\n+\\n+   # 确保有足够的 git 历史\\n+   git log --oneline -5\\n+   ```\\n+\\n+5. **DeepSeek API 错误**：\\n+\\n+   ```bash\\n+   # 检查 GitHub Secrets 配置\\n+   echo \\\"检查 ANTHROPIC_AUTH_TOKEN 是否在 GitHub Secrets 中正确设置\\\"\\n+\\n+   # 检查 API 端点可达性\\n+   curl -I https://api.deepseek.com/anthropic\\n+   ```\\n+\\n+6. **报告生成失败**：\\n+\\n+   ```bash\\n+   # 检查 JSON 文件是否有效\\n+   jq . docs/reports/git-changes-2025-12-02.json\\n+\\n+   # 检查网络连接\\n+   curl -I https://api.deepseek.com\\n+   ```\\n+\\n+### 性能提示\\n+\\n+- **大型提交范围**（>100 commits）：\\n+\\n+  ```bash\\n+  # 分批处理\\n+  node .claude/skills/git-changes-reporter/scripts/generate-json.js HEAD~100 HEAD~50 ./reports/part1.json\\n+  node .claude/skills/git-changes-reporter/scripts/generate-json.js HEAD~50 HEAD ./reports/part2.json\\n+  ```\\n+\\n+- **减少内存使用**：\\n+\\n+  ```bash\\n+  # 修改脚本使用 --no-patch 选项\\n+  NODE_OPTIONS=\\\"--max-old-space-size=2048\\\" node .claude/skills/git-changes-reporter/scripts/generate-json.js ...\\n+  ```\\n+\\n+- **定期清理**：\\n+  ```bash\\n+  # 保留最近7天的报告\\n+  find docs/reports -name \\\"git-changes-*.json\\\" -mtime +7 -delete\\n+  find docs/reports -name \\\"git-changes-report-*.md\\\" -mtime +7 -delete\\n+  ```\\n+\\n+## 重要警告和最佳实践\\n+\\n+### ⚠️ 提交引用规则（最重要）\\n+\\n+- **必须使用短哈希**：如 `03a48cfc4`\\n+- **绝对不要使用 JSON 文件行号**：JSON 文件中的行号（如 `1279`、`703`）只是文件位置，不是 commit 标识符\\n+- 正确示例：`a9300e76f`（短哈希） ✅\\n+- 错误示例：`1279`（行号） ❌\\n+\\n+### 报告质量检查清单\\n+\\n+生成报告后检查：\\n+\\n+- [ ] 范围正确，起止提交无误\\n+- [ ] 每个技术领域有具体文件引用\\n+- [ ] 作者贡献分析完整\\n+- [ ] 识别了潜在风险和建议\\n+- [ ] 单提交摘要覆盖关键点\\n+- [ ] 报告结构清晰，易于导航\\n+- [ ] **commit 引用使用正确的短哈希，而不是 JSON 文件行号**\\n+\\n+### 安全注意事项\\n+\\n+- **API 密钥管理**：不要在代码中硬编码 DeepSeek API 密钥\\n+- **GitHub Secrets**：在 CI/CD 中使用 GitHub Secrets 存储敏感信息\\n+- **输出文件权限**：确保报告文件有适当的访问权限\\n+- **数据清理**：定期清理包含敏感信息的临时文件\\n+\\n+## 输出数据结构\\n+\\n+### generate-json.js 输出\\n+\\n+```json\\n+{\\n+  \\\"range\\\": {\\n+    \\\"old\\\": \\\"起始提交引用\\\",\\n+    \\\"new\\\": \\\"结束提交引用\\\",\\n+    \\\"label\\\": \\\"显示标签（短哈希范围）\\\",\\n+    \\\"startDate\\\": \\\"起始日期（YYYY-MM-DD）\\\",\\n+    \\\"endDate\\\": \\\"结束日期（YYYY-MM-DD）\\\",\\n+    \\\"commitCount\\\": 42,\\n+    \\\"generatedAt\\\": \\\"2025-12-02T15:30:00Z\\\"\\n+  },\\n+  \\\"contributors\\\": [{ \\\"name\\\": \\\"作者名\\\", \\\"email\\\": \\\"邮箱\\\", \\\"commits\\\": 10 }],\\n+  \\\"topDirs\\\": [{ \\\"dir\\\": \\\"目录名\\\", \\\"fileCount\\\": 15 }],\\n+  \\\"commits\\\": [\\n+    {\\n+      \\\"hash\\\": \\\"完整提交哈希\\\",\\n+      \\\"short\\\": \\\"短哈希（8-10字符）\\\",\\n+      \\\"author\\\": \\\"作者\\\",\\n+      \\\"email\\\": \\\"邮箱\\\",\\n+      \\\"authoredAt\\\": \\\"提交时间（ISO 8601）\\\",\\n+      \\\"subject\\\": \\\"提交信息主题\\\",\\n+      \\\"files\\\": [\\n+        {\\n+          \\\"path\\\": \\\"文件路径\\\",\\n+          \\\"additions\\\": 5,\\n+          \\\"deletions\\\": 3,\\n+          \\\"patch\\\": \\\"差异内容（可选）\\\"\\n+        }\\n+      ]\\n+    }\\n+  ],\\n+  \\\"metadata\\\": {\\n+    \\\"tool\\\": \\\"git-changes-reporter\\\",\\n+    \\\"version\\\": \\\"1.0.0\\\",\\n+    \\\"repository\\\": \\\"/path/to/repo\\\"\\n+  }\\n+}\\n+```\\n+\\n+### generate-github-links.js 增强后\\n+\\n+```json\\n+{\\n+  ...,\\n+  \\\"commits\\\": [\\n+    {\\n+      \\\"hash\\\": \\\"abc123def456...\\\",\\n+      \\\"short\\\": \\\"abc123def\\\",\\n+      \\\"githubUrl\\\": \\\"https://github.com/owner/repo/commit/abc123def456...\\\",\\n+      ...\\n+    }\\n+  ],\\n+  \\\"metadata\\\": {\\n+    ...,\\n+    \\\"github\\\": {\\n+      \\\"repository\\\": \\\"owner/repo\\\",\\n+      \\\"baseUrl\\\": \\\"https://github.com/owner/repo\\\",\\n+      \\\"commitUrlTemplate\\\": \\\"https://github.com/owner/repo/commit/{hash}\\\"\\n+    }\\n+  }\\n+}\\n+```\\n+\\n+### 语义化报告结构（Markdown）\\n+\\n+```markdown\\n+# Git 变更报告（提交范围）\\n+\\n+## 1. 概览\\n+\\n+- 时间范围：起始日期 至 结束日期\\n+- 提交数量：42\\n+- 主要贡献者：作者 1, 作者 2, 作者 3\\n+- 热点目录：目录 1, 目录 2, 目录 3\\n+\\n+## 2. 改动聚焦领域\\n+\\n+### 2.1 错误处理与观测\\n+\\n+- **涉及目录**：目录列表\\n+- **关键提交**：短哈希列表及主题\\n+- **核心改动**：\\n+  - 文件路径：改动描述\\n+  - 文件路径：改动描述\\n+- **设计意图**：从代码和提交信息推断\\n+\\n+### 2.2 安全与鉴权\\n+\\n+...\\n+\\n+## 3. 贡献者分析\\n+\\n+| 作者 | 提交数 | 主要领域 |\\n+| ---- | ------ | -------- |\\n+| 作者 | 数量   | 领域     |\\n+\\n+## 4. 技术影响与风险\\n+\\n+- **兼容性影响**：描述\\n+- **配置变更**：描述\\n+- **性能影响**：描述\\n+- **测试覆盖**：描述\\n+\\n+## 5. 单提交摘要（附录）\\n+\\n+### 短哈希 作者 | 日期 | 标签\\n+\\n+**主题**：原提交主题\\n+\\n+**变更要点**：\\n+\\n+- 文件/目录：具体改动与目的\\n+- 接口/协议：变更描述\\n+- 行为/数据流：运行时影响\\n+\\n+**风险/影响**：\\n+\\n+- 兼容性/配置/依赖影响\\n+\\n+**测试**：测试文件或\\\"未见测试记录\\\"\\n+```\\n+\\n+## 相关资源\\n+\\n+### 文档文件\\n+\\n+- [SKILL.md](../SKILL.md)：git-changes-reporter 技能完整文档\\n+- [report-template.md](../references/report-template.md)：详细的报告模板和写作指南\\n+- [scripts/README.md](./README.md)：本文件\\n+\\n+### 配置文件\\n+\\n+- `.github/workflows/daily-git-report.yml`：GitHub Actions 工作流\\n+- `tools/git-changes-reporter/`：TypeScript 版本的工具项目\\n+\\n+### 参考实现\\n+\\n+- 基于现有 `recent-changes-digest` 技能改进\\n+- 提供更规范的接口和更清晰的文档\\n+- 支持 TypeScript 和 rush 集成\\n+\\n+---\\n+\\n+> 最后更新：2025-12-03\\n+> 维护者：Claude Code\\n+> 版本：1.0.0\\n\"\n+        },\n+        {\n+          \"additions\": 139,\n+          \"deletions\": 0,\n+          \"path\": \".claude/skills/git-changes-reporter/scripts/generate-github-links.js\",\n+          \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/generate-github-links.js b/.claude/skills/git-changes-reporter/scripts/generate-github-links.js\\nnew file mode 100755\\nindex 000000000..6c5304439\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/scripts/generate-github-links.js\\n@@ -0,0 +1,139 @@\\n+#!/usr/bin/env node\\n+/* eslint-disable no-console */\\n+import { readFile, writeFile } from 'node:fs/promises';\\n+import { URL } from 'node:url';\\n+\\n+const usage = () => {\\n+  console.error(\\n+    [\\n+      'Usage: generate-github-links.js <json_file> <repo_url> [output_file]',\\n+      '',\\n+      'Add GitHub commit links to JSON data generated by generate-json.js',\\n+      '',\\n+      'Arguments:',\\n+      '  <json_file>    Path to JSON file generated by generate-json.js',\\n+      '  <repo_url>     GitHub repository URL (e.g., https://github.com/owner/repo)',\\n+      '  [output_file]  Optional output file (default: <json_file>.with-links.json)',\\n+      '',\\n+      'Examples:',\\n+      '  generate-github-links.js ./reports/changes.json https://github.com/owner/repo',\\n+      '  generate-github-links.js changes.json https://github.com/owner/repo ./changes-with-links.json',\\n+    ].join('\\\\n'),\\n+  );\\n+};\\n+\\n+const validateGitHubUrl = (url) => {\\n+  try {\\n+    const parsed = new URL(url);\\n+    return parsed.hostname === 'github.com' && parsed.pathname.split('/').filter(Boolean).length >= 2;\\n+  } catch {\\n+    return false;\\n+  }\\n+};\\n+\\n+const extractRepoPath = (url) => {\\n+  try {\\n+    const parsed = new URL(url);\\n+    const pathParts = parsed.pathname.split('/').filter(Boolean);\\n+    if (pathParts.length < 2) {\\n+      throw new Error('Invalid GitHub repository URL');\\n+    }\\n+    return `${pathParts[0]}/${pathParts[1]}`;\\n+  } catch (error) {\\n+    throw new Error(`Failed to parse repository URL: ${error.message}`);\\n+  }\\n+};\\n+\\n+const addGitHubLinks = (data, repoPath) => {\\n+  const baseUrl = `https://github.com/${repoPath}/commit`;\\n+\\n+  // Add githubUrl to each commit\\n+  const commitsWithLinks = data.commits.map((commit) => ({\\n+    ...commit,\\n+    githubUrl: `${baseUrl}/${commit.hash}`,\\n+  }));\\n+\\n+  // Add repository info to metadata\\n+  const metadata = {\\n+    ...data.metadata,\\n+    github: {\\n+      repository: repoPath,\\n+      baseUrl: `https://github.com/${repoPath}`,\\n+      commitUrlTemplate: `${baseUrl}/{hash}`,\\n+    },\\n+  };\\n+\\n+  return {\\n+    ...data,\\n+    commits: commitsWithLinks,\\n+    metadata,\\n+  };\\n+};\\n+\\n+const main = async () => {\\n+  const [jsonFile, repoUrl, outputFile] = process.argv.slice(2);\\n+\\n+  // Validate arguments\\n+  if (!jsonFile || !repoUrl) {\\n+    usage();\\n+    process.exit(1);\\n+  }\\n+\\n+  // Validate GitHub URL\\n+  if (!validateGitHubUrl(repoUrl)) {\\n+    console.error('Error: Invalid GitHub repository URL');\\n+    console.error('Expected format: https://github.com/owner/repo');\\n+    process.exit(1);\\n+  }\\n+\\n+  // Extract repository path\\n+  let repoPath;\\n+  try {\\n+    repoPath = extractRepoPath(repoUrl);\\n+    console.info(`Repository: ${repoPath}`);\\n+  } catch (error) {\\n+    console.error(`Error: ${error.message}`);\\n+    process.exit(1);\\n+  }\\n+\\n+  // Determine output file\\n+  const output = outputFile || jsonFile.replace(/\\\\.json$/, '.with-links.json');\\n+\\n+  try {\\n+    // Read JSON file\\n+    console.info(`Reading JSON file: ${jsonFile}`);\\n+    const fileContent = await readFile(jsonFile, 'utf-8');\\n+    const data = JSON.parse(fileContent);\\n+\\n+    // Validate JSON structure\\n+    if (!data.commits || !Array.isArray(data.commits)) {\\n+      throw new Error('Invalid JSON structure: missing or invalid \\\"commits\\\" array');\\n+    }\\n+\\n+    // Add GitHub links\\n+    console.info('Adding GitHub commit links...');\\n+    const dataWithLinks = addGitHubLinks(data, repoPath);\\n+\\n+    // Write output\\n+    await writeFile(output, JSON.stringify(dataWithLinks, null, 2));\\n+    console.info(`✅ GitHub links added to ${output}`);\\n+    console.info(`📊 Added ${dataWithLinks.commits.length} commit links`);\\n+\\n+    // Show example links\\n+    if (dataWithLinks.commits.length > 0) {\\n+      const firstCommit = dataWithLinks.commits[0];\\n+      const lastCommit = dataWithLinks.commits[dataWithLinks.commits.length - 1];\\n+      console.info('\\\\nExample commit links:');\\n+      console.info(`  First: ${firstCommit.short} -> ${firstCommit.githubUrl}`);\\n+      console.info(`  Last:  ${lastCommit.short} -> ${lastCommit.githubUrl}`);\\n+    }\\n+  } catch (error) {\\n+    console.error('❌ Error:', error?.stack || error?.message || error);\\n+    process.exit(1);\\n+  }\\n+};\\n+\\n+main().catch((err) => {\\n+  console.error('❌ Unexpected error:', err?.stack || err?.message || err);\\n+  process.exit(1);\\n+});\\n\"\n+        },\n+        {\n+          \"additions\": 247,\n+          \"deletions\": 0,\n+          \"path\": \".claude/skills/git-changes-reporter/scripts/generate-json.js\",\n+          \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/generate-json.js b/.claude/skills/git-changes-reporter/scripts/generate-json.js\\nnew file mode 100755\\nindex 000000000..ebe60677f\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/scripts/generate-json.js\\n@@ -0,0 +1,247 @@\\n+#!/usr/bin/env node\\n+/* eslint-disable no-console */\\n+import { mkdir, writeFile } from 'node:fs/promises';\\n+import { dirname, resolve } from 'node:path';\\n+import { execFile } from 'node:child_process';\\n+import { promisify } from 'node:util';\\n+\\n+const exec = promisify(execFile);\\n+\\n+const usage = () => {\\n+  console.error(\\n+    [\\n+      'Usage: generate-json.js <old_commit> <new_commit> [output_path]',\\n+      '',\\n+      'Generate structured JSON for commits in range <old_commit>..<new_commit>',\\n+      'including per-file stats and patch text.',\\n+      '',\\n+      'Arguments:',\\n+      '  <old_commit>    Start commit reference (hash, tag, branch)',\\n+      '  <new_commit>    End commit reference',\\n+      '  [output_path]   Optional output path (default: docs/reports/git-changes-YYYY-MM-DD.json)',\\n+      '',\\n+      'Examples:',\\n+      '  generate-json.js HEAD~10 HEAD',\\n+      '  generate-json.js v1.0.0 HEAD ./reports/changes.json',\\n+      '  generate-json.js 6df6ea741 1b4e97ac5',\\n+    ].join('\\\\n'),\\n+  );\\n+};\\n+\\n+const validateGitRepo = async () => {\\n+  try {\\n+    const { stdout } = await exec('git', ['rev-parse', '--is-inside-work-tree']);\\n+    return stdout.trim() === 'true';\\n+  } catch {\\n+    return false;\\n+  }\\n+};\\n+\\n+const getRepoRoot = async () => {\\n+  const { stdout } = await exec('git', ['rev-parse', '--show-toplevel']);\\n+  return stdout.trim();\\n+};\\n+\\n+const getCommitInfo = async (ref) => {\\n+  try {\\n+    const hash = (await exec('git', ['rev-parse', ref])).stdout.trim();\\n+    const short = (await exec('git', ['rev-parse', '--short', ref])).stdout.trim();\\n+    return { hash, short };\\n+  } catch (error) {\\n+    throw new Error(`Invalid commit reference: ${ref}\\\\n${error.message}`);\\n+  }\\n+};\\n+\\n+const getDateRange = async (oldRef, newRef) => {\\n+  const startDate =\\n+    (await exec('git', ['log', '--reverse', '--date=short', '--format=%ad', `${oldRef}..${newRef}`])).stdout\\n+      .split('\\\\n')\\n+      .filter(Boolean)[0] || null;\\n+  const endDate =\\n+    (\\n+      await exec('git', ['log', '-1', '--date=short', '--format=%ad', `${oldRef}..${newRef}`])\\n+    ).stdout.trim() || null;\\n+  return { startDate, endDate };\\n+};\\n+\\n+const getCommitCount = async (oldRef, newRef) => {\\n+  const count = Number(\\n+    (await exec('git', ['rev-list', '--count', `${oldRef}..${newRef}`])).stdout.trim() || '0',\\n+  );\\n+  return count;\\n+};\\n+\\n+const getContributors = async (oldRef, newRef) => {\\n+  const authorLines = (await exec('git', ['log', `${oldRef}..${newRef}`, '--format=%an|%ae'])).stdout\\n+    .split('\\\\n')\\n+    .filter(Boolean);\\n+  const contributorMap = new Map();\\n+  for (const line of authorLines) {\\n+    const [name, email] = line.split('|');\\n+    const key = `${name}|${email}`;\\n+    contributorMap.set(key, (contributorMap.get(key) || 0) + 1);\\n+  }\\n+  return Array.from(contributorMap.entries()).map(([key, commits]) => {\\n+    const [name, email] = key.split('|');\\n+    return { name, email, commits };\\n+  });\\n+};\\n+\\n+const getTopDirectories = async (oldRef, newRef) => {\\n+  const files = (await exec('git', ['diff', '--name-only', `${oldRef}..${newRef}`])).stdout\\n+    .split('\\\\n')\\n+    .filter(Boolean);\\n+\\n+  const dirCounts = files.reduce((acc, filePath) => {\\n+    const dir = filePath.split('/')[0] || '.';\\n+    acc.set(dir, (acc.get(dir) || 0) + 1);\\n+    return acc;\\n+  }, new Map());\\n+\\n+  return Array.from(dirCounts.entries())\\n+    .map(([dir, fileCount]) => ({ dir, fileCount }))\\n+    .sort((a, b) => b.fileCount - a.fileCount);\\n+};\\n+\\n+const getCommitDetails = async (oldRef, newRef) => {\\n+  const rawCommits = (\\n+    await exec('git', [\\n+      'log',\\n+      '--reverse',\\n+      '--date=iso8601',\\n+      '--format=%H|%h|%an|%ae|%ad|%s',\\n+      `${oldRef}..${newRef}`,\\n+    ])\\n+  ).stdout\\n+    .split('\\\\n')\\n+    .filter(Boolean);\\n+\\n+  const commits = [];\\n+\\n+  for (const line of rawCommits) {\\n+    const [hash, short, author, email, authoredAt, subject] = line.split('|');\\n+\\n+    // Get file statistics for this commit\\n+    const numstat = (await exec('git', ['show', '--numstat', '--format=', hash])).stdout\\n+      .split('\\\\n')\\n+      .filter(Boolean)\\n+      .map((row) => {\\n+        const [add, del, ...rest] = row.split('\\\\t');\\n+        return {\\n+          additions: add === '-' ? null : Number(add),\\n+          deletions: del === '-' ? null : Number(del),\\n+          path: rest.join('\\\\t'),\\n+        };\\n+      });\\n+\\n+    const files = [];\\n+    for (const stat of numstat) {\\n+      if (!stat.path) continue;\\n+\\n+      try {\\n+        const patch = (\\n+          await exec('git', ['show', '--unified=0', '--no-color', `${hash}^!`, '--', stat.path], {\\n+            maxBuffer: 10 * 1024 * 1024, // 10MB buffer for large patches\\n+          })\\n+        ).stdout;\\n+        files.push({ ...stat, patch });\\n+      } catch (error) {\\n+        // If patch extraction fails, include file without patch\\n+        console.warn(`Warning: Could not extract patch for ${stat.path} in commit ${short}`);\\n+        files.push({ ...stat, patch: null });\\n+      }\\n+    }\\n+\\n+    commits.push({ hash, short, author, email, authoredAt, subject, files });\\n+  }\\n+\\n+  return commits;\\n+};\\n+\\n+const main = async () => {\\n+  const [oldRef, newRef, outputArg] = process.argv.slice(2);\\n+\\n+  // Validate arguments\\n+  if (!oldRef || !newRef) {\\n+    usage();\\n+    process.exit(1);\\n+  }\\n+\\n+  // Validate git repository\\n+  if (!(await validateGitRepo())) {\\n+    console.error('Error: Not inside a git repository');\\n+    process.exit(1);\\n+  }\\n+\\n+  // Change to repository root\\n+  const repoRoot = await getRepoRoot();\\n+  process.chdir(repoRoot);\\n+  console.info(`Working in repository: ${repoRoot}`);\\n+\\n+  // Get commit information\\n+  console.info('Validating commit references...');\\n+  const oldInfo = await getCommitInfo(oldRef);\\n+  const newInfo = await getCommitInfo(newRef);\\n+\\n+  // Determine output path\\n+  const today = new Date().toISOString().slice(0, 10);\\n+  const output = outputArg || `docs/reports/git-changes-${today}.json`;\\n+\\n+  // Create output directory if needed\\n+  await mkdir(dirname(output), { recursive: true });\\n+\\n+  // Get date range and commit count\\n+  console.info('Analyzing commit range...');\\n+  const { startDate, endDate } = await getDateRange(oldRef, newRef);\\n+  const commitCount = await getCommitCount(oldRef, newRef);\\n+\\n+  if (!startDate || !endDate || commitCount === 0) {\\n+    console.error(`Error: No commits found in range ${oldInfo.short}..${newInfo.short}`);\\n+    process.exit(1);\\n+  }\\n+\\n+  console.info(`Found ${commitCount} commits from ${startDate} to ${endDate}`);\\n+\\n+  // Collect data\\n+  console.info('Collecting contributor information...');\\n+  const contributors = await getContributors(oldRef, newRef);\\n+\\n+  console.info('Analyzing file changes...');\\n+  const topDirs = await getTopDirectories(oldRef, newRef);\\n+\\n+  console.info('Extracting commit details...');\\n+  const commits = await getCommitDetails(oldRef, newRef);\\n+\\n+  // Prepare output data\\n+  const outputData = {\\n+    range: {\\n+      old: oldRef,\\n+      new: newRef,\\n+      label: `${oldInfo.short}..${newInfo.short}`,\\n+      startDate,\\n+      endDate,\\n+      commitCount,\\n+      generatedAt: new Date().toISOString(),\\n+    },\\n+    contributors,\\n+    topDirs,\\n+    commits,\\n+    metadata: {\\n+      tool: 'git-changes-reporter',\\n+      version: '1.0.0',\\n+      repository: repoRoot,\\n+    },\\n+  };\\n+\\n+  // Write output\\n+  await writeFile(output, JSON.stringify(outputData, null, 2));\\n+  console.info(`✅ JSON data written to ${output}`);\\n+  console.info(\\n+    `📊 Summary: ${commitCount} commits, ${contributors.length} contributors, ${topDirs.length} directories changed`,\\n+  );\\n+};\\n+\\n+main().catch((err) => {\\n+  console.error('❌ Error:', err?.stack || err?.message || err);\\n+  process.exit(1);\\n+});\\n\"\n+        },\n+        {\n+          \"additions\": 105,\n+          \"deletions\": 0,\n+          \"path\": \".claude/skills/git-changes-reporter/scripts/get-daily-commit-range.sh\",\n+          \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/get-daily-commit-range.sh b/.claude/skills/git-changes-reporter/scripts/get-daily-commit-range.sh\\nnew file mode 100755\\nindex 000000000..9535045bd\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/scripts/get-daily-commit-range.sh\\n@@ -0,0 +1,105 @@\\n+#!/bin/bash\\n+# 获取东八区昨日8点到今日8点的 commit 范围\\n+# 用法: ./get-daily-commit-range.sh [时区偏移小时数]\\n+# 默认时区: +8 (东八区)\\n+\\n+set -e\\n+\\n+# 默认东八区 (+8)\\n+TZ_OFFSET=\\\"${1:-+8}\\\"\\n+\\n+# 验证时区格式\\n+if [[ ! \\\"$TZ_OFFSET\\\" =~ ^[+-][0-9]+$ ]]; then\\n+    echo \\\"错误: 时区格式不正确，应为 +/-数字，例如 +8 或 -5\\\"\\n+    exit 1\\n+fi\\n+\\n+echo \\\"使用时区偏移: $TZ_OFFSET 小时\\\"\\n+\\n+# 获取当前时间（UTC）\\n+NOW_UTC=$(date -u +\\\"%Y-%m-%d %H:%M:%S\\\")\\n+echo \\\"当前 UTC 时间: $NOW_UTC\\\"\\n+\\n+# 计算东八区时间\\n+# 注意: GitHub Actions 默认是 UTC 时间，我们需要转换为东八区\\n+if [[ \\\"$TZ_OFFSET\\\" == \\\"+8\\\" ]]; then\\n+    # 东八区早上8点对应 UTC 时间 0点\\n+    TODAY_8AM_UTC=\\\"$(date -u -d 'today 00:00:00' +'%Y-%m-%d %H:%M:%S')\\\"\\n+    YESTERDAY_8AM_UTC=\\\"$(date -u -d 'yesterday 00:00:00' +'%Y-%m-%d %H:%M:%S')\\\"\\n+else\\n+    # 对于其他时区，需要更复杂的计算\\n+    echo \\\"警告: 非东八区时区可能需要调整计算逻辑\\\"\\n+    # 这里简化处理，假设时区偏移为整数小时\\n+    OFFSET_HOURS=${TZ_OFFSET#+}  # 移除 + 号\\n+    OFFSET_HOURS=${OFFSET_HOURS#-}  # 移除 - 号\\n+\\n+    # 计算今天早上8点对应的 UTC 时间\\n+    if [[ \\\"$TZ_OFFSET\\\" == +* ]]; then\\n+        # 东区时间比 UTC 晚，早上8点对应 UTC 时间 (8 - 偏移) 点\\n+        UTC_HOUR=$((8 - OFFSET_HOURS))\\n+        if [ $UTC_HOUR -lt 0 ]; then\\n+            UTC_HOUR=$((UTC_HOUR + 24))\\n+            DAY_ADJUST=\\\"-1 day\\\"\\n+        else\\n+            DAY_ADJUST=\\\"\\\"\\n+        fi\\n+    else\\n+        # 西区时间比 UTC 早，早上8点对应 UTC 时间 (8 + 偏移) 点\\n+        UTC_HOUR=$((8 + OFFSET_HOURS))\\n+        if [ $UTC_HOUR -ge 24 ]; then\\n+            UTC_HOUR=$((UTC_HOUR - 24))\\n+            DAY_ADJUST=\\\"+1 day\\\"\\n+        else\\n+            DAY_ADJUST=\\\"\\\"\\n+        fi\\n+    fi\\n+\\n+    TODAY_8AM_UTC=\\\"$(date -u -d \\\"today $UTC_HOUR:00:00 $DAY_ADJUST\\\" +'%Y-%m-%d %H:%M:%S')\\\"\\n+    YESTERDAY_8AM_UTC=\\\"$(date -u -d \\\"yesterday $UTC_HOUR:00:00 $DAY_ADJUST\\\" +'%Y-%m-%d %H:%M:%S')\\\"\\n+fi\\n+\\n+echo \\\"今日8点 (UTC): $TODAY_8AM_UTC\\\"\\n+echo \\\"昨日8点 (UTC): $YESTERDAY_8AM_UTC\\\"\\n+\\n+# 查找对应时间点的 commit\\n+# 使用 --before 和 --after 参数，并取第一个匹配的 commit\\n+OLD_COMMIT=$(git rev-list -n 1 --before=\\\"$YESTERDAY_8AM_UTC\\\" HEAD 2>/dev/null || true)\\n+NEW_COMMIT=$(git rev-list -n 1 --before=\\\"$TODAY_8AM_UTC\\\" HEAD 2>/dev/null || true)\\n+\\n+if [ -z \\\"$OLD_COMMIT\\\" ]; then\\n+    echo \\\"警告: 未找到昨日8点之前的提交，使用最早提交\\\"\\n+    OLD_COMMIT=$(git rev-list --max-parents=0 HEAD)\\n+fi\\n+\\n+if [ -z \\\"$NEW_COMMIT\\\" ]; then\\n+    echo \\\"警告: 未找到今日8点之前的提交，使用最新提交\\\"\\n+    NEW_COMMIT=$(git rev-parse HEAD)\\n+fi\\n+\\n+echo \\\"起始提交 (昨日8点前): $OLD_COMMIT\\\"\\n+echo \\\"结束提交 (今日8点前): $NEW_COMMIT\\\"\\n+\\n+# 检查是否有提交\\n+if [ \\\"$OLD_COMMIT\\\" = \\\"$NEW_COMMIT\\\" ]; then\\n+    echo \\\"警告: 起始和结束提交相同，可能没有新提交\\\"\\n+    # 如果没有新提交，我们使用 HEAD~1 作为起始，HEAD 作为结束\\n+    # 这样可以生成一个空的报告\\n+    COMMIT_COUNT=$(git rev-list --count \\\"$OLD_COMMIT\\\"..\\\"$NEW_COMMIT\\\" 2>/dev/null || echo \\\"0\\\")\\n+    if [ \\\"$COMMIT_COUNT\\\" -eq 0 ]; then\\n+        echo \\\"没有新提交，使用 HEAD 和 HEAD~1\\\"\\n+        OLD_COMMIT=$(git rev-parse HEAD~1 2>/dev/null || git rev-list --max-parents=0 HEAD)\\n+        NEW_COMMIT=$(git rev-parse HEAD)\\n+    fi\\n+fi\\n+\\n+# 输出结果\\n+echo \\\"old_commit=$OLD_COMMIT\\\" >> $GITHUB_OUTPUT\\n+echo \\\"new_commit=$NEW_COMMIT\\\" >> $GITHUB_OUTPUT\\n+echo \\\"old_commit_short=$(git rev-parse --short \\\"$OLD_COMMIT\\\")\\\" >> $GITHUB_OUTPUT\\n+echo \\\"new_commit_short=$(git rev-parse --short \\\"$NEW_COMMIT\\\")\\\" >> $GITHUB_OUTPUT\\n+\\n+# 计算提交数量\\n+COMMIT_COUNT=$(git rev-list --count \\\"$OLD_COMMIT\\\"..\\\"$NEW_COMMIT\\\" 2>/dev/null || echo \\\"0\\\")\\n+echo \\\"commit_count=$COMMIT_COUNT\\\" >> $GITHUB_OUTPUT\\n+\\n+echo \\\"提交范围: $OLD_COMMIT..$NEW_COMMIT ($COMMIT_COUNT 个提交)\\\"\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 153,\n+          \"deletions\": 0,\n+          \"path\": \".github/workflows/README-daily-git-report.md\",\n+          \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.github/workflows/README-daily-git-report.md b/.github/workflows/README-daily-git-report.md\\nnew file mode 100644\\nindex 000000000..35345b164\\n--- /dev/null\\n+++ b/.github/workflows/README-daily-git-report.md\\n@@ -0,0 +1,153 @@\\n+# 每日 Git 变更报告工作流\\n+\\n+## 概述\\n+\\n+这个 GitHub Actions 工作流每天东八区早上 8 点自动运行，生成前一天的 Git 变更报告并创建 Pull Request。\\n+\\n+## 功能\\n+\\n+1. **自动时间范围计算**：提取昨日 8 点到今日 8 点的 commit 范围\\n+2. **结构化数据生成**：生成 JSON 格式的详细提交数据\\n+3. **语义化报告生成**：使用 Claude Code 的 git-changes-reporter skill 生成专业报告\\n+4. **自动 PR 创建**：创建包含报告文件的 Pull Request\\n+5. **制品上传**：将报告文件上传为工作流制品\\n+\\n+## 设置步骤\\n+\\n+### 1. 设置 DeepSeek API Key\\n+\\n+1. 获取 DeepSeek API Key：\\n+\\n+   - 访问 https://platform.deepseek.com/api_keys\\n+   - 创建新的 API Key 或使用现有 Key\\n+\\n+2. 在 GitHub 仓库中设置 Secret：\\n+   - 进入仓库 Settings > Secrets and variables > Actions\\n+   - 点击 \\\"New repository secret\\\"\\n+   - Name: `DEEPSEEK_API_KEY`\\n+   - Value: 你的 DeepSeek API Key\\n+\\n+### 2. 启用工作流\\n+\\n+工作流文件位于 `.github/workflows/daily-git-report.yml`，默认已启用。\\n+\\n+### 3. 手动测试\\n+\\n+可以在 GitHub 仓库的 Actions 页面手动触发工作流：\\n+\\n+1. 进入 \\\"Actions\\\" 标签页\\n+2. 选择 \\\"Daily Git Change Report\\\"\\n+3. 点击 \\\"Run workflow\\\"\\n+4. 可选：输入时区偏移（默认 +8）\\n+\\n+## 工作流步骤详解\\n+\\n+### 1. 获取每日提交范围\\n+\\n+- 使用 `get-daily-commit-range.sh` 脚本计算时间范围\\n+- 支持自定义时区偏移\\n+- 输出起始和结束 commit hash\\n+\\n+### 2. 生成 JSON 数据\\n+\\n+- 使用 `generate-json.js` 脚本生成结构化数据\\n+- 包含提交统计、作者信息、文件变更等\\n+- 保存为 `docs/reports/git-changes-YYYY-MM-DD.json`\\n+\\n+### 3. 通过 DeepSeek 模拟 skill 生成报告\\n+\\n+- 使用 `@anthropic-ai/sdk` 包\\n+- 通过 DeepSeek 的 Anthropic 兼容接口调用 API\\n+- 使用 **skill-emulator.js** 模拟 git-changes-reporter skill 的行为\\n+- 严格按照 skill 的所有规则和要求生成语义化报告\\n+- 保存为 `docs/reports/git-changes-report-YYYY-MM-DD.md`\\n+\\n+### 4. 创建 Pull Request\\n+\\n+- 创建新分支 `daily-report-YYYY-MM-DD`\\n+- 提交报告文件\\n+- 创建 PR 到 main 分支\\n+- 添加标签：`automated`, `report`, `daily`\\n+\\n+### 5. 上传制品\\n+\\n+- 将 JSON 和 Markdown 文件上传为工作流制品\\n+- 保留 7 天\\n+\\n+## 输出文件\\n+\\n+### JSON 数据文件\\n+\\n+```\\n+docs/reports/git-changes-2025-12-02.json\\n+```\\n+\\n+包含：\\n+\\n+- 提交范围信息\\n+- 作者贡献统计\\n+- 热点目录\\n+- 详细提交数据\\n+\\n+### Markdown 报告文件\\n+\\n+```\\n+docs/reports/git-changes-report-2025-12-02.md\\n+```\\n+\\n+包含：\\n+\\n+- 技术领域分析\\n+- 贡献者分析\\n+- 风险评估和建议\\n+- 具体文件引用\\n+- 单提交摘要\\n+\\n+## 自定义配置\\n+\\n+### 修改时区\\n+\\n+默认使用东八区（+8）。可以在手动触发时指定其他时区，或修改工作流中的默认值。\\n+\\n+### 修改运行时间\\n+\\n+修改工作流中的 cron 表达式：\\n+\\n+```yaml\\n+schedule:\\n+  - cron: '0 0 * * *' # UTC 0点（东八区8点）\\n+```\\n+\\n+### 修改报告模板\\n+\\n+编辑 `.claude/skills/git-changes-reporter/references/report-template.md`\\n+\\n+## 故障排除\\n+\\n+### 1. DEEPSEEK_API_KEY 错误\\n+\\n+确保已在 GitHub Secrets 中正确设置 DeepSeek API Key。\\n+\\n+### 2. 没有新提交\\n+\\n+如果当天没有新提交，工作流会跳过 PR 创建。\\n+\\n+### 3. PR 创建失败\\n+\\n+检查是否有同名分支已存在。\\n+\\n+### 4. 时间范围计算错误\\n+\\n+检查系统时区设置，或手动指定时区偏移。\\n+\\n+## 相关技能\\n+\\n+- [git-changes-reporter](../.claude/skills/git-changes-reporter/SKILL.md)：生成结构化 Git 变更报告\\n+- [recent-changes-digest](../.claude/skills/recent-changes-digest/SKILL.md)：生成变更摘要\\n+\\n+## 技术支持\\n+\\n+如有问题，请参考：\\n+\\n+- [Claude Code GitHub Actions 文档](https://code.claude.com/docs/en/github-actions)\\n+- [GitHub Actions 文档](https://docs.github.com/en/actions)\\n\"\n+        },\n+        {\n+          \"additions\": 168,\n+          \"deletions\": 0,\n+          \"path\": \".github/workflows/daily-git-report.yml\",\n+          \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.github/workflows/daily-git-report.yml b/.github/workflows/daily-git-report.yml\\nnew file mode 100644\\nindex 000000000..e6827d22b\\n--- /dev/null\\n+++ b/.github/workflows/daily-git-report.yml\\n@@ -0,0 +1,168 @@\\n+name: Daily Git Change Report\\n+\\n+on:\\n+  schedule:\\n+    # 东八区早上8点运行 (UTC 0点)\\n+    - cron: '0 0 * * *'\\n+  workflow_dispatch:\\n+    inputs:\\n+      timezone_offset:\\n+        description: '时区偏移小时数 (例如 +8 表示东八区)'\\n+        required: false\\n+        default: '+8'\\n+        type: string\\n+\\n+jobs:\\n+  generate-report:\\n+    runs-on: ubuntu-latest\\n+    permissions:\\n+      contents: write\\n+      pull-requests: write\\n+\\n+    steps:\\n+      - name: Checkout repository\\n+        uses: actions/checkout@v4\\n+        with:\\n+          fetch-depth: 0\\n+          token: ${{ secrets.GITHUB_TOKEN }}\\n+\\n+      - name: Setup Node.js\\n+        uses: actions/setup-node@v4\\n+        with:\\n+          node-version: '20'\\n+          cache: 'npm'\\n+\\n+      - name: Install dependencies\\n+        run: npm ci\\n+\\n+      - name: Get daily commit range\\n+        id: commit_range\\n+        run: |\\n+          chmod +x .claude/skills/git-changes-reporter/scripts/get-daily-commit-range.sh\\n+          .claude/skills/git-changes-reporter/scripts/get-daily-commit-range.sh ${{ github.event.inputs.timezone_offset || '+8' }}\\n+\\n+      - name: Display commit range\\n+        run: |\\n+          echo \\\"提交范围: ${{ steps.commit_range.outputs.old_commit_short }}..${{ steps.commit_range.outputs.new_commit_short }}\\\"\\n+          echo \\\"提交数量: ${{ steps.commit_range.outputs.commit_count }}\\\"\\n+\\n+      - name: Generate JSON data\\n+        id: generate_json\\n+        run: |\\n+          mkdir -p docs/reports\\n+          node .claude/skills/git-changes-reporter/scripts/generate-json.js \\\\\\n+            \\\"${{ steps.commit_range.outputs.old_commit }}\\\" \\\\\\n+            \\\"${{ steps.commit_range.outputs.new_commit }}\\\" \\\\\\n+            \\\"docs/reports/git-changes-$(date +%Y-%m-%d).json\\\"\\n+          echo \\\"json_file=docs/reports/git-changes-$(date +%Y-%m-%d).json\\\" >> $GITHUB_OUTPUT\\n+\\n+      - name: Generate report with Claude Code\\n+        id: generate_report\\n+        uses: anthropics/claude-code-action@v1\\n+        with:\\n+          prompt: |\\n+            请使用 git-changes-reporter skill 生成 Git 变更报告。\\n+\\n+            任务信息：\\n+            - 起始提交: ${{ steps.commit_range.outputs.old_commit }}\\n+            - 结束提交: ${{ steps.commit_range.outputs.new_commit }}\\n+            - 提交范围: ${{ steps.commit_range.outputs.old_commit_short }}..${{ steps.commit_range.outputs.new_commit_short }}\\n+            - 提交数量: ${{ steps.commit_range.outputs.commit_count }}\\n+            - 输出文件: docs/reports/git-changes-report-$(date +%Y-%m-%d).md\\n+\\n+            请严格按照 git-changes-reporter skill 的所有规则生成报告，特别是：\\n+            1. 必须使用短哈希引用提交，不要使用 JSON 文件行号\\n+            2. 按技术领域进行语义聚类\\n+            3. 包含完整的报告结构\\n+            4. 提供具体的文件引用和代码位置\\n+\\n+            请先生成 JSON 数据，然后基于 JSON 数据生成语义化报告。\\n+        env:\\n+          ANTHROPIC_AUTH_TOKEN: ${{ secrets.ANTHROPIC_AUTH_TOKEN }}\\n+          ANTHROPIC_BASE_URL: 'https://api.deepseek.com/anthropic'\\n+          ANTHROPIC_MODEL: 'deepseek-reasoner'\\n+          ANTHROPIC_SMALL_FAST_MODEL: 'deepseek-chat'\\n+          API_TIMEOUT_MS: '600000'\\n+          CLAUDE_CODE_MAX_OUTPUT_TOKENS: '32000'\\n+          CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC: '1'\\n+\\n+      - name: Check if report was generated\\n+        id: check_report\\n+        run: |\\n+          MD_FILE=\\\"docs/reports/git-changes-report-$(date +%Y-%m-%d).md\\\"\\n+          if [ -f \\\"$MD_FILE\\\" ]; then\\n+            echo \\\"报告文件已生成: $MD_FILE\\\"\\n+            echo \\\"report_generated=true\\\" >> $GITHUB_OUTPUT\\n+          else\\n+            echo \\\"报告文件未生成: $MD_FILE\\\"\\n+            echo \\\"report_generated=false\\\" >> $GITHUB_OUTPUT\\n+          fi\\n+\\n+      - name: Create or update PR\\n+        id: create_pr\\n+        if: steps.check_report.outputs.report_generated == 'true'\\n+        env:\\n+          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\\n+        run: |\\n+          git config --global user.name \\\"github-actions[bot]\\\"\\n+          git config --global user.email \\\"github-actions[bot]@users.noreply.github.com\\\"\\n+\\n+          BRANCH_NAME=\\\"daily-report-$(date +%Y-%m-%d)\\\"\\n+          git checkout -b \\\"$BRANCH_NAME\\\"\\n+          git add docs/reports/\\n+\\n+          if git diff --cached --quiet; then\\n+            echo \\\"没有变更，跳过 PR 创建\\\"\\n+            echo \\\"pr_created=false\\\" >> $GITHUB_OUTPUT\\n+          else\\n+            git commit -m \\\"feat: add daily git change report for $(date +%Y-%m-%d) - ${{ steps.commit_range.outputs.commit_count }} commits\\\"\\n+            git push origin \\\"$BRANCH_NAME\\\"\\n+\\n+            PR_TITLE=\\\"Daily Git Change Report $(date +%Y-%m-%d)\\\"\\n+            PR_BODY=$(cat <<-EOF\\n+            ## 每日 Git 变更报告\\n+\\n+            ### 报告信息\\n+            - **日期**: $(date +%Y-%m-%d)\\n+            - **提交范围**: ${{ steps.commit_range.outputs.old_commit_short }}..${{ steps.commit_range.outputs.new_commit_short }}\\n+            - **提交数量**: ${{ steps.commit_range.outputs.commit_count }}\\n+            - **生成时间**: $(date -Iseconds)\\n+\\n+            ### 包含文件\\n+            1. \\\\`docs/reports/git-changes-$(date +%Y-%m-%d).json\\\\` - 结构化 JSON 数据\\n+            2. \\\\`docs/reports/git-changes-report-$(date +%Y-%m-%d).md\\\\` - 完整的语义化报告\\n+\\n+            ### 报告特点\\n+            - 使用 Claude Code 的 git-changes-reporter skill 生成\\n+            - 包含技术领域分析\\n+            - 贡献者统计和分析\\n+            - 风险评估和建议\\n+            - 具体的文件引用和代码位置\\n+\\n+            ### 自动化\\n+            此 PR 由 GitHub Actions 自动生成，计划每天东八区早上8点运行。\\n+\\n+            🤖 Generated with [Claude Code](https://claude.com/claude-code)\\n+            EOF\\n+            )\\n+\\n+            gh pr create \\\\\\n+              --title \\\"$PR_TITLE\\\" \\\\\\n+              --body \\\"$PR_BODY\\\" \\\\\\n+              --base main \\\\\\n+              --head \\\"$BRANCH_NAME\\\" \\\\\\n+              --label \\\"automated,report,daily\\\" || echo \\\"PR 创建失败，可能已存在\\\"\\n+\\n+            echo \\\"pr_created=true\\\" >> $GITHUB_OUTPUT\\n+            echo \\\"branch_name=$BRANCH_NAME\\\" >> $GITHUB_OUTPUT\\n+          fi\\n+\\n+      - name: Upload reports as artifact\\n+        if: always()\\n+        uses: actions/upload-artifact@v4\\n+        with:\\n+          name: daily-git-reports-$(date +%Y-%m-%d)\\n+          path: |\\n+            docs/reports/git-changes-$(date +%Y-%m-%d).json\\n+            docs/reports/git-changes-report-$(date +%Y-%m-%d).md\\n+          retention-days: 7\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"2790b6938fe80befe73baec01112495bb9c448a4\",\n+      \"short\": \"2790b6938\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-03 16:16:11 +0800\",\n+      \"subject\": \"fix(ci): git digest report (#2161)\",\n+      \"files\": [\n+        {\n+          \"additions\": 24,\n+          \"deletions\": 21,\n+          \"path\": \".github/workflows/daily-git-report.yml\",\n+          \"patch\": \"commit 2790b6938fe80befe73baec01112495bb9c448a4\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 16:16:11 2025 +0800\\n\\n    fix(ci): git digest report (#2161)\\n\\ndiff --git a/.github/workflows/daily-git-report.yml b/.github/workflows/daily-git-report.yml\\nindex e6827d22b..00ed8aa12 100644\\n--- a/.github/workflows/daily-git-report.yml\\n+++ b/.github/workflows/daily-git-report.yml\\n@@ -27 +26,0 @@ jobs:\\n-          token: ${{ secrets.GITHUB_TOKEN }}\\n@@ -32,2 +31 @@ jobs:\\n-          node-version: '20'\\n-          cache: 'npm'\\n+          node-version: '22.14.0'\\n@@ -35,2 +33,3 @@ jobs:\\n-      - name: Install dependencies\\n-        run: npm ci\\n+      - name: Prepare report date\\n+        id: report_date\\n+        run: echo \\\"value=$(date +%Y-%m-%d)\\\" >> $GITHUB_OUTPUT\\n@@ -51,0 +51 @@ jobs:\\n+          REPORT_DATE=${{ steps.report_date.outputs.value }}\\n@@ -56,2 +56,2 @@ jobs:\\n-            \\\"docs/reports/git-changes-$(date +%Y-%m-%d).json\\\"\\n-          echo \\\"json_file=docs/reports/git-changes-$(date +%Y-%m-%d).json\\\" >> $GITHUB_OUTPUT\\n+            \\\"docs/reports/git-changes-${REPORT_DATE}.json\\\"\\n+          echo \\\"json_file=docs/reports/git-changes-${REPORT_DATE}.json\\\" >> $GITHUB_OUTPUT\\n@@ -92 +92 @@ jobs:\\n-          MD_FILE=\\\"docs/reports/git-changes-report-$(date +%Y-%m-%d).md\\\"\\n+          MD_FILE=\\\"docs/reports/git-changes-report-${{ steps.report_date.outputs.value }}.md\\\"\\n@@ -110,2 +110,3 @@ jobs:\\n-          BRANCH_NAME=\\\"daily-report-$(date +%Y-%m-%d)\\\"\\n-          git checkout -b \\\"$BRANCH_NAME\\\"\\n+          REPORT_DATE=${{ steps.report_date.outputs.value }}\\n+          BRANCH_NAME=\\\"daily-report-${REPORT_DATE}\\\"\\n+          git checkout -B \\\"$BRANCH_NAME\\\"\\n@@ -118,2 +119,2 @@ jobs:\\n-            git commit -m \\\"feat: add daily git change report for $(date +%Y-%m-%d) - ${{ steps.commit_range.outputs.commit_count }} commits\\\"\\n-            git push origin \\\"$BRANCH_NAME\\\"\\n+            git commit -m \\\"feat: add daily git change report for ${REPORT_DATE} - ${{ steps.commit_range.outputs.commit_count }} commits\\\"\\n+            git push origin \\\"$BRANCH_NAME\\\" --force\\n@@ -121 +122 @@ jobs:\\n-            PR_TITLE=\\\"Daily Git Change Report $(date +%Y-%m-%d)\\\"\\n+            PR_TITLE=\\\"Daily Git Change Report ${REPORT_DATE}\\\"\\n@@ -126 +127 @@ jobs:\\n-            - **日期**: $(date +%Y-%m-%d)\\n+            - **日期**: ${REPORT_DATE}\\n@@ -132,2 +133,2 @@ jobs:\\n-            1. \\\\`docs/reports/git-changes-$(date +%Y-%m-%d).json\\\\` - 结构化 JSON 数据\\n-            2. \\\\`docs/reports/git-changes-report-$(date +%Y-%m-%d).md\\\\` - 完整的语义化报告\\n+            1. \\\\`docs/reports/git-changes-${REPORT_DATE}.json\\\\` - 结构化 JSON 数据\\n+            2. \\\\`docs/reports/git-changes-report-${REPORT_DATE}.md\\\\` - 完整的语义化报告\\n@@ -154 +155,3 @@ jobs:\\n-              --label \\\"automated,report,daily\\\" || echo \\\"PR 创建失败，可能已存在\\\"\\n+              --label automated \\\\\\n+              --label report \\\\\\n+              --label daily || echo \\\"PR 创建失败，可能已存在\\\"\\n@@ -161 +164 @@ jobs:\\n-        if: always()\\n+        if: steps.check_report.outputs.report_generated == 'true'\\n@@ -164 +167 @@ jobs:\\n-          name: daily-git-reports-$(date +%Y-%m-%d)\\n+          name: daily-git-reports-${{ steps.report_date.outputs.value }}\\n@@ -166,2 +169,2 @@ jobs:\\n-            docs/reports/git-changes-$(date +%Y-%m-%d).json\\n-            docs/reports/git-changes-report-$(date +%Y-%m-%d).md\\n+            docs/reports/git-changes-${{ steps.report_date.outputs.value }}.json\\n+            docs/reports/git-changes-report-${{ steps.report_date.outputs.value }}.md\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"33d7ed118216879642b2de2cd5a5433d2e5cdc6a\",\n+      \"short\": \"33d7ed118\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-03 18:24:17 +0800\",\n+      \"subject\": \"feat: enhance product listing and caching mechanisms (#2162)\",\n+      \"files\": [\n+        {\n+          \"additions\": 46,\n+          \"deletions\": 86,\n+          \"path\": \"apps/vendor-binance/src/public-data/product.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-binance/src/public-data/product.ts b/apps/vendor-binance/src/public-data/product.ts\\nindex a25f998f9..8879f59f4 100644\\n--- a/apps/vendor-binance/src/public-data/product.ts\\n+++ b/apps/vendor-binance/src/public-data/product.ts\\n@@ -1,2 +1 @@\\n-import { IProduct, IQueryProductsRequest, provideQueryProductsService } from '@yuants/data-product';\\n-import { Terminal } from '@yuants/protocol';\\n+import { IProduct } from '@yuants/data-product';\\n@@ -6,2 +4,0 @@ import { getFutureExchangeInfo, getSpotExchangeInfo } from '../api/public-api';\\n-const terminal = Terminal.fromNodeEnv();\\n-\\n@@ -10 +7,6 @@ export const listProducts = async () => {\\n-  const exchangeInfo = await getFutureExchangeInfo();\\n+  const [futureExchangeInfo, spotExchangeInfo] = await Promise.all([\\n+    getFutureExchangeInfo(),\\n+    getSpotExchangeInfo(),\\n+  ]);\\n+\\n+  const products: IProduct[] = [];\\n@@ -12,3 +14,3 @@ export const listProducts = async () => {\\n-  // Convert symbols to IProduct format\\n-  return exchangeInfo.symbols.map((symbol): IProduct => {\\n-    return {\\n+  // Convert future symbols to IProduct format\\n+  for (const symbol of futureExchangeInfo.symbols) {\\n+    products.push({\\n@@ -33,3 +35,2 @@ export const listProducts = async () => {\\n-    };\\n-  });\\n-};\\n+    });\\n+  }\\n@@ -37,12 +38,24 @@ export const listProducts = async () => {\\n-// Provide QueryProducts service with the new design\\n-const cache = provideQueryProductsService(\\n-  terminal,\\n-  'BINANCE',\\n-  async (req: IQueryProductsRequest): Promise<IProduct[]> => {\\n-    // Directly call the external API to get exchange info\\n-    const [futureExchangeInfo, spotExchangeInfo] = await Promise.all([\\n-      getFutureExchangeInfo(),\\n-      getSpotExchangeInfo(),\\n-    ]);\\n-\\n-    const products: IProduct[] = [];\\n+  // Convert spot symbols to IProduct format\\n+  for (const symbol of spotExchangeInfo.symbols) {\\n+    if (symbol.isSpotTradingAllowed) {\\n+      products.push({\\n+        datasource_id: 'BINANCE',\\n+        product_id: encodePath('BINANCE', 'SPOT', symbol.symbol),\\n+        base_currency: symbol.baseAsset,\\n+        quote_currency: symbol.quoteAsset,\\n+        price_step: +`1e-${symbol.quotePrecision}`,\\n+        value_scale: 1,\\n+        volume_step: +`1e-${symbol.baseAssetPrecision}`,\\n+        name: `${symbol.baseAsset}/${symbol.quoteAsset} SPOT`,\\n+        value_scale_unit: '',\\n+        margin_rate: 1,\\n+        value_based_cost: 0,\\n+        volume_based_cost: 0,\\n+        max_position: 0,\\n+        max_volume: 0,\\n+        allow_long: true,\\n+        allow_short: false,\\n+        market_id: 'BINANCE/SPOT',\\n+        no_interest_rate: true,\\n+      });\\n+    }\\n@@ -50,2 +63 @@ const cache = provideQueryProductsService(\\n-    // Convert future symbols to IProduct format\\n-    for (const symbol of futureExchangeInfo.symbols) {\\n+    if (symbol.isMarginTradingAllowed) {\\n@@ -54 +66 @@ const cache = provideQueryProductsService(\\n-        product_id: encodePath('BINANCE', 'USDT-FUTURE', symbol.symbol),\\n+        product_id: encodePath('BINANCE', 'MARGIN', symbol.symbol),\\n@@ -57 +69 @@ const cache = provideQueryProductsService(\\n-        price_step: +`1e-${symbol.pricePrecision}`,\\n+        price_step: +`1e-${symbol.quotePrecision}`,\\n@@ -59,2 +71,2 @@ const cache = provideQueryProductsService(\\n-        volume_step: +`1e-${symbol.quantityPrecision}`,\\n-        name: `${symbol.baseAsset}/${symbol.quoteAsset} PERP`,\\n+        volume_step: +`1e-${symbol.baseAssetPrecision}`,\\n+        name: `${symbol.baseAsset}/${symbol.quoteAsset} MARGIN`,\\n@@ -62 +74 @@ const cache = provideQueryProductsService(\\n-        margin_rate: +symbol.requiredMarginPercent / 100,\\n+        margin_rate: 1,\\n@@ -69 +81 @@ const cache = provideQueryProductsService(\\n-        market_id: 'BINANCE/USDT-FUTURE',\\n+        market_id: 'BINANCE/MARGIN',\\n@@ -72,0 +85 @@ const cache = provideQueryProductsService(\\n+  }\\n@@ -74,55 +87,2 @@ const cache = provideQueryProductsService(\\n-    // Convert spot symbols to IProduct format\\n-    for (const symbol of spotExchangeInfo.symbols) {\\n-      if (symbol.isSpotTradingAllowed) {\\n-        products.push({\\n-          datasource_id: 'BINANCE',\\n-          product_id: encodePath('BINANCE', 'SPOT', symbol.symbol),\\n-          base_currency: symbol.baseAsset,\\n-          quote_currency: symbol.quoteAsset,\\n-          price_step: +`1e-${symbol.quotePrecision}`,\\n-          value_scale: 1,\\n-          volume_step: +`1e-${symbol.baseAssetPrecision}`,\\n-          name: `${symbol.baseAsset}/${symbol.quoteAsset} SPOT`,\\n-          value_scale_unit: '',\\n-          margin_rate: 1,\\n-          value_based_cost: 0,\\n-          volume_based_cost: 0,\\n-          max_position: 0,\\n-          max_volume: 0,\\n-          allow_long: true,\\n-          allow_short: false,\\n-          market_id: 'BINANCE/SPOT',\\n-          no_interest_rate: true,\\n-        });\\n-      }\\n-\\n-      if (symbol.isMarginTradingAllowed) {\\n-        products.push({\\n-          datasource_id: 'BINANCE',\\n-          product_id: encodePath('BINANCE', 'MARGIN', symbol.symbol),\\n-          base_currency: symbol.baseAsset,\\n-          quote_currency: symbol.quoteAsset,\\n-          price_step: +`1e-${symbol.quotePrecision}`,\\n-          value_scale: 1,\\n-          volume_step: +`1e-${symbol.baseAssetPrecision}`,\\n-          name: `${symbol.baseAsset}/${symbol.quoteAsset} MARGIN`,\\n-          value_scale_unit: '',\\n-          margin_rate: 1,\\n-          value_based_cost: 0,\\n-          volume_based_cost: 0,\\n-          max_position: 0,\\n-          max_volume: 0,\\n-          allow_long: true,\\n-          allow_short: true,\\n-          market_id: 'BINANCE/MARGIN',\\n-          no_interest_rate: false,\\n-        });\\n-      }\\n-    }\\n-\\n-    return products;\\n-  },\\n-  {\\n-    auto_refresh_interval: 3600_000,\\n-  },\\n-);\\n+  return products;\\n+};\\n\"\n+        },\n+        {\n+          \"additions\": 25,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-huobi/src/api/public-api.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/api/public-api.ts b/apps/vendor-huobi/src/api/public-api.ts\\nindex 03a1468be..c8c6c3801 100644\\n--- a/apps/vendor-huobi/src/api/public-api.ts\\n+++ b/apps/vendor-huobi/src/api/public-api.ts\\n@@ -359,0 +360,25 @@ export function getV2ReferenceCurrencies(params: { currency?: string; authorized\\n+\\n+/**\\n+ * 【现货】获取市场所有交易对的最新行情\\n+ *\\n+ * https://www.htx.com/zh-cn/opend/newApiPages/?id=7ec40374-7773-11ed-9966-0242ac110003\\n+ *\\n+ */\\n+export const getSpotMarketTickers = (): Promise<{\\n+  data: {\\n+    symbol: string;\\n+    open: number;\\n+    high: number;\\n+    low: number;\\n+    close: number;\\n+    amount: number;\\n+    vol: number;\\n+    count: number;\\n+    bid: number;\\n+    bidSize: number;\\n+    ask: number;\\n+    askSize: number;\\n+  }[];\\n+  status: string;\\n+  ts: number;\\n+}> => publicRequest('GET', '/market/tickers', SPOT_API_ROOT);\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 9,\n+          \"path\": \"apps/vendor-huobi/src/services/accounts/spot.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/services/accounts/spot.ts b/apps/vendor-huobi/src/services/accounts/spot.ts\\nindex a1b9e9454..9b214135d 100644\\n--- a/apps/vendor-huobi/src/services/accounts/spot.ts\\n+++ b/apps/vendor-huobi/src/services/accounts/spot.ts\\n@@ -1 +1 @@\\n-import { IActionHandlerOfGetAccountInfo, makeSpotPosition } from '@yuants/data-account';\\n+import { IActionHandlerOfGetAccountInfo, IPosition, makeSpotPosition } from '@yuants/data-account';\\n@@ -4,0 +5 @@ import { encodePath } from '@yuants/utils';\\n+import { quoteCache } from '../market-data/quote';\\n@@ -11,3 +12,9 @@ export const getSpotAccountInfo: IActionHandlerOfGetAccountInfo<ICredential> = a\\n-  return spotBalance.data.list\\n-    .map((v) => {\\n-      return makeSpotPosition({\\n+  const positions: IPosition[] = [];\\n+\\n+  for (const v of spotBalance.data.list) {\\n+    if (v.balance === '0') continue;\\n+    const product_id = encodePath('HTX', 'SPOT', v.currency + 'usdt');\\n+    const quote = await quoteCache.query(product_id);\\n+    const closable_price = v.currency === 'usdt' ? 1 : +(quote?.ask_price ?? 0);\\n+    positions.push(\\n+      makeSpotPosition({\\n@@ -16 +23 @@ export const getSpotAccountInfo: IActionHandlerOfGetAccountInfo<ICredential> = a\\n-        product_id: encodePath('HTX', 'SPOT', v.currency + 'usdt'),\\n+        product_id: product_id,\\n@@ -19,4 +26,5 @@ export const getSpotAccountInfo: IActionHandlerOfGetAccountInfo<ICredential> = a\\n-        closable_price: 1, // TODO: 获取现货币对价格\\n-      });\\n-    })\\n-    .filter((x) => x.volume > 0);\\n+        closable_price: closable_price,\\n+      }),\\n+    );\\n+  }\\n+  return positions;\\n\"\n+        },\n+        {\n+          \"additions\": 18,\n+          \"deletions\": 44,\n+          \"path\": \"apps/vendor-huobi/src/services/accounts/super-margin.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/services/accounts/super-margin.ts b/apps/vendor-huobi/src/services/accounts/super-margin.ts\\nindex b4fbe80f4..ff8859473 100644\\n--- a/apps/vendor-huobi/src/services/accounts/super-margin.ts\\n+++ b/apps/vendor-huobi/src/services/accounts/super-margin.ts\\n@@ -1,3 +1,2 @@\\n-import { createCache } from '@yuants/cache';\\n-import { IActionHandlerOfGetAccountInfo, IPosition } from '@yuants/data-account';\\n-import { formatTime } from '@yuants/utils';\\n+import { IActionHandlerOfGetAccountInfo, IPosition, makeSpotPosition } from '@yuants/data-account';\\n+import { encodePath } from '@yuants/utils';\\n@@ -5 +4 @@ import { getSpotAccountBalance, ICredential } from '../../api/private-api';\\n-import { getSpotTick } from '../../api/public-api';\\n+import { quoteCache } from '../market-data/quote';\\n@@ -8,5 +6,0 @@ import { superMarginAccountUidCache } from '../uid';\\n-const spotTickCache = createCache((currency) => getSpotTick({ symbol: `${currency}usdt` }), {\\n-  expire: 300_000, // 5 minutes\\n-  swrAfter: 10_000, // 10 seconds\\n-});\\n-\\n@@ -16,0 +11 @@ export const getSuperMarginAccountInfo: IActionHandlerOfGetAccountInfo<ICredenti\\n+  const positions: IPosition[] = [];\\n@@ -23,14 +17,0 @@ export const getSuperMarginAccountInfo: IActionHandlerOfGetAccountInfo<ICredenti\\n-  // get positions (non-usdt currencies)\\n-  const positions: IPosition[] = [];\\n-  const nonUsdtCurrencies = balanceList\\n-    .filter((v) => v.currency !== 'usdt')\\n-    .reduce((acc, cur) => {\\n-      const existing = acc.find((item) => item.currency === cur.currency);\\n-      if (existing) {\\n-        existing.balance += +cur.balance;\\n-      } else {\\n-        acc.push({ currency: cur.currency, balance: +cur.balance });\\n-      }\\n-      return acc;\\n-    }, [] as { currency: string; balance: number }[]);\\n-\\n@@ -38,6 +19,5 @@ export const getSuperMarginAccountInfo: IActionHandlerOfGetAccountInfo<ICredenti\\n-  for (const currencyData of nonUsdtCurrencies) {\\n-    if (currencyData.balance > 0) {\\n-      const tickerRes = await spotTickCache.query(currencyData.currency);\\n-      const price = tickerRes?.tick.close || 0;\\n-      try {\\n-        // get current price from websocket or fallback to REST API\\n+  for (const currencyData of balanceList) {\\n+    if (currencyData.balance === '0') continue;\\n+    const product_id = encodePath('HTX', 'SPOT', currencyData.currency + 'usdt');\\n+    const quote = await quoteCache.query(currencyData.currency);\\n+    const closable_price = currencyData.currency === 'usdt' ? 1 : +(quote?.ask_price ?? 0);\\n@@ -45,15 +25,9 @@ export const getSuperMarginAccountInfo: IActionHandlerOfGetAccountInfo<ICredenti\\n-        positions.push({\\n-          position_id: `${currencyData.currency}/usdt/spot`,\\n-          product_id: `${currencyData.currency}usdt`,\\n-          direction: 'LONG',\\n-          volume: currencyData.balance,\\n-          free_volume: currencyData.balance,\\n-          position_price: price,\\n-          closable_price: price,\\n-          floating_profit: 0,\\n-          valuation: currencyData.balance * price,\\n-        });\\n-      } catch (error) {\\n-        console.warn(formatTime(Date.now()), `Failed to get price for ${currencyData.currency}:`, error);\\n-      }\\n-    }\\n+    positions.push(\\n+      makeSpotPosition({\\n+        position_id: `${currencyData.currency}/usdt/spot`,\\n+        product_id: product_id,\\n+        volume: +currencyData.balance,\\n+        free_volume: +currencyData.balance,\\n+        closable_price: closable_price,\\n+      }),\\n+    );\\n\"\n+        },\n+        {\n+          \"additions\": 23,\n+          \"deletions\": 12,\n+          \"path\": \"apps/vendor-huobi/src/services/accounts/swap.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/services/accounts/swap.ts b/apps/vendor-huobi/src/services/accounts/swap.ts\\nindex 4da1dbf2c..c847a74db 100644\\n--- a/apps/vendor-huobi/src/services/accounts/swap.ts\\n+++ b/apps/vendor-huobi/src/services/accounts/swap.ts\\n@@ -1 +1 @@\\n-import { IPosition } from '@yuants/data-account';\\n+import { IPosition, makeSpotPosition } from '@yuants/data-account';\\n@@ -3 +2,0 @@ import { encodePath } from '@yuants/utils';\\n-import { firstValueFrom } from 'rxjs';\\n@@ -5 +4,3 @@ import { getSwapCrossPositionInfo, getUnifiedAccountInfo, ICredential } from '..\\n-import { productService } from '../product';\\n+import { productCache } from '../product';\\n+\\n+const usdAssets = new Set(['USDT', 'USDC', 'USDD']);\\n@@ -7,0 +9 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n+  const positions: IPosition[] = [];\\n@@ -13,3 +15,13 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n-  const balanceData = balance.data.find((v) => v.margin_asset === 'USDT');\\n-  if (!balanceData) {\\n-    throw new Error('No USDT balance found in unified account');\\n+\\n+  for (const v of balance.data || []) {\\n+    if (v.margin_balance === 0) continue;\\n+    positions.push(\\n+      makeSpotPosition({\\n+        position_id: encodePath('HTX', 'SWAP-MARGIN', v.margin_asset),\\n+        datasource_id: 'HTX',\\n+        product_id: encodePath('HTX', 'SWAP-MARGIN', v.margin_asset),\\n+        volume: +v.margin_balance,\\n+        free_volume: +v.withdraw_available,\\n+        closable_price: usdAssets.has(v.margin_asset) ? 1 : 0,\\n+      }),\\n+    );\\n@@ -20,2 +32 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n-  const mapProductIdToPerpetualProduct = await firstValueFrom(productService.mapProductIdToProduct$);\\n-  const positions: IPosition[] = (positionsRes.data || []).map((v): IPosition => {\\n+  for (const v of positionsRes.data || []) {\\n@@ -23 +34 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n-    const theProduct = mapProductIdToPerpetualProduct?.get(product_id);\\n+    const theProduct = await productCache.query(product_id);\\n@@ -25 +36 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n-    return {\\n+    positions.push({\\n@@ -36,2 +47,2 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n-    };\\n-  });\\n+    });\\n+  }\\n\"\n+        },\n+        {\n+          \"additions\": 35,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-huobi/src/services/market-data/quote.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/services/market-data/quote.ts b/apps/vendor-huobi/src/services/market-data/quote.ts\\nindex d11620707..254f73d68 100644\\n--- a/apps/vendor-huobi/src/services/market-data/quote.ts\\n+++ b/apps/vendor-huobi/src/services/market-data/quote.ts\\n@@ -0,0 +1 @@\\n+import { createCache } from '@yuants/cache';\\n@@ -3 +4 @@ import { Terminal } from '@yuants/protocol';\\n-import { writeToSQL } from '@yuants/sql';\\n+import { escapeSQL, requestSQL, writeToSQL } from '@yuants/sql';\\n@@ -6,0 +8 @@ import {\\n+  getSpotMarketTickers,\\n@@ -65,0 +68,18 @@ const quote2$ = swapTradeTick$.pipe(\\n+const quote5$ = defer(() => getSpotMarketTickers()).pipe(\\n+  mergeMap((res) => res.data || []),\\n+  map(\\n+    (tick): Partial<IQuote> => ({\\n+      datasource_id: 'HTX',\\n+      product_id: encodePath('HTX', 'SPOT', tick.symbol),\\n+      ask_price: `${tick.ask}`,\\n+      bid_price: `${tick.bid}`,\\n+      ask_volume: `${tick.askSize}`,\\n+      bid_volume: `${tick.bidSize}`,\\n+      last_price: `${tick.close}`,\\n+    }),\\n+  ),\\n+  repeat({ delay: 1000 }),\\n+  retry({ delay: 1000 }),\\n+  shareReplay(1),\\n+);\\n+\\n@@ -131 +151 @@ if (process.env.WRITE_QUOTE_TO_SQL === 'true') {\\n-  merge(quote1$, quote2$, quote3$, quote4$)\\n+  merge(quote1$, quote2$, quote3$, quote4$, quote5$)\\n@@ -162,0 +183,13 @@ const mapSwapContractCodeToOpenInterest$ = defer(() => swapOpenInterest$).pipe(\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n+export const quoteCache = createCache<IQuote>(\\n+  async (product_id) => {\\n+    const sql = `select * from quote where product_id = ${escapeSQL(product_id)}`;\\n+    console.info('QuoteSQL', sql);\\n+    const [quote] = await requestSQL<IQuote[]>(terminal, sql);\\n+    console.info('QuoteFetched', product_id, JSON.stringify(quote));\\n+    return quote;\\n+  },\\n+  { expire: 10_000 },\\n+);\\n+\\n\"\n+        },\n+        {\n+          \"additions\": 4,\n+          \"deletions\": 6,\n+          \"path\": \"apps/vendor-huobi/src/services/orders/submitOrder.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/services/orders/submitOrder.ts b/apps/vendor-huobi/src/services/orders/submitOrder.ts\\nindex e79925ede..7699595d2 100644\\n--- a/apps/vendor-huobi/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-huobi/src/services/orders/submitOrder.ts\\n@@ -3 +2,0 @@ import { decodePath, formatTime, newError, roundToStep } from '@yuants/utils';\\n-import { firstValueFrom } from 'rxjs';\\n@@ -13 +12 @@ import { getSpotTick } from '../../api/public-api';\\n-import { productService } from '../product';\\n+import { productCache } from '../product';\\n@@ -63 +62 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n-  const [balanceRes, mapProductIdToProduct, priceRes] = await Promise.all([\\n+  const [balanceRes, theProduct, priceRes] = await Promise.all([\\n@@ -65 +64 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n-    firstValueFrom(productService.mapProductIdToProduct$),\\n+    productCache.query(order.product_id),\\n@@ -73 +72 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n-  if (!mapProductIdToProduct) throw new Error('Product map not found');\\n+  if (!theProduct) throw newError('HUOBI_SUBMIT_ORDER_PRODUCT_NOT_FOUND', { product_id: order.product_id });\\n@@ -75 +73,0 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n-  const theProduct = mapProductIdToProduct.get(order.product_id);\\n\"\n+        },\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 4,\n+          \"path\": \"apps/vendor-huobi/src/services/product.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/services/product.ts b/apps/vendor-huobi/src/services/product.ts\\nindex 32ee89405..314f35055 100644\\n--- a/apps/vendor-huobi/src/services/product.ts\\n+++ b/apps/vendor-huobi/src/services/product.ts\\n@@ -1 +1 @@\\n-import { IProduct, provideQueryProductsService } from '@yuants/data-product';\\n+import { createProductCache, IProduct } from '@yuants/data-product';\\n@@ -90,3 +90 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-export const productService = provideQueryProductsService(terminal, 'HTX', listProducts, {\\n-  auto_refresh_interval: 3600_000,\\n-});\\n+export const productCache = createProductCache(terminal);\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/virtual-exchange/package.json\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\\nindex 6784f32d1..bf9abbb4c 100644\\n--- a/apps/virtual-exchange/package.json\\n+++ b/apps/virtual-exchange/package.json\\n@@ -15,0 +16 @@\\n+    \\\"@yuants/data-product\\\": \\\"workspace:*\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"apps/virtual-exchange/src/credential.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/virtual-exchange/src/credential.ts b/apps/virtual-exchange/src/credential.ts\\nindex 22f15a5dd..f72728008 100644\\n--- a/apps/virtual-exchange/src/credential.ts\\n+++ b/apps/virtual-exchange/src/credential.ts\\n@@ -97,0 +98,10 @@ export const validCredentials$ = defer(() => listAllCredentials()).pipe(\\n+export const validCredentialTypes$ = validCredentials$.pipe(\\n+  map((credentials) => {\\n+    const types = new Set<string>();\\n+    credentials.forEach((credential) => {\\n+      types.add(credential.type);\\n+    });\\n+    return Array.from(types);\\n+  }),\\n+);\\n+\\n\"\n+        },\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/src/index.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/virtual-exchange/src/index.ts b/apps/virtual-exchange/src/index.ts\\nindex fab618a86..8d7f19a07 100644\\n--- a/apps/virtual-exchange/src/index.ts\\n+++ b/apps/virtual-exchange/src/index.ts\\n@@ -1 +0,0 @@\\n-import './legacy-services';\\n@@ -3,0 +3,2 @@ import './general';\\n+import './legacy-services';\\n+import './product-collector';\\n\"\n+        },\n+        {\n+          \"additions\": 37,\n+          \"deletions\": 0,\n+          \"path\": \"apps/virtual-exchange/src/product-collector.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/virtual-exchange/src/product-collector.ts b/apps/virtual-exchange/src/product-collector.ts\\nnew file mode 100644\\nindex 000000000..15ba0a692\\n--- /dev/null\\n+++ b/apps/virtual-exchange/src/product-collector.ts\\n@@ -0,0 +1,37 @@\\n+import { provideQueryProductsService } from '@yuants/data-product';\\n+import { listProducts } from '@yuants/exchange';\\n+import { Terminal } from '@yuants/protocol';\\n+import { listWatch, newError } from '@yuants/utils';\\n+import { Observable, Subject } from 'rxjs';\\n+import { validCredentialTypes$ } from './credential';\\n+\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n+validCredentialTypes$\\n+  .pipe(\\n+    listWatch(\\n+      (x) => x,\\n+      (type) =>\\n+        new Observable((sub) => {\\n+          const dispose$ = new Subject<void>();\\n+          sub.add(() => {\\n+            dispose$.next();\\n+            dispose$.complete();\\n+          });\\n+          provideQueryProductsService(\\n+            terminal,\\n+            type,\\n+            async () => {\\n+              const res = await listProducts(terminal, type);\\n+              if (!res.data) throw newError('FETCH_PRODUCTS_FAILED', { credential: type, res });\\n+              return res.data;\\n+            },\\n+            {\\n+              auto_refresh_interval: 3600_000,\\n+              dispose$,\\n+            },\\n+          );\\n+        }),\\n+    ),\\n+  )\\n+  .subscribe();\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-virtual-exchange/2025-12-03-09-06.json\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-03-09-06.json b/common/changes/@yuants/app-virtual-exchange/2025-12-03-09-06.json\\nnew file mode 100644\\nindex 000000000..2528df298\\n--- /dev/null\\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-03-09-06.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\",\\n+      \\\"comment\\\": \\\"auto pull all products\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/data-product/2025-12-03-09-06.json\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/common/changes/@yuants/data-product/2025-12-03-09-06.json b/common/changes/@yuants/data-product/2025-12-03-09-06.json\\nnew file mode 100644\\nindex 000000000..4b040f73d\\n--- /dev/null\\n+++ b/common/changes/@yuants/data-product/2025-12-03-09-06.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/data-product\\\",\\n+      \\\"comment\\\": \\\"add clientProductCache\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/data-product\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-03-09-06.json\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-03-09-06.json b/common/changes/@yuants/vendor-binance/2025-12-03-09-06.json\\nnew file mode 100644\\nindex 000000000..70ef33a10\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-binance/2025-12-03-09-06.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n+      \\\"comment\\\": \\\"fix listProducts\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/2025-12-03-10-17.json\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/common/changes/@yuants/vendor-huobi/2025-12-03-10-17.json b/common/changes/@yuants/vendor-huobi/2025-12-03-10-17.json\\nnew file mode 100644\\nindex 000000000..1f75bc9ea\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-huobi/2025-12-03-10-17.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\",\\n+      \\\"comment\\\": \\\"fix\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 0,\n+          \"path\": \"common/config/rush/pnpm-lock.yaml\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/common/config/rush/pnpm-lock.yaml b/common/config/rush/pnpm-lock.yaml\\nindex f3a79e463..7e2675be3 100644\\n--- a/common/config/rush/pnpm-lock.yaml\\n+++ b/common/config/rush/pnpm-lock.yaml\\n@@ -1520,0 +1521 @@ importers:\\n+      '@yuants/data-product': workspace:*\\n@@ -1533,0 +1535 @@ importers:\\n+      '@yuants/data-product': link:../../libraries/data-product\\n\"\n+        },\n+        {\n+          \"additions\": 4,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/data-product/etc/data-product.api.md\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/libraries/data-product/etc/data-product.api.md b/libraries/data-product/etc/data-product.api.md\\nindex 7c0d72304..a8fb29af1 100644\\n--- a/libraries/data-product/etc/data-product.api.md\\n+++ b/libraries/data-product/etc/data-product.api.md\\n@@ -11,0 +12,3 @@ import { Terminal } from '@yuants/protocol';\\n+// @public\\r\\n+export const createClientProductCache: (terminal: Terminal, options?: IProductCacheOptions) => ICache<IProduct>;\\r\\n+\\r\\n@@ -75,0 +79 @@ export function provideQueryProductsService(terminal: Terminal, datasource_id: s\\n+    dispose$?: Observable<void>;\\r\\n\"\n+        },\n+        {\n+          \"additions\": 21,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/data-product/src/ProductCache.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/libraries/data-product/src/ProductCache.ts b/libraries/data-product/src/ProductCache.ts\\nindex b550e5d60..d1f01b482 100644\\n--- a/libraries/data-product/src/ProductCache.ts\\n+++ b/libraries/data-product/src/ProductCache.ts\\n@@ -48,0 +49,21 @@ export const createProductCache = (terminal: Terminal, options?: IProductCacheOp\\n+\\n+/**\\n+ * Create a client-side product cache.\\n+ *\\n+ * @public\\n+ */\\n+export const createClientProductCache = (\\n+  terminal: Terminal,\\n+  options?: IProductCacheOptions,\\n+): ICache<IProduct> =>\\n+  createCache<IProduct>(\\n+    async (product_id, _force_update) => {\\n+      // TODO: Add datasource_id\\n+      const [data] = await requestSQL<IProduct[]>(\\n+        terminal,\\n+        `select * from product where product_id=${escapeSQL(product_id)}`,\\n+      );\\n+      return data;\\n+    },\\n+    { expire: options?.expire ?? 3600 * 1000 },\\n+  );\\n\"\n+        },\n+        {\n+          \"additions\": 9,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/data-product/src/QueryProducts.ts\",\n+          \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/libraries/data-product/src/QueryProducts.ts b/libraries/data-product/src/QueryProducts.ts\\nindex a68311bc0..b9bf85f7e 100644\\n--- a/libraries/data-product/src/QueryProducts.ts\\n+++ b/libraries/data-product/src/QueryProducts.ts\\n@@ -102,0 +103,5 @@ export function provideQueryProductsService(\\n+    /**\\n+     * Dispose observable to clean up resources\\n+     * 清理资源的可观察对象\\n+     */\\n+    dispose$?: Observable<void>;\\n@@ -189,0 +195,4 @@ export function provideQueryProductsService(\\n+  options?.dispose$?.subscribe(() => {\\n+    dispose.dispose();\\n+  });\\n+\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"7977a8dcfd10fd424dc9811ff8c4242fa0126591\",\n+      \"short\": \"7977a8dcf\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-03 18:25:56 +0800\",\n+      \"subject\": \"chore: bump version (#2163)\",\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/account-composer/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/account-composer/CHANGELOG.json b/apps/account-composer/CHANGELOG.json\\nindex 40153cb55..2b08a69b3 100644\\n--- a/apps/account-composer/CHANGELOG.json\\n+++ b/apps/account-composer/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.8\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-account-composer_v0.7.8\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/account-composer/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/account-composer/CHANGELOG.md b/apps/account-composer/CHANGELOG.md\\nindex 33dc08f48..fbff5bf45 100644\\n--- a/apps/account-composer/CHANGELOG.md\\n+++ b/apps/account-composer/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.7.8\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/account-composer/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/account-composer/package.json b/apps/account-composer/package.json\\nindex 831ca2d88..bc62e1f62 100644\\n--- a/apps/account-composer/package.json\\n+++ b/apps/account-composer/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.7\\\",\\n+  \\\"version\\\": \\\"0.7.8\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/agent/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/agent/CHANGELOG.json b/apps/agent/CHANGELOG.json\\nindex bc58adbf2..27b8a2f32 100644\\n--- a/apps/agent/CHANGELOG.json\\n+++ b/apps/agent/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.8.20\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-agent_v0.8.20\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/agent\\\\\\\" to `0.13.143`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/kernel\\\\\\\" to `0.15.60`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/agent/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/agent/CHANGELOG.md b/apps/agent/CHANGELOG.md\\nindex ef2b80cf5..7fbddaed7 100644\\n--- a/apps/agent/CHANGELOG.md\\n+++ b/apps/agent/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.8.20\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/agent/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/agent/package.json b/apps/agent/package.json\\nindex ff6167be6..dc8ba55a1 100644\\n--- a/apps/agent/package.json\\n+++ b/apps/agent/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.8.19\\\",\\n+  \\\"version\\\": \\\"0.8.20\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 23,\n+          \"deletions\": 0,\n+          \"path\": \"apps/trade-copier/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/trade-copier/CHANGELOG.json b/apps/trade-copier/CHANGELOG.json\\nindex b4bcda503..71bb9e019 100644\\n--- a/apps/trade-copier/CHANGELOG.json\\n+++ b/apps/trade-copier/CHANGELOG.json\\n@@ -3,0 +4,23 @@\\n+    {\\n+      \\\"version\\\": \\\"0.11.34\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-trade-copier_v0.11.34\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/kernel\\\\\\\" to `0.15.60`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/order\\\\\\\" to `0.3.52`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/trade-copier/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/trade-copier/CHANGELOG.md b/apps/trade-copier/CHANGELOG.md\\nindex c7c770d8e..f86025ef6 100644\\n--- a/apps/trade-copier/CHANGELOG.md\\n+++ b/apps/trade-copier/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.11.34\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/trade-copier/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/trade-copier/package.json b/apps/trade-copier/package.json\\nindex c80b2b4b5..722b8c775 100644\\n--- a/apps/trade-copier/package.json\\n+++ b/apps/trade-copier/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.11.33\\\",\\n+  \\\"version\\\": \\\"0.11.34\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex 46c097837..05ed2ee7a 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.14\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.14\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.2.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex 1bb2e5d84..a9c56cf68 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 07:26:21 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.7.14\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex c1fee6f19..426388e31 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.13\\\",\\n+  \\\"version\\\": \\\"0.7.14\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 25,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\\nindex 3dd7d3e15..9e094ca16 100644\\n--- a/apps/vendor-binance/CHANGELOG.json\\n+++ b/apps/vendor-binance/CHANGELOG.json\\n@@ -3,0 +4,25 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.5\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-binance_v0.10.5\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix listProducts\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.2.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\\nindex c8deac06d..b2b8da48f 100644\\n--- a/apps/vendor-binance/CHANGELOG.md\\n+++ b/apps/vendor-binance/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Tue, 02 Dec 2025 14:00:52 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.10.5\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+### Patches\\n+\\n+- fix listProducts\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\\nindex d2eb73dc0..9f6eed55d 100644\\n--- a/apps/vendor-binance/package.json\\n+++ b/apps/vendor-binance/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.4\\\",\\n+  \\\"version\\\": \\\"0.10.5\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-bitget/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/CHANGELOG.json b/apps/vendor-bitget/CHANGELOG.json\\nindex 50714f78c..242ec1fb9 100644\\n--- a/apps/vendor-bitget/CHANGELOG.json\\n+++ b/apps/vendor-bitget/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.2\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-bitget_v0.10.2\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.2.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/CHANGELOG.md b/apps/vendor-bitget/CHANGELOG.md\\nindex 65b56d9d9..729aef14a 100644\\n--- a/apps/vendor-bitget/CHANGELOG.md\\n+++ b/apps/vendor-bitget/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Tue, 02 Dec 2025 14:00:52 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.10.2\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/package.json b/apps/vendor-bitget/package.json\\nindex a7af21986..c4b693b41 100644\\n--- a/apps/vendor-bitget/package.json\\n+++ b/apps/vendor-bitget/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.1\\\",\\n+  \\\"version\\\": \\\"0.10.2\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-coinex/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-coinex/CHANGELOG.json b/apps/vendor-coinex/CHANGELOG.json\\nindex a12056906..6876db7ea 100644\\n--- a/apps/vendor-coinex/CHANGELOG.json\\n+++ b/apps/vendor-coinex/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.2.44\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-coinex_v0.2.44\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-coinex/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-coinex/CHANGELOG.md b/apps/vendor-coinex/CHANGELOG.md\\nindex 56005ed7d..ea16eff63 100644\\n--- a/apps/vendor-coinex/CHANGELOG.md\\n+++ b/apps/vendor-coinex/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 14:06:21 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.2.44\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-coinex/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-coinex/package.json b/apps/vendor-coinex/package.json\\nindex ac7eb9bce..ab0cd8e29 100644\\n--- a/apps/vendor-coinex/package.json\\n+++ b/apps/vendor-coinex/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.2.43\\\",\\n+  \\\"version\\\": \\\"0.2.44\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-ctp/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-ctp/CHANGELOG.json b/apps/vendor-ctp/CHANGELOG.json\\nindex 8a092592e..a9541dc67 100644\\n--- a/apps/vendor-ctp/CHANGELOG.json\\n+++ b/apps/vendor-ctp/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.33\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-ctp_v0.10.33\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-ctp/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-ctp/CHANGELOG.md b/apps/vendor-ctp/CHANGELOG.md\\nindex 47d144e16..84a6d41a9 100644\\n--- a/apps/vendor-ctp/CHANGELOG.md\\n+++ b/apps/vendor-ctp/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.10.33\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-ctp/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-ctp/package.json b/apps/vendor-ctp/package.json\\nindex 6904dd4e1..9d5bfdea5 100644\\n--- a/apps/vendor-ctp/package.json\\n+++ b/apps/vendor-ctp/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.32\\\",\\n+  \\\"version\\\": \\\"0.10.33\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\\nindex de68df0b6..3ee881c0b 100644\\n--- a/apps/vendor-gate/CHANGELOG.json\\n+++ b/apps/vendor-gate/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.4.13\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-gate_v0.4.13\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.2.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\\nindex 1e1dd1f00..71cf42186 100644\\n--- a/apps/vendor-gate/CHANGELOG.md\\n+++ b/apps/vendor-gate/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Tue, 02 Dec 2025 14:00:52 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.4.13\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\\nindex 9d44a6ed4..f05b4fc6c 100644\\n--- a/apps/vendor-gate/package.json\\n+++ b/apps/vendor-gate/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.12\\\",\\n+  \\\"version\\\": \\\"0.4.13\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 25,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.json b/apps/vendor-huobi/CHANGELOG.json\\nindex bddeecdd4..5acf29285 100644\\n--- a/apps/vendor-huobi/CHANGELOG.json\\n+++ b/apps/vendor-huobi/CHANGELOG.json\\n@@ -3,0 +4,25 @@\\n+    {\\n+      \\\"version\\\": \\\"0.15.5\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-huobi_v0.15.5\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.2.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.md b/apps/vendor-huobi/CHANGELOG.md\\nindex 814ef7a65..0cd3255cc 100644\\n--- a/apps/vendor-huobi/CHANGELOG.md\\n+++ b/apps/vendor-huobi/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Tue, 02 Dec 2025 14:00:52 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.15.5\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+### Patches\\n+\\n+- fix\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/package.json b/apps/vendor-huobi/package.json\\nindex 77f51bf25..8558bdf7a 100644\\n--- a/apps/vendor-huobi/package.json\\n+++ b/apps/vendor-huobi/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.15.4\\\",\\n+  \\\"version\\\": \\\"0.15.5\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.json b/apps/vendor-hyperliquid/CHANGELOG.json\\nindex 03e9e171b..ec2efe9ec 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.json\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.4\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-hyperliquid_v0.7.4\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.2.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.md b/apps/vendor-hyperliquid/CHANGELOG.md\\nindex a78a02fcf..9c606ed67 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.md\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Tue, 02 Dec 2025 14:00:52 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.7.4\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/package.json b/apps/vendor-hyperliquid/package.json\\nindex d06c914c6..564592c97 100644\\n--- a/apps/vendor-hyperliquid/package.json\\n+++ b/apps/vendor-hyperliquid/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.3\\\",\\n+  \\\"version\\\": \\\"0.7.4\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex 86dcbf01f..75b4e0291 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.27.12\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.27.12\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.2.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex 69bb7225b..068d5d585 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Tue, 02 Dec 2025 14:00:52 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.27.12\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 701c10ee9..4186a38f7 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.27.11\\\",\\n+  \\\"version\\\": \\\"0.27.12\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-tq/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-tq/CHANGELOG.json b/apps/vendor-tq/CHANGELOG.json\\nindex 5d414a15a..827733709 100644\\n--- a/apps/vendor-tq/CHANGELOG.json\\n+++ b/apps/vendor-tq/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.4.43\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-tq_v0.4.43\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-tq/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-tq/CHANGELOG.md b/apps/vendor-tq/CHANGELOG.md\\nindex 3119383c6..d31653ea3 100644\\n--- a/apps/vendor-tq/CHANGELOG.md\\n+++ b/apps/vendor-tq/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.4.43\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-tq/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-tq/package.json b/apps/vendor-tq/package.json\\nindex 62461d906..7245c7f66 100644\\n--- a/apps/vendor-tq/package.json\\n+++ b/apps/vendor-tq/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.42\\\",\\n+  \\\"version\\\": \\\"0.4.43\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-trading-view/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-trading-view/CHANGELOG.json b/apps/vendor-trading-view/CHANGELOG.json\\nindex 0a5cda09d..fcf34d8c1 100644\\n--- a/apps/vendor-trading-view/CHANGELOG.json\\n+++ b/apps/vendor-trading-view/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.3.42\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-trading-view_v0.3.42\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-trading-view/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-trading-view/CHANGELOG.md b/apps/vendor-trading-view/CHANGELOG.md\\nindex 3ab7cc1f6..1bbe460cf 100644\\n--- a/apps/vendor-trading-view/CHANGELOG.md\\n+++ b/apps/vendor-trading-view/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.3.42\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-trading-view/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-trading-view/package.json b/apps/vendor-trading-view/package.json\\nindex 8a4f481e0..3a35f3b5a 100644\\n--- a/apps/vendor-trading-view/package.json\\n+++ b/apps/vendor-trading-view/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.3.41\\\",\\n+  \\\"version\\\": \\\"0.3.42\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-turboflow/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/CHANGELOG.json b/apps/vendor-turboflow/CHANGELOG.json\\nindex 20072634c..cee4dcd2f 100644\\n--- a/apps/vendor-turboflow/CHANGELOG.json\\n+++ b/apps/vendor-turboflow/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"1.2.6\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-turboflow_v1.2.6\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.2.1`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-turboflow/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/CHANGELOG.md b/apps/vendor-turboflow/CHANGELOG.md\\nindex aa778fe9f..dccd829f3 100644\\n--- a/apps/vendor-turboflow/CHANGELOG.md\\n+++ b/apps/vendor-turboflow/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Tue, 02 Dec 2025 14:00:52 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 1.2.6\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-turboflow/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/package.json b/apps/vendor-turboflow/package.json\\nindex 1e3365b73..9e8bbdcfb 100644\\n--- a/apps/vendor-turboflow/package.json\\n+++ b/apps/vendor-turboflow/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"1.2.5\\\",\\n+  \\\"version\\\": \\\"1.2.6\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 25,\n+          \"deletions\": 0,\n+          \"path\": \"apps/virtual-exchange/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\\nindex 1d46c18ba..5d20d2923 100644\\n--- a/apps/virtual-exchange/CHANGELOG.json\\n+++ b/apps/virtual-exchange/CHANGELOG.json\\n@@ -3,0 +4,25 @@\\n+    {\\n+      \\\"version\\\": \\\"0.5.0\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-virtual-exchange_v0.5.0\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"minor\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"auto pull all products\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.2.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\\nindex c0144c7f3..bf43a9e3e 100644\\n--- a/apps/virtual-exchange/CHANGELOG.md\\n+++ b/apps/virtual-exchange/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Tue, 02 Dec 2025 14:00:52 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.5.0\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+### Minor changes\\n+\\n+- auto pull all products\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\\nindex bf9abbb4c..60a19d0d9 100644\\n--- a/apps/virtual-exchange/package.json\\n+++ b/apps/virtual-exchange/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.2\\\",\\n+  \\\"version\\\": \\\"0.5.0\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/account-info-resolver/{main_2025-11-29-01-31.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/agent/{main_2025-11-29-01-31.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-account-composer/{main_2025-11-29-01-31.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-agent/{main_2025-11-29-01-31.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-trade-copier/{main_2025-11-29-01-31.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/app-virtual-exchange/2025-12-03-09-06.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-03-09-06.json b/common/changes/@yuants/app-virtual-exchange/2025-12-03-09-06.json\\ndeleted file mode 100644\\nindex 2528df298..000000000\\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-03-09-06.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\",\\n-      \\\"comment\\\": \\\"auto pull all products\\\",\\n-      \\\"type\\\": \\\"minor\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-virtual-exchange/{main_2025-12-02-14-01.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/data-product/2025-12-03-09-06.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/data-product/2025-12-03-09-06.json b/common/changes/@yuants/data-product/2025-12-03-09-06.json\\ndeleted file mode 100644\\nindex 4b040f73d..000000000\\n--- a/common/changes/@yuants/data-product/2025-12-03-09-06.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/data-product\\\",\\n-      \\\"comment\\\": \\\"add clientProductCache\\\",\\n-      \\\"type\\\": \\\"minor\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/data-product\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/data-product/{main_2025-11-29-01-31.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/dist-origin/{main_2025-11-29-01-31.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/exchange/{main_2025-12-02-14-01.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/kernel/{main_2025-11-29-01-31.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/order/{main_2025-11-29-01-31.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-03-07-26.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-03-09-06.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-03-09-06.json b/common/changes/@yuants/vendor-binance/2025-12-03-09-06.json\\ndeleted file mode 100644\\nindex 70ef33a10..000000000\\n--- a/common/changes/@yuants/vendor-binance/2025-12-03-09-06.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n-      \\\"comment\\\": \\\"fix listProducts\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/{main_2025-12-02-14-01.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-bitget/{main_2025-12-02-14-01.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-coinex/{main_2025-11-29-14-06.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-ctp/{main_2025-11-29-01-31.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/{main_2025-12-02-14-01.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/2025-12-03-10-17.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-huobi/2025-12-03-10-17.json b/common/changes/@yuants/vendor-huobi/2025-12-03-10-17.json\\ndeleted file mode 100644\\nindex 1f75bc9ea..000000000\\n--- a/common/changes/@yuants/vendor-huobi/2025-12-03-10-17.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\",\\n-      \\\"comment\\\": \\\"fix\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-huobi\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/{main_2025-12-02-14-01.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/{main_2025-12-02-14-01.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-02-14-01.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-tq/{main_2025-11-29-01-31.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-trading-view/{main_2025-11-29-01-31.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-turboflow/{main_2025-12-02-14-01.json => main_2025-12-03-10-25.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"distributions/origin/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/distributions/origin/CHANGELOG.json b/distributions/origin/CHANGELOG.json\\nindex 13658bbdc..0f413af87 100644\\n--- a/distributions/origin/CHANGELOG.json\\n+++ b/distributions/origin/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.1.119\\\",\\n+      \\\"tag\\\": \\\"@yuants/dist-origin_v0.1.119\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/agent\\\\\\\" to `0.13.143`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"distributions/origin/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/distributions/origin/CHANGELOG.md b/distributions/origin/CHANGELOG.md\\nindex 02505f17d..670325d9d 100644\\n--- a/distributions/origin/CHANGELOG.md\\n+++ b/distributions/origin/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.1.119\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"distributions/origin/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/distributions/origin/package.json b/distributions/origin/package.json\\nindex a7a9bd8a6..c1f79f220 100644\\n--- a/distributions/origin/package.json\\n+++ b/distributions/origin/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.1.118\\\",\\n+  \\\"version\\\": \\\"0.1.119\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/account-info-resolver/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/account-info-resolver/CHANGELOG.json b/libraries/account-info-resolver/CHANGELOG.json\\nindex 5e5c0fc37..4fede2857 100644\\n--- a/libraries/account-info-resolver/CHANGELOG.json\\n+++ b/libraries/account-info-resolver/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.2.77\\\",\\n+      \\\"tag\\\": \\\"@yuants/account-info-resolver_v0.2.77\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/account-info-resolver/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/account-info-resolver/CHANGELOG.md b/libraries/account-info-resolver/CHANGELOG.md\\nindex d03aa3614..e767cf983 100644\\n--- a/libraries/account-info-resolver/CHANGELOG.md\\n+++ b/libraries/account-info-resolver/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.2.77\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/account-info-resolver/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/account-info-resolver/package.json b/libraries/account-info-resolver/package.json\\nindex bde286dd2..6a5c10362 100644\\n--- a/libraries/account-info-resolver/package.json\\n+++ b/libraries/account-info-resolver/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.2.76\\\",\\n+  \\\"version\\\": \\\"0.2.77\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 20,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/agent/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/agent/CHANGELOG.json b/libraries/agent/CHANGELOG.json\\nindex fc80b44aa..53a58a13d 100644\\n--- a/libraries/agent/CHANGELOG.json\\n+++ b/libraries/agent/CHANGELOG.json\\n@@ -3,0 +4,20 @@\\n+    {\\n+      \\\"version\\\": \\\"0.13.143\\\",\\n+      \\\"tag\\\": \\\"@yuants/agent_v0.13.143\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          },\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/kernel\\\\\\\" to `0.15.60`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/agent/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/agent/CHANGELOG.md b/libraries/agent/CHANGELOG.md\\nindex e331b3d52..1ed9da9e0 100644\\n--- a/libraries/agent/CHANGELOG.md\\n+++ b/libraries/agent/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.13.143\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/agent/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/agent/package.json b/libraries/agent/package.json\\nindex 2bdf52234..5ed7669fa 100644\\n--- a/libraries/agent/package.json\\n+++ b/libraries/agent/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.13.142\\\",\\n+  \\\"version\\\": \\\"0.13.143\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/data-product/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/data-product/CHANGELOG.json b/libraries/data-product/CHANGELOG.json\\nindex e3e4cf939..bcda06f72 100644\\n--- a/libraries/data-product/CHANGELOG.json\\n+++ b/libraries/data-product/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.5.0\\\",\\n+      \\\"tag\\\": \\\"@yuants/data-product_v0.5.0\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"minor\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"add clientProductCache\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/data-product/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/data-product/CHANGELOG.md b/libraries/data-product/CHANGELOG.md\\nindex 54d090239..6086e6615 100644\\n--- a/libraries/data-product/CHANGELOG.md\\n+++ b/libraries/data-product/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.5.0\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+### Minor changes\\n+\\n+- add clientProductCache\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/data-product/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/data-product/package.json b/libraries/data-product/package.json\\nindex 724d9edc6..936a65540 100644\\n--- a/libraries/data-product/package.json\\n+++ b/libraries/data-product/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.21\\\",\\n+  \\\"version\\\": \\\"0.5.0\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/exchange/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/exchange/CHANGELOG.json b/libraries/exchange/CHANGELOG.json\\nindex 11d7f884e..354a22e9c 100644\\n--- a/libraries/exchange/CHANGELOG.json\\n+++ b/libraries/exchange/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.2.1\\\",\\n+      \\\"tag\\\": \\\"@yuants/exchange_v0.2.1\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/exchange/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/exchange/CHANGELOG.md b/libraries/exchange/CHANGELOG.md\\nindex 2ff664435..cdf530eeb 100644\\n--- a/libraries/exchange/CHANGELOG.md\\n+++ b/libraries/exchange/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Tue, 02 Dec 2025 14:00:52 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.2.1\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/exchange/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/exchange/package.json b/libraries/exchange/package.json\\nindex 518c90b44..83f64ad0f 100644\\n--- a/libraries/exchange/package.json\\n+++ b/libraries/exchange/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.2.0\\\",\\n+  \\\"version\\\": \\\"0.2.1\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/kernel/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/kernel/CHANGELOG.json b/libraries/kernel/CHANGELOG.json\\nindex a43e36d58..44f7da043 100644\\n--- a/libraries/kernel/CHANGELOG.json\\n+++ b/libraries/kernel/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.15.60\\\",\\n+      \\\"tag\\\": \\\"@yuants/kernel_v0.15.60\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/kernel/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/kernel/CHANGELOG.md b/libraries/kernel/CHANGELOG.md\\nindex e68489f62..f2a8d4e9e 100644\\n--- a/libraries/kernel/CHANGELOG.md\\n+++ b/libraries/kernel/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.15.60\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/kernel/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/kernel/package.json b/libraries/kernel/package.json\\nindex 2734a80f2..417614c8e 100644\\n--- a/libraries/kernel/package.json\\n+++ b/libraries/kernel/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.15.59\\\",\\n+  \\\"version\\\": \\\"0.15.60\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/order/CHANGELOG.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/order/CHANGELOG.json b/libraries/order/CHANGELOG.json\\nindex 856563896..f80720f78 100644\\n--- a/libraries/order/CHANGELOG.json\\n+++ b/libraries/order/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.3.52\\\",\\n+      \\\"tag\\\": \\\"@yuants/order_v0.3.52\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 10:25:12 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/data-product\\\\\\\" to `0.5.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/order/CHANGELOG.md\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/order/CHANGELOG.md b/libraries/order/CHANGELOG.md\\nindex 85ebe0978..0c2870cfd 100644\\n--- a/libraries/order/CHANGELOG.md\\n+++ b/libraries/order/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Sat, 29 Nov 2025 01:30:37 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+\\n+## 0.3.52\\n+Wed, 03 Dec 2025 10:25:12 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/order/package.json\",\n+          \"patch\": \"commit 7977a8dcfd10fd424dc9811ff8c4242fa0126591\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 18:25:56 2025 +0800\\n\\n    chore: bump version (#2163)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/order/package.json b/libraries/order/package.json\\nindex b66abacaf..add109887 100644\\n--- a/libraries/order/package.json\\n+++ b/libraries/order/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.3.51\\\",\\n+  \\\"version\\\": \\\"0.3.52\\\",\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"7eb5263f73aed52d3d0b8e5c77b7214d05ed72d9\",\n+      \"short\": \"7eb5263f7\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-03 19:07:44 +0800\",\n+      \"subject\": \"fix: binance spot positon (#2164)\",\n+      \"files\": [\n+        {\n+          \"additions\": 60,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/src/api/private-api.ts\",\n+          \"patch\": \"commit 7eb5263f73aed52d3d0b8e5c77b7214d05ed72d9\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:07:44 2025 +0800\\n\\n    fix: binance spot positon (#2164)\\n\\ndiff --git a/apps/vendor-binance/src/api/private-api.ts b/apps/vendor-binance/src/api/private-api.ts\\nindex e7643bd48..982c1902b 100644\\n--- a/apps/vendor-binance/src/api/private-api.ts\\n+++ b/apps/vendor-binance/src/api/private-api.ts\\n@@ -796,0 +797,60 @@ export const getMarginInterestRateHistory = (params: {\\n+\\n+/**\\n+ *获取用户持仓\\n+ * @param credential\\n+ *  https://developers.binance.com/docs/zh-CN/wallet/asset/user-assets#%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0\\n+ * @param params\\n+ * @returns\\n+ */\\n+export const getUserAsset = (\\n+  credential: ICredential,\\n+  params: {\\n+    timestamp: number;\\n+    asset?: string;\\n+    needBtcValuation?: boolean;\\n+    recvWindow?: number;\\n+  },\\n+) => {\\n+  return requestPrivate<\\n+    | {\\n+        asset: string;\\n+        free: string;\\n+        locked: string;\\n+        freeze: string;\\n+        withdrawing: string;\\n+        ipoable: string;\\n+        btcValuation: string;\\n+      }[]\\n+    | IApiError\\n+  >(credential, 'POST', 'https://api.binance.com/sapi/v3/asset/getUserAsset', params);\\n+};\\n+\\n+/**\\n+ * 查询资金账户\\n+ * @param credential\\n+ * https://developers.binance.com/docs/zh-CN/wallet/asset/funding-wallet?utm_source=chatgpt.com\\n+ * @param params\\n+ * @returns\\n+ */\\n+export const getFundingAsset = (\\n+  credential: ICredential,\\n+  params: {\\n+    timestamp: number;\\n+    asset?: string;\\n+    needBtcValuation?: boolean;\\n+    recvWindow?: number;\\n+  },\\n+) => {\\n+  return requestPrivate<\\n+    | {\\n+        asset: string;\\n+        free: string;\\n+        locked: string;\\n+        freeze: string;\\n+        withdrawing: string;\\n+        ipoable: string;\\n+        btcValuation: string;\\n+      }[]\\n+    | IApiError\\n+  >(credential, 'POST', 'https://api.binance.com/sapi/v1/asset/get-funding-asset', params);\\n+};\\n\"\n+        },\n+        {\n+          \"additions\": 30,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/src/api/public-api.ts\",\n+          \"patch\": \"commit 7eb5263f73aed52d3d0b8e5c77b7214d05ed72d9\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:07:44 2025 +0800\\n\\n    fix: binance spot positon (#2164)\\n\\ndiff --git a/apps/vendor-binance/src/api/public-api.ts b/apps/vendor-binance/src/api/public-api.ts\\nindex 7ff3b6551..07546b44b 100644\\n--- a/apps/vendor-binance/src/api/public-api.ts\\n+++ b/apps/vendor-binance/src/api/public-api.ts\\n@@ -217,0 +218,30 @@ export const getSpotExchangeInfo = (): Promise<ISpotExchangeInfo> =>\\n+\\n+/**\\n+ * 获取当前现货报价\\n+ *\\n+ *https://developers.binance.com/docs/zh-CN/binance-spot-api-docs/rest-api/market-data-endpoints#%E6%9C%80%E6%96%B0%E4%BB%B7%E6%A0%BC%E6%8E%A5%E5%8F%A3\\n+ */\\n+export const getSpotTickerPrice = (params?: {\\n+  symbol?: string;\\n+  symbols?: string;\\n+  symbolStatus?: 'TRADING' | 'HALT' | 'BREAK';\\n+}): Promise<\\n+  | {\\n+      symbol: string;\\n+      price: string;\\n+    }\\n+  | {\\n+      symbol: string;\\n+      price: string;\\n+    }[]\\n+> =>\\n+  requestPublic<\\n+    | {\\n+        symbol: string;\\n+        price: string;\\n+      }\\n+    | {\\n+        symbol: string;\\n+        price: string;\\n+      }[]\\n+  >('GET', 'https://api.binance.com/api/v3/ticker/price', params);\\n\"\n+        },\n+        {\n+          \"additions\": 38,\n+          \"deletions\": 5,\n+          \"path\": \"apps/vendor-binance/src/services/accounts/spot.ts\",\n+          \"patch\": \"commit 7eb5263f73aed52d3d0b8e5c77b7214d05ed72d9\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:07:44 2025 +0800\\n\\n    fix: binance spot positon (#2164)\\n\\ndiff --git a/apps/vendor-binance/src/services/accounts/spot.ts b/apps/vendor-binance/src/services/accounts/spot.ts\\nindex 144315335..4e16f01b1 100644\\n--- a/apps/vendor-binance/src/services/accounts/spot.ts\\n+++ b/apps/vendor-binance/src/services/accounts/spot.ts\\n@@ -4 +4,2 @@ import { isApiError } from '../../api/client';\\n-import { getSpotAccountInfo, ICredential } from '../../api/private-api';\\n+import { getFundingAsset, getSpotAccountInfo, ICredential } from '../../api/private-api';\\n+import { getSpotTickerPrice } from '../../api/public-api';\\n@@ -7 +8,7 @@ export const getSpotAccountInfoSnapshot = async (credential: ICredential): Promi\\n-  const res = await getSpotAccountInfo(credential, { omitZeroBalances: true });\\n+  const [res, fundingAsset] = await Promise.all([\\n+    getSpotAccountInfo(credential, { omitZeroBalances: true }),\\n+    getFundingAsset(credential, {\\n+      timestamp: Date.now(),\\n+    }),\\n+  ]);\\n+\\n@@ -11 +18,23 @@ export const getSpotAccountInfoSnapshot = async (credential: ICredential): Promi\\n-  const positions = res.balances\\n+  if (isApiError(fundingAsset)) {\\n+    throw new Error(fundingAsset.msg);\\n+  }\\n+\\n+  const prices = await getSpotTickerPrice({\\n+    symbols: JSON.stringify([\\n+      ...new Set([\\n+        ...res.balances\\n+          .map((balance) => {\\n+            const match = balance.asset.match(/^LD(\\\\w+)$/);\\n+            let symbol = balance.asset;\\n+            if (match) {\\n+              symbol = match[1];\\n+            }\\n+            if (symbol === 'USDT') return '';\\n+            return `${symbol}USDT`;\\n+          })\\n+          .filter(Boolean),\\n+        ...fundingAsset.map((item) => `${item.asset}USDT`),\\n+      ]),\\n+    ]),\\n+  });\\n+  const positions = [...res.balances, ...fundingAsset]\\n@@ -18 +47 @@ export const getSpotAccountInfoSnapshot = async (credential: ICredential): Promi\\n-        product_id: encodePath('BINANCE', 'SPOT', `${balance.asset}USDT`),\\n+        product_id: encodePath('BINANCE', 'SPOT', `${balance.asset}`),\\n@@ -21 +50,5 @@ export const getSpotAccountInfoSnapshot = async (credential: ICredential): Promi\\n-        closable_price: 0, // TODO: fetch price later\\n+        closable_price: Array.isArray(prices)\\n+          ? +(prices.find((item) => item.symbol === `${balance.asset}USDT`)?.price ?? 0)\\n+          : balance.asset === 'USDT'\\n+          ? 1\\n+          : 0,\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-03-11-05.json\",\n+          \"patch\": \"commit 7eb5263f73aed52d3d0b8e5c77b7214d05ed72d9\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:07:44 2025 +0800\\n\\n    fix: binance spot positon (#2164)\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-03-11-05.json b/common/changes/@yuants/vendor-binance/2025-12-03-11-05.json\\nnew file mode 100644\\nindex 000000000..72d4eecb1\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-binance/2025-12-03-11-05.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n+      \\\"comment\\\": \\\"fix binance spot position\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"3cc1e07a91ae983addfd73cf9036a951f00d3148\",\n+      \"short\": \"3cc1e07a9\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-03 19:57:15 +0800\",\n+      \"subject\": \"Ryan fix bi pox x (#2166)\",\n+      \"files\": [\n+        {\n+          \"additions\": 7,\n+          \"deletions\": 5,\n+          \"path\": \"apps/vendor-binance/src/services/accounts/spot.ts\",\n+          \"patch\": \"commit 3cc1e07a91ae983addfd73cf9036a951f00d3148\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:57:15 2025 +0800\\n\\n    Ryan fix bi pox x (#2166)\\n    \\n    * feat: fix bi po\\n    \\n    * feat: fix bi po\\n\\ndiff --git a/apps/vendor-binance/src/services/accounts/spot.ts b/apps/vendor-binance/src/services/accounts/spot.ts\\nindex 4e16f01b1..7561d3054 100644\\n--- a/apps/vendor-binance/src/services/accounts/spot.ts\\n+++ b/apps/vendor-binance/src/services/accounts/spot.ts\\n@@ -39,0 +40 @@ export const getSpotAccountInfoSnapshot = async (credential: ICredential): Promi\\n+\\n@@ -50,5 +51,6 @@ export const getSpotAccountInfoSnapshot = async (credential: ICredential): Promi\\n-        closable_price: Array.isArray(prices)\\n-          ? +(prices.find((item) => item.symbol === `${balance.asset}USDT`)?.price ?? 0)\\n-          : balance.asset === 'USDT'\\n-          ? 1\\n-          : 0,\\n+        closable_price:\\n+          balance.asset === 'USDT'\\n+            ? 1\\n+            : Array.isArray(prices)\\n+            ? +(prices.find((item) => item.symbol === `${balance.asset}USDT`)?.price ?? 0)\\n+            : 0,\\n\"\n+        },\n+        {\n+          \"additions\": 35,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-binance/src/services/accounts/unified.ts\",\n+          \"patch\": \"commit 3cc1e07a91ae983addfd73cf9036a951f00d3148\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:57:15 2025 +0800\\n\\n    Ryan fix bi pox x (#2166)\\n    \\n    * feat: fix bi po\\n    \\n    * feat: fix bi po\\n\\ndiff --git a/apps/vendor-binance/src/services/accounts/unified.ts b/apps/vendor-binance/src/services/accounts/unified.ts\\nindex 1a6aea6b9..4bb4de290 100644\\n--- a/apps/vendor-binance/src/services/accounts/unified.ts\\n+++ b/apps/vendor-binance/src/services/accounts/unified.ts\\n@@ -1 +1 @@\\n-import { IPosition } from '@yuants/data-account';\\n+import { IPosition, makeSpotPosition } from '@yuants/data-account';\\n@@ -4,0 +5 @@ import { getUnifiedAccountBalance, getUnifiedUmAccount, ICredential } from '../.\\n+import { getSpotTickerPrice } from '../../api/public-api';\\n@@ -43 +44,33 @@ export const getUnifiedAccountInfo = async (credential: ICredential): Promise<IP\\n-  return positions;\\n+  const prices = await getSpotTickerPrice({\\n+    symbols: JSON.stringify([\\n+      ...new Set([\\n+        ...balanceRes\\n+          .map((balance) => {\\n+            const match = balance.asset.match(/^LD(\\\\w+)$/);\\n+            let symbol = balance.asset;\\n+            if (match) {\\n+              symbol = match[1];\\n+            }\\n+            if (symbol === 'USDT') return '';\\n+            return `${symbol}USDT`;\\n+          })\\n+          .filter(Boolean),\\n+      ]),\\n+    ]),\\n+  });\\n+  const balancePositions: IPosition[] = balanceRes.map((position) =>\\n+    makeSpotPosition({\\n+      position_id: `UNIFIED-SPOT/${position.asset}`,\\n+      datasource_id: 'BINANCE',\\n+      product_id: encodePath('BINANCE', 'UNIFIED-SPOT', position.asset),\\n+      volume: +position.totalWalletBalance + +position.umUnrealizedPNL,\\n+      free_volume: +position.crossMarginFree,\\n+      closable_price:\\n+        position.asset === 'USDT'\\n+          ? 1\\n+          : Array.isArray(prices)\\n+          ? +(prices.find((item) => item.symbol === `${position.asset}USDT`)?.price ?? 0)\\n+          : 0,\\n+    }),\\n+  );\\n+  return [...balancePositions, ...positions];\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-03-11-55.json\",\n+          \"patch\": \"commit 3cc1e07a91ae983addfd73cf9036a951f00d3148\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:57:15 2025 +0800\\n\\n    Ryan fix bi pox x (#2166)\\n    \\n    * feat: fix bi po\\n    \\n    * feat: fix bi po\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-03-11-55.json b/common/changes/@yuants/vendor-binance/2025-12-03-11-55.json\\nnew file mode 100644\\nindex 000000000..51b5a591e\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-binance/2025-12-03-11-55.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n+      \\\"comment\\\": \\\"fix binance position\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"3c449975366b241d5699220c818374d97237e3f8\",\n+      \"short\": \"3c4499753\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-03 20:42:47 +0800\",\n+      \"subject\": \"chore: bump version (#2165)\",\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.json\",\n+          \"patch\": \"commit 3c449975366b241d5699220c818374d97237e3f8\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 20:42:47 2025 +0800\\n\\n    chore: bump version (#2165)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\\nindex 9e094ca16..e210aa451 100644\\n--- a/apps/vendor-binance/CHANGELOG.json\\n+++ b/apps/vendor-binance/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.6\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-binance_v0.10.6\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 11:08:33 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix binance spot position\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.md\",\n+          \"patch\": \"commit 3c449975366b241d5699220c818374d97237e3f8\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 20:42:47 2025 +0800\\n\\n    chore: bump version (#2165)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\\nindex b2b8da48f..8eecd8027 100644\\n--- a/apps/vendor-binance/CHANGELOG.md\\n+++ b/apps/vendor-binance/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 11:08:33 GMT and should not be manually modified.\\n+\\n+## 0.10.6\\n+Wed, 03 Dec 2025 11:08:33 GMT\\n+\\n+### Patches\\n+\\n+- fix binance spot position\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/package.json\",\n+          \"patch\": \"commit 3c449975366b241d5699220c818374d97237e3f8\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 20:42:47 2025 +0800\\n\\n    chore: bump version (#2165)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\\nindex 9f6eed55d..e86c0d119 100644\\n--- a/apps/vendor-binance/package.json\\n+++ b/apps/vendor-binance/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.5\\\",\\n+  \\\"version\\\": \\\"0.10.6\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-03-11-05.json\",\n+          \"patch\": \"commit 3c449975366b241d5699220c818374d97237e3f8\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 20:42:47 2025 +0800\\n\\n    chore: bump version (#2165)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-03-11-05.json b/common/changes/@yuants/vendor-binance/2025-12-03-11-05.json\\ndeleted file mode 100644\\nindex 72d4eecb1..000000000\\n--- a/common/changes/@yuants/vendor-binance/2025-12-03-11-05.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n-      \\\"comment\\\": \\\"fix binance spot position\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/{main_2025-12-03-10-25.json => main_2025-12-03-11-08.json}\",\n+          \"patch\": \"\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"8f17a0cbd4ee9e4270bbb74a4c81061a74101692\",\n+      \"short\": \"8f17a0cbd\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-03 20:47:39 +0800\",\n+      \"subject\": \"fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167)\",\n+      \"files\": [\n+        {\n+          \"additions\": 15,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/SESSION_NOTES.md\",\n+          \"patch\": \"commit 8f17a0cbd4ee9e4270bbb74a4c81061a74101692\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 20:47:39 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167)\\n\\ndiff --git a/apps/vendor-hyperliquid/SESSION_NOTES.md b/apps/vendor-hyperliquid/SESSION_NOTES.md\\nindex a85524da3..41a8a3b98 100644\\n--- a/apps/vendor-hyperliquid/SESSION_NOTES.md\\n+++ b/apps/vendor-hyperliquid/SESSION_NOTES.md\\n@@ -186,0 +187,15 @@\\n+### 2025-12-03 — Codex Agent\\n+\\n+- **本轮摘要**：\\n+  - 为 perp 账户补充 USDC 余额，使用清算所 `marginSummary.accountValue - Σ(unrealizedPnl)` 作为现金余额生成 `PERPETUAL-ASSET` 头寸（避免被当作永续品种），修复 equity 缺失现金的问题。\\n+  - Spot 账户估值改为使用 `allMids` 当前价格折算为 USDC，浮盈与估值同步更新。\\n+  - 修复 API 返回 null 时的健壮性：spot 余额与 open orders 为空时不再抛异常。\\n+- **修改的文件**：\\n+  - `apps/vendor-hyperliquid/src/services/accounts/perp.ts`（新增 USDC 资产头寸，过滤 USD/USDC 不再标记为永续）\\n+  - `apps/vendor-hyperliquid/src/services/accounts/spot.ts`（引入 allMids 现价折算，填充估值/浮盈）\\n+  - `apps/vendor-hyperliquid/src/services/orders/listOrders.ts`（空列表兼容）\\n+  - `apps/vendor-hyperliquid/src/services/exchange.ts`（支持按 product_id 查询 `PERPETUAL-ASSET` 头寸）\\n+- **运行的测试 / 检查**：\\n+  - 命令：`npx tsc --noEmit --project apps/vendor-hyperliquid/tsconfig.json`\\n+  - 结果：Passed\\n+\\n\"\n+        },\n+        {\n+          \"additions\": 24,\n+          \"deletions\": 5,\n+          \"path\": \"apps/vendor-hyperliquid/src/services/accounts/perp.ts\",\n+          \"patch\": \"commit 8f17a0cbd4ee9e4270bbb74a4c81061a74101692\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 20:47:39 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/accounts/perp.ts b/apps/vendor-hyperliquid/src/services/accounts/perp.ts\\nindex 6cce53490..2be6376de 100644\\n--- a/apps/vendor-hyperliquid/src/services/accounts/perp.ts\\n+++ b/apps/vendor-hyperliquid/src/services/accounts/perp.ts\\n@@ -1 +1 @@\\n-import { IPosition } from '@yuants/data-account';\\n+import { IPosition, makeSpotPosition } from '@yuants/data-account';\\n@@ -10 +10 @@ export const getPerpPositions = async (credential: ICredential) => {\\n-  console.info(`[${formatTime(Date.now())}] Getting perp account info for ${credential.address}`);\\n+  console.info(formatTime(Date.now()), `Getting perp account info for ${credential.address}`);\\n@@ -14,2 +14 @@ export const getPerpPositions = async (credential: ICredential) => {\\n-  // Map positions\\n-  const positions = summary.assetPositions.map(\\n+  const perpPositions = summary.assetPositions.map(\\n@@ -31 +30,21 @@ export const getPerpPositions = async (credential: ICredential) => {\\n-  return positions;\\n+  const totalUnrealizedPnl = summary.assetPositions.reduce(\\n+    (acc, assetPosition) => acc + Number(assetPosition.position.unrealizedPnl || 0),\\n+    0,\\n+  );\\n+  const accountValue = Number(summary.marginSummary?.accountValue ?? 0);\\n+  const usdcBalance = accountValue - totalUnrealizedPnl;\\n+  const usdcPositions =\\n+    usdcBalance > 0\\n+      ? [\\n+          makeSpotPosition({\\n+            position_id: 'USDC',\\n+            datasource_id: 'HYPERLIQUID',\\n+            product_id: encodePath('HYPERLIQUID', 'PERPETUAL-ASSET', 'USDC'),\\n+            volume: usdcBalance,\\n+            free_volume: usdcBalance,\\n+            closable_price: 1,\\n+          }),\\n+        ]\\n+      : [];\\n+\\n+  return [...usdcPositions, ...perpPositions];\\n\"\n+        },\n+        {\n+          \"additions\": 7,\n+          \"deletions\": 4,\n+          \"path\": \"apps/vendor-hyperliquid/src/services/accounts/spot.ts\",\n+          \"patch\": \"commit 8f17a0cbd4ee9e4270bbb74a4c81061a74101692\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 20:47:39 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/accounts/spot.ts b/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\nindex 426b61925..cee336c2e 100644\\n--- a/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\n+++ b/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\n@@ -3 +3 @@ import { encodePath, formatTime } from '@yuants/utils';\\n-import { getUserTokenBalances } from '../../api/public-api';\\n+import { getAllMids, getUserTokenBalances } from '../../api/public-api';\\n@@ -10 +10 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-  console.info(`[${formatTime(Date.now())}] Getting spot account info for ${credential.address}`);\\n+  console.info(formatTime(Date.now()), `Getting spot account info for ${credential.address}`);\\n@@ -12 +12,4 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-  const balances = await getUserTokenBalances({ user: credential.address });\\n+  const [balances, mids] = await Promise.all([\\n+    getUserTokenBalances({ user: credential.address }),\\n+    getAllMids(),\\n+  ]);\\n@@ -25 +28 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-          closable_price: 1,\\n+          closable_price: balance.coin === 'USDC' ? 1 : Number(mids?.[balance.coin] ?? 0),\\n\"\n+        },\n+        {\n+          \"additions\": 4,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/src/services/exchange.ts\",\n+          \"patch\": \"commit 8f17a0cbd4ee9e4270bbb74a4c81061a74101692\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 20:47:39 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/exchange.ts b/apps/vendor-hyperliquid/src/services/exchange.ts\\nindex bc70307f4..e36dcefff 100644\\n--- a/apps/vendor-hyperliquid/src/services/exchange.ts\\n+++ b/apps/vendor-hyperliquid/src/services/exchange.ts\\n@@ -60,0 +61,4 @@ provideExchangeServices<ICredential>(terminal, {\\n+    if (instType === 'PERPETUAL-ASSET') {\\n+      const perpPositions = await getPerpPositions(credential);\\n+      return perpPositions.filter((position) => position.product_id === product_id);\\n+    }\\n\"\n+        },\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/src/services/orders/listOrders.ts\",\n+          \"patch\": \"commit 8f17a0cbd4ee9e4270bbb74a4c81061a74101692\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 20:47:39 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/orders/listOrders.ts b/apps/vendor-hyperliquid/src/services/orders/listOrders.ts\\nindex 15c8961a2..9ffd16181 100644\\n--- a/apps/vendor-hyperliquid/src/services/orders/listOrders.ts\\n+++ b/apps/vendor-hyperliquid/src/services/orders/listOrders.ts\\n@@ -51,0 +52,3 @@ export const listPerpOrders = async (credential: ICredential): Promise<IOrder[]>\\n+    if (!orders || !Array.isArray(orders)) {\\n+      return [];\\n+    }\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-03-12-38.json\",\n+          \"patch\": \"commit 8f17a0cbd4ee9e4270bbb74a4c81061a74101692\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 20:47:39 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167)\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-03-12-38.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-03-12-38.json\\nnew file mode 100644\\nindex 000000000..ed01d4f2d\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-hyperliquid/2025-12-03-12-38.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n+      \\\"comment\\\": \\\"更新账户信息处理，增加USDC头寸支持及API健壮性改进\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"ebf343d01c6d7c7edc032dba59baf3d219670361\",\n+      \"short\": \"ebf343d01\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-03 20:57:35 +0800\",\n+      \"subject\": \"chore: bump version (#2168)\",\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.json\",\n+          \"patch\": \"commit ebf343d01c6d7c7edc032dba59baf3d219670361\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 20:57:35 2025 +0800\\n\\n    chore: bump version (#2168)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\\nindex e210aa451..1724ac9c1 100644\\n--- a/apps/vendor-binance/CHANGELOG.json\\n+++ b/apps/vendor-binance/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.7\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-binance_v0.10.7\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 12:57:13 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix binance position\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.md\",\n+          \"patch\": \"commit ebf343d01c6d7c7edc032dba59baf3d219670361\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 20:57:35 2025 +0800\\n\\n    chore: bump version (#2168)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\\nindex 8eecd8027..989cf0999 100644\\n--- a/apps/vendor-binance/CHANGELOG.md\\n+++ b/apps/vendor-binance/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 11:08:33 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 12:57:13 GMT and should not be manually modified.\\n+\\n+## 0.10.7\\n+Wed, 03 Dec 2025 12:57:13 GMT\\n+\\n+### Patches\\n+\\n+- fix binance position\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/package.json\",\n+          \"patch\": \"commit ebf343d01c6d7c7edc032dba59baf3d219670361\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 20:57:35 2025 +0800\\n\\n    chore: bump version (#2168)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\\nindex e86c0d119..794b2a173 100644\\n--- a/apps/vendor-binance/package.json\\n+++ b/apps/vendor-binance/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.6\\\",\\n+  \\\"version\\\": \\\"0.10.7\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.json\",\n+          \"patch\": \"commit ebf343d01c6d7c7edc032dba59baf3d219670361\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 20:57:35 2025 +0800\\n\\n    chore: bump version (#2168)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.json b/apps/vendor-hyperliquid/CHANGELOG.json\\nindex ec2efe9ec..43a26674c 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.json\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.5\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-hyperliquid_v0.7.5\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 12:57:13 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"更新账户信息处理，增加USDC头寸支持及API健壮性改进\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.md\",\n+          \"patch\": \"commit ebf343d01c6d7c7edc032dba59baf3d219670361\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 20:57:35 2025 +0800\\n\\n    chore: bump version (#2168)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.md b/apps/vendor-hyperliquid/CHANGELOG.md\\nindex 9c606ed67..328f8c5ff 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.md\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 12:57:13 GMT and should not be manually modified.\\n+\\n+## 0.7.5\\n+Wed, 03 Dec 2025 12:57:13 GMT\\n+\\n+### Patches\\n+\\n+- 更新账户信息处理，增加USDC头寸支持及API健壮性改进\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/package.json\",\n+          \"patch\": \"commit ebf343d01c6d7c7edc032dba59baf3d219670361\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 20:57:35 2025 +0800\\n\\n    chore: bump version (#2168)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/package.json b/apps/vendor-hyperliquid/package.json\\nindex 564592c97..39034ada5 100644\\n--- a/apps/vendor-hyperliquid/package.json\\n+++ b/apps/vendor-hyperliquid/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.4\\\",\\n+  \\\"version\\\": \\\"0.7.5\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-binance/2025-12-03-11-55.json\",\n+          \"patch\": \"commit ebf343d01c6d7c7edc032dba59baf3d219670361\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 20:57:35 2025 +0800\\n\\n    chore: bump version (#2168)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-03-11-55.json b/common/changes/@yuants/vendor-binance/2025-12-03-11-55.json\\ndeleted file mode 100644\\nindex 51b5a591e..000000000\\n--- a/common/changes/@yuants/vendor-binance/2025-12-03-11-55.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n-      \\\"comment\\\": \\\"fix binance position\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/{main_2025-12-03-11-08.json => main_2025-12-03-12-57.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-03-12-38.json\",\n+          \"patch\": \"commit ebf343d01c6d7c7edc032dba59baf3d219670361\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 20:57:35 2025 +0800\\n\\n    chore: bump version (#2168)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-03-12-38.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-03-12-38.json\\ndeleted file mode 100644\\nindex ed01d4f2d..000000000\\n--- a/common/changes/@yuants/vendor-hyperliquid/2025-12-03-12-38.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n-      \\\"comment\\\": \\\"更新账户信息处理，增加USDC头寸支持及API健壮性改进\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/{main_2025-12-03-10-25.json => main_2025-12-03-12-57.json}\",\n+          \"patch\": \"\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"17bf37f7daa6edb1371f9057ffed3f52b3570b60\",\n+      \"short\": \"17bf37f7d\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-03 21:03:37 +0800\",\n+      \"subject\": \"refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\",\n+      \"files\": [\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 28,\n+          \"path\": \"apps/vendor-aster/src/services/accounts/perp.ts\",\n+          \"patch\": \"commit 17bf37f7daa6edb1371f9057ffed3f52b3570b60\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 21:03:37 2025 +0800\\n\\n    refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\\n\\ndiff --git a/apps/vendor-aster/src/services/accounts/perp.ts b/apps/vendor-aster/src/services/accounts/perp.ts\\ndeleted file mode 100644\\nindex 4bdb41564..000000000\\n--- a/apps/vendor-aster/src/services/accounts/perp.ts\\n+++ /dev/null\\n@@ -1,28 +0,0 @@\\n-import { IPosition } from '@yuants/data-account';\\n-import { encodePath } from '@yuants/utils';\\n-import { getFApiV4Account, ICredential } from '../../api/private-api';\\n-\\n-export const getPerpAccountInfo = async (credential: ICredential) => {\\n-  const [a] = await Promise.all([getFApiV4Account(credential, {})]);\\n-\\n-  const equity = +a.totalWalletBalance + +a.totalUnrealizedProfit;\\n-  const free = +a.availableBalance;\\n-\\n-  const positions = a.positions\\n-    .filter((p) => +p.positionAmt !== 0)\\n-    .map(\\n-      (p): IPosition => ({\\n-        position_id: p.symbol,\\n-        product_id: encodePath('ASTER', 'PERP', p.symbol),\\n-        datasource_id: 'ASTER',\\n-        direction: p.positionSide === 'BOTH' ? (+p.positionAmt > 0 ? 'LONG' : 'SHORT') : p.positionSide,\\n-        volume: Math.abs(+p.positionAmt),\\n-        free_volume: Math.abs(+p.positionAmt),\\n-        position_price: +p.entryPrice,\\n-        closable_price: Math.abs(+p.notional / +p.positionAmt),\\n-        floating_profit: +p.unrealizedProfit,\\n-        valuation: Math.abs(+p.notional),\\n-      }),\\n-    );\\n-  return positions;\\n-};\\n\"\n+        },\n+        {\n+          \"additions\": 64,\n+          \"deletions\": 20,\n+          \"path\": \"apps/vendor-aster/src/services/accounts/spot.ts\",\n+          \"patch\": \"commit 17bf37f7daa6edb1371f9057ffed3f52b3570b60\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 21:03:37 2025 +0800\\n\\n    refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\\n\\ndiff --git a/apps/vendor-aster/src/services/accounts/spot.ts b/apps/vendor-aster/src/services/accounts/spot.ts\\nindex d61281472..d04bf81c9 100644\\n--- a/apps/vendor-aster/src/services/accounts/spot.ts\\n+++ b/apps/vendor-aster/src/services/accounts/spot.ts\\n@@ -0,0 +1 @@\\n+import { createCache } from '@yuants/cache';\\n@@ -2 +2,0 @@ import { IPosition, makeSpotPosition } from '@yuants/data-account';\\n-import { getApiV1Account, getApiV1TickerPrice, getFApiV4Account, ICredential } from '../../api/private-api';\\n@@ -3,0 +4,12 @@ import { encodePath } from '@yuants/utils';\\n+import { getApiV1Account, getApiV1TickerPrice, getFApiV4Account, ICredential } from '../../api/private-api';\\n+\\n+// ISSUE: ASBNB price is not available in the price API, need to fetch from coingecko\\n+const asBNBPrice = createCache(\\n+  () =>\\n+    fetch('https://api.coingecko.com/api/v3/simple/price?ids=astherus-staked-bnb&vs_currencies=usd')\\n+      .then((res) => res.json())\\n+      .then((data) => data['astherus-staked-bnb'].usd as number),\\n+  {\\n+    expire: 60_000, // 1 minute\\n+  },\\n+);\\n@@ -5 +17,2 @@ import { encodePath } from '@yuants/utils';\\n-export const getSpotAccountInfo = async (credential: ICredential) => {\\n+export const getPositions = async (credential: ICredential) => {\\n+  const positions: IPosition[] = [];\\n@@ -12 +25 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-  const positions = x.balances.map((b): IPosition => {\\n+  for (const b of x.balances) {\\n@@ -14,14 +27,28 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-    return makeSpotPosition({\\n-      position_id: b.asset,\\n-      datasource_id: 'ASTER',\\n-      product_id: encodePath('ASTER', 'SPOT', b.asset),\\n-      volume: +b.free + +b.locked,\\n-      free_volume: +b.free,\\n-      closable_price: +thePrice,\\n-    });\\n-  });\\n-  const walletAssets = prep.assets\\n-    .filter((xx) => +xx.walletBalance > 0)\\n-    .map((b): IPosition => {\\n-      const thePrice = b.asset === 'USDT' ? 1 : prices.find((p) => p.symbol === b.asset + 'USDT')?.price ?? 0;\\n-      return makeSpotPosition({\\n+    positions.push(\\n+      makeSpotPosition({\\n+        position_id: b.asset,\\n+        datasource_id: 'ASTER',\\n+        product_id: encodePath('ASTER', 'SPOT', b.asset),\\n+        volume: +b.free + +b.locked,\\n+        free_volume: +b.free,\\n+        closable_price: +thePrice,\\n+      }),\\n+    );\\n+  }\\n+\\n+  for (const b of prep.assets) {\\n+    if (+b.walletBalance === 0) continue;\\n+    let thePrice = 0;\\n+    if (b.asset === 'USDT') {\\n+      thePrice = 1;\\n+    } else if (b.asset === 'ASBNB') {\\n+      const _p = await asBNBPrice.query('').catch(() => 0);\\n+      if (_p) {\\n+        thePrice = _p;\\n+      }\\n+    } else {\\n+      thePrice = +(prices.find((p) => p.symbol === b.asset + 'USDT')?.price ?? 0);\\n+    }\\n+\\n+    positions.push(\\n+      makeSpotPosition({\\n@@ -33,2 +60,18 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-        closable_price: +thePrice,\\n-      });\\n+        closable_price: thePrice,\\n+      }),\\n+    );\\n+  }\\n+\\n+  for (const p of prep.positions) {\\n+    if (+p.positionAmt === 0) continue;\\n+    positions.push({\\n+      position_id: p.symbol,\\n+      product_id: encodePath('ASTER', 'PERP', p.symbol),\\n+      datasource_id: 'ASTER',\\n+      direction: p.positionSide === 'BOTH' ? (+p.positionAmt > 0 ? 'LONG' : 'SHORT') : p.positionSide,\\n+      volume: Math.abs(+p.positionAmt),\\n+      free_volume: Math.abs(+p.positionAmt),\\n+      position_price: +p.entryPrice,\\n+      closable_price: Math.abs(+p.notional / +p.positionAmt),\\n+      floating_profit: +p.unrealizedProfit,\\n+      valuation: Math.abs(+p.notional),\\n@@ -35,0 +79 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n+  }\\n@@ -37 +81 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-  return [...positions, ...walletAssets];\\n+  return positions;\\n\"\n+        },\n+        {\n+          \"additions\": 4,\n+          \"deletions\": 18,\n+          \"path\": \"apps/vendor-aster/src/services/exchange.ts\",\n+          \"patch\": \"commit 17bf37f7daa6edb1371f9057ffed3f52b3570b60\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 21:03:37 2025 +0800\\n\\n    refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\\n\\ndiff --git a/apps/vendor-aster/src/services/exchange.ts b/apps/vendor-aster/src/services/exchange.ts\\nindex 4cdd15bff..71a555cee 100644\\n--- a/apps/vendor-aster/src/services/exchange.ts\\n+++ b/apps/vendor-aster/src/services/exchange.ts\\n@@ -8 +8 @@ import { getCredentialId } from './accounts/profile';\\n-import { getSpotAccountInfo } from './accounts/spot';\\n+import { getPositions } from './accounts/spot';\\n@@ -12 +11,0 @@ import { ICredential } from '../api/private-api';\\n-import { getPerpAccountInfo } from './accounts/perp';\\n@@ -30,7 +29 @@ provideExchangeServices<ICredential>(terminal, {\\n-  getPositions: async function (credential: ICredential): Promise<IPosition[]> {\\n-    const [perpPositions, spotPositions] = await Promise.all([\\n-      getPerpAccountInfo(credential),\\n-      getSpotAccountInfo(credential),\\n-    ]);\\n-    return [...perpPositions, ...spotPositions];\\n-  },\\n+  getPositions: getPositions,\\n@@ -43,9 +36,2 @@ provideExchangeServices<ICredential>(terminal, {\\n-    if (instType === 'SPOT') {\\n-      const positions = await getSpotAccountInfo(credential);\\n-      return positions.filter((position) => position.product_id === product_id);\\n-    }\\n-    if (instType === 'PERP') {\\n-      const positions = await getPerpAccountInfo(credential);\\n-      return positions.filter((position) => position.product_id === product_id);\\n-    }\\n-    throw new Error(`Unsupported instType: ${instType}`);\\n+    const positions = await getPositions(credential);\\n+    return positions.filter((position) => position.product_id === product_id);\\n\"\n+        },\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 26,\n+          \"path\": \"apps/vendor-aster/src/services/markets/interest_rate.ts\",\n+          \"patch\": \"commit 17bf37f7daa6edb1371f9057ffed3f52b3570b60\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 21:03:37 2025 +0800\\n\\n    refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/interest_rate.ts b/apps/vendor-aster/src/services/markets/interest_rate.ts\\nindex b8a43085b..8512bb506 100644\\n--- a/apps/vendor-aster/src/services/markets/interest_rate.ts\\n+++ b/apps/vendor-aster/src/services/markets/interest_rate.ts\\n@@ -2,2 +2 @@ import { IInterestRate } from '@yuants/data-interest-rate';\\n-import { IProduct } from '@yuants/data-product';\\n-import { createSeriesProvider, ISeriesCollectingTask } from '@yuants/data-series';\\n+import { createSeriesProvider } from '@yuants/data-series';\\n@@ -5,3 +4,2 @@ import { Terminal } from '@yuants/protocol';\\n-import { createSQLWriter } from '@yuants/sql';\\n-import { decodePath, encodePath, formatTime } from '@yuants/utils';\\n-import { firstValueFrom, map, mergeAll, timer } from 'rxjs';\\n+import { decodePath, formatTime } from '@yuants/utils';\\n+import { firstValueFrom, timer } from 'rxjs';\\n@@ -9 +6,0 @@ import { getFApiV1FundingRate } from '../../api/public-api';\\n-import { productService } from './product';\\n@@ -13,20 +9,0 @@ const terminal = Terminal.fromNodeEnv();\\n-createSQLWriter<ISeriesCollectingTask>(terminal, {\\n-  data$: productService.products$.pipe(\\n-    map((products: IProduct[]) => products.filter((product) => product.no_interest_rate === false)),\\n-    mergeAll(),\\n-    map(\\n-      (product: IProduct): ISeriesCollectingTask => ({\\n-        series_id: product.product_id,\\n-        table_name: 'interest_rate',\\n-        cron_pattern: '0 * * * *',\\n-        cron_timezone: 'UTC',\\n-        disabled: false,\\n-        replay_count: 0,\\n-      }),\\n-    ),\\n-  ),\\n-  tableName: 'series_collecting_task',\\n-  writeInterval: 1000,\\n-  conflictKeys: ['series_id', 'table_name'],\\n-});\\n-\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 6,\n+          \"path\": \"apps/vendor-aster/src/services/markets/product.ts\",\n+          \"patch\": \"commit 17bf37f7daa6edb1371f9057ffed3f52b3570b60\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 21:03:37 2025 +0800\\n\\n    refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/product.ts b/apps/vendor-aster/src/services/markets/product.ts\\nindex a0e5c02e9..027646b5a 100644\\n--- a/apps/vendor-aster/src/services/markets/product.ts\\n+++ b/apps/vendor-aster/src/services/markets/product.ts\\n@@ -1 +1 @@\\n-import { IProduct, IQueryProductsRequest, provideQueryProductsService } from '@yuants/data-product';\\n+import { IProduct } from '@yuants/data-product';\\n@@ -45,5 +44,0 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-\\n-// Provide QueryProducts service for ASTER\\n-export const productService = provideQueryProductsService(terminal, 'ASTER', listProducts, {\\n-  auto_refresh_interval: 3600_000, // Refresh hourly\\n-});\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-03-13-01.json\",\n+          \"patch\": \"commit 17bf37f7daa6edb1371f9057ffed3f52b3570b60\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 21:03:37 2025 +0800\\n\\n    refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-03-13-01.json b/common/changes/@yuants/vendor-aster/2025-12-03-13-01.json\\nnew file mode 100644\\nindex 000000000..e4f38bceb\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-03-13-01.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"fix asbnb\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"5cff1f4eaba5d5f439e9f769d9e8992974718b12\",\n+      \"short\": \"5cff1f4ea\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-03 21:06:52 +0800\",\n+      \"subject\": \"chore: bump version (#2170)\",\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"patch\": \"commit 5cff1f4eaba5d5f439e9f769d9e8992974718b12\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 21:06:52 2025 +0800\\n\\n    chore: bump version (#2170)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex 05ed2ee7a..67da85a81 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.15\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.15\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 13:06:29 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix asbnb\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"patch\": \"commit 5cff1f4eaba5d5f439e9f769d9e8992974718b12\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 21:06:52 2025 +0800\\n\\n    chore: bump version (#2170)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex a9c56cf68..7a147a3f6 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 13:06:29 GMT and should not be manually modified.\\n+\\n+## 0.7.15\\n+Wed, 03 Dec 2025 13:06:29 GMT\\n+\\n+### Patches\\n+\\n+- fix asbnb\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"patch\": \"commit 5cff1f4eaba5d5f439e9f769d9e8992974718b12\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 21:06:52 2025 +0800\\n\\n    chore: bump version (#2170)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex 426388e31..da226eef8 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.14\\\",\\n+  \\\"version\\\": \\\"0.7.15\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-aster/2025-12-03-13-01.json\",\n+          \"patch\": \"commit 5cff1f4eaba5d5f439e9f769d9e8992974718b12\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Wed Dec 3 21:06:52 2025 +0800\\n\\n    chore: bump version (#2170)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-03-13-01.json b/common/changes/@yuants/vendor-aster/2025-12-03-13-01.json\\ndeleted file mode 100644\\nindex e4f38bceb..000000000\\n--- a/common/changes/@yuants/vendor-aster/2025-12-03-13-01.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n-      \\\"comment\\\": \\\"fix asbnb\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-03-10-25.json => main_2025-12-03-13-06.json}\",\n+          \"patch\": \"\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"1cdb7d6f8af93d6d6516fb266875e9fb8a2c9fb9\",\n+      \"short\": \"1cdb7d6f8\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-03 21:13:11 +0800\",\n+      \"subject\": \"fix(ci): git digest ci (#2171)\",\n+      \"files\": [\n+        {\n+          \"additions\": 4,\n+          \"deletions\": 0,\n+          \"path\": \".github/workflows/daily-git-report.yml\",\n+          \"patch\": \"commit 1cdb7d6f8af93d6d6516fb266875e9fb8a2c9fb9\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 21:13:11 2025 +0800\\n\\n    fix(ci): git digest ci (#2171)\\n\\ndiff --git a/.github/workflows/daily-git-report.yml b/.github/workflows/daily-git-report.yml\\nindex 00ed8aa12..9da327819 100644\\n--- a/.github/workflows/daily-git-report.yml\\n+++ b/.github/workflows/daily-git-report.yml\\n@@ -14,0 +15,4 @@ on:\\n+permissions:\\n+  id-token: write\\n+  contents: read\\n+\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"0818c7726a6dcbe26329d0cbe6cbafa203585edb\",\n+      \"short\": \"0818c7726\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-03 21:36:07 +0800\",\n+      \"subject\": \"chore(ci): update permissions (#2172)\",\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \".github/workflows/daily-git-report.yml\",\n+          \"patch\": \"commit 0818c7726a6dcbe26329d0cbe6cbafa203585edb\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 21:36:07 2025 +0800\\n\\n    chore(ci): update permissions (#2172)\\n\\ndiff --git a/.github/workflows/daily-git-report.yml b/.github/workflows/daily-git-report.yml\\nindex 9da327819..5d57a6eb6 100644\\n--- a/.github/workflows/daily-git-report.yml\\n+++ b/.github/workflows/daily-git-report.yml\\n@@ -24,0 +25 @@ jobs:\\n+      id-token: write\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"ba9d2f057b1f63e13d4cd44763b402aceffb811c\",\n+      \"short\": \"ba9d2f057\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-03 21:47:07 +0800\",\n+      \"subject\": \"chore(ci): update (#2173)\",\n+      \"files\": [\n+        {\n+          \"additions\": 19,\n+          \"deletions\": 19,\n+          \"path\": \".github/workflows/daily-git-report.yml\",\n+          \"patch\": \"commit ba9d2f057b1f63e13d4cd44763b402aceffb811c\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 21:47:07 2025 +0800\\n\\n    chore(ci): update (#2173)\\n\\ndiff --git a/.github/workflows/daily-git-report.yml b/.github/workflows/daily-git-report.yml\\nindex 5d57a6eb6..5521582e7 100644\\n--- a/.github/workflows/daily-git-report.yml\\n+++ b/.github/workflows/daily-git-report.yml\\n@@ -66,19 +66 @@ jobs:\\n-        uses: anthropics/claude-code-action@v1\\n-        with:\\n-          prompt: |\\n-            请使用 git-changes-reporter skill 生成 Git 变更报告。\\n-\\n-            任务信息：\\n-            - 起始提交: ${{ steps.commit_range.outputs.old_commit }}\\n-            - 结束提交: ${{ steps.commit_range.outputs.new_commit }}\\n-            - 提交范围: ${{ steps.commit_range.outputs.old_commit_short }}..${{ steps.commit_range.outputs.new_commit_short }}\\n-            - 提交数量: ${{ steps.commit_range.outputs.commit_count }}\\n-            - 输出文件: docs/reports/git-changes-report-$(date +%Y-%m-%d).md\\n-\\n-            请严格按照 git-changes-reporter skill 的所有规则生成报告，特别是：\\n-            1. 必须使用短哈希引用提交，不要使用 JSON 文件行号\\n-            2. 按技术领域进行语义聚类\\n-            3. 包含完整的报告结构\\n-            4. 提供具体的文件引用和代码位置\\n-\\n-            请先生成 JSON 数据，然后基于 JSON 数据生成语义化报告。\\n+        uses: anthropics/claude-code-base-action@beta\\n@@ -92,0 +75,18 @@ jobs:\\n+        with:\\n+          allowed_tools: 'Bash(git:*),View,GlobTool,GrepTool,BatchTool'\\n+          prompt: |\\n+            使用 git-changes-reporter skill 生成每日 Git 变更报告，并将结果保存为 Markdown 文件。\\n+\\n+            - 起始提交: ${{ steps.commit_range.outputs.old_commit }}\\n+            - 结束提交: ${{ steps.commit_range.outputs.new_commit }}\\n+            - 提交范围: ${{ steps.commit_range.outputs.old_commit_short }}..${{ steps.commit_range.outputs.new_commit_short }}\\n+            - 提交数量: ${{ steps.commit_range.outputs.commit_count }}\\n+            - JSON 数据文件: ${{ steps.generate_json.outputs.json_file }}\\n+            - 输出文件: docs/reports/git-changes-report-${{ steps.report_date.outputs.value }}.md\\n+            - 技能文档路径: .claude/skills/git-changes-reporter/SKILL.md\\n+\\n+            要求：\\n+            1) 读取上述 JSON 数据，并严格按照 git-changes-reporter skill 的规则生成报告。\\n+            2) 必须使用短哈希引用提交，绝对不要使用 JSON 行号。\\n+            3) 按技能文档的语义聚类和报告结构输出，包含具体文件引用和代码位置。\\n+            4) 将最终 Markdown 报告写入指定输出文件。\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"6ff1ea94095a9c16e69080b854c254ca1cb95d0c\",\n+      \"short\": \"6ff1ea940\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-03 21:53:29 +0800\",\n+      \"subject\": \"chore(ci): update (#2174)\",\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \".github/workflows/daily-git-report.yml\",\n+          \"patch\": \"commit 6ff1ea94095a9c16e69080b854c254ca1cb95d0c\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 21:53:29 2025 +0800\\n\\n    chore(ci): update (#2174)\\n\\ndiff --git a/.github/workflows/daily-git-report.yml b/.github/workflows/daily-git-report.yml\\nindex 5521582e7..55f9f4e6b 100644\\n--- a/.github/workflows/daily-git-report.yml\\n+++ b/.github/workflows/daily-git-report.yml\\n@@ -75,0 +76 @@ jobs:\\n+          claude_code_oauth_token: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"456665c2f2c6a7386d166cad571f11588071865a\",\n+      \"short\": \"456665c2f\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-03 22:14:08 +0800\",\n+      \"subject\": \"chore(ci): give claude code permissions (#2175)\",\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \".github/workflows/daily-git-report.yml\",\n+          \"patch\": \"commit 456665c2f2c6a7386d166cad571f11588071865a\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 22:14:08 2025 +0800\\n\\n    chore(ci): give claude code permissions (#2175)\\n\\ndiff --git a/.github/workflows/daily-git-report.yml b/.github/workflows/daily-git-report.yml\\nindex 55f9f4e6b..e01070b35 100644\\n--- a/.github/workflows/daily-git-report.yml\\n+++ b/.github/workflows/daily-git-report.yml\\n@@ -77 +77 @@ jobs:\\n-          allowed_tools: 'Bash(git:*),View,GlobTool,GrepTool,BatchTool'\\n+          allowed_tools: 'Bash(git:*),View,GlobTool,GrepTool,BatchTool,Edit,Read,Write'\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"e4fa0626c03e1a4e2051c045c8cc2794dfc1f459\",\n+      \"short\": \"e4fa0626c\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-03 22:48:03 +0800\",\n+      \"subject\": \"chore(ci): update (#2176)\",\n+      \"files\": [\n+        {\n+          \"additions\": 106,\n+          \"deletions\": 0,\n+          \"path\": \".claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\",\n+          \"patch\": \"commit e4fa0626c03e1a4e2051c045c8cc2794dfc1f459\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 22:48:03 2025 +0800\\n\\n    chore(ci): update (#2176)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh b/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\\nnew file mode 100755\\nindex 000000000..e7e7b6f07\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\\n@@ -0,0 +1,106 @@\\n+#!/usr/bin/env bash\\n+# Create or update the daily git report PR.\\n+# Arguments:\\n+#   1) report date (YYYY-MM-DD)\\n+#   2) old commit short hash\\n+#   3) new commit short hash\\n+#   4) commit count\\n+#   5) json path (optional, default docs/reports/git-changes-<date>.json)\\n+#   6) report path (optional, default docs/reports/git-changes-report-<date>.md)\\n+#\\n+# Env:\\n+#   GITHUB_TOKEN (required)\\n+#   DRY_RUN=1 to skip push/PR for local testing.\\n+\\n+set -euo pipefail\\n+\\n+REPORT_DATE=\\\"${1:-}\\\"\\n+OLD_SHORT=\\\"${2:-}\\\"\\n+NEW_SHORT=\\\"${3:-}\\\"\\n+COMMIT_COUNT=\\\"${4:-}\\\"\\n+JSON_PATH=\\\"${5:-docs/reports/git-changes-${REPORT_DATE}.json}\\\"\\n+REPORT_PATH=\\\"${6:-docs/reports/git-changes-report-${REPORT_DATE}.md}\\\"\\n+\\n+if [[ -z \\\"$REPORT_DATE\\\" || -z \\\"$OLD_SHORT\\\" || -z \\\"$NEW_SHORT\\\" || -z \\\"$COMMIT_COUNT\\\" ]]; then\\n+  echo \\\"Usage: $0 <report_date> <old_short> <new_short> <commit_count> [json_path] [report_path]\\\"\\n+  exit 1\\n+fi\\n+\\n+if [[ -z \\\"${GITHUB_TOKEN:-}\\\" ]]; then\\n+  echo \\\"GITHUB_TOKEN is required\\\"\\n+  exit 1\\n+fi\\n+\\n+if [[ \\\"${DRY_RUN:-0}\\\" == \\\"1\\\" ]]; then\\n+  echo \\\"DRY_RUN=1, skip git/PR actions\\\"\\n+  exit 0\\n+fi\\n+\\n+export GH_TOKEN=\\\"$GITHUB_TOKEN\\\"\\n+\\n+git config --global user.name \\\"github-actions[bot]\\\"\\n+git config --global user.email \\\"github-actions[bot]@users.noreply.github.com\\\"\\n+\\n+BRANCH_NAME=\\\"daily-report-${REPORT_DATE}\\\"\\n+git checkout -B \\\"$BRANCH_NAME\\\"\\n+git add \\\"docs/reports/\\\"\\n+\\n+if git diff --cached --quiet; then\\n+  echo \\\"没有变更，跳过 PR 创建\\\"\\n+  exit 0\\n+fi\\n+\\n+git commit -m \\\"feat: add daily git change report for ${REPORT_DATE} - ${COMMIT_COUNT} commits\\\"\\n+\\n+if [[ \\\"${DRY_RUN:-0}\\\" != \\\"1\\\" ]]; then\\n+  git push origin \\\"$BRANCH_NAME\\\" --force\\n+else\\n+  echo \\\"DRY_RUN=1, skip push\\\"\\n+fi\\n+\\n+PR_TITLE=\\\"Daily Git Change Report ${REPORT_DATE}\\\"\\n+read -r -d '' PR_BODY <<'EOF' || true\\n+## 每日 Git 变更报告\\n+\\n+### 报告信息\\n+- **日期**: ${REPORT_DATE}\\n+- **提交范围**: ${OLD_SHORT}..${NEW_SHORT}\\n+- **提交数量**: ${COMMIT_COUNT}\\n+- **生成时间**: $(date -Iseconds)\\n+\\n+### 包含文件\\n+1. `${JSON_PATH}` - 结构化 JSON 数据\\n+2. `${REPORT_PATH}` - 完整的语义化报告\\n+\\n+### 报告特点\\n+- 使用 Claude Code 的 git-changes-reporter skill 生成\\n+- 包含技术领域分析\\n+- 贡献者统计和分析\\n+- 风险评估和建议\\n+- 具体的文件引用和代码位置\\n+\\n+### 自动化\\n+此 PR 由 GitHub Actions 自动生成，计划每天东八区早上8点运行。\\n+\\n+🤖 Generated with [Claude Code](https://claude.com/claude-code)\\n+EOF\\n+\\n+PR_BODY=${PR_BODY//\\\\$\\\\{REPORT_DATE\\\\}/${REPORT_DATE}}\\n+PR_BODY=${PR_BODY//\\\\$\\\\{OLD_SHORT\\\\}/${OLD_SHORT}}\\n+PR_BODY=${PR_BODY//\\\\$\\\\{NEW_SHORT\\\\}/${NEW_SHORT}}\\n+PR_BODY=${PR_BODY//\\\\$\\\\{COMMIT_COUNT\\\\}/${COMMIT_COUNT}}\\n+PR_BODY=${PR_BODY//\\\\$\\\\{JSON_PATH\\\\}/${JSON_PATH}}\\n+PR_BODY=${PR_BODY//\\\\$\\\\{REPORT_PATH\\\\}/${REPORT_PATH}}\\n+\\n+if [[ \\\"${DRY_RUN:-0}\\\" != \\\"1\\\" ]]; then\\n+  gh pr create \\\\\\n+    --title \\\"$PR_TITLE\\\" \\\\\\n+    --body \\\"$PR_BODY\\\" \\\\\\n+    --base main \\\\\\n+    --head \\\"$BRANCH_NAME\\\" \\\\\\n+    --label automated \\\\\\n+    --label report \\\\\\n+    --label daily || echo \\\"PR 创建失败，可能已存在\\\"\\n+else\\n+  echo \\\"DRY_RUN=1, skip gh pr create\\\"\\n+fi\\n\"\n+        },\n+        {\n+          \"additions\": 11,\n+          \"deletions\": 55,\n+          \"path\": \".github/workflows/daily-git-report.yml\",\n+          \"patch\": \"commit e4fa0626c03e1a4e2051c045c8cc2794dfc1f459\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 22:48:03 2025 +0800\\n\\n    chore(ci): update (#2176)\\n\\ndiff --git a/.github/workflows/daily-git-report.yml b/.github/workflows/daily-git-report.yml\\nindex e01070b35..fe880b4aa 100644\\n--- a/.github/workflows/daily-git-report.yml\\n+++ b/.github/workflows/daily-git-report.yml\\n@@ -77 +77 @@ jobs:\\n-          allowed_tools: 'Bash(git:*),View,GlobTool,GrepTool,BatchTool,Edit,Read,Write'\\n+          allowed_tools: 'Bash(git:*),View,GlobTool,GrepTool,BatchTool,WriteFileTool'\\n@@ -113,3 +112,0 @@ jobs:\\n-          git config --global user.name \\\"github-actions[bot]\\\"\\n-          git config --global user.email \\\"github-actions[bot]@users.noreply.github.com\\\"\\n-\\n@@ -117,51 +114,10 @@ jobs:\\n-          BRANCH_NAME=\\\"daily-report-${REPORT_DATE}\\\"\\n-          git checkout -B \\\"$BRANCH_NAME\\\"\\n-          git add docs/reports/\\n-\\n-          if git diff --cached --quiet; then\\n-            echo \\\"没有变更，跳过 PR 创建\\\"\\n-            echo \\\"pr_created=false\\\" >> $GITHUB_OUTPUT\\n-          else\\n-            git commit -m \\\"feat: add daily git change report for ${REPORT_DATE} - ${{ steps.commit_range.outputs.commit_count }} commits\\\"\\n-            git push origin \\\"$BRANCH_NAME\\\" --force\\n-\\n-            PR_TITLE=\\\"Daily Git Change Report ${REPORT_DATE}\\\"\\n-            PR_BODY=$(cat <<-EOF\\n-            ## 每日 Git 变更报告\\n-\\n-            ### 报告信息\\n-            - **日期**: ${REPORT_DATE}\\n-            - **提交范围**: ${{ steps.commit_range.outputs.old_commit_short }}..${{ steps.commit_range.outputs.new_commit_short }}\\n-            - **提交数量**: ${{ steps.commit_range.outputs.commit_count }}\\n-            - **生成时间**: $(date -Iseconds)\\n-\\n-            ### 包含文件\\n-            1. \\\\`docs/reports/git-changes-${REPORT_DATE}.json\\\\` - 结构化 JSON 数据\\n-            2. \\\\`docs/reports/git-changes-report-${REPORT_DATE}.md\\\\` - 完整的语义化报告\\n-\\n-            ### 报告特点\\n-            - 使用 Claude Code 的 git-changes-reporter skill 生成\\n-            - 包含技术领域分析\\n-            - 贡献者统计和分析\\n-            - 风险评估和建议\\n-            - 具体的文件引用和代码位置\\n-\\n-            ### 自动化\\n-            此 PR 由 GitHub Actions 自动生成，计划每天东八区早上8点运行。\\n-\\n-            🤖 Generated with [Claude Code](https://claude.com/claude-code)\\n-            EOF\\n-            )\\n-\\n-            gh pr create \\\\\\n-              --title \\\"$PR_TITLE\\\" \\\\\\n-              --body \\\"$PR_BODY\\\" \\\\\\n-              --base main \\\\\\n-              --head \\\"$BRANCH_NAME\\\" \\\\\\n-              --label automated \\\\\\n-              --label report \\\\\\n-              --label daily || echo \\\"PR 创建失败，可能已存在\\\"\\n-\\n-            echo \\\"pr_created=true\\\" >> $GITHUB_OUTPUT\\n-            echo \\\"branch_name=$BRANCH_NAME\\\" >> $GITHUB_OUTPUT\\n-          fi\\n+          JSON_PATH=\\\"${{ steps.generate_json.outputs.json_file }}\\\"\\n+          REPORT_PATH=\\\"docs/reports/git-changes-report-${REPORT_DATE}.md\\\"\\n+          chmod +x .claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\\n+          .claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh \\\\\\n+            \\\"$REPORT_DATE\\\" \\\\\\n+            \\\"${{ steps.commit_range.outputs.old_commit_short }}\\\" \\\\\\n+            \\\"${{ steps.commit_range.outputs.new_commit_short }}\\\" \\\\\\n+            \\\"${{ steps.commit_range.outputs.commit_count }}\\\" \\\\\\n+            \\\"$JSON_PATH\\\" \\\\\\n+            \\\"$REPORT_PATH\\\"\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"1bedfcbc1317f2a5ab79a0c7c1aaf55faa5d226b\",\n+      \"short\": \"1bedfcbc1\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-03 23:52:20 +0800\",\n+      \"subject\": \"chore(ci): claude code permissions (#2177)\",\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \".github/workflows/daily-git-report.yml\",\n+          \"patch\": \"commit 1bedfcbc1317f2a5ab79a0c7c1aaf55faa5d226b\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 23:52:20 2025 +0800\\n\\n    chore(ci): claude code permissions (#2177)\\n\\ndiff --git a/.github/workflows/daily-git-report.yml b/.github/workflows/daily-git-report.yml\\nindex fe880b4aa..2bdd46b5e 100644\\n--- a/.github/workflows/daily-git-report.yml\\n+++ b/.github/workflows/daily-git-report.yml\\n@@ -77 +77 @@ jobs:\\n-          allowed_tools: 'Bash(git:*),View,GlobTool,GrepTool,BatchTool,WriteFileTool'\\n+          allowed_tools: 'Bash(git:*),Bash(touch:*),View,GlobTool,GrepTool,BatchTool,Edit,Read,Write'\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"ae2d6b3e89ce04667a280584284e3906fe3b0448\",\n+      \"short\": \"ae2d6b3e8\",\n+      \"author\": \"Siyuan Wang\",\n+      \"email\": \"c.one@thrimbda.com\",\n+      \"authoredAt\": \"2025-12-04 00:14:40 +0800\",\n+      \"subject\": \"chore(ci): pr with correct labels (#2178)\",\n+      \"files\": [\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 3,\n+          \"path\": \".claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\",\n+          \"patch\": \"commit ae2d6b3e89ce04667a280584284e3906fe3b0448\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Thu Dec 4 00:14:40 2025 +0800\\n\\n    chore(ci): pr with correct labels (#2178)\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh b/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\\nindex e7e7b6f07..8dca20bc1 100755\\n--- a/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\\n+++ b/.claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh\\n@@ -101,3 +101 @@ if [[ \\\"${DRY_RUN:-0}\\\" != \\\"1\\\" ]]; then\\n-    --label automated \\\\\\n-    --label report \\\\\\n-    --label daily || echo \\\"PR 创建失败，可能已存在\\\"\\n+    --label skip-ci || echo \\\"PR 创建失败，可能已存在\\\"\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"bc0ce17edad747a8025b17c60184735d69119f1a\",\n+      \"short\": \"bc0ce17ed\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-04 00:33:47 +0800\",\n+      \"subject\": \"feat: add experimental trading functions including order management and product listing (#2179)\",\n+      \"files\": [\n+        {\n+          \"additions\": 14,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/experimental/cancelOrder.ts\",\n+          \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/cancelOrder.ts b/apps/vendor-okx/src/experimental/cancelOrder.ts\\nnew file mode 100644\\nindex 000000000..6c4b53b5a\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/cancelOrder.ts\\n@@ -0,0 +1,14 @@\\n+import { IOrder } from '@yuants/data-order';\\n+import { decodePath } from '@yuants/utils';\\n+import { ICredential, postTradeCancelOrder } from '../api/private-api';\\n+\\n+export const cancelOrder = async (credential: ICredential, order: IOrder) => {\\n+  const [, , instId] = decodePath(order.product_id);\\n+  const res = await postTradeCancelOrder(credential, {\\n+    instId,\\n+    ordId: order.order_id!,\\n+  });\\n+  if (res.code !== '0') {\\n+    throw new Error(`Cancel order failed: code=${res.code} msg=${res.msg}`);\\n+  }\\n+};\\n\"\n+        },\n+        {\n+          \"additions\": 45,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/experimental/exchange.ts\",\n+          \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/exchange.ts b/apps/vendor-okx/src/experimental/exchange.ts\\nnew file mode 100644\\nindex 000000000..98e379e8a\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/exchange.ts\\n@@ -0,0 +1,45 @@\\n+import { provideExchangeServices } from '@yuants/exchange';\\n+import { Terminal } from '@yuants/protocol';\\n+import { encodePath, newError } from '@yuants/utils';\\n+import { getAccountConfig, ICredential } from '../api/private-api';\\n+import { cancelOrder } from './cancelOrder';\\n+import { getOrders } from './getOrders';\\n+import { getPositions } from './getPositions';\\n+import { modifyOrder } from './modifyOrder';\\n+import { listProducts } from './product';\\n+import { submitOrder } from './submitOrder';\\n+\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n+provideExchangeServices<ICredential>(terminal, {\\n+  name: 'OKX',\\n+  credentialSchema: {\\n+    type: 'object',\\n+    required: ['access_key', 'secret_key', 'passphrase'],\\n+    properties: {\\n+      access_key: { type: 'string' },\\n+      secret_key: { type: 'string' },\\n+      passphrase: { type: 'string' },\\n+    },\\n+  },\\n+  getCredentialId: async function (credential: ICredential): Promise<string> {\\n+    const accountConfig = await getAccountConfig(credential);\\n+    const uid = accountConfig.data?.[0]?.uid;\\n+    if (!uid) throw newError('OKX_CREDENTIAL_INVALID', { credential });\\n+    return encodePath('OKX', uid);\\n+  },\\n+  listProducts: listProducts,\\n+  getPositions: getPositions,\\n+  getOrders,\\n+  getPositionsByProductId: async (credential, product_id) => {\\n+    const positions = await getPositions(credential);\\n+    return positions.filter((x) => x.product_id === product_id);\\n+  },\\n+  getOrdersByProductId: async (credential, product_id) => {\\n+    const orders = await getOrders(credential);\\n+    return orders.filter((x) => x.product_id === product_id);\\n+  },\\n+  submitOrder: submitOrder,\\n+  modifyOrder: modifyOrder,\\n+  cancelOrder: cancelOrder,\\n+});\\n\"\n+        },\n+        {\n+          \"additions\": 36,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/experimental/getOrders.ts\",\n+          \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/getOrders.ts b/apps/vendor-okx/src/experimental/getOrders.ts\\nnew file mode 100644\\nindex 000000000..f89b8334f\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/getOrders.ts\\n@@ -0,0 +1,36 @@\\n+import { IOrder } from '@yuants/data-order';\\n+import { encodePath } from '@yuants/utils';\\n+import { ICredential, getTradeOrdersPending } from '../api/private-api';\\n+\\n+export const getOrders = async function (credential: ICredential): Promise<IOrder[]> {\\n+  const orders: IOrder[] = [];\\n+  const orderRes = await getTradeOrdersPending(credential, {});\\n+\\n+  for (const x of orderRes.data || []) {\\n+    const order_type = x.ordType === 'market' ? 'MARKET' : x.ordType === 'limit' ? 'LIMIT' : 'UNKNOWN';\\n+\\n+    const order_direction =\\n+      x.side === 'buy'\\n+        ? x.posSide === 'long'\\n+          ? 'OPEN_LONG'\\n+          : 'CLOSE_SHORT'\\n+        : x.posSide === 'short'\\n+        ? 'OPEN_SHORT'\\n+        : 'CLOSE_LONG';\\n+    orders.push({\\n+      order_id: x.ordId,\\n+      account_id: '',\\n+      product_id: encodePath('OKX', x.instType, x.instId),\\n+      submit_at: +x.cTime,\\n+      filled_at: +x.fillTime,\\n+      order_type,\\n+      order_direction,\\n+      volume: +x.sz,\\n+      traded_volume: +x.accFillSz,\\n+      price: +x.px,\\n+      traded_price: +x.avgPx,\\n+    });\\n+  }\\n+\\n+  return orders;\\n+};\\n\"\n+        },\n+        {\n+          \"additions\": 127,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/experimental/getPositions.ts\",\n+          \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/getPositions.ts b/apps/vendor-okx/src/experimental/getPositions.ts\\nnew file mode 100644\\nindex 000000000..1cbbe0873\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/getPositions.ts\\n@@ -0,0 +1,127 @@\\n+import { IPosition, makeSpotPosition } from '@yuants/data-account';\\n+import { encodePath } from '@yuants/utils';\\n+import { getSpotPrice } from '../accountInfos/trading';\\n+import {\\n+  getAccountBalance,\\n+  getAccountPositions,\\n+  getAssetBalances,\\n+  getFinanceSavingsBalance,\\n+  getFlexibleLoanInfo,\\n+  ICredential,\\n+} from '../api/private-api';\\n+import { productCache } from './product';\\n+\\n+export const getPositions = async (credential: ICredential): Promise<IPosition[]> => {\\n+  const positions: IPosition[] = [];\\n+\\n+  const [positionsApi, balanceApi, assetBalancesApi, offersApi, flexibleLoanInfoApi] = await Promise.all([\\n+    // Trading Accounts\\n+    getAccountPositions(credential, {}),\\n+    getAccountBalance(credential, {}),\\n+    // Funding Accounts\\n+    getAssetBalances(credential, {}),\\n+    // Earning Accounts\\n+    getFinanceSavingsBalance(credential, {}),\\n+    // Loan Accounts\\n+    getFlexibleLoanInfo(credential),\\n+  ]);\\n+\\n+  // 现货头寸\\n+  for (const detail of balanceApi.data?.[0]?.details || []) {\\n+    const volume = +(detail.cashBal ?? 0);\\n+    const free_volume = Math.min(\\n+      volume, // free should no more than balance if there is much profits\\n+      +(detail.availEq ?? 0),\\n+    );\\n+\\n+    const product_id = encodePath('OKX', 'SPOT', `${detail.ccy}-USDT`);\\n+    positions.push(\\n+      makeSpotPosition({\\n+        position_id: product_id,\\n+        datasource_id: 'OKX',\\n+        product_id: product_id,\\n+        volume: volume,\\n+        free_volume: free_volume,\\n+        closable_price: getSpotPrice(detail.ccy),\\n+      }),\\n+    );\\n+  }\\n+  for (const x of positionsApi.data || []) {\\n+    const direction =\\n+      x.posSide === 'long' ? 'LONG' : x.posSide === 'short' ? 'SHORT' : +x.pos > 0 ? 'LONG' : 'SHORT';\\n+    const volume = Math.abs(+x.pos);\\n+    const product_id = encodePath('OKX', x.instType, x.instId);\\n+    const closable_price = +x.last;\\n+    const theProduct = await productCache.query(product_id);\\n+    const valuation = (theProduct?.value_scale ?? 1) * volume * closable_price || 0;\\n+\\n+    positions.push({\\n+      position_id: x.posId,\\n+      datasource_id: 'OKX',\\n+      product_id,\\n+      direction,\\n+      volume: volume,\\n+      free_volume: +x.availPos,\\n+      closable_price,\\n+      position_price: +x.avgPx,\\n+      floating_profit: +x.upl,\\n+      valuation,\\n+    });\\n+  }\\n+\\n+  for (const x of assetBalancesApi.data || []) {\\n+    positions.push(\\n+      makeSpotPosition({\\n+        datasource_id: 'OKX',\\n+        position_id: encodePath('OKX', 'FUNDING-ASSET', `${x.ccy}`),\\n+        product_id: encodePath('OKX', 'FUNDING-ASSET', `${x.ccy}`),\\n+        volume: +x.bal,\\n+        free_volume: +x.bal,\\n+        closable_price: getSpotPrice(x.ccy),\\n+      }),\\n+    );\\n+  }\\n+\\n+  for (const offer of offersApi.data || []) {\\n+    positions.push(\\n+      makeSpotPosition({\\n+        position_id: encodePath('OKX', 'EARNING-ASSET', `${offer.ccy}`),\\n+        datasource_id: 'OKX',\\n+        product_id: encodePath('OKX', 'EARNING-ASSET', `${offer.ccy}`),\\n+        volume: +offer.amt,\\n+        free_volume: +offer.amt,\\n+        closable_price: getSpotPrice(offer.ccy),\\n+      }),\\n+    );\\n+  }\\n+\\n+  for (const loan of flexibleLoanInfoApi.data?.[0]?.loanData || []) {\\n+    positions.push({\\n+      datasource_id: 'OKX',\\n+      position_id: encodePath('OKX', 'LOAN', `${loan.ccy}`),\\n+      product_id: encodePath('OKX', 'LOAN', `${loan.ccy}`),\\n+      volume: +loan.amt,\\n+      free_volume: +loan.amt,\\n+      direction: 'SHORT',\\n+      position_price: 0,\\n+      closable_price: getSpotPrice(loan.ccy),\\n+      floating_profit: -getSpotPrice(loan.ccy) * +loan.amt,\\n+      valuation: getSpotPrice(loan.ccy) * +loan.amt,\\n+    });\\n+  }\\n+\\n+  for (const collateral of flexibleLoanInfoApi.data?.[0]?.collateralData || []) {\\n+    positions.push(\\n+      makeSpotPosition({\\n+        position_id: encodePath('OKX', 'COLLATERAL', `${collateral.ccy}`),\\n+        datasource_id: 'OKX',\\n+        product_id: encodePath('OKX', 'COLLATERAL', `${collateral.ccy}`),\\n+        volume: +collateral.amt,\\n+        free_volume: +collateral.amt,\\n+        closable_price: getSpotPrice(collateral.ccy),\\n+      }),\\n+    );\\n+  }\\n+\\n+  return positions;\\n+};\\n\"\n+        },\n+        {\n+          \"additions\": 73,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/experimental/modifyOrder.ts\",\n+          \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/modifyOrder.ts b/apps/vendor-okx/src/experimental/modifyOrder.ts\\nnew file mode 100644\\nindex 000000000..5e1e31188\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/modifyOrder.ts\\n@@ -0,0 +1,73 @@\\n+import { IOrder } from '@yuants/data-order';\\n+import { formatTime, decodePath, roundToStep } from '@yuants/utils';\\n+import { firstValueFrom, map } from 'rxjs';\\n+import { ICredential, postTradeAmendOrder } from '../api/private-api';\\n+import { productService } from '../public-data/product';\\n+import { spotMarketTickers$ } from '../public-data/quote';\\n+\\n+export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n+  const [, instType, instId] = decodePath(order.product_id);\\n+  const params: {\\n+    instId: string;\\n+    ordId: string;\\n+    newPx?: string;\\n+    newSz?: string;\\n+  } = {\\n+    instId,\\n+    ordId: order.order_id!, // 使用现有订单ID\\n+  };\\n+\\n+  // 如果需要修改价格\\n+  if (order.price !== undefined) {\\n+    params.newPx = order.price.toString();\\n+  }\\n+\\n+  // 如果需要修改数量\\n+  if (order.volume !== undefined) {\\n+    // 处理数量修改，类似于 SubmitOrder 中的逻辑\\n+    if (instType === 'SWAP') {\\n+      params.newSz = order.volume.toString();\\n+    } else if (instType === 'SPOT') {\\n+      params.newSz = order.volume.toString();\\n+    } else if (instType === 'MARGIN') {\\n+      if (order.order_type === 'LIMIT') {\\n+        params.newSz = order.volume.toString();\\n+      }\\n+      if (order.order_type === 'MAKER') {\\n+        params.newSz = order.volume.toString();\\n+      }\\n+      if (order.order_type === 'MARKET') {\\n+        // 对于市价单，可能需要根据当前价格计算新的数量\\n+        const price = await firstValueFrom(\\n+          spotMarketTickers$.pipe(\\n+            map((x) =>\\n+              order.order_direction === 'OPEN_LONG' || order.order_direction === 'CLOSE_SHORT'\\n+                ? +x[instId].askPx\\n+                : +x[instId].bidPx,\\n+            ),\\n+          ),\\n+        );\\n+        if (!price) {\\n+          throw new Error(`invalid tick: ${price}`);\\n+        }\\n+        console.info(formatTime(Date.now()), 'ModifyOrder', 'price', price);\\n+        const theProduct = await firstValueFrom(\\n+          productService.mapProductIdToProduct$.pipe(map((x) => x.get(order.product_id))),\\n+        );\\n+        if (!theProduct) {\\n+          throw new Error(`Unknown product: ${order.position_id}`);\\n+        }\\n+        params.newSz = roundToStep(order.volume * price, theProduct.volume_step!).toString();\\n+      }\\n+    } else {\\n+      throw new Error(`Unknown instType: ${instType}`);\\n+    }\\n+  }\\n+\\n+  console.info(formatTime(Date.now()), 'ModifyOrder', 'params', JSON.stringify(params));\\n+\\n+  const res = await postTradeAmendOrder(credential, params);\\n+  if (res.code !== '0') {\\n+    throw new Error(`ModifyOrder failed: code=${res.code}, msg=${res.msg}`);\\n+  }\\n+};\\n\"\n+        },\n+        {\n+          \"additions\": 96,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/experimental/product.ts\",\n+          \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/product.ts b/apps/vendor-okx/src/experimental/product.ts\\nnew file mode 100644\\nindex 000000000..808bb037c\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/product.ts\\n@@ -0,0 +1,96 @@\\n+import { createClientProductCache, IProduct } from '@yuants/data-product';\\n+import { Terminal } from '@yuants/protocol';\\n+import { encodePath } from '@yuants/utils';\\n+import { getInstruments } from '../api/public-api';\\n+\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n+export const productCache = createClientProductCache(terminal, { expire: 3600_000 });\\n+\\n+export const listProducts = async (): Promise<IProduct[]> => {\\n+  const products: IProduct[] = [];\\n+\\n+  // Get all instrument types in parallel\\n+  const [swapInstruments, marginInstruments, spotInstruments] = await Promise.all([\\n+    getInstruments({ instType: 'SWAP' }),\\n+    getInstruments({ instType: 'MARGIN' }),\\n+    getInstruments({ instType: 'SPOT' }),\\n+  ]);\\n+\\n+  // Get USDT swap products\\n+  for (const instrument of swapInstruments.data || []) {\\n+    if (instrument.ctType === 'linear' && +instrument.lever > 0) {\\n+      products.push({\\n+        datasource_id: 'OKX',\\n+        product_id: encodePath('OKX', instrument.instType, instrument.instId),\\n+        name: `${instrument.ctValCcy}-${instrument.settleCcy}-PERP`,\\n+        base_currency: instrument.ctValCcy,\\n+        quote_currency: instrument.settleCcy,\\n+        value_scale: +instrument.ctVal,\\n+        volume_step: +instrument.lotSz,\\n+        price_step: +instrument.tickSz,\\n+        margin_rate: 1 / +instrument.lever,\\n+        value_scale_unit: '',\\n+        value_based_cost: 0,\\n+        volume_based_cost: 0,\\n+        max_position: 0,\\n+        max_volume: 0,\\n+        allow_long: true,\\n+        allow_short: true,\\n+        market_id: 'OKX',\\n+        no_interest_rate: false,\\n+      });\\n+    }\\n+  }\\n+\\n+  // Get margin products\\n+  for (const instrument of marginInstruments.data || []) {\\n+    if (+instrument.lever > 0) {\\n+      products.push({\\n+        datasource_id: 'OKX',\\n+        product_id: encodePath('OKX', instrument.instType, instrument.instId),\\n+        base_currency: instrument.baseCcy,\\n+        quote_currency: instrument.quoteCcy,\\n+        value_scale: 1,\\n+        volume_step: +instrument.lotSz,\\n+        price_step: +instrument.tickSz,\\n+        margin_rate: 1 / +instrument.lever,\\n+        name: `${instrument.baseCcy}-${instrument.quoteCcy}-MARGIN`,\\n+        value_scale_unit: '',\\n+        value_based_cost: 0,\\n+        volume_based_cost: 0,\\n+        max_position: 0,\\n+        max_volume: 0,\\n+        allow_long: true,\\n+        allow_short: true,\\n+        market_id: 'OKX',\\n+        no_interest_rate: false,\\n+      });\\n+    }\\n+  }\\n+\\n+  // Get spot products\\n+  for (const instrument of spotInstruments.data || []) {\\n+    products.push({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', instrument.instType, instrument.instId),\\n+      base_currency: instrument.baseCcy,\\n+      quote_currency: instrument.quoteCcy,\\n+      value_scale: 1,\\n+      volume_step: +instrument.lotSz,\\n+      price_step: +instrument.tickSz,\\n+      margin_rate: 1,\\n+      name: `${instrument.baseCcy}-${instrument.quoteCcy}-SPOT`,\\n+      value_scale_unit: '',\\n+      value_based_cost: 0,\\n+      volume_based_cost: 0,\\n+      max_position: 0,\\n+      max_volume: 0,\\n+      allow_long: true,\\n+      allow_short: true,\\n+      market_id: 'OKX',\\n+      no_interest_rate: true,\\n+    });\\n+  }\\n+  return products;\\n+};\\n\"\n+        },\n+        {\n+          \"additions\": 127,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/experimental/submitOrder.ts\",\n+          \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/submitOrder.ts b/apps/vendor-okx/src/experimental/submitOrder.ts\\nnew file mode 100644\\nindex 000000000..343ec45f3\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/submitOrder.ts\\n@@ -0,0 +1,127 @@\\n+import { IOrder } from '@yuants/data-order';\\n+import { decodePath, formatTime, roundToStep } from '@yuants/utils';\\n+import { firstValueFrom, map } from 'rxjs';\\n+import { ICredential, postTradeOrder } from '../api/private-api';\\n+import { productService } from '../public-data/product';\\n+import { spotMarketTickers$ } from '../public-data/quote';\\n+\\n+const mapOrderDirectionToSide = (direction?: string) => {\\n+  switch (direction) {\\n+    case 'OPEN_LONG':\\n+    case 'CLOSE_SHORT':\\n+      return 'buy';\\n+    case 'OPEN_SHORT':\\n+    case 'CLOSE_LONG':\\n+      return 'sell';\\n+  }\\n+  throw new Error(`Unknown direction: ${direction}`);\\n+};\\n+\\n+const mapOrderDirectionToPosSide = (direction?: string) => {\\n+  switch (direction) {\\n+    case 'OPEN_LONG':\\n+    case 'CLOSE_LONG':\\n+      return 'long';\\n+    case 'CLOSE_SHORT':\\n+    case 'OPEN_SHORT':\\n+      return 'short';\\n+  }\\n+  throw new Error(`Unknown direction: ${direction}`);\\n+};\\n+\\n+const mapOrderTypeToOrdType = (order_type?: string) => {\\n+  switch (order_type) {\\n+    case 'LIMIT':\\n+      return 'limit';\\n+    case 'MARKET':\\n+      return 'market';\\n+    case 'MAKER':\\n+      return 'post_only';\\n+  }\\n+  throw new Error(`Unknown order type: ${order_type}`);\\n+};\\n+\\n+export const submitOrder = async (credential: ICredential, order: IOrder): Promise<{ order_id: string }> => {\\n+  const [, instType, instId] = decodePath(order.product_id);\\n+\\n+  // 交易数量，表示要购买或者出售的数量。\\n+  // 当币币/币币杠杆以限价买入和卖出时，指交易货币数量。\\n+  // 当币币杠杆以市价买入时，指计价货币的数量。\\n+  // 当币币杠杆以市价卖出时，指交易货币的数量。\\n+  // 对于币币市价单，单位由 tgtCcy 决定\\n+  // 当交割、永续、期权买入和卖出时，指合约张数。\\n+  const mapOrderVolumeToSz = async (order: IOrder) => {\\n+    if (instType === 'SWAP') {\\n+      return order.volume;\\n+    }\\n+    if (instType === 'MARGIN') {\\n+      if (order.order_type === 'LIMIT') {\\n+        return order.volume;\\n+      }\\n+      if (order.order_type === 'MAKER') {\\n+        return order.volume;\\n+      }\\n+      if (order.order_type === 'MARKET') {\\n+        if (order.order_direction === 'OPEN_SHORT' || order.order_direction === 'CLOSE_LONG') {\\n+          return order.volume;\\n+        }\\n+        //\\n+        const price = await firstValueFrom(\\n+          spotMarketTickers$.pipe(\\n+            map((x) =>\\n+              mapOrderDirectionToPosSide(order.order_direction) === 'long'\\n+                ? +x[instId].askPx\\n+                : +x[instId].bidPx,\\n+            ),\\n+          ),\\n+        );\\n+        if (!price) {\\n+          throw new Error(`invalid tick: ${price}`);\\n+        }\\n+        console.info(formatTime(Date.now()), 'SubmitOrder', 'price', price);\\n+        const theProduct = await firstValueFrom(\\n+          productService.mapProductIdToProduct$.pipe(map((x) => x.get(order.product_id))),\\n+        );\\n+        if (!theProduct) {\\n+          throw new Error(`Unknown product: ${order.position_id}`);\\n+        }\\n+        return roundToStep(order.volume * price, theProduct.volume_step!);\\n+      }\\n+\\n+      return 0;\\n+    }\\n+\\n+    if (instType === 'SPOT') {\\n+      return order.volume;\\n+    }\\n+\\n+    throw new Error(`Unknown instType: ${instType}`);\\n+  };\\n+\\n+  const params = {\\n+    instId,\\n+    tdMode: instType === 'SPOT' ? 'cash' : 'cross',\\n+    side: mapOrderDirectionToSide(order.order_direction),\\n+    posSide:\\n+      instType === 'MARGIN' || instType === 'SPOT'\\n+        ? 'net'\\n+        : mapOrderDirectionToPosSide(order.order_direction),\\n+    ordType: mapOrderTypeToOrdType(order.order_type),\\n+    sz: (await mapOrderVolumeToSz(order)).toString(),\\n+    tgtCcy: instType === 'SPOT' && order.order_type === 'MARKET' ? 'base_ccy' : undefined,\\n+    reduceOnly:\\n+      instType === 'MARGIN' && ['CLOSE_LONG', 'CLOSE_SHORT'].includes(order.order_direction ?? '')\\n+        ? 'true'\\n+        : undefined,\\n+    px: order.order_type === 'LIMIT' || order.order_type === 'MAKER' ? order.price!.toString() : undefined,\\n+    ccy: instType === 'MARGIN' ? 'USDT' : undefined,\\n+  };\\n+  console.info(formatTime(Date.now()), 'SubmitOrder', 'params', JSON.stringify(params));\\n+  const res = await postTradeOrder(credential, params);\\n+  if (res.code === '0' && res.data?.[0]?.ordId) {\\n+    return { order_id: res.data[0].ordId };\\n+  }\\n+  throw `Failed to submit order: ${res.code} ${res.msg}: ${res.data\\n+    .map((x) => `${x.sCode} ${x.sMsg}`)\\n+    .join('; ')}`;\\n+};\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/src/index.ts\",\n+          \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/index.ts b/apps/vendor-okx/src/index.ts\\nindex 59493ae37..9432e574a 100644\\n--- a/apps/vendor-okx/src/index.ts\\n+++ b/apps/vendor-okx/src/index.ts\\n@@ -3,0 +4 @@ import './api-service';\\n+import './experimental/exchange';\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-03-16-13.json\",\n+          \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-03-16-13.json b/common/changes/@yuants/vendor-okx/2025-12-03-16-13.json\\nnew file mode 100644\\nindex 000000000..9ea10362c\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-03-16-13.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"new exp\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 9,\n+          \"path\": \"ui/web/src/modules/Products/InlineProductId.tsx\",\n+          \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/ui/web/src/modules/Products/InlineProductId.tsx b/ui/web/src/modules/Products/InlineProductId.tsx\\nindex 053dc9a3b..50a7327bf 100644\\n--- a/ui/web/src/modules/Products/InlineProductId.tsx\\n+++ b/ui/web/src/modules/Products/InlineProductId.tsx\\n@@ -9 +9 @@ import { terminal$ } from '../Terminals';\\n-const ProductCard = (props: { datasource_id: string; product_id: string }) => {\\n+const ProductCard = (props: { product_id: string }) => {\\n@@ -18,3 +18 @@ const ProductCard = (props: { datasource_id: string; product_id: string }) => {\\n-              `select * from product where datasource_id = ${escapeSQL(\\n-                props.datasource_id,\\n-              )} and product_id = ${escapeSQL(props.product_id)}`,\\n+              `select * from product where product_id = ${escapeSQL(props.product_id)}`,\\n@@ -25 +23 @@ const ProductCard = (props: { datasource_id: string; product_id: string }) => {\\n-      [props.datasource_id, props.product_id],\\n+      [props.product_id],\\n@@ -31 +29 @@ const ProductCard = (props: { datasource_id: string; product_id: string }) => {\\n-      <Card title={encodePath(props.datasource_id, props.product_id)} loading={true}>\\n+      <Card title={props.product_id} loading={true}>\\n@@ -38 +36 @@ const ProductCard = (props: { datasource_id: string; product_id: string }) => {\\n-    <Card title={encodePath(product.datasource_id, product.product_id)}>\\n+    <Card title={product.product_id}>\\n@@ -61 +59,2 @@ export const InlineProductId = (props: { datasource_id: string; product_id: stri\\n-    <Popover content={<ProductCard datasource_id={props.datasource_id} product_id={props.product_id} />}>\\n+    <Popover content={<ProductCard product_id={props.product_id} />}>\\n+      ({props.datasource_id})\\n@@ -63 +62 @@ export const InlineProductId = (props: { datasource_id: string; product_id: stri\\n-        {encodePath(props.datasource_id, props.product_id)}\\n+        {props.product_id}\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"53adb24ee13d6c3856af1917928f18ff735597b8\",\n+      \"short\": \"53adb24ee\",\n+      \"author\": \"Ryan\",\n+      \"email\": \"stayrealrhr@gmail.com\",\n+      \"authoredAt\": \"2025-12-04 00:55:27 +0800\",\n+      \"subject\": \"feat: refac gate (#2181)\",\n+      \"files\": [\n+        {\n+          \"additions\": 28,\n+          \"deletions\": 26,\n+          \"path\": \"apps/vendor-gate/src/services/accounts/future.ts\",\n+          \"patch\": \"commit 53adb24ee13d6c3856af1917928f18ff735597b8\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Thu Dec 4 00:55:27 2025 +0800\\n\\n    feat: refac gate (#2181)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/future.ts b/apps/vendor-gate/src/services/accounts/future.ts\\nindex 2843fd914..840e18154 100644\\n--- a/apps/vendor-gate/src/services/accounts/future.ts\\n+++ b/apps/vendor-gate/src/services/accounts/future.ts\\n@@ -13,26 +13,28 @@ export const loadFuturePositions = async (credential: ICredential): Promise<IPos\\n-  return positions.map((position): IPosition => {\\n-    const product_id = encodePath('GATE', 'FUTURE', position.contract);\\n-    const theProduct = productMap.get(product_id);\\n-    const volume = Math.abs(position.size);\\n-    const closable_price = Number(position.mark_price);\\n-    const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\\n-    return {\\n-      datasource_id: 'GATE',\\n-      position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n-      product_id,\\n-      direction:\\n-        position.mode === 'dual_long'\\n-          ? 'LONG'\\n-          : position.mode === 'dual_short'\\n-          ? 'SHORT'\\n-          : position.size > 0\\n-          ? 'LONG'\\n-          : 'SHORT',\\n-      volume,\\n-      free_volume: Math.abs(position.size),\\n-      position_price: Number(position.entry_price),\\n-      closable_price,\\n-      floating_profit: Number(position.unrealised_pnl),\\n-      valuation,\\n-    };\\n-  });\\n+  return positions\\n+    .filter((pos) => Math.abs(pos.size) > 0)\\n+    .map((position): IPosition => {\\n+      const product_id = encodePath('GATE', 'FUTURE', position.contract);\\n+      const theProduct = productMap.get(product_id);\\n+      const volume = Math.abs(position.size);\\n+      const closable_price = Number(position.mark_price);\\n+      const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\\n+      return {\\n+        datasource_id: 'GATE',\\n+        position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n+        product_id,\\n+        direction:\\n+          position.mode === 'dual_long'\\n+            ? 'LONG'\\n+            : position.mode === 'dual_short'\\n+            ? 'SHORT'\\n+            : position.size > 0\\n+            ? 'LONG'\\n+            : 'SHORT',\\n+        volume,\\n+        free_volume: Math.abs(position.size),\\n+        position_price: Number(position.entry_price),\\n+        closable_price,\\n+        floating_profit: Number(position.unrealised_pnl),\\n+        valuation,\\n+      };\\n+    });\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/src/services/accounts/spot.ts\",\n+          \"patch\": \"commit 53adb24ee13d6c3856af1917928f18ff735597b8\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Thu Dec 4 00:55:27 2025 +0800\\n\\n    feat: refac gate (#2181)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/spot.ts b/apps/vendor-gate/src/services/accounts/spot.ts\\nindex f319b1c02..b861a4584 100644\\n--- a/apps/vendor-gate/src/services/accounts/spot.ts\\n+++ b/apps/vendor-gate/src/services/accounts/spot.ts\\n@@ -14 +14 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-      product_id: encodePath('GATE', 'SPOT', `${item.currency}-USDT`),\\n+      product_id: encodePath('GATE', 'SPOT', `${item.currency}`),\\n\"\n+        },\n+        {\n+          \"additions\": 11,\n+          \"deletions\": 7,\n+          \"path\": \"apps/vendor-gate/src/services/accounts/unified.ts\",\n+          \"patch\": \"commit 53adb24ee13d6c3856af1917928f18ff735597b8\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Thu Dec 4 00:55:27 2025 +0800\\n\\n    feat: refac gate (#2181)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/unified.ts b/apps/vendor-gate/src/services/accounts/unified.ts\\nindex cc2a78a3b..f49b87a16 100644\\n--- a/apps/vendor-gate/src/services/accounts/unified.ts\\n+++ b/apps/vendor-gate/src/services/accounts/unified.ts\\n@@ -4,0 +5 @@ import { loadFuturePositions } from './future';\\n+import { encodePath } from '@yuants/utils';\\n@@ -15 +15,0 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-\\n@@ -18 +17,0 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-      if (currency === 'USDT') return undefined;\\n@@ -23,3 +22,7 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-      const closable_price = Number(\\n-        spotTickerList.find((ticker) => ticker.currency_pair === currency_pair)?.last || 0,\\n-      );\\n+      if (currency === 'GTSOL') {\\n+        currency_pair = 'SOL_USDT';\\n+      }\\n+      const closable_price =\\n+        currency === 'USDT'\\n+          ? 1\\n+          : Number(spotTickerList.find((ticker) => ticker.currency_pair === currency_pair)?.last || 0);\\n@@ -26,0 +30 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n+      if (Math.abs(volume) === 0) return undefined;\\n@@ -30 +34 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-        product_id: currency,\\n+        product_id: encodePath('GATE', 'SPOT', currency),\\n@@ -36 +40 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-        floating_profit: 0,\\n+        floating_profit: closable_price * volume,\\n\"\n+        },\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 5,\n+          \"path\": \"apps/vendor-gate/src/services/exchange.ts\",\n+          \"patch\": \"commit 53adb24ee13d6c3856af1917928f18ff735597b8\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Thu Dec 4 00:55:27 2025 +0800\\n\\n    feat: refac gate (#2181)\\n\\ndiff --git a/apps/vendor-gate/src/services/exchange.ts b/apps/vendor-gate/src/services/exchange.ts\\nindex 810e9c0b8..5672321de 100644\\n--- a/apps/vendor-gate/src/services/exchange.ts\\n+++ b/apps/vendor-gate/src/services/exchange.ts\\n@@ -7 +6,0 @@ import { getCredentialId } from './accounts/profile';\\n-import { getSpotAccountInfo } from './accounts/spot';\\n@@ -31,3 +30,2 @@ provideExchangeServices<ICredential>(terminal, {\\n-    const [uFuturePositions, spotPositions, unifiedPositions] = await Promise.all([\\n-      getFutureAccountInfo(credential),\\n-      getSpotAccountInfo(credential),\\n+    const [unifiedPositions] = await Promise.all([\\n+      // getFutureAccountInfo(credential),\\n@@ -36 +34 @@ provideExchangeServices<ICredential>(terminal, {\\n-    return [...uFuturePositions, ...spotPositions, ...unifiedPositions];\\n+    return [...unifiedPositions];\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-03-16-53.json\",\n+          \"patch\": \"commit 53adb24ee13d6c3856af1917928f18ff735597b8\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Thu Dec 4 00:55:27 2025 +0800\\n\\n    feat: refac gate (#2181)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-03-16-53.json b/common/changes/@yuants/vendor-gate/2025-12-03-16-53.json\\nnew file mode 100644\\nindex 000000000..4e824ad04\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-03-16-53.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"refactor gate\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"3f340981c8419fd17f1eb0222f68fd53aa840cbb\",\n+      \"short\": \"3f340981c\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-04 01:01:09 +0800\",\n+      \"subject\": \"chore: bump version (#2182)\",\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.json\",\n+          \"patch\": \"commit 3f340981c8419fd17f1eb0222f68fd53aa840cbb\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 01:01:09 2025 +0800\\n\\n    chore: bump version (#2182)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\\nindex 3ee881c0b..7acf121ce 100644\\n--- a/apps/vendor-gate/CHANGELOG.json\\n+++ b/apps/vendor-gate/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.4.14\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-gate_v0.4.14\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 16:57:14 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"refactor gate\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.md\",\n+          \"patch\": \"commit 3f340981c8419fd17f1eb0222f68fd53aa840cbb\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 01:01:09 2025 +0800\\n\\n    chore: bump version (#2182)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\\nindex 71cf42186..8d49eb243 100644\\n--- a/apps/vendor-gate/CHANGELOG.md\\n+++ b/apps/vendor-gate/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 16:57:14 GMT and should not be manually modified.\\n+\\n+## 0.4.14\\n+Wed, 03 Dec 2025 16:57:14 GMT\\n+\\n+### Patches\\n+\\n+- refactor gate\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/package.json\",\n+          \"patch\": \"commit 3f340981c8419fd17f1eb0222f68fd53aa840cbb\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 01:01:09 2025 +0800\\n\\n    chore: bump version (#2182)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\\nindex f05b4fc6c..c9a97ef7c 100644\\n--- a/apps/vendor-gate/package.json\\n+++ b/apps/vendor-gate/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.13\\\",\\n+  \\\"version\\\": \\\"0.4.14\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"patch\": \"commit 3f340981c8419fd17f1eb0222f68fd53aa840cbb\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 01:01:09 2025 +0800\\n\\n    chore: bump version (#2182)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex 75b4e0291..b82ca328b 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.28.0\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.28.0\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 16:57:14 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"minor\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"new exp\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"patch\": \"commit 3f340981c8419fd17f1eb0222f68fd53aa840cbb\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 01:01:09 2025 +0800\\n\\n    chore: bump version (#2182)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex 068d5d585..e93b27c3d 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 16:57:14 GMT and should not be manually modified.\\n+\\n+## 0.28.0\\n+Wed, 03 Dec 2025 16:57:14 GMT\\n+\\n+### Minor changes\\n+\\n+- new exp\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"patch\": \"commit 3f340981c8419fd17f1eb0222f68fd53aa840cbb\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 01:01:09 2025 +0800\\n\\n    chore: bump version (#2182)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 4186a38f7..2fe88a8e1 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.27.12\\\",\\n+  \\\"version\\\": \\\"0.28.0\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-gate/2025-12-03-16-53.json\",\n+          \"patch\": \"commit 3f340981c8419fd17f1eb0222f68fd53aa840cbb\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 01:01:09 2025 +0800\\n\\n    chore: bump version (#2182)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-03-16-53.json b/common/changes/@yuants/vendor-gate/2025-12-03-16-53.json\\ndeleted file mode 100644\\nindex 4e824ad04..000000000\\n--- a/common/changes/@yuants/vendor-gate/2025-12-03-16-53.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n-      \\\"comment\\\": \\\"refactor gate\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/{main_2025-12-03-10-25.json => main_2025-12-03-16-57.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-okx/2025-12-03-16-13.json\",\n+          \"patch\": \"commit 3f340981c8419fd17f1eb0222f68fd53aa840cbb\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 01:01:09 2025 +0800\\n\\n    chore: bump version (#2182)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-03-16-13.json b/common/changes/@yuants/vendor-okx/2025-12-03-16-13.json\\ndeleted file mode 100644\\nindex 9ea10362c..000000000\\n--- a/common/changes/@yuants/vendor-okx/2025-12-03-16-13.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n-      \\\"comment\\\": \\\"new exp\\\",\\n-      \\\"type\\\": \\\"minor\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-03-10-25.json => main_2025-12-03-16-57.json}\",\n+          \"patch\": \"\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\",\n+      \"short\": \"fd5ee0334\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-04 01:53:58 +0800\",\n+      \"subject\": \"feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\",\n+      \"files\": [\n+        {\n+          \"additions\": 31,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/src/api/public-api.ts\",\n+          \"patch\": \"commit fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 01:53:58 2025 +0800\\n\\n    feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\\n\\ndiff --git a/apps/vendor-bitget/src/api/public-api.ts b/apps/vendor-bitget/src/api/public-api.ts\\nindex 18d98779d..9a3f8b0c9 100644\\n--- a/apps/vendor-bitget/src/api/public-api.ts\\n+++ b/apps/vendor-bitget/src/api/public-api.ts\\n@@ -12 +11,0 @@ export interface IMixMarketContract {\\n-  productType: string;\\n@@ -14,0 +14,10 @@ export interface IMixMarketContract {\\n+  buyLimitPriceRatio: string;\\n+  sellLimitPriceRatio: string;\\n+  feeRateUpRatio: string;\\n+  makerFeeRate: string;\\n+  takerFeeRate: string;\\n+  openCostUpRatio: string;\\n+  supportMarginCoins: string[];\\n+  minTradeNum: string;\\n+  priceEndStep: string;\\n+  volumePlace: string;\\n@@ -16,0 +26,21 @@ export interface IMixMarketContract {\\n+  symbolType: string;\\n+  minTradeUSDT: string;\\n+  maxSymbolOrderNum: string;\\n+  maxProductOrderNum: string;\\n+  maxPositionNum: string;\\n+  symbolStatus: string;\\n+  offTime: string;\\n+  limitOpenTime: string;\\n+  deliveryTime: string;\\n+  deliveryStartTime: string;\\n+  deliveryPeriod: string;\\n+  launchTime: string;\\n+  fundInterval: string;\\n+  minLever: string;\\n+  maxLever: string;\\n+  posLimit: string;\\n+  maintainTime: string;\\n+  openTime: string;\\n+  maxMarketOrderQty: string;\\n+  maxOrderQty: string;\\n+  isRwa: string;\\n\"\n+        },\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 2,\n+          \"path\": \"apps/vendor-bitget/src/services/markets/product.ts\",\n+          \"patch\": \"commit fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 01:53:58 2025 +0800\\n\\n    feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\\n\\ndiff --git a/apps/vendor-bitget/src/services/markets/product.ts b/apps/vendor-bitget/src/services/markets/product.ts\\nindex 0ce7909d5..1a59f6074 100644\\n--- a/apps/vendor-bitget/src/services/markets/product.ts\\n+++ b/apps/vendor-bitget/src/services/markets/product.ts\\n@@ -33 +33 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      margin_rate: 0,\\n+      margin_rate: 1 / Number(product.maxLever),\\n@@ -55 +55 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      margin_rate: 0,\\n+      margin_rate: 1 / Number(product.maxLever),\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/exchange/2025-12-03-17-51.json\",\n+          \"patch\": \"commit fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 01:53:58 2025 +0800\\n\\n    feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\\n\\ndiff --git a/common/changes/@yuants/exchange/2025-12-03-17-51.json b/common/changes/@yuants/exchange/2025-12-03-17-51.json\\nnew file mode 100644\\nindex 000000000..eed15e5d2\\n--- /dev/null\\n+++ b/common/changes/@yuants/exchange/2025-12-03-17-51.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/exchange\\\",\\n+      \\\"comment\\\": \\\"uniform valuation and interest\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/exchange\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-bitget/2025-12-03-17-51.json\",\n+          \"patch\": \"commit fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 01:53:58 2025 +0800\\n\\n    feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\\n\\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-03-17-51.json b/common/changes/@yuants/vendor-bitget/2025-12-03-17-51.json\\nnew file mode 100644\\nindex 000000000..0af5cb4a6\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-bitget/2025-12-03-17-51.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\",\\n+      \\\"comment\\\": \\\"fix product\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 0,\n+          \"path\": \"common/config/rush/pnpm-lock.yaml\",\n+          \"patch\": \"commit fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 01:53:58 2025 +0800\\n\\n    feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\\n\\ndiff --git a/common/config/rush/pnpm-lock.yaml b/common/config/rush/pnpm-lock.yaml\\nindex 7e2675be3..b111377c3 100644\\n--- a/common/config/rush/pnpm-lock.yaml\\n+++ b/common/config/rush/pnpm-lock.yaml\\n@@ -2013,0 +2014 @@ importers:\\n+      '@yuants/data-quote': workspace:*\\n@@ -2014,0 +2016 @@ importers:\\n+      '@yuants/sql': workspace:*\\n@@ -2015,0 +2018 @@ importers:\\n+      '@yuants/utils': workspace:*\\n@@ -2021,0 +2025 @@ importers:\\n+      '@yuants/data-quote': link:../data-quote\\n@@ -2022,0 +2027,2 @@ importers:\\n+      '@yuants/sql': link:../sql\\n+      '@yuants/utils': link:../utils\\n\"\n+        },\n+        {\n+          \"additions\": 3,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/exchange/package.json\",\n+          \"patch\": \"commit fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 01:53:58 2025 +0800\\n\\n    feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\\n\\ndiff --git a/libraries/exchange/package.json b/libraries/exchange/package.json\\nindex 83f64ad0f..9acd6acd9 100644\\n--- a/libraries/exchange/package.json\\n+++ b/libraries/exchange/package.json\\n@@ -33,0 +34,3 @@\\n+    \\\"@yuants/data-quote\\\": \\\"workspace:*\\\",\\n+    \\\"@yuants/sql\\\": \\\"workspace:*\\\",\\n+    \\\"@yuants/utils\\\": \\\"workspace:*\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 43,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/exchange/src/index.ts\",\n+          \"patch\": \"commit fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 01:53:58 2025 +0800\\n\\n    feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\\n\\ndiff --git a/libraries/exchange/src/index.ts b/libraries/exchange/src/index.ts\\nindex 4a6deaff9..7f552b9b5 100644\\n--- a/libraries/exchange/src/index.ts\\n+++ b/libraries/exchange/src/index.ts\\n@@ -3 +3,2 @@ import { IOrder } from '@yuants/data-order';\\n-import { IProduct } from '@yuants/data-product';\\n+import { createClientProductCache, IProduct } from '@yuants/data-product';\\n+import { IQuote } from '@yuants/data-quote';\\n@@ -4,0 +6 @@ import { IResponse, Terminal } from '@yuants/protocol';\\n+import { escapeSQL, requestSQL } from '@yuants/sql';\\n@@ -5,0 +8 @@ import { JSONSchema7 } from 'json-schema';\\n+import { createCache } from '../../cache/lib';\\n@@ -108,0 +112,11 @@ export const provideExchangeServices = <T>(terminal: Terminal, exchange: IExchan\\n+  const quoteCache = createCache<IQuote>(\\n+    async (product_id) => {\\n+      const sql = `select * from quote where product_id = ${escapeSQL(product_id)}`;\\n+      const [quote] = await requestSQL<IQuote[]>(terminal, sql);\\n+      return quote;\\n+    },\\n+    { expire: 30_000 },\\n+  );\\n+\\n+  const productCache = createClientProductCache(terminal, { expire: 3600_000 });\\n+\\n@@ -163,0 +178,28 @@ export const provideExchangeServices = <T>(terminal: Terminal, exchange: IExchan\\n+      for (const pos of positions) {\\n+        const [theProduct, quote] = await Promise.all([\\n+          productCache.query(pos.product_id),\\n+          quoteCache.query(pos.product_id),\\n+        ]);\\n+\\n+        // 估值 = value_scale * volume * closable_price\\n+        if (theProduct) {\\n+          pos.valuation = Math.abs((theProduct.value_scale || 1) * pos.volume * pos.closable_price);\\n+        }\\n+\\n+        // 利率相关信息的追加\\n+        if (quote) {\\n+          if (quote.interest_rate_next_settled_at !== null) {\\n+            pos.settlement_scheduled_at = new Date(quote.interest_rate_next_settled_at).getTime();\\n+          }\\n+          if (pos.direction === 'LONG') {\\n+            if (quote.interest_rate_long !== null) {\\n+              pos.interest_to_settle = +quote.interest_rate_long * pos.valuation;\\n+            }\\n+          }\\n+          if (pos.direction === 'SHORT') {\\n+            if (quote.interest_rate_short !== null) {\\n+              pos.interest_to_settle = +quote.interest_rate_short * pos.valuation;\\n+            }\\n+          }\\n+        }\\n+      }\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"dd3c9961cb21bf6dcfd471e733a29d6e9454916d\",\n+      \"short\": \"dd3c9961c\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-04 02:01:03 +0800\",\n+      \"subject\": \"chore: bump version (#2185)\",\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex 67da85a81..a51bcb9b6 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.16\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.16\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 17:57:50 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex 7a147a3f6..b13d9c3b8 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 13:06:29 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+\\n+## 0.7.16\\n+Wed, 03 Dec 2025 17:57:50 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex da226eef8..fd8dee6b7 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.15\\\",\\n+  \\\"version\\\": \\\"0.7.16\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\\nindex 1724ac9c1..4bd3022de 100644\\n--- a/apps/vendor-binance/CHANGELOG.json\\n+++ b/apps/vendor-binance/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.8\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-binance_v0.10.8\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 17:57:50 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.md\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\\nindex 989cf0999..81eae0235 100644\\n--- a/apps/vendor-binance/CHANGELOG.md\\n+++ b/apps/vendor-binance/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 12:57:13 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+\\n+## 0.10.8\\n+Wed, 03 Dec 2025 17:57:50 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/package.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\\nindex 794b2a173..f7c9ed221 100644\\n--- a/apps/vendor-binance/package.json\\n+++ b/apps/vendor-binance/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.7\\\",\\n+  \\\"version\\\": \\\"0.10.8\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 22,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-bitget/CHANGELOG.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/CHANGELOG.json b/apps/vendor-bitget/CHANGELOG.json\\nindex 242ec1fb9..ad368ad2c 100644\\n--- a/apps/vendor-bitget/CHANGELOG.json\\n+++ b/apps/vendor-bitget/CHANGELOG.json\\n@@ -3,0 +4,22 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.3\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-bitget_v0.10.3\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 17:57:50 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix product\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/CHANGELOG.md\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/CHANGELOG.md b/apps/vendor-bitget/CHANGELOG.md\\nindex 729aef14a..950db73af 100644\\n--- a/apps/vendor-bitget/CHANGELOG.md\\n+++ b/apps/vendor-bitget/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+\\n+## 0.10.3\\n+Wed, 03 Dec 2025 17:57:50 GMT\\n+\\n+### Patches\\n+\\n+- fix product\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/package.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/package.json b/apps/vendor-bitget/package.json\\nindex c4b693b41..a933a6a53 100644\\n--- a/apps/vendor-bitget/package.json\\n+++ b/apps/vendor-bitget/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.2\\\",\\n+  \\\"version\\\": \\\"0.10.3\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\\nindex 7acf121ce..9d56067ef 100644\\n--- a/apps/vendor-gate/CHANGELOG.json\\n+++ b/apps/vendor-gate/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.4.15\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-gate_v0.4.15\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 17:57:50 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.md\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\\nindex 8d49eb243..3198f602c 100644\\n--- a/apps/vendor-gate/CHANGELOG.md\\n+++ b/apps/vendor-gate/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 16:57:14 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+\\n+## 0.4.15\\n+Wed, 03 Dec 2025 17:57:50 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/package.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\\nindex c9a97ef7c..f55c40cbf 100644\\n--- a/apps/vendor-gate/package.json\\n+++ b/apps/vendor-gate/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.14\\\",\\n+  \\\"version\\\": \\\"0.4.15\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.json b/apps/vendor-huobi/CHANGELOG.json\\nindex 5acf29285..dea8e654d 100644\\n--- a/apps/vendor-huobi/CHANGELOG.json\\n+++ b/apps/vendor-huobi/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.15.6\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-huobi_v0.15.6\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 17:57:50 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.md\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.md b/apps/vendor-huobi/CHANGELOG.md\\nindex 0cd3255cc..28dd0136d 100644\\n--- a/apps/vendor-huobi/CHANGELOG.md\\n+++ b/apps/vendor-huobi/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+\\n+## 0.15.6\\n+Wed, 03 Dec 2025 17:57:50 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/package.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/package.json b/apps/vendor-huobi/package.json\\nindex 8558bdf7a..89a7c6204 100644\\n--- a/apps/vendor-huobi/package.json\\n+++ b/apps/vendor-huobi/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.15.5\\\",\\n+  \\\"version\\\": \\\"0.15.6\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.json b/apps/vendor-hyperliquid/CHANGELOG.json\\nindex 43a26674c..8ffe00dc2 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.json\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.6\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-hyperliquid_v0.7.6\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 17:57:50 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.md\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.md b/apps/vendor-hyperliquid/CHANGELOG.md\\nindex 328f8c5ff..5f92d036f 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.md\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 12:57:13 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+\\n+## 0.7.6\\n+Wed, 03 Dec 2025 17:57:50 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/package.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/package.json b/apps/vendor-hyperliquid/package.json\\nindex 39034ada5..c7876343a 100644\\n--- a/apps/vendor-hyperliquid/package.json\\n+++ b/apps/vendor-hyperliquid/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.5\\\",\\n+  \\\"version\\\": \\\"0.7.6\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex b82ca328b..aeaed7fe1 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.28.1\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.28.1\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 17:57:50 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex e93b27c3d..37af00a5a 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 16:57:14 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+\\n+## 0.28.1\\n+Wed, 03 Dec 2025 17:57:50 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 2fe88a8e1..8612a6143 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.28.0\\\",\\n+  \\\"version\\\": \\\"0.28.1\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-turboflow/CHANGELOG.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/CHANGELOG.json b/apps/vendor-turboflow/CHANGELOG.json\\nindex cee4dcd2f..43c27a26e 100644\\n--- a/apps/vendor-turboflow/CHANGELOG.json\\n+++ b/apps/vendor-turboflow/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"1.2.7\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-turboflow_v1.2.7\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 17:57:50 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-turboflow/CHANGELOG.md\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/CHANGELOG.md b/apps/vendor-turboflow/CHANGELOG.md\\nindex dccd829f3..16f7df2fe 100644\\n--- a/apps/vendor-turboflow/CHANGELOG.md\\n+++ b/apps/vendor-turboflow/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+\\n+## 1.2.7\\n+Wed, 03 Dec 2025 17:57:50 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-turboflow/package.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/package.json b/apps/vendor-turboflow/package.json\\nindex 9e8bbdcfb..30f62c056 100644\\n--- a/apps/vendor-turboflow/package.json\\n+++ b/apps/vendor-turboflow/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"1.2.6\\\",\\n+  \\\"version\\\": \\\"1.2.7\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/virtual-exchange/CHANGELOG.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\\nindex 5d20d2923..e9bdcc4b8 100644\\n--- a/apps/virtual-exchange/CHANGELOG.json\\n+++ b/apps/virtual-exchange/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.5.1\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-virtual-exchange_v0.5.1\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 17:57:50 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.0`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/CHANGELOG.md\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\\nindex bf43a9e3e..2cf9b58e6 100644\\n--- a/apps/virtual-exchange/CHANGELOG.md\\n+++ b/apps/virtual-exchange/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+\\n+## 0.5.1\\n+Wed, 03 Dec 2025 17:57:50 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/package.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\\nindex 60a19d0d9..3f035480c 100644\\n--- a/apps/virtual-exchange/package.json\\n+++ b/apps/virtual-exchange/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.5.0\\\",\\n+  \\\"version\\\": \\\"0.5.1\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-virtual-exchange/{main_2025-12-03-10-25.json => main_2025-12-03-17-57.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/exchange/2025-12-03-17-51.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/exchange/2025-12-03-17-51.json b/common/changes/@yuants/exchange/2025-12-03-17-51.json\\ndeleted file mode 100644\\nindex eed15e5d2..000000000\\n--- a/common/changes/@yuants/exchange/2025-12-03-17-51.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/exchange\\\",\\n-      \\\"comment\\\": \\\"uniform valuation and interest\\\",\\n-      \\\"type\\\": \\\"minor\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/exchange\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/exchange/{main_2025-12-03-10-25.json => main_2025-12-03-17-57.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-03-13-06.json => main_2025-12-03-17-57.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/{main_2025-12-03-12-57.json => main_2025-12-03-17-57.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/vendor-bitget/2025-12-03-17-51.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-03-17-51.json b/common/changes/@yuants/vendor-bitget/2025-12-03-17-51.json\\ndeleted file mode 100644\\nindex 0af5cb4a6..000000000\\n--- a/common/changes/@yuants/vendor-bitget/2025-12-03-17-51.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\",\\n-      \\\"comment\\\": \\\"fix product\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-bitget/{main_2025-12-03-10-25.json => main_2025-12-03-17-57.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/{main_2025-12-03-16-57.json => main_2025-12-03-17-57.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/{main_2025-12-03-10-25.json => main_2025-12-03-17-57.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/{main_2025-12-03-12-57.json => main_2025-12-03-17-57.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-03-16-57.json => main_2025-12-03-17-57.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-turboflow/{main_2025-12-03-10-25.json => main_2025-12-03-17-57.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/exchange/CHANGELOG.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/exchange/CHANGELOG.json b/libraries/exchange/CHANGELOG.json\\nindex 354a22e9c..0b84459b9 100644\\n--- a/libraries/exchange/CHANGELOG.json\\n+++ b/libraries/exchange/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.3.0\\\",\\n+      \\\"tag\\\": \\\"@yuants/exchange_v0.3.0\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 17:57:50 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"minor\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"uniform valuation and interest\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/exchange/CHANGELOG.md\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/exchange/CHANGELOG.md b/libraries/exchange/CHANGELOG.md\\nindex cdf530eeb..bb4c69f76 100644\\n--- a/libraries/exchange/CHANGELOG.md\\n+++ b/libraries/exchange/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 10:25:12 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+\\n+## 0.3.0\\n+Wed, 03 Dec 2025 17:57:50 GMT\\n+\\n+### Minor changes\\n+\\n+- uniform valuation and interest\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/exchange/package.json\",\n+          \"patch\": \"commit dd3c9961cb21bf6dcfd471e733a29d6e9454916d\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:01:03 2025 +0800\\n\\n    chore: bump version (#2185)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/exchange/package.json b/libraries/exchange/package.json\\nindex 9acd6acd9..ad503b16f 100644\\n--- a/libraries/exchange/package.json\\n+++ b/libraries/exchange/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.2.1\\\",\\n+  \\\"version\\\": \\\"0.3.0\\\",\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"e99ecdc80b5f9b66883603ce1c51092ed345e90f\",\n+      \"short\": \"e99ecdc80\",\n+      \"author\": \"CZ\",\n+      \"email\": \"zheng.chen@no-trade-no.life\",\n+      \"authoredAt\": \"2025-12-04 02:19:14 +0800\",\n+      \"subject\": \"feat: add cache dependency and import in exchange library (#2186)\",\n+      \"files\": [\n+        {\n+          \"additions\": 10,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/exchange/2025-12-03-18-16.json\",\n+          \"patch\": \"commit e99ecdc80b5f9b66883603ce1c51092ed345e90f\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 02:19:14 2025 +0800\\n\\n    feat: add cache dependency and import in exchange library (#2186)\\n\\ndiff --git a/common/changes/@yuants/exchange/2025-12-03-18-16.json b/common/changes/@yuants/exchange/2025-12-03-18-16.json\\nnew file mode 100644\\nindex 000000000..8ece494dc\\n--- /dev/null\\n+++ b/common/changes/@yuants/exchange/2025-12-03-18-16.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/exchange\\\",\\n+      \\\"comment\\\": \\\"fix\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/exchange\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 2,\n+          \"deletions\": 0,\n+          \"path\": \"common/config/rush/pnpm-lock.yaml\",\n+          \"patch\": \"commit e99ecdc80b5f9b66883603ce1c51092ed345e90f\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 02:19:14 2025 +0800\\n\\n    feat: add cache dependency and import in exchange library (#2186)\\n\\ndiff --git a/common/config/rush/pnpm-lock.yaml b/common/config/rush/pnpm-lock.yaml\\nindex b111377c3..d836460f8 100644\\n--- a/common/config/rush/pnpm-lock.yaml\\n+++ b/common/config/rush/pnpm-lock.yaml\\n@@ -2010,0 +2011 @@ importers:\\n+      '@yuants/cache': workspace:*\\n@@ -2021,0 +2023 @@ importers:\\n+      '@yuants/cache': link:../cache\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/exchange/package.json\",\n+          \"patch\": \"commit e99ecdc80b5f9b66883603ce1c51092ed345e90f\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 02:19:14 2025 +0800\\n\\n    feat: add cache dependency and import in exchange library (#2186)\\n\\ndiff --git a/libraries/exchange/package.json b/libraries/exchange/package.json\\nindex ad503b16f..26d4dd63f 100644\\n--- a/libraries/exchange/package.json\\n+++ b/libraries/exchange/package.json\\n@@ -34,0 +35 @@\\n+    \\\"@yuants/cache\\\": \\\"workspace:*\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/exchange/src/index.ts\",\n+          \"patch\": \"commit e99ecdc80b5f9b66883603ce1c51092ed345e90f\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 02:19:14 2025 +0800\\n\\n    feat: add cache dependency and import in exchange library (#2186)\\n\\ndiff --git a/libraries/exchange/src/index.ts b/libraries/exchange/src/index.ts\\nindex 7f552b9b5..be6004e00 100644\\n--- a/libraries/exchange/src/index.ts\\n+++ b/libraries/exchange/src/index.ts\\n@@ -0,0 +1 @@\\n+import { createCache } from '@yuants/cache';\\n@@ -8 +8,0 @@ import { JSONSchema7 } from 'json-schema';\\n-import { createCache } from '../../cache/lib';\\n\"\n+        }\n+      ]\n+    },\n+    {\n+      \"hash\": \"a126bbb4025a5e602bf4f1f50f6ca225c5f96573\",\n+      \"short\": \"a126bbb40\",\n+      \"author\": \"humblelittlec1[bot]\",\n+      \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n+      \"authoredAt\": \"2025-12-04 02:20:25 +0800\",\n+      \"subject\": \"chore: bump version (#2187)\",\n+      \"files\": [\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\\nindex a51bcb9b6..36d113212 100644\\n--- a/apps/vendor-aster/CHANGELOG.json\\n+++ b/apps/vendor-aster/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.17\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-aster_v0.7.17\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 18:20:00 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/CHANGELOG.md\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\\nindex b13d9c3b8..e54418abb 100644\\n--- a/apps/vendor-aster/CHANGELOG.md\\n+++ b/apps/vendor-aster/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+\\n+## 0.7.17\\n+Wed, 03 Dec 2025 18:20:00 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-aster/package.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\\nindex fd8dee6b7..c65261618 100644\\n--- a/apps/vendor-aster/package.json\\n+++ b/apps/vendor-aster/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.16\\\",\\n+  \\\"version\\\": \\\"0.7.17\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\\nindex 4bd3022de..dfcef644e 100644\\n--- a/apps/vendor-binance/CHANGELOG.json\\n+++ b/apps/vendor-binance/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.9\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-binance_v0.10.9\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 18:20:00 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/CHANGELOG.md\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\\nindex 81eae0235..ef4fba6e7 100644\\n--- a/apps/vendor-binance/CHANGELOG.md\\n+++ b/apps/vendor-binance/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+\\n+## 0.10.9\\n+Wed, 03 Dec 2025 18:20:00 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-binance/package.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\\nindex f7c9ed221..401e06f8e 100644\\n--- a/apps/vendor-binance/package.json\\n+++ b/apps/vendor-binance/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.8\\\",\\n+  \\\"version\\\": \\\"0.10.9\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-bitget/CHANGELOG.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/CHANGELOG.json b/apps/vendor-bitget/CHANGELOG.json\\nindex ad368ad2c..ec75dd35e 100644\\n--- a/apps/vendor-bitget/CHANGELOG.json\\n+++ b/apps/vendor-bitget/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.10.4\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-bitget_v0.10.4\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 18:20:00 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/CHANGELOG.md\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/CHANGELOG.md b/apps/vendor-bitget/CHANGELOG.md\\nindex 950db73af..623a78f75 100644\\n--- a/apps/vendor-bitget/CHANGELOG.md\\n+++ b/apps/vendor-bitget/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+\\n+## 0.10.4\\n+Wed, 03 Dec 2025 18:20:00 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-bitget/package.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-bitget/package.json b/apps/vendor-bitget/package.json\\nindex a933a6a53..4e8fcb99f 100644\\n--- a/apps/vendor-bitget/package.json\\n+++ b/apps/vendor-bitget/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.10.3\\\",\\n+  \\\"version\\\": \\\"0.10.4\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\\nindex 9d56067ef..a25b27123 100644\\n--- a/apps/vendor-gate/CHANGELOG.json\\n+++ b/apps/vendor-gate/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.4.16\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-gate_v0.4.16\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 18:20:00 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/CHANGELOG.md\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\\nindex 3198f602c..fc34ccdf2 100644\\n--- a/apps/vendor-gate/CHANGELOG.md\\n+++ b/apps/vendor-gate/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+\\n+## 0.4.16\\n+Wed, 03 Dec 2025 18:20:00 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-gate/package.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\\nindex f55c40cbf..5d462aead 100644\\n--- a/apps/vendor-gate/package.json\\n+++ b/apps/vendor-gate/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.4.15\\\",\\n+  \\\"version\\\": \\\"0.4.16\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.json b/apps/vendor-huobi/CHANGELOG.json\\nindex dea8e654d..30be57eaf 100644\\n--- a/apps/vendor-huobi/CHANGELOG.json\\n+++ b/apps/vendor-huobi/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.15.7\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-huobi_v0.15.7\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 18:20:00 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/CHANGELOG.md\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/CHANGELOG.md b/apps/vendor-huobi/CHANGELOG.md\\nindex 28dd0136d..f17f885e9 100644\\n--- a/apps/vendor-huobi/CHANGELOG.md\\n+++ b/apps/vendor-huobi/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+\\n+## 0.15.7\\n+Wed, 03 Dec 2025 18:20:00 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-huobi/package.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-huobi/package.json b/apps/vendor-huobi/package.json\\nindex 89a7c6204..0c0306cc9 100644\\n--- a/apps/vendor-huobi/package.json\\n+++ b/apps/vendor-huobi/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.15.6\\\",\\n+  \\\"version\\\": \\\"0.15.7\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.json b/apps/vendor-hyperliquid/CHANGELOG.json\\nindex 8ffe00dc2..04b02727f 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.json\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.7.7\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-hyperliquid_v0.7.7\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 18:20:00 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/CHANGELOG.md\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.md b/apps/vendor-hyperliquid/CHANGELOG.md\\nindex 5f92d036f..632f8ed01 100644\\n--- a/apps/vendor-hyperliquid/CHANGELOG.md\\n+++ b/apps/vendor-hyperliquid/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+\\n+## 0.7.7\\n+Wed, 03 Dec 2025 18:20:00 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-hyperliquid/package.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-hyperliquid/package.json b/apps/vendor-hyperliquid/package.json\\nindex c7876343a..5a46f1033 100644\\n--- a/apps/vendor-hyperliquid/package.json\\n+++ b/apps/vendor-hyperliquid/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.7.6\\\",\\n+  \\\"version\\\": \\\"0.7.7\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\\nindex aeaed7fe1..8d65b1d3c 100644\\n--- a/apps/vendor-okx/CHANGELOG.json\\n+++ b/apps/vendor-okx/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.28.2\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-okx_v0.28.2\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 18:20:00 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/CHANGELOG.md\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\\nindex 37af00a5a..aa516f4b8 100644\\n--- a/apps/vendor-okx/CHANGELOG.md\\n+++ b/apps/vendor-okx/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+\\n+## 0.28.2\\n+Wed, 03 Dec 2025 18:20:00 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-okx/package.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\\nindex 8612a6143..8adb8de71 100644\\n--- a/apps/vendor-okx/package.json\\n+++ b/apps/vendor-okx/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.28.1\\\",\\n+  \\\"version\\\": \\\"0.28.2\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/vendor-turboflow/CHANGELOG.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/CHANGELOG.json b/apps/vendor-turboflow/CHANGELOG.json\\nindex 43c27a26e..fe3de1a15 100644\\n--- a/apps/vendor-turboflow/CHANGELOG.json\\n+++ b/apps/vendor-turboflow/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"1.2.8\\\",\\n+      \\\"tag\\\": \\\"@yuants/vendor-turboflow_v1.2.8\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 18:20:00 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-turboflow/CHANGELOG.md\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/CHANGELOG.md b/apps/vendor-turboflow/CHANGELOG.md\\nindex 16f7df2fe..1685f0091 100644\\n--- a/apps/vendor-turboflow/CHANGELOG.md\\n+++ b/apps/vendor-turboflow/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+\\n+## 1.2.8\\n+Wed, 03 Dec 2025 18:20:00 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/vendor-turboflow/package.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/vendor-turboflow/package.json b/apps/vendor-turboflow/package.json\\nindex 30f62c056..7c584f57e 100644\\n--- a/apps/vendor-turboflow/package.json\\n+++ b/apps/vendor-turboflow/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"1.2.7\\\",\\n+  \\\"version\\\": \\\"1.2.8\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"apps/virtual-exchange/CHANGELOG.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\\nindex e9bdcc4b8..07abfeb46 100644\\n--- a/apps/virtual-exchange/CHANGELOG.json\\n+++ b/apps/virtual-exchange/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.5.2\\\",\\n+      \\\"tag\\\": \\\"@yuants/app-virtual-exchange_v0.5.2\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 18:20:00 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ],\\n+        \\\"dependency\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Updating dependency \\\\\\\"@yuants/exchange\\\\\\\" to `0.3.1`\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 6,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/CHANGELOG.md\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\\nindex 2cf9b58e6..e02fcc74f 100644\\n--- a/apps/virtual-exchange/CHANGELOG.md\\n+++ b/apps/virtual-exchange/CHANGELOG.md\\n@@ -3 +3,6 @@\\n-This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+\\n+## 0.5.2\\n+Wed, 03 Dec 2025 18:20:00 GMT\\n+\\n+_Version update only_\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"apps/virtual-exchange/package.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\\nindex 3f035480c..c88895351 100644\\n--- a/apps/virtual-exchange/package.json\\n+++ b/apps/virtual-exchange/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.5.1\\\",\\n+  \\\"version\\\": \\\"0.5.2\\\",\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/app-virtual-exchange/{main_2025-12-03-17-57.json => main_2025-12-03-18-20.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 10,\n+          \"path\": \"common/changes/@yuants/exchange/2025-12-03-18-16.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/common/changes/@yuants/exchange/2025-12-03-18-16.json b/common/changes/@yuants/exchange/2025-12-03-18-16.json\\ndeleted file mode 100644\\nindex 8ece494dc..000000000\\n--- a/common/changes/@yuants/exchange/2025-12-03-18-16.json\\n+++ /dev/null\\n@@ -1,10 +0,0 @@\\n-{\\n-  \\\"changes\\\": [\\n-    {\\n-      \\\"packageName\\\": \\\"@yuants/exchange\\\",\\n-      \\\"comment\\\": \\\"fix\\\",\\n-      \\\"type\\\": \\\"patch\\\"\\n-    }\\n-  ],\\n-  \\\"packageName\\\": \\\"@yuants/exchange\\\"\\n-}\\n\\\\ No newline at end of file\\n\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/exchange/{main_2025-12-03-17-57.json => main_2025-12-03-18-20.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-aster/{main_2025-12-03-17-57.json => main_2025-12-03-18-20.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-binance/{main_2025-12-03-17-57.json => main_2025-12-03-18-20.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-bitget/{main_2025-12-03-17-57.json => main_2025-12-03-18-20.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-gate/{main_2025-12-03-17-57.json => main_2025-12-03-18-20.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-huobi/{main_2025-12-03-17-57.json => main_2025-12-03-18-20.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-hyperliquid/{main_2025-12-03-17-57.json => main_2025-12-03-18-20.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-okx/{main_2025-12-03-17-57.json => main_2025-12-03-18-20.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 0,\n+          \"deletions\": 0,\n+          \"path\": \"common/changes/@yuants/vendor-turboflow/{main_2025-12-03-17-57.json => main_2025-12-03-18-20.json}\",\n+          \"patch\": \"\"\n+        },\n+        {\n+          \"additions\": 17,\n+          \"deletions\": 0,\n+          \"path\": \"libraries/exchange/CHANGELOG.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/exchange/CHANGELOG.json b/libraries/exchange/CHANGELOG.json\\nindex 0b84459b9..a4a044688 100644\\n--- a/libraries/exchange/CHANGELOG.json\\n+++ b/libraries/exchange/CHANGELOG.json\\n@@ -3,0 +4,17 @@\\n+    {\\n+      \\\"version\\\": \\\"0.3.1\\\",\\n+      \\\"tag\\\": \\\"@yuants/exchange_v0.3.1\\\",\\n+      \\\"date\\\": \\\"Wed, 03 Dec 2025 18:20:00 GMT\\\",\\n+      \\\"comments\\\": {\\n+        \\\"patch\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"fix\\\"\\n+          }\\n+        ],\\n+        \\\"none\\\": [\\n+          {\\n+            \\\"comment\\\": \\\"Bump Version\\\"\\n+          }\\n+        ]\\n+      }\\n+    },\\n\"\n+        },\n+        {\n+          \"additions\": 8,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/exchange/CHANGELOG.md\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/exchange/CHANGELOG.md b/libraries/exchange/CHANGELOG.md\\nindex bb4c69f76..d437a484f 100644\\n--- a/libraries/exchange/CHANGELOG.md\\n+++ b/libraries/exchange/CHANGELOG.md\\n@@ -3 +3,8 @@\\n-This log was last generated on Wed, 03 Dec 2025 17:57:50 GMT and should not be manually modified.\\n+This log was last generated on Wed, 03 Dec 2025 18:20:00 GMT and should not be manually modified.\\n+\\n+## 0.3.1\\n+Wed, 03 Dec 2025 18:20:00 GMT\\n+\\n+### Patches\\n+\\n+- fix\\n\"\n+        },\n+        {\n+          \"additions\": 1,\n+          \"deletions\": 1,\n+          \"path\": \"libraries/exchange/package.json\",\n+          \"patch\": \"commit a126bbb4025a5e602bf4f1f50f6ca225c5f96573\\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\\nDate:   Thu Dec 4 02:20:25 2025 +0800\\n\\n    chore: bump version (#2187)\\n    \\n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\\n\\ndiff --git a/libraries/exchange/package.json b/libraries/exchange/package.json\\nindex 26d4dd63f..a6810b2dc 100644\\n--- a/libraries/exchange/package.json\\n+++ b/libraries/exchange/package.json\\n@@ -3 +3 @@\\n-  \\\"version\\\": \\\"0.3.0\\\",\\n+  \\\"version\\\": \\\"0.3.1\\\",\\n\"\n+        }\n+      ]\n+    }\n+  ],\n+  \"metadata\": {\n+    \"tool\": \"git-changes-reporter\",\n+    \"version\": \"1.0.0\",\n+    \"repository\": \"/home/runner/work/Yuan/Yuan\"\n+  }\n+}\n\\ No newline at end of file\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "MetricsAsterApiCallCounter",
              "code": "      \"patch\": \"commit a32bacdad24311b70332b097ba498c47992e36c0\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 14:59:55 2025 +0800\\n\\n    feat: add api call monitor (#2156)\\n\\ndiff --git a/apps/vendor-aster/src/api/private-api.ts b/apps/vendor-aster/src/api/private-api.ts\\nindex 2987cb0d1..71f2f7943 100644\\n--- a/apps/vendor-aster/src/api/private-api.ts\\n+++ b/apps/vendor-aster/src/api/private-api.ts\\n@@ -2,0 +3,8 @@ import { encodeHex, HmacSHA256 } from '@yuants/utils';\\n+import { GlobalPrometheusRegistry, Terminal } from '@yuants/protocol';\\n+\\n+const MetricsAsterApiCallCounter = GlobalPrometheusRegistry.counter(\\n+  'aster_api_call',\\n+  'Number of aster api call',\\n+);\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n@@ -72,0 +81 @@ const request = async <T>(\\n+  MetricsAsterApiCallCounter.labels({ path: url.pathname, terminal_id: terminal.terminal_id }).inc();\\n\"\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-aster/2025-12-03-06-57.json\",\n      \"patch\": \"commit a32bacdad24311b70332b097ba498c47992e36c0\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 14:59:55 2025 +0800\\n\\n    feat: add api call monitor (#2156)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-03-06-57.json b/common/changes/@yuants/vendor-aster/2025-12-03-06-57.json\\nnew file mode 100644\\nindex 000000000..4209d27f4\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-03-06-57.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"add api call monitor\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"9b890949b291fc568fce5aecd1b934a20100b029\",\n  \"short\": \"9b890949b\",\n  \"author\": \"Ryan\",\n  \"email\": \"stayrealrhr@gmail.com\",",
              "lineStart": 76,
              "lineEnd": 97
            },
            {
              "type": "function",
              "name": "quote",
              "code": "      \"patch\": \"commit 9b890949b291fc568fce5aecd1b934a20100b029\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 15:18:06 2025 +0800\\n\\n    feat: fix open interest call (#2158)\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/quote.ts b/apps/vendor-aster/src/services/markets/quote.ts\\nindex a5a828de8..68bcc4255 100644\\n--- a/apps/vendor-aster/src/services/markets/quote.ts\\n+++ b/apps/vendor-aster/src/services/markets/quote.ts\\n@@ -27,16 +27,10 @@ const quote$ = defer(() => getFApiV1TickerPrice({})).pipe(\\n-  mergeMap(\\n-    (ticker) =>\\n-      from(openInterestCache.query(ticker.symbol)).pipe(\\n-        map(\\n-          (openInterest): Partial<IQuote> => ({\\n-            datasource_id: 'ASTER',\\n-            product_id: encodePath('PERP', ticker.symbol),\\n-            last_price: `${ticker.price}`,\\n-            bid_price: `${ticker.price}`,\\n-            ask_price: `${ticker.price}`,\\n-            open_interest: `${openInterest ?? 0}`,\\n-            updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n-          }),\\n-        ),\\n-      ),\\n-    5,\\n+  map(\\n+    (ticker): Partial<IQuote> => ({\\n+      datasource_id: 'ASTER',\\n+      product_id: encodePath('ASTER', 'PERP', ticker.symbol),\\n+      last_price: `${ticker.price}`,\\n+      bid_price: `${ticker.price}`,\\n+      ask_price: `${ticker.price}`,\\n+      open_interest: '0',\\n+      updated_at: new Date(ticker.time ?? Date.now()).toISOString(),\\n+    }),\\n\"\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-aster/2025-12-03-07-12.json\",\n      \"patch\": \"commit 9b890949b291fc568fce5aecd1b934a20100b029\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 15:18:06 2025 +0800\\n\\n    feat: fix open interest call (#2158)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-03-07-12.json b/common/changes/@yuants/vendor-aster/2025-12-03-07-12.json\\nnew file mode 100644\\nindex 000000000..0afb16791\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-03-07-12.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"fix aster openinterest call\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"72d270f47b1a90d39cbbd32acaf5b3a0a69095e9\",\n  \"short\": \"72d270f47\",\n  \"author\": \"Ryan\",\n  \"email\": \"stayrealrhr@gmail.com\",",
              "lineStart": 98,
              "lineEnd": 119
            },
            {
              "type": "function",
              "name": "BASE_URL",
              "code": "      \"patch\": \"commit 72d270f47b1a90d39cbbd32acaf5b3a0a69095e9\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 15:24:13 2025 +0800\\n\\n    feat: add api call monitor (#2157)\\n\\ndiff --git a/apps/vendor-aster/src/api/public-api.ts b/apps/vendor-aster/src/api/public-api.ts\\nindex bfc642fff..052be628a 100644\\n--- a/apps/vendor-aster/src/api/public-api.ts\\n+++ b/apps/vendor-aster/src/api/public-api.ts\\n@@ -1,0 +2 @@ const BASE_URL = 'https://fapi.asterdex.com';\\n+import { GlobalPrometheusRegistry, Terminal } from '@yuants/protocol';\\n@@ -2,0 +4,5 @@ const BASE_URL = 'https://fapi.asterdex.com';\\n+const MetricsAsterApiCallCounter = GlobalPrometheusRegistry.counter(\\n+  'aster_api_call',\\n+  'Number of aster api call',\\n+);\\n+const terminal = Terminal.fromNodeEnv();\\n@@ -11,0 +18 @@ const request = async <T>(method: string, endpoint: string, params: any = {}): P\\n+  MetricsAsterApiCallCounter.labels({ path: url.pathname, terminal_id: terminal.terminal_id }).inc();\\n\"\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-aster/2025-12-03-07-01.json\",\n      \"patch\": \"commit 72d270f47b1a90d39cbbd32acaf5b3a0a69095e9\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 15:24:13 2025 +0800\\n\\n    feat: add api call monitor (#2157)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-03-07-01.json b/common/changes/@yuants/vendor-aster/2025-12-03-07-01.json\\nnew file mode 100644\\nindex 000000000..4209d27f4\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-03-07-01.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"add api call monitor\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"786b42e45065cf1639f2edba79a9ec70854c7a06\",\n  \"short\": \"786b42e45\",\n  \"author\": \"humblelittlec1[bot]\",\n  \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",",
              "lineStart": 120,
              "lineEnd": 217
            },
            {
              "type": "function",
              "name": "usage",
              "code": "  \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/generate-github-links.js b/.claude/skills/git-changes-reporter/scripts/generate-github-links.js\\nnew file mode 100755\\nindex 000000000..6c5304439\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/scripts/generate-github-links.js\\n@@ -0,0 +1,139 @@\\n+#!/usr/bin/env node\\n+/* eslint-disable no-console */\\n+import { readFile, writeFile } from 'node:fs/promises';\\n+import { URL } from 'node:url';\\n+\\n+const usage = () => {\\n+  console.error(\\n+    [\\n+      'Usage: generate-github-links.js <json_file> <repo_url> [output_file]',\\n+      '',\\n+      'Add GitHub commit links to JSON data generated by generate-json.js',\\n+      '',\\n+      'Arguments:',\\n+      '  <json_file>    Path to JSON file generated by generate-json.js',\\n+      '  <repo_url>     GitHub repository URL (e.g., https://github.com/owner/repo)',\\n+      '  [output_file]  Optional output file (default: <json_file>.with-links.json)',\\n+      '',\\n+      'Examples:',\\n+      '  generate-github-links.js ./reports/changes.json https://github.com/owner/repo',\\n+      '  generate-github-links.js changes.json https://github.com/owner/repo ./changes-with-links.json',\\n+    ].join('\\\\n'),\\n+  );\\n+};\\n+\\n+const validateGitHubUrl = (url) => {\\n+  try {\\n+    const parsed = new URL(url);\\n+    return parsed.hostname === 'github.com' && parsed.pathname.split('/').filter(Boolean).length >= 2;\\n+  } catch {\\n+    return false;\\n+  }\\n+};\\n+\\n+const extractRepoPath = (url) => {\\n+  try {\\n+    const parsed = new URL(url);\\n+    const pathParts = parsed.pathname.split('/').filter(Boolean);\\n+    if (pathParts.length < 2) {\\n+      throw new Error('Invalid GitHub repository URL');\\n+    }\\n+    return `${pathParts[0]}/${pathParts[1]}`;\\n+  } catch (error) {\\n+    throw new Error(`Failed to parse repository URL: ${error.message}`);\\n+  }\\n+};\\n+\\n+const addGitHubLinks = (data, repoPath) => {\\n+  const baseUrl = `https://github.com/${repoPath}/commit`;\\n+\\n+  // Add githubUrl to each commit\\n+  const commitsWithLinks = data.commits.map((commit) => ({\\n+    ...commit,\\n+    githubUrl: `${baseUrl}/${commit.hash}`,\\n+  }));\\n+\\n+  // Add repository info to metadata\\n+  const metadata = {\\n+    ...data.metadata,\\n+    github: {\\n+      repository: repoPath,\\n+      baseUrl: `https://github.com/${repoPath}`,\\n+      commitUrlTemplate: `${baseUrl}/{hash}`,\\n+    },\\n+  };\\n+\\n+  return {\\n+    ...data,\\n+    commits: commitsWithLinks,\\n+    metadata,\\n+  };\\n+};\\n+\\n+const main = async () => {\\n+  const [jsonFile, repoUrl, outputFile] = process.argv.slice(2);\\n+\\n+  // Validate arguments\\n+  if (!jsonFile || !repoUrl) {\\n+    usage();\\n+    process.exit(1);\\n+  }\\n+\\n+  // Validate GitHub URL\\n+  if (!validateGitHubUrl(repoUrl)) {\\n+    console.error('Error: Invalid GitHub repository URL');\\n+    console.error('Expected format: https://github.com/owner/repo');\\n+    process.exit(1);\\n+  }\\n+\\n+  // Extract repository path\\n+  let repoPath;\\n+  try {\\n+    repoPath = extractRepoPath(repoUrl);\\n+    console.info(`Repository: ${repoPath}`);\\n+  } catch (error) {\\n+    console.error(`Error: ${error.message}`);\\n+    process.exit(1);\\n+  }\\n+\\n+  // Determine output file\\n+  const output = outputFile || jsonFile.replace(/\\\\.json$/, '.with-links.json');\\n+\\n+  try {\\n+    // Read JSON file\\n+    console.info(`Reading JSON file: ${jsonFile}`);\\n+    const fileContent = await readFile(jsonFile, 'utf-8');\\n+    const data = JSON.parse(fileContent);\\n+\\n+    // Validate JSON structure\\n+    if (!data.commits || !Array.isArray(data.commits)) {\\n+      throw new Error('Invalid JSON structure: missing or invalid \\\"commits\\\" array');\\n+    }\\n+\\n+    // Add GitHub links\\n+    console.info('Adding GitHub commit links...');\\n+    const dataWithLinks = addGitHubLinks(data, repoPath);\\n+\\n+    // Write output\\n+    await writeFile(output, JSON.stringify(dataWithLinks, null, 2));\\n+    console.info(`✅ GitHub links added to ${output}`);\\n+    console.info(`📊 Added ${dataWithLinks.commits.length} commit links`);\\n+\\n+    // Show example links\\n+    if (dataWithLinks.commits.length > 0) {\\n+      const firstCommit = dataWithLinks.commits[0];\\n+      const lastCommit = dataWithLinks.commits[dataWithLinks.commits.length - 1];\\n+      console.info('\\\\nExample commit links:');\\n+      console.info(`  First: ${firstCommit.short} -> ${firstCommit.githubUrl}`);\\n+      console.info(`  Last:  ${lastCommit.short} -> ${lastCommit.githubUrl}`);\\n+    }\\n+  } catch (error) {\\n+    console.error('❌ Error:', error?.stack || error?.message || error);\\n+    process.exit(1);\\n+  }\\n+};\\n+\\n+main().catch((err) => {\\n+  console.error('❌ Unexpected error:', err?.stack || err?.message || err);\\n+  process.exit(1);\\n+});\\n\"\n},\n{\n  \"additions\": 247,\n  \"deletions\": 0,\n  \"path\": \".claude/skills/git-changes-reporter/scripts/generate-json.js\",",
              "lineStart": 218,
              "lineEnd": 223
            },
            {
              "type": "function",
              "name": "exec",
              "code": "  \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/generate-json.js b/.claude/skills/git-changes-reporter/scripts/generate-json.js\\nnew file mode 100755\\nindex 000000000..ebe60677f\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/scripts/generate-json.js\\n@@ -0,0 +1,247 @@\\n+#!/usr/bin/env node\\n+/* eslint-disable no-console */\\n+import { mkdir, writeFile } from 'node:fs/promises';\\n+import { dirname, resolve } from 'node:path';\\n+import { execFile } from 'node:child_process';\\n+import { promisify } from 'node:util';\\n+\\n+const exec = promisify(execFile);\\n+\\n+const usage = () => {\\n+  console.error(\\n+    [\\n+      'Usage: generate-json.js <old_commit> <new_commit> [output_path]',\\n+      '',\\n+      'Generate structured JSON for commits in range <old_commit>..<new_commit>',\\n+      'including per-file stats and patch text.',\\n+      '',\\n+      'Arguments:',\\n+      '  <old_commit>    Start commit reference (hash, tag, branch)',\\n+      '  <new_commit>    End commit reference',\\n+      '  [output_path]   Optional output path (default: docs/reports/git-changes-YYYY-MM-DD.json)',\\n+      '',\\n+      'Examples:',\\n+      '  generate-json.js HEAD~10 HEAD',\\n+      '  generate-json.js v1.0.0 HEAD ./reports/changes.json',\\n+      '  generate-json.js 6df6ea741 1b4e97ac5',\\n+    ].join('\\\\n'),\\n+  );\\n+};\\n+\\n+const validateGitRepo = async () => {\\n+  try {\\n+    const { stdout } = await exec('git', ['rev-parse', '--is-inside-work-tree']);\\n+    return stdout.trim() === 'true';\\n+  } catch {\\n+    return false;\\n+  }\\n+};\\n+\\n+const getRepoRoot = async () => {\\n+  const { stdout } = await exec('git', ['rev-parse', '--show-toplevel']);\\n+  return stdout.trim();\\n+};\\n+\\n+const getCommitInfo = async (ref) => {\\n+  try {\\n+    const hash = (await exec('git', ['rev-parse', ref])).stdout.trim();\\n+    const short = (await exec('git', ['rev-parse', '--short', ref])).stdout.trim();\\n+    return { hash, short };\\n+  } catch (error) {\\n+    throw new Error(`Invalid commit reference: ${ref}\\\\n${error.message}`);\\n+  }\\n+};\\n+\\n+const getDateRange = async (oldRef, newRef) => {\\n+  const startDate =\\n+    (await exec('git', ['log', '--reverse', '--date=short', '--format=%ad', `${oldRef}..${newRef}`])).stdout\\n+      .split('\\\\n')\\n+      .filter(Boolean)[0] || null;\\n+  const endDate =\\n+    (\\n+      await exec('git', ['log', '-1', '--date=short', '--format=%ad', `${oldRef}..${newRef}`])\\n+    ).stdout.trim() || null;\\n+  return { startDate, endDate };\\n+};\\n+\\n+const getCommitCount = async (oldRef, newRef) => {\\n+  const count = Number(\\n+    (await exec('git', ['rev-list', '--count', `${oldRef}..${newRef}`])).stdout.trim() || '0',\\n+  );\\n+  return count;\\n+};\\n+\\n+const getContributors = async (oldRef, newRef) => {\\n+  const authorLines = (await exec('git', ['log', `${oldRef}..${newRef}`, '--format=%an|%ae'])).stdout\\n+    .split('\\\\n')\\n+    .filter(Boolean);\\n+  const contributorMap = new Map();\\n+  for (const line of authorLines) {\\n+    const [name, email] = line.split('|');\\n+    const key = `${name}|${email}`;\\n+    contributorMap.set(key, (contributorMap.get(key) || 0) + 1);\\n+  }\\n+  return Array.from(contributorMap.entries()).map(([key, commits]) => {\\n+    const [name, email] = key.split('|');\\n+    return { name, email, commits };\\n+  });\\n+};\\n+\\n+const getTopDirectories = async (oldRef, newRef) => {\\n+  const files = (await exec('git', ['diff', '--name-only', `${oldRef}..${newRef}`])).stdout\\n+    .split('\\\\n')\\n+    .filter(Boolean);\\n+\\n+  const dirCounts = files.reduce((acc, filePath) => {\\n+    const dir = filePath.split('/')[0] || '.';\\n+    acc.set(dir, (acc.get(dir) || 0) + 1);\\n+    return acc;\\n+  }, new Map());\\n+\\n+  return Array.from(dirCounts.entries())\\n+    .map(([dir, fileCount]) => ({ dir, fileCount }))\\n+    .sort((a, b) => b.fileCount - a.fileCount);\\n+};\\n+\\n+const getCommitDetails = async (oldRef, newRef) => {\\n+  const rawCommits = (\\n+    await exec('git', [\\n+      'log',\\n+      '--reverse',\\n+      '--date=iso8601',\\n+      '--format=%H|%h|%an|%ae|%ad|%s',\\n+      `${oldRef}..${newRef}`,\\n+    ])\\n+  ).stdout\\n+    .split('\\\\n')\\n+    .filter(Boolean);\\n+\\n+  const commits = [];\\n+\\n+  for (const line of rawCommits) {\\n+    const [hash, short, author, email, authoredAt, subject] = line.split('|');\\n+\\n+    // Get file statistics for this commit\\n+    const numstat = (await exec('git', ['show', '--numstat', '--format=', hash])).stdout\\n+      .split('\\\\n')\\n+      .filter(Boolean)\\n+      .map((row) => {\\n+        const [add, del, ...rest] = row.split('\\\\t');\\n+        return {\\n+          additions: add === '-' ? null : Number(add),\\n+          deletions: del === '-' ? null : Number(del),\\n+          path: rest.join('\\\\t'),\\n+        };\\n+      });\\n+\\n+    const files = [];\\n+    for (const stat of numstat) {\\n+      if (!stat.path) continue;\\n+\\n+      try {\\n+        const patch = (\\n+          await exec('git', ['show', '--unified=0', '--no-color', `${hash}^!`, '--', stat.path], {\\n+            maxBuffer: 10 * 1024 * 1024, // 10MB buffer for large patches\\n+          })\\n+        ).stdout;\\n+        files.push({ ...stat, patch });\\n+      } catch (error) {\\n+        // If patch extraction fails, include file without patch\\n+        console.warn(`Warning: Could not extract patch for ${stat.path} in commit ${short}`);\\n+        files.push({ ...stat, patch: null });\\n+      }\\n+    }\\n+\\n+    commits.push({ hash, short, author, email, authoredAt, subject, files });\\n+  }\\n+\\n+  return commits;\\n+};\\n+\\n+const main = async () => {\\n+  const [oldRef, newRef, outputArg] = process.argv.slice(2);\\n+\\n+  // Validate arguments\\n+  if (!oldRef || !newRef) {\\n+    usage();\\n+    process.exit(1);\\n+  }\\n+\\n+  // Validate git repository\\n+  if (!(await validateGitRepo())) {\\n+    console.error('Error: Not inside a git repository');\\n+    process.exit(1);\\n+  }\\n+\\n+  // Change to repository root\\n+  const repoRoot = await getRepoRoot();\\n+  process.chdir(repoRoot);\\n+  console.info(`Working in repository: ${repoRoot}`);\\n+\\n+  // Get commit information\\n+  console.info('Validating commit references...');\\n+  const oldInfo = await getCommitInfo(oldRef);\\n+  const newInfo = await getCommitInfo(newRef);\\n+\\n+  // Determine output path\\n+  const today = new Date().toISOString().slice(0, 10);\\n+  const output = outputArg || `docs/reports/git-changes-${today}.json`;\\n+\\n+  // Create output directory if needed\\n+  await mkdir(dirname(output), { recursive: true });\\n+\\n+  // Get date range and commit count\\n+  console.info('Analyzing commit range...');\\n+  const { startDate, endDate } = await getDateRange(oldRef, newRef);\\n+  const commitCount = await getCommitCount(oldRef, newRef);\\n+\\n+  if (!startDate || !endDate || commitCount === 0) {\\n+    console.error(`Error: No commits found in range ${oldInfo.short}..${newInfo.short}`);\\n+    process.exit(1);\\n+  }\\n+\\n+  console.info(`Found ${commitCount} commits from ${startDate} to ${endDate}`);\\n+\\n+  // Collect data\\n+  console.info('Collecting contributor information...');\\n+  const contributors = await getContributors(oldRef, newRef);\\n+\\n+  console.info('Analyzing file changes...');\\n+  const topDirs = await getTopDirectories(oldRef, newRef);\\n+\\n+  console.info('Extracting commit details...');\\n+  const commits = await getCommitDetails(oldRef, newRef);\\n+\\n+  // Prepare output data\\n+  const outputData = {\\n+    range: {\\n+      old: oldRef,\\n+      new: newRef,\\n+      label: `${oldInfo.short}..${newInfo.short}`,\\n+      startDate,\\n+      endDate,\\n+      commitCount,\\n+      generatedAt: new Date().toISOString(),\\n+    },\\n+    contributors,\\n+    topDirs,\\n+    commits,\\n+    metadata: {\\n+      tool: 'git-changes-reporter',\\n+      version: '1.0.0',\\n+      repository: repoRoot,\\n+    },\\n+  };\\n+\\n+  // Write output\\n+  await writeFile(output, JSON.stringify(outputData, null, 2));\\n+  console.info(`✅ JSON data written to ${output}`);\\n+  console.info(\\n+    `📊 Summary: ${commitCount} commits, ${contributors.length} contributors, ${topDirs.length} directories changed`,\\n+  );\\n+};\\n+\\n+main().catch((err) => {\\n+  console.error('❌ Error:', err?.stack || err?.message || err);\\n+  process.exit(1);\\n+});\\n\"\n},\n{\n  \"additions\": 105,\n  \"deletions\": 0,\n  \"path\": \".claude/skills/git-changes-reporter/scripts/get-daily-commit-range.sh\",\n  \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.claude/skills/git-changes-reporter/scripts/get-daily-commit-range.sh b/.claude/skills/git-changes-reporter/scripts/get-daily-commit-range.sh\\nnew file mode 100755\\nindex 000000000..9535045bd\\n--- /dev/null\\n+++ b/.claude/skills/git-changes-reporter/scripts/get-daily-commit-range.sh\\n@@ -0,0 +1,105 @@\\n+#!/bin/bash\\n+# 获取东八区昨日8点到今日8点的 commit 范围\\n+# 用法: ./get-daily-commit-range.sh [时区偏移小时数]\\n+# 默认时区: +8 (东八区)\\n+\\n+set -e\\n+\\n+# 默认东八区 (+8)\\n+TZ_OFFSET=\\\"${1:-+8}\\\"\\n+\\n+# 验证时区格式\\n+if [[ ! \\\"$TZ_OFFSET\\\" =~ ^[+-][0-9]+$ ]]; then\\n+    echo \\\"错误: 时区格式不正确，应为 +/-数字，例如 +8 或 -5\\\"\\n+    exit 1\\n+fi\\n+\\n+echo \\\"使用时区偏移: $TZ_OFFSET 小时\\\"\\n+\\n+# 获取当前时间（UTC）\\n+NOW_UTC=$(date -u +\\\"%Y-%m-%d %H:%M:%S\\\")\\n+echo \\\"当前 UTC 时间: $NOW_UTC\\\"\\n+\\n+# 计算东八区时间\\n+# 注意: GitHub Actions 默认是 UTC 时间，我们需要转换为东八区\\n+if [[ \\\"$TZ_OFFSET\\\" == \\\"+8\\\" ]]; then\\n+    # 东八区早上8点对应 UTC 时间 0点\\n+    TODAY_8AM_UTC=\\\"$(date -u -d 'today 00:00:00' +'%Y-%m-%d %H:%M:%S')\\\"\\n+    YESTERDAY_8AM_UTC=\\\"$(date -u -d 'yesterday 00:00:00' +'%Y-%m-%d %H:%M:%S')\\\"\\n+else\\n+    # 对于其他时区，需要更复杂的计算\\n+    echo \\\"警告: 非东八区时区可能需要调整计算逻辑\\\"\\n+    # 这里简化处理，假设时区偏移为整数小时\\n+    OFFSET_HOURS=${TZ_OFFSET#+}  # 移除 + 号\\n+    OFFSET_HOURS=${OFFSET_HOURS#-}  # 移除 - 号\\n+\\n+    # 计算今天早上8点对应的 UTC 时间\\n+    if [[ \\\"$TZ_OFFSET\\\" == +* ]]; then\\n+        # 东区时间比 UTC 晚，早上8点对应 UTC 时间 (8 - 偏移) 点\\n+        UTC_HOUR=$((8 - OFFSET_HOURS))\\n+        if [ $UTC_HOUR -lt 0 ]; then\\n+            UTC_HOUR=$((UTC_HOUR + 24))\\n+            DAY_ADJUST=\\\"-1 day\\\"\\n+        else\\n+            DAY_ADJUST=\\\"\\\"\\n+        fi\\n+    else\\n+        # 西区时间比 UTC 早，早上8点对应 UTC 时间 (8 + 偏移) 点\\n+        UTC_HOUR=$((8 + OFFSET_HOURS))\\n+        if [ $UTC_HOUR -ge 24 ]; then\\n+            UTC_HOUR=$((UTC_HOUR - 24))\\n+            DAY_ADJUST=\\\"+1 day\\\"\\n+        else\\n+            DAY_ADJUST=\\\"\\\"\\n+        fi\\n+    fi\\n+\\n+    TODAY_8AM_UTC=\\\"$(date -u -d \\\"today $UTC_HOUR:00:00 $DAY_ADJUST\\\" +'%Y-%m-%d %H:%M:%S')\\\"\\n+    YESTERDAY_8AM_UTC=\\\"$(date -u -d \\\"yesterday $UTC_HOUR:00:00 $DAY_ADJUST\\\" +'%Y-%m-%d %H:%M:%S')\\\"\\n+fi\\n+\\n+echo \\\"今日8点 (UTC): $TODAY_8AM_UTC\\\"\\n+echo \\\"昨日8点 (UTC): $YESTERDAY_8AM_UTC\\\"\\n+\\n+# 查找对应时间点的 commit\\n+# 使用 --before 和 --after 参数，并取第一个匹配的 commit\\n+OLD_COMMIT=$(git rev-list -n 1 --before=\\\"$YESTERDAY_8AM_UTC\\\" HEAD 2>/dev/null || true)\\n+NEW_COMMIT=$(git rev-list -n 1 --before=\\\"$TODAY_8AM_UTC\\\" HEAD 2>/dev/null || true)\\n+\\n+if [ -z \\\"$OLD_COMMIT\\\" ]; then\\n+    echo \\\"警告: 未找到昨日8点之前的提交，使用最早提交\\\"\\n+    OLD_COMMIT=$(git rev-list --max-parents=0 HEAD)\\n+fi\\n+\\n+if [ -z \\\"$NEW_COMMIT\\\" ]; then\\n+    echo \\\"警告: 未找到今日8点之前的提交，使用最新提交\\\"\\n+    NEW_COMMIT=$(git rev-parse HEAD)\\n+fi\\n+\\n+echo \\\"起始提交 (昨日8点前): $OLD_COMMIT\\\"\\n+echo \\\"结束提交 (今日8点前): $NEW_COMMIT\\\"\\n+\\n+# 检查是否有提交\\n+if [ \\\"$OLD_COMMIT\\\" = \\\"$NEW_COMMIT\\\" ]; then\\n+    echo \\\"警告: 起始和结束提交相同，可能没有新提交\\\"\\n+    # 如果没有新提交，我们使用 HEAD~1 作为起始，HEAD 作为结束\\n+    # 这样可以生成一个空的报告\\n+    COMMIT_COUNT=$(git rev-list --count \\\"$OLD_COMMIT\\\"..\\\"$NEW_COMMIT\\\" 2>/dev/null || echo \\\"0\\\")\\n+    if [ \\\"$COMMIT_COUNT\\\" -eq 0 ]; then\\n+        echo \\\"没有新提交，使用 HEAD 和 HEAD~1\\\"\\n+        OLD_COMMIT=$(git rev-parse HEAD~1 2>/dev/null || git rev-list --max-parents=0 HEAD)\\n+        NEW_COMMIT=$(git rev-parse HEAD)\\n+    fi\\n+fi\\n+\\n+# 输出结果\\n+echo \\\"old_commit=$OLD_COMMIT\\\" >> $GITHUB_OUTPUT\\n+echo \\\"new_commit=$NEW_COMMIT\\\" >> $GITHUB_OUTPUT\\n+echo \\\"old_commit_short=$(git rev-parse --short \\\"$OLD_COMMIT\\\")\\\" >> $GITHUB_OUTPUT\\n+echo \\\"new_commit_short=$(git rev-parse --short \\\"$NEW_COMMIT\\\")\\\" >> $GITHUB_OUTPUT\\n+\\n+# 计算提交数量\\n+COMMIT_COUNT=$(git rev-list --count \\\"$OLD_COMMIT\\\"..\\\"$NEW_COMMIT\\\" 2>/dev/null || echo \\\"0\\\")\\n+echo \\\"commit_count=$COMMIT_COUNT\\\" >> $GITHUB_OUTPUT\\n+\\n+echo \\\"提交范围: $OLD_COMMIT..$NEW_COMMIT ($COMMIT_COUNT 个提交)\\\"\\n\\\\ No newline at end of file\\n\"\n},\n{\n  \"additions\": 153,\n  \"deletions\": 0,\n  \"path\": \".github/workflows/README-daily-git-report.md\",\n  \"patch\": \"commit a14c2b84b1ff4b55b3fd74e16115eb3789243806\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 15:56:26 2025 +0800\\n\\n    feat: add daily Git change report workflow and scripts (#2160)\\n    \\n    - Implemented `generate-json.js` to create structured JSON data for commits in a specified range.\\n    - Added `generate-github-links.js` to append GitHub commit links to the generated JSON data.\\n    - Created `get-daily-commit-range.sh` to calculate the commit range from yesterday 8 AM to today 8 AM based on timezone offset.\\n    - Developed GitHub Actions workflow `daily-git-report.yml` to automate the daily report generation and PR creation.\\n    - Documented the workflow and its usage in `README-daily-git-report.md`.\\n\\ndiff --git a/.github/workflows/README-daily-git-report.md b/.github/workflows/README-daily-git-report.md\\nnew file mode 100644\\nindex 000000000..35345b164\\n--- /dev/null\\n+++ b/.github/workflows/README-daily-git-report.md\\n@@ -0,0 +1,153 @@\\n+# 每日 Git 变更报告工作流\\n+\\n+## 概述\\n+\\n+这个 GitHub Actions 工作流每天东八区早上 8 点自动运行，生成前一天的 Git 变更报告并创建 Pull Request。\\n+\\n+## 功能\\n+\\n+1. **自动时间范围计算**：提取昨日 8 点到今日 8 点的 commit 范围\\n+2. **结构化数据生成**：生成 JSON 格式的详细提交数据\\n+3. **语义化报告生成**：使用 Claude Code 的 git-changes-reporter skill 生成专业报告\\n+4. **自动 PR 创建**：创建包含报告文件的 Pull Request\\n+5. **制品上传**：将报告文件上传为工作流制品\\n+\\n+## 设置步骤\\n+\\n+### 1. 设置 DeepSeek API Key\\n+\\n+1. 获取 DeepSeek API Key：\\n+\\n+   - 访问 https://platform.deepseek.com/api_keys\\n+   - 创建新的 API Key 或使用现有 Key\\n+\\n+2. 在 GitHub 仓库中设置 Secret：\\n+   - 进入仓库 Settings > Secrets and variables > Actions\\n+   - 点击 \\\"New repository secret\\\"\\n+   - Name: `DEEPSEEK_API_KEY`\\n+   - Value: 你的 DeepSeek API Key\\n+\\n+### 2. 启用工作流\\n+\\n+工作流文件位于 `.github/workflows/daily-git-report.yml`，默认已启用。\\n+\\n+### 3. 手动测试\\n+\\n+可以在 GitHub 仓库的 Actions 页面手动触发工作流：\\n+\\n+1. 进入 \\\"Actions\\\" 标签页\\n+2. 选择 \\\"Daily Git Change Report\\\"\\n+3. 点击 \\\"Run workflow\\\"\\n+4. 可选：输入时区偏移（默认 +8）\\n+\\n+## 工作流步骤详解\\n+\\n+### 1. 获取每日提交范围\\n+\\n+- 使用 `get-daily-commit-range.sh` 脚本计算时间范围\\n+- 支持自定义时区偏移\\n+- 输出起始和结束 commit hash\\n+\\n+### 2. 生成 JSON 数据\\n+\\n+- 使用 `generate-json.js` 脚本生成结构化数据\\n+- 包含提交统计、作者信息、文件变更等\\n+- 保存为 `docs/reports/git-changes-YYYY-MM-DD.json`\\n+\\n+### 3. 通过 DeepSeek 模拟 skill 生成报告\\n+\\n+- 使用 `@anthropic-ai/sdk` 包\\n+- 通过 DeepSeek 的 Anthropic 兼容接口调用 API\\n+- 使用 **skill-emulator.js** 模拟 git-changes-reporter skill 的行为\\n+- 严格按照 skill 的所有规则和要求生成语义化报告\\n+- 保存为 `docs/reports/git-changes-report-YYYY-MM-DD.md`\\n+\\n+### 4. 创建 Pull Request\\n+\\n+- 创建新分支 `daily-report-YYYY-MM-DD`\\n+- 提交报告文件\\n+- 创建 PR 到 main 分支\\n+- 添加标签：`automated`, `report`, `daily`\\n+\\n+### 5. 上传制品\\n+\\n+- 将 JSON 和 Markdown 文件上传为工作流制品\\n+- 保留 7 天\\n+\\n+## 输出文件\\n+\\n+### JSON 数据文件\\n+\\n+```\\n+docs/reports/git-changes-2025-12-02.json\\n+```\\n+\\n+包含：\\n+\\n+- 提交范围信息\\n+- 作者贡献统计\\n+- 热点目录\\n+- 详细提交数据\\n+\\n+### Markdown 报告文件\\n+\\n+```\\n+docs/reports/git-changes-report-2025-12-02.md\\n+```\\n+\\n+包含：\\n+\\n+- 技术领域分析\\n+- 贡献者分析\\n+- 风险评估和建议\\n+- 具体文件引用\\n+- 单提交摘要\\n+\\n+## 自定义配置\\n+\\n+### 修改时区\\n+\\n+默认使用东八区（+8）。可以在手动触发时指定其他时区，或修改工作流中的默认值。\\n+\\n+### 修改运行时间\\n+\\n+修改工作流中的 cron 表达式：\\n+\\n+```yaml\\n+schedule:\\n+  - cron: '0 0 * * *' # UTC 0点（东八区8点）\\n+```\\n+\\n+### 修改报告模板\\n+\\n+编辑 `.claude/skills/git-changes-reporter/references/report-template.md`\\n+\\n+## 故障排除\\n+\\n+### 1. DEEPSEEK_API_KEY 错误\\n+\\n+确保已在 GitHub Secrets 中正确设置 DeepSeek API Key。\\n+\\n+### 2. 没有新提交\\n+\\n+如果当天没有新提交，工作流会跳过 PR 创建。\\n+\\n+### 3. PR 创建失败\\n+\\n+检查是否有同名分支已存在。\\n+\\n+### 4. 时间范围计算错误\\n+\\n+检查系统时区设置，或手动指定时区偏移。\\n+\\n+## 相关技能\\n+\\n+- [git-changes-reporter](../.claude/skills/git-changes-reporter/SKILL.md)：生成结构化 Git 变更报告\\n+- [recent-changes-digest](../.claude/skills/recent-changes-digest/SKILL.md)：生成变更摘要\\n+\\n+## 技术支持\\n+\\n+如有问题，请参考：\\n+\\n+- [Claude Code GitHub Actions 文档](https://code.claude.com/docs/en/github-actions)\\n+- [GitHub Actions 文档](https://docs.github.com/en/actions)\\n\"\n},\n{",
              "lineStart": 224,
              "lineEnd": 273
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-binance/src/public-data/product.ts b/apps/vendor-binance/src/public-data/product.ts\\nindex a25f998f9..8879f59f4 100644\\n--- a/apps/vendor-binance/src/public-data/product.ts\\n+++ b/apps/vendor-binance/src/public-data/product.ts\\n@@ -1,2 +1 @@\\n-import { IProduct, IQueryProductsRequest, provideQueryProductsService } from '@yuants/data-product';\\n-import { Terminal } from '@yuants/protocol';\\n+import { IProduct } from '@yuants/data-product';\\n@@ -6,2 +4,0 @@ import { getFutureExchangeInfo, getSpotExchangeInfo } from '../api/public-api';\\n-const terminal = Terminal.fromNodeEnv();\\n-\\n@@ -10 +7,6 @@ export const listProducts = async () => {\\n-  const exchangeInfo = await getFutureExchangeInfo();\\n+  const [futureExchangeInfo, spotExchangeInfo] = await Promise.all([\\n+    getFutureExchangeInfo(),\\n+    getSpotExchangeInfo(),\\n+  ]);\\n+\\n+  const products: IProduct[] = [];\\n@@ -12,3 +14,3 @@ export const listProducts = async () => {\\n-  // Convert symbols to IProduct format\\n-  return exchangeInfo.symbols.map((symbol): IProduct => {\\n-    return {\\n+  // Convert future symbols to IProduct format\\n+  for (const symbol of futureExchangeInfo.symbols) {\\n+    products.push({\\n@@ -33,3 +35,2 @@ export const listProducts = async () => {\\n-    };\\n-  });\\n-};\\n+    });\\n+  }\\n@@ -37,12 +38,24 @@ export const listProducts = async () => {\\n-// Provide QueryProducts service with the new design\\n-const cache = provideQueryProductsService(\\n-  terminal,\\n-  'BINANCE',\\n-  async (req: IQueryProductsRequest): Promise<IProduct[]> => {\\n-    // Directly call the external API to get exchange info\\n-    const [futureExchangeInfo, spotExchangeInfo] = await Promise.all([\\n-      getFutureExchangeInfo(),\\n-      getSpotExchangeInfo(),\\n-    ]);\\n-\\n-    const products: IProduct[] = [];\\n+  // Convert spot symbols to IProduct format\\n+  for (const symbol of spotExchangeInfo.symbols) {\\n+    if (symbol.isSpotTradingAllowed) {\\n+      products.push({\\n+        datasource_id: 'BINANCE',\\n+        product_id: encodePath('BINANCE', 'SPOT', symbol.symbol),\\n+        base_currency: symbol.baseAsset,\\n+        quote_currency: symbol.quoteAsset,\\n+        price_step: +`1e-${symbol.quotePrecision}`,\\n+        value_scale: 1,\\n+        volume_step: +`1e-${symbol.baseAssetPrecision}`,\\n+        name: `${symbol.baseAsset}/${symbol.quoteAsset} SPOT`,\\n+        value_scale_unit: '',\\n+        margin_rate: 1,\\n+        value_based_cost: 0,\\n+        volume_based_cost: 0,\\n+        max_position: 0,\\n+        max_volume: 0,\\n+        allow_long: true,\\n+        allow_short: false,\\n+        market_id: 'BINANCE/SPOT',\\n+        no_interest_rate: true,\\n+      });\\n+    }\\n@@ -50,2 +63 @@ const cache = provideQueryProductsService(\\n-    // Convert future symbols to IProduct format\\n-    for (const symbol of futureExchangeInfo.symbols) {\\n+    if (symbol.isMarginTradingAllowed) {\\n@@ -54 +66 @@ const cache = provideQueryProductsService(\\n-        product_id: encodePath('BINANCE', 'USDT-FUTURE', symbol.symbol),\\n+        product_id: encodePath('BINANCE', 'MARGIN', symbol.symbol),\\n@@ -57 +69 @@ const cache = provideQueryProductsService(\\n-        price_step: +`1e-${symbol.pricePrecision}`,\\n+        price_step: +`1e-${symbol.quotePrecision}`,\\n@@ -59,2 +71,2 @@ const cache = provideQueryProductsService(\\n-        volume_step: +`1e-${symbol.quantityPrecision}`,\\n-        name: `${symbol.baseAsset}/${symbol.quoteAsset} PERP`,\\n+        volume_step: +`1e-${symbol.baseAssetPrecision}`,\\n+        name: `${symbol.baseAsset}/${symbol.quoteAsset} MARGIN`,\\n@@ -62 +74 @@ const cache = provideQueryProductsService(\\n-        margin_rate: +symbol.requiredMarginPercent / 100,\\n+        margin_rate: 1,\\n@@ -69 +81 @@ const cache = provideQueryProductsService(\\n-        market_id: 'BINANCE/USDT-FUTURE',\\n+        market_id: 'BINANCE/MARGIN',\\n@@ -72,0 +85 @@ const cache = provideQueryProductsService(\\n+  }\\n@@ -74,55 +87,2 @@ const cache = provideQueryProductsService(\\n-    // Convert spot symbols to IProduct format\\n-    for (const symbol of spotExchangeInfo.symbols) {\\n-      if (symbol.isSpotTradingAllowed) {\\n-        products.push({\\n-          datasource_id: 'BINANCE',\\n-          product_id: encodePath('BINANCE', 'SPOT', symbol.symbol),\\n-          base_currency: symbol.baseAsset,\\n-          quote_currency: symbol.quoteAsset,\\n-          price_step: +`1e-${symbol.quotePrecision}`,\\n-          value_scale: 1,\\n-          volume_step: +`1e-${symbol.baseAssetPrecision}`,\\n-          name: `${symbol.baseAsset}/${symbol.quoteAsset} SPOT`,\\n-          value_scale_unit: '',\\n-          margin_rate: 1,\\n-          value_based_cost: 0,\\n-          volume_based_cost: 0,\\n-          max_position: 0,\\n-          max_volume: 0,\\n-          allow_long: true,\\n-          allow_short: false,\\n-          market_id: 'BINANCE/SPOT',\\n-          no_interest_rate: true,\\n-        });\\n-      }\\n-\\n-      if (symbol.isMarginTradingAllowed) {\\n-        products.push({\\n-          datasource_id: 'BINANCE',\\n-          product_id: encodePath('BINANCE', 'MARGIN', symbol.symbol),\\n-          base_currency: symbol.baseAsset,\\n-          quote_currency: symbol.quoteAsset,\\n-          price_step: +`1e-${symbol.quotePrecision}`,\\n-          value_scale: 1,\\n-          volume_step: +`1e-${symbol.baseAssetPrecision}`,\\n-          name: `${symbol.baseAsset}/${symbol.quoteAsset} MARGIN`,\\n-          value_scale_unit: '',\\n-          margin_rate: 1,\\n-          value_based_cost: 0,\\n-          volume_based_cost: 0,\\n-          max_position: 0,\\n-          max_volume: 0,\\n-          allow_long: true,\\n-          allow_short: true,\\n-          market_id: 'BINANCE/MARGIN',\\n-          no_interest_rate: false,\\n-        });\\n-      }\\n-    }\\n-\\n-    return products;\\n-  },\\n-  {\\n-    auto_refresh_interval: 3600_000,\\n-  },\\n-);\\n+  return products;\\n+};\\n\"\n},\n{\n  \"additions\": 25,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-huobi/src/api/public-api.ts\",",
              "lineStart": 274,
              "lineEnd": 279
            },
            {
              "type": "function",
              "name": "getV2ReferenceCurrencies",
              "code": "  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/api/public-api.ts b/apps/vendor-huobi/src/api/public-api.ts\\nindex 03a1468be..c8c6c3801 100644\\n--- a/apps/vendor-huobi/src/api/public-api.ts\\n+++ b/apps/vendor-huobi/src/api/public-api.ts\\n@@ -359,0 +360,25 @@ export function getV2ReferenceCurrencies(params: { currency?: string; authorized\\n+\\n+/**\\n+ * 【现货】获取市场所有交易对的最新行情\\n+ *\\n+ * https://www.htx.com/zh-cn/opend/newApiPages/?id=7ec40374-7773-11ed-9966-0242ac110003\\n+ *\\n+ */\\n+export const getSpotMarketTickers = (): Promise<{\\n+  data: {\\n+    symbol: string;\\n+    open: number;\\n+    high: number;\\n+    low: number;\\n+    close: number;\\n+    amount: number;\\n+    vol: number;\\n+    count: number;\\n+    bid: number;\\n+    bidSize: number;\\n+    ask: number;\\n+    askSize: number;\\n+  }[];\\n+  status: string;\\n+  ts: number;\\n+}> => publicRequest('GET', '/market/tickers', SPOT_API_ROOT);\\n\"\n},\n{\n  \"additions\": 17,\n  \"deletions\": 9,\n  \"path\": \"apps/vendor-huobi/src/services/accounts/spot.ts\",",
              "lineStart": 280,
              "lineEnd": 285
            },
            {
              "type": "function",
              "name": "getSpotAccountInfo",
              "code": "  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/services/accounts/spot.ts b/apps/vendor-huobi/src/services/accounts/spot.ts\\nindex a1b9e9454..9b214135d 100644\\n--- a/apps/vendor-huobi/src/services/accounts/spot.ts\\n+++ b/apps/vendor-huobi/src/services/accounts/spot.ts\\n@@ -1 +1 @@\\n-import { IActionHandlerOfGetAccountInfo, makeSpotPosition } from '@yuants/data-account';\\n+import { IActionHandlerOfGetAccountInfo, IPosition, makeSpotPosition } from '@yuants/data-account';\\n@@ -4,0 +5 @@ import { encodePath } from '@yuants/utils';\\n+import { quoteCache } from '../market-data/quote';\\n@@ -11,3 +12,9 @@ export const getSpotAccountInfo: IActionHandlerOfGetAccountInfo<ICredential> = a\\n-  return spotBalance.data.list\\n-    .map((v) => {\\n-      return makeSpotPosition({\\n+  const positions: IPosition[] = [];\\n+\\n+  for (const v of spotBalance.data.list) {\\n+    if (v.balance === '0') continue;\\n+    const product_id = encodePath('HTX', 'SPOT', v.currency + 'usdt');\\n+    const quote = await quoteCache.query(product_id);\\n+    const closable_price = v.currency === 'usdt' ? 1 : +(quote?.ask_price ?? 0);\\n+    positions.push(\\n+      makeSpotPosition({\\n@@ -16 +23 @@ export const getSpotAccountInfo: IActionHandlerOfGetAccountInfo<ICredential> = a\\n-        product_id: encodePath('HTX', 'SPOT', v.currency + 'usdt'),\\n+        product_id: product_id,\\n@@ -19,4 +26,5 @@ export const getSpotAccountInfo: IActionHandlerOfGetAccountInfo<ICredential> = a\\n-        closable_price: 1, // TODO: 获取现货币对价格\\n-      });\\n-    })\\n-    .filter((x) => x.volume > 0);\\n+        closable_price: closable_price,\\n+      }),\\n+    );\\n+  }\\n+  return positions;\\n\"\n},\n{\n  \"additions\": 18,\n  \"deletions\": 44,\n  \"path\": \"apps/vendor-huobi/src/services/accounts/super-margin.ts\",",
              "lineStart": 286,
              "lineEnd": 291
            },
            {
              "type": "function",
              "name": "spotTickCache",
              "code": "  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/services/accounts/super-margin.ts b/apps/vendor-huobi/src/services/accounts/super-margin.ts\\nindex b4fbe80f4..ff8859473 100644\\n--- a/apps/vendor-huobi/src/services/accounts/super-margin.ts\\n+++ b/apps/vendor-huobi/src/services/accounts/super-margin.ts\\n@@ -1,3 +1,2 @@\\n-import { createCache } from '@yuants/cache';\\n-import { IActionHandlerOfGetAccountInfo, IPosition } from '@yuants/data-account';\\n-import { formatTime } from '@yuants/utils';\\n+import { IActionHandlerOfGetAccountInfo, IPosition, makeSpotPosition } from '@yuants/data-account';\\n+import { encodePath } from '@yuants/utils';\\n@@ -5 +4 @@ import { getSpotAccountBalance, ICredential } from '../../api/private-api';\\n-import { getSpotTick } from '../../api/public-api';\\n+import { quoteCache } from '../market-data/quote';\\n@@ -8,5 +6,0 @@ import { superMarginAccountUidCache } from '../uid';\\n-const spotTickCache = createCache((currency) => getSpotTick({ symbol: `${currency}usdt` }), {\\n-  expire: 300_000, // 5 minutes\\n-  swrAfter: 10_000, // 10 seconds\\n-});\\n-\\n@@ -16,0 +11 @@ export const getSuperMarginAccountInfo: IActionHandlerOfGetAccountInfo<ICredenti\\n+  const positions: IPosition[] = [];\\n@@ -23,14 +17,0 @@ export const getSuperMarginAccountInfo: IActionHandlerOfGetAccountInfo<ICredenti\\n-  // get positions (non-usdt currencies)\\n-  const positions: IPosition[] = [];\\n-  const nonUsdtCurrencies = balanceList\\n-    .filter((v) => v.currency !== 'usdt')\\n-    .reduce((acc, cur) => {\\n-      const existing = acc.find((item) => item.currency === cur.currency);\\n-      if (existing) {\\n-        existing.balance += +cur.balance;\\n-      } else {\\n-        acc.push({ currency: cur.currency, balance: +cur.balance });\\n-      }\\n-      return acc;\\n-    }, [] as { currency: string; balance: number }[]);\\n-\\n@@ -38,6 +19,5 @@ export const getSuperMarginAccountInfo: IActionHandlerOfGetAccountInfo<ICredenti\\n-  for (const currencyData of nonUsdtCurrencies) {\\n-    if (currencyData.balance > 0) {\\n-      const tickerRes = await spotTickCache.query(currencyData.currency);\\n-      const price = tickerRes?.tick.close || 0;\\n-      try {\\n-        // get current price from websocket or fallback to REST API\\n+  for (const currencyData of balanceList) {\\n+    if (currencyData.balance === '0') continue;\\n+    const product_id = encodePath('HTX', 'SPOT', currencyData.currency + 'usdt');\\n+    const quote = await quoteCache.query(currencyData.currency);\\n+    const closable_price = currencyData.currency === 'usdt' ? 1 : +(quote?.ask_price ?? 0);\\n@@ -45,15 +25,9 @@ export const getSuperMarginAccountInfo: IActionHandlerOfGetAccountInfo<ICredenti\\n-        positions.push({\\n-          position_id: `${currencyData.currency}/usdt/spot`,\\n-          product_id: `${currencyData.currency}usdt`,\\n-          direction: 'LONG',\\n-          volume: currencyData.balance,\\n-          free_volume: currencyData.balance,\\n-          position_price: price,\\n-          closable_price: price,\\n-          floating_profit: 0,\\n-          valuation: currencyData.balance * price,\\n-        });\\n-      } catch (error) {\\n-        console.warn(formatTime(Date.now()), `Failed to get price for ${currencyData.currency}:`, error);\\n-      }\\n-    }\\n+    positions.push(\\n+      makeSpotPosition({\\n+        position_id: `${currencyData.currency}/usdt/spot`,\\n+        product_id: product_id,\\n+        volume: +currencyData.balance,\\n+        free_volume: +currencyData.balance,\\n+        closable_price: closable_price,\\n+      }),\\n+    );\\n\"\n},\n{\n  \"additions\": 23,\n  \"deletions\": 12,\n  \"path\": \"apps/vendor-huobi/src/services/accounts/swap.ts\",",
              "lineStart": 292,
              "lineEnd": 297
            },
            {
              "type": "function",
              "name": "usdAssets",
              "code": "  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/services/accounts/swap.ts b/apps/vendor-huobi/src/services/accounts/swap.ts\\nindex 4da1dbf2c..c847a74db 100644\\n--- a/apps/vendor-huobi/src/services/accounts/swap.ts\\n+++ b/apps/vendor-huobi/src/services/accounts/swap.ts\\n@@ -1 +1 @@\\n-import { IPosition } from '@yuants/data-account';\\n+import { IPosition, makeSpotPosition } from '@yuants/data-account';\\n@@ -3 +2,0 @@ import { encodePath } from '@yuants/utils';\\n-import { firstValueFrom } from 'rxjs';\\n@@ -5 +4,3 @@ import { getSwapCrossPositionInfo, getUnifiedAccountInfo, ICredential } from '..\\n-import { productService } from '../product';\\n+import { productCache } from '../product';\\n+\\n+const usdAssets = new Set(['USDT', 'USDC', 'USDD']);\\n@@ -7,0 +9 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n+  const positions: IPosition[] = [];\\n@@ -13,3 +15,13 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n-  const balanceData = balance.data.find((v) => v.margin_asset === 'USDT');\\n-  if (!balanceData) {\\n-    throw new Error('No USDT balance found in unified account');\\n+\\n+  for (const v of balance.data || []) {\\n+    if (v.margin_balance === 0) continue;\\n+    positions.push(\\n+      makeSpotPosition({\\n+        position_id: encodePath('HTX', 'SWAP-MARGIN', v.margin_asset),\\n+        datasource_id: 'HTX',\\n+        product_id: encodePath('HTX', 'SWAP-MARGIN', v.margin_asset),\\n+        volume: +v.margin_balance,\\n+        free_volume: +v.withdraw_available,\\n+        closable_price: usdAssets.has(v.margin_asset) ? 1 : 0,\\n+      }),\\n+    );\\n@@ -20,2 +32 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n-  const mapProductIdToPerpetualProduct = await firstValueFrom(productService.mapProductIdToProduct$);\\n-  const positions: IPosition[] = (positionsRes.data || []).map((v): IPosition => {\\n+  for (const v of positionsRes.data || []) {\\n@@ -23 +34 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n-    const theProduct = mapProductIdToPerpetualProduct?.get(product_id);\\n+    const theProduct = await productCache.query(product_id);\\n@@ -25 +36 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n-    return {\\n+    positions.push({\\n@@ -36,2 +47,2 @@ export const getSwapAccountInfo = async (credential: ICredential): Promise<IPosi\\n-    };\\n-  });\\n+    });\\n+  }\\n\"\n},\n{\n  \"additions\": 35,\n  \"deletions\": 2,\n  \"path\": \"apps/vendor-huobi/src/services/market-data/quote.ts\",",
              "lineStart": 298,
              "lineEnd": 303
            },
            {
              "type": "function",
              "name": "quote2",
              "code": "  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/services/market-data/quote.ts b/apps/vendor-huobi/src/services/market-data/quote.ts\\nindex d11620707..254f73d68 100644\\n--- a/apps/vendor-huobi/src/services/market-data/quote.ts\\n+++ b/apps/vendor-huobi/src/services/market-data/quote.ts\\n@@ -0,0 +1 @@\\n+import { createCache } from '@yuants/cache';\\n@@ -3 +4 @@ import { Terminal } from '@yuants/protocol';\\n-import { writeToSQL } from '@yuants/sql';\\n+import { escapeSQL, requestSQL, writeToSQL } from '@yuants/sql';\\n@@ -6,0 +8 @@ import {\\n+  getSpotMarketTickers,\\n@@ -65,0 +68,18 @@ const quote2$ = swapTradeTick$.pipe(\\n+const quote5$ = defer(() => getSpotMarketTickers()).pipe(\\n+  mergeMap((res) => res.data || []),\\n+  map(\\n+    (tick): Partial<IQuote> => ({\\n+      datasource_id: 'HTX',\\n+      product_id: encodePath('HTX', 'SPOT', tick.symbol),\\n+      ask_price: `${tick.ask}`,\\n+      bid_price: `${tick.bid}`,\\n+      ask_volume: `${tick.askSize}`,\\n+      bid_volume: `${tick.bidSize}`,\\n+      last_price: `${tick.close}`,\\n+    }),\\n+  ),\\n+  repeat({ delay: 1000 }),\\n+  retry({ delay: 1000 }),\\n+  shareReplay(1),\\n+);\\n+\\n@@ -131 +151 @@ if (process.env.WRITE_QUOTE_TO_SQL === 'true') {\\n-  merge(quote1$, quote2$, quote3$, quote4$)\\n+  merge(quote1$, quote2$, quote3$, quote4$, quote5$)\\n@@ -162,0 +183,13 @@ const mapSwapContractCodeToOpenInterest$ = defer(() => swapOpenInterest$).pipe(\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n+export const quoteCache = createCache<IQuote>(\\n+  async (product_id) => {\\n+    const sql = `select * from quote where product_id = ${escapeSQL(product_id)}`;\\n+    console.info('QuoteSQL', sql);\\n+    const [quote] = await requestSQL<IQuote[]>(terminal, sql);\\n+    console.info('QuoteFetched', product_id, JSON.stringify(quote));\\n+    return quote;\\n+  },\\n+  { expire: 10_000 },\\n+);\\n+\\n\"\n},\n{\n  \"additions\": 4,\n  \"deletions\": 6,\n  \"path\": \"apps/vendor-huobi/src/services/orders/submitOrder.ts\",",
              "lineStart": 304,
              "lineEnd": 309
            },
            {
              "type": "function",
              "name": "handleSuperMarginOrder",
              "code": "  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/services/orders/submitOrder.ts b/apps/vendor-huobi/src/services/orders/submitOrder.ts\\nindex e79925ede..7699595d2 100644\\n--- a/apps/vendor-huobi/src/services/orders/submitOrder.ts\\n+++ b/apps/vendor-huobi/src/services/orders/submitOrder.ts\\n@@ -3 +2,0 @@ import { decodePath, formatTime, newError, roundToStep } from '@yuants/utils';\\n-import { firstValueFrom } from 'rxjs';\\n@@ -13 +12 @@ import { getSpotTick } from '../../api/public-api';\\n-import { productService } from '../product';\\n+import { productCache } from '../product';\\n@@ -63 +62 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n-  const [balanceRes, mapProductIdToProduct, priceRes] = await Promise.all([\\n+  const [balanceRes, theProduct, priceRes] = await Promise.all([\\n@@ -65 +64 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n-    firstValueFrom(productService.mapProductIdToProduct$),\\n+    productCache.query(order.product_id),\\n@@ -73 +72 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n-  if (!mapProductIdToProduct) throw new Error('Product map not found');\\n+  if (!theProduct) throw newError('HUOBI_SUBMIT_ORDER_PRODUCT_NOT_FOUND', { product_id: order.product_id });\\n@@ -75 +73,0 @@ async function handleSuperMarginOrder(order: IOrder, credential: ICredential): P\\n-  const theProduct = mapProductIdToProduct.get(order.product_id);\\n\"\n},\n{\n  \"additions\": 2,\n  \"deletions\": 4,\n  \"path\": \"apps/vendor-huobi/src/services/product.ts\",",
              "lineStart": 310,
              "lineEnd": 315
            },
            {
              "type": "function",
              "name": "listProducts",
              "code": "  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/vendor-huobi/src/services/product.ts b/apps/vendor-huobi/src/services/product.ts\\nindex 32ee89405..314f35055 100644\\n--- a/apps/vendor-huobi/src/services/product.ts\\n+++ b/apps/vendor-huobi/src/services/product.ts\\n@@ -1 +1 @@\\n-import { IProduct, provideQueryProductsService } from '@yuants/data-product';\\n+import { createProductCache, IProduct } from '@yuants/data-product';\\n@@ -90,3 +90 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-export const productService = provideQueryProductsService(terminal, 'HTX', listProducts, {\\n-  auto_refresh_interval: 3600_000,\\n-});\\n+export const productCache = createProductCache(terminal);\\n\"\n},\n{\n  \"additions\": 1,\n  \"deletions\": 0,\n  \"path\": \"apps/virtual-exchange/package.json\",\n  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\\nindex 6784f32d1..bf9abbb4c 100644\\n--- a/apps/virtual-exchange/package.json\\n+++ b/apps/virtual-exchange/package.json\\n@@ -15,0 +16 @@\\n+    \\\"@yuants/data-product\\\": \\\"workspace:*\\\",\\n\"\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"apps/virtual-exchange/src/credential.ts\",",
              "lineStart": 316,
              "lineEnd": 327
            },
            {
              "type": "function",
              "name": "validCredentials",
              "code": "  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/virtual-exchange/src/credential.ts b/apps/virtual-exchange/src/credential.ts\\nindex 22f15a5dd..f72728008 100644\\n--- a/apps/virtual-exchange/src/credential.ts\\n+++ b/apps/virtual-exchange/src/credential.ts\\n@@ -97,0 +98,10 @@ export const validCredentials$ = defer(() => listAllCredentials()).pipe(\\n+export const validCredentialTypes$ = validCredentials$.pipe(\\n+  map((credentials) => {\\n+    const types = new Set<string>();\\n+    credentials.forEach((credential) => {\\n+      types.add(credential.type);\\n+    });\\n+    return Array.from(types);\\n+  }),\\n+);\\n+\\n\"\n},\n{\n  \"additions\": 2,\n  \"deletions\": 1,\n  \"path\": \"apps/virtual-exchange/src/index.ts\",\n  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/virtual-exchange/src/index.ts b/apps/virtual-exchange/src/index.ts\\nindex fab618a86..8d7f19a07 100644\\n--- a/apps/virtual-exchange/src/index.ts\\n+++ b/apps/virtual-exchange/src/index.ts\\n@@ -1 +0,0 @@\\n-import './legacy-services';\\n@@ -3,0 +3,2 @@ import './general';\\n+import './legacy-services';\\n+import './product-collector';\\n\"\n},\n{\n  \"additions\": 37,\n  \"deletions\": 0,\n  \"path\": \"apps/virtual-exchange/src/product-collector.ts\",",
              "lineStart": 328,
              "lineEnd": 339
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/apps/virtual-exchange/src/product-collector.ts b/apps/virtual-exchange/src/product-collector.ts\\nnew file mode 100644\\nindex 000000000..15ba0a692\\n--- /dev/null\\n+++ b/apps/virtual-exchange/src/product-collector.ts\\n@@ -0,0 +1,37 @@\\n+import { provideQueryProductsService } from '@yuants/data-product';\\n+import { listProducts } from '@yuants/exchange';\\n+import { Terminal } from '@yuants/protocol';\\n+import { listWatch, newError } from '@yuants/utils';\\n+import { Observable, Subject } from 'rxjs';\\n+import { validCredentialTypes$ } from './credential';\\n+\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n+validCredentialTypes$\\n+  .pipe(\\n+    listWatch(\\n+      (x) => x,\\n+      (type) =>\\n+        new Observable((sub) => {\\n+          const dispose$ = new Subject<void>();\\n+          sub.add(() => {\\n+            dispose$.next();\\n+            dispose$.complete();\\n+          });\\n+          provideQueryProductsService(\\n+            terminal,\\n+            type,\\n+            async () => {\\n+              const res = await listProducts(terminal, type);\\n+              if (!res.data) throw newError('FETCH_PRODUCTS_FAILED', { credential: type, res });\\n+              return res.data;\\n+            },\\n+            {\\n+              auto_refresh_interval: 3600_000,\\n+              dispose$,\\n+            },\\n+          );\\n+        }),\\n+    ),\\n+  )\\n+  .subscribe();\\n\"\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/app-virtual-exchange/2025-12-03-09-06.json\",\n  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-03-09-06.json b/common/changes/@yuants/app-virtual-exchange/2025-12-03-09-06.json\\nnew file mode 100644\\nindex 000000000..2528df298\\n--- /dev/null\\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-03-09-06.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\",\\n+      \\\"comment\\\": \\\"auto pull all products\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/app-virtual-exchange\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/data-product/2025-12-03-09-06.json\",\n  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/common/changes/@yuants/data-product/2025-12-03-09-06.json b/common/changes/@yuants/data-product/2025-12-03-09-06.json\\nnew file mode 100644\\nindex 000000000..4b040f73d\\n--- /dev/null\\n+++ b/common/changes/@yuants/data-product/2025-12-03-09-06.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/data-product\\\",\\n+      \\\"comment\\\": \\\"add clientProductCache\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/data-product\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n},\n{",
              "lineStart": 340,
              "lineEnd": 375
            },
            {
              "type": "function",
              "name": "createClientProductCache",
              "code": "  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/libraries/data-product/etc/data-product.api.md b/libraries/data-product/etc/data-product.api.md\\nindex 7c0d72304..a8fb29af1 100644\\n--- a/libraries/data-product/etc/data-product.api.md\\n+++ b/libraries/data-product/etc/data-product.api.md\\n@@ -11,0 +12,3 @@ import { Terminal } from '@yuants/protocol';\\n+// @public\\r\\n+export const createClientProductCache: (terminal: Terminal, options?: IProductCacheOptions) => ICache<IProduct>;\\r\\n+\\r\\n@@ -75,0 +79 @@ export function provideQueryProductsService(terminal: Terminal, datasource_id: s\\n+    dispose$?: Observable<void>;\\r\\n\"\n},\n{\n  \"additions\": 21,\n  \"deletions\": 0,\n  \"path\": \"libraries/data-product/src/ProductCache.ts\",",
              "lineStart": 376,
              "lineEnd": 381
            },
            {
              "type": "function",
              "name": "createProductCache",
              "code": "  \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/libraries/data-product/src/ProductCache.ts b/libraries/data-product/src/ProductCache.ts\\nindex b550e5d60..d1f01b482 100644\\n--- a/libraries/data-product/src/ProductCache.ts\\n+++ b/libraries/data-product/src/ProductCache.ts\\n@@ -48,0 +49,21 @@ export const createProductCache = (terminal: Terminal, options?: IProductCacheOp\\n+\\n+/**\\n+ * Create a client-side product cache.\\n+ *\\n+ * @public\\n+ */\\n+export const createClientProductCache = (\\n+  terminal: Terminal,\\n+  options?: IProductCacheOptions,\\n+): ICache<IProduct> =>\\n+  createCache<IProduct>(\\n+    async (product_id, _force_update) => {\\n+      // TODO: Add datasource_id\\n+      const [data] = await requestSQL<IProduct[]>(\\n+        terminal,\\n+        `select * from product where product_id=${escapeSQL(product_id)}`,\\n+      );\\n+      return data;\\n+    },\\n+    { expire: options?.expire ?? 3600 * 1000 },\\n+  );\\n\"\n},\n{\n  \"additions\": 9,\n  \"deletions\": 0,\n  \"path\": \"libraries/data-product/src/QueryProducts.ts\",",
              "lineStart": 382,
              "lineEnd": 387
            },
            {
              "type": "function",
              "name": "provideQueryProductsService",
              "code": "      \"patch\": \"commit 33d7ed118216879642b2de2cd5a5433d2e5cdc6a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 18:24:17 2025 +0800\\n\\n    feat: enhance product listing and caching mechanisms (#2162)\\n\\ndiff --git a/libraries/data-product/src/QueryProducts.ts b/libraries/data-product/src/QueryProducts.ts\\nindex a68311bc0..b9bf85f7e 100644\\n--- a/libraries/data-product/src/QueryProducts.ts\\n+++ b/libraries/data-product/src/QueryProducts.ts\\n@@ -102,0 +103,5 @@ export function provideQueryProductsService(\\n+    /**\\n+     * Dispose observable to clean up resources\\n+     * 清理资源的可观察对象\\n+     */\\n+    dispose$?: Observable<void>;\\n@@ -189,0 +195,4 @@ export function provideQueryProductsService(\\n+  options?.dispose$?.subscribe(() => {\\n+    dispose.dispose();\\n+  });\\n+\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"7977a8dcfd10fd424dc9811ff8c4242fa0126591\",\n  \"short\": \"7977a8dcf\",\n  \"author\": \"humblelittlec1[bot]\",\n  \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n  \"authoredAt\": \"2025-12-03 18:25:56 +0800\",\n  \"subject\": \"chore: bump version (#2163)\",\n  \"files\": [\n    {\n      \"additions\": 17,\n      \"deletions\": 0,",
              "lineStart": 388,
              "lineEnd": 989
            },
            {
              "type": "function",
              "name": "getMarginInterestRateHistory",
              "code": "  \"patch\": \"commit 7eb5263f73aed52d3d0b8e5c77b7214d05ed72d9\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:07:44 2025 +0800\\n\\n    fix: binance spot positon (#2164)\\n\\ndiff --git a/apps/vendor-binance/src/api/private-api.ts b/apps/vendor-binance/src/api/private-api.ts\\nindex e7643bd48..982c1902b 100644\\n--- a/apps/vendor-binance/src/api/private-api.ts\\n+++ b/apps/vendor-binance/src/api/private-api.ts\\n@@ -796,0 +797,60 @@ export const getMarginInterestRateHistory = (params: {\\n+\\n+/**\\n+ *获取用户持仓\\n+ * @param credential\\n+ *  https://developers.binance.com/docs/zh-CN/wallet/asset/user-assets#%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0\\n+ * @param params\\n+ * @returns\\n+ */\\n+export const getUserAsset = (\\n+  credential: ICredential,\\n+  params: {\\n+    timestamp: number;\\n+    asset?: string;\\n+    needBtcValuation?: boolean;\\n+    recvWindow?: number;\\n+  },\\n+) => {\\n+  return requestPrivate<\\n+    | {\\n+        asset: string;\\n+        free: string;\\n+        locked: string;\\n+        freeze: string;\\n+        withdrawing: string;\\n+        ipoable: string;\\n+        btcValuation: string;\\n+      }[]\\n+    | IApiError\\n+  >(credential, 'POST', 'https://api.binance.com/sapi/v3/asset/getUserAsset', params);\\n+};\\n+\\n+/**\\n+ * 查询资金账户\\n+ * @param credential\\n+ * https://developers.binance.com/docs/zh-CN/wallet/asset/funding-wallet?utm_source=chatgpt.com\\n+ * @param params\\n+ * @returns\\n+ */\\n+export const getFundingAsset = (\\n+  credential: ICredential,\\n+  params: {\\n+    timestamp: number;\\n+    asset?: string;\\n+    needBtcValuation?: boolean;\\n+    recvWindow?: number;\\n+  },\\n+) => {\\n+  return requestPrivate<\\n+    | {\\n+        asset: string;\\n+        free: string;\\n+        locked: string;\\n+        freeze: string;\\n+        withdrawing: string;\\n+        ipoable: string;\\n+        btcValuation: string;\\n+      }[]\\n+    | IApiError\\n+  >(credential, 'POST', 'https://api.binance.com/sapi/v1/asset/get-funding-asset', params);\\n+};\\n\"\n},\n{\n  \"additions\": 30,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-binance/src/api/public-api.ts\",",
              "lineStart": 990,
              "lineEnd": 995
            },
            {
              "type": "function",
              "name": "getSpotExchangeInfo",
              "code": "  \"patch\": \"commit 7eb5263f73aed52d3d0b8e5c77b7214d05ed72d9\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:07:44 2025 +0800\\n\\n    fix: binance spot positon (#2164)\\n\\ndiff --git a/apps/vendor-binance/src/api/public-api.ts b/apps/vendor-binance/src/api/public-api.ts\\nindex 7ff3b6551..07546b44b 100644\\n--- a/apps/vendor-binance/src/api/public-api.ts\\n+++ b/apps/vendor-binance/src/api/public-api.ts\\n@@ -217,0 +218,30 @@ export const getSpotExchangeInfo = (): Promise<ISpotExchangeInfo> =>\\n+\\n+/**\\n+ * 获取当前现货报价\\n+ *\\n+ *https://developers.binance.com/docs/zh-CN/binance-spot-api-docs/rest-api/market-data-endpoints#%E6%9C%80%E6%96%B0%E4%BB%B7%E6%A0%BC%E6%8E%A5%E5%8F%A3\\n+ */\\n+export const getSpotTickerPrice = (params?: {\\n+  symbol?: string;\\n+  symbols?: string;\\n+  symbolStatus?: 'TRADING' | 'HALT' | 'BREAK';\\n+}): Promise<\\n+  | {\\n+      symbol: string;\\n+      price: string;\\n+    }\\n+  | {\\n+      symbol: string;\\n+      price: string;\\n+    }[]\\n+> =>\\n+  requestPublic<\\n+    | {\\n+        symbol: string;\\n+        price: string;\\n+      }\\n+    | {\\n+        symbol: string;\\n+        price: string;\\n+      }[]\\n+  >('GET', 'https://api.binance.com/api/v3/ticker/price', params);\\n\"\n},\n{\n  \"additions\": 38,\n  \"deletions\": 5,\n  \"path\": \"apps/vendor-binance/src/services/accounts/spot.ts\",",
              "lineStart": 996,
              "lineEnd": 1001
            },
            {
              "type": "function",
              "name": "getSpotAccountInfoSnapshot",
              "code": "      \"patch\": \"commit 7eb5263f73aed52d3d0b8e5c77b7214d05ed72d9\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:07:44 2025 +0800\\n\\n    fix: binance spot positon (#2164)\\n\\ndiff --git a/apps/vendor-binance/src/services/accounts/spot.ts b/apps/vendor-binance/src/services/accounts/spot.ts\\nindex 144315335..4e16f01b1 100644\\n--- a/apps/vendor-binance/src/services/accounts/spot.ts\\n+++ b/apps/vendor-binance/src/services/accounts/spot.ts\\n@@ -4 +4,2 @@ import { isApiError } from '../../api/client';\\n-import { getSpotAccountInfo, ICredential } from '../../api/private-api';\\n+import { getFundingAsset, getSpotAccountInfo, ICredential } from '../../api/private-api';\\n+import { getSpotTickerPrice } from '../../api/public-api';\\n@@ -7 +8,7 @@ export const getSpotAccountInfoSnapshot = async (credential: ICredential): Promi\\n-  const res = await getSpotAccountInfo(credential, { omitZeroBalances: true });\\n+  const [res, fundingAsset] = await Promise.all([\\n+    getSpotAccountInfo(credential, { omitZeroBalances: true }),\\n+    getFundingAsset(credential, {\\n+      timestamp: Date.now(),\\n+    }),\\n+  ]);\\n+\\n@@ -11 +18,23 @@ export const getSpotAccountInfoSnapshot = async (credential: ICredential): Promi\\n-  const positions = res.balances\\n+  if (isApiError(fundingAsset)) {\\n+    throw new Error(fundingAsset.msg);\\n+  }\\n+\\n+  const prices = await getSpotTickerPrice({\\n+    symbols: JSON.stringify([\\n+      ...new Set([\\n+        ...res.balances\\n+          .map((balance) => {\\n+            const match = balance.asset.match(/^LD(\\\\w+)$/);\\n+            let symbol = balance.asset;\\n+            if (match) {\\n+              symbol = match[1];\\n+            }\\n+            if (symbol === 'USDT') return '';\\n+            return `${symbol}USDT`;\\n+          })\\n+          .filter(Boolean),\\n+        ...fundingAsset.map((item) => `${item.asset}USDT`),\\n+      ]),\\n+    ]),\\n+  });\\n+  const positions = [...res.balances, ...fundingAsset]\\n@@ -18 +47 @@ export const getSpotAccountInfoSnapshot = async (credential: ICredential): Promi\\n-        product_id: encodePath('BINANCE', 'SPOT', `${balance.asset}USDT`),\\n+        product_id: encodePath('BINANCE', 'SPOT', `${balance.asset}`),\\n@@ -21 +50,5 @@ export const getSpotAccountInfoSnapshot = async (credential: ICredential): Promi\\n-        closable_price: 0, // TODO: fetch price later\\n+        closable_price: Array.isArray(prices)\\n+          ? +(prices.find((item) => item.symbol === `${balance.asset}USDT`)?.price ?? 0)\\n+          : balance.asset === 'USDT'\\n+          ? 1\\n+          : 0,\\n\"\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-binance/2025-12-03-11-05.json\",\n      \"patch\": \"commit 7eb5263f73aed52d3d0b8e5c77b7214d05ed72d9\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:07:44 2025 +0800\\n\\n    fix: binance spot positon (#2164)\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-03-11-05.json b/common/changes/@yuants/vendor-binance/2025-12-03-11-05.json\\nnew file mode 100644\\nindex 000000000..72d4eecb1\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-binance/2025-12-03-11-05.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n+      \\\"comment\\\": \\\"fix binance spot position\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"3cc1e07a91ae983addfd73cf9036a951f00d3148\",\n  \"short\": \"3cc1e07a9\",\n  \"author\": \"Ryan\",\n  \"email\": \"stayrealrhr@gmail.com\",",
              "lineStart": 1002,
              "lineEnd": 1023
            },
            {
              "type": "function",
              "name": "getSpotAccountInfoSnapshot",
              "code": "  \"patch\": \"commit 3cc1e07a91ae983addfd73cf9036a951f00d3148\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:57:15 2025 +0800\\n\\n    Ryan fix bi pox x (#2166)\\n    \\n    * feat: fix bi po\\n    \\n    * feat: fix bi po\\n\\ndiff --git a/apps/vendor-binance/src/services/accounts/spot.ts b/apps/vendor-binance/src/services/accounts/spot.ts\\nindex 4e16f01b1..7561d3054 100644\\n--- a/apps/vendor-binance/src/services/accounts/spot.ts\\n+++ b/apps/vendor-binance/src/services/accounts/spot.ts\\n@@ -39,0 +40 @@ export const getSpotAccountInfoSnapshot = async (credential: ICredential): Promi\\n+\\n@@ -50,5 +51,6 @@ export const getSpotAccountInfoSnapshot = async (credential: ICredential): Promi\\n-        closable_price: Array.isArray(prices)\\n-          ? +(prices.find((item) => item.symbol === `${balance.asset}USDT`)?.price ?? 0)\\n-          : balance.asset === 'USDT'\\n-          ? 1\\n-          : 0,\\n+        closable_price:\\n+          balance.asset === 'USDT'\\n+            ? 1\\n+            : Array.isArray(prices)\\n+            ? +(prices.find((item) => item.symbol === `${balance.asset}USDT`)?.price ?? 0)\\n+            : 0,\\n\"\n},\n{\n  \"additions\": 35,\n  \"deletions\": 2,\n  \"path\": \"apps/vendor-binance/src/services/accounts/unified.ts\",",
              "lineStart": 1024,
              "lineEnd": 1029
            },
            {
              "type": "function",
              "name": "getUnifiedAccountInfo",
              "code": "      \"patch\": \"commit 3cc1e07a91ae983addfd73cf9036a951f00d3148\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:57:15 2025 +0800\\n\\n    Ryan fix bi pox x (#2166)\\n    \\n    * feat: fix bi po\\n    \\n    * feat: fix bi po\\n\\ndiff --git a/apps/vendor-binance/src/services/accounts/unified.ts b/apps/vendor-binance/src/services/accounts/unified.ts\\nindex 1a6aea6b9..4bb4de290 100644\\n--- a/apps/vendor-binance/src/services/accounts/unified.ts\\n+++ b/apps/vendor-binance/src/services/accounts/unified.ts\\n@@ -1 +1 @@\\n-import { IPosition } from '@yuants/data-account';\\n+import { IPosition, makeSpotPosition } from '@yuants/data-account';\\n@@ -4,0 +5 @@ import { getUnifiedAccountBalance, getUnifiedUmAccount, ICredential } from '../.\\n+import { getSpotTickerPrice } from '../../api/public-api';\\n@@ -43 +44,33 @@ export const getUnifiedAccountInfo = async (credential: ICredential): Promise<IP\\n-  return positions;\\n+  const prices = await getSpotTickerPrice({\\n+    symbols: JSON.stringify([\\n+      ...new Set([\\n+        ...balanceRes\\n+          .map((balance) => {\\n+            const match = balance.asset.match(/^LD(\\\\w+)$/);\\n+            let symbol = balance.asset;\\n+            if (match) {\\n+              symbol = match[1];\\n+            }\\n+            if (symbol === 'USDT') return '';\\n+            return `${symbol}USDT`;\\n+          })\\n+          .filter(Boolean),\\n+      ]),\\n+    ]),\\n+  });\\n+  const balancePositions: IPosition[] = balanceRes.map((position) =>\\n+    makeSpotPosition({\\n+      position_id: `UNIFIED-SPOT/${position.asset}`,\\n+      datasource_id: 'BINANCE',\\n+      product_id: encodePath('BINANCE', 'UNIFIED-SPOT', position.asset),\\n+      volume: +position.totalWalletBalance + +position.umUnrealizedPNL,\\n+      free_volume: +position.crossMarginFree,\\n+      closable_price:\\n+        position.asset === 'USDT'\\n+          ? 1\\n+          : Array.isArray(prices)\\n+          ? +(prices.find((item) => item.symbol === `${position.asset}USDT`)?.price ?? 0)\\n+          : 0,\\n+    }),\\n+  );\\n+  return [...balancePositions, ...positions];\\n\"\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-binance/2025-12-03-11-55.json\",\n      \"patch\": \"commit 3cc1e07a91ae983addfd73cf9036a951f00d3148\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Wed Dec 3 19:57:15 2025 +0800\\n\\n    Ryan fix bi pox x (#2166)\\n    \\n    * feat: fix bi po\\n    \\n    * feat: fix bi po\\n\\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-03-11-55.json b/common/changes/@yuants/vendor-binance/2025-12-03-11-55.json\\nnew file mode 100644\\nindex 000000000..51b5a591e\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-binance/2025-12-03-11-55.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-binance\\\",\\n+      \\\"comment\\\": \\\"fix binance position\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-binance\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"3c449975366b241d5699220c818374d97237e3f8\",\n  \"short\": \"3c4499753\",\n  \"author\": \"humblelittlec1[bot]\",\n  \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",",
              "lineStart": 1030,
              "lineEnd": 1097
            },
            {
              "type": "function",
              "name": "getPerpPositions",
              "code": "  \"patch\": \"commit 8f17a0cbd4ee9e4270bbb74a4c81061a74101692\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 20:47:39 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/accounts/perp.ts b/apps/vendor-hyperliquid/src/services/accounts/perp.ts\\nindex 6cce53490..2be6376de 100644\\n--- a/apps/vendor-hyperliquid/src/services/accounts/perp.ts\\n+++ b/apps/vendor-hyperliquid/src/services/accounts/perp.ts\\n@@ -1 +1 @@\\n-import { IPosition } from '@yuants/data-account';\\n+import { IPosition, makeSpotPosition } from '@yuants/data-account';\\n@@ -10 +10 @@ export const getPerpPositions = async (credential: ICredential) => {\\n-  console.info(`[${formatTime(Date.now())}] Getting perp account info for ${credential.address}`);\\n+  console.info(formatTime(Date.now()), `Getting perp account info for ${credential.address}`);\\n@@ -14,2 +14 @@ export const getPerpPositions = async (credential: ICredential) => {\\n-  // Map positions\\n-  const positions = summary.assetPositions.map(\\n+  const perpPositions = summary.assetPositions.map(\\n@@ -31 +30,21 @@ export const getPerpPositions = async (credential: ICredential) => {\\n-  return positions;\\n+  const totalUnrealizedPnl = summary.assetPositions.reduce(\\n+    (acc, assetPosition) => acc + Number(assetPosition.position.unrealizedPnl || 0),\\n+    0,\\n+  );\\n+  const accountValue = Number(summary.marginSummary?.accountValue ?? 0);\\n+  const usdcBalance = accountValue - totalUnrealizedPnl;\\n+  const usdcPositions =\\n+    usdcBalance > 0\\n+      ? [\\n+          makeSpotPosition({\\n+            position_id: 'USDC',\\n+            datasource_id: 'HYPERLIQUID',\\n+            product_id: encodePath('HYPERLIQUID', 'PERPETUAL-ASSET', 'USDC'),\\n+            volume: usdcBalance,\\n+            free_volume: usdcBalance,\\n+            closable_price: 1,\\n+          }),\\n+        ]\\n+      : [];\\n+\\n+  return [...usdcPositions, ...perpPositions];\\n\"\n},\n{\n  \"additions\": 7,\n  \"deletions\": 4,\n  \"path\": \"apps/vendor-hyperliquid/src/services/accounts/spot.ts\",",
              "lineStart": 1098,
              "lineEnd": 1103
            },
            {
              "type": "function",
              "name": "getSpotPositions",
              "code": "  \"patch\": \"commit 8f17a0cbd4ee9e4270bbb74a4c81061a74101692\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 20:47:39 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/accounts/spot.ts b/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\nindex 426b61925..cee336c2e 100644\\n--- a/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\n+++ b/apps/vendor-hyperliquid/src/services/accounts/spot.ts\\n@@ -3 +3 @@ import { encodePath, formatTime } from '@yuants/utils';\\n-import { getUserTokenBalances } from '../../api/public-api';\\n+import { getAllMids, getUserTokenBalances } from '../../api/public-api';\\n@@ -10 +10 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-  console.info(`[${formatTime(Date.now())}] Getting spot account info for ${credential.address}`);\\n+  console.info(formatTime(Date.now()), `Getting spot account info for ${credential.address}`);\\n@@ -12 +12,4 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-  const balances = await getUserTokenBalances({ user: credential.address });\\n+  const [balances, mids] = await Promise.all([\\n+    getUserTokenBalances({ user: credential.address }),\\n+    getAllMids(),\\n+  ]);\\n@@ -25 +28 @@ export const getSpotPositions = async (credential: ICredential) => {\\n-          closable_price: 1,\\n+          closable_price: balance.coin === 'USDC' ? 1 : Number(mids?.[balance.coin] ?? 0),\\n\"\n},\n{\n  \"additions\": 4,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-hyperliquid/src/services/exchange.ts\",",
              "lineStart": 1104,
              "lineEnd": 1109
            },
            {
              "type": "function",
              "name": "perpPositions",
              "code": "  \"patch\": \"commit 8f17a0cbd4ee9e4270bbb74a4c81061a74101692\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 20:47:39 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/exchange.ts b/apps/vendor-hyperliquid/src/services/exchange.ts\\nindex bc70307f4..e36dcefff 100644\\n--- a/apps/vendor-hyperliquid/src/services/exchange.ts\\n+++ b/apps/vendor-hyperliquid/src/services/exchange.ts\\n@@ -60,0 +61,4 @@ provideExchangeServices<ICredential>(terminal, {\\n+    if (instType === 'PERPETUAL-ASSET') {\\n+      const perpPositions = await getPerpPositions(credential);\\n+      return perpPositions.filter((position) => position.product_id === product_id);\\n+    }\\n\"\n},\n{\n  \"additions\": 3,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-hyperliquid/src/services/orders/listOrders.ts\",",
              "lineStart": 1110,
              "lineEnd": 1115
            },
            {
              "type": "function",
              "name": "listPerpOrders",
              "code": "      \"patch\": \"commit 8f17a0cbd4ee9e4270bbb74a4c81061a74101692\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 20:47:39 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167)\\n\\ndiff --git a/apps/vendor-hyperliquid/src/services/orders/listOrders.ts b/apps/vendor-hyperliquid/src/services/orders/listOrders.ts\\nindex 15c8961a2..9ffd16181 100644\\n--- a/apps/vendor-hyperliquid/src/services/orders/listOrders.ts\\n+++ b/apps/vendor-hyperliquid/src/services/orders/listOrders.ts\\n@@ -51,0 +52,3 @@ export const listPerpOrders = async (credential: ICredential): Promise<IOrder[]>\\n+    if (!orders || !Array.isArray(orders)) {\\n+      return [];\\n+    }\\n\"\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-hyperliquid/2025-12-03-12-38.json\",\n      \"patch\": \"commit 8f17a0cbd4ee9e4270bbb74a4c81061a74101692\\nAuthor: Siyuan Wang <c.one@thrimbda.com>\\nDate:   Wed Dec 3 20:47:39 2025 +0800\\n\\n    fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167)\\n\\ndiff --git a/common/changes/@yuants/vendor-hyperliquid/2025-12-03-12-38.json b/common/changes/@yuants/vendor-hyperliquid/2025-12-03-12-38.json\\nnew file mode 100644\\nindex 000000000..ed01d4f2d\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-hyperliquid/2025-12-03-12-38.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\",\\n+      \\\"comment\\\": \\\"更新账户信息处理，增加USDC头寸支持及API健壮性改进\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-hyperliquid\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"ebf343d01c6d7c7edc032dba59baf3d219670361\",\n  \"short\": \"ebf343d01\",\n  \"author\": \"humblelittlec1[bot]\",\n  \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",",
              "lineStart": 1116,
              "lineEnd": 1207
            },
            {
              "type": "function",
              "name": "getPerpAccountInfo",
              "code": "  \"patch\": \"commit 17bf37f7daa6edb1371f9057ffed3f52b3570b60\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 21:03:37 2025 +0800\\n\\n    refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\\n\\ndiff --git a/apps/vendor-aster/src/services/accounts/perp.ts b/apps/vendor-aster/src/services/accounts/perp.ts\\ndeleted file mode 100644\\nindex 4bdb41564..000000000\\n--- a/apps/vendor-aster/src/services/accounts/perp.ts\\n+++ /dev/null\\n@@ -1,28 +0,0 @@\\n-import { IPosition } from '@yuants/data-account';\\n-import { encodePath } from '@yuants/utils';\\n-import { getFApiV4Account, ICredential } from '../../api/private-api';\\n-\\n-export const getPerpAccountInfo = async (credential: ICredential) => {\\n-  const [a] = await Promise.all([getFApiV4Account(credential, {})]);\\n-\\n-  const equity = +a.totalWalletBalance + +a.totalUnrealizedProfit;\\n-  const free = +a.availableBalance;\\n-\\n-  const positions = a.positions\\n-    .filter((p) => +p.positionAmt !== 0)\\n-    .map(\\n-      (p): IPosition => ({\\n-        position_id: p.symbol,\\n-        product_id: encodePath('ASTER', 'PERP', p.symbol),\\n-        datasource_id: 'ASTER',\\n-        direction: p.positionSide === 'BOTH' ? (+p.positionAmt > 0 ? 'LONG' : 'SHORT') : p.positionSide,\\n-        volume: Math.abs(+p.positionAmt),\\n-        free_volume: Math.abs(+p.positionAmt),\\n-        position_price: +p.entryPrice,\\n-        closable_price: Math.abs(+p.notional / +p.positionAmt),\\n-        floating_profit: +p.unrealizedProfit,\\n-        valuation: Math.abs(+p.notional),\\n-      }),\\n-    );\\n-  return positions;\\n-};\\n\"\n},\n{\n  \"additions\": 64,\n  \"deletions\": 20,\n  \"path\": \"apps/vendor-aster/src/services/accounts/spot.ts\",",
              "lineStart": 1208,
              "lineEnd": 1213
            },
            {
              "type": "function",
              "name": "asBNBPrice",
              "code": "  \"patch\": \"commit 17bf37f7daa6edb1371f9057ffed3f52b3570b60\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 21:03:37 2025 +0800\\n\\n    refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\\n\\ndiff --git a/apps/vendor-aster/src/services/accounts/spot.ts b/apps/vendor-aster/src/services/accounts/spot.ts\\nindex d61281472..d04bf81c9 100644\\n--- a/apps/vendor-aster/src/services/accounts/spot.ts\\n+++ b/apps/vendor-aster/src/services/accounts/spot.ts\\n@@ -0,0 +1 @@\\n+import { createCache } from '@yuants/cache';\\n@@ -2 +2,0 @@ import { IPosition, makeSpotPosition } from '@yuants/data-account';\\n-import { getApiV1Account, getApiV1TickerPrice, getFApiV4Account, ICredential } from '../../api/private-api';\\n@@ -3,0 +4,12 @@ import { encodePath } from '@yuants/utils';\\n+import { getApiV1Account, getApiV1TickerPrice, getFApiV4Account, ICredential } from '../../api/private-api';\\n+\\n+// ISSUE: ASBNB price is not available in the price API, need to fetch from coingecko\\n+const asBNBPrice = createCache(\\n+  () =>\\n+    fetch('https://api.coingecko.com/api/v3/simple/price?ids=astherus-staked-bnb&vs_currencies=usd')\\n+      .then((res) => res.json())\\n+      .then((data) => data['astherus-staked-bnb'].usd as number),\\n+  {\\n+    expire: 60_000, // 1 minute\\n+  },\\n+);\\n@@ -5 +17,2 @@ import { encodePath } from '@yuants/utils';\\n-export const getSpotAccountInfo = async (credential: ICredential) => {\\n+export const getPositions = async (credential: ICredential) => {\\n+  const positions: IPosition[] = [];\\n@@ -12 +25 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-  const positions = x.balances.map((b): IPosition => {\\n+  for (const b of x.balances) {\\n@@ -14,14 +27,28 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-    return makeSpotPosition({\\n-      position_id: b.asset,\\n-      datasource_id: 'ASTER',\\n-      product_id: encodePath('ASTER', 'SPOT', b.asset),\\n-      volume: +b.free + +b.locked,\\n-      free_volume: +b.free,\\n-      closable_price: +thePrice,\\n-    });\\n-  });\\n-  const walletAssets = prep.assets\\n-    .filter((xx) => +xx.walletBalance > 0)\\n-    .map((b): IPosition => {\\n-      const thePrice = b.asset === 'USDT' ? 1 : prices.find((p) => p.symbol === b.asset + 'USDT')?.price ?? 0;\\n-      return makeSpotPosition({\\n+    positions.push(\\n+      makeSpotPosition({\\n+        position_id: b.asset,\\n+        datasource_id: 'ASTER',\\n+        product_id: encodePath('ASTER', 'SPOT', b.asset),\\n+        volume: +b.free + +b.locked,\\n+        free_volume: +b.free,\\n+        closable_price: +thePrice,\\n+      }),\\n+    );\\n+  }\\n+\\n+  for (const b of prep.assets) {\\n+    if (+b.walletBalance === 0) continue;\\n+    let thePrice = 0;\\n+    if (b.asset === 'USDT') {\\n+      thePrice = 1;\\n+    } else if (b.asset === 'ASBNB') {\\n+      const _p = await asBNBPrice.query('').catch(() => 0);\\n+      if (_p) {\\n+        thePrice = _p;\\n+      }\\n+    } else {\\n+      thePrice = +(prices.find((p) => p.symbol === b.asset + 'USDT')?.price ?? 0);\\n+    }\\n+\\n+    positions.push(\\n+      makeSpotPosition({\\n@@ -33,2 +60,18 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-        closable_price: +thePrice,\\n-      });\\n+        closable_price: thePrice,\\n+      }),\\n+    );\\n+  }\\n+\\n+  for (const p of prep.positions) {\\n+    if (+p.positionAmt === 0) continue;\\n+    positions.push({\\n+      position_id: p.symbol,\\n+      product_id: encodePath('ASTER', 'PERP', p.symbol),\\n+      datasource_id: 'ASTER',\\n+      direction: p.positionSide === 'BOTH' ? (+p.positionAmt > 0 ? 'LONG' : 'SHORT') : p.positionSide,\\n+      volume: Math.abs(+p.positionAmt),\\n+      free_volume: Math.abs(+p.positionAmt),\\n+      position_price: +p.entryPrice,\\n+      closable_price: Math.abs(+p.notional / +p.positionAmt),\\n+      floating_profit: +p.unrealizedProfit,\\n+      valuation: Math.abs(+p.notional),\\n@@ -35,0 +79 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n+  }\\n@@ -37 +81 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-  return [...positions, ...walletAssets];\\n+  return positions;\\n\"\n},\n{\n  \"additions\": 4,\n  \"deletions\": 18,\n  \"path\": \"apps/vendor-aster/src/services/exchange.ts\",",
              "lineStart": 1214,
              "lineEnd": 1219
            },
            {
              "type": "function",
              "name": "positions",
              "code": "  \"patch\": \"commit 17bf37f7daa6edb1371f9057ffed3f52b3570b60\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 21:03:37 2025 +0800\\n\\n    refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\\n\\ndiff --git a/apps/vendor-aster/src/services/exchange.ts b/apps/vendor-aster/src/services/exchange.ts\\nindex 4cdd15bff..71a555cee 100644\\n--- a/apps/vendor-aster/src/services/exchange.ts\\n+++ b/apps/vendor-aster/src/services/exchange.ts\\n@@ -8 +8 @@ import { getCredentialId } from './accounts/profile';\\n-import { getSpotAccountInfo } from './accounts/spot';\\n+import { getPositions } from './accounts/spot';\\n@@ -12 +11,0 @@ import { ICredential } from '../api/private-api';\\n-import { getPerpAccountInfo } from './accounts/perp';\\n@@ -30,7 +29 @@ provideExchangeServices<ICredential>(terminal, {\\n-  getPositions: async function (credential: ICredential): Promise<IPosition[]> {\\n-    const [perpPositions, spotPositions] = await Promise.all([\\n-      getPerpAccountInfo(credential),\\n-      getSpotAccountInfo(credential),\\n-    ]);\\n-    return [...perpPositions, ...spotPositions];\\n-  },\\n+  getPositions: getPositions,\\n@@ -43,9 +36,2 @@ provideExchangeServices<ICredential>(terminal, {\\n-    if (instType === 'SPOT') {\\n-      const positions = await getSpotAccountInfo(credential);\\n-      return positions.filter((position) => position.product_id === product_id);\\n-    }\\n-    if (instType === 'PERP') {\\n-      const positions = await getPerpAccountInfo(credential);\\n-      return positions.filter((position) => position.product_id === product_id);\\n-    }\\n-    throw new Error(`Unsupported instType: ${instType}`);\\n+    const positions = await getPositions(credential);\\n+    return positions.filter((position) => position.product_id === product_id);\\n\"\n},\n{\n  \"additions\": 3,\n  \"deletions\": 26,\n  \"path\": \"apps/vendor-aster/src/services/markets/interest_rate.ts\",",
              "lineStart": 1220,
              "lineEnd": 1225
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "  \"patch\": \"commit 17bf37f7daa6edb1371f9057ffed3f52b3570b60\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 21:03:37 2025 +0800\\n\\n    refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/interest_rate.ts b/apps/vendor-aster/src/services/markets/interest_rate.ts\\nindex b8a43085b..8512bb506 100644\\n--- a/apps/vendor-aster/src/services/markets/interest_rate.ts\\n+++ b/apps/vendor-aster/src/services/markets/interest_rate.ts\\n@@ -2,2 +2 @@ import { IInterestRate } from '@yuants/data-interest-rate';\\n-import { IProduct } from '@yuants/data-product';\\n-import { createSeriesProvider, ISeriesCollectingTask } from '@yuants/data-series';\\n+import { createSeriesProvider } from '@yuants/data-series';\\n@@ -5,3 +4,2 @@ import { Terminal } from '@yuants/protocol';\\n-import { createSQLWriter } from '@yuants/sql';\\n-import { decodePath, encodePath, formatTime } from '@yuants/utils';\\n-import { firstValueFrom, map, mergeAll, timer } from 'rxjs';\\n+import { decodePath, formatTime } from '@yuants/utils';\\n+import { firstValueFrom, timer } from 'rxjs';\\n@@ -9 +6,0 @@ import { getFApiV1FundingRate } from '../../api/public-api';\\n-import { productService } from './product';\\n@@ -13,20 +9,0 @@ const terminal = Terminal.fromNodeEnv();\\n-createSQLWriter<ISeriesCollectingTask>(terminal, {\\n-  data$: productService.products$.pipe(\\n-    map((products: IProduct[]) => products.filter((product) => product.no_interest_rate === false)),\\n-    mergeAll(),\\n-    map(\\n-      (product: IProduct): ISeriesCollectingTask => ({\\n-        series_id: product.product_id,\\n-        table_name: 'interest_rate',\\n-        cron_pattern: '0 * * * *',\\n-        cron_timezone: 'UTC',\\n-        disabled: false,\\n-        replay_count: 0,\\n-      }),\\n-    ),\\n-  ),\\n-  tableName: 'series_collecting_task',\\n-  writeInterval: 1000,\\n-  conflictKeys: ['series_id', 'table_name'],\\n-});\\n-\\n\"\n},\n{\n  \"additions\": 1,\n  \"deletions\": 6,\n  \"path\": \"apps/vendor-aster/src/services/markets/product.ts\",",
              "lineStart": 1226,
              "lineEnd": 1231
            },
            {
              "type": "function",
              "name": "listProducts",
              "code": "      \"patch\": \"commit 17bf37f7daa6edb1371f9057ffed3f52b3570b60\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 21:03:37 2025 +0800\\n\\n    refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\\n\\ndiff --git a/apps/vendor-aster/src/services/markets/product.ts b/apps/vendor-aster/src/services/markets/product.ts\\nindex a0e5c02e9..027646b5a 100644\\n--- a/apps/vendor-aster/src/services/markets/product.ts\\n+++ b/apps/vendor-aster/src/services/markets/product.ts\\n@@ -1 +1 @@\\n-import { IProduct, IQueryProductsRequest, provideQueryProductsService } from '@yuants/data-product';\\n+import { IProduct } from '@yuants/data-product';\\n@@ -45,5 +44,0 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-\\n-// Provide QueryProducts service for ASTER\\n-export const productService = provideQueryProductsService(terminal, 'ASTER', listProducts, {\\n-  auto_refresh_interval: 3600_000, // Refresh hourly\\n-});\\n\"\n    },\n    {\n      \"additions\": 10,\n      \"deletions\": 0,\n      \"path\": \"common/changes/@yuants/vendor-aster/2025-12-03-13-01.json\",\n      \"patch\": \"commit 17bf37f7daa6edb1371f9057ffed3f52b3570b60\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Wed Dec 3 21:03:37 2025 +0800\\n\\n    refactor: consolidate account info retrieval and improve ASBNB price handling (#2169)\\n\\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-03-13-01.json b/common/changes/@yuants/vendor-aster/2025-12-03-13-01.json\\nnew file mode 100644\\nindex 000000000..e4f38bceb\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-aster/2025-12-03-13-01.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-aster\\\",\\n+      \\\"comment\\\": \\\"fix asbnb\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-aster\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"5cff1f4eaba5d5f439e9f769d9e8992974718b12\",\n  \"short\": \"5cff1f4ea\",\n  \"author\": \"humblelittlec1[bot]\",\n  \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",",
              "lineStart": 1232,
              "lineEnd": 1427
            },
            {
              "type": "function",
              "name": "cancelOrder",
              "code": "  \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/cancelOrder.ts b/apps/vendor-okx/src/experimental/cancelOrder.ts\\nnew file mode 100644\\nindex 000000000..6c4b53b5a\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/cancelOrder.ts\\n@@ -0,0 +1,14 @@\\n+import { IOrder } from '@yuants/data-order';\\n+import { decodePath } from '@yuants/utils';\\n+import { ICredential, postTradeCancelOrder } from '../api/private-api';\\n+\\n+export const cancelOrder = async (credential: ICredential, order: IOrder) => {\\n+  const [, , instId] = decodePath(order.product_id);\\n+  const res = await postTradeCancelOrder(credential, {\\n+    instId,\\n+    ordId: order.order_id!,\\n+  });\\n+  if (res.code !== '0') {\\n+    throw new Error(`Cancel order failed: code=${res.code} msg=${res.msg}`);\\n+  }\\n+};\\n\"\n},\n{\n  \"additions\": 45,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-okx/src/experimental/exchange.ts\",",
              "lineStart": 1428,
              "lineEnd": 1433
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "  \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/exchange.ts b/apps/vendor-okx/src/experimental/exchange.ts\\nnew file mode 100644\\nindex 000000000..98e379e8a\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/exchange.ts\\n@@ -0,0 +1,45 @@\\n+import { provideExchangeServices } from '@yuants/exchange';\\n+import { Terminal } from '@yuants/protocol';\\n+import { encodePath, newError } from '@yuants/utils';\\n+import { getAccountConfig, ICredential } from '../api/private-api';\\n+import { cancelOrder } from './cancelOrder';\\n+import { getOrders } from './getOrders';\\n+import { getPositions } from './getPositions';\\n+import { modifyOrder } from './modifyOrder';\\n+import { listProducts } from './product';\\n+import { submitOrder } from './submitOrder';\\n+\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n+provideExchangeServices<ICredential>(terminal, {\\n+  name: 'OKX',\\n+  credentialSchema: {\\n+    type: 'object',\\n+    required: ['access_key', 'secret_key', 'passphrase'],\\n+    properties: {\\n+      access_key: { type: 'string' },\\n+      secret_key: { type: 'string' },\\n+      passphrase: { type: 'string' },\\n+    },\\n+  },\\n+  getCredentialId: async function (credential: ICredential): Promise<string> {\\n+    const accountConfig = await getAccountConfig(credential);\\n+    const uid = accountConfig.data?.[0]?.uid;\\n+    if (!uid) throw newError('OKX_CREDENTIAL_INVALID', { credential });\\n+    return encodePath('OKX', uid);\\n+  },\\n+  listProducts: listProducts,\\n+  getPositions: getPositions,\\n+  getOrders,\\n+  getPositionsByProductId: async (credential, product_id) => {\\n+    const positions = await getPositions(credential);\\n+    return positions.filter((x) => x.product_id === product_id);\\n+  },\\n+  getOrdersByProductId: async (credential, product_id) => {\\n+    const orders = await getOrders(credential);\\n+    return orders.filter((x) => x.product_id === product_id);\\n+  },\\n+  submitOrder: submitOrder,\\n+  modifyOrder: modifyOrder,\\n+  cancelOrder: cancelOrder,\\n+});\\n\"\n},\n{\n  \"additions\": 36,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-okx/src/experimental/getOrders.ts\",",
              "lineStart": 1434,
              "lineEnd": 1439
            },
            {
              "type": "function",
              "name": "getOrders",
              "code": "  \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/getOrders.ts b/apps/vendor-okx/src/experimental/getOrders.ts\\nnew file mode 100644\\nindex 000000000..f89b8334f\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/getOrders.ts\\n@@ -0,0 +1,36 @@\\n+import { IOrder } from '@yuants/data-order';\\n+import { encodePath } from '@yuants/utils';\\n+import { ICredential, getTradeOrdersPending } from '../api/private-api';\\n+\\n+export const getOrders = async function (credential: ICredential): Promise<IOrder[]> {\\n+  const orders: IOrder[] = [];\\n+  const orderRes = await getTradeOrdersPending(credential, {});\\n+\\n+  for (const x of orderRes.data || []) {\\n+    const order_type = x.ordType === 'market' ? 'MARKET' : x.ordType === 'limit' ? 'LIMIT' : 'UNKNOWN';\\n+\\n+    const order_direction =\\n+      x.side === 'buy'\\n+        ? x.posSide === 'long'\\n+          ? 'OPEN_LONG'\\n+          : 'CLOSE_SHORT'\\n+        : x.posSide === 'short'\\n+        ? 'OPEN_SHORT'\\n+        : 'CLOSE_LONG';\\n+    orders.push({\\n+      order_id: x.ordId,\\n+      account_id: '',\\n+      product_id: encodePath('OKX', x.instType, x.instId),\\n+      submit_at: +x.cTime,\\n+      filled_at: +x.fillTime,\\n+      order_type,\\n+      order_direction,\\n+      volume: +x.sz,\\n+      traded_volume: +x.accFillSz,\\n+      price: +x.px,\\n+      traded_price: +x.avgPx,\\n+    });\\n+  }\\n+\\n+  return orders;\\n+};\\n\"\n},\n{\n  \"additions\": 127,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-okx/src/experimental/getPositions.ts\",",
              "lineStart": 1440,
              "lineEnd": 1445
            },
            {
              "type": "function",
              "name": "getPositions",
              "code": "  \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/getPositions.ts b/apps/vendor-okx/src/experimental/getPositions.ts\\nnew file mode 100644\\nindex 000000000..1cbbe0873\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/getPositions.ts\\n@@ -0,0 +1,127 @@\\n+import { IPosition, makeSpotPosition } from '@yuants/data-account';\\n+import { encodePath } from '@yuants/utils';\\n+import { getSpotPrice } from '../accountInfos/trading';\\n+import {\\n+  getAccountBalance,\\n+  getAccountPositions,\\n+  getAssetBalances,\\n+  getFinanceSavingsBalance,\\n+  getFlexibleLoanInfo,\\n+  ICredential,\\n+} from '../api/private-api';\\n+import { productCache } from './product';\\n+\\n+export const getPositions = async (credential: ICredential): Promise<IPosition[]> => {\\n+  const positions: IPosition[] = [];\\n+\\n+  const [positionsApi, balanceApi, assetBalancesApi, offersApi, flexibleLoanInfoApi] = await Promise.all([\\n+    // Trading Accounts\\n+    getAccountPositions(credential, {}),\\n+    getAccountBalance(credential, {}),\\n+    // Funding Accounts\\n+    getAssetBalances(credential, {}),\\n+    // Earning Accounts\\n+    getFinanceSavingsBalance(credential, {}),\\n+    // Loan Accounts\\n+    getFlexibleLoanInfo(credential),\\n+  ]);\\n+\\n+  // 现货头寸\\n+  for (const detail of balanceApi.data?.[0]?.details || []) {\\n+    const volume = +(detail.cashBal ?? 0);\\n+    const free_volume = Math.min(\\n+      volume, // free should no more than balance if there is much profits\\n+      +(detail.availEq ?? 0),\\n+    );\\n+\\n+    const product_id = encodePath('OKX', 'SPOT', `${detail.ccy}-USDT`);\\n+    positions.push(\\n+      makeSpotPosition({\\n+        position_id: product_id,\\n+        datasource_id: 'OKX',\\n+        product_id: product_id,\\n+        volume: volume,\\n+        free_volume: free_volume,\\n+        closable_price: getSpotPrice(detail.ccy),\\n+      }),\\n+    );\\n+  }\\n+  for (const x of positionsApi.data || []) {\\n+    const direction =\\n+      x.posSide === 'long' ? 'LONG' : x.posSide === 'short' ? 'SHORT' : +x.pos > 0 ? 'LONG' : 'SHORT';\\n+    const volume = Math.abs(+x.pos);\\n+    const product_id = encodePath('OKX', x.instType, x.instId);\\n+    const closable_price = +x.last;\\n+    const theProduct = await productCache.query(product_id);\\n+    const valuation = (theProduct?.value_scale ?? 1) * volume * closable_price || 0;\\n+\\n+    positions.push({\\n+      position_id: x.posId,\\n+      datasource_id: 'OKX',\\n+      product_id,\\n+      direction,\\n+      volume: volume,\\n+      free_volume: +x.availPos,\\n+      closable_price,\\n+      position_price: +x.avgPx,\\n+      floating_profit: +x.upl,\\n+      valuation,\\n+    });\\n+  }\\n+\\n+  for (const x of assetBalancesApi.data || []) {\\n+    positions.push(\\n+      makeSpotPosition({\\n+        datasource_id: 'OKX',\\n+        position_id: encodePath('OKX', 'FUNDING-ASSET', `${x.ccy}`),\\n+        product_id: encodePath('OKX', 'FUNDING-ASSET', `${x.ccy}`),\\n+        volume: +x.bal,\\n+        free_volume: +x.bal,\\n+        closable_price: getSpotPrice(x.ccy),\\n+      }),\\n+    );\\n+  }\\n+\\n+  for (const offer of offersApi.data || []) {\\n+    positions.push(\\n+      makeSpotPosition({\\n+        position_id: encodePath('OKX', 'EARNING-ASSET', `${offer.ccy}`),\\n+        datasource_id: 'OKX',\\n+        product_id: encodePath('OKX', 'EARNING-ASSET', `${offer.ccy}`),\\n+        volume: +offer.amt,\\n+        free_volume: +offer.amt,\\n+        closable_price: getSpotPrice(offer.ccy),\\n+      }),\\n+    );\\n+  }\\n+\\n+  for (const loan of flexibleLoanInfoApi.data?.[0]?.loanData || []) {\\n+    positions.push({\\n+      datasource_id: 'OKX',\\n+      position_id: encodePath('OKX', 'LOAN', `${loan.ccy}`),\\n+      product_id: encodePath('OKX', 'LOAN', `${loan.ccy}`),\\n+      volume: +loan.amt,\\n+      free_volume: +loan.amt,\\n+      direction: 'SHORT',\\n+      position_price: 0,\\n+      closable_price: getSpotPrice(loan.ccy),\\n+      floating_profit: -getSpotPrice(loan.ccy) * +loan.amt,\\n+      valuation: getSpotPrice(loan.ccy) * +loan.amt,\\n+    });\\n+  }\\n+\\n+  for (const collateral of flexibleLoanInfoApi.data?.[0]?.collateralData || []) {\\n+    positions.push(\\n+      makeSpotPosition({\\n+        position_id: encodePath('OKX', 'COLLATERAL', `${collateral.ccy}`),\\n+        datasource_id: 'OKX',\\n+        product_id: encodePath('OKX', 'COLLATERAL', `${collateral.ccy}`),\\n+        volume: +collateral.amt,\\n+        free_volume: +collateral.amt,\\n+        closable_price: getSpotPrice(collateral.ccy),\\n+      }),\\n+    );\\n+  }\\n+\\n+  return positions;\\n+};\\n\"\n},\n{\n  \"additions\": 73,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-okx/src/experimental/modifyOrder.ts\",",
              "lineStart": 1446,
              "lineEnd": 1451
            },
            {
              "type": "function",
              "name": "modifyOrder",
              "code": "  \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/modifyOrder.ts b/apps/vendor-okx/src/experimental/modifyOrder.ts\\nnew file mode 100644\\nindex 000000000..5e1e31188\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/modifyOrder.ts\\n@@ -0,0 +1,73 @@\\n+import { IOrder } from '@yuants/data-order';\\n+import { formatTime, decodePath, roundToStep } from '@yuants/utils';\\n+import { firstValueFrom, map } from 'rxjs';\\n+import { ICredential, postTradeAmendOrder } from '../api/private-api';\\n+import { productService } from '../public-data/product';\\n+import { spotMarketTickers$ } from '../public-data/quote';\\n+\\n+export const modifyOrder = async (credential: ICredential, order: IOrder) => {\\n+  const [, instType, instId] = decodePath(order.product_id);\\n+  const params: {\\n+    instId: string;\\n+    ordId: string;\\n+    newPx?: string;\\n+    newSz?: string;\\n+  } = {\\n+    instId,\\n+    ordId: order.order_id!, // 使用现有订单ID\\n+  };\\n+\\n+  // 如果需要修改价格\\n+  if (order.price !== undefined) {\\n+    params.newPx = order.price.toString();\\n+  }\\n+\\n+  // 如果需要修改数量\\n+  if (order.volume !== undefined) {\\n+    // 处理数量修改，类似于 SubmitOrder 中的逻辑\\n+    if (instType === 'SWAP') {\\n+      params.newSz = order.volume.toString();\\n+    } else if (instType === 'SPOT') {\\n+      params.newSz = order.volume.toString();\\n+    } else if (instType === 'MARGIN') {\\n+      if (order.order_type === 'LIMIT') {\\n+        params.newSz = order.volume.toString();\\n+      }\\n+      if (order.order_type === 'MAKER') {\\n+        params.newSz = order.volume.toString();\\n+      }\\n+      if (order.order_type === 'MARKET') {\\n+        // 对于市价单，可能需要根据当前价格计算新的数量\\n+        const price = await firstValueFrom(\\n+          spotMarketTickers$.pipe(\\n+            map((x) =>\\n+              order.order_direction === 'OPEN_LONG' || order.order_direction === 'CLOSE_SHORT'\\n+                ? +x[instId].askPx\\n+                : +x[instId].bidPx,\\n+            ),\\n+          ),\\n+        );\\n+        if (!price) {\\n+          throw new Error(`invalid tick: ${price}`);\\n+        }\\n+        console.info(formatTime(Date.now()), 'ModifyOrder', 'price', price);\\n+        const theProduct = await firstValueFrom(\\n+          productService.mapProductIdToProduct$.pipe(map((x) => x.get(order.product_id))),\\n+        );\\n+        if (!theProduct) {\\n+          throw new Error(`Unknown product: ${order.position_id}`);\\n+        }\\n+        params.newSz = roundToStep(order.volume * price, theProduct.volume_step!).toString();\\n+      }\\n+    } else {\\n+      throw new Error(`Unknown instType: ${instType}`);\\n+    }\\n+  }\\n+\\n+  console.info(formatTime(Date.now()), 'ModifyOrder', 'params', JSON.stringify(params));\\n+\\n+  const res = await postTradeAmendOrder(credential, params);\\n+  if (res.code !== '0') {\\n+    throw new Error(`ModifyOrder failed: code=${res.code}, msg=${res.msg}`);\\n+  }\\n+};\\n\"\n},\n{\n  \"additions\": 96,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-okx/src/experimental/product.ts\",",
              "lineStart": 1452,
              "lineEnd": 1457
            },
            {
              "type": "function",
              "name": "terminal",
              "code": "  \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/product.ts b/apps/vendor-okx/src/experimental/product.ts\\nnew file mode 100644\\nindex 000000000..808bb037c\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/product.ts\\n@@ -0,0 +1,96 @@\\n+import { createClientProductCache, IProduct } from '@yuants/data-product';\\n+import { Terminal } from '@yuants/protocol';\\n+import { encodePath } from '@yuants/utils';\\n+import { getInstruments } from '../api/public-api';\\n+\\n+const terminal = Terminal.fromNodeEnv();\\n+\\n+export const productCache = createClientProductCache(terminal, { expire: 3600_000 });\\n+\\n+export const listProducts = async (): Promise<IProduct[]> => {\\n+  const products: IProduct[] = [];\\n+\\n+  // Get all instrument types in parallel\\n+  const [swapInstruments, marginInstruments, spotInstruments] = await Promise.all([\\n+    getInstruments({ instType: 'SWAP' }),\\n+    getInstruments({ instType: 'MARGIN' }),\\n+    getInstruments({ instType: 'SPOT' }),\\n+  ]);\\n+\\n+  // Get USDT swap products\\n+  for (const instrument of swapInstruments.data || []) {\\n+    if (instrument.ctType === 'linear' && +instrument.lever > 0) {\\n+      products.push({\\n+        datasource_id: 'OKX',\\n+        product_id: encodePath('OKX', instrument.instType, instrument.instId),\\n+        name: `${instrument.ctValCcy}-${instrument.settleCcy}-PERP`,\\n+        base_currency: instrument.ctValCcy,\\n+        quote_currency: instrument.settleCcy,\\n+        value_scale: +instrument.ctVal,\\n+        volume_step: +instrument.lotSz,\\n+        price_step: +instrument.tickSz,\\n+        margin_rate: 1 / +instrument.lever,\\n+        value_scale_unit: '',\\n+        value_based_cost: 0,\\n+        volume_based_cost: 0,\\n+        max_position: 0,\\n+        max_volume: 0,\\n+        allow_long: true,\\n+        allow_short: true,\\n+        market_id: 'OKX',\\n+        no_interest_rate: false,\\n+      });\\n+    }\\n+  }\\n+\\n+  // Get margin products\\n+  for (const instrument of marginInstruments.data || []) {\\n+    if (+instrument.lever > 0) {\\n+      products.push({\\n+        datasource_id: 'OKX',\\n+        product_id: encodePath('OKX', instrument.instType, instrument.instId),\\n+        base_currency: instrument.baseCcy,\\n+        quote_currency: instrument.quoteCcy,\\n+        value_scale: 1,\\n+        volume_step: +instrument.lotSz,\\n+        price_step: +instrument.tickSz,\\n+        margin_rate: 1 / +instrument.lever,\\n+        name: `${instrument.baseCcy}-${instrument.quoteCcy}-MARGIN`,\\n+        value_scale_unit: '',\\n+        value_based_cost: 0,\\n+        volume_based_cost: 0,\\n+        max_position: 0,\\n+        max_volume: 0,\\n+        allow_long: true,\\n+        allow_short: true,\\n+        market_id: 'OKX',\\n+        no_interest_rate: false,\\n+      });\\n+    }\\n+  }\\n+\\n+  // Get spot products\\n+  for (const instrument of spotInstruments.data || []) {\\n+    products.push({\\n+      datasource_id: 'OKX',\\n+      product_id: encodePath('OKX', instrument.instType, instrument.instId),\\n+      base_currency: instrument.baseCcy,\\n+      quote_currency: instrument.quoteCcy,\\n+      value_scale: 1,\\n+      volume_step: +instrument.lotSz,\\n+      price_step: +instrument.tickSz,\\n+      margin_rate: 1,\\n+      name: `${instrument.baseCcy}-${instrument.quoteCcy}-SPOT`,\\n+      value_scale_unit: '',\\n+      value_based_cost: 0,\\n+      volume_based_cost: 0,\\n+      max_position: 0,\\n+      max_volume: 0,\\n+      allow_long: true,\\n+      allow_short: true,\\n+      market_id: 'OKX',\\n+      no_interest_rate: true,\\n+    });\\n+  }\\n+  return products;\\n+};\\n\"\n},\n{\n  \"additions\": 127,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-okx/src/experimental/submitOrder.ts\",",
              "lineStart": 1458,
              "lineEnd": 1463
            },
            {
              "type": "function",
              "name": "mapOrderDirectionToSide",
              "code": "  \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/experimental/submitOrder.ts b/apps/vendor-okx/src/experimental/submitOrder.ts\\nnew file mode 100644\\nindex 000000000..343ec45f3\\n--- /dev/null\\n+++ b/apps/vendor-okx/src/experimental/submitOrder.ts\\n@@ -0,0 +1,127 @@\\n+import { IOrder } from '@yuants/data-order';\\n+import { decodePath, formatTime, roundToStep } from '@yuants/utils';\\n+import { firstValueFrom, map } from 'rxjs';\\n+import { ICredential, postTradeOrder } from '../api/private-api';\\n+import { productService } from '../public-data/product';\\n+import { spotMarketTickers$ } from '../public-data/quote';\\n+\\n+const mapOrderDirectionToSide = (direction?: string) => {\\n+  switch (direction) {\\n+    case 'OPEN_LONG':\\n+    case 'CLOSE_SHORT':\\n+      return 'buy';\\n+    case 'OPEN_SHORT':\\n+    case 'CLOSE_LONG':\\n+      return 'sell';\\n+  }\\n+  throw new Error(`Unknown direction: ${direction}`);\\n+};\\n+\\n+const mapOrderDirectionToPosSide = (direction?: string) => {\\n+  switch (direction) {\\n+    case 'OPEN_LONG':\\n+    case 'CLOSE_LONG':\\n+      return 'long';\\n+    case 'CLOSE_SHORT':\\n+    case 'OPEN_SHORT':\\n+      return 'short';\\n+  }\\n+  throw new Error(`Unknown direction: ${direction}`);\\n+};\\n+\\n+const mapOrderTypeToOrdType = (order_type?: string) => {\\n+  switch (order_type) {\\n+    case 'LIMIT':\\n+      return 'limit';\\n+    case 'MARKET':\\n+      return 'market';\\n+    case 'MAKER':\\n+      return 'post_only';\\n+  }\\n+  throw new Error(`Unknown order type: ${order_type}`);\\n+};\\n+\\n+export const submitOrder = async (credential: ICredential, order: IOrder): Promise<{ order_id: string }> => {\\n+  const [, instType, instId] = decodePath(order.product_id);\\n+\\n+  // 交易数量，表示要购买或者出售的数量。\\n+  // 当币币/币币杠杆以限价买入和卖出时，指交易货币数量。\\n+  // 当币币杠杆以市价买入时，指计价货币的数量。\\n+  // 当币币杠杆以市价卖出时，指交易货币的数量。\\n+  // 对于币币市价单，单位由 tgtCcy 决定\\n+  // 当交割、永续、期权买入和卖出时，指合约张数。\\n+  const mapOrderVolumeToSz = async (order: IOrder) => {\\n+    if (instType === 'SWAP') {\\n+      return order.volume;\\n+    }\\n+    if (instType === 'MARGIN') {\\n+      if (order.order_type === 'LIMIT') {\\n+        return order.volume;\\n+      }\\n+      if (order.order_type === 'MAKER') {\\n+        return order.volume;\\n+      }\\n+      if (order.order_type === 'MARKET') {\\n+        if (order.order_direction === 'OPEN_SHORT' || order.order_direction === 'CLOSE_LONG') {\\n+          return order.volume;\\n+        }\\n+        //\\n+        const price = await firstValueFrom(\\n+          spotMarketTickers$.pipe(\\n+            map((x) =>\\n+              mapOrderDirectionToPosSide(order.order_direction) === 'long'\\n+                ? +x[instId].askPx\\n+                : +x[instId].bidPx,\\n+            ),\\n+          ),\\n+        );\\n+        if (!price) {\\n+          throw new Error(`invalid tick: ${price}`);\\n+        }\\n+        console.info(formatTime(Date.now()), 'SubmitOrder', 'price', price);\\n+        const theProduct = await firstValueFrom(\\n+          productService.mapProductIdToProduct$.pipe(map((x) => x.get(order.product_id))),\\n+        );\\n+        if (!theProduct) {\\n+          throw new Error(`Unknown product: ${order.position_id}`);\\n+        }\\n+        return roundToStep(order.volume * price, theProduct.volume_step!);\\n+      }\\n+\\n+      return 0;\\n+    }\\n+\\n+    if (instType === 'SPOT') {\\n+      return order.volume;\\n+    }\\n+\\n+    throw new Error(`Unknown instType: ${instType}`);\\n+  };\\n+\\n+  const params = {\\n+    instId,\\n+    tdMode: instType === 'SPOT' ? 'cash' : 'cross',\\n+    side: mapOrderDirectionToSide(order.order_direction),\\n+    posSide:\\n+      instType === 'MARGIN' || instType === 'SPOT'\\n+        ? 'net'\\n+        : mapOrderDirectionToPosSide(order.order_direction),\\n+    ordType: mapOrderTypeToOrdType(order.order_type),\\n+    sz: (await mapOrderVolumeToSz(order)).toString(),\\n+    tgtCcy: instType === 'SPOT' && order.order_type === 'MARKET' ? 'base_ccy' : undefined,\\n+    reduceOnly:\\n+      instType === 'MARGIN' && ['CLOSE_LONG', 'CLOSE_SHORT'].includes(order.order_direction ?? '')\\n+        ? 'true'\\n+        : undefined,\\n+    px: order.order_type === 'LIMIT' || order.order_type === 'MAKER' ? order.price!.toString() : undefined,\\n+    ccy: instType === 'MARGIN' ? 'USDT' : undefined,\\n+  };\\n+  console.info(formatTime(Date.now()), 'SubmitOrder', 'params', JSON.stringify(params));\\n+  const res = await postTradeOrder(credential, params);\\n+  if (res.code === '0' && res.data?.[0]?.ordId) {\\n+    return { order_id: res.data[0].ordId };\\n+  }\\n+  throw `Failed to submit order: ${res.code} ${res.msg}: ${res.data\\n+    .map((x) => `${x.sCode} ${x.sMsg}`)\\n+    .join('; ')}`;\\n+};\\n\"\n},\n{\n  \"additions\": 1,\n  \"deletions\": 0,\n  \"path\": \"apps/vendor-okx/src/index.ts\",\n  \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/apps/vendor-okx/src/index.ts b/apps/vendor-okx/src/index.ts\\nindex 59493ae37..9432e574a 100644\\n--- a/apps/vendor-okx/src/index.ts\\n+++ b/apps/vendor-okx/src/index.ts\\n@@ -3,0 +4 @@ import './api-service';\\n+import './experimental/exchange';\\n\"\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-okx/2025-12-03-16-13.json\",\n  \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-03-16-13.json b/common/changes/@yuants/vendor-okx/2025-12-03-16-13.json\\nnew file mode 100644\\nindex 000000000..9ea10362c\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-okx/2025-12-03-16-13.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-okx\\\",\\n+      \\\"comment\\\": \\\"new exp\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-okx\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n},\n{",
              "lineStart": 1464,
              "lineEnd": 1481
            },
            {
              "type": "function",
              "name": "ProductCard",
              "code": "      \"patch\": \"commit bc0ce17edad747a8025b17c60184735d69119f1a\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 00:33:47 2025 +0800\\n\\n    feat: add experimental trading functions including order management and product listing (#2179)\\n\\ndiff --git a/ui/web/src/modules/Products/InlineProductId.tsx b/ui/web/src/modules/Products/InlineProductId.tsx\\nindex 053dc9a3b..50a7327bf 100644\\n--- a/ui/web/src/modules/Products/InlineProductId.tsx\\n+++ b/ui/web/src/modules/Products/InlineProductId.tsx\\n@@ -9 +9 @@ import { terminal$ } from '../Terminals';\\n-const ProductCard = (props: { datasource_id: string; product_id: string }) => {\\n+const ProductCard = (props: { product_id: string }) => {\\n@@ -18,3 +18 @@ const ProductCard = (props: { datasource_id: string; product_id: string }) => {\\n-              `select * from product where datasource_id = ${escapeSQL(\\n-                props.datasource_id,\\n-              )} and product_id = ${escapeSQL(props.product_id)}`,\\n+              `select * from product where product_id = ${escapeSQL(props.product_id)}`,\\n@@ -25 +23 @@ const ProductCard = (props: { datasource_id: string; product_id: string }) => {\\n-      [props.datasource_id, props.product_id],\\n+      [props.product_id],\\n@@ -31 +29 @@ const ProductCard = (props: { datasource_id: string; product_id: string }) => {\\n-      <Card title={encodePath(props.datasource_id, props.product_id)} loading={true}>\\n+      <Card title={props.product_id} loading={true}>\\n@@ -38 +36 @@ const ProductCard = (props: { datasource_id: string; product_id: string }) => {\\n-    <Card title={encodePath(product.datasource_id, product.product_id)}>\\n+    <Card title={product.product_id}>\\n@@ -61 +59,2 @@ export const InlineProductId = (props: { datasource_id: string; product_id: stri\\n-    <Popover content={<ProductCard datasource_id={props.datasource_id} product_id={props.product_id} />}>\\n+    <Popover content={<ProductCard product_id={props.product_id} />}>\\n+      ({props.datasource_id})\\n@@ -63 +62 @@ export const InlineProductId = (props: { datasource_id: string; product_id: stri\\n-        {encodePath(props.datasource_id, props.product_id)}\\n+        {props.product_id}\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"53adb24ee13d6c3856af1917928f18ff735597b8\",\n  \"short\": \"53adb24ee\",\n  \"author\": \"Ryan\",\n  \"email\": \"stayrealrhr@gmail.com\",\n  \"authoredAt\": \"2025-12-04 00:55:27 +0800\",\n  \"subject\": \"feat: refac gate (#2181)\",\n  \"files\": [\n    {\n      \"additions\": 28,\n      \"deletions\": 26,",
              "lineStart": 1482,
              "lineEnd": 1497
            },
            {
              "type": "function",
              "name": "loadFuturePositions",
              "code": "  \"patch\": \"commit 53adb24ee13d6c3856af1917928f18ff735597b8\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Thu Dec 4 00:55:27 2025 +0800\\n\\n    feat: refac gate (#2181)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/future.ts b/apps/vendor-gate/src/services/accounts/future.ts\\nindex 2843fd914..840e18154 100644\\n--- a/apps/vendor-gate/src/services/accounts/future.ts\\n+++ b/apps/vendor-gate/src/services/accounts/future.ts\\n@@ -13,26 +13,28 @@ export const loadFuturePositions = async (credential: ICredential): Promise<IPos\\n-  return positions.map((position): IPosition => {\\n-    const product_id = encodePath('GATE', 'FUTURE', position.contract);\\n-    const theProduct = productMap.get(product_id);\\n-    const volume = Math.abs(position.size);\\n-    const closable_price = Number(position.mark_price);\\n-    const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\\n-    return {\\n-      datasource_id: 'GATE',\\n-      position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n-      product_id,\\n-      direction:\\n-        position.mode === 'dual_long'\\n-          ? 'LONG'\\n-          : position.mode === 'dual_short'\\n-          ? 'SHORT'\\n-          : position.size > 0\\n-          ? 'LONG'\\n-          : 'SHORT',\\n-      volume,\\n-      free_volume: Math.abs(position.size),\\n-      position_price: Number(position.entry_price),\\n-      closable_price,\\n-      floating_profit: Number(position.unrealised_pnl),\\n-      valuation,\\n-    };\\n-  });\\n+  return positions\\n+    .filter((pos) => Math.abs(pos.size) > 0)\\n+    .map((position): IPosition => {\\n+      const product_id = encodePath('GATE', 'FUTURE', position.contract);\\n+      const theProduct = productMap.get(product_id);\\n+      const volume = Math.abs(position.size);\\n+      const closable_price = Number(position.mark_price);\\n+      const valuation = volume * closable_price * (theProduct?.value_scale ?? 1);\\n+      return {\\n+        datasource_id: 'GATE',\\n+        position_id: `${position.contract}-${position.leverage}-${position.mode}`,\\n+        product_id,\\n+        direction:\\n+          position.mode === 'dual_long'\\n+            ? 'LONG'\\n+            : position.mode === 'dual_short'\\n+            ? 'SHORT'\\n+            : position.size > 0\\n+            ? 'LONG'\\n+            : 'SHORT',\\n+        volume,\\n+        free_volume: Math.abs(position.size),\\n+        position_price: Number(position.entry_price),\\n+        closable_price,\\n+        floating_profit: Number(position.unrealised_pnl),\\n+        valuation,\\n+      };\\n+    });\\n\"\n},\n{\n  \"additions\": 1,\n  \"deletions\": 1,\n  \"path\": \"apps/vendor-gate/src/services/accounts/spot.ts\",",
              "lineStart": 1498,
              "lineEnd": 1503
            },
            {
              "type": "function",
              "name": "getSpotAccountInfo",
              "code": "  \"patch\": \"commit 53adb24ee13d6c3856af1917928f18ff735597b8\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Thu Dec 4 00:55:27 2025 +0800\\n\\n    feat: refac gate (#2181)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/spot.ts b/apps/vendor-gate/src/services/accounts/spot.ts\\nindex f319b1c02..b861a4584 100644\\n--- a/apps/vendor-gate/src/services/accounts/spot.ts\\n+++ b/apps/vendor-gate/src/services/accounts/spot.ts\\n@@ -14 +14 @@ export const getSpotAccountInfo = async (credential: ICredential) => {\\n-      product_id: encodePath('GATE', 'SPOT', `${item.currency}-USDT`),\\n+      product_id: encodePath('GATE', 'SPOT', `${item.currency}`),\\n\"\n},\n{\n  \"additions\": 11,\n  \"deletions\": 7,\n  \"path\": \"apps/vendor-gate/src/services/accounts/unified.ts\",",
              "lineStart": 1504,
              "lineEnd": 1509
            },
            {
              "type": "function",
              "name": "getUnifiedAccountInfo",
              "code": "    \"patch\": \"commit 53adb24ee13d6c3856af1917928f18ff735597b8\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Thu Dec 4 00:55:27 2025 +0800\\n\\n    feat: refac gate (#2181)\\n\\ndiff --git a/apps/vendor-gate/src/services/accounts/unified.ts b/apps/vendor-gate/src/services/accounts/unified.ts\\nindex cc2a78a3b..f49b87a16 100644\\n--- a/apps/vendor-gate/src/services/accounts/unified.ts\\n+++ b/apps/vendor-gate/src/services/accounts/unified.ts\\n@@ -4,0 +5 @@ import { loadFuturePositions } from './future';\\n+import { encodePath } from '@yuants/utils';\\n@@ -15 +15,0 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-\\n@@ -18 +17,0 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-      if (currency === 'USDT') return undefined;\\n@@ -23,3 +22,7 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-      const closable_price = Number(\\n-        spotTickerList.find((ticker) => ticker.currency_pair === currency_pair)?.last || 0,\\n-      );\\n+      if (currency === 'GTSOL') {\\n+        currency_pair = 'SOL_USDT';\\n+      }\\n+      const closable_price =\\n+        currency === 'USDT'\\n+          ? 1\\n+          : Number(spotTickerList.find((ticker) => ticker.currency_pair === currency_pair)?.last || 0);\\n@@ -26,0 +30 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n+      if (Math.abs(volume) === 0) return undefined;\\n@@ -30 +34 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-        product_id: currency,\\n+        product_id: encodePath('GATE', 'SPOT', currency),\\n@@ -36 +40 @@ export const getUnifiedAccountInfo = async (credential: ICredential) => {\\n-        floating_profit: 0,\\n+        floating_profit: closable_price * volume,\\n\"\n  },\n  {\n    \"additions\": 3,\n    \"deletions\": 5,\n    \"path\": \"apps/vendor-gate/src/services/exchange.ts\",\n    \"patch\": \"commit 53adb24ee13d6c3856af1917928f18ff735597b8\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Thu Dec 4 00:55:27 2025 +0800\\n\\n    feat: refac gate (#2181)\\n\\ndiff --git a/apps/vendor-gate/src/services/exchange.ts b/apps/vendor-gate/src/services/exchange.ts\\nindex 810e9c0b8..5672321de 100644\\n--- a/apps/vendor-gate/src/services/exchange.ts\\n+++ b/apps/vendor-gate/src/services/exchange.ts\\n@@ -7 +6,0 @@ import { getCredentialId } from './accounts/profile';\\n-import { getSpotAccountInfo } from './accounts/spot';\\n@@ -31,3 +30,2 @@ provideExchangeServices<ICredential>(terminal, {\\n-    const [uFuturePositions, spotPositions, unifiedPositions] = await Promise.all([\\n-      getFutureAccountInfo(credential),\\n-      getSpotAccountInfo(credential),\\n+    const [unifiedPositions] = await Promise.all([\\n+      // getFutureAccountInfo(credential),\\n@@ -36 +34 @@ provideExchangeServices<ICredential>(terminal, {\\n-    return [...uFuturePositions, ...spotPositions, ...unifiedPositions];\\n+    return [...unifiedPositions];\\n\"\n  },\n  {\n    \"additions\": 10,\n    \"deletions\": 0,\n    \"path\": \"common/changes/@yuants/vendor-gate/2025-12-03-16-53.json\",\n    \"patch\": \"commit 53adb24ee13d6c3856af1917928f18ff735597b8\\nAuthor: Ryan <stayrealrhr@gmail.com>\\nDate:   Thu Dec 4 00:55:27 2025 +0800\\n\\n    feat: refac gate (#2181)\\n\\ndiff --git a/common/changes/@yuants/vendor-gate/2025-12-03-16-53.json b/common/changes/@yuants/vendor-gate/2025-12-03-16-53.json\\nnew file mode 100644\\nindex 000000000..4e824ad04\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-gate/2025-12-03-16-53.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-gate\\\",\\n+      \\\"comment\\\": \\\"refactor gate\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-gate\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n  }\n]",
              "lineStart": 1510,
              "lineEnd": 1607
            },
            {
              "type": "interface",
              "name": "IMixMarketContract",
              "code": "  \"patch\": \"commit fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 01:53:58 2025 +0800\\n\\n    feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\\n\\ndiff --git a/apps/vendor-bitget/src/api/public-api.ts b/apps/vendor-bitget/src/api/public-api.ts\\nindex 18d98779d..9a3f8b0c9 100644\\n--- a/apps/vendor-bitget/src/api/public-api.ts\\n+++ b/apps/vendor-bitget/src/api/public-api.ts\\n@@ -12 +11,0 @@ export interface IMixMarketContract {\\n-  productType: string;\\n@@ -14,0 +14,10 @@ export interface IMixMarketContract {\\n+  buyLimitPriceRatio: string;\\n+  sellLimitPriceRatio: string;\\n+  feeRateUpRatio: string;\\n+  makerFeeRate: string;\\n+  takerFeeRate: string;\\n+  openCostUpRatio: string;\\n+  supportMarginCoins: string[];\\n+  minTradeNum: string;\\n+  priceEndStep: string;\\n+  volumePlace: string;\\n@@ -16,0 +26,21 @@ export interface IMixMarketContract {\\n+  symbolType: string;\\n+  minTradeUSDT: string;\\n+  maxSymbolOrderNum: string;\\n+  maxProductOrderNum: string;\\n+  maxPositionNum: string;\\n+  symbolStatus: string;\\n+  offTime: string;\\n+  limitOpenTime: string;\\n+  deliveryTime: string;\\n+  deliveryStartTime: string;\\n+  deliveryPeriod: string;\\n+  launchTime: string;\\n+  fundInterval: string;\\n+  minLever: string;\\n+  maxLever: string;\\n+  posLimit: string;\\n+  maintainTime: string;\\n+  openTime: string;\\n+  maxMarketOrderQty: string;\\n+  maxOrderQty: string;\\n+  isRwa: string;\\n\"\n},\n{\n  \"additions\": 2,\n  \"deletions\": 2,\n  \"path\": \"apps/vendor-bitget/src/services/markets/product.ts\",",
              "lineStart": 1608,
              "lineEnd": 1613
            },
            {
              "type": "function",
              "name": "listProducts",
              "code": "  \"patch\": \"commit fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 01:53:58 2025 +0800\\n\\n    feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\\n\\ndiff --git a/apps/vendor-bitget/src/services/markets/product.ts b/apps/vendor-bitget/src/services/markets/product.ts\\nindex 0ce7909d5..1a59f6074 100644\\n--- a/apps/vendor-bitget/src/services/markets/product.ts\\n+++ b/apps/vendor-bitget/src/services/markets/product.ts\\n@@ -33 +33 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      margin_rate: 0,\\n+      margin_rate: 1 / Number(product.maxLever),\\n@@ -55 +55 @@ export const listProducts = async (): Promise<IProduct[]> => {\\n-      margin_rate: 0,\\n+      margin_rate: 1 / Number(product.maxLever),\\n\"\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/exchange/2025-12-03-17-51.json\",\n  \"patch\": \"commit fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 01:53:58 2025 +0800\\n\\n    feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\\n\\ndiff --git a/common/changes/@yuants/exchange/2025-12-03-17-51.json b/common/changes/@yuants/exchange/2025-12-03-17-51.json\\nnew file mode 100644\\nindex 000000000..eed15e5d2\\n--- /dev/null\\n+++ b/common/changes/@yuants/exchange/2025-12-03-17-51.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/exchange\\\",\\n+      \\\"comment\\\": \\\"uniform valuation and interest\\\",\\n+      \\\"type\\\": \\\"minor\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/exchange\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n},\n{\n  \"additions\": 10,\n  \"deletions\": 0,\n  \"path\": \"common/changes/@yuants/vendor-bitget/2025-12-03-17-51.json\",\n  \"patch\": \"commit fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 01:53:58 2025 +0800\\n\\n    feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\\n\\ndiff --git a/common/changes/@yuants/vendor-bitget/2025-12-03-17-51.json b/common/changes/@yuants/vendor-bitget/2025-12-03-17-51.json\\nnew file mode 100644\\nindex 000000000..0af5cb4a6\\n--- /dev/null\\n+++ b/common/changes/@yuants/vendor-bitget/2025-12-03-17-51.json\\n@@ -0,0 +1,10 @@\\n+{\\n+  \\\"changes\\\": [\\n+    {\\n+      \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\",\\n+      \\\"comment\\\": \\\"fix product\\\",\\n+      \\\"type\\\": \\\"patch\\\"\\n+    }\\n+  ],\\n+  \\\"packageName\\\": \\\"@yuants/vendor-bitget\\\"\\n+}\\n\\\\ No newline at end of file\\n\"\n},\n{",
              "lineStart": 1614,
              "lineEnd": 1643
            },
            {
              "type": "function",
              "name": "provideExchangeServices",
              "code": "      \"patch\": \"commit fd5ee0334a20164b25c2f40ab34d9c0e78ae4b67\\nAuthor: CZ <zheng.chen@no-trade-no.life>\\nDate:   Thu Dec 4 01:53:58 2025 +0800\\n\\n    feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\\n\\ndiff --git a/libraries/exchange/src/index.ts b/libraries/exchange/src/index.ts\\nindex 4a6deaff9..7f552b9b5 100644\\n--- a/libraries/exchange/src/index.ts\\n+++ b/libraries/exchange/src/index.ts\\n@@ -3 +3,2 @@ import { IOrder } from '@yuants/data-order';\\n-import { IProduct } from '@yuants/data-product';\\n+import { createClientProductCache, IProduct } from '@yuants/data-product';\\n+import { IQuote } from '@yuants/data-quote';\\n@@ -4,0 +6 @@ import { IResponse, Terminal } from '@yuants/protocol';\\n+import { escapeSQL, requestSQL } from '@yuants/sql';\\n@@ -5,0 +8 @@ import { JSONSchema7 } from 'json-schema';\\n+import { createCache } from '../../cache/lib';\\n@@ -108,0 +112,11 @@ export const provideExchangeServices = <T>(terminal: Terminal, exchange: IExchan\\n+  const quoteCache = createCache<IQuote>(\\n+    async (product_id) => {\\n+      const sql = `select * from quote where product_id = ${escapeSQL(product_id)}`;\\n+      const [quote] = await requestSQL<IQuote[]>(terminal, sql);\\n+      return quote;\\n+    },\\n+    { expire: 30_000 },\\n+  );\\n+\\n+  const productCache = createClientProductCache(terminal, { expire: 3600_000 });\\n+\\n@@ -163,0 +178,28 @@ export const provideExchangeServices = <T>(terminal: Terminal, exchange: IExchan\\n+      for (const pos of positions) {\\n+        const [theProduct, quote] = await Promise.all([\\n+          productCache.query(pos.product_id),\\n+          quoteCache.query(pos.product_id),\\n+        ]);\\n+\\n+        // 估值 = value_scale * volume * closable_price\\n+        if (theProduct) {\\n+          pos.valuation = Math.abs((theProduct.value_scale || 1) * pos.volume * pos.closable_price);\\n+        }\\n+\\n+        // 利率相关信息的追加\\n+        if (quote) {\\n+          if (quote.interest_rate_next_settled_at !== null) {\\n+            pos.settlement_scheduled_at = new Date(quote.interest_rate_next_settled_at).getTime();\\n+          }\\n+          if (pos.direction === 'LONG') {\\n+            if (quote.interest_rate_long !== null) {\\n+              pos.interest_to_settle = +quote.interest_rate_long * pos.valuation;\\n+            }\\n+          }\\n+          if (pos.direction === 'SHORT') {\\n+            if (quote.interest_rate_short !== null) {\\n+              pos.interest_to_settle = +quote.interest_rate_short * pos.valuation;\\n+            }\\n+          }\\n+        }\\n+      }\\n\"\n    }\n  ]\n},\n{\n  \"hash\": \"dd3c9961cb21bf6dcfd471e733a29d6e9454916d\",\n  \"short\": \"dd3c9961c\",\n  \"author\": \"humblelittlec1[bot]\",\n  \"email\": \"208195530+humblelittlec1[bot]@users.noreply.github.com\",\n  \"authoredAt\": \"2025-12-04 02:01:03 +0800\",\n  \"subject\": \"chore: bump version (#2185)\",\n  \"files\": [\n    {\n      \"additions\": 17,\n      \"deletions\": 0,",
              "lineStart": 1644,
              "lineEnd": 2208
            }
          ]
        },
        {
          "additions": 161,
          "deletions": 0,
          "path": "docs/reports/git-changes-report-2025-12-04.md",
          "changeType": "added",
          "patch": "commit 5d803a46dab96b7f30b727678251a3d8f6f0a03d\nAuthor: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 15:32:05 2025 +0800\n\n    feat: add daily git change report for 2025-12-04 - 30 commits (#2188)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n    Co-authored-by: Siyuan Wang <c.one@thrimbda.com>\n\ndiff --git a/docs/reports/git-changes-report-2025-12-04.md b/docs/reports/git-changes-report-2025-12-04.md\nnew file mode 100644\nindex 000000000..fe7572909\n--- /dev/null\n+++ b/docs/reports/git-changes-report-2025-12-04.md\n@@ -0,0 +1,161 @@\n+# Git 变更报告（935f0cc6f..a126bbb40）\n+\n+## 1. 概览\n+\n+- 时间范围：2025-12-03 至 2025-12-04\n+- 提交数量：30\n+- 主要贡献者：Siyuan Wang (11), humblelittlec1[bot] (8), Ryan (6), CZ (5)\n+- 热点目录：apps (90), common (24), libraries (22)\n+\n+## 2. 改动聚焦领域\n+\n+### 2.1 监控与观测\n+\n+- **涉及目录**：apps/vendor-aster/src/api/\n+- **关键提交**：\n+  - a32bacdad (feat: add api call monitor (#2156))\n+  - 72d270f47 (feat: add api call monitor (#2157))\n+- **核心改动**：\n+  - `apps/vendor-aster/src/api/private-api.ts`：添加 Prometheus 监控指标，追踪 API 调用次数\n+  - `apps/vendor-aster/src/api/public-api.ts`：添加 API 调用监控计数器\n+- **设计意图**：为 ASTER 供应商的 API 调用添加监控指标，便于观测系统性能和 API 使用情况\n+\n+### 2.2 功能开发与修复\n+\n+- **涉及目录**：apps/vendor-aster/src/services/, apps/vendor-binance/src/, apps/vendor-huobi/src/\n+- **关键提交**：\n+  - 9b890949b (feat: fix open interest call (#2158))\n+  - 7eb5263f7 (fix: binance spot positon (#2164))\n+  - 8f17a0cbd (fix(vendor-hyperliquid): 更新账户信息处理，增加USDC头寸支持及API健壮性改进 (#2167))\n+- **核心改动**：\n+  - `apps/vendor-aster/src/services/markets/quote.ts:27-43`：修复 open interest 调用逻辑，简化代码结构\n+  - `apps/vendor-binance/src/public-data/product.ts`：修复 Binance 现货仓位处理\n+  - `apps/vendor-huobi/src/services/accounts/spot.ts`：改进账户信息处理逻辑\n+- **设计意图**：修复各供应商的 API 调用问题，提升系统稳定性和数据准确性\n+\n+### 2.3 CI/CD 与自动化\n+\n+- **涉及目录**：.claude/, .github/\n+- **关键提交**：\n+  - a14c2b84b (feat: add daily Git change report workflow and scripts (#2160))\n+  - 2790b6938 (fix(ci): git digest report (#2161))\n+  - 1cdb7d6f8 (fix(ci): git digest ci (#2171))\n+- **核心改动**：\n+  - `.claude/skills/git-changes-reporter/scripts/generate-json.js`：添加 Git 变更报告生成脚本\n+  - `.claude/skills/git-changes-reporter/scripts/generate-github-links.js`：添加 GitHub 链接生成功能\n+  - `.github/workflows/daily-git-report.yml`：配置每日 Git 报告工作流\n+- **设计意图**：建立自动化 Git 变更报告系统，提升团队协作效率和代码审查质量\n+\n+### 2.4 版本管理与依赖更新\n+\n+- **涉及目录**：apps/, common/changes/\n+- **关键提交**：\n+  - 786b42e45 (chore: bump version (#2159))\n+  - 7977a8dcf (chore: bump version (#2163))\n+  - 3c4499753 (chore: bump version (#2165))\n+- **核心改动**：\n+  - 多个包的 `package.json` 文件版本更新\n+  - `common/changes/` 目录下的变更记录文件\n+- **设计意图**：维护项目版本一致性，记录各包的变更历史\n+\n+### 2.5 交易功能增强\n+\n+- **涉及目录**：apps/virtual-exchange/, libraries/protocol/\n+- **关键提交**：\n+  - bc0ce17ed (feat: add experimental trading functions including order management and product listing (#2179))\n+  - fd5ee0334 (feat: enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184))\n+  - e99ecdc80 (feat: add cache dependency and import in exchange library (#2186))\n+- **核心改动**：\n+  - `apps/virtual-exchange/src/product-collector.ts`：增强产品收集器功能\n+  - `libraries/protocol/src/terminal.ts`：改进交易终端接口\n+  - `apps/virtual-exchange/src/index.ts`：添加缓存依赖和导入优化\n+- **设计意图**：增强虚拟交易所的交易功能，支持更复杂的交易场景和参数配置\n+\n+## 3. 贡献者分析\n+\n+| 作者 | 提交数 | 主要领域 |\n+|------|--------|----------|\n+| Siyuan Wang | 11 | CI/CD 自动化、版本管理 |\n+| humblelittlec1[bot] | 8 | 版本更新、依赖管理 |\n+| Ryan | 6 | 监控观测、功能修复 |\n+| CZ | 5 | 交易功能、API 改进 |\n+\n+## 4. 技术影响与风险\n+\n+- **兼容性影响**：新增的监控功能需要 Prometheus 基础设施支持，但向后兼容\n+- **配置变更**：CI/CD 工作流新增 Git 报告生成，需要 GitHub Actions 权限配置\n+- **性能影响**：API 监控添加了额外的指标收集，对性能影响极小\n+- **测试覆盖**：大部分功能提交包含相应的变更记录，但需要补充单元测试\n+\n+## 5. 单提交摘要（附录）\n+\n+### a32bacdad Ryan | 2025-12-03 | feat\n+\n+**主题**：add api call monitor (#2156)\n+\n+**变更要点**：\n+- `apps/vendor-aster/src/api/private-api.ts`：添加 Prometheus 监控指标计数器，追踪 API 调用路径和终端 ID\n+- 引入 `GlobalPrometheusRegistry.counter` 监控 ASTER API 调用次数\n+\n+**风险/影响**：\n+- 需要 Prometheus 监控基础设施支持\n+- 添加了轻量级的性能监控开销\n+\n+**测试**：未见测试记录\n+\n+### 9b890949b Ryan | 2025-12-03 | feat\n+\n+**主题**：fix open interest call (#2158)\n+\n+**变更要点**：\n+- `apps/vendor-aster/src/services/markets/quote.ts:27-43`：重构 open interest 查询逻辑，从异步合并映射改为直接映射\n+- 简化代码结构，移除复杂的 `mergeMap` 和缓存查询\n+\n+**风险/影响**：\n+- 可能影响 ASTER 市场数据的 open interest 字段准确性\n+- 简化了代码逻辑，降低了复杂度\n+\n+**测试**：未见测试记录\n+\n+### a14c2b84b Siyuan Wang | 2025-12-03 | feat\n+\n+**主题**：add daily Git change report workflow and scripts (#2160)\n+\n+**变更要点**：\n+- `.claude/skills/git-changes-reporter/scripts/generate-json.js`：创建 Git 变更 JSON 生成脚本\n+- `.claude/skills/git-changes-reporter/scripts/generate-github-links.js`：添加 GitHub 链接生成功能\n+- 建立完整的 Git 变更报告生成工作流\n+\n+**风险/影响**：\n+- 新增自动化报告系统，需要维护脚本更新\n+- 依赖 Git 历史记录完整性\n+\n+**测试**：脚本功能需要验证\n+\n+### bc0ce17ed Siyuan Wang | 2025-12-03 | feat\n+\n+**主题**：add experimental trading functions including order management and product listing (#2179)\n+\n+**变更要点**：\n+- `apps/virtual-exchange/src/product-collector.ts`：增强产品收集器功能\n+- 添加实验性交易功能，包括订单管理和产品列表\n+\n+**风险/影响**：\n+- 实验性功能需要充分测试\n+- 可能影响虚拟交易所的稳定性\n+\n+**测试**：未见测试记录\n+\n+### fd5ee0334 Siyuan Wang | 2025-12-03 | feat\n+\n+**主题**：enhance IMixMarketContract with additional trading parameters and update margin rate calculation in product listing (#2184)\n+\n+**变更要点**：\n+- 增强 IMixMarketContract 接口，添加额外的交易参数\n+- 更新产品列表中的保证金率计算逻辑\n+\n+**风险/影响**：\n+- 接口变更可能影响现有实现\n+- 保证金计算逻辑更新需要验证准确性\n+\n+**测试**：未见测试记录\n\\ No newline at end of file\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "449264c523f7d0f2f80cff91da8ab95e5ea2827c",
      "short": "449264c52",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-09 18:30:09 +0800",
      "subject": "feat: add polyfill for positions and update package dependencies (#2273)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 1,
          "deletions": 0,
          "path": "apps/virtual-exchange/package.json",
          "changeType": "added",
          "patch": "commit 449264c523f7d0f2f80cff91da8ab95e5ea2827c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 9 18:30:09 2025 +0800\n\n    feat: add polyfill for positions and update package dependencies (#2273)\n\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\nindex 9c691cf9e..59a4ab83d 100644\n--- a/apps/virtual-exchange/package.json\n+++ b/apps/virtual-exchange/package.json\n@@ -18,0 +19 @@\n+    \"@yuants/data-quote\": \"workspace:*\",\n",
          "codeSnippets": []
        },
        {
          "additions": 5,
          "deletions": 5,
          "path": "apps/virtual-exchange/src/legacy-services.ts",
          "changeType": "modified",
          "patch": "commit 449264c523f7d0f2f80cff91da8ab95e5ea2827c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 9 18:30:09 2025 +0800\n\n    feat: add polyfill for positions and update package dependencies (#2273)\n\ndiff --git a/apps/virtual-exchange/src/legacy-services.ts b/apps/virtual-exchange/src/legacy-services.ts\nindex 08284bbb1..73f575660 100644\n--- a/apps/virtual-exchange/src/legacy-services.ts\n+++ b/apps/virtual-exchange/src/legacy-services.ts\n@@ -7,0 +8 @@ import { validCredentials$ } from './credential';\n+import { polyfillPosition } from './position';\n@@ -26,4 +27,3 @@ validCredentials$\n-                if (res.code === 0 && res.data) {\n-                  return res.data;\n-                }\n-                throw newError('FETCH_POSITIONS_FAILED', { credential_id, reason: res.message });\n+                if (!res.data) throw newError('FETCH_POSITIONS_FAILED', { credential_id, res });\n+                const polyfilledPositions = await polyfillPosition(res.data);\n+                return polyfilledPositions;\n@@ -55 +55 @@ validCredentials$\n-                auto_refresh_interval: 1000,\n+                auto_refresh_interval: 10000,\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "polyfilledPositions",
              "code": "const polyfilledPositions = await polyfillPosition(res.data);\nreturn polyfilledPositions;\nauto_refresh_interval: 10000,",
              "lineStart": 28,
              "lineEnd": 56
            }
          ]
        },
        {
          "additions": 63,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/position.ts",
          "changeType": "added",
          "patch": "commit 449264c523f7d0f2f80cff91da8ab95e5ea2827c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 9 18:30:09 2025 +0800\n\n    feat: add polyfill for positions and update package dependencies (#2273)\n\ndiff --git a/apps/virtual-exchange/src/position.ts b/apps/virtual-exchange/src/position.ts\nnew file mode 100644\nindex 000000000..29d3f9f0c\n--- /dev/null\n+++ b/apps/virtual-exchange/src/position.ts\n@@ -0,0 +1,63 @@\n+import { createCache } from '@yuants/cache';\n+import { IPosition } from '@yuants/data-account';\n+import { createClientProductCache } from '@yuants/data-product';\n+import { IQuote } from '@yuants/data-quote';\n+import { Terminal } from '@yuants/protocol';\n+import { escapeSQL, requestSQL } from '@yuants/sql';\n+\n+const terminal = Terminal.fromNodeEnv();\n+const productCache = createClientProductCache(terminal);\n+const quoteCache = createCache<IQuote>(\n+  async (product_id) => {\n+    const sql = `select * from quote where product_id = ${escapeSQL(product_id)}`;\n+    const [quote] = await requestSQL<IQuote[]>(terminal, sql);\n+    return quote;\n+  },\n+  { expire: 30_000 },\n+);\n+\n+export const polyfillPosition = async (positions: IPosition[]): Promise<IPosition[]> => {\n+  // TODO: 使用 batch query SQL 优化 product / quote 查询性能\n+  for (const pos of positions) {\n+    const [theProduct, quote] = await Promise.all([\n+      productCache.query(pos.product_id),\n+      quoteCache.query(pos.product_id),\n+    ]);\n+\n+    // 估值 = value_scale * volume * closable_price\n+    if (theProduct) {\n+      if (theProduct.base_currency) {\n+        pos.base_currency = theProduct.base_currency;\n+      }\n+      if (theProduct.quote_currency) {\n+        pos.quote_currency = theProduct.quote_currency;\n+      }\n+      if (pos.size === undefined && pos.volume !== undefined && pos.direction !== undefined) {\n+        pos.size = (pos.direction === 'LONG' ? 1 : -1) * pos.volume * (theProduct.value_scale || 1) + '';\n+      }\n+      if (pos.free_size === undefined && pos.free_volume !== undefined && pos.direction !== undefined) {\n+        pos.free_size =\n+          (pos.direction === 'LONG' ? 1 : -1) * pos.free_volume * (theProduct.value_scale || 1) + '';\n+      }\n+      pos.valuation = Math.abs((theProduct.value_scale || 1) * pos.volume * pos.closable_price);\n+    }\n+\n+    // 利率相关信息的追加\n+    if (quote) {\n+      if (quote.interest_rate_next_settled_at !== null) {\n+        pos.settlement_scheduled_at = new Date(quote.interest_rate_next_settled_at).getTime();\n+      }\n+      if (pos.direction === 'LONG') {\n+        if (quote.interest_rate_long !== null) {\n+          pos.interest_to_settle = +quote.interest_rate_long * pos.valuation;\n+        }\n+      }\n+      if (pos.direction === 'SHORT') {\n+        if (quote.interest_rate_short !== null) {\n+          pos.interest_to_settle = +quote.interest_rate_short * pos.valuation;\n+        }\n+      }\n+    }\n+  }\n+  return positions;\n+};\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "terminal",
              "code": "const terminal = Terminal.fromNodeEnv();",
              "lineStart": 8,
              "lineEnd": 8
            },
            {
              "type": "function",
              "name": "productCache",
              "code": "const productCache = createClientProductCache(terminal);",
              "lineStart": 9,
              "lineEnd": 9
            },
            {
              "type": "function",
              "name": "quoteCache",
              "code": "const quoteCache = createCache<IQuote>(\n  async (product_id) => {",
              "lineStart": 10,
              "lineEnd": 11
            },
            {
              "type": "function",
              "name": "sql",
              "code": "    const sql = `select * from quote where product_id = ${escapeSQL(product_id)}`;\n    const [quote] = await requestSQL<IQuote[]>(terminal, sql);\n    return quote;\n  },\n  { expire: 30_000 },\n);\n",
              "lineStart": 12,
              "lineEnd": 18
            },
            {
              "type": "function",
              "name": "polyfillPosition",
              "code": "export const polyfillPosition = async (positions: IPosition[]): Promise<IPosition[]> => {\n  // TODO: 使用 batch query SQL 优化 product / quote 查询性能",
              "lineStart": 19,
              "lineEnd": 20
            },
            {
              "type": "function",
              "name": "pos",
              "code": "for (const pos of positions) {\n  const [theProduct, quote] = await Promise.all([\n    productCache.query(pos.product_id),\n    quoteCache.query(pos.product_id),\n  ]);\n\n  // 估值 = value_scale * volume * closable_price\n  if (theProduct) {\n    if (theProduct.base_currency) {\n      pos.base_currency = theProduct.base_currency;\n    }\n    if (theProduct.quote_currency) {\n      pos.quote_currency = theProduct.quote_currency;\n    }\n    if (pos.size === undefined && pos.volume !== undefined && pos.direction !== undefined) {",
              "lineStart": 21,
              "lineEnd": 64
            }
          ]
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-09-10-27.json",
          "changeType": "added",
          "patch": "commit 449264c523f7d0f2f80cff91da8ab95e5ea2827c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 9 18:30:09 2025 +0800\n\n    feat: add polyfill for positions and update package dependencies (#2273)\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-09-10-27.json b/common/changes/@yuants/app-virtual-exchange/2025-12-09-10-27.json\nnew file mode 100644\nindex 000000000..7e98269f9\n--- /dev/null\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-09-10-27.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-virtual-exchange\",\n+      \"comment\": \"add polyfill positions and slow down getOrders\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-virtual-exchange\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 2,
          "deletions": 0,
          "path": "common/config/rush/pnpm-lock.yaml",
          "changeType": "added",
          "patch": "commit 449264c523f7d0f2f80cff91da8ab95e5ea2827c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 9 18:30:09 2025 +0800\n\n    feat: add polyfill for positions and update package dependencies (#2273)\n\ndiff --git a/common/config/rush/pnpm-lock.yaml b/common/config/rush/pnpm-lock.yaml\nindex b17e92816..45d7f06f5 100644\n--- a/common/config/rush/pnpm-lock.yaml\n+++ b/common/config/rush/pnpm-lock.yaml\n@@ -1523,0 +1524 @@ importers:\n+      '@yuants/data-quote': workspace:*\n@@ -1537,0 +1539 @@ importers:\n+      '@yuants/data-quote': link:../../libraries/data-quote\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "b0acd943d99ea0491123b84cab6ad2f7c5be9973",
      "short": "b0acd943d",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-09 18:59:04 +0800",
      "subject": "chore: bump version (#2274)",
      "conventionalCommit": {
        "type": "chore",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/virtual-exchange/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit b0acd943d99ea0491123b84cab6ad2f7c5be9973\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 18:59:04 2025 +0800\n\n    chore: bump version (#2274)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\nindex 939a712ac..147ce694a 100644\n--- a/apps/virtual-exchange/CHANGELOG.json\n+++ b/apps/virtual-exchange/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.6.0\",\n+      \"tag\": \"@yuants/app-virtual-exchange_v0.6.0\",\n+      \"date\": \"Tue, 09 Dec 2025 10:38:26 GMT\",\n+      \"comments\": {\n+        \"minor\": [\n+          {\n+            \"comment\": \"add polyfill positions and slow down getOrders\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/virtual-exchange/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit b0acd943d99ea0491123b84cab6ad2f7c5be9973\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 18:59:04 2025 +0800\n\n    chore: bump version (#2274)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\nindex 1b60229f3..e8cae2a5a 100644\n--- a/apps/virtual-exchange/CHANGELOG.md\n+++ b/apps/virtual-exchange/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 10:38:26 GMT and should not be manually modified.\n+\n+## 0.6.0\n+Tue, 09 Dec 2025 10:38:26 GMT\n+\n+### Minor changes\n+\n+- add polyfill positions and slow down getOrders\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/virtual-exchange/package.json",
          "changeType": "modified",
          "patch": "commit b0acd943d99ea0491123b84cab6ad2f7c5be9973\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 18:59:04 2025 +0800\n\n    chore: bump version (#2274)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\nindex 59a4ab83d..8bec54b59 100644\n--- a/apps/virtual-exchange/package.json\n+++ b/apps/virtual-exchange/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.5.5\",\n+  \"version\": \"0.6.0\",\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-09-10-27.json",
          "changeType": "deleted",
          "patch": "commit b0acd943d99ea0491123b84cab6ad2f7c5be9973\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Tue Dec 9 18:59:04 2025 +0800\n\n    chore: bump version (#2274)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-09-10-27.json b/common/changes/@yuants/app-virtual-exchange/2025-12-09-10-27.json\ndeleted file mode 100644\nindex 7e98269f9..000000000\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-09-10-27.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/app-virtual-exchange\",\n-      \"comment\": \"add polyfill positions and slow down getOrders\",\n-      \"type\": \"minor\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/app-virtual-exchange\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/{main_2025-12-07-16-38.json => main_2025-12-09-10-38.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "339c0b00e24c22f97f1890df50ebc5e8ae7b88fd",
      "short": "339c0b00e",
      "author": "Ryan",
      "email": "stayrealrhr@gmail.com",
      "authoredAt": "2025-12-10 00:42:33 +0800",
      "subject": "feat: fix volume (#2276)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 3,
          "deletions": 3,
          "path": "apps/vendor-binance/src/services/accounts/unified.ts",
          "changeType": "modified",
          "patch": "commit 339c0b00e24c22f97f1890df50ebc5e8ae7b88fd\nAuthor: Ryan <stayrealrhr@gmail.com>\nDate:   Wed Dec 10 00:42:33 2025 +0800\n\n    feat: fix volume (#2276)\n\ndiff --git a/apps/vendor-binance/src/services/accounts/unified.ts b/apps/vendor-binance/src/services/accounts/unified.ts\nindex 4bb4de290..feb19cb0e 100644\n--- a/apps/vendor-binance/src/services/accounts/unified.ts\n+++ b/apps/vendor-binance/src/services/accounts/unified.ts\n@@ -33,2 +33,2 @@ export const getUnifiedAccountInfo = async (credential: ICredential): Promise<IP\n-      volume: +position.positionAmt,\n-      free_volume: +position.positionAmt,\n+      volume: Math.abs(+position.positionAmt),\n+      free_volume: Math.abs(+position.positionAmt),\n@@ -36 +36 @@ export const getUnifiedAccountInfo = async (credential: ICredential): Promise<IP\n-      closable_price: +position.entryPrice + +position.unrealizedProfit / +position.positionAmt,\n+      closable_price: +position.entryPrice + +position.unrealizedProfit / Math.abs(+position.positionAmt),\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-binance/2025-12-09-16-40.json",
          "changeType": "added",
          "patch": "commit 339c0b00e24c22f97f1890df50ebc5e8ae7b88fd\nAuthor: Ryan <stayrealrhr@gmail.com>\nDate:   Wed Dec 10 00:42:33 2025 +0800\n\n    feat: fix volume (#2276)\n\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-09-16-40.json b/common/changes/@yuants/vendor-binance/2025-12-09-16-40.json\nnew file mode 100644\nindex 000000000..d6ab51169\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-binance/2025-12-09-16-40.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-binance\",\n+      \"comment\": \"fix volume\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-binance\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "1afd192d46eacd101e3b9a073fe3b6f55c8ea5fa",
      "short": "1afd192d4",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-10 00:48:28 +0800",
      "subject": "feat: add settlement_interval to IPosition and implement related polyfill (#2275)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 15,
          "deletions": 1,
          "path": "apps/virtual-exchange/src/position.ts",
          "changeType": "modified",
          "patch": "commit 1afd192d46eacd101e3b9a073fe3b6f55c8ea5fa\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 00:48:28 2025 +0800\n\n    feat: add settlement_interval to IPosition and implement related polyfill (#2275)\n\ndiff --git a/apps/virtual-exchange/src/position.ts b/apps/virtual-exchange/src/position.ts\nindex 29d3f9f0c..19b4c6ff9 100644\n--- a/apps/virtual-exchange/src/position.ts\n+++ b/apps/virtual-exchange/src/position.ts\n@@ -18,0 +19,9 @@ const quoteCache = createCache<IQuote>(\n+const interestRateIntervalCache = createCache(async (product_id: string) => {\n+  const sql = `select created_at from interest_rate where series_id = ${escapeSQL(\n+    product_id,\n+  )} order by created_at desc limit 2`;\n+  const rates = await requestSQL<{ created_at: string }[]>(terminal, sql);\n+  if (rates.length < 2) return undefined;\n+  return new Date(rates[0].created_at).getTime() - new Date(rates[1].created_at).getTime();\n+});\n+\n@@ -22 +31 @@ export const polyfillPosition = async (positions: IPosition[]): Promise<IPositio\n-    const [theProduct, quote] = await Promise.all([\n+    const [theProduct, quote, interestRateInterval] = await Promise.all([\n@@ -24,0 +34 @@ export const polyfillPosition = async (positions: IPosition[]): Promise<IPositio\n+      interestRateIntervalCache.query(pos.product_id),\n@@ -60,0 +71,4 @@ export const polyfillPosition = async (positions: IPosition[]): Promise<IPositio\n+\n+    if (interestRateInterval) {\n+      pos.settlement_interval = interestRateInterval;\n+    }\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "interestRateIntervalCache",
              "code": "const interestRateIntervalCache = createCache(async (product_id: string) => {",
              "lineStart": 19,
              "lineEnd": 19
            },
            {
              "type": "function",
              "name": "sql",
              "code": "const sql = `select created_at from interest_rate where series_id = ${escapeSQL(\n  product_id,\n)} order by created_at desc limit 2`;",
              "lineStart": 20,
              "lineEnd": 22
            },
            {
              "type": "function",
              "name": "rates",
              "code": "  const rates = await requestSQL<{ created_at: string }[]>(terminal, sql);\n  if (rates.length < 2) return undefined;\n  return new Date(rates[0].created_at).getTime() - new Date(rates[1].created_at).getTime();\n});\n\n    const [theProduct, quote, interestRateInterval] = await Promise.all([\n      interestRateIntervalCache.query(pos.product_id),\n\n    if (interestRateInterval) {\n      pos.settlement_interval = interestRateInterval;\n    }",
              "lineStart": 23,
              "lineEnd": 75
            }
          ]
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-09-16-38.json",
          "changeType": "added",
          "patch": "commit 1afd192d46eacd101e3b9a073fe3b6f55c8ea5fa\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 00:48:28 2025 +0800\n\n    feat: add settlement_interval to IPosition and implement related polyfill (#2275)\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-09-16-38.json b/common/changes/@yuants/app-virtual-exchange/2025-12-09-16-38.json\nnew file mode 100644\nindex 000000000..8c15a5de2\n--- /dev/null\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-09-16-38.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-virtual-exchange\",\n+      \"comment\": \"add settlement_interval polyfill\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-virtual-exchange\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/data-account/2025-12-09-16-38.json",
          "changeType": "added",
          "patch": "commit 1afd192d46eacd101e3b9a073fe3b6f55c8ea5fa\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 00:48:28 2025 +0800\n\n    feat: add settlement_interval to IPosition and implement related polyfill (#2275)\n\ndiff --git a/common/changes/@yuants/data-account/2025-12-09-16-38.json b/common/changes/@yuants/data-account/2025-12-09-16-38.json\nnew file mode 100644\nindex 000000000..67e28fa8d\n--- /dev/null\n+++ b/common/changes/@yuants/data-account/2025-12-09-16-38.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/data-account\",\n+      \"comment\": \"add settlement_interval to IPosition\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/data-account\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/exchange/2025-12-09-16-38.json",
          "changeType": "added",
          "patch": "commit 1afd192d46eacd101e3b9a073fe3b6f55c8ea5fa\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 00:48:28 2025 +0800\n\n    feat: add settlement_interval to IPosition and implement related polyfill (#2275)\n\ndiff --git a/common/changes/@yuants/exchange/2025-12-09-16-38.json b/common/changes/@yuants/exchange/2025-12-09-16-38.json\nnew file mode 100644\nindex 000000000..963922d66\n--- /dev/null\n+++ b/common/changes/@yuants/exchange/2025-12-09-16-38.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/exchange\",\n+      \"comment\": \"remove position polyfills\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/exchange\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 0,
          "path": "libraries/data-account/etc/data-account.api.md",
          "changeType": "added",
          "patch": "commit 1afd192d46eacd101e3b9a073fe3b6f55c8ea5fa\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 00:48:28 2025 +0800\n\n    feat: add settlement_interval to IPosition and implement related polyfill (#2275)\n\ndiff --git a/libraries/data-account/etc/data-account.api.md b/libraries/data-account/etc/data-account.api.md\nindex 6e7e56eff..ddcdf0d39 100644\n--- a/libraries/data-account/etc/data-account.api.md\n+++ b/libraries/data-account/etc/data-account.api.md\n@@ -79,0 +80 @@ export interface IPosition {\n+    settlement_interval?: number;\r\n",
          "codeSnippets": []
        },
        {
          "additions": 5,
          "deletions": 0,
          "path": "libraries/data-account/src/interface.ts",
          "changeType": "added",
          "patch": "commit 1afd192d46eacd101e3b9a073fe3b6f55c8ea5fa\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 00:48:28 2025 +0800\n\n    feat: add settlement_interval to IPosition and implement related polyfill (#2275)\n\ndiff --git a/libraries/data-account/src/interface.ts b/libraries/data-account/src/interface.ts\nindex 521041595..101d14f58 100644\n--- a/libraries/data-account/src/interface.ts\n+++ b/libraries/data-account/src/interface.ts\n@@ -120,0 +121,5 @@ export interface IPosition {\n+  /**\n+   * Settlement interval in milliseconds.\n+   * 结算间隔时间，单位毫秒\n+   */\n+  settlement_interval?: number;\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 41,
          "path": "libraries/exchange/src/index.ts",
          "changeType": "deleted",
          "patch": "commit 1afd192d46eacd101e3b9a073fe3b6f55c8ea5fa\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 00:48:28 2025 +0800\n\n    feat: add settlement_interval to IPosition and implement related polyfill (#2275)\n\ndiff --git a/libraries/exchange/src/index.ts b/libraries/exchange/src/index.ts\nindex b5451e10d..6a93d776e 100644\n--- a/libraries/exchange/src/index.ts\n+++ b/libraries/exchange/src/index.ts\n@@ -178,41 +177,0 @@ export const provideExchangeServices = <T>(terminal: Terminal, exchange: IExchan\n-      for (const pos of positions) {\n-        const [theProduct, quote] = await Promise.all([\n-          productCache.query(pos.product_id),\n-          quoteCache.query(pos.product_id),\n-        ]);\n-\n-        // 估值 = value_scale * volume * closable_price\n-        if (theProduct) {\n-          if (theProduct.base_currency) {\n-            pos.base_currency = theProduct.base_currency;\n-          }\n-          if (theProduct.quote_currency) {\n-            pos.quote_currency = theProduct.quote_currency;\n-          }\n-          if (pos.size === undefined && pos.volume !== undefined && pos.direction !== undefined) {\n-            pos.size = (pos.direction === 'LONG' ? 1 : -1) * pos.volume * (theProduct.value_scale || 1) + '';\n-          }\n-          if (pos.free_size === undefined && pos.free_volume !== undefined && pos.direction !== undefined) {\n-            pos.free_size =\n-              (pos.direction === 'LONG' ? 1 : -1) * pos.free_volume * (theProduct.value_scale || 1) + '';\n-          }\n-          pos.valuation = Math.abs((theProduct.value_scale || 1) * pos.volume * pos.closable_price);\n-        }\n-\n-        // 利率相关信息的追加\n-        if (quote) {\n-          if (quote.interest_rate_next_settled_at !== null) {\n-            pos.settlement_scheduled_at = new Date(quote.interest_rate_next_settled_at).getTime();\n-          }\n-          if (pos.direction === 'LONG') {\n-            if (quote.interest_rate_long !== null) {\n-              pos.interest_to_settle = +quote.interest_rate_long * pos.valuation;\n-            }\n-          }\n-          if (pos.direction === 'SHORT') {\n-            if (quote.interest_rate_short !== null) {\n-              pos.interest_to_settle = +quote.interest_rate_short * pos.valuation;\n-            }\n-          }\n-        }\n-      }\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "37879d723ac4c1d02acde6e35598ede00dffa938",
      "short": "37879d723",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-10 00:56:20 +0800",
      "subject": "chore: bump version (#2277)",
      "conventionalCommit": {
        "type": "chore",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/account-composer/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/account-composer/CHANGELOG.json b/apps/account-composer/CHANGELOG.json\nindex e71e6097d..1e6c04d3d 100644\n--- a/apps/account-composer/CHANGELOG.json\n+++ b/apps/account-composer/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.7.11\",\n+      \"tag\": \"@yuants/app-account-composer_v0.7.11\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/account-composer/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/account-composer/CHANGELOG.md b/apps/account-composer/CHANGELOG.md\nindex eb98f70b3..b0ed22c89 100644\n--- a/apps/account-composer/CHANGELOG.md\n+++ b/apps/account-composer/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 22:20:53 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.7.11\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/account-composer/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/account-composer/package.json b/apps/account-composer/package.json\nindex 9e720cf14..184be6392 100644\n--- a/apps/account-composer/package.json\n+++ b/apps/account-composer/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.7.10\",\n+  \"version\": \"0.7.11\",\n",
          "codeSnippets": []
        },
        {
          "additions": 23,
          "deletions": 0,
          "path": "apps/agent/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/agent/CHANGELOG.json b/apps/agent/CHANGELOG.json\nindex c4a77ee67..c7b668ae2 100644\n--- a/apps/agent/CHANGELOG.json\n+++ b/apps/agent/CHANGELOG.json\n@@ -3,0 +4,23 @@\n+    {\n+      \"version\": \"0.8.22\",\n+      \"tag\": \"@yuants/app-agent_v0.8.22\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/agent\\\" to `0.13.145`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/kernel\\\" to `0.15.62`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/agent/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/agent/CHANGELOG.md b/apps/agent/CHANGELOG.md\nindex ec5cfb617..fb4b2e1bf 100644\n--- a/apps/agent/CHANGELOG.md\n+++ b/apps/agent/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.8.22\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/agent/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/agent/package.json b/apps/agent/package.json\nindex df1c8f18c..252b3a282 100644\n--- a/apps/agent/package.json\n+++ b/apps/agent/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.8.21\",\n+  \"version\": \"0.8.22\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/fund/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/fund/CHANGELOG.json b/apps/fund/CHANGELOG.json\nindex 87cc96e34..42acd0419 100644\n--- a/apps/fund/CHANGELOG.json\n+++ b/apps/fund/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.1.35\",\n+      \"tag\": \"@yuants/app-fund_v0.1.35\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/fund/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/fund/CHANGELOG.md b/apps/fund/CHANGELOG.md\nindex 01fff9fd4..e596f4e7b 100644\n--- a/apps/fund/CHANGELOG.md\n+++ b/apps/fund/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.1.35\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/fund/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/fund/package.json b/apps/fund/package.json\nindex a56e6485a..9444b237a 100644\n--- a/apps/fund/package.json\n+++ b/apps/fund/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.1.34\",\n+  \"version\": \"0.1.35\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/risk-manager/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/risk-manager/CHANGELOG.json b/apps/risk-manager/CHANGELOG.json\nindex d0cd81ff2..fde101869 100644\n--- a/apps/risk-manager/CHANGELOG.json\n+++ b/apps/risk-manager/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.6.51\",\n+      \"tag\": \"@yuants/app-risk-manager_v0.6.51\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/risk-manager/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/risk-manager/CHANGELOG.md b/apps/risk-manager/CHANGELOG.md\nindex 2e6c7e8a6..a5bce88bb 100644\n--- a/apps/risk-manager/CHANGELOG.md\n+++ b/apps/risk-manager/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.6.51\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/risk-manager/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/risk-manager/package.json b/apps/risk-manager/package.json\nindex cf0522ecd..49bec8b0d 100644\n--- a/apps/risk-manager/package.json\n+++ b/apps/risk-manager/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.6.50\",\n+  \"version\": \"0.6.51\",\n",
          "codeSnippets": []
        },
        {
          "additions": 23,
          "deletions": 0,
          "path": "apps/trade-copier/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/trade-copier/CHANGELOG.json b/apps/trade-copier/CHANGELOG.json\nindex 59363aa2a..55ed89914 100644\n--- a/apps/trade-copier/CHANGELOG.json\n+++ b/apps/trade-copier/CHANGELOG.json\n@@ -3,0 +4,23 @@\n+    {\n+      \"version\": \"0.11.36\",\n+      \"tag\": \"@yuants/app-trade-copier_v0.11.36\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/kernel\\\" to `0.15.62`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/order\\\" to `0.3.54`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/trade-copier/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/trade-copier/CHANGELOG.md b/apps/trade-copier/CHANGELOG.md\nindex 1e006b932..6f9f11b01 100644\n--- a/apps/trade-copier/CHANGELOG.md\n+++ b/apps/trade-copier/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.11.36\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/trade-copier/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/trade-copier/package.json b/apps/trade-copier/package.json\nindex df230b39b..79b4607d0 100644\n--- a/apps/trade-copier/package.json\n+++ b/apps/trade-copier/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.11.35\",\n+  \"version\": \"0.11.36\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-aster/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\nindex b01e4c9fc..8a4b02dde 100644\n--- a/apps/vendor-aster/CHANGELOG.json\n+++ b/apps/vendor-aster/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.7.26\",\n+      \"tag\": \"@yuants/vendor-aster_v0.7.26\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.5.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-aster/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\nindex 9e5b38423..6e671ba97 100644\n--- a/apps/vendor-aster/CHANGELOG.md\n+++ b/apps/vendor-aster/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Mon, 08 Dec 2025 17:52:18 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.7.26\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-aster/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\nindex 6c19a6621..57e780546 100644\n--- a/apps/vendor-aster/package.json\n+++ b/apps/vendor-aster/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.7.25\",\n+  \"version\": \"0.7.26\",\n",
          "codeSnippets": []
        },
        {
          "additions": 25,
          "deletions": 0,
          "path": "apps/vendor-binance/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\nindex 6c9663970..188083364 100644\n--- a/apps/vendor-binance/CHANGELOG.json\n+++ b/apps/vendor-binance/CHANGELOG.json\n@@ -3,0 +4,25 @@\n+    {\n+      \"version\": \"0.10.16\",\n+      \"tag\": \"@yuants/vendor-binance_v0.10.16\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"fix volume\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.5.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-binance/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\nindex 3e6d3e53b..63eadc6d7 100644\n--- a/apps/vendor-binance/CHANGELOG.md\n+++ b/apps/vendor-binance/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Mon, 08 Dec 2025 18:12:20 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.10.16\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+### Patches\n+\n+- fix volume\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-binance/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\nindex 0970b460f..c927a693e 100644\n--- a/apps/vendor-binance/package.json\n+++ b/apps/vendor-binance/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.10.15\",\n+  \"version\": \"0.10.16\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-bitget/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/CHANGELOG.json b/apps/vendor-bitget/CHANGELOG.json\nindex 11b9c7d6d..fc5798f4c 100644\n--- a/apps/vendor-bitget/CHANGELOG.json\n+++ b/apps/vendor-bitget/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.11.3\",\n+      \"tag\": \"@yuants/vendor-bitget_v0.11.3\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.5.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-bitget/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/CHANGELOG.md b/apps/vendor-bitget/CHANGELOG.md\nindex 4e673b394..77c31b541 100644\n--- a/apps/vendor-bitget/CHANGELOG.md\n+++ b/apps/vendor-bitget/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.11.3\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-bitget/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/package.json b/apps/vendor-bitget/package.json\nindex af4bc3af7..97dba35cd 100644\n--- a/apps/vendor-bitget/package.json\n+++ b/apps/vendor-bitget/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.11.2\",\n+  \"version\": \"0.11.3\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-ctp/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-ctp/CHANGELOG.json b/apps/vendor-ctp/CHANGELOG.json\nindex 92a87df08..394e0d0b1 100644\n--- a/apps/vendor-ctp/CHANGELOG.json\n+++ b/apps/vendor-ctp/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.10.35\",\n+      \"tag\": \"@yuants/vendor-ctp_v0.10.35\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-ctp/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-ctp/CHANGELOG.md b/apps/vendor-ctp/CHANGELOG.md\nindex 3e3497494..3bb8057aa 100644\n--- a/apps/vendor-ctp/CHANGELOG.md\n+++ b/apps/vendor-ctp/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.10.35\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-ctp/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-ctp/package.json b/apps/vendor-ctp/package.json\nindex 05455b479..024cfedce 100644\n--- a/apps/vendor-ctp/package.json\n+++ b/apps/vendor-ctp/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.10.34\",\n+  \"version\": \"0.10.35\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-gate/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\nindex 86d6e1579..5c77c0933 100644\n--- a/apps/vendor-gate/CHANGELOG.json\n+++ b/apps/vendor-gate/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.4.23\",\n+      \"tag\": \"@yuants/vendor-gate_v0.4.23\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.5.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-gate/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\nindex 4fb526cd7..a8dc5cab6 100644\n--- a/apps/vendor-gate/CHANGELOG.md\n+++ b/apps/vendor-gate/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Mon, 08 Dec 2025 17:24:52 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.4.23\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-gate/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\nindex ae7c38bee..286cadb50 100644\n--- a/apps/vendor-gate/package.json\n+++ b/apps/vendor-gate/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.4.22\",\n+  \"version\": \"0.4.23\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-huobi/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-huobi/CHANGELOG.json b/apps/vendor-huobi/CHANGELOG.json\nindex fea81a17e..fe91192b9 100644\n--- a/apps/vendor-huobi/CHANGELOG.json\n+++ b/apps/vendor-huobi/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.15.12\",\n+      \"tag\": \"@yuants/vendor-huobi_v0.15.12\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.5.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-huobi/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-huobi/CHANGELOG.md b/apps/vendor-huobi/CHANGELOG.md\nindex db7fbdb54..562295db1 100644\n--- a/apps/vendor-huobi/CHANGELOG.md\n+++ b/apps/vendor-huobi/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Mon, 08 Dec 2025 15:50:21 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.15.12\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-huobi/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-huobi/package.json b/apps/vendor-huobi/package.json\nindex 211417173..a64611abd 100644\n--- a/apps/vendor-huobi/package.json\n+++ b/apps/vendor-huobi/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.15.11\",\n+  \"version\": \"0.15.12\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-hyperliquid/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.json b/apps/vendor-hyperliquid/CHANGELOG.json\nindex fe8aac16d..d0399ed23 100644\n--- a/apps/vendor-hyperliquid/CHANGELOG.json\n+++ b/apps/vendor-hyperliquid/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.7.12\",\n+      \"tag\": \"@yuants/vendor-hyperliquid_v0.7.12\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.5.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-hyperliquid/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.md b/apps/vendor-hyperliquid/CHANGELOG.md\nindex 0e78b7e43..03f0e4404 100644\n--- a/apps/vendor-hyperliquid/CHANGELOG.md\n+++ b/apps/vendor-hyperliquid/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Mon, 08 Dec 2025 16:38:57 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.7.12\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-hyperliquid/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-hyperliquid/package.json b/apps/vendor-hyperliquid/package.json\nindex 7f429f059..93a1789e1 100644\n--- a/apps/vendor-hyperliquid/package.json\n+++ b/apps/vendor-hyperliquid/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.7.11\",\n+  \"version\": \"0.7.12\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-okx-web3/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx-web3/CHANGELOG.json b/apps/vendor-okx-web3/CHANGELOG.json\nindex afa49d5da..049e382ed 100644\n--- a/apps/vendor-okx-web3/CHANGELOG.json\n+++ b/apps/vendor-okx-web3/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.1.35\",\n+      \"tag\": \"@yuants/vendor-okx-web3_v0.1.35\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:24 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-okx-web3/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx-web3/CHANGELOG.md b/apps/vendor-okx-web3/CHANGELOG.md\nindex aa698da46..4c3c51b5b 100644\n--- a/apps/vendor-okx-web3/CHANGELOG.md\n+++ b/apps/vendor-okx-web3/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:11 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:24 GMT and should not be manually modified.\n+\n+## 0.1.35\n+Tue, 09 Dec 2025 16:52:24 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-okx-web3/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx-web3/package.json b/apps/vendor-okx-web3/package.json\nindex bcee2f5c2..762a19e57 100644\n--- a/apps/vendor-okx-web3/package.json\n+++ b/apps/vendor-okx-web3/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.1.34\",\n+  \"version\": \"0.1.35\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-okx/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\nindex 2c1be394f..1ae27431e 100644\n--- a/apps/vendor-okx/CHANGELOG.json\n+++ b/apps/vendor-okx/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.29.13\",\n+      \"tag\": \"@yuants/vendor-okx_v0.29.13\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:24 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.5.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-okx/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\nindex 649c75138..0c2a6fc07 100644\n--- a/apps/vendor-okx/CHANGELOG.md\n+++ b/apps/vendor-okx/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Mon, 08 Dec 2025 16:38:57 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:24 GMT and should not be manually modified.\n+\n+## 0.29.13\n+Tue, 09 Dec 2025 16:52:24 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-okx/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\nindex 4ae8f4a5a..bc00a9ab9 100644\n--- a/apps/vendor-okx/package.json\n+++ b/apps/vendor-okx/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.29.12\",\n+  \"version\": \"0.29.13\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-solana/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-solana/CHANGELOG.json b/apps/vendor-solana/CHANGELOG.json\nindex 17fdcff1d..ac564c8eb 100644\n--- a/apps/vendor-solana/CHANGELOG.json\n+++ b/apps/vendor-solana/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.1.120\",\n+      \"tag\": \"@yuants/vendor-solana_v0.1.120\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:24 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-solana/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-solana/CHANGELOG.md b/apps/vendor-solana/CHANGELOG.md\nindex 9c15fb5dc..470cac772 100644\n--- a/apps/vendor-solana/CHANGELOG.md\n+++ b/apps/vendor-solana/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:11 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:24 GMT and should not be manually modified.\n+\n+## 0.1.120\n+Tue, 09 Dec 2025 16:52:24 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-solana/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-solana/package.json b/apps/vendor-solana/package.json\nindex d61a664bd..5b886effd 100644\n--- a/apps/vendor-solana/package.json\n+++ b/apps/vendor-solana/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.1.119\",\n+  \"version\": \"0.1.120\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-turboflow/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-turboflow/CHANGELOG.json b/apps/vendor-turboflow/CHANGELOG.json\nindex 911ca368e..a93bf0cc7 100644\n--- a/apps/vendor-turboflow/CHANGELOG.json\n+++ b/apps/vendor-turboflow/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"1.2.11\",\n+      \"tag\": \"@yuants/vendor-turboflow_v1.2.11\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:24 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.5.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-turboflow/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-turboflow/CHANGELOG.md b/apps/vendor-turboflow/CHANGELOG.md\nindex cbdfde29b..b523a06e3 100644\n--- a/apps/vendor-turboflow/CHANGELOG.md\n+++ b/apps/vendor-turboflow/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:11 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:24 GMT and should not be manually modified.\n+\n+## 1.2.11\n+Tue, 09 Dec 2025 16:52:24 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-turboflow/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-turboflow/package.json b/apps/vendor-turboflow/package.json\nindex f0b244e3d..fec15bd39 100644\n--- a/apps/vendor-turboflow/package.json\n+++ b/apps/vendor-turboflow/package.json\n@@ -3 +3 @@\n-  \"version\": \"1.2.10\",\n+  \"version\": \"1.2.11\",\n",
          "codeSnippets": []
        },
        {
          "additions": 25,
          "deletions": 0,
          "path": "apps/virtual-exchange/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\nindex 147ce694a..15b8b162a 100644\n--- a/apps/virtual-exchange/CHANGELOG.json\n+++ b/apps/virtual-exchange/CHANGELOG.json\n@@ -3,0 +4,25 @@\n+    {\n+      \"version\": \"0.7.0\",\n+      \"tag\": \"@yuants/app-virtual-exchange_v0.7.0\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"minor\": [\n+          {\n+            \"comment\": \"add settlement_interval polyfill\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.5.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/virtual-exchange/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\nindex e8cae2a5a..41ef844dd 100644\n--- a/apps/virtual-exchange/CHANGELOG.md\n+++ b/apps/virtual-exchange/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Tue, 09 Dec 2025 10:38:26 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.7.0\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+### Minor changes\n+\n+- add settlement_interval polyfill\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/virtual-exchange/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\nindex 8bec54b59..668e639c7 100644\n--- a/apps/virtual-exchange/package.json\n+++ b/apps/virtual-exchange/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.6.0\",\n+  \"version\": \"0.7.0\",\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/account-info-resolver/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/agent/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-account-composer/{main_2025-12-07-22-20.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-agent/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-fund/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-risk-manager/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-trade-copier/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-09-16-38.json",
          "changeType": "deleted",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-09-16-38.json b/common/changes/@yuants/app-virtual-exchange/2025-12-09-16-38.json\ndeleted file mode 100644\nindex 8c15a5de2..000000000\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-09-16-38.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/app-virtual-exchange\",\n-      \"comment\": \"add settlement_interval polyfill\",\n-      \"type\": \"minor\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/app-virtual-exchange\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/{main_2025-12-09-10-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/data-account/2025-12-09-16-38.json",
          "changeType": "deleted",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/data-account/2025-12-09-16-38.json b/common/changes/@yuants/data-account/2025-12-09-16-38.json\ndeleted file mode 100644\nindex 67e28fa8d..000000000\n--- a/common/changes/@yuants/data-account/2025-12-09-16-38.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/data-account\",\n-      \"comment\": \"add settlement_interval to IPosition\",\n-      \"type\": \"minor\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/data-account\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/data-account/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/dist-origin/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/exchange/2025-12-09-16-38.json",
          "changeType": "deleted",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/exchange/2025-12-09-16-38.json b/common/changes/@yuants/exchange/2025-12-09-16-38.json\ndeleted file mode 100644\nindex 963922d66..000000000\n--- a/common/changes/@yuants/exchange/2025-12-09-16-38.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/exchange\",\n-      \"comment\": \"remove position polyfills\",\n-      \"type\": \"minor\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/exchange\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/exchange/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/kernel/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/order/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-aster/{main_2025-12-08-17-52.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-binance/2025-12-09-16-40.json",
          "changeType": "deleted",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-09-16-40.json b/common/changes/@yuants/vendor-binance/2025-12-09-16-40.json\ndeleted file mode 100644\nindex d6ab51169..000000000\n--- a/common/changes/@yuants/vendor-binance/2025-12-09-16-40.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-binance\",\n-      \"comment\": \"fix volume\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-binance\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-binance/{main_2025-12-08-18-12.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-bitget/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-ctp/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-gate/{main_2025-12-08-17-24.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-huobi/{main_2025-12-08-15-50.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-hyperliquid/{main_2025-12-08-16-39.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx-web3/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx/{main_2025-12-08-16-39.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-solana/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-turboflow/{main_2025-12-07-16-38.json => main_2025-12-09-16-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "distributions/origin/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/distributions/origin/CHANGELOG.json b/distributions/origin/CHANGELOG.json\nindex 50225a35c..f636b46b3 100644\n--- a/distributions/origin/CHANGELOG.json\n+++ b/distributions/origin/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.1.121\",\n+      \"tag\": \"@yuants/dist-origin_v0.1.121\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/agent\\\" to `0.13.145`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "distributions/origin/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/distributions/origin/CHANGELOG.md b/distributions/origin/CHANGELOG.md\nindex 583b0cdb7..c19f9f8b2 100644\n--- a/distributions/origin/CHANGELOG.md\n+++ b/distributions/origin/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.1.121\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "distributions/origin/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/distributions/origin/package.json b/distributions/origin/package.json\nindex 3b6678498..132ef9508 100644\n--- a/distributions/origin/package.json\n+++ b/distributions/origin/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.1.120\",\n+  \"version\": \"0.1.121\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "libraries/account-info-resolver/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/account-info-resolver/CHANGELOG.json b/libraries/account-info-resolver/CHANGELOG.json\nindex 763539c23..6be922afd 100644\n--- a/libraries/account-info-resolver/CHANGELOG.json\n+++ b/libraries/account-info-resolver/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.2.79\",\n+      \"tag\": \"@yuants/account-info-resolver_v0.2.79\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "libraries/account-info-resolver/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/account-info-resolver/CHANGELOG.md b/libraries/account-info-resolver/CHANGELOG.md\nindex 50bf266a4..0b8a7132b 100644\n--- a/libraries/account-info-resolver/CHANGELOG.md\n+++ b/libraries/account-info-resolver/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.2.79\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/account-info-resolver/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/account-info-resolver/package.json b/libraries/account-info-resolver/package.json\nindex 7bff8a092..fa99a6ee2 100644\n--- a/libraries/account-info-resolver/package.json\n+++ b/libraries/account-info-resolver/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.2.78\",\n+  \"version\": \"0.2.79\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "libraries/agent/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/agent/CHANGELOG.json b/libraries/agent/CHANGELOG.json\nindex ef2c757f5..7b667e0ea 100644\n--- a/libraries/agent/CHANGELOG.json\n+++ b/libraries/agent/CHANGELOG.json\n@@ -4,0 +5,20 @@\n+      \"version\": \"0.13.145\",\n+      \"tag\": \"@yuants/agent_v0.13.145\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/kernel\\\" to `0.15.62`\"\n+          }\n+        ]\n+      }\n+    },\n+    {\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "libraries/agent/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/agent/CHANGELOG.md b/libraries/agent/CHANGELOG.md\nindex fe43dcdfc..973b01ec1 100644\n--- a/libraries/agent/CHANGELOG.md\n+++ b/libraries/agent/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.13.145\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/agent/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/agent/package.json b/libraries/agent/package.json\nindex bb2804521..91580b50b 100644\n--- a/libraries/agent/package.json\n+++ b/libraries/agent/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.13.144\",\n+  \"version\": \"0.13.145\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "libraries/data-account/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/data-account/CHANGELOG.json b/libraries/data-account/CHANGELOG.json\nindex dfca2a9d5..427665a05 100644\n--- a/libraries/data-account/CHANGELOG.json\n+++ b/libraries/data-account/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.10.0\",\n+      \"tag\": \"@yuants/data-account_v0.10.0\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"minor\": [\n+          {\n+            \"comment\": \"add settlement_interval to IPosition\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "libraries/data-account/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/data-account/CHANGELOG.md b/libraries/data-account/CHANGELOG.md\nindex 8d85cec31..c9262584e 100644\n--- a/libraries/data-account/CHANGELOG.md\n+++ b/libraries/data-account/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.10.0\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+### Minor changes\n+\n+- add settlement_interval to IPosition\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/data-account/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/data-account/package.json b/libraries/data-account/package.json\nindex ce0760b5c..4b7d236b3 100644\n--- a/libraries/data-account/package.json\n+++ b/libraries/data-account/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.9.0\",\n+  \"version\": \"0.10.0\",\n",
          "codeSnippets": []
        },
        {
          "additions": 22,
          "deletions": 0,
          "path": "libraries/exchange/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/exchange/CHANGELOG.json b/libraries/exchange/CHANGELOG.json\nindex 623ab17c6..7761475ad 100644\n--- a/libraries/exchange/CHANGELOG.json\n+++ b/libraries/exchange/CHANGELOG.json\n@@ -3,0 +4,22 @@\n+    {\n+      \"version\": \"0.5.0\",\n+      \"tag\": \"@yuants/exchange_v0.5.0\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"minor\": [\n+          {\n+            \"comment\": \"remove position polyfills\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "libraries/exchange/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/exchange/CHANGELOG.md b/libraries/exchange/CHANGELOG.md\nindex 6bbf4f8f8..b73479713 100644\n--- a/libraries/exchange/CHANGELOG.md\n+++ b/libraries/exchange/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.5.0\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+### Minor changes\n+\n+- remove position polyfills\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/exchange/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/exchange/package.json b/libraries/exchange/package.json\nindex 616aa64e8..0131e591b 100644\n--- a/libraries/exchange/package.json\n+++ b/libraries/exchange/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.4.0\",\n+  \"version\": \"0.5.0\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "libraries/kernel/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/kernel/CHANGELOG.json b/libraries/kernel/CHANGELOG.json\nindex 96b39ad03..9e408876e 100644\n--- a/libraries/kernel/CHANGELOG.json\n+++ b/libraries/kernel/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.15.62\",\n+      \"tag\": \"@yuants/kernel_v0.15.62\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "libraries/kernel/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/kernel/CHANGELOG.md b/libraries/kernel/CHANGELOG.md\nindex 8ad6917cb..854b73bd0 100644\n--- a/libraries/kernel/CHANGELOG.md\n+++ b/libraries/kernel/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.15.62\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/kernel/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/kernel/package.json b/libraries/kernel/package.json\nindex 1acc4f1bf..da6f6ee53 100644\n--- a/libraries/kernel/package.json\n+++ b/libraries/kernel/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.15.61\",\n+  \"version\": \"0.15.62\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "libraries/order/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/order/CHANGELOG.json b/libraries/order/CHANGELOG.json\nindex e47d76011..6aa4e6591 100644\n--- a/libraries/order/CHANGELOG.json\n+++ b/libraries/order/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.3.54\",\n+      \"tag\": \"@yuants/order_v0.3.54\",\n+      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "libraries/order/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/order/CHANGELOG.md b/libraries/order/CHANGELOG.md\nindex d3ad2f54a..7f1b0d0d9 100644\n--- a/libraries/order/CHANGELOG.md\n+++ b/libraries/order/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 07 Dec 2025 16:38:10 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+\n+## 0.3.54\n+Tue, 09 Dec 2025 16:52:23 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/order/package.json",
          "changeType": "modified",
          "patch": "commit 37879d723ac4c1d02acde6e35598ede00dffa938\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 00:56:20 2025 +0800\n\n    chore: bump version (#2277)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/order/package.json b/libraries/order/package.json\nindex 77aa21821..7701ee46d 100644\n--- a/libraries/order/package.json\n+++ b/libraries/order/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.3.53\",\n+  \"version\": \"0.3.54\",\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "38ebc125d719bad49733685a63ca71ac89d70e9b",
      "short": "38ebc125d",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-10 01:21:48 +0800",
      "subject": "feat: fix VEX/GetPositions polyfill to handle empty data response (#2278)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 4,
          "deletions": 1,
          "path": "apps/virtual-exchange/src/general.ts",
          "changeType": "modified",
          "patch": "commit 38ebc125d719bad49733685a63ca71ac89d70e9b\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 01:21:48 2025 +0800\n\n    feat: fix VEX/GetPositions polyfill to handle empty data response (#2278)\n\ndiff --git a/apps/virtual-exchange/src/general.ts b/apps/virtual-exchange/src/general.ts\nindex 5ffe52c4f..16a234c6d 100644\n--- a/apps/virtual-exchange/src/general.ts\n+++ b/apps/virtual-exchange/src/general.ts\n@@ -5,0 +6 @@ import { getCredentialBySecretId } from './credential';\n+import { polyfillPosition } from './position';\n@@ -22 +23,3 @@ terminal.server.provideService<{ secret_id: string; product_id?: string }, IPosi\n-    return { res };\n+    if (!res.data) return { res };\n+    const positions = await polyfillPosition(res.data);\n+    return { res: { code: 0, message: 'OK', data: positions } };\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "positions",
              "code": "const positions = await polyfillPosition(res.data);\nreturn { res: { code: 0, message: 'OK', data: positions } };",
              "lineStart": 24,
              "lineEnd": 26
            }
          ]
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-09-17-20.json",
          "changeType": "added",
          "patch": "commit 38ebc125d719bad49733685a63ca71ac89d70e9b\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 01:21:48 2025 +0800\n\n    feat: fix VEX/GetPositions polyfill to handle empty data response (#2278)\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-09-17-20.json b/common/changes/@yuants/app-virtual-exchange/2025-12-09-17-20.json\nnew file mode 100644\nindex 000000000..b22e02670\n--- /dev/null\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-09-17-20.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-virtual-exchange\",\n+      \"comment\": \"fix VEX/GetPositions polyfill\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-virtual-exchange\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "c90d09608b63ac911be67f9fcf98136e13a088cc",
      "short": "c90d09608",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-10 01:24:10 +0800",
      "subject": "chore: bump version (#2279)",
      "conventionalCommit": {
        "type": "chore",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/virtual-exchange/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit c90d09608b63ac911be67f9fcf98136e13a088cc\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 01:24:10 2025 +0800\n\n    chore: bump version (#2279)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\nindex 15b8b162a..e97010395 100644\n--- a/apps/virtual-exchange/CHANGELOG.json\n+++ b/apps/virtual-exchange/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.7.1\",\n+      \"tag\": \"@yuants/app-virtual-exchange_v0.7.1\",\n+      \"date\": \"Tue, 09 Dec 2025 17:23:12 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"fix VEX/GetPositions polyfill\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/virtual-exchange/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit c90d09608b63ac911be67f9fcf98136e13a088cc\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 01:24:10 2025 +0800\n\n    chore: bump version (#2279)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\nindex 41ef844dd..8bb205ea5 100644\n--- a/apps/virtual-exchange/CHANGELOG.md\n+++ b/apps/virtual-exchange/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 17:23:12 GMT and should not be manually modified.\n+\n+## 0.7.1\n+Tue, 09 Dec 2025 17:23:12 GMT\n+\n+### Patches\n+\n+- fix VEX/GetPositions polyfill\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/virtual-exchange/package.json",
          "changeType": "modified",
          "patch": "commit c90d09608b63ac911be67f9fcf98136e13a088cc\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 01:24:10 2025 +0800\n\n    chore: bump version (#2279)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\nindex 668e639c7..7aa18dbb6 100644\n--- a/apps/virtual-exchange/package.json\n+++ b/apps/virtual-exchange/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.7.0\",\n+  \"version\": \"0.7.1\",\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-09-17-20.json",
          "changeType": "deleted",
          "patch": "commit c90d09608b63ac911be67f9fcf98136e13a088cc\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 01:24:10 2025 +0800\n\n    chore: bump version (#2279)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-09-17-20.json b/common/changes/@yuants/app-virtual-exchange/2025-12-09-17-20.json\ndeleted file mode 100644\nindex b22e02670..000000000\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-09-17-20.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/app-virtual-exchange\",\n-      \"comment\": \"fix VEX/GetPositions polyfill\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/app-virtual-exchange\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/{main_2025-12-09-16-52.json => main_2025-12-09-17-23.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "b0261df9347d322297cd6d5080267353fa9d8dba",
      "short": "b0261df93",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-10 03:12:43 +0800",
      "subject": "feat: add getFApiV2PositionRisk API and integrate into getPositions function (#2280)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 26,
          "deletions": 0,
          "path": "apps/vendor-aster/src/api/private-api.ts",
          "changeType": "added",
          "patch": "commit b0261df9347d322297cd6d5080267353fa9d8dba\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 03:12:43 2025 +0800\n\n    feat: add getFApiV2PositionRisk API and integrate into getPositions function (#2280)\n    \n    chore: remove unused dependency @yuants/secret from vendor-okx package\n    chore: update pnpm-lock.yaml to remove @yuants/secret references\n\ndiff --git a/apps/vendor-aster/src/api/private-api.ts b/apps/vendor-aster/src/api/private-api.ts\nindex ddafe28ed..b32887063 100644\n--- a/apps/vendor-aster/src/api/private-api.ts\n+++ b/apps/vendor-aster/src/api/private-api.ts\n@@ -180,0 +181,26 @@ export const getFApiV4Account = createFutureApi<\n+/**\n+ * 用户持仓风险V2 (USER_DATA)\n+ *\n+ * https://github.com/asterdex/api-docs/blob/master/aster-finance-futures-api_CN.md#%E7%94%A8%E6%88%B7%E6%8C%81%E4%BB%93%E9%A3%8E%E9%99%A9v2-user_data\n+ */\n+export const getFApiV2PositionRisk = createFutureApi<\n+  {\n+    symbol?: string;\n+  },\n+  {\n+    entryPrice: string;\n+    marginType: string;\n+    isAutoAddMargin: string;\n+    isolatedMargin: string;\n+    leverage: string;\n+    liquidationPrice: string;\n+    markPrice: string;\n+    maxNotionalValue: string;\n+    positionAmt: string;\n+    symbol: string;\n+    unRealizedProfit: string;\n+    positionSide: string;\n+    updateTime: number;\n+  }[]\n+>('GET', '/fapi/v2/positionRisk');\n+\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "getFApiV2PositionRisk",
              "code": "export const getFApiV2PositionRisk = createFutureApi<\n  {\n    symbol?: string;\n  },\n  {\n    entryPrice: string;\n    marginType: string;\n    isAutoAddMargin: string;\n    isolatedMargin: string;\n    leverage: string;\n    liquidationPrice: string;\n    markPrice: string;\n    maxNotionalValue: string;\n    positionAmt: string;\n    symbol: string;",
              "lineStart": 186,
              "lineEnd": 207
            }
          ]
        },
        {
          "additions": 11,
          "deletions": 2,
          "path": "apps/vendor-aster/src/services/accounts/spot.ts",
          "changeType": "modified",
          "patch": "commit b0261df9347d322297cd6d5080267353fa9d8dba\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 03:12:43 2025 +0800\n\n    feat: add getFApiV2PositionRisk API and integrate into getPositions function (#2280)\n    \n    chore: remove unused dependency @yuants/secret from vendor-okx package\n    chore: update pnpm-lock.yaml to remove @yuants/secret references\n\ndiff --git a/apps/vendor-aster/src/services/accounts/spot.ts b/apps/vendor-aster/src/services/accounts/spot.ts\nindex 785a165be..49d045e5d 100644\n--- a/apps/vendor-aster/src/services/accounts/spot.ts\n+++ b/apps/vendor-aster/src/services/accounts/spot.ts\n@@ -4 +4,7 @@ import { encodePath } from '@yuants/utils';\n-import { getApiV1Account, getApiV1TickerPrice, getFApiV4Account, ICredential } from '../../api/private-api';\n+import {\n+  getApiV1Account,\n+  getApiV1TickerPrice,\n+  getFApiV2PositionRisk,\n+  getFApiV4Account,\n+  ICredential,\n+} from '../../api/private-api';\n@@ -35 +41 @@ export const getPositions = async (credential: ICredential) => {\n-  const [x, prices, prep, spotProductMap] = await Promise.all([\n+  const [x, prices, prep, positionRisk, spotProductMap] = await Promise.all([\n@@ -38,0 +45 @@ export const getPositions = async (credential: ICredential) => {\n+    getFApiV2PositionRisk(credential, {}),\n@@ -95,0 +103,2 @@ export const getPositions = async (credential: ICredential) => {\n+      // TODO: optimize find performance\n+      liquidation_price: positionRisk.find((r) => r.symbol === p.symbol)?.liquidationPrice,\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 1,
          "path": "apps/vendor-okx/package.json",
          "changeType": "deleted",
          "patch": "commit b0261df9347d322297cd6d5080267353fa9d8dba\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 03:12:43 2025 +0800\n\n    feat: add getFApiV2PositionRisk API and integrate into getPositions function (#2280)\n    \n    chore: remove unused dependency @yuants/secret from vendor-okx package\n    chore: update pnpm-lock.yaml to remove @yuants/secret references\n\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\nindex bc00a9ab9..955b79ff1 100644\n--- a/apps/vendor-okx/package.json\n+++ b/apps/vendor-okx/package.json\n@@ -22 +21,0 @@\n-    \"@yuants/secret\": \"workspace:*\",\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-aster/2025-12-09-19-04.json",
          "changeType": "added",
          "patch": "commit b0261df9347d322297cd6d5080267353fa9d8dba\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 03:12:43 2025 +0800\n\n    feat: add getFApiV2PositionRisk API and integrate into getPositions function (#2280)\n    \n    chore: remove unused dependency @yuants/secret from vendor-okx package\n    chore: update pnpm-lock.yaml to remove @yuants/secret references\n\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-09-19-04.json b/common/changes/@yuants/vendor-aster/2025-12-09-19-04.json\nnew file mode 100644\nindex 000000000..355722377\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-aster/2025-12-09-19-04.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-aster\",\n+      \"comment\": \"fix liq price\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-aster\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx/2025-12-09-19-04.json",
          "changeType": "added",
          "patch": "commit b0261df9347d322297cd6d5080267353fa9d8dba\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 03:12:43 2025 +0800\n\n    feat: add getFApiV2PositionRisk API and integrate into getPositions function (#2280)\n    \n    chore: remove unused dependency @yuants/secret from vendor-okx package\n    chore: update pnpm-lock.yaml to remove @yuants/secret references\n\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-09-19-04.json b/common/changes/@yuants/vendor-okx/2025-12-09-19-04.json\nnew file mode 100644\nindex 000000000..bd82e70e6\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-okx/2025-12-09-19-04.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-okx\",\n+      \"comment\": \"remove dep\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-okx\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 2,
          "path": "common/config/rush/pnpm-lock.yaml",
          "changeType": "deleted",
          "patch": "commit b0261df9347d322297cd6d5080267353fa9d8dba\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 03:12:43 2025 +0800\n\n    feat: add getFApiV2PositionRisk API and integrate into getPositions function (#2280)\n    \n    chore: remove unused dependency @yuants/secret from vendor-okx package\n    chore: update pnpm-lock.yaml to remove @yuants/secret references\n\ndiff --git a/common/config/rush/pnpm-lock.yaml b/common/config/rush/pnpm-lock.yaml\nindex 45d7f06f5..ef2fa2bf3 100644\n--- a/common/config/rush/pnpm-lock.yaml\n+++ b/common/config/rush/pnpm-lock.yaml\n@@ -1254 +1253,0 @@ importers:\n-      '@yuants/secret': workspace:*\n@@ -1275 +1273,0 @@ importers:\n-      '@yuants/secret': link:../../libraries/secret\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "d898c35de3afef380abeca2e5c445d38f9aed65e",
      "short": "d898c35de",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-10 03:39:29 +0800",
      "subject": "chore: bump version (#2281)",
      "conventionalCommit": {
        "type": "chore",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-aster/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit d898c35de3afef380abeca2e5c445d38f9aed65e\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 03:39:29 2025 +0800\n\n    chore: bump version (#2281)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\nindex 8a4b02dde..bf9ca2050 100644\n--- a/apps/vendor-aster/CHANGELOG.json\n+++ b/apps/vendor-aster/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.7.27\",\n+      \"tag\": \"@yuants/vendor-aster_v0.7.27\",\n+      \"date\": \"Tue, 09 Dec 2025 19:21:54 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"fix liq price\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-aster/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit d898c35de3afef380abeca2e5c445d38f9aed65e\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 03:39:29 2025 +0800\n\n    chore: bump version (#2281)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\nindex 6e671ba97..f7a2ff01b 100644\n--- a/apps/vendor-aster/CHANGELOG.md\n+++ b/apps/vendor-aster/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 19:21:54 GMT and should not be manually modified.\n+\n+## 0.7.27\n+Tue, 09 Dec 2025 19:21:54 GMT\n+\n+### Patches\n+\n+- fix liq price\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-aster/package.json",
          "changeType": "modified",
          "patch": "commit d898c35de3afef380abeca2e5c445d38f9aed65e\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 03:39:29 2025 +0800\n\n    chore: bump version (#2281)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\nindex 57e780546..c959d3b9d 100644\n--- a/apps/vendor-aster/package.json\n+++ b/apps/vendor-aster/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.7.26\",\n+  \"version\": \"0.7.27\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-okx/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit d898c35de3afef380abeca2e5c445d38f9aed65e\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 03:39:29 2025 +0800\n\n    chore: bump version (#2281)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\nindex 1ae27431e..ebc106715 100644\n--- a/apps/vendor-okx/CHANGELOG.json\n+++ b/apps/vendor-okx/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.29.14\",\n+      \"tag\": \"@yuants/vendor-okx_v0.29.14\",\n+      \"date\": \"Tue, 09 Dec 2025 19:21:54 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"remove dep\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-okx/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit d898c35de3afef380abeca2e5c445d38f9aed65e\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 03:39:29 2025 +0800\n\n    chore: bump version (#2281)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\nindex 0c2a6fc07..4f1683f54 100644\n--- a/apps/vendor-okx/CHANGELOG.md\n+++ b/apps/vendor-okx/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Tue, 09 Dec 2025 16:52:24 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 19:21:54 GMT and should not be manually modified.\n+\n+## 0.29.14\n+Tue, 09 Dec 2025 19:21:54 GMT\n+\n+### Patches\n+\n+- remove dep\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-okx/package.json",
          "changeType": "modified",
          "patch": "commit d898c35de3afef380abeca2e5c445d38f9aed65e\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 03:39:29 2025 +0800\n\n    chore: bump version (#2281)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\nindex 955b79ff1..ee0d91db4 100644\n--- a/apps/vendor-okx/package.json\n+++ b/apps/vendor-okx/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.29.13\",\n+  \"version\": \"0.29.14\",\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-aster/2025-12-09-19-04.json",
          "changeType": "deleted",
          "patch": "commit d898c35de3afef380abeca2e5c445d38f9aed65e\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 03:39:29 2025 +0800\n\n    chore: bump version (#2281)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-aster/2025-12-09-19-04.json b/common/changes/@yuants/vendor-aster/2025-12-09-19-04.json\ndeleted file mode 100644\nindex 355722377..000000000\n--- a/common/changes/@yuants/vendor-aster/2025-12-09-19-04.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-aster\",\n-      \"comment\": \"fix liq price\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-aster\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-aster/{main_2025-12-09-16-52.json => main_2025-12-09-19-21.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-okx/2025-12-09-19-04.json",
          "changeType": "deleted",
          "patch": "commit d898c35de3afef380abeca2e5c445d38f9aed65e\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 03:39:29 2025 +0800\n\n    chore: bump version (#2281)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-okx/2025-12-09-19-04.json b/common/changes/@yuants/vendor-okx/2025-12-09-19-04.json\ndeleted file mode 100644\nindex bd82e70e6..000000000\n--- a/common/changes/@yuants/vendor-okx/2025-12-09-19-04.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-okx\",\n-      \"comment\": \"remove dep\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-okx\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx/{main_2025-12-09-16-52.json => main_2025-12-09-19-21.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "b5e1e0ed27ae67cb76e88707a9170f2e2e3af95a",
      "short": "b5e1e0ed2",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-10 04:25:08 +0800",
      "subject": "fix: correct closable price calculation and adjust order submission logic for single side mode (#2282)",
      "conventionalCommit": {
        "type": "fix",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 2,
          "deletions": 1,
          "path": "apps/vendor-binance/src/services/accounts/unified.ts",
          "changeType": "modified",
          "patch": "commit b5e1e0ed27ae67cb76e88707a9170f2e2e3af95a\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 04:25:08 2025 +0800\n\n    fix: correct closable price calculation and adjust order submission logic for single side mode (#2282)\n\ndiff --git a/apps/vendor-binance/src/services/accounts/unified.ts b/apps/vendor-binance/src/services/accounts/unified.ts\nindex feb19cb0e..c9c53e33b 100644\n--- a/apps/vendor-binance/src/services/accounts/unified.ts\n+++ b/apps/vendor-binance/src/services/accounts/unified.ts\n@@ -36 +36,2 @@ export const getUnifiedAccountInfo = async (credential: ICredential): Promise<IP\n-      closable_price: +position.entryPrice + +position.unrealizedProfit / Math.abs(+position.positionAmt),\n+      // ISSUE: positionAmt 有正负，这里计算有个 trick，不需要区分仓位方向\n+      closable_price: +position.entryPrice + +position.unrealizedProfit / +position.positionAmt,\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 3,
          "path": "apps/vendor-binance/src/services/orders/submitOrder.ts",
          "changeType": "modified",
          "patch": "commit b5e1e0ed27ae67cb76e88707a9170f2e2e3af95a\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 04:25:08 2025 +0800\n\n    fix: correct closable price calculation and adjust order submission logic for single side mode (#2282)\n\ndiff --git a/apps/vendor-binance/src/services/orders/submitOrder.ts b/apps/vendor-binance/src/services/orders/submitOrder.ts\nindex 1e05c8900..ffee0eb2c 100644\n--- a/apps/vendor-binance/src/services/orders/submitOrder.ts\n+++ b/apps/vendor-binance/src/services/orders/submitOrder.ts\n@@ -18,0 +19,2 @@ const submitUnifiedOrder: IActionHandlerOfSubmitOrder<ICredential> = async (cred\n+  // 单向持仓模式 (single side mode) 下\n+  const isSingleSideMode = false; // TODO: fetch from account info API and cache it\n@@ -20 +22 @@ const submitUnifiedOrder: IActionHandlerOfSubmitOrder<ICredential> = async (cred\n-  const positionSide = mapOrderDirectionToPositionSide(order.order_direction);\n+  const positionSide = isSingleSideMode ? undefined : mapOrderDirectionToPositionSide(order.order_direction);\n@@ -23,2 +25,5 @@ const submitUnifiedOrder: IActionHandlerOfSubmitOrder<ICredential> = async (cred\n-  const reduceOnly =\n-    order.order_direction === 'CLOSE_LONG' || order.order_direction === 'CLOSE_SHORT' ? 'true' : undefined;\n+  const reduceOnly = isSingleSideMode\n+    ? order.order_direction === 'CLOSE_LONG' || order.order_direction === 'CLOSE_SHORT'\n+      ? 'true'\n+      : undefined\n+    : undefined;\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "isSingleSideMode",
              "code": "const isSingleSideMode = false; // TODO: fetch from account info API and cache it",
              "lineStart": 20,
              "lineEnd": 21
            },
            {
              "type": "function",
              "name": "positionSide",
              "code": "const positionSide = isSingleSideMode ? undefined : mapOrderDirectionToPositionSide(order.order_direction);",
              "lineStart": 22,
              "lineEnd": 24
            },
            {
              "type": "function",
              "name": "reduceOnly",
              "code": "const reduceOnly = isSingleSideMode\n  ? order.order_direction === 'CLOSE_LONG' || order.order_direction === 'CLOSE_SHORT'\n    ? 'true'\n    : undefined\n  : undefined;",
              "lineStart": 25,
              "lineEnd": 30
            }
          ]
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-binance/2025-12-09-19-50.json",
          "changeType": "added",
          "patch": "commit b5e1e0ed27ae67cb76e88707a9170f2e2e3af95a\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 10 04:25:08 2025 +0800\n\n    fix: correct closable price calculation and adjust order submission logic for single side mode (#2282)\n\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-09-19-50.json b/common/changes/@yuants/vendor-binance/2025-12-09-19-50.json\nnew file mode 100644\nindex 000000000..97a90938b\n--- /dev/null\n+++ b/common/changes/@yuants/vendor-binance/2025-12-09-19-50.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/vendor-binance\",\n+      \"comment\": \"fix closable price and submit order\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/vendor-binance\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "dcb3ba9551a2cd4284bc896083a3213c639da2f6",
      "short": "dcb3ba955",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-10 04:30:21 +0800",
      "subject": "chore: bump version (#2283)",
      "conventionalCommit": {
        "type": "chore",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-binance/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit dcb3ba9551a2cd4284bc896083a3213c639da2f6\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 04:30:21 2025 +0800\n\n    chore: bump version (#2283)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\nindex 188083364..a26284c60 100644\n--- a/apps/vendor-binance/CHANGELOG.json\n+++ b/apps/vendor-binance/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.10.17\",\n+      \"tag\": \"@yuants/vendor-binance_v0.10.17\",\n+      \"date\": \"Tue, 09 Dec 2025 20:27:01 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"fix closable price and submit order\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/vendor-binance/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit dcb3ba9551a2cd4284bc896083a3213c639da2f6\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 04:30:21 2025 +0800\n\n    chore: bump version (#2283)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\nindex 63eadc6d7..6595eb78f 100644\n--- a/apps/vendor-binance/CHANGELOG.md\n+++ b/apps/vendor-binance/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Tue, 09 Dec 2025 16:52:23 GMT and should not be manually modified.\n+This log was last generated on Tue, 09 Dec 2025 20:27:01 GMT and should not be manually modified.\n+\n+## 0.10.17\n+Tue, 09 Dec 2025 20:27:01 GMT\n+\n+### Patches\n+\n+- fix closable price and submit order\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-binance/package.json",
          "changeType": "modified",
          "patch": "commit dcb3ba9551a2cd4284bc896083a3213c639da2f6\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 04:30:21 2025 +0800\n\n    chore: bump version (#2283)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\nindex c927a693e..4e75f7689 100644\n--- a/apps/vendor-binance/package.json\n+++ b/apps/vendor-binance/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.10.16\",\n+  \"version\": \"0.10.17\",\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/vendor-binance/2025-12-09-19-50.json",
          "changeType": "deleted",
          "patch": "commit dcb3ba9551a2cd4284bc896083a3213c639da2f6\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 10 04:30:21 2025 +0800\n\n    chore: bump version (#2283)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/vendor-binance/2025-12-09-19-50.json b/common/changes/@yuants/vendor-binance/2025-12-09-19-50.json\ndeleted file mode 100644\nindex 97a90938b..000000000\n--- a/common/changes/@yuants/vendor-binance/2025-12-09-19-50.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/vendor-binance\",\n-      \"comment\": \"fix closable price and submit order\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/vendor-binance\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-binance/{main_2025-12-09-16-52.json => main_2025-12-09-20-27.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        }
      ]
    }
  ],
  "analysis": {
    "domains": [
      {
        "name": "配置与环境",
        "commits": [
          "f3139db51",
          "fa4438943",
          "7fd1f2687",
          "e71d2e5cd",
          "492e1c784",
          "f69e5a73a",
          "5d803a46d",
          "449264c52",
          "b0acd943d",
          "339c0b00e",
          "1afd192d4",
          "37879d723",
          "38ebc125d",
          "c90d09608",
          "b0261df93",
          "d898c35de",
          "b5e1e0ed2",
          "dcb3ba955"
        ],
        "files": [
          ".claude/skills/git-changes-reporter/scripts/create-daily-report-pr.sh",
          ".github/workflows/daily-git-report.yml",
          "docs/reports/git-changes-2025-12-09.json",
          "docs/reports/git-changes-report-2025-12-09.md",
          "docs/reports/git-changes-2025-12-08.json",
          "docs/reports/git-changes-report-2025-12-08.md",
          "docs/reports/git-changes-2025-12-07.json",
          "docs/reports/git-changes-report-2025-12-07.md",
          "docs/reports/git-changes-2025-12-06.json",
          "docs/reports/git-changes-report-2025-12-06.md"
        ]
      },
      {
        "name": "API请求优化与限速",
        "commits": [
          "fa4438943",
          "7fd1f2687",
          "e71d2e5cd",
          "492e1c784",
          "f69e5a73a",
          "5d803a46d",
          "449264c52",
          "339c0b00e",
          "1afd192d4",
          "38ebc125d",
          "b0261df93"
        ],
        "files": [
          "docs/reports/git-changes-2025-12-09.json",
          "docs/reports/git-changes-report-2025-12-09.md",
          "docs/reports/git-changes-2025-12-08.json",
          "docs/reports/git-changes-report-2025-12-08.md",
          "docs/reports/git-changes-2025-12-07.json",
          "docs/reports/git-changes-report-2025-12-07.md",
          "docs/reports/git-changes-2025-12-06.json",
          "docs/reports/git-changes-report-2025-12-06.md",
          "docs/reports/git-changes-2025-12-05.json",
          "docs/reports/git-changes-report-2025-12-05.md"
        ]
      },
      {
        "name": "安全与鉴权",
        "commits": [
          "fa4438943",
          "7fd1f2687",
          "e71d2e5cd",
          "492e1c784",
          "f69e5a73a",
          "5d803a46d",
          "449264c52",
          "339c0b00e",
          "1afd192d4",
          "38ebc125d",
          "b0261df93",
          "b5e1e0ed2"
        ],
        "files": [
          "docs/reports/git-changes-2025-12-09.json",
          "docs/reports/git-changes-report-2025-12-09.md",
          "docs/reports/git-changes-2025-12-08.json",
          "docs/reports/git-changes-report-2025-12-08.md",
          "docs/reports/git-changes-2025-12-07.json",
          "docs/reports/git-changes-report-2025-12-07.md",
          "docs/reports/git-changes-2025-12-06.json",
          "docs/reports/git-changes-report-2025-12-06.md",
          "docs/reports/git-changes-2025-12-05.json",
          "docs/reports/git-changes-report-2025-12-05.md"
        ]
      },
      {
        "name": "订单与交易",
        "commits": [
          "fa4438943",
          "7fd1f2687",
          "e71d2e5cd",
          "492e1c784",
          "f69e5a73a",
          "5d803a46d",
          "449264c52",
          "339c0b00e",
          "1afd192d4",
          "37879d723",
          "38ebc125d",
          "b0261df93",
          "b5e1e0ed2"
        ],
        "files": [
          "docs/reports/git-changes-2025-12-09.json",
          "docs/reports/git-changes-report-2025-12-09.md",
          "docs/reports/git-changes-2025-12-08.json",
          "docs/reports/git-changes-report-2025-12-08.md",
          "docs/reports/git-changes-2025-12-07.json",
          "docs/reports/git-changes-report-2025-12-07.md",
          "docs/reports/git-changes-2025-12-06.json",
          "docs/reports/git-changes-report-2025-12-06.md",
          "docs/reports/git-changes-2025-12-05.json",
          "docs/reports/git-changes-report-2025-12-05.md"
        ]
      },
      {
        "name": "账户管理",
        "commits": [
          "fa4438943",
          "7fd1f2687",
          "e71d2e5cd",
          "492e1c784",
          "f69e5a73a",
          "5d803a46d",
          "449264c52",
          "339c0b00e",
          "1afd192d4",
          "37879d723",
          "38ebc125d",
          "b0261df93",
          "b5e1e0ed2"
        ],
        "files": [
          "docs/reports/git-changes-2025-12-09.json",
          "docs/reports/git-changes-report-2025-12-09.md",
          "docs/reports/git-changes-2025-12-08.json",
          "docs/reports/git-changes-report-2025-12-08.md",
          "docs/reports/git-changes-2025-12-07.json",
          "docs/reports/git-changes-report-2025-12-07.md",
          "docs/reports/git-changes-2025-12-06.json",
          "docs/reports/git-changes-report-2025-12-06.md",
          "docs/reports/git-changes-2025-12-05.json",
          "docs/reports/git-changes-report-2025-12-05.md"
        ]
      },
      {
        "name": "市场数据",
        "commits": [
          "fa4438943",
          "7fd1f2687",
          "e71d2e5cd",
          "492e1c784",
          "f69e5a73a",
          "5d803a46d",
          "449264c52",
          "339c0b00e",
          "1afd192d4",
          "38ebc125d",
          "b0261df93",
          "b5e1e0ed2"
        ],
        "files": [
          "docs/reports/git-changes-2025-12-09.json",
          "docs/reports/git-changes-report-2025-12-09.md",
          "docs/reports/git-changes-2025-12-08.json",
          "docs/reports/git-changes-report-2025-12-08.md",
          "docs/reports/git-changes-2025-12-07.json",
          "docs/reports/git-changes-report-2025-12-07.md",
          "docs/reports/git-changes-2025-12-06.json",
          "docs/reports/git-changes-report-2025-12-06.md",
          "docs/reports/git-changes-2025-12-05.json",
          "docs/reports/git-changes-report-2025-12-05.md"
        ]
      },
      {
        "name": "文档",
        "commits": [
          "fa4438943",
          "7fd1f2687",
          "e71d2e5cd",
          "492e1c784",
          "f69e5a73a",
          "5d803a46d",
          "b0acd943d",
          "1afd192d4",
          "37879d723",
          "c90d09608",
          "d898c35de",
          "dcb3ba955"
        ],
        "files": [
          "docs/reports/git-changes-2025-12-09.json",
          "docs/reports/git-changes-report-2025-12-09.md",
          "docs/reports/git-changes-2025-12-08.json",
          "docs/reports/git-changes-report-2025-12-08.md",
          "docs/reports/git-changes-2025-12-07.json",
          "docs/reports/git-changes-report-2025-12-07.md",
          "docs/reports/git-changes-2025-12-06.json",
          "docs/reports/git-changes-report-2025-12-06.md",
          "docs/reports/git-changes-2025-12-05.json",
          "docs/reports/git-changes-report-2025-12-05.md"
        ]
      },
      {
        "name": "接口重构",
        "commits": ["1afd192d4", "b0261df93"],
        "files": [
          "apps/virtual-exchange/src/position.ts",
          "common/changes/@yuants/app-virtual-exchange/2025-12-09-16-38.json",
          "common/changes/@yuants/data-account/2025-12-09-16-38.json",
          "common/changes/@yuants/exchange/2025-12-09-16-38.json",
          "libraries/data-account/etc/data-account.api.md",
          "libraries/data-account/src/interface.ts",
          "libraries/exchange/src/index.ts",
          "apps/vendor-aster/src/api/private-api.ts",
          "apps/vendor-aster/src/services/accounts/spot.ts",
          "apps/vendor-okx/package.json"
        ]
      },
      {
        "name": "错误处理与观测",
        "commits": ["b5e1e0ed2"],
        "files": [
          "apps/vendor-binance/src/services/accounts/unified.ts",
          "apps/vendor-binance/src/services/orders/submitOrder.ts",
          "common/changes/@yuants/vendor-binance/2025-12-09-19-50.json"
        ]
      }
    ],
    "riskIndicators": [
      {
        "type": "no_tests",
        "severity": "medium",
        "details": "包含功能或修复提交但未见测试文件更新",
        "commits": []
      }
    ]
  },
  "metadata": {
    "tool": "git-changes-reporter",
    "version": "3.0.0",
    "repository": "/Users/c1/Work/Yuan"
  }
}
