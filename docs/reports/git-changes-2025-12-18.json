{
  "range": {
    "old": "f1f5644b6033552f091af978ead5ee8736a6be7d",
    "new": "bce08cb2d663d420efc88c2a354575c0789616f5",
    "label": "f1f5644b6..bce08cb2d",
    "startDate": "2025-12-17",
    "endDate": "2025-12-18",
    "commitCount": 8,
    "generatedAt": "2025-12-18T00:05:17.121Z"
  },
  "contributors": [
    {
      "name": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "commits": 3
    },
    {
      "name": "Siyuan Wang",
      "email": "c.one@thrimbda.com",
      "commits": 2
    },
    {
      "name": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "commits": 3
    }
  ],
  "directoryAnalysis": {
    "topLevel": [
      {
        "dir": "apps",
        "fileCount": 66
      },
      {
        "dir": "libraries",
        "fileCount": 30
      },
      {
        "dir": "common",
        "fileCount": 24
      },
      {
        "dir": ".legion",
        "fileCount": 8
      },
      {
        "dir": ".claude",
        "fileCount": 3
      },
      {
        "dir": "distributions",
        "fileCount": 3
      },
      {
        "dir": "docs",
        "fileCount": 2
      },
      {
        "dir": "rush.json",
        "fileCount": 1
      }
    ],
    "projects": [
      {
        "project": "common",
        "fileCount": 24,
        "marker": null
      },
      {
        "project": "apps/virtual-exchange",
        "fileCount": 17,
        "marker": "package.json"
      },
      {
        "project": "libraries",
        "fileCount": 10,
        "marker": null
      },
      {
        "project": ".legion",
        "fileCount": 8,
        "marker": null
      },
      {
        "project": "libraries/exchange",
        "fileCount": 6,
        "marker": "package.json"
      },
      {
        "project": "libraries/data-account",
        "fileCount": 5,
        "marker": "package.json"
      },
      {
        "project": ".claude",
        "fileCount": 3,
        "marker": null
      },
      {
        "project": "apps/account-composer",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/agent",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/fund",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/risk-manager",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/trade-copier",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-aster",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-binance",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-bitget",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-ctp",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-gate",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-huobi",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-hyperliquid",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-okx-web3",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-okx",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-solana",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-turboflow",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "distributions/origin",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "libraries/account-info-resolver",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "libraries/agent",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "libraries/kernel",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "docs",
        "fileCount": 2,
        "marker": null
      },
      {
        "project": "apps",
        "fileCount": 1,
        "marker": null
      },
      {
        "project": "rush.json",
        "fileCount": 1,
        "marker": null
      }
    ],
    "markersUsed": [
      "package.json",
      "Cargo.toml",
      "go.mod",
      "requirements.txt",
      "pyproject.toml",
      "setup.py",
      "pom.xml",
      "build.gradle",
      "build.gradle.kts",
      "CMakeLists.txt",
      "Makefile",
      "pubspec.yaml",
      "mix.exs",
      "Gemfile",
      "composer.json"
    ]
  },
  "commits": [
    {
      "hash": "8a3e2452a61d6e08fd47957357f73c7921976e3c",
      "short": "8a3e2452a",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-17 08:13:30 +0800",
      "subject": "Remove @yuants/order library and associated configuration files (#2348)",
      "conventionalCommit": {
        "type": "other",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 0,
          "deletions": 1,
          "path": "apps/trade-copier/package.json",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/apps/trade-copier/package.json b/apps/trade-copier/package.json\nindex a0730a2b9..f2913e82a 100644\n--- a/apps/trade-copier/package.json\n+++ b/apps/trade-copier/package.json\n@@ -24 +23,0 @@\n-    \"@yuants/order\": \"workspace:*\",\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-trade-copier/2025-12-17-00-11.json",
          "changeType": "added",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/common/changes/@yuants/app-trade-copier/2025-12-17-00-11.json b/common/changes/@yuants/app-trade-copier/2025-12-17-00-11.json\nnew file mode 100644\nindex 000000000..47acaefc6\n--- /dev/null\n+++ b/common/changes/@yuants/app-trade-copier/2025-12-17-00-11.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-trade-copier\",\n+      \"comment\": \"remove deps\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-trade-copier\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 45,
          "path": "common/config/rush/pnpm-lock.yaml",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/common/config/rush/pnpm-lock.yaml b/common/config/rush/pnpm-lock.yaml\nindex ef2fa2bf3..e286183a1 100644\n--- a/common/config/rush/pnpm-lock.yaml\n+++ b/common/config/rush/pnpm-lock.yaml\n@@ -715 +714,0 @@ importers:\n-      '@yuants/order': workspace:*\n@@ -732 +730,0 @@ importers:\n-      '@yuants/order': link:../../libraries/order\n@@ -2125,43 +2122,0 @@ importers:\n-      typescript: 4.7.4\n-\n-  ../../libraries/order:\n-    specifiers:\n-      '@microsoft/api-extractor': ~7.30.0\n-      '@rushstack/heft': ~0.47.5\n-      '@rushstack/heft-jest-plugin': ~0.16.8\n-      '@rushstack/heft-node-rig': ~1.10.7\n-      '@types/heft-jest': 1.0.3\n-      '@types/json-schema': ~7.0.11\n-      '@types/node': '22'\n-      '@types/uuid': ~8.3.4\n-      '@yuants/data-account': workspace:*\n-      '@yuants/data-order': workspace:*\n-      '@yuants/data-product': workspace:*\n-      '@yuants/data-quote': workspace:*\n-      '@yuants/protocol': workspace:*\n-      '@yuants/sql': workspace:*\n-      '@yuants/tool-kit': workspace:*\n-      '@yuants/utils': workspace:*\n-      rxjs: ~7.5.6\n-      typescript: ~4.7.4\n-      uuid: ~8.3.2\n-    dependencies:\n-      '@yuants/data-account': link:../data-account\n-      '@yuants/data-order': link:../data-order\n-      '@yuants/data-product': link:../data-product\n-      '@yuants/data-quote': link:../data-quote\n-      '@yuants/protocol': link:../protocol\n-      '@yuants/sql': link:../sql\n-      '@yuants/utils': link:../utils\n-      rxjs: 7.5.7\n-      uuid: 8.3.2\n-    devDependencies:\n-      '@microsoft/api-extractor': 7.30.1\n-      '@rushstack/heft': 0.47.11\n-      '@rushstack/heft-jest-plugin': 0.16.8_cd919cf15781346720f8e992576a8e2b\n-      '@rushstack/heft-node-rig': 1.10.13_@rushstack+heft@0.47.11\n-      '@types/heft-jest': 1.0.3\n-      '@types/json-schema': 7.0.15\n-      '@types/node': 22.7.5\n-      '@types/uuid': 8.3.4\n-      '@yuants/tool-kit': link:../../tools/toolkit\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 1849,
          "path": "libraries/order/CHANGELOG.json",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/libraries/order/CHANGELOG.json b/libraries/order/CHANGELOG.json\ndeleted file mode 100644\nindex 0d9681356..000000000\n--- a/libraries/order/CHANGELOG.json\n+++ /dev/null\n@@ -1,1849 +0,0 @@\n-{\n-  \"name\": \"@yuants/order\",\n-  \"entries\": [\n-    {\n-      \"version\": \"0.3.57\",\n-      \"tag\": \"@yuants/order_v0.3.57\",\n-      \"date\": \"Tue, 16 Dec 2025 13:39:47 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.53.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.31`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.7.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.5.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.3.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.15.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.56\",\n-      \"tag\": \"@yuants/order_v0.3.56\",\n-      \"date\": \"Sat, 13 Dec 2025 15:59:30 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.3.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.55\",\n-      \"tag\": \"@yuants/order_v0.3.55\",\n-      \"date\": \"Thu, 11 Dec 2025 13:59:57 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.7.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.54\",\n-      \"tag\": \"@yuants/order_v0.3.54\",\n-      \"date\": \"Tue, 09 Dec 2025 16:52:23 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.10.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.53\",\n-      \"tag\": \"@yuants/order_v0.3.53\",\n-      \"date\": \"Sun, 07 Dec 2025 16:38:10 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.9.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.52\",\n-      \"tag\": \"@yuants/order_v0.3.52\",\n-      \"date\": \"Wed, 03 Dec 2025 10:25:12 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.5.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.51\",\n-      \"tag\": \"@yuants/order_v0.3.51\",\n-      \"date\": \"Sat, 29 Nov 2025 01:30:37 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.53.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.30`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.8.4`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.6.6`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.21`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.43`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.50\",\n-      \"tag\": \"@yuants/order_v0.3.50\",\n-      \"date\": \"Fri, 28 Nov 2025 14:37:43 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.53.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.29`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.8.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.6.5`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.20`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.42`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.14.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.49\",\n-      \"tag\": \"@yuants/order_v0.3.49\",\n-      \"date\": \"Tue, 25 Nov 2025 07:08:44 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.53.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.28`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.8.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.6.4`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.19`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.41`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.13.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.48\",\n-      \"tag\": \"@yuants/order_v0.3.48\",\n-      \"date\": \"Mon, 24 Nov 2025 11:58:37 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.52.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.27`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.8.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.6.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.18`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.40`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.12.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.47\",\n-      \"tag\": \"@yuants/order_v0.3.47\",\n-      \"date\": \"Mon, 24 Nov 2025 08:05:14 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.8.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.46\",\n-      \"tag\": \"@yuants/order_v0.3.46\",\n-      \"date\": \"Fri, 21 Nov 2025 22:22:24 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.52.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.26`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.7.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.6.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.17`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.39`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.45\",\n-      \"tag\": \"@yuants/order_v0.3.45\",\n-      \"date\": \"Fri, 21 Nov 2025 19:27:19 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.51.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.25`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.7.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.6.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.16`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.38`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.44\",\n-      \"tag\": \"@yuants/order_v0.3.44\",\n-      \"date\": \"Sun, 16 Nov 2025 22:36:18 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.7.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.6.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.43\",\n-      \"tag\": \"@yuants/order_v0.3.43\",\n-      \"date\": \"Sun, 16 Nov 2025 20:48:32 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.7.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.42\",\n-      \"tag\": \"@yuants/order_v0.3.42\",\n-      \"date\": \"Sat, 15 Nov 2025 23:00:39 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.16`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.5.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.41\",\n-      \"tag\": \"@yuants/order_v0.3.41\",\n-      \"date\": \"Fri, 14 Nov 2025 21:14:46 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.15`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.4.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.40\",\n-      \"tag\": \"@yuants/order_v0.3.40\",\n-      \"date\": \"Wed, 12 Nov 2025 21:50:44 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.50.4`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.24`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.14`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.12`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.15`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.37`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.39\",\n-      \"tag\": \"@yuants/order_v0.3.39\",\n-      \"date\": \"Wed, 12 Nov 2025 17:32:29 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.50.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.23`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.13`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.11`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.14`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.36`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.38\",\n-      \"tag\": \"@yuants/order_v0.3.38\",\n-      \"date\": \"Mon, 10 Nov 2025 15:12:36 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.50.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.22`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.12`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.10`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.13`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.35`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.11.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.37\",\n-      \"tag\": \"@yuants/order_v0.3.37\",\n-      \"date\": \"Mon, 10 Nov 2025 08:01:57 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.50.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.21`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.11`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.9`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.12`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.34`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.10.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/tool-kit\\\" to `0.2.1`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.36\",\n-      \"tag\": \"@yuants/order_v0.3.36\",\n-      \"date\": \"Sat, 25 Oct 2025 06:32:46 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.50.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.20`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.10`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.8`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.11`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.33`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.35\",\n-      \"tag\": \"@yuants/order_v0.3.35\",\n-      \"date\": \"Tue, 21 Oct 2025 11:23:00 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.49.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.19`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.9`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.7`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.10`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.32`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.10.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.34\",\n-      \"tag\": \"@yuants/order_v0.3.34\",\n-      \"date\": \"Tue, 21 Oct 2025 09:05:08 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.9`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.33\",\n-      \"tag\": \"@yuants/order_v0.3.33\",\n-      \"date\": \"Tue, 21 Oct 2025 07:18:10 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.8`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.32\",\n-      \"tag\": \"@yuants/order_v0.3.32\",\n-      \"date\": \"Sun, 19 Oct 2025 23:16:12 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.49.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.18`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.8`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.6`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.7`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.31`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.31\",\n-      \"tag\": \"@yuants/order_v0.3.31\",\n-      \"date\": \"Sun, 19 Oct 2025 22:06:19 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.48.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.17`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.7`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.5`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.6`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.30`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.30\",\n-      \"tag\": \"@yuants/order_v0.3.30\",\n-      \"date\": \"Sun, 19 Oct 2025 21:27:23 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.48.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.16`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.6`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.4`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.5`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.29`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.29\",\n-      \"tag\": \"@yuants/order_v0.3.29\",\n-      \"date\": \"Sun, 19 Oct 2025 18:33:32 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.47.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.15`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.5`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.4`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.28`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.28\",\n-      \"tag\": \"@yuants/order_v0.3.28\",\n-      \"date\": \"Sun, 19 Oct 2025 17:48:04 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.46.4`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.14`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.4`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.27`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.9.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.27\",\n-      \"tag\": \"@yuants/order_v0.3.27\",\n-      \"date\": \"Sat, 18 Oct 2025 04:14:30 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.46.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.13`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.26`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.26\",\n-      \"tag\": \"@yuants/order_v0.3.26\",\n-      \"date\": \"Thu, 16 Oct 2025 08:27:17 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.3.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.25\",\n-      \"tag\": \"@yuants/order_v0.3.25\",\n-      \"date\": \"Wed, 15 Oct 2025 17:40:04 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.46.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.12`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.18`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.25`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.24\",\n-      \"tag\": \"@yuants/order_v0.3.24\",\n-      \"date\": \"Wed, 15 Oct 2025 15:21:15 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.6.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.23\",\n-      \"tag\": \"@yuants/order_v0.3.23\",\n-      \"date\": \"Fri, 10 Oct 2025 06:03:57 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.4.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.22\",\n-      \"tag\": \"@yuants/order_v0.3.22\",\n-      \"date\": \"Sun, 05 Oct 2025 10:41:11 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.46.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.11`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.5.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.17`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.3.4`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.24`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.21\",\n-      \"tag\": \"@yuants/order_v0.3.21\",\n-      \"date\": \"Sat, 04 Oct 2025 21:07:38 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.46.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.10`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.5.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.16`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.3.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.23`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.20\",\n-      \"tag\": \"@yuants/order_v0.3.20\",\n-      \"date\": \"Sat, 04 Oct 2025 06:21:41 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.3.2`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.19\",\n-      \"tag\": \"@yuants/order_v0.3.19\",\n-      \"date\": \"Fri, 03 Oct 2025 04:17:01 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.45.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.9`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.5.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.15`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.3.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.22`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.18\",\n-      \"tag\": \"@yuants/order_v0.3.18\",\n-      \"date\": \"Thu, 02 Oct 2025 07:19:32 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.3.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.17\",\n-      \"tag\": \"@yuants/order_v0.3.17\",\n-      \"date\": \"Mon, 29 Sep 2025 02:52:01 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.5.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.16\",\n-      \"tag\": \"@yuants/order_v0.3.16\",\n-      \"date\": \"Sun, 28 Sep 2025 04:21:21 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.45.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.8`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.4.6`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.14`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.18`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.21`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.15\",\n-      \"tag\": \"@yuants/order_v0.3.15\",\n-      \"date\": \"Fri, 26 Sep 2025 07:29:31 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.44.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.7`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.4.5`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.13`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.17`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.20`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.14\",\n-      \"tag\": \"@yuants/order_v0.3.14\",\n-      \"date\": \"Sun, 21 Sep 2025 23:34:48 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.4.4`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.13\",\n-      \"tag\": \"@yuants/order_v0.3.13\",\n-      \"date\": \"Fri, 19 Sep 2025 05:01:03 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.43.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.6`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.4.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.12`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.16`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.19`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.12\",\n-      \"tag\": \"@yuants/order_v0.3.12\",\n-      \"date\": \"Thu, 18 Sep 2025 01:19:13 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.5`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.4.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.11`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.15`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.18`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.11\",\n-      \"tag\": \"@yuants/order_v0.3.11\",\n-      \"date\": \"Tue, 16 Sep 2025 15:38:41 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.42.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.4`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.4.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.10`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.14`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.17`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.8.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.10\",\n-      \"tag\": \"@yuants/order_v0.3.10\",\n-      \"date\": \"Mon, 15 Sep 2025 20:23:37 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.4.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.9\",\n-      \"tag\": \"@yuants/order_v0.3.9\",\n-      \"date\": \"Mon, 15 Sep 2025 13:09:36 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.42.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.14`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.9`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.13`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.16`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.8\",\n-      \"tag\": \"@yuants/order_v0.3.8\",\n-      \"date\": \"Fri, 12 Sep 2025 21:28:30 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.41.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.13`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.8`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.12`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.15`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.7\",\n-      \"tag\": \"@yuants/order_v0.3.7\",\n-      \"date\": \"Tue, 09 Sep 2025 13:23:41 GMT\",\n-      \"comments\": {\n-        \"patch\": [\n-          {\n-            \"comment\": \"refactor\"\n-          }\n-        ],\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.40.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.12`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.7`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.11`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.14`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.6\",\n-      \"tag\": \"@yuants/order_v0.3.6\",\n-      \"date\": \"Mon, 08 Sep 2025 04:07:02 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.11`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.5\",\n-      \"tag\": \"@yuants/order_v0.3.5\",\n-      \"date\": \"Sun, 07 Sep 2025 23:52:03 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.9.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.10`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.6`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.10`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.13`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.4\",\n-      \"tag\": \"@yuants/order_v0.3.4\",\n-      \"date\": \"Thu, 04 Sep 2025 15:24:17 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.39.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.8.7`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.9`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.5`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.9`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.12`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.7.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/tool-kit\\\" to `0.2.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.3\",\n-      \"tag\": \"@yuants/order_v0.3.3\",\n-      \"date\": \"Tue, 02 Sep 2025 01:40:20 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.39.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.8.6`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.8`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.4`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.8`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.11`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.7.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.2\",\n-      \"tag\": \"@yuants/order_v0.3.2\",\n-      \"date\": \"Sat, 30 Aug 2025 22:44:39 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.38.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.8.5`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.7`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.7`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.10`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.1\",\n-      \"tag\": \"@yuants/order_v0.3.1\",\n-      \"date\": \"Sun, 24 Aug 2025 23:08:59 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.6`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.3.0\",\n-      \"tag\": \"@yuants/order_v0.3.0\",\n-      \"date\": \"Sun, 24 Aug 2025 12:04:50 GMT\",\n-      \"comments\": {\n-        \"minor\": [\n-          {\n-            \"comment\": \"use MAKER order to reduce fee\"\n-          }\n-        ],\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.2.2\",\n-      \"tag\": \"@yuants/order_v0.2.2\",\n-      \"date\": \"Sat, 23 Aug 2025 20:08:09 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.37.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.8.4`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.5`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.6`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.9`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.6.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.2.1\",\n-      \"tag\": \"@yuants/order_v0.2.1\",\n-      \"date\": \"Thu, 21 Aug 2025 17:46:17 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.4`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.2.0\",\n-      \"tag\": \"@yuants/order_v0.2.0\",\n-      \"date\": \"Thu, 21 Aug 2025 08:06:02 GMT\",\n-      \"comments\": {\n-        \"minor\": [\n-          {\n-            \"comment\": \"refine\"\n-          }\n-        ],\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.1.7\",\n-      \"tag\": \"@yuants/order_v0.1.7\",\n-      \"date\": \"Wed, 20 Aug 2025 15:24:20 GMT\",\n-      \"comments\": {\n-        \"patch\": [\n-          {\n-            \"comment\": \"support of close position\"\n-          }\n-        ],\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.1.6\",\n-      \"tag\": \"@yuants/order_v0.1.6\",\n-      \"date\": \"Tue, 19 Aug 2025 05:51:53 GMT\",\n-      \"comments\": {\n-        \"patch\": [\n-          {\n-            \"comment\": \"refactor: order controller refine\"\n-          }\n-        ],\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.8.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.5`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.8`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.1.5\",\n-      \"tag\": \"@yuants/order_v0.1.5\",\n-      \"date\": \"Tue, 12 Aug 2025 08:51:40 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.4`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.1.4\",\n-      \"tag\": \"@yuants/order_v0.1.4\",\n-      \"date\": \"Sat, 09 Aug 2025 05:56:01 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.2.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.1.3\",\n-      \"tag\": \"@yuants/order_v0.1.3\",\n-      \"date\": \"Wed, 06 Aug 2025 16:50:42 GMT\",\n-      \"comments\": {\n-        \"patch\": [\n-          {\n-            \"comment\": \"fix bugs\"\n-          }\n-        ],\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.3.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.1.2\",\n-      \"tag\": \"@yuants/order_v0.1.2\",\n-      \"date\": \"Wed, 06 Aug 2025 15:08:09 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.2.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.1.2`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.1.1\",\n-      \"tag\": \"@yuants/order_v0.1.1\",\n-      \"date\": \"Tue, 05 Aug 2025 16:36:43 GMT\",\n-      \"comments\": {\n-        \"none\": [\n-          {\n-            \"comment\": \"Bump Version\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.37.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.8.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.2.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.1.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.3`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.7`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.5.0`\"\n-          }\n-        ]\n-      }\n-    },\n-    {\n-      \"version\": \"0.1.0\",\n-      \"tag\": \"@yuants/order_v0.1.0\",\n-      \"date\": \"Fri, 01 Aug 2025 13:20:25 GMT\",\n-      \"comments\": {\n-        \"minor\": [\n-          {\n-            \"comment\": \"implement rolling order controller\"\n-          }\n-        ],\n-        \"patch\": [\n-          {\n-            \"comment\": \"fix order id\"\n-          },\n-          {\n-            \"comment\": \"apply for new data-order pkg\"\n-          }\n-        ],\n-        \"dependency\": [\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/protocol\\\" to `0.37.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/sql\\\" to `0.8.1`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.2.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-order\\\" to `0.1.0`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-product\\\" to `0.2.2`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/data-quote\\\" to `0.2.6`\"\n-          },\n-          {\n-            \"comment\": \"Updating dependency \\\"@yuants/utils\\\" to `0.4.1`\"\n-          }\n-        ]\n-      }\n-    }\n-  ]\n-}\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 368,
          "path": "libraries/order/CHANGELOG.md",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/libraries/order/CHANGELOG.md b/libraries/order/CHANGELOG.md\ndeleted file mode 100644\nindex a7fcce163..000000000\n--- a/libraries/order/CHANGELOG.md\n+++ /dev/null\n@@ -1,368 +0,0 @@\n-# Change Log - @yuants/order\n-\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n-\n-## 0.3.57\n-Tue, 16 Dec 2025 13:39:47 GMT\n-\n-_Version update only_\n-\n-## 0.3.56\n-Sat, 13 Dec 2025 15:59:30 GMT\n-\n-_Version update only_\n-\n-## 0.3.55\n-Thu, 11 Dec 2025 13:59:57 GMT\n-\n-_Version update only_\n-\n-## 0.3.54\n-Tue, 09 Dec 2025 16:52:23 GMT\n-\n-_Version update only_\n-\n-## 0.3.53\n-Sun, 07 Dec 2025 16:38:10 GMT\n-\n-_Version update only_\n-\n-## 0.3.52\n-Wed, 03 Dec 2025 10:25:12 GMT\n-\n-_Version update only_\n-\n-## 0.3.51\n-Sat, 29 Nov 2025 01:30:37 GMT\n-\n-_Version update only_\n-\n-## 0.3.50\n-Fri, 28 Nov 2025 14:37:43 GMT\n-\n-_Version update only_\n-\n-## 0.3.49\n-Tue, 25 Nov 2025 07:08:44 GMT\n-\n-_Version update only_\n-\n-## 0.3.48\n-Mon, 24 Nov 2025 11:58:37 GMT\n-\n-_Version update only_\n-\n-## 0.3.47\n-Mon, 24 Nov 2025 08:05:14 GMT\n-\n-_Version update only_\n-\n-## 0.3.46\n-Fri, 21 Nov 2025 22:22:24 GMT\n-\n-_Version update only_\n-\n-## 0.3.45\n-Fri, 21 Nov 2025 19:27:19 GMT\n-\n-_Version update only_\n-\n-## 0.3.44\n-Sun, 16 Nov 2025 22:36:18 GMT\n-\n-_Version update only_\n-\n-## 0.3.43\n-Sun, 16 Nov 2025 20:48:32 GMT\n-\n-_Version update only_\n-\n-## 0.3.42\n-Sat, 15 Nov 2025 23:00:39 GMT\n-\n-_Version update only_\n-\n-## 0.3.41\n-Fri, 14 Nov 2025 21:14:46 GMT\n-\n-_Version update only_\n-\n-## 0.3.40\n-Wed, 12 Nov 2025 21:50:44 GMT\n-\n-_Version update only_\n-\n-## 0.3.39\n-Wed, 12 Nov 2025 17:32:29 GMT\n-\n-_Version update only_\n-\n-## 0.3.38\n-Mon, 10 Nov 2025 15:12:36 GMT\n-\n-_Version update only_\n-\n-## 0.3.37\n-Mon, 10 Nov 2025 08:01:57 GMT\n-\n-_Version update only_\n-\n-## 0.3.36\n-Sat, 25 Oct 2025 06:32:46 GMT\n-\n-_Version update only_\n-\n-## 0.3.35\n-Tue, 21 Oct 2025 11:23:00 GMT\n-\n-_Version update only_\n-\n-## 0.3.34\n-Tue, 21 Oct 2025 09:05:08 GMT\n-\n-_Version update only_\n-\n-## 0.3.33\n-Tue, 21 Oct 2025 07:18:10 GMT\n-\n-_Version update only_\n-\n-## 0.3.32\n-Sun, 19 Oct 2025 23:16:12 GMT\n-\n-_Version update only_\n-\n-## 0.3.31\n-Sun, 19 Oct 2025 22:06:19 GMT\n-\n-_Version update only_\n-\n-## 0.3.30\n-Sun, 19 Oct 2025 21:27:23 GMT\n-\n-_Version update only_\n-\n-## 0.3.29\n-Sun, 19 Oct 2025 18:33:32 GMT\n-\n-_Version update only_\n-\n-## 0.3.28\n-Sun, 19 Oct 2025 17:48:04 GMT\n-\n-_Version update only_\n-\n-## 0.3.27\n-Sat, 18 Oct 2025 04:14:30 GMT\n-\n-_Version update only_\n-\n-## 0.3.26\n-Thu, 16 Oct 2025 08:27:17 GMT\n-\n-_Version update only_\n-\n-## 0.3.25\n-Wed, 15 Oct 2025 17:40:04 GMT\n-\n-_Version update only_\n-\n-## 0.3.24\n-Wed, 15 Oct 2025 15:21:15 GMT\n-\n-_Version update only_\n-\n-## 0.3.23\n-Fri, 10 Oct 2025 06:03:57 GMT\n-\n-_Version update only_\n-\n-## 0.3.22\n-Sun, 05 Oct 2025 10:41:11 GMT\n-\n-_Version update only_\n-\n-## 0.3.21\n-Sat, 04 Oct 2025 21:07:38 GMT\n-\n-_Version update only_\n-\n-## 0.3.20\n-Sat, 04 Oct 2025 06:21:41 GMT\n-\n-_Version update only_\n-\n-## 0.3.19\n-Fri, 03 Oct 2025 04:17:01 GMT\n-\n-_Version update only_\n-\n-## 0.3.18\n-Thu, 02 Oct 2025 07:19:32 GMT\n-\n-_Version update only_\n-\n-## 0.3.17\n-Mon, 29 Sep 2025 02:52:01 GMT\n-\n-_Version update only_\n-\n-## 0.3.16\n-Sun, 28 Sep 2025 04:21:21 GMT\n-\n-_Version update only_\n-\n-## 0.3.15\n-Fri, 26 Sep 2025 07:29:31 GMT\n-\n-_Version update only_\n-\n-## 0.3.14\n-Sun, 21 Sep 2025 23:34:48 GMT\n-\n-_Version update only_\n-\n-## 0.3.13\n-Fri, 19 Sep 2025 05:01:03 GMT\n-\n-_Version update only_\n-\n-## 0.3.12\n-Thu, 18 Sep 2025 01:19:13 GMT\n-\n-_Version update only_\n-\n-## 0.3.11\n-Tue, 16 Sep 2025 15:38:41 GMT\n-\n-_Version update only_\n-\n-## 0.3.10\n-Mon, 15 Sep 2025 20:23:37 GMT\n-\n-_Version update only_\n-\n-## 0.3.9\n-Mon, 15 Sep 2025 13:09:36 GMT\n-\n-_Version update only_\n-\n-## 0.3.8\n-Fri, 12 Sep 2025 21:28:30 GMT\n-\n-_Version update only_\n-\n-## 0.3.7\n-Tue, 09 Sep 2025 13:23:41 GMT\n-\n-### Patches\n-\n-- refactor\n-\n-## 0.3.6\n-Mon, 08 Sep 2025 04:07:02 GMT\n-\n-_Version update only_\n-\n-## 0.3.5\n-Sun, 07 Sep 2025 23:52:03 GMT\n-\n-_Version update only_\n-\n-## 0.3.4\n-Thu, 04 Sep 2025 15:24:17 GMT\n-\n-_Version update only_\n-\n-## 0.3.3\n-Tue, 02 Sep 2025 01:40:20 GMT\n-\n-_Version update only_\n-\n-## 0.3.2\n-Sat, 30 Aug 2025 22:44:39 GMT\n-\n-_Version update only_\n-\n-## 0.3.1\n-Sun, 24 Aug 2025 23:08:59 GMT\n-\n-_Version update only_\n-\n-## 0.3.0\n-Sun, 24 Aug 2025 12:04:50 GMT\n-\n-### Minor changes\n-\n-- use MAKER order to reduce fee\n-\n-## 0.2.2\n-Sat, 23 Aug 2025 20:08:09 GMT\n-\n-_Version update only_\n-\n-## 0.2.1\n-Thu, 21 Aug 2025 17:46:17 GMT\n-\n-_Version update only_\n-\n-## 0.2.0\n-Thu, 21 Aug 2025 08:06:02 GMT\n-\n-### Minor changes\n-\n-- refine\n-\n-## 0.1.7\n-Wed, 20 Aug 2025 15:24:20 GMT\n-\n-### Patches\n-\n-- support of close position\n-\n-## 0.1.6\n-Tue, 19 Aug 2025 05:51:53 GMT\n-\n-### Patches\n-\n-- refactor: order controller refine\n-\n-## 0.1.5\n-Tue, 12 Aug 2025 08:51:40 GMT\n-\n-_Version update only_\n-\n-## 0.1.4\n-Sat, 09 Aug 2025 05:56:01 GMT\n-\n-_Version update only_\n-\n-## 0.1.3\n-Wed, 06 Aug 2025 16:50:42 GMT\n-\n-### Patches\n-\n-- fix bugs\n-\n-## 0.1.2\n-Wed, 06 Aug 2025 15:08:09 GMT\n-\n-_Version update only_\n-\n-## 0.1.1\n-Tue, 05 Aug 2025 16:36:43 GMT\n-\n-_Version update only_\n-\n-## 0.1.0\n-Fri, 01 Aug 2025 13:20:25 GMT\n-\n-### Minor changes\n-\n-- implement rolling order controller\n-\n-### Patches\n-\n-- fix order id\n-- apply for new data-order pkg\n-\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 411,
          "path": "libraries/order/api-extractor.json",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/libraries/order/api-extractor.json b/libraries/order/api-extractor.json\ndeleted file mode 100644\nindex 62f4fd324..000000000\n--- a/libraries/order/api-extractor.json\n+++ /dev/null\n@@ -1,411 +0,0 @@\n-/**\n- * Config file for API Extractor.  For more info, please visit: https://api-extractor.com\n- */\n-{\n-  \"$schema\": \"https://developer.microsoft.com/json-schemas/api-extractor/v7/api-extractor.schema.json\",\n-\n-  /**\n-   * Optionally specifies another JSON config file that this file extends from.  This provides a way for\n-   * standard settings to be shared across multiple projects.\n-   *\n-   * If the path starts with \"./\" or \"../\", the path is resolved relative to the folder of the file that contains\n-   * the \"extends\" field.  Otherwise, the first path segment is interpreted as an NPM package name, and will be\n-   * resolved using NodeJS require().\n-   *\n-   * SUPPORTED TOKENS: none\n-   * DEFAULT VALUE: \"\"\n-   */\n-  // \"extends\": \"./shared/api-extractor-base.json\"\n-  // \"extends\": \"my-package/include/api-extractor-base.json\"\n-\n-  /**\n-   * Determines the \"<projectFolder>\" token that can be used with other config file settings.  The project folder\n-   * typically contains the tsconfig.json and package.json config files, but the path is user-defined.\n-   *\n-   * The path is resolved relative to the folder of the config file that contains the setting.\n-   *\n-   * The default value for \"projectFolder\" is the token \"<lookup>\", which means the folder is determined by traversing\n-   * parent folders, starting from the folder containing api-extractor.json, and stopping at the first folder\n-   * that contains a tsconfig.json file.  If a tsconfig.json file cannot be found in this way, then an error\n-   * will be reported.\n-   *\n-   * SUPPORTED TOKENS: <lookup>\n-   * DEFAULT VALUE: \"<lookup>\"\n-   */\n-  // \"projectFolder\": \"..\",\n-\n-  /**\n-   * (REQUIRED) Specifies the .d.ts file to be used as the starting point for analysis.  API Extractor\n-   * analyzes the symbols exported by this module.\n-   *\n-   * The file extension must be \".d.ts\" and not \".ts\".\n-   *\n-   * The path is resolved relative to the folder of the config file that contains the setting; to change this,\n-   * prepend a folder token such as \"<projectFolder>\".\n-   *\n-   * SUPPORTED TOKENS: <projectFolder>, <packageName>, <unscopedPackageName>\n-   */\n-  \"mainEntryPointFilePath\": \"<projectFolder>/lib/index.d.ts\",\n-\n-  /**\n-   * A list of NPM package names whose exports should be treated as part of this package.\n-   *\n-   * For example, suppose that Webpack is used to generate a distributed bundle for the project \"library1\",\n-   * and another NPM package \"library2\" is embedded in this bundle.  Some types from library2 may become part\n-   * of the exported API for library1, but by default API Extractor would generate a .d.ts rollup that explicitly\n-   * imports library2.  To avoid this, we can specify:\n-   *\n-   *   \"bundledPackages\": [ \"library2\" ],\n-   *\n-   * This would direct API Extractor to embed those types directly in the .d.ts rollup, as if they had been\n-   * local files for library1.\n-   */\n-  \"bundledPackages\": [],\n-\n-  /**\n-   * Specifies what type of newlines API Extractor should use when writing output files.  By default, the output files\n-   * will be written with Windows-style newlines.  To use POSIX-style newlines, specify \"lf\" instead.\n-   * To use the OS's default newline kind, specify \"os\".\n-   *\n-   * DEFAULT VALUE: \"crlf\"\n-   */\n-  // \"newlineKind\": \"crlf\",\n-\n-  /**\n-   * Set to true when invoking API Extractor's test harness. When `testMode` is true, the `toolVersion` field in the\n-   * .api.json file is assigned an empty string to prevent spurious diffs in output files tracked for tests.\n-   *\n-   * DEFAULT VALUE: \"false\"\n-   */\n-  // \"testMode\": false,\n-\n-  /**\n-   * Specifies how API Extractor sorts members of an enum when generating the .api.json file. By default, the output\n-   * files will be sorted alphabetically, which is \"by-name\". To keep the ordering in the source code, specify\n-   * \"preserve\".\n-   *\n-   * DEFAULT VALUE: \"by-name\"\n-   */\n-  // \"enumMemberOrder\": \"by-name\",\n-\n-  /**\n-   * Determines how the TypeScript compiler engine will be invoked by API Extractor.\n-   */\n-  \"compiler\": {\n-    /**\n-     * Specifies the path to the tsconfig.json file to be used by API Extractor when analyzing the project.\n-     *\n-     * The path is resolved relative to the folder of the config file that contains the setting; to change this,\n-     * prepend a folder token such as \"<projectFolder>\".\n-     *\n-     * Note: This setting will be ignored if \"overrideTsconfig\" is used.\n-     *\n-     * SUPPORTED TOKENS: <projectFolder>, <packageName>, <unscopedPackageName>\n-     * DEFAULT VALUE: \"<projectFolder>/tsconfig.json\"\n-     */\n-    // \"tsconfigFilePath\": \"<projectFolder>/tsconfig.json\",\n-    /**\n-     * Provides a compiler configuration that will be used instead of reading the tsconfig.json file from disk.\n-     * The object must conform to the TypeScript tsconfig schema:\n-     *\n-     * http://json.schemastore.org/tsconfig\n-     *\n-     * If omitted, then the tsconfig.json file will be read from the \"projectFolder\".\n-     *\n-     * DEFAULT VALUE: no overrideTsconfig section\n-     */\n-    // \"overrideTsconfig\": {\n-    //   . . .\n-    // }\n-    /**\n-     * This option causes the compiler to be invoked with the --skipLibCheck option. This option is not recommended\n-     * and may cause API Extractor to produce incomplete or incorrect declarations, but it may be required when\n-     * dependencies contain declarations that are incompatible with the TypeScript engine that API Extractor uses\n-     * for its analysis.  Where possible, the underlying issue should be fixed rather than relying on skipLibCheck.\n-     *\n-     * DEFAULT VALUE: false\n-     */\n-    // \"skipLibCheck\": true,\n-  },\n-\n-  /**\n-   * Configures how the API report file (*.api.md) will be generated.\n-   */\n-  \"apiReport\": {\n-    /**\n-     * (REQUIRED) Whether to generate an API report.\n-     */\n-    \"enabled\": true\n-\n-    /**\n-     * The filename for the API report files.  It will be combined with \"reportFolder\" or \"reportTempFolder\" to produce\n-     * a full file path.\n-     *\n-     * The file extension should be \".api.md\", and the string should not contain a path separator such as \"\\\" or \"/\".\n-     *\n-     * SUPPORTED TOKENS: <packageName>, <unscopedPackageName>\n-     * DEFAULT VALUE: \"<unscopedPackageName>.api.md\"\n-     */\n-    // \"reportFileName\": \"<unscopedPackageName>.api.md\",\n-\n-    /**\n-     * Specifies the folder where the API report file is written.  The file name portion is determined by\n-     * the \"reportFileName\" setting.\n-     *\n-     * The API report file is normally tracked by Git.  Changes to it can be used to trigger a branch policy,\n-     * e.g. for an API review.\n-     *\n-     * The path is resolved relative to the folder of the config file that contains the setting; to change this,\n-     * prepend a folder token such as \"<projectFolder>\".\n-     *\n-     * SUPPORTED TOKENS: <projectFolder>, <packageName>, <unscopedPackageName>\n-     * DEFAULT VALUE: \"<projectFolder>/temp/\"\n-     */\n-    // \"reportFolder\": \"<projectFolder>/temp/\",\n-\n-    /**\n-     * Specifies the folder where the temporary report file is written.  The file name portion is determined by\n-     * the \"reportFileName\" setting.\n-     *\n-     * After the temporary file is written to disk, it is compared with the file in the \"reportFolder\".\n-     * If they are different, a production build will fail.\n-     *\n-     * The path is resolved relative to the folder of the config file that contains the setting; to change this,\n-     * prepend a folder token such as \"<projectFolder>\".\n-     *\n-     * SUPPORTED TOKENS: <projectFolder>, <packageName>, <unscopedPackageName>\n-     * DEFAULT VALUE: \"<projectFolder>/temp/\"\n-     */\n-    // \"reportTempFolder\": \"<projectFolder>/temp/\",\n-\n-    /**\n-     * Whether \"forgotten exports\" should be included in the API report file. Forgotten exports are declarations\n-     * flagged with `ae-forgotten-export` warnings. See https://api-extractor.com/pages/messages/ae-forgotten-export/ to\n-     * learn more.\n-     *\n-     * DEFAULT VALUE: \"false\"\n-     */\n-    // \"includeForgottenExports\": false\n-  },\n-\n-  /**\n-   * Configures how the doc model file (*.api.json) will be generated.\n-   */\n-  \"docModel\": {\n-    /**\n-     * (REQUIRED) Whether to generate a doc model file.\n-     */\n-    \"enabled\": true\n-\n-    /**\n-     * The output path for the doc model file.  The file extension should be \".api.json\".\n-     *\n-     * The path is resolved relative to the folder of the config file that contains the setting; to change this,\n-     * prepend a folder token such as \"<projectFolder>\".\n-     *\n-     * SUPPORTED TOKENS: <projectFolder>, <packageName>, <unscopedPackageName>\n-     * DEFAULT VALUE: \"<projectFolder>/temp/<unscopedPackageName>.api.json\"\n-     */\n-    // \"apiJsonFilePath\": \"<projectFolder>/temp/<unscopedPackageName>.api.json\",\n-\n-    /**\n-     * Whether \"forgotten exports\" should be included in the doc model file. Forgotten exports are declarations\n-     * flagged with `ae-forgotten-export` warnings. See https://api-extractor.com/pages/messages/ae-forgotten-export/ to\n-     * learn more.\n-     *\n-     * DEFAULT VALUE: \"false\"\n-     */\n-    // \"includeForgottenExports\": false\n-  },\n-\n-  /**\n-   * Configures how the .d.ts rollup file will be generated.\n-   */\n-  \"dtsRollup\": {\n-    /**\n-     * (REQUIRED) Whether to generate the .d.ts rollup file.\n-     */\n-    \"enabled\": true\n-\n-    /**\n-     * Specifies the output path for a .d.ts rollup file to be generated without any trimming.\n-     * This file will include all declarations that are exported by the main entry point.\n-     *\n-     * If the path is an empty string, then this file will not be written.\n-     *\n-     * The path is resolved relative to the folder of the config file that contains the setting; to change this,\n-     * prepend a folder token such as \"<projectFolder>\".\n-     *\n-     * SUPPORTED TOKENS: <projectFolder>, <packageName>, <unscopedPackageName>\n-     * DEFAULT VALUE: \"<projectFolder>/dist/<unscopedPackageName>.d.ts\"\n-     */\n-    // \"untrimmedFilePath\": \"<projectFolder>/dist/<unscopedPackageName>.d.ts\",\n-\n-    /**\n-     * Specifies the output path for a .d.ts rollup file to be generated with trimming for an \"alpha\" release.\n-     * This file will include only declarations that are marked as \"@public\", \"@beta\", or \"@alpha\".\n-     *\n-     * The path is resolved relative to the folder of the config file that contains the setting; to change this,\n-     * prepend a folder token such as \"<projectFolder>\".\n-     *\n-     * SUPPORTED TOKENS: <projectFolder>, <packageName>, <unscopedPackageName>\n-     * DEFAULT VALUE: \"\"\n-     */\n-    // \"alphaTrimmedFilePath\": \"<projectFolder>/dist/<unscopedPackageName>-alpha.d.ts\",\n-\n-    /**\n-     * Specifies the output path for a .d.ts rollup file to be generated with trimming for a \"beta\" release.\n-     * This file will include only declarations that are marked as \"@public\" or \"@beta\".\n-     *\n-     * The path is resolved relative to the folder of the config file that contains the setting; to change this,\n-     * prepend a folder token such as \"<projectFolder>\".\n-     *\n-     * SUPPORTED TOKENS: <projectFolder>, <packageName>, <unscopedPackageName>\n-     * DEFAULT VALUE: \"\"\n-     */\n-    // \"betaTrimmedFilePath\": \"<projectFolder>/dist/<unscopedPackageName>-beta.d.ts\",\n-\n-    /**\n-     * Specifies the output path for a .d.ts rollup file to be generated with trimming for a \"public\" release.\n-     * This file will include only declarations that are marked as \"@public\".\n-     *\n-     * If the path is an empty string, then this file will not be written.\n-     *\n-     * The path is resolved relative to the folder of the config file that contains the setting; to change this,\n-     * prepend a folder token such as \"<projectFolder>\".\n-     *\n-     * SUPPORTED TOKENS: <projectFolder>, <packageName>, <unscopedPackageName>\n-     * DEFAULT VALUE: \"\"\n-     */\n-    // \"publicTrimmedFilePath\": \"<projectFolder>/dist/<unscopedPackageName>-public.d.ts\",\n-\n-    /**\n-     * When a declaration is trimmed, by default it will be replaced by a code comment such as\n-     * \"Excluded from this release type: exampleMember\".  Set \"omitTrimmingComments\" to true to remove the\n-     * declaration completely.\n-     *\n-     * DEFAULT VALUE: false\n-     */\n-    // \"omitTrimmingComments\": true\n-  },\n-\n-  /**\n-   * Configures how the tsdoc-metadata.json file will be generated.\n-   */\n-  \"tsdocMetadata\": {\n-    /**\n-     * Whether to generate the tsdoc-metadata.json file.\n-     *\n-     * DEFAULT VALUE: true\n-     */\n-    // \"enabled\": true,\n-    /**\n-     * Specifies where the TSDoc metadata file should be written.\n-     *\n-     * The path is resolved relative to the folder of the config file that contains the setting; to change this,\n-     * prepend a folder token such as \"<projectFolder>\".\n-     *\n-     * The default value is \"<lookup>\", which causes the path to be automatically inferred from the \"tsdocMetadata\",\n-     * \"typings\" or \"main\" fields of the project's package.json.  If none of these fields are set, the lookup\n-     * falls back to \"tsdoc-metadata.json\" in the package folder.\n-     *\n-     * SUPPORTED TOKENS: <projectFolder>, <packageName>, <unscopedPackageName>\n-     * DEFAULT VALUE: \"<lookup>\"\n-     */\n-    // \"tsdocMetadataFilePath\": \"<projectFolder>/dist/tsdoc-metadata.json\"\n-  },\n-\n-  /**\n-   * Configures how API Extractor reports error and warning messages produced during analysis.\n-   *\n-   * There are three sources of messages:  compiler messages, API Extractor messages, and TSDoc messages.\n-   */\n-  \"messages\": {\n-    /**\n-     * Configures handling of diagnostic messages reported by the TypeScript compiler engine while analyzing\n-     * the input .d.ts files.\n-     *\n-     * TypeScript message identifiers start with \"TS\" followed by an integer.  For example: \"TS2551\"\n-     *\n-     * DEFAULT VALUE:  A single \"default\" entry with logLevel=warning.\n-     */\n-    \"compilerMessageReporting\": {\n-      /**\n-       * Configures the default routing for messages that don't match an explicit rule in this table.\n-       */\n-      \"default\": {\n-        /**\n-         * Specifies whether the message should be written to the the tool's output log.  Note that\n-         * the \"addToApiReportFile\" property may supersede this option.\n-         *\n-         * Possible values: \"error\", \"warning\", \"none\"\n-         *\n-         * Errors cause the build to fail and return a nonzero exit code.  Warnings cause a production build fail\n-         * and return a nonzero exit code.  For a non-production build (e.g. when \"api-extractor run\" includes\n-         * the \"--local\" option), the warning is displayed but the build will not fail.\n-         *\n-         * DEFAULT VALUE: \"warning\"\n-         */\n-        \"logLevel\": \"warning\"\n-\n-        /**\n-         * When addToApiReportFile is true:  If API Extractor is configured to write an API report file (.api.md),\n-         * then the message will be written inside that file; otherwise, the message is instead logged according to\n-         * the \"logLevel\" option.\n-         *\n-         * DEFAULT VALUE: false\n-         */\n-        // \"addToApiReportFile\": false\n-      }\n-\n-      // \"TS2551\": {\n-      //   \"logLevel\": \"warning\",\n-      //   \"addToApiReportFile\": true\n-      // },\n-      //\n-      // . . .\n-    },\n-\n-    /**\n-     * Configures handling of messages reported by API Extractor during its analysis.\n-     *\n-     * API Extractor message identifiers start with \"ae-\".  For example: \"ae-extra-release-tag\"\n-     *\n-     * DEFAULT VALUE: See api-extractor-defaults.json for the complete table of extractorMessageReporting mappings\n-     */\n-    \"extractorMessageReporting\": {\n-      \"default\": {\n-        \"logLevel\": \"warning\"\n-        // \"addToApiReportFile\": false\n-      }\n-\n-      // \"ae-extra-release-tag\": {\n-      //   \"logLevel\": \"warning\",\n-      //   \"addToApiReportFile\": true\n-      // },\n-      //\n-      // . . .\n-    },\n-\n-    /**\n-     * Configures handling of messages reported by the TSDoc parser when analyzing code comments.\n-     *\n-     * TSDoc message identifiers start with \"tsdoc-\".  For example: \"tsdoc-link-tag-unescaped-text\"\n-     *\n-     * DEFAULT VALUE:  A single \"default\" entry with logLevel=warning.\n-     */\n-    \"tsdocMessageReporting\": {\n-      \"default\": {\n-        \"logLevel\": \"warning\"\n-        // \"addToApiReportFile\": false\n-      }\n-\n-      // \"tsdoc-link-tag-unescaped-text\": {\n-      //   \"logLevel\": \"warning\",\n-      //   \"addToApiReportFile\": true\n-      // },\n-      //\n-      // . . .\n-    }\n-  }\n-}\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 3,
          "path": "libraries/order/config/jest.config.json",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/libraries/order/config/jest.config.json b/libraries/order/config/jest.config.json\ndeleted file mode 100644\nindex 4bb17bde3..000000000\n--- a/libraries/order/config/jest.config.json\n+++ /dev/null\n@@ -1,3 +0,0 @@\n-{\n-  \"extends\": \"@rushstack/heft-node-rig/profiles/default/config/jest.config.json\"\n-}\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 18,
          "path": "libraries/order/config/rig.json",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/libraries/order/config/rig.json b/libraries/order/config/rig.json\ndeleted file mode 100644\nindex f6c7b5537..000000000\n--- a/libraries/order/config/rig.json\n+++ /dev/null\n@@ -1,18 +0,0 @@\n-// The \"rig.json\" file directs tools to look for their config files in an external package.\n-// Documentation for this system: https://www.npmjs.com/package/@rushstack/rig-package\n-{\n-  \"$schema\": \"https://developer.microsoft.com/json-schemas/rig-package/rig.schema.json\",\n-\n-  /**\n-   * (Required) The name of the rig package to inherit from.\n-   * It should be an NPM package name with the \"-rig\" suffix.\n-   */\n-  \"rigPackageName\": \"@rushstack/heft-node-rig\"\n-\n-  /**\n-   * (Optional) Selects a config profile from the rig package.  The name must consist of\n-   * lowercase alphanumeric words separated by hyphens, for example \"sample-profile\".\n-   * If omitted, then the \"default\" profile will be used.\"\n-   */\n-  // \"rigProfile\": \"your-profile-name\"\n-}\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 87,
          "path": "libraries/order/config/typescript.json",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/libraries/order/config/typescript.json b/libraries/order/config/typescript.json\ndeleted file mode 100644\nindex 854907e8a..000000000\n--- a/libraries/order/config/typescript.json\n+++ /dev/null\n@@ -1,87 +0,0 @@\n-/**\n- * Configures the TypeScript plugin for Heft.  This plugin also manages linting.\n- */\n-{\n-  \"$schema\": \"https://developer.microsoft.com/json-schemas/heft/typescript.schema.json\",\n-\n-  /**\n-   * Optionally specifies another JSON config file that this file extends from. This provides a way for standard\n-   * settings to be shared across multiple projects.\n-   */\n-  // \"extends\": \"base-project/config/typescript.json\",\n-\n-  /**\n-   * Can be set to \"copy\" or \"hardlink\". If set to \"copy\", copy files from cache.\n-   * If set to \"hardlink\", files will be hardlinked to the cache location.\n-   * This option is useful when producing a tarball of build output as TAR files don't\n-   * handle these hardlinks correctly. \"hardlink\" is the default behavior.\n-   */\n-  // \"copyFromCacheMode\": \"copy\",\n-\n-  /**\n-   * If provided, emit these module kinds in addition to the modules specified in the tsconfig.\n-   * Note that this option only applies to the main tsconfig.json configuration.\n-   */\n-  \"additionalModuleKindsToEmit\": [\n-    {\n-      \"moduleKind\": \"esnext\",\n-      \"outFolderName\": \"dist\"\n-    }\n-    // {\n-    //   /**\n-    //    * (Required) Must be one of \"commonjs\", \"amd\", \"umd\", \"system\", \"es2015\", \"esnext\"\n-    //    */\n-    //  \"moduleKind\": \"amd\",\n-    //\n-    //   /**\n-    //    * (Required) The name of the folder where the output will be written.\n-    //    */\n-    //    \"outFolderName\": \"lib-amd\"\n-    // }\n-  ],\n-\n-  /**\n-   * Specifies the intermediary folder that tests will use.  Because Jest uses the\n-   * Node.js runtime to execute tests, the module format must be CommonJS.\n-   *\n-   * The default value is \"lib\".\n-   */\n-  // \"emitFolderNameForTests\": \"lib-commonjs\",\n-\n-  /**\n-   * If set to \"true\", the TSlint task will not be invoked.\n-   */\n-  // \"disableTslint\": true,\n-\n-  /**\n-   * Set this to change the maximum number of file handles that will be opened concurrently for writing.\n-   * The default is 50.\n-   */\n-  // \"maxWriteParallelism\": 50,\n-\n-  /**\n-   * Configures additional file types that should be copied into the TypeScript compiler's emit folders, for example\n-   * so that these files can be resolved by import statements.\n-   */\n-  \"staticAssetsToCopy\": {\n-    /**\n-     * File extensions that should be copied from the src folder to the destination folder(s).\n-     */\n-    // \"fileExtensions\": [\n-    //   \".json\", \".css\"\n-    // ],\n-    /**\n-     * Glob patterns that should be explicitly included.\n-     */\n-    // \"includeGlobs\": [\n-    //   \"some/path/*.js\"\n-    // ],\n-    /**\n-     * Glob patterns that should be explicitly excluded. This takes precedence over globs listed\n-     * in \"includeGlobs\" and files that match the file extensions provided in \"fileExtensions\".\n-     */\n-    // \"excludeGlobs\": [\n-    //   \"some/path/*.css\"\n-    // ]\n-  }\n-}\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 21,
          "path": "libraries/order/etc/order.api.md",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/libraries/order/etc/order.api.md b/libraries/order/etc/order.api.md\ndeleted file mode 100644\nindex aaa5ee900..000000000\n--- a/libraries/order/etc/order.api.md\n+++ /dev/null\n@@ -1,21 +0,0 @@\n-## API Report File for \"@yuants/order\"\r\n-\r\n-> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).\r\n-\r\n-```ts\r\n-\r\n-import { IProduct } from '@yuants/data-product';\r\n-import { Observable } from 'rxjs';\r\n-import { Terminal } from '@yuants/protocol';\r\n-\r\n-// @public\r\n-export const limitOrderController: (terminal: Terminal, theProduct: IProduct, target: {\r\n-    account_id: string;\r\n-    product_id: string;\r\n-    direction: string;\r\n-    volume: number;\r\n-}) => Observable<void>;\r\n-\r\n-// (No @packageDocumentation comment for this package)\r\n-\r\n-```\r\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 41,
          "path": "libraries/order/package.json",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/libraries/order/package.json b/libraries/order/package.json\ndeleted file mode 100644\nindex 5369ebcd2..000000000\n--- a/libraries/order/package.json\n+++ /dev/null\n@@ -1,41 +0,0 @@\n-{\n-  \"name\": \"@yuants/order\",\n-  \"version\": \"0.3.57\",\n-  \"main\": \"lib/index.js\",\n-  \"module\": \"dist/index.js\",\n-  \"files\": [\n-    \"dist\",\n-    \"lib\",\n-    \"temp\"\n-  ],\n-  \"scripts\": {\n-    \"build\": \"heft test --clean && api-extractor run --local && yuan-toolkit post-build\"\n-  },\n-  \"publishConfig\": {\n-    \"registry\": \"https://registry.npmjs.org\",\n-    \"access\": \"public\"\n-  },\n-  \"devDependencies\": {\n-    \"@yuants/tool-kit\": \"workspace:*\",\n-    \"@microsoft/api-extractor\": \"~7.30.0\",\n-    \"@rushstack/heft\": \"~0.47.5\",\n-    \"@rushstack/heft-jest-plugin\": \"~0.16.8\",\n-    \"@rushstack/heft-node-rig\": \"~1.10.7\",\n-    \"@types/heft-jest\": \"1.0.3\",\n-    \"@types/json-schema\": \"~7.0.11\",\n-    \"@types/node\": \"22\",\n-    \"@types/uuid\": \"~8.3.4\",\n-    \"typescript\": \"~4.7.4\"\n-  },\n-  \"dependencies\": {\n-    \"@yuants/protocol\": \"workspace:*\",\n-    \"@yuants/sql\": \"workspace:*\",\n-    \"@yuants/data-account\": \"workspace:*\",\n-    \"@yuants/data-order\": \"workspace:*\",\n-    \"@yuants/data-product\": \"workspace:*\",\n-    \"@yuants/data-quote\": \"workspace:*\",\n-    \"@yuants/utils\": \"workspace:*\",\n-    \"rxjs\": \"~7.5.6\",\n-    \"uuid\": \"~8.3.2\"\n-  }\n-}\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 348,
          "path": "libraries/order/src/index.ts",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/libraries/order/src/index.ts b/libraries/order/src/index.ts\ndeleted file mode 100644\nindex 6a564762d..000000000\n--- a/libraries/order/src/index.ts\n+++ /dev/null\n@@ -1,348 +0,0 @@\n-import { IPosition, useAccountInfo } from '@yuants/data-account';\n-import { IOrder } from '@yuants/data-order';\n-import { IProduct } from '@yuants/data-product';\n-import { IQuote } from '@yuants/data-quote';\n-import { Terminal } from '@yuants/protocol';\n-import { escapeSQL, requestSQL } from '@yuants/sql';\n-import { formatTime } from '@yuants/utils';\n-import {\n-  defer,\n-  filter,\n-  firstValueFrom,\n-  map,\n-  mergeMap,\n-  Observable,\n-  repeat,\n-  retry,\n-  shareReplay,\n-  Subject,\n-  tap,\n-  timer,\n-} from 'rxjs';\n-\n-const queryOrder = (terminal: Terminal, account_id: string, order_id: string, status?: string) =>\n-  firstValueFrom(\n-    defer(() =>\n-      requestSQL<IOrder[]>(\n-        terminal,\n-        `select * from \"order\" where account_id = ${escapeSQL(account_id)} and order_id = ${escapeSQL(\n-          order_id,\n-        )} ${status ? ` and status = ${escapeSQL(status)}` : ''}`,\n-      ),\n-    ).pipe(\n-      //\n-      repeat({ delay: 1000 }),\n-      retry({ delay: 1000 }),\n-      filter((x) => x.length > 0),\n-      map((x) => x[0]),\n-      tap({\n-        next: (order) => {\n-          console.info(\n-            formatTime(Date.now()),\n-            'LimitOrderController',\n-            `QueryOrderSuccess ${order.account_id} ${order.order_id} ${order.order_status}`,\n-          );\n-        },\n-      }),\n-    ),\n-  );\n-\n-interface IControllerContext {\n-  account_id: string | undefined;\n-  theOrder: IOrder | undefined;\n-  thePosition: IPosition | undefined;\n-  theProduct: IProduct | undefined;\n-  quote: IQuote | undefined;\n-}\n-\n-// \n-const createOrder = (\n-  account_id: string,\n-  order_id: string | undefined,\n-  thePosition: IPosition | undefined,\n-  quote: IQuote,\n-  target: {\n-    account_id: string;\n-    product_id: string;\n-    direction: string;\n-    volume: number;\n-  },\n-): IOrder => {\n-  const volume = target.volume - (thePosition?.volume || 0);\n-  const direction =\n-    volume > 0\n-      ? target.direction === 'LONG'\n-        ? 'OPEN_LONG'\n-        : 'OPEN_SHORT'\n-      : target.direction === 'LONG'\n-      ? 'CLOSE_LONG'\n-      : 'CLOSE_SHORT';\n-  const price =\n-    volume > 0\n-      ? target.direction === 'LONG'\n-        ? +quote.bid_price\n-        : +quote.ask_price\n-      : target.direction === 'LONG'\n-      ? +quote.ask_price\n-      : +quote.bid_price;\n-\n-  return {\n-    order_id,\n-    account_id,\n-    product_id: target.product_id,\n-    position_id: thePosition ? thePosition.position_id : `${target.product_id}-${target.direction}`,\n-    order_type: 'MAKER',\n-    order_direction: direction,\n-    volume: Math.abs(volume),\n-    price,\n-  };\n-};\n-\n-/**\n- * Limit Order Controller\n- *\n- * @public\n- */\n-export const limitOrderController = (\n-  terminal: Terminal,\n-  theProduct: IProduct,\n-  target: {\n-    account_id: string;\n-    product_id: string;\n-    direction: string;\n-    volume: number;\n-  },\n-): Observable<void> => {\n-  return new Observable<void>((subscriber) => {\n-    const controllerCtx: IControllerContext = {\n-      account_id: undefined,\n-      theOrder: undefined,\n-      thePosition: undefined,\n-      theProduct: undefined,\n-      quote: undefined,\n-    };\n-\n-    const accountInfo$ = useAccountInfo(terminal, target.account_id);\n-    const quotes$ = defer(() =>\n-      requestSQL<IQuote[]>(\n-        terminal,\n-        `select * from quote where datasource_id = ${escapeSQL(\n-          theProduct.datasource_id,\n-        )} and product_id = ${escapeSQL(target.product_id)} order by updated_at desc limit 1`,\n-      ),\n-    ).pipe(\n-      repeat({ delay: 1000 }),\n-      retry({ delay: 1000 }),\n-      shareReplay({\n-        bufferSize: 1,\n-        refCount: true,\n-      }),\n-    );\n-\n-    const startState$ = new Subject<void>();\n-    const completeState$ = new Subject<void>();\n-    const distributeState$ = new Subject<void>();\n-    const toSubmitState$ = new Subject<void>();\n-    const toModifyState$ = new Subject<void>();\n-\n-    startState$.subscribe(() => {\n-      console.debug(formatTime(Date.now()), 'LimitOrderController', `StartState`, JSON.stringify(target));\n-    });\n-\n-    startState$.subscribe(() => {\n-      distributeState$.next();\n-    });\n-\n-    distributeState$.subscribe(() => {\n-      console.debug(\n-        formatTime(Date.now()),\n-        'LimitOrderController',\n-        `DistributeState`,\n-        JSON.stringify(target),\n-      );\n-    });\n-\n-    distributeState$.subscribe(() => {\n-      subscriber.next();\n-    });\n-\n-    distributeState$\n-      .pipe(\n-        //\n-        mergeMap(() =>\n-          defer(async () => {\n-            const accountInfo = await firstValueFrom(accountInfo$);\n-            const quotes = await firstValueFrom(quotes$);\n-            if (quotes.length === 0) {\n-              throw new Error(\n-                `LimitOrderController No quotes found for ${theProduct.datasource_id} and ${target.product_id}`,\n-              );\n-            }\n-            const quote = quotes[0];\n-            const thePosition = accountInfo.positions.find(\n-              (p) => p.product_id === target.product_id && p.direction === target.direction,\n-            );\n-            controllerCtx.account_id = accountInfo.account_id;\n-            controllerCtx.theProduct = theProduct;\n-            controllerCtx.quote = quote;\n-            controllerCtx.thePosition = thePosition;\n-\n-            // 1. \n-            if (thePosition && thePosition.volume === target.volume) {\n-              completeState$.next();\n-              return;\n-            }\n-\n-            // 2. \n-            if (\n-              (controllerCtx.theOrder == null || controllerCtx.theOrder.order_status !== 'ACCEPTED') &&\n-              // \n-              ((controllerCtx.thePosition?.volume || 0) < target.volume ||\n-                // \n-                (controllerCtx.thePosition?.volume || 0) > target.volume)\n-            ) {\n-              toSubmitState$.next();\n-              return;\n-            }\n-\n-            // 3. \n-            if (\n-              controllerCtx.theOrder != null &&\n-              // \n-              ((controllerCtx.thePosition?.volume || 0) + controllerCtx.theOrder.volume < target.volume ||\n-                // \n-                (controllerCtx.thePosition?.volume || 0) + controllerCtx.theOrder.volume > target.volume)\n-            ) {\n-              toModifyState$.next();\n-              return;\n-            }\n-\n-            // 4. \n-            if (\n-              controllerCtx.theOrder != null &&\n-              (((controllerCtx.theOrder.order_direction === 'CLOSE_SHORT' ||\n-                controllerCtx.theOrder.order_direction === 'OPEN_LONG') &&\n-                controllerCtx.theOrder.price! < +quote.bid_price! - theProduct.price_step! * 3) ||\n-                ((controllerCtx.theOrder.order_direction === 'CLOSE_LONG' ||\n-                  controllerCtx.theOrder.order_direction === 'OPEN_SHORT') &&\n-                  controllerCtx.theOrder.price! > +quote.ask_price! + theProduct.price_step! * 3))\n-            ) {\n-              toModifyState$.next();\n-              return;\n-            }\n-\n-            await firstValueFrom(timer(100));\n-            distributeState$.next();\n-          }),\n-        ),\n-      )\n-      .subscribe(() => {});\n-\n-    toSubmitState$.subscribe(() => {\n-      console.debug(formatTime(Date.now()), 'LimitOrderController', `ToSubmitState`, JSON.stringify(target));\n-    });\n-\n-    toSubmitState$\n-      .pipe(\n-        //\n-        mergeMap(() =>\n-          defer(async () => {\n-            const order = createOrder(\n-              controllerCtx.account_id!,\n-              undefined,\n-              controllerCtx.thePosition!,\n-              controllerCtx.quote!,\n-              target,\n-            );\n-            const res = await terminal.client.requestForResponse<IOrder, { order_id?: string }>(\n-              'SubmitOrder',\n-              order,\n-            );\n-\n-            if (res.code !== 0 || !res.data?.order_id) {\n-              console.error(formatTime(Date.now()), 'LimitOrderController', 'Failed to submit order', res);\n-              return;\n-            }\n-\n-            const the_order_id = res.data.order_id;\n-            controllerCtx.theOrder = await queryOrder(terminal, controllerCtx.account_id!, the_order_id);\n-\n-            distributeState$.next();\n-          }),\n-        ),\n-      )\n-      .subscribe();\n-\n-    toModifyState$.subscribe(() => {\n-      console.debug(formatTime(Date.now()), 'LimitOrderController', `ToModifyState`, JSON.stringify(target));\n-    });\n-\n-    toModifyState$\n-      .pipe(\n-        //\n-        mergeMap(() =>\n-          defer(async () => {\n-            const order = createOrder(\n-              controllerCtx.account_id!,\n-              controllerCtx.theOrder!.order_id,\n-              controllerCtx.thePosition!,\n-              controllerCtx.quote!,\n-              target,\n-            );\n-            try {\n-              await terminal.client.requestForResponse('ModifyOrder', order);\n-              controllerCtx.theOrder = await queryOrder(terminal, controllerCtx.account_id!, order.order_id!);\n-            } catch (e) {\n-              await terminal.client.requestForResponse('CancelOrder', {\n-                account_id: order.account_id,\n-                order_id: controllerCtx.theOrder!.order_id!,\n-                product_id: order.product_id,\n-              });\n-              await queryOrder(terminal, controllerCtx.account_id!, order.order_id!, 'CANCELLED');\n-              const res = await terminal.client.requestForResponse<IOrder, { order_id?: string }>(\n-                'SubmitOrder',\n-                order,\n-              );\n-              if (res.code !== 0 || !res.data?.order_id) {\n-                console.error(formatTime(Date.now()), 'LimitOrderController', 'Failed to submit order', res);\n-                return;\n-              }\n-              const the_order_id = res.data.order_id;\n-              controllerCtx.theOrder = await queryOrder(terminal, controllerCtx.account_id!, the_order_id);\n-            }\n-            distributeState$.next();\n-          }),\n-        ),\n-      )\n-      .subscribe();\n-\n-    completeState$.subscribe(() => {\n-      console.debug(formatTime(Date.now()), 'LimitOrderController', `CompleteState`, JSON.stringify(target));\n-    });\n-\n-    completeState$.subscribe(() => {\n-      subscriber.complete();\n-    });\n-\n-    startState$.next();\n-\n-    return () => {\n-      if (controllerCtx.theOrder != null) {\n-        terminal.client\n-          .requestForResponse('CancelOrder', {\n-            account_id: controllerCtx.account_id!,\n-            order_id: controllerCtx.theOrder.order_id!,\n-            product_id: target.product_id,\n-          })\n-          .catch((err) =>\n-            console.error(formatTime(Date.now()), 'LimitOrderController', 'CleanupError:', err),\n-          );\n-      }\n-      startState$.complete();\n-      completeState$.complete();\n-      distributeState$.complete();\n-      toSubmitState$.complete();\n-      toModifyState$.complete();\n-    };\n-  });\n-};\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 6,
          "path": "libraries/order/tsconfig.json",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/libraries/order/tsconfig.json b/libraries/order/tsconfig.json\ndeleted file mode 100644\nindex 22f94ca28..000000000\n--- a/libraries/order/tsconfig.json\n+++ /dev/null\n@@ -1,6 +0,0 @@\n-{\n-  \"extends\": \"./node_modules/@rushstack/heft-node-rig/profiles/default/tsconfig-base.json\",\n-  \"compilerOptions\": {\n-    \"types\": [\"heft-jest\", \"node\"]\n-  }\n-}\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 5,
          "path": "rush.json",
          "changeType": "deleted",
          "patch": "commit 8a3e2452a61d6e08fd47957357f73c7921976e3c\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 08:13:30 2025 +0800\n\n    Remove @yuants/order library and associated configuration files (#2348)\n    \n    - Deleted CHANGELOG.md, api-extractor.json, jest.config.json, rig.json, typescript.json, order.api.md, package.json, index.ts, tsconfig.json from the libraries/order directory.\n    - Removed @yuants/order package from rush.json.\n\ndiff --git a/rush.json b/rush.json\nindex 3beeb8956..6c91b9dba 100644\n--- a/rush.json\n+++ b/rush.json\n@@ -460,5 +459,0 @@\n-    {\n-      \"packageName\": \"@yuants/order\",\n-      \"projectFolder\": \"libraries/order\",\n-      \"shouldPublish\": true\n-    },\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "961f628e33c3ed71147bda291ae62bb3c8eaf3e2",
      "short": "961f628e3",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-17 09:28:37 +0800",
      "subject": "feat: add daily git change report for 2025-12-17 - 3 commits (#2349)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 9852,
          "deletions": 0,
          "path": "docs/reports/git-changes-2025-12-17.json",
          "changeType": "unknown",
          "patch": null,
          "codeSnippets": []
        },
        {
          "additions": 141,
          "deletions": 0,
          "path": "docs/reports/git-changes-report-2025-12-17.md",
          "changeType": "added",
          "patch": "commit 961f628e33c3ed71147bda291ae62bb3c8eaf3e2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 09:28:37 2025 +0800\n\n    feat: add daily git change report for 2025-12-17 - 3 commits (#2349)\n    \n    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/docs/reports/git-changes-report-2025-12-17.md b/docs/reports/git-changes-report-2025-12-17.md\nnew file mode 100644\nindex 000000000..23be056ad\n--- /dev/null\n+++ b/docs/reports/git-changes-report-2025-12-17.md\n@@ -0,0 +1,141 @@\n+# Git 9ac0f22c2..f1f5644b6\n+\n+## 1. \n+\n+- ****2025-12-16  2025-12-16\n+- ****3 \n+- ****humblelittlec1[bot] (2 commits), Siyuan Wang (1 commits)\n+- ****apps (115 files), libraries (67 files), common (64 files)\n+- ****2025-12-17T00:05:04.873Z\n+- ****Level 2\n+\n+## 2. \n+\n+### 2.1 \n+\n+- ****`apps/virtual-exchange/src/quote/`, `libraries/exchange/`, `.legion/tasks/task-vex-quote-routing/`\n+- ****\n+  - `b3d247706``feat(vex): Implement quote routing in virtual-exchange service (#2341)`\n+- ****\n+  - [`upstream-routing.ts:1-452`](apps/virtual-exchange/src/quote/upstream-routing.ts#L1-L452)\n+  - [`service.ts:1-96`](apps/virtual-exchange/src/quote/service.ts#L1-L96)\n+  - [`quote.ts:1-110`](libraries/exchange/src/quote.ts#L1-L110)\n+  - [`prefix-matcher.ts:1-13`](apps/virtual-exchange/src/quote/prefix-matcher.ts#L1-L13)ID\n+  - [`request-key.ts:1-24`](apps/virtual-exchange/src/quote/request-key.ts#L1-L24)\n+- ****\n+  VEXID\n+\n+### 2.2 Git\n+\n+- ****`docs/reports/`\n+- ****\n+  - `0f60840b3``feat: add daily git change report for 2025-12-16 - 5 commits (#2346)`\n+- ****\n+  - `docs/reports/git-changes-2025-12-16.json`2025-12-16GitJSON\n+  - `docs/reports/git-changes-report-2025-12-16.md`2025-12-16GitMarkdown\n+- ****\n+  GitJSONMarkdown\n+\n+### 2.3 \n+\n+- ****`apps/*/`, `common/changes/`\n+- ****\n+  - `f1f5644b6``chore: bump version (#2347)`\n+- ****\n+  - 252`package.json``CHANGELOG`\n+  - `common/changes/@yuants/app-virtual-exchange/2025-12-16-05-06.json`\n+  - `common/changes/@yuants/exchange/2025-12-16-05-06.json`\n+- ****\n+  \n+\n+## 3. \n+\n+|  |  |  |  |\n+| ---- | ------ | ------------ | -------- |\n+| humblelittlec1[bot] | 2 |  | `0f60840b3`, `f1f5644b6` |\n+| Siyuan Wang | 1 |  | `b3d247706` |\n+\n+## 4. \n+\n+### \n+\n+- **API**[`quote.ts:50-59`](libraries/exchange/src/quote.ts#L50-L59)  `parseQuoteServiceMetadataFromSchema` \n+- ****[`service.ts:65-95`](apps/virtual-exchange/src/quote/service.ts#L65-L95)  `VEX/QueryQuotes` \n+- **** `IQuoteServiceRequestByVEX` VEX\n+\n+### \n+\n+- ****`.legion/config.json` \n+- **** `.legion/tasks/task-vex-quote-routing/` \n+- **** `AGENTS.md` \n+\n+### \n+\n+- ****[`upstream-routing.ts:178-228`](apps/virtual-exchange/src/quote/upstream-routing.ts#L178-L228) 132\n+- ****[`upstream-routing.ts:237-251`](apps/virtual-exchange/src/quote/upstream-routing.ts#L237-L251) \n+- ****[`upstream-routing.ts:259-276`](apps/virtual-exchange/src/quote/upstream-routing.ts#L259-L276) \n+\n+### \n+\n+- ****\n+- ****[`upstream-routing.ts:76-128`](apps/virtual-exchange/src/quote/upstream-routing.ts#L76-L128) \n+\n+## 5. \n+\n+### b3d247706 Siyuan Wang | 2025-12-16 | \n+\n+****`feat(vex): Implement quote routing in virtual-exchange service (#2341)`\n+\n+****\n+\n+- ****[`upstream-routing.ts:1-452`](apps/virtual-exchange/src/quote/upstream-routing.ts#L1-L452) - \n+- ****[`service.ts:47-63`](apps/virtual-exchange/src/quote/service.ts#L47-L63) - \n+- ****[`prefix-matcher.ts:1-13`](apps/virtual-exchange/src/quote/prefix-matcher.ts#L1-L13) - \n+- ****[`request-key.ts:1-24`](apps/virtual-exchange/src/quote/request-key.ts#L1-L24) - FNV-1a 64\n+- ****[`quote.ts:50-59`](libraries/exchange/src/quote.ts#L50-L59) - \n+- ****`.legion/tasks/task-vex-quote-routing/` - \n+\n+**/**\n+\n+- **** `@yuants/exchange`  `IQuoteServiceMetadata`  `parseQuoteServiceMetadataFromSchema` \n+- ****JSON Schema\n+- ****321\n+\n+****\n+\n+### 0f60840b3 humblelittlec1[bot] | 2025-12-16 | \n+\n+****`feat: add daily git change report for 2025-12-16 - 5 commits (#2346)`\n+\n+****\n+\n+- ****`docs/reports/git-changes-2025-12-16.json` - JSON5\n+- ****`docs/reports/git-changes-report-2025-12-16.md` - Markdown\n+\n+**/**\n+\n+- ****JSON\n+- ****\n+\n+****\n+\n+### f1f5644b6 humblelittlec1[bot] | 2025-12-16 | \n+\n+****`chore: bump version (#2347)`\n+\n+****\n+\n+- ****252 `package.json`  `CHANGELOG` \n+- ****`common/changes/@yuants/app-virtual-exchange/2025-12-16-05-06.json` - \n+- ****`common/changes/@yuants/exchange/2025-12-16-05-06.json` - \n+\n+**/**\n+\n+- ****\n+- ****\n+\n+****\n+\n+---\n+\n+**** `docs/reports/git-changes-2025-12-17.json`  git-changes-reporter skill JSON\n\\ No newline at end of file\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "56a6b7c06483da8aeb3098bcbc90d8ffa7cc5b9d",
      "short": "56a6b7c06",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-17 10:26:41 +0800",
      "subject": "fix: reading causes writing issue (#2350)",
      "conventionalCommit": {
        "type": "fix",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 264,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/quote/__tests__/implementations.test.ts",
          "changeType": "added",
          "patch": "commit 56a6b7c06483da8aeb3098bcbc90d8ffa7cc5b9d\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:26:41 2025 +0800\n\n    fix: reading causes writing issue (#2350)\n\ndiff --git a/apps/virtual-exchange/src/quote/__tests__/implementations.test.ts b/apps/virtual-exchange/src/quote/__tests__/implementations.test.ts\nnew file mode 100644\nindex 000000000..98406aed5\n--- /dev/null\n+++ b/apps/virtual-exchange/src/quote/__tests__/implementations.test.ts\n@@ -0,0 +1,264 @@\n+import { implementations } from '../implementations';\n+import { IQuoteKey, IQuoteUpdateAction } from '../types';\n+\n+// \n+describe('IQuoteState implementations', () => {\n+  // \n+  Object.entries(implementations).forEach(([name, createQuoteState]) => {\n+    describe(`${name} implementation`, () => {\n+      let quoteState: ReturnType<typeof createQuoteState>;\n+\n+      beforeEach(() => {\n+        quoteState = createQuoteState();\n+      });\n+\n+      //  1: \n+      it('should have empty initial state', () => {\n+        const dumped = quoteState.dumpAsObject();\n+        expect(dumped).toEqual({});\n+      });\n+\n+      //  2: \n+      it('should update single field for single product', () => {\n+        const updateAction: IQuoteUpdateAction = {\n+          product_001: {\n+            last_price: ['100.5', 1000],\n+          },\n+        };\n+\n+        quoteState.update(updateAction);\n+\n+        //  getValueTuple \n+        const tuple = quoteState.getValueTuple('product_001', 'last_price');\n+        expect(tuple).toEqual(['100.5', 1000]);\n+\n+        //  dumpAsObject\n+        const dumped = quoteState.dumpAsObject();\n+        expect(dumped).toEqual(updateAction);\n+      });\n+\n+      //  3: \n+      it('should update multiple fields for multiple products', () => {\n+        const updateAction: IQuoteUpdateAction = {\n+          product_001: {\n+            last_price: ['100.5', 1000],\n+            ask_price: ['101.0', 1001],\n+          },\n+          product_002: {\n+            bid_price: ['99.0', 1002],\n+            ask_volume: ['500', 1003],\n+          },\n+        };\n+\n+        quoteState.update(updateAction);\n+\n+        // \n+        expect(quoteState.getValueTuple('product_001', 'last_price')).toEqual(['100.5', 1000]);\n+        expect(quoteState.getValueTuple('product_001', 'ask_price')).toEqual(['101.0', 1001]);\n+        expect(quoteState.getValueTuple('product_002', 'bid_price')).toEqual(['99.0', 1002]);\n+        expect(quoteState.getValueTuple('product_002', 'ask_volume')).toEqual(['500', 1003]);\n+\n+        //  dumpAsObject\n+        const dumped = quoteState.dumpAsObject();\n+        expect(dumped).toEqual(updateAction);\n+      });\n+\n+      //  4: \n+      it('should overwrite with newer timestamp, ignore older timestamp', () => {\n+        // \n+        quoteState.update({\n+          product_001: {\n+            last_price: ['100.0', 1000],\n+          },\n+        });\n+\n+        // \n+        quoteState.update({\n+          product_001: {\n+            last_price: ['200.0', 2000],\n+          },\n+        });\n+\n+        expect(quoteState.getValueTuple('product_001', 'last_price')).toEqual(['200.0', 2000]);\n+\n+        // \n+        quoteState.update({\n+          product_001: {\n+            last_price: ['300.0', 1500], //  1500  2000 \n+          },\n+        });\n+\n+        // \n+        expect(quoteState.getValueTuple('product_001', 'last_price')).toEqual(['200.0', 2000]);\n+      });\n+\n+      //  5:  undefined\n+      it('should return undefined for non-existent product or field', () => {\n+        expect(quoteState.getValueTuple('non_existent', 'last_price')).toBeUndefined();\n+\n+        // \n+        quoteState.update({\n+          product_001: {\n+            ask_price: ['101.0', 1000],\n+          },\n+        });\n+\n+        expect(quoteState.getValueTuple('product_001', 'last_price')).toBeUndefined();\n+        expect(quoteState.getValueTuple('product_002', 'last_price')).toBeUndefined();\n+      });\n+\n+      //  6: filter \n+      it('should filter data by product_ids, fields, and updated_at', () => {\n+        // \n+        quoteState.update({\n+          product_001: {\n+            last_price: ['100.0', 1000],\n+            ask_price: ['101.0', 2000], // \n+            bid_price: ['99.0', 500], // \n+          },\n+          product_002: {\n+            last_price: ['200.0', 1500],\n+            ask_price: ['201.0', 2500],\n+          },\n+          product_003: {\n+            last_price: ['300.0', 1200],\n+          },\n+        });\n+\n+        //  1:  1000\n+        const result1 = quoteState.filter(['product_001', 'product_002'], ['last_price', 'ask_price'], 1000);\n+\n+        expect(result1).toEqual({\n+          product_001: {\n+            last_price: ['100.0', 1000],\n+            ask_price: ['101.0', 2000],\n+          },\n+          product_002: {\n+            last_price: ['200.0', 1500],\n+            ask_price: ['201.0', 2500],\n+          },\n+        });\n+\n+        //  2:  1500\n+        const result2 = quoteState.filter(\n+          ['product_001', 'product_002', 'product_003'],\n+          ['last_price', 'bid_price'],\n+          1500,\n+        );\n+\n+        expect(result2).toEqual({\n+          product_001: {\n+            // last_price  1000 < 1500\n+            // bid_price  500 < 1500\n+          },\n+          product_002: {\n+            last_price: ['200.0', 1500],\n+          },\n+          product_003: {\n+            // last_price  1200 < 1500\n+          },\n+        });\n+\n+        //  3: \n+        const result3 = quoteState.filter(['non_existent'], ['last_price'], 0);\n+\n+        expect(result3).toEqual({\n+          non_existent: {},\n+        });\n+      });\n+\n+      //  7: \n+      it('should handle empty update action', () => {\n+        // \n+        quoteState.update({\n+          product_001: {\n+            last_price: ['100.0', 1000],\n+          },\n+        });\n+\n+        const beforeDump = quoteState.dumpAsObject();\n+\n+        // \n+        quoteState.update({});\n+\n+        const afterDump = quoteState.dumpAsObject();\n+        expect(afterDump).toEqual(beforeDump);\n+      });\n+\n+      //  8: \n+      it('should not affect other fields when updating partial fields', () => {\n+        // \n+        quoteState.update({\n+          product_001: {\n+            last_price: ['100.0', 1000],\n+            ask_price: ['101.0', 1001],\n+          },\n+        });\n+\n+        // \n+        quoteState.update({\n+          product_001: {\n+            last_price: ['200.0', 2000],\n+          },\n+        });\n+\n+        // last_price ask_price \n+        expect(quoteState.getValueTuple('product_001', 'last_price')).toEqual(['200.0', 2000]);\n+        expect(quoteState.getValueTuple('product_001', 'ask_price')).toEqual(['101.0', 1001]);\n+      });\n+\n+      //  9: \n+      it('should be idempotent for duplicate updates', () => {\n+        const updateAction: IQuoteUpdateAction = {\n+          product_001: {\n+            last_price: ['100.0', 1000],\n+          },\n+        };\n+\n+        // \n+        quoteState.update(updateAction);\n+        quoteState.update(updateAction);\n+        quoteState.update(updateAction);\n+\n+        // \n+        expect(quoteState.dumpAsObject()).toEqual(updateAction);\n+      });\n+\n+      //  10:  IQuoteKey \n+      it('should handle all IQuoteKey field types', () => {\n+        const allFields: IQuoteKey[] = [\n+          'last_price',\n+          'ask_price',\n+          'ask_volume',\n+          'bid_volume',\n+          'bid_price',\n+          'interest_rate_short',\n+          'open_interest',\n+          'interest_rate_prev_settled_at',\n+          'interest_rate_next_settled_at',\n+          'interest_rate_long',\n+        ];\n+\n+        const updateAction: IQuoteUpdateAction = {\n+          product_001: {},\n+        };\n+\n+        // \n+        allFields.forEach((field, index) => {\n+          updateAction['product_001'][field] = [`value_${index}`, 1000 + index];\n+        });\n+\n+        quoteState.update(updateAction);\n+\n+        // \n+        allFields.forEach((field, index) => {\n+          expect(quoteState.getValueTuple('product_001', field)).toEqual([`value_${index}`, 1000 + index]);\n+        });\n+\n+        //  dumpAsObject\n+        const dumped = quoteState.dumpAsObject();\n+        expect(dumped).toEqual(updateAction);\n+      });\n+    });\n+  });\n+});\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "quoteState",
              "code": "let quoteState: ReturnType<typeof createQuoteState>;\n\nbeforeEach(() => {\n  quoteState = createQuoteState();\n});\n\n//  1: \nit('should have empty initial state', () => {",
              "lineStart": 9,
              "lineEnd": 16
            },
            {
              "type": "function",
              "name": "dumped",
              "code": "  const dumped = quoteState.dumpAsObject();\n  expect(dumped).toEqual({});\n});\n\n//  2: \nit('should update single field for single product', () => {",
              "lineStart": 17,
              "lineEnd": 22
            },
            {
              "type": "function",
              "name": "updateAction",
              "code": "const updateAction: IQuoteUpdateAction = {\n  product_001: {\n    last_price: ['100.5', 1000],\n  },\n};\n\nquoteState.update(updateAction);\n\n//  getValueTuple ",
              "lineStart": 23,
              "lineEnd": 31
            },
            {
              "type": "function",
              "name": "tuple",
              "code": "const tuple = quoteState.getValueTuple('product_001', 'last_price');\nexpect(tuple).toEqual(['100.5', 1000]);\n\n//  dumpAsObject",
              "lineStart": 32,
              "lineEnd": 35
            },
            {
              "type": "function",
              "name": "dumped",
              "code": "  const dumped = quoteState.dumpAsObject();\n  expect(dumped).toEqual(updateAction);\n});\n\n//  3: \nit('should update multiple fields for multiple products', () => {",
              "lineStart": 36,
              "lineEnd": 41
            },
            {
              "type": "function",
              "name": "updateAction",
              "code": "const updateAction: IQuoteUpdateAction = {\n  product_001: {\n    last_price: ['100.5', 1000],\n    ask_price: ['101.0', 1001],\n  },\n  product_002: {\n    bid_price: ['99.0', 1002],\n    ask_volume: ['500', 1003],\n  },\n};\n\nquoteState.update(updateAction);\n\n// \nexpect(quoteState.getValueTuple('product_001', 'last_price')).toEqual(['100.5', 1000]);",
              "lineStart": 42,
              "lineEnd": 61
            },
            {
              "type": "function",
              "name": "dumped",
              "code": "  const dumped = quoteState.dumpAsObject();\n  expect(dumped).toEqual(updateAction);\n});\n\n//  4: \nit('should overwrite with newer timestamp, ignore older timestamp', () => {\n  // \n  quoteState.update({\n    product_001: {\n      last_price: ['100.0', 1000],\n    },\n  });\n\n  // \n  quoteState.update({",
              "lineStart": 62,
              "lineEnd": 128
            },
            {
              "type": "function",
              "name": "result1",
              "code": "const result1 = quoteState.filter(['product_001', 'product_002'], ['last_price', 'ask_price'], 1000);\n\nexpect(result1).toEqual({\n  product_001: {\n    last_price: ['100.0', 1000],\n    ask_price: ['101.0', 2000],\n  },\n  product_002: {\n    last_price: ['200.0', 1500],\n    ask_price: ['201.0', 2500],\n  },\n});\n\n//  2:  1500",
              "lineStart": 129,
              "lineEnd": 142
            },
            {
              "type": "function",
              "name": "result2",
              "code": "const result2 = quoteState.filter(\n  ['product_001', 'product_002', 'product_003'],\n  ['last_price', 'bid_price'],\n  1500,\n);\n\nexpect(result2).toEqual({\n  product_001: {\n    // last_price  1000 < 1500\n    // bid_price  500 < 1500\n  },\n  product_002: {\n    last_price: ['200.0', 1500],\n  },\n  product_003: {",
              "lineStart": 143,
              "lineEnd": 162
            },
            {
              "type": "function",
              "name": "result3",
              "code": "  const result3 = quoteState.filter(['non_existent'], ['last_price'], 0);\n\n  expect(result3).toEqual({\n    non_existent: {},\n  });\n});\n\n//  7: \nit('should handle empty update action', () => {\n  // \n  quoteState.update({\n    product_001: {\n      last_price: ['100.0', 1000],\n    },\n  });",
              "lineStart": 163,
              "lineEnd": 178
            },
            {
              "type": "function",
              "name": "beforeDump",
              "code": "const beforeDump = quoteState.dumpAsObject();\n\n// \nquoteState.update({});\n",
              "lineStart": 179,
              "lineEnd": 183
            },
            {
              "type": "function",
              "name": "afterDump",
              "code": "  const afterDump = quoteState.dumpAsObject();\n  expect(afterDump).toEqual(beforeDump);\n});\n\n//  8: \nit('should not affect other fields when updating partial fields', () => {\n  // \n  quoteState.update({\n    product_001: {\n      last_price: ['100.0', 1000],\n      ask_price: ['101.0', 1001],\n    },\n  });\n\n  // ",
              "lineStart": 184,
              "lineEnd": 211
            },
            {
              "type": "function",
              "name": "updateAction",
              "code": "  const updateAction: IQuoteUpdateAction = {\n    product_001: {\n      last_price: ['100.0', 1000],\n    },\n  };\n\n  // \n  quoteState.update(updateAction);\n  quoteState.update(updateAction);\n  quoteState.update(updateAction);\n\n  // \n  expect(quoteState.dumpAsObject()).toEqual(updateAction);\n});\n",
              "lineStart": 212,
              "lineEnd": 228
            },
            {
              "type": "function",
              "name": "allFields",
              "code": "const allFields: IQuoteKey[] = [\n  'last_price',\n  'ask_price',\n  'ask_volume',\n  'bid_volume',\n  'bid_price',\n  'interest_rate_short',\n  'open_interest',\n  'interest_rate_prev_settled_at',\n  'interest_rate_next_settled_at',\n  'interest_rate_long',\n];\n",
              "lineStart": 229,
              "lineEnd": 241
            },
            {
              "type": "function",
              "name": "updateAction",
              "code": "const updateAction: IQuoteUpdateAction = {\n  product_001: {},\n};\n\n// \nallFields.forEach((field, index) => {\n  updateAction['product_001'][field] = [`value_${index}`, 1000 + index];\n});\n\nquoteState.update(updateAction);\n\n// \nallFields.forEach((field, index) => {\n  expect(quoteState.getValueTuple('product_001', field)).toEqual([`value_${index}`, 1000 + index]);\n});",
              "lineStart": 242,
              "lineEnd": 258
            },
            {
              "type": "function",
              "name": "dumped",
              "code": "        const dumped = quoteState.dumpAsObject();\n        expect(dumped).toEqual(updateAction);\n      });\n    });\n  });\n});",
              "lineStart": 259,
              "lineEnd": 265
            }
          ]
        },
        {
          "additions": 8,
          "deletions": 9,
          "path": "apps/virtual-exchange/src/quote/implementations/v0.ts",
          "changeType": "modified",
          "patch": "commit 56a6b7c06483da8aeb3098bcbc90d8ffa7cc5b9d\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:26:41 2025 +0800\n\n    fix: reading causes writing issue (#2350)\n\ndiff --git a/apps/virtual-exchange/src/quote/implementations/v0.ts b/apps/virtual-exchange/src/quote/implementations/v0.ts\nindex 8314ca665..e3d4794a5 100644\n--- a/apps/virtual-exchange/src/quote/implementations/v0.ts\n+++ b/apps/virtual-exchange/src/quote/implementations/v0.ts\n@@ -53,2 +52,0 @@ export function createQuoteStateV0(): IQuoteState {\n-      if (!productMap) continue;\n-\n@@ -56,4 +54,7 @@ export function createQuoteStateV0(): IQuoteState {\n-      for (const field of fields) {\n-        const tuple = productMap.get(field);\n-        if (tuple && tuple[1] >= updated_at) {\n-          productData[field] = tuple;\n+\n+      if (productMap) {\n+        for (const field of fields) {\n+          const tuple = productMap.get(field);\n+          if (tuple && tuple[1] >= updated_at) {\n+            productData[field] = tuple;\n+          }\n@@ -63,3 +64 @@ export function createQuoteStateV0(): IQuoteState {\n-      if (Object.keys(productData).length > 0) {\n-        result[product_id] = productData;\n-      }\n+      result[product_id] = productData;\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "field",
              "code": "for (const field of fields) {",
              "lineStart": 56,
              "lineEnd": 56
            },
            {
              "type": "function",
              "name": "tuple",
              "code": "    const tuple = productMap.get(field);\n    if (tuple && tuple[1] >= updated_at) {\n      productData[field] = tuple;\n    }\nresult[product_id] = productData;",
              "lineStart": 57,
              "lineEnd": 65
            }
          ]
        },
        {
          "additions": 10,
          "deletions": 5,
          "path": "apps/virtual-exchange/src/quote/implementations/v1.ts",
          "changeType": "modified",
          "patch": "commit 56a6b7c06483da8aeb3098bcbc90d8ffa7cc5b9d\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:26:41 2025 +0800\n\n    fix: reading causes writing issue (#2350)\n\ndiff --git a/apps/virtual-exchange/src/quote/implementations/v1.ts b/apps/virtual-exchange/src/quote/implementations/v1.ts\nindex 1a9c48258..5ada5f719 100644\n--- a/apps/virtual-exchange/src/quote/implementations/v1.ts\n+++ b/apps/virtual-exchange/src/quote/implementations/v1.ts\n@@ -33 +33 @@ export const createQuoteStateV1 = (): IQuoteState => {\n-  const getFieldOffset = (product_id: string, field: string): number => {\n+  const getFieldOffset = (product_id: string, field: string): number | undefined => {\n@@ -36,3 +36 @@ export const createQuoteStateV1 = (): IQuoteState => {\n-      baseIndex = mapProductIdToIndex.size * FIELD_COUNT * 2;\n-      products.push(product_id);\n-      mapProductIdToIndex.set(product_id, baseIndex);\n+      return undefined;\n@@ -46,0 +45 @@ export const createQuoteStateV1 = (): IQuoteState => {\n+    if (offset === undefined) return undefined;\n@@ -54 +53,7 @@ export const createQuoteStateV1 = (): IQuoteState => {\n-    const offset = getFieldOffset(product_id, field);\n+    let offset = getFieldOffset(product_id, field);\n+    if (offset === undefined) {\n+      const baseIndex = mapProductIdToIndex.size * FIELD_COUNT * 2;\n+      products.push(product_id);\n+      mapProductIdToIndex.set(product_id, baseIndex);\n+      offset = baseIndex + mapFieldNameToOffset[field];\n+    }\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "getFieldOffset",
              "code": "const getFieldOffset = (product_id: string, field: string): number | undefined => {\n    return undefined;\n  if (offset === undefined) return undefined;",
              "lineStart": 33,
              "lineEnd": 52
            },
            {
              "type": "function",
              "name": "offset",
              "code": "let offset = getFieldOffset(product_id, field);\nif (offset === undefined) {",
              "lineStart": 53,
              "lineEnd": 54
            },
            {
              "type": "function",
              "name": "baseIndex",
              "code": "  const baseIndex = mapProductIdToIndex.size * FIELD_COUNT * 2;\n  products.push(product_id);\n  mapProductIdToIndex.set(product_id, baseIndex);\n  offset = baseIndex + mapFieldNameToOffset[field];\n}",
              "lineStart": 55,
              "lineEnd": 60
            }
          ]
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json",
          "changeType": "added",
          "patch": "commit 56a6b7c06483da8aeb3098bcbc90d8ffa7cc5b9d\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:26:41 2025 +0800\n\n    fix: reading causes writing issue (#2350)\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json b/common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json\nnew file mode 100644\nindex 000000000..d2c2d8eb2\n--- /dev/null\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-virtual-exchange\",\n+      \"comment\": \"fix reading causes writing issue\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-virtual-exchange\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "0232b58addaabc355e45d2875b38a2432cb6de77",
      "short": "0232b58ad",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-17 10:37:30 +0800",
      "subject": "feat: add current_price and notional fields to IPosition interface and update polyfill logic (#2351)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 18,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/position.ts",
          "changeType": "added",
          "patch": "commit 0232b58addaabc355e45d2875b38a2432cb6de77\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:37:30 2025 +0800\n\n    feat: add current_price and notional fields to IPosition interface and update polyfill logic (#2351)\n\ndiff --git a/apps/virtual-exchange/src/position.ts b/apps/virtual-exchange/src/position.ts\nindex 5958dbf33..df2e7fc83 100644\n--- a/apps/virtual-exchange/src/position.ts\n+++ b/apps/virtual-exchange/src/position.ts\n@@ -66,0 +67,18 @@ export const polyfillPosition = async (positions: IPosition[]): Promise<IPositio\n+    if (quote && pos.size) {\n+      const sizeNum = +pos.size;\n+      if (pos.current_price === undefined) {\n+        if (sizeNum > 0) {\n+          // \n+          pos.current_price = (quote.ask_price || quote.last_price) + '';\n+        } else {\n+          // \n+          pos.current_price = (quote.bid_price || quote.last_price) + '';\n+        }\n+      }\n+\n+      // \n+      if (pos.notional === undefined) {\n+        pos.notional = sizeNum * (+pos.current_price || 0) + '';\n+      }\n+    }\n+\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "sizeNum",
              "code": "const sizeNum = +pos.size;\nif (pos.current_price === undefined) {\n  if (sizeNum > 0) {\n    // \n    pos.current_price = (quote.ask_price || quote.last_price) + '';\n  } else {\n    // \n    pos.current_price = (quote.bid_price || quote.last_price) + '';\n  }\n}\n\n// \nif (pos.notional === undefined) {\n  pos.notional = sizeNum * (+pos.current_price || 0) + '';\n}",
              "lineStart": 68,
              "lineEnd": 85
            }
          ]
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-31.json",
          "changeType": "added",
          "patch": "commit 0232b58addaabc355e45d2875b38a2432cb6de77\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:37:30 2025 +0800\n\n    feat: add current_price and notional fields to IPosition interface and update polyfill logic (#2351)\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-17-02-31.json b/common/changes/@yuants/app-virtual-exchange/2025-12-17-02-31.json\nnew file mode 100644\nindex 000000000..291b2958d\n--- /dev/null\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-17-02-31.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-virtual-exchange\",\n+      \"comment\": \"add current_price and notional fields to position polyfill\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-virtual-exchange\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/data-account/2025-12-17-02-31.json",
          "changeType": "added",
          "patch": "commit 0232b58addaabc355e45d2875b38a2432cb6de77\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:37:30 2025 +0800\n\n    feat: add current_price and notional fields to IPosition interface and update polyfill logic (#2351)\n\ndiff --git a/common/changes/@yuants/data-account/2025-12-17-02-31.json b/common/changes/@yuants/data-account/2025-12-17-02-31.json\nnew file mode 100644\nindex 000000000..36f0f5a5d\n--- /dev/null\n+++ b/common/changes/@yuants/data-account/2025-12-17-02-31.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/data-account\",\n+      \"comment\": \"add current_price and notional fields to position\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/data-account\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/exchange/2025-12-17-02-31.json",
          "changeType": "added",
          "patch": "commit 0232b58addaabc355e45d2875b38a2432cb6de77\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:37:30 2025 +0800\n\n    feat: add current_price and notional fields to IPosition interface and update polyfill logic (#2351)\n\ndiff --git a/common/changes/@yuants/exchange/2025-12-17-02-31.json b/common/changes/@yuants/exchange/2025-12-17-02-31.json\nnew file mode 100644\nindex 000000000..fe4c2ee6b\n--- /dev/null\n+++ b/common/changes/@yuants/exchange/2025-12-17-02-31.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/exchange\",\n+      \"comment\": \"make IQuoteUpdateAction generic\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/exchange\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 3,
          "deletions": 0,
          "path": "libraries/data-account/etc/data-account.api.md",
          "changeType": "added",
          "patch": "commit 0232b58addaabc355e45d2875b38a2432cb6de77\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:37:30 2025 +0800\n\n    feat: add current_price and notional fields to IPosition interface and update polyfill logic (#2351)\n\ndiff --git a/libraries/data-account/etc/data-account.api.md b/libraries/data-account/etc/data-account.api.md\nindex ddcdf0d39..a21b5af57 100644\n--- a/libraries/data-account/etc/data-account.api.md\n+++ b/libraries/data-account/etc/data-account.api.md\n@@ -63,0 +64 @@ export interface IPosition {\n+    // @deprecated\r\n@@ -66,0 +68 @@ export interface IPosition {\n+    current_price?: string;\r\n@@ -74,0 +77 @@ export interface IPosition {\n+    notional?: string;\r\n",
          "codeSnippets": []
        },
        {
          "additions": 19,
          "deletions": 0,
          "path": "libraries/data-account/src/interface.ts",
          "changeType": "added",
          "patch": "commit 0232b58addaabc355e45d2875b38a2432cb6de77\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:37:30 2025 +0800\n\n    feat: add current_price and notional fields to IPosition interface and update polyfill logic (#2351)\n\ndiff --git a/libraries/data-account/src/interface.ts b/libraries/data-account/src/interface.ts\nindex 101d14f58..27453e793 100644\n--- a/libraries/data-account/src/interface.ts\n+++ b/libraries/data-account/src/interface.ts\n@@ -98,0 +99 @@ export interface IPosition {\n+   * @deprecated Use `current_price` instead.\n@@ -101,0 +103,6 @@ export interface IPosition {\n+  /**\n+   * Current price of the product.\n+   *  (  quote  ask_price  bid_price  last_price)\n+   */\n+  current_price?: string;\n+\n@@ -120,0 +128,12 @@ export interface IPosition {\n+\n+  /**\n+   * Notional value of the position.\n+   *\n+   * \n+   *\n+   * @remarks\n+   *\n+   * Notional = size * current_price\n+   */\n+  notional?: string;\n+\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/exchange/etc/exchange.api.md",
          "changeType": "modified",
          "patch": "commit 0232b58addaabc355e45d2875b38a2432cb6de77\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:37:30 2025 +0800\n\n    feat: add current_price and notional fields to IPosition interface and update polyfill logic (#2351)\n\ndiff --git a/libraries/exchange/etc/exchange.api.md b/libraries/exchange/etc/exchange.api.md\nindex ebba089fe..dda8f6325 100644\n--- a/libraries/exchange/etc/exchange.api.md\n+++ b/libraries/exchange/etc/exchange.api.md\n@@ -79 +79 @@ export interface IQuoteServiceRequestByVEX {\n-export type IQuoteUpdateAction = Record<string, Partial<Record<IQuoteField, [value: string, updated_at: number]>>>;\r\n+export type IQuoteUpdateAction<K extends IQuoteField = IQuoteField> = Record<string, Partial<Record<K, [value: string, updated_at: number]>>>;\r\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 15,
          "path": "libraries/exchange/src/index.ts",
          "changeType": "modified",
          "patch": "commit 0232b58addaabc355e45d2875b38a2432cb6de77\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:37:30 2025 +0800\n\n    feat: add current_price and notional fields to IPosition interface and update polyfill logic (#2351)\n\ndiff --git a/libraries/exchange/src/index.ts b/libraries/exchange/src/index.ts\nindex b63a97684..6803d344b 100644\n--- a/libraries/exchange/src/index.ts\n+++ b/libraries/exchange/src/index.ts\n@@ -1 +0,0 @@\n-import { createCache } from '@yuants/cache';\n@@ -4,2 +3 @@ import { IOrder } from '@yuants/data-order';\n-import { createClientProductCache, IProduct } from '@yuants/data-product';\n-import { IQuote } from '@yuants/data-quote';\n+import { IProduct } from '@yuants/data-product';\n@@ -7 +4,0 @@ import { IResponse, Terminal } from '@yuants/protocol';\n-import { escapeSQL, requestSQL } from '@yuants/sql';\n@@ -114,11 +110,0 @@ export const provideExchangeServices = <T>(terminal: Terminal, exchange: IExchan\n-  const quoteCache = createCache<IQuote>(\n-    async (product_id) => {\n-      const sql = `select * from quote where product_id = ${escapeSQL(product_id)}`;\n-      const [quote] = await requestSQL<IQuote[]>(terminal, sql);\n-      return quote;\n-    },\n-    { expire: 30_000 },\n-  );\n-\n-  const productCache = createClientProductCache(terminal, { expire: 3600_000 });\n-\n",
          "codeSnippets": []
        },
        {
          "additions": 2,
          "deletions": 2,
          "path": "libraries/exchange/src/types.ts",
          "changeType": "modified",
          "patch": "commit 0232b58addaabc355e45d2875b38a2432cb6de77\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Wed Dec 17 10:37:30 2025 +0800\n\n    feat: add current_price and notional fields to IPosition interface and update polyfill logic (#2351)\n\ndiff --git a/libraries/exchange/src/types.ts b/libraries/exchange/src/types.ts\nindex 523c219c9..613659d6e 100644\n--- a/libraries/exchange/src/types.ts\n+++ b/libraries/exchange/src/types.ts\n@@ -47 +47 @@ export interface IQuoteServiceRequestByVEX {\n-export type IQuoteUpdateAction = Record<\n+export type IQuoteUpdateAction<K extends IQuoteField = IQuoteField> = Record<\n@@ -49 +49 @@ export type IQuoteUpdateAction = Record<\n-  Partial<Record<IQuoteField, [value: string, updated_at: number]>>\n+  Partial<Record<K, [value: string, updated_at: number]>>\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "570bbcccd23854a452254902779980cbc64378d0",
      "short": "570bbcccd",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-17 14:58:27 +0800",
      "subject": "chore: bump version (#2352)",
      "conventionalCommit": {
        "type": "chore",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/account-composer/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/account-composer/CHANGELOG.json b/apps/account-composer/CHANGELOG.json\nindex d85bcf49d..ef42c85e4 100644\n--- a/apps/account-composer/CHANGELOG.json\n+++ b/apps/account-composer/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.7.14\",\n+      \"tag\": \"@yuants/app-account-composer_v0.7.14\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/account-composer/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/account-composer/CHANGELOG.md b/apps/account-composer/CHANGELOG.md\nindex 30e356509..aa4ca563d 100644\n--- a/apps/account-composer/CHANGELOG.md\n+++ b/apps/account-composer/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:46 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.7.14\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/account-composer/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/account-composer/package.json b/apps/account-composer/package.json\nindex ead474208..aaa69073f 100644\n--- a/apps/account-composer/package.json\n+++ b/apps/account-composer/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.7.13\",\n+  \"version\": \"0.7.14\",\n",
          "codeSnippets": []
        },
        {
          "additions": 23,
          "deletions": 0,
          "path": "apps/agent/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/agent/CHANGELOG.json b/apps/agent/CHANGELOG.json\nindex 5086c6299..fa780ee9a 100644\n--- a/apps/agent/CHANGELOG.json\n+++ b/apps/agent/CHANGELOG.json\n@@ -3,0 +4,23 @@\n+    {\n+      \"version\": \"0.8.29\",\n+      \"tag\": \"@yuants/app-agent_v0.8.29\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/agent\\\" to `0.13.151`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/kernel\\\" to `0.15.67`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/agent/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/agent/CHANGELOG.md b/apps/agent/CHANGELOG.md\nindex 9801da349..e49f8c7eb 100644\n--- a/apps/agent/CHANGELOG.md\n+++ b/apps/agent/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:46 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.8.29\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/agent/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/agent/package.json b/apps/agent/package.json\nindex 8446900c8..53d86a6ef 100644\n--- a/apps/agent/package.json\n+++ b/apps/agent/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.8.28\",\n+  \"version\": \"0.8.29\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/fund/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/fund/CHANGELOG.json b/apps/fund/CHANGELOG.json\nindex 34dc576d0..6d75ea6e1 100644\n--- a/apps/fund/CHANGELOG.json\n+++ b/apps/fund/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.1.38\",\n+      \"tag\": \"@yuants/app-fund_v0.1.38\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/fund/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/fund/CHANGELOG.md b/apps/fund/CHANGELOG.md\nindex 4f4aa51c8..2d766db82 100644\n--- a/apps/fund/CHANGELOG.md\n+++ b/apps/fund/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.1.38\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/fund/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/fund/package.json b/apps/fund/package.json\nindex 63482056d..fdeb5514f 100644\n--- a/apps/fund/package.json\n+++ b/apps/fund/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.1.37\",\n+  \"version\": \"0.1.38\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/risk-manager/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/risk-manager/CHANGELOG.json b/apps/risk-manager/CHANGELOG.json\nindex 5da29baa7..fbd5f9dd9 100644\n--- a/apps/risk-manager/CHANGELOG.json\n+++ b/apps/risk-manager/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.6.54\",\n+      \"tag\": \"@yuants/app-risk-manager_v0.6.54\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/risk-manager/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/risk-manager/CHANGELOG.md b/apps/risk-manager/CHANGELOG.md\nindex 08ecccb81..3dc603454 100644\n--- a/apps/risk-manager/CHANGELOG.md\n+++ b/apps/risk-manager/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.6.54\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/risk-manager/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/risk-manager/package.json b/apps/risk-manager/package.json\nindex 0267ec324..6d75a2fc6 100644\n--- a/apps/risk-manager/package.json\n+++ b/apps/risk-manager/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.6.53\",\n+  \"version\": \"0.6.54\",\n",
          "codeSnippets": []
        },
        {
          "additions": 25,
          "deletions": 0,
          "path": "apps/trade-copier/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/trade-copier/CHANGELOG.json b/apps/trade-copier/CHANGELOG.json\nindex eabca86cd..f6712662b 100644\n--- a/apps/trade-copier/CHANGELOG.json\n+++ b/apps/trade-copier/CHANGELOG.json\n@@ -3,0 +4,25 @@\n+    {\n+      \"version\": \"0.11.41\",\n+      \"tag\": \"@yuants/app-trade-copier_v0.11.41\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"remove deps\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/kernel\\\" to `0.15.67`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/trade-copier/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/trade-copier/CHANGELOG.md b/apps/trade-copier/CHANGELOG.md\nindex c42cd769f..c66c1ca34 100644\n--- a/apps/trade-copier/CHANGELOG.md\n+++ b/apps/trade-copier/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.11.41\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+### Patches\n+\n+- remove deps\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/trade-copier/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/trade-copier/package.json b/apps/trade-copier/package.json\nindex f2913e82a..a4e557816 100644\n--- a/apps/trade-copier/package.json\n+++ b/apps/trade-copier/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.11.40\",\n+  \"version\": \"0.11.41\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-aster/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\nindex 40022846a..645638319 100644\n--- a/apps/vendor-aster/CHANGELOG.json\n+++ b/apps/vendor-aster/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.8.2\",\n+      \"tag\": \"@yuants/vendor-aster_v0.8.2\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.7.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-aster/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\nindex 5d374dac5..bcc522940 100644\n--- a/apps/vendor-aster/CHANGELOG.md\n+++ b/apps/vendor-aster/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.8.2\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-aster/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\nindex 9947e8263..ce94f1172 100644\n--- a/apps/vendor-aster/package.json\n+++ b/apps/vendor-aster/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.8.1\",\n+  \"version\": \"0.8.2\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-binance/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\nindex 7fe920b09..4806ce79a 100644\n--- a/apps/vendor-binance/CHANGELOG.json\n+++ b/apps/vendor-binance/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.11.2\",\n+      \"tag\": \"@yuants/vendor-binance_v0.11.2\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.7.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-binance/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\nindex 6f3ab8f21..d825cfec3 100644\n--- a/apps/vendor-binance/CHANGELOG.md\n+++ b/apps/vendor-binance/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.11.2\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-binance/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\nindex 4716661a3..0d72a6d83 100644\n--- a/apps/vendor-binance/package.json\n+++ b/apps/vendor-binance/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.11.1\",\n+  \"version\": \"0.11.2\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-bitget/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/CHANGELOG.json b/apps/vendor-bitget/CHANGELOG.json\nindex 1a302ac19..b9f82c05f 100644\n--- a/apps/vendor-bitget/CHANGELOG.json\n+++ b/apps/vendor-bitget/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.12.2\",\n+      \"tag\": \"@yuants/vendor-bitget_v0.12.2\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.7.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-bitget/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/CHANGELOG.md b/apps/vendor-bitget/CHANGELOG.md\nindex 27e280aa8..f438f0597 100644\n--- a/apps/vendor-bitget/CHANGELOG.md\n+++ b/apps/vendor-bitget/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.12.2\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-bitget/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/package.json b/apps/vendor-bitget/package.json\nindex e1ca0912a..c7fe5c9b4 100644\n--- a/apps/vendor-bitget/package.json\n+++ b/apps/vendor-bitget/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.12.1\",\n+  \"version\": \"0.12.2\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-ctp/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-ctp/CHANGELOG.json b/apps/vendor-ctp/CHANGELOG.json\nindex 7876c77bf..6b59b5e23 100644\n--- a/apps/vendor-ctp/CHANGELOG.json\n+++ b/apps/vendor-ctp/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.10.39\",\n+      \"tag\": \"@yuants/vendor-ctp_v0.10.39\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-ctp/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-ctp/CHANGELOG.md b/apps/vendor-ctp/CHANGELOG.md\nindex 900fae351..d4feb5019 100644\n--- a/apps/vendor-ctp/CHANGELOG.md\n+++ b/apps/vendor-ctp/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.10.39\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-ctp/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-ctp/package.json b/apps/vendor-ctp/package.json\nindex 60f147daf..b8634d803 100644\n--- a/apps/vendor-ctp/package.json\n+++ b/apps/vendor-ctp/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.10.38\",\n+  \"version\": \"0.10.39\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-gate/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\nindex b83fea823..bf821433b 100644\n--- a/apps/vendor-gate/CHANGELOG.json\n+++ b/apps/vendor-gate/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.5.2\",\n+      \"tag\": \"@yuants/vendor-gate_v0.5.2\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.7.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-gate/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\nindex 6c41a1ac6..544427665 100644\n--- a/apps/vendor-gate/CHANGELOG.md\n+++ b/apps/vendor-gate/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.5.2\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-gate/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\nindex fdbb26172..fdbe0d6b9 100644\n--- a/apps/vendor-gate/package.json\n+++ b/apps/vendor-gate/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.5.1\",\n+  \"version\": \"0.5.2\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-huobi/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-huobi/CHANGELOG.json b/apps/vendor-huobi/CHANGELOG.json\nindex 0056f5636..9a5469b3b 100644\n--- a/apps/vendor-huobi/CHANGELOG.json\n+++ b/apps/vendor-huobi/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.17.2\",\n+      \"tag\": \"@yuants/vendor-huobi_v0.17.2\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.7.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-huobi/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-huobi/CHANGELOG.md b/apps/vendor-huobi/CHANGELOG.md\nindex f554c663e..590d8eb1f 100644\n--- a/apps/vendor-huobi/CHANGELOG.md\n+++ b/apps/vendor-huobi/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.17.2\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-huobi/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-huobi/package.json b/apps/vendor-huobi/package.json\nindex ba376ee38..1a3af7ca2 100644\n--- a/apps/vendor-huobi/package.json\n+++ b/apps/vendor-huobi/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.17.1\",\n+  \"version\": \"0.17.2\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-hyperliquid/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.json b/apps/vendor-hyperliquid/CHANGELOG.json\nindex 473a1e3cc..100338ec0 100644\n--- a/apps/vendor-hyperliquid/CHANGELOG.json\n+++ b/apps/vendor-hyperliquid/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.8.2\",\n+      \"tag\": \"@yuants/vendor-hyperliquid_v0.8.2\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.7.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-hyperliquid/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.md b/apps/vendor-hyperliquid/CHANGELOG.md\nindex 1858ad121..29b27e8b8 100644\n--- a/apps/vendor-hyperliquid/CHANGELOG.md\n+++ b/apps/vendor-hyperliquid/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.8.2\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-hyperliquid/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-hyperliquid/package.json b/apps/vendor-hyperliquid/package.json\nindex 275b6316b..a51e734be 100644\n--- a/apps/vendor-hyperliquid/package.json\n+++ b/apps/vendor-hyperliquid/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.8.1\",\n+  \"version\": \"0.8.2\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-okx-web3/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx-web3/CHANGELOG.json b/apps/vendor-okx-web3/CHANGELOG.json\nindex 8824881e2..059fa8d91 100644\n--- a/apps/vendor-okx-web3/CHANGELOG.json\n+++ b/apps/vendor-okx-web3/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.1.38\",\n+      \"tag\": \"@yuants/vendor-okx-web3_v0.1.38\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-okx-web3/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx-web3/CHANGELOG.md b/apps/vendor-okx-web3/CHANGELOG.md\nindex 8578c424e..48b072f94 100644\n--- a/apps/vendor-okx-web3/CHANGELOG.md\n+++ b/apps/vendor-okx-web3/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.1.38\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-okx-web3/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx-web3/package.json b/apps/vendor-okx-web3/package.json\nindex a0bc77bb0..3e33bbf73 100644\n--- a/apps/vendor-okx-web3/package.json\n+++ b/apps/vendor-okx-web3/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.1.37\",\n+  \"version\": \"0.1.38\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-okx/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\nindex eb2971a77..0f9fc0b0d 100644\n--- a/apps/vendor-okx/CHANGELOG.json\n+++ b/apps/vendor-okx/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.30.3\",\n+      \"tag\": \"@yuants/vendor-okx_v0.30.3\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.7.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-okx/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\nindex d1171e01d..7c9495c45 100644\n--- a/apps/vendor-okx/CHANGELOG.md\n+++ b/apps/vendor-okx/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.30.3\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-okx/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\nindex ff2a542b3..ecb44ce57 100644\n--- a/apps/vendor-okx/package.json\n+++ b/apps/vendor-okx/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.30.2\",\n+  \"version\": \"0.30.3\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-solana/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-solana/CHANGELOG.json b/apps/vendor-solana/CHANGELOG.json\nindex d6fd05877..7fbdcf612 100644\n--- a/apps/vendor-solana/CHANGELOG.json\n+++ b/apps/vendor-solana/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.1.123\",\n+      \"tag\": \"@yuants/vendor-solana_v0.1.123\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-solana/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-solana/CHANGELOG.md b/apps/vendor-solana/CHANGELOG.md\nindex 3495fdb32..bb4825de3 100644\n--- a/apps/vendor-solana/CHANGELOG.md\n+++ b/apps/vendor-solana/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.1.123\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-solana/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-solana/package.json b/apps/vendor-solana/package.json\nindex fb7a1b87a..3a9e7d523 100644\n--- a/apps/vendor-solana/package.json\n+++ b/apps/vendor-solana/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.1.122\",\n+  \"version\": \"0.1.123\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-turboflow/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-turboflow/CHANGELOG.json b/apps/vendor-turboflow/CHANGELOG.json\nindex ef709db36..7a13e9e8e 100644\n--- a/apps/vendor-turboflow/CHANGELOG.json\n+++ b/apps/vendor-turboflow/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"1.2.16\",\n+      \"tag\": \"@yuants/vendor-turboflow_v1.2.16\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.7.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-turboflow/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-turboflow/CHANGELOG.md b/apps/vendor-turboflow/CHANGELOG.md\nindex 91a52d09b..40a48dc35 100644\n--- a/apps/vendor-turboflow/CHANGELOG.md\n+++ b/apps/vendor-turboflow/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 1.2.16\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-turboflow/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-turboflow/package.json b/apps/vendor-turboflow/package.json\nindex f23dd12c1..d4788351c 100644\n--- a/apps/vendor-turboflow/package.json\n+++ b/apps/vendor-turboflow/package.json\n@@ -3 +3 @@\n-  \"version\": \"1.2.15\",\n+  \"version\": \"1.2.16\",\n",
          "codeSnippets": []
        },
        {
          "additions": 30,
          "deletions": 0,
          "path": "apps/virtual-exchange/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\nindex e2a0b1afc..0816daf2f 100644\n--- a/apps/virtual-exchange/CHANGELOG.json\n+++ b/apps/virtual-exchange/CHANGELOG.json\n@@ -3,0 +4,30 @@\n+    {\n+      \"version\": \"0.10.0\",\n+      \"tag\": \"@yuants/app-virtual-exchange_v0.10.0\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"fix reading causes writing issue\"\n+          }\n+        ],\n+        \"minor\": [\n+          {\n+            \"comment\": \"add current_price and notional fields to position polyfill\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.7.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 12,
          "deletions": 1,
          "path": "apps/virtual-exchange/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\nindex f4af697e8..dd8c65787 100644\n--- a/apps/virtual-exchange/CHANGELOG.md\n+++ b/apps/virtual-exchange/CHANGELOG.md\n@@ -3 +3,12 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.10.0\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+### Minor changes\n+\n+- add current_price and notional fields to position polyfill\n+\n+### Patches\n+\n+- fix reading causes writing issue\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/virtual-exchange/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\nindex a16eef7a4..6cf684a5c 100644\n--- a/apps/virtual-exchange/package.json\n+++ b/apps/virtual-exchange/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.9.4\",\n+  \"version\": \"0.10.0\",\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/account-info-resolver/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/agent/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-account-composer/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-agent/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-fund/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-risk-manager/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/app-trade-copier/2025-12-17-00-11.json",
          "changeType": "deleted",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/app-trade-copier/2025-12-17-00-11.json b/common/changes/@yuants/app-trade-copier/2025-12-17-00-11.json\ndeleted file mode 100644\nindex 47acaefc6..000000000\n--- a/common/changes/@yuants/app-trade-copier/2025-12-17-00-11.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/app-trade-copier\",\n-      \"comment\": \"remove deps\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/app-trade-copier\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-trade-copier/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json",
          "changeType": "deleted",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json b/common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json\ndeleted file mode 100644\nindex d2c2d8eb2..000000000\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/app-virtual-exchange\",\n-      \"comment\": \"fix reading causes writing issue\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/app-virtual-exchange\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-31.json",
          "changeType": "deleted",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-17-02-31.json b/common/changes/@yuants/app-virtual-exchange/2025-12-17-02-31.json\ndeleted file mode 100644\nindex 291b2958d..000000000\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-17-02-31.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/app-virtual-exchange\",\n-      \"comment\": \"add current_price and notional fields to position polyfill\",\n-      \"type\": \"minor\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/app-virtual-exchange\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/data-account/2025-12-17-02-31.json",
          "changeType": "deleted",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/data-account/2025-12-17-02-31.json b/common/changes/@yuants/data-account/2025-12-17-02-31.json\ndeleted file mode 100644\nindex 36f0f5a5d..000000000\n--- a/common/changes/@yuants/data-account/2025-12-17-02-31.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/data-account\",\n-      \"comment\": \"add current_price and notional fields to position\",\n-      \"type\": \"minor\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/data-account\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/data-account/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/dist-origin/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/exchange/2025-12-17-02-31.json",
          "changeType": "deleted",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/exchange/2025-12-17-02-31.json b/common/changes/@yuants/exchange/2025-12-17-02-31.json\ndeleted file mode 100644\nindex fe4c2ee6b..000000000\n--- a/common/changes/@yuants/exchange/2025-12-17-02-31.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/exchange\",\n-      \"comment\": \"make IQuoteUpdateAction generic\",\n-      \"type\": \"minor\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/exchange\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/exchange/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/kernel/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-aster/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-binance/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-bitget/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-ctp/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-gate/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-huobi/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-hyperliquid/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx-web3/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-solana/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-turboflow/{main_2025-12-16-13-40.json => main_2025-12-17-05-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "distributions/origin/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/distributions/origin/CHANGELOG.json b/distributions/origin/CHANGELOG.json\nindex 190946803..a25211cfc 100644\n--- a/distributions/origin/CHANGELOG.json\n+++ b/distributions/origin/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.1.127\",\n+      \"tag\": \"@yuants/dist-origin_v0.1.127\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/agent\\\" to `0.13.151`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "distributions/origin/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/distributions/origin/CHANGELOG.md b/distributions/origin/CHANGELOG.md\nindex d485df70f..85f89b93d 100644\n--- a/distributions/origin/CHANGELOG.md\n+++ b/distributions/origin/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.1.127\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "distributions/origin/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/distributions/origin/package.json b/distributions/origin/package.json\nindex cfe32ed3e..415b05504 100644\n--- a/distributions/origin/package.json\n+++ b/distributions/origin/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.1.126\",\n+  \"version\": \"0.1.127\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "libraries/account-info-resolver/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/account-info-resolver/CHANGELOG.json b/libraries/account-info-resolver/CHANGELOG.json\nindex a3e2b27e5..cf3e41e0c 100644\n--- a/libraries/account-info-resolver/CHANGELOG.json\n+++ b/libraries/account-info-resolver/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.2.82\",\n+      \"tag\": \"@yuants/account-info-resolver_v0.2.82\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "libraries/account-info-resolver/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/account-info-resolver/CHANGELOG.md b/libraries/account-info-resolver/CHANGELOG.md\nindex f123c8a99..c5b3e50dd 100644\n--- a/libraries/account-info-resolver/CHANGELOG.md\n+++ b/libraries/account-info-resolver/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:46 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.2.82\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/account-info-resolver/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/account-info-resolver/package.json b/libraries/account-info-resolver/package.json\nindex 0519ec989..07f391d45 100644\n--- a/libraries/account-info-resolver/package.json\n+++ b/libraries/account-info-resolver/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.2.81\",\n+  \"version\": \"0.2.82\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "libraries/agent/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/agent/CHANGELOG.json b/libraries/agent/CHANGELOG.json\nindex 1adb93973..afae4de1b 100644\n--- a/libraries/agent/CHANGELOG.json\n+++ b/libraries/agent/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.13.151\",\n+      \"tag\": \"@yuants/agent_v0.13.151\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/kernel\\\" to `0.15.67`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "libraries/agent/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/agent/CHANGELOG.md b/libraries/agent/CHANGELOG.md\nindex e68dc2828..8d5b08f9a 100644\n--- a/libraries/agent/CHANGELOG.md\n+++ b/libraries/agent/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:46 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.13.151\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/agent/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/agent/package.json b/libraries/agent/package.json\nindex aeeb12086..98dd5b003 100644\n--- a/libraries/agent/package.json\n+++ b/libraries/agent/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.13.150\",\n+  \"version\": \"0.13.151\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "libraries/data-account/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/data-account/CHANGELOG.json b/libraries/data-account/CHANGELOG.json\nindex 4cab972fa..6229ded49 100644\n--- a/libraries/data-account/CHANGELOG.json\n+++ b/libraries/data-account/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.11.0\",\n+      \"tag\": \"@yuants/data-account_v0.11.0\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"minor\": [\n+          {\n+            \"comment\": \"add current_price and notional fields to position\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "libraries/data-account/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/data-account/CHANGELOG.md b/libraries/data-account/CHANGELOG.md\nindex 249dae192..3b292e618 100644\n--- a/libraries/data-account/CHANGELOG.md\n+++ b/libraries/data-account/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.11.0\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+### Minor changes\n+\n+- add current_price and notional fields to position\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/data-account/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/data-account/package.json b/libraries/data-account/package.json\nindex 4053333ed..87d9c2134 100644\n--- a/libraries/data-account/package.json\n+++ b/libraries/data-account/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.10.2\",\n+  \"version\": \"0.11.0\",\n",
          "codeSnippets": []
        },
        {
          "additions": 22,
          "deletions": 0,
          "path": "libraries/exchange/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/exchange/CHANGELOG.json b/libraries/exchange/CHANGELOG.json\nindex 4ec92c4aa..6187d0ecb 100644\n--- a/libraries/exchange/CHANGELOG.json\n+++ b/libraries/exchange/CHANGELOG.json\n@@ -3,0 +4,22 @@\n+    {\n+      \"version\": \"0.7.0\",\n+      \"tag\": \"@yuants/exchange_v0.7.0\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"minor\": [\n+          {\n+            \"comment\": \"make IQuoteUpdateAction generic\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "libraries/exchange/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/exchange/CHANGELOG.md b/libraries/exchange/CHANGELOG.md\nindex d0d9a8756..ba567a61e 100644\n--- a/libraries/exchange/CHANGELOG.md\n+++ b/libraries/exchange/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.7.0\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+### Minor changes\n+\n+- make IQuoteUpdateAction generic\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/exchange/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/exchange/package.json b/libraries/exchange/package.json\nindex 399bc6ec3..50496cf0f 100644\n--- a/libraries/exchange/package.json\n+++ b/libraries/exchange/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.6.1\",\n+  \"version\": \"0.7.0\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "libraries/kernel/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/kernel/CHANGELOG.json b/libraries/kernel/CHANGELOG.json\nindex b2529bc0b..99ecff961 100644\n--- a/libraries/kernel/CHANGELOG.json\n+++ b/libraries/kernel/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.15.67\",\n+      \"tag\": \"@yuants/kernel_v0.15.67\",\n+      \"date\": \"Wed, 17 Dec 2025 05:52:34 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-account\\\" to `0.11.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "libraries/kernel/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/kernel/CHANGELOG.md b/libraries/kernel/CHANGELOG.md\nindex 2b399c122..6eab80cba 100644\n--- a/libraries/kernel/CHANGELOG.md\n+++ b/libraries/kernel/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Tue, 16 Dec 2025 13:39:47 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+\n+## 0.15.67\n+Wed, 17 Dec 2025 05:52:34 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/kernel/package.json",
          "changeType": "modified",
          "patch": "commit 570bbcccd23854a452254902779980cbc64378d0\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Wed Dec 17 14:58:27 2025 +0800\n\n    chore: bump version (#2352)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/kernel/package.json b/libraries/kernel/package.json\nindex b14ae58c4..1c3d2c6ed 100644\n--- a/libraries/kernel/package.json\n+++ b/libraries/kernel/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.15.66\",\n+  \"version\": \"0.15.67\",\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "4e876a865a75363f0ab8610acda3a1e1565d4f78",
      "short": "4e876a865",
      "author": "Siyuan Wang",
      "email": "c.one@thrimbda.com",
      "authoredAt": "2025-12-17 16:39:39 +0800",
      "subject": "refactor(vex): introduce new executor and registry for quote provider management (#2353)",
      "conventionalCommit": {
        "type": "refactor",
        "scope": "vex",
        "breaking": false
      },
      "files": [
        {
          "additions": 73,
          "deletions": 0,
          "path": ".legion/config.json",
          "changeType": "added",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/.legion/config.json b/.legion/config.json\nindex 5330940d8..11403c859 100644\n--- a/.legion/config.json\n+++ b/.legion/config.json\n@@ -22,0 +23,7 @@\n+    },\n+    {\n+      \"id\": \"task-vex-quote-upstream-refactor\",\n+      \"name\": \"task-vex-quote-upstream-refactor\",\n+      \"status\": \"archived\",\n+      \"createdAt\": \"2025-12-16T15:02:37.063Z\",\n+      \"updatedAt\": \"2025-12-17T07:08:42.959Z\"\n@@ -205,0 +213,66 @@\n+    },\n+    {\n+      \"id\": \"proposal-mj8poum9-556f39\",\n+      \"name\": \"task-vex-quote-upstream-refactor\",\n+      \"goal\": \"Refactor VEX quote upstream routing into layered modules (registry/router/executor) with clear interfaces, remove debug leftovers, and unify log tags.\",\n+      \"rationale\": \" upstream-routing // Legion  legionmind \",\n+      \"points\": [\n+        \" `docs/zh-Hans/code-guidelines/exchange.md`  L1 prefix  + field  + \",\n+        \"provider not found / product unroutable / upstream error / freshness hard requirement\",\n+        \" provider group =1 32in-flight \",\n+        \" interface\",\n+        \" quote \"\n+      ],\n+      \"scope\": [\n+        \"apps/virtual-exchange/src/quote/upstream-routing.ts\",\n+        \"apps/virtual-exchange/src/quote/types.ts\",\n+        \"apps/virtual-exchange/src/quote/*(new: registry/router/executor modules)\"\n+      ],\n+      \"phases\": [\n+        {\n+          \"name\": \"Discovery\",\n+          \"tasks\": [\n+            {\n+              \"description\": \" `apps/virtual-exchange/src/quote/upstream-routing.ts` L1 freshnessin-flightLB\",\n+              \"acceptance\": \"context.md  + \"\n+            }\n+          ]\n+        },\n+        {\n+          \"name\": \"Design\",\n+          \"tasks\": [\n+            {\n+              \"description\": \"`IQuoteProviderRegistry` / `IQuoteRouter` / `IGetQuotesExecutor` `QuoteUpstreamPlan`\",\n+              \"acceptance\": \"plan.md \"\n+            }\n+          ]\n+        },\n+        {\n+          \"name\": \"Refactor\",\n+          \"tasks\": [\n+            {\n+              \"description\": \" `11111111` tag  `[VEX][Quote]`\",\n+              \"acceptance\": \" debug  tag \"\n+            },\n+            {\n+              \"description\": \" provider discovery  registry  `snapshot()`/ router LB//in-flight  executor`fillQuoteStateFromUpstream` \",\n+              \"acceptance\": \"`upstream-routing.ts` \"\n+            }\n+          ]\n+        },\n+        {\n+          \"name\": \"Validation\",\n+          \"tasks\": [\n+            {\n+              \"description\": \" prettier +  apps/virtual-exchange \",\n+              \"acceptance\": \"TypeScript \"\n+            }\n+          ]\n+        }\n+      ],\n+      \"proposedBy\": \"Claude\",\n+      \"proposedAt\": \"2025-12-16T15:02:33.729Z\",\n+      \"status\": \"approved\",\n+      \"decidedAt\": \"2025-12-16T15:02:37.063Z\",\n+      \"decidedBy\": \"Claude\",\n+      \"createdTaskId\": \"task-vex-quote-upstream-refactor\"\n",
          "codeSnippets": []
        },
        {
          "additions": 29,
          "deletions": 0,
          "path": ".legion/ledger.csv",
          "changeType": "added",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/.legion/ledger.csv b/.legion/ledger.csv\nindex a0a0c8e75..9fbb742fd 100644\n--- a/.legion/ledger.csv\n+++ b/.legion/ledger.csv\n@@ -92,0 +93,29 @@\n+2025-12-16T15:02:13.879Z,legion_create_task,,,Claude,\"goal: Refactor VEX quote upstream routing into layered modules (registry/router/executor) with clear interfaces, remove debug leftovers, and unify log tags.\",failed\n+2025-12-16T15:02:33.730Z,legion_propose_task,,,Claude,name: task-vex-quote-upstream-refactor,success\n+2025-12-16T15:02:37.066Z,legion_approve_proposal,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,proposalId: proposal-mj8poum9-556f39,success\n+2025-12-16T15:02:43.206Z,legion_switch_task,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,taskId: task-vex-quote-upstream-refactor,success\n+2025-12-16T15:03:30.202Z,legion_update_tasks,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,setCurrentTask: phase 1,success\n+2025-12-16T15:03:40.708Z,legion_update_context,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,addDecision:  service discovery  watch key = `service_id` `service_id`  registry  RxJS/TerminalInfos ,success\n+2025-12-16T15:04:32.889Z,legion_update_context,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,addFile: apps/virtual-exchange/src/quote/upstream-routing.ts,success\n+2025-12-16T15:04:56.842Z,legion_update_context,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,\"progress.completed:  Discovery  Design  - L1 prefix  + field  +  provider group + max_products_per_request  `\"\"\"\"`  `updated_at`  - \",success\n+2025-12-16T15:04:59.963Z,legion_update_tasks,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,completeTask: phase 1,success\n+2025-12-16T15:05:08.964Z,legion_update_tasks,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,setCurrentTask: phase 2,success\n+2025-12-17T06:51:25.863Z,legion_list_reviews,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,status: open,success\n+2025-12-17T06:53:14.460Z,legion_respond_review,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,\"file: plan.md, reviewId: R1, status: resolved\",success\n+2025-12-17T06:53:18.987Z,legion_respond_review,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,\"file: plan.md, reviewId: R2, status: resolved\",success\n+2025-12-17T06:53:23.733Z,legion_respond_review,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,\"file: plan.md, reviewId: R3, status: resolved\",success\n+2025-12-17T06:53:26.700Z,legion_list_reviews,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,status: open,success\n+2025-12-17T06:53:29.838Z,legion_update_tasks,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,completeTask: phase 2,success\n+2025-12-17T06:53:33.982Z,legion_update_tasks,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,setCurrentTask: phase 3,success\n+2025-12-17T06:53:56.829Z,legion_update_context,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,progress.completed:  `plan.md`  3  review - `IQuoteProviderRegistry`  Facade `planOrThrow/execute/fillQuoteStateFromUpstream`Router/Executor prefix matc,success\n+2025-12-17T07:04:29.845Z,legion_update_tasks,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,completeTask: phase 3,success\n+2025-12-17T07:05:10.429Z,legion_update_context,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,addFile: apps/virtual-exchange/src/quote/upstream/registry.ts,success\n+2025-12-17T07:05:17.796Z,legion_update_context,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,addFile: apps/virtual-exchange/src/quote/upstream/index.ts,success\n+2025-12-17T07:05:17.798Z,legion_update_context,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,addFile: apps/virtual-exchange/src/quote/upstream/router.ts,success\n+2025-12-17T07:05:17.800Z,legion_update_context,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,addFile: apps/virtual-exchange/src/quote/upstream/executor.ts,success\n+2025-12-17T07:05:23.634Z,legion_update_context,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,addFile: apps/virtual-exchange/src/quote/service.ts,success\n+2025-12-17T07:05:31.799Z,legion_update_context,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,progress.completed:  upstream-routing  `apps/virtual-exchange/src/quote/upstream/`  provider registry / router / executor  Facade `createQuoteProviderRegistry(ter,success\n+2025-12-17T07:07:06.777Z,legion_update_context,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,handoff:  GetQuotes providers + virtual-exchange `VEX/QueryQuotes`  `[VEX][Quote]...` UpstreamProviderDiscovery/RouteDispatched/RequestPlanned/RequestRe,success\n+2025-12-17T07:08:27.720Z,legion_get_status,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,,success\n+2025-12-17T07:08:42.960Z,legion_archive_task,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,taskId: task-vex-quote-upstream-refactor,success\n+2025-12-17T07:08:46.671Z,legion_get_status,,,Claude,,success\n",
          "codeSnippets": []
        },
        {
          "additions": 62,
          "deletions": 0,
          "path": ".legion/tasks/task-vex-quote-upstream-refactor/context.md",
          "changeType": "added",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/.legion/tasks/task-vex-quote-upstream-refactor/context.md b/.legion/tasks/task-vex-quote-upstream-refactor/context.md\nnew file mode 100644\nindex 000000000..831692109\n--- /dev/null\n+++ b/.legion/tasks/task-vex-quote-upstream-refactor/context.md\n@@ -0,0 +1,62 @@\n+# task-vex-quote-upstream-refactor - \n+\n+##  (2025-12-16)\n+\n+###  \n+\n+- `terminal_id` / `service_id`  UUID `listWatch((v) => v.serviceInfo.service_id, ...)`  watch key \n+- `console.info('11111111', ...)` provider discovery  tag  `[VEX][Quote]...`invalid schema  ignore  `[VEX][Quote]...`\n+-  Discovery  Design \n+- L1 prefix  + field  +  provider group + max_products_per_request  `\"\"`  `updated_at` \n+- terminalInfos$ + schema  + group LBround-robin group  / in-flight key -> Promise\n+- `upstream-routing.ts`  `Terminal.fromNodeEnv()`  `.subscribe()`import  `fillQuoteStateFromUpstream`  terminal /route -> map -> plan\n+-  `plan.md`  3  review\n+- `IQuoteProviderRegistry`  Facade `planOrThrow/execute/fillQuoteStateFromUpstream`Router/Executor prefix matcher  Router \n+- `unavailableAction` -> `defaultAction` `unroutableProducts`  `newError` \n+-  `upstream-routing.ts`  `apps/virtual-exchange/src/quote/upstream/index.ts`\n+-  upstream-routing  `apps/virtual-exchange/src/quote/upstream/`  provider registry / router / executor  Facade `createQuoteProviderRegistry(terminal)`  `fillQuoteStateFromUpstream`\n+-  `apps/virtual-exchange/src/quote/upstream-routing.ts``apps/virtual-exchange/src/quote/service.ts`  registry  `registry.fillQuoteStateFromUpstream`\n+-  tag  `[VEX][Quote]...`provider discovery summary / route dispatched / request planned / request received actions JSON\n+-  `npx prettier -w ...` \n+-  `./apps/virtual-exchange/node_modules/.bin/tsc -p apps/virtual-exchange/tsconfig.json --noEmit``apps/virtual-exchange/src/position.ts`  `current_price/notional`\n+\n+###  \n+\n+()\n+\n+###  /\n+\n+()\n+\n+---\n+\n+## \n+\n+()\n+\n+---\n+\n+## \n+\n+|                                                                                                                                                                              |                                                                                                                     |                                                                                                                                                     |        |\n+| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------- |\n+|  service discovery  watch key = `service_id` `service_id`  registry  RxJS/TerminalInfos  |  `terminal_id`/`service_id`  UUID/ key  | watch key  `encodePath(terminal_id, service_id)` , listWatch terminalInfos$  registry | 2025-12-16 |\n+\n+---\n+\n+## \n+\n+****\n+\n+1.  GetQuotes providers + virtual-exchange `VEX/QueryQuotes`  `[VEX][Quote]...` UpstreamProviderDiscovery/RouteDispatched/RequestPlanned/RequestReceived//LB/in-flight/\n+2.  `RequestReceived`  `JSON.stringify(actions)`  count  tag  grep\n+3.  `listWatch`  `.subscribe()`  `service.ts` `dispose()` registry \n+\n+****\n+\n+-  `apps/virtual-exchange/src/quote/upstream/registry.ts#createQuoteProviderRegistry``service.ts`  registry  `fillQuoteStateFromUpstream`\n+-  tsc `apps/virtual-exchange/src/position.ts`  `current_price/notional`\n+\n+---\n+\n+_: 2025-12-17 15:07 by Claude_\n",
          "codeSnippets": []
        },
        {
          "additions": 111,
          "deletions": 0,
          "path": ".legion/tasks/task-vex-quote-upstream-refactor/plan.md",
          "changeType": "added",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/.legion/tasks/task-vex-quote-upstream-refactor/plan.md b/.legion/tasks/task-vex-quote-upstream-refactor/plan.md\nnew file mode 100644\nindex 000000000..e77564343\n--- /dev/null\n+++ b/.legion/tasks/task-vex-quote-upstream-refactor/plan.md\n@@ -0,0 +1,111 @@\n+# task-vex-quote-upstream-refactor\n+\n+## \n+\n+Refactor VEX quote upstream routing into layered modules (registry/router/executor) with clear interfaces, remove debug leftovers, and unify log tags.\n+\n+## \n+\n+-  `docs/zh-Hans/code-guidelines/exchange.md`  L1 prefix  + field  + \n+- provider not found / product unroutable / upstream error / freshness hard requirement\n+-  provider group =1 32in-flight \n+-  interface\n+-  quote \n+\n+## \n+\n+- apps/virtual-exchange/src/quote/upstream/index.ts upstream-routing.ts \n+- apps/virtual-exchange/src/quote/upstream/registry.ts\n+- apps/virtual-exchange/src/quote/upstream/router.ts\n+- apps/virtual-exchange/src/quote/upstream/executor.ts\n+- apps/virtual-exchange/src/quote/types.ts\n+- apps/virtual-exchange/src/quote/service.ts/\n+\n+## \n+\n+1. **Discovery** - 1 \n+2. **Design** - 1 \n+3. **Refactor** - 2 \n+4. **Validation** - 1 \n+\n+---\n+\n+## \n+\n+### \n+\n+ `upstream-routing.ts` \n+\n+> [REVIEW]:  IQuoteProviderRegistry  plan  execute  IQuoteRouter  IQuoteProviderRegistry  IGetQuotesExecutor IQuoteProviderRegistry  route trie  Router \n+>\n+> [RESPONSE]  `IQuoteProviderRegistry`Facade `planOrThrow/execute/fillQuoteStateFromUpstream``IQuoteRouter`  registry /`GetQuotesExecutor`  registry  LB//in-flight/prefix matcherTrie/AC/ Router  `IPrefixMatcher`  plan.md \n+> [STATUS:resolved]\n+\n+ `IQuoteProviderRegistry`FacadeRouter/Executor \n+\n+- **`IQuoteProviderRegistry` Facade + **\n+  - RxJS/TerminalInfos  +  + \n+  - API \n+    - `snapshot(): { groups, indices }`//\n+    - `planOrThrow(misses, updated_at): QuoteUpstreamPlan` Router unroutable  `newError` \n+    - `execute(requests): Promise<IQuoteUpdateAction[]>` ExecutorLB//in-flight \n+    - `fillQuoteStateFromUpstream({ quoteState, cacheMissed, updated_at }): Promise<void>` `service.ts` \n+- **`IQuoteRouter`Registry **\n+  - L1 \n+  - prefix  `createSortedPrefixMatcher` Trie/AC\n+  - Router  `IPrefixMatcher` `apps/virtual-exchange/src/quote/upstream/prefix-matcher.ts`\n+- **`GetQuotesExecutor`Registry **\n+  - round-robin /  group  /  / in-flight  / \n+  - /\n+\n+###  Router/Registry\n+\n+ `routeMisses(...) -> productsByGroupId + unavailableAction + unroutableProducts`  `planRequests(...)` \n+\n+- `QuoteUpstreamPlan`\n+  - `defaultAction: IQuoteUpdateAction` prefix  field \n+  - `requests: Array<{ key, planned: IPlannedRequest }>`\n+\n+> [REVIEW] unavailableAction  defaultAction unroutableProducts  newError \n+>\n+> [RESPONSE] `unavailableAction`  `defaultAction` `unroutableProducts`  `planOrThrow`  `newError('VEX_QUOTE_PRODUCT_UNROUTABLE', ...)`  plan.md \n+> [STATUS:resolved]\n+\n+\n+\n+- `unavailableAction`  `defaultAction`\n+- `unroutableProducts`  `planOrThrow`  `newError('VEX_QUOTE_PRODUCT_UNROUTABLE', ...)`\n+\n+`fillQuoteStateFromUpstream`\n+`planOrThrow -> applyDefault -> execute -> applyActions`\n+\n+### \n+\n+**** upstream /\n+\n+- `apps/virtual-exchange/src/quote/upstream/registry.ts`\n+- `apps/virtual-exchange/src/quote/upstream/router.ts`\n+- `apps/virtual-exchange/src/quote/upstream/executor.ts`\n+- `apps/virtual-exchange/src/quote/upstream/index.ts` `fillQuoteStateFromUpstream` / `createQuoteProviderRegistry` \n+\n+> [REVIEW]  - `apps/virtual-exchange/src/quote/upstream-routing.ts`  `apps/virtual-exchange/src/quote/upstream/index.ts`\n+>\n+> [RESPONSE]  `apps/virtual-exchange/src/quote/upstream-routing.ts`  `apps/virtual-exchange/src/quote/upstream/index.ts`Router/Registry/Executor  `upstream/router.ts``upstream/registry.ts``upstream/executor.ts` plan.md \n+> [STATUS:resolved]\n+\n+`upstream-routing.ts`  `upstream/index.ts` Router/Executor/Registry \n+\n+****\n+\n+- `apps/virtual-exchange/src/quote/upstream-registry.ts`\n+- `apps/virtual-exchange/src/quote/upstream-router.ts`\n+- `apps/virtual-exchange/src/quote/upstream-executor.ts`\n+\n+ quote  `implementations/`  `benchmark/` `upstream/` \n+\n+### \n+\n+1.  `upstream/` `upstream-routing.ts`  `upstream/index.ts`\n+2. `IQuoteProviderGroup.mapTerminalIdToInstance`  key  `terminal_id` `terminal_id/service_id`  terminal  `encodePath(terminal_id, service_id)`\n+\n+_: 2025-12-16 | : 2025-12-16_\n",
          "codeSnippets": []
        },
        {
          "additions": 42,
          "deletions": 0,
          "path": ".legion/tasks/task-vex-quote-upstream-refactor/tasks.md",
          "changeType": "added",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/.legion/tasks/task-vex-quote-upstream-refactor/tasks.md b/.legion/tasks/task-vex-quote-upstream-refactor/tasks.md\nnew file mode 100644\nindex 000000000..bf1d923ac\n--- /dev/null\n+++ b/.legion/tasks/task-vex-quote-upstream-refactor/tasks.md\n@@ -0,0 +1,42 @@\n+# task-vex-quote-upstream-refactor - \n+\n+## \n+\n+****:  4 - Validation  COMPLETE\n+****: (none)\n+****: 5/5 \n+\n+---\n+\n+##  1: Discovery  COMPLETE\n+\n+- [x]  `apps/virtual-exchange/src/quote/upstream-routing.ts` L1 freshnessin-flightLB | : context.md  + \n+\n+---\n+\n+##  2: Design  COMPLETE\n+\n+- [x] `IQuoteProviderRegistry` / `IQuoteRouter` / `IGetQuotesExecutor` `QuoteUpstreamPlan` | : plan.md \n+\n+---\n+\n+##  3: Refactor  COMPLETE\n+\n+- [x]  `11111111` tag  `[VEX][Quote]` | :  debug  tag \n+- [x]  provider discovery  registry  `snapshot()`/ router LB//in-flight  executor`fillQuoteStateFromUpstream`  | : `upstream-routing.ts` \n+\n+---\n+\n+##  4: Validation  COMPLETE\n+\n+- [x]  prettier +  apps/virtual-exchange  | : TypeScript \n+\n+---\n+\n+## \n+\n+()\n+\n+---\n+\n+_: 2025-12-17 15:04_\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 131,
          "path": "apps/AGENTS.md",
          "changeType": "deleted",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/apps/AGENTS.md b/apps/AGENTS.md\ndeleted file mode 100644\nindex 11205f315..000000000\n--- a/apps/AGENTS.md\n+++ /dev/null\n@@ -1,131 +0,0 @@\n-name: yuan-apps\n-description:  apps/  Credential  vendor \n-\n----\n-\n-# apps/  Agent Credential \n-\n->  vendor / service  app  TypedCredential\n-\n----\n-\n-## 1. \n-\n--  Yuan Terminal  app vendorcopierCLI \n--  app `TypedCredential` \n-- (vendor only) /// `trade-copier`\n-\n----\n-\n-## 2. vendor only\n-\n-```\n-src/\n- index.ts                        #  import  services\n- cli.ts                          #  `import './index'`\n- device/                         # //\n- api/\n-    public-api.ts               #  REST/WebSocket helper\n-    private-api.ts              # (vendor only)  credential  helper\n- services/\n-    legacy.ts                   # \n-    account-actions-with-credential.ts\n-    order-actions-with-credential.ts\n-    orders/                     # submit/cancel/list  handler \n-    markets/\n-       product.ts              # /\n-       quote.ts                # SQL \n-       interest-rate.ts        # /\n-    transfer.ts                 # /\n- e2e/                            # \n-```\n-\n->  app API// CLI  `services/*`\n-\n----\n-\n-## 3. Credential \n-\n-1. **Credential** vendor API KeyToken \n-2. **TypedCredential** Credential  `type`  app/vendor  Terminal \n-3.  `provideService`/`provideAccountActionsWithCredential`/`provideOrderActionsWithCredential`  TypedCredential\n-\n-### 3.1 \n-\n--  app / Credential  handler  schema \n--  `credential: TypedCredential`/\n-- app  Credential/\n--  Terminal  CLI \n--  `@yuants/cache`  key  Credential + \n-\n----\n-\n-## 4. \n-\n-### 4.1  (`src/device`, )\n-\n-- HTTP WebSocket  IP \n-- (vendor only)  IP  `SESSION_NOTES` \n-\n-### 4.2 API  (`src/api`)\n-\n-- **/**`(params) => Promise<Result>` Credential\n-- **/**`(credential, params) => Promise<Result>` Credential\n-- ****`(params) => Observable<Event>` RxJS \n-- ****`(credential, params) => Observable<Event>`\n--  API  Credential \n-  ```typescript\n-  const createApi =\n-    (baseURL: string) =>\n-    <TReq, TRes>(method: string, endpoint: string) =>\n-    (credential: ICredential, params: TReq) =>\n-      request<TRes>(credential, method, baseURL, endpoint, params);\n-  ```\n-\n-### 4.3  (`src/services`)\n-\n--  Terminal  `terminal.server.provideService` \n--  `services/<domain>`accounts/orders/markets/transfer/diagnostics \n-- (vendor only) \n-  1. ****// Channel Credential\n-  2. **** `@yuants/data-account`  `provideAccountActionsWithCredential`\n-  3. **** `@yuants/data-order`  `provideOrderActionsWithCredential` `submit/modify/cancel/list` \n--  app  Credential IMAI RPC\n-\n----\n-\n-## 5. (vendor only) \n-\n-|                  | /                                                            |                                                                              |\n-| -------------------- | ------------------------------------------------------------------------ | ---------------------------------------------------------------------------------- |\n-|  API     | `src/index.ts` `api/public-api.ts` / `api/private-api.ts`    |  API  Credentialhelper  `any`                    |\n-|              | `provideAccountInfoService`                                              | /// `addAccountMarket`         |\n-|              | `providePendingOrdersService`                                            |  API`product_id`  `encodePath` 5                    |\n-|              | `provideQueryProductsService`  SQL writer                              |  `product`  `datasource_id`                        |\n-|              | `quote/{datasource_id}/{product_id}` Channel +  SQL              | WebSocket  RESTChannel  `last/bid/ask/open_interest/updated_at`      |\n-|  RPC |  `Submit/Cancel`                                         |  `{code:0}`  `services/legacy.ts`              |\n-|  RPC   | `order-actions-with-credential.ts` + `provideOrderActionsWithCredential` | Schema  `account_id``credential.type`/                 |\n-|              | `services/transfer.ts`                                                   |  `addAccountTransferAddress`//       |\n-| CLI &            | `Terminal.fromNodeEnv()`                                       | `cli.ts`  import index `WRITE_QUOTE_TO_SQL``DISABLE_TRANSFER`  |\n-\n-> UID  `docs/zh-Hans/vendor-guide/implementation-checklist.md` \n-\n----\n-\n-## 6. Checklist\n-\n-- [ ] / schema  `TypedCredential`\n-- [ ] API  Credential /\n-- [ ] //\n-- [ ]  app  Credential \n-- [ ] /\n-- [ ]  IP `SESSION_NOTES`\n-- [ ] (vendor only)  implementation checklist ////CLI  e2e \n-\n----\n-\n-> `.clinerules/credential.md` /\n-\n-```\n-\n-```\n",
          "codeSnippets": []
        },
        {
          "additions": 349,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/quote/DESIGN.md",
          "changeType": "added",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/apps/virtual-exchange/src/quote/DESIGN.md b/apps/virtual-exchange/src/quote/DESIGN.md\nnew file mode 100644\nindex 000000000..4b952e24f\n--- /dev/null\n+++ b/apps/virtual-exchange/src/quote/DESIGN.md\n@@ -0,0 +1,349 @@\n+# Virtual Exchange Quote \n+\n+> `apps/virtual-exchange/src/quote/*`\n+>\n+>  quote /\n+\n+## 1. \n+\n+Virtual ExchangeVEX RPC /\n+\n+- ****\n+- **** 100K~1M `product_id`\n+- ****\n+- **** `updated_at` \n+\n+\n+\n+- \n+- / O(1)\n+-  product+field \n+- \n+\n+## 2. \n+\n+- / TODO\n+- \n+- /\n+\n+## 3. RPC\n+\n+ `apps/virtual-exchange/src/quote/service.ts` `apps/virtual-exchange/src/index.ts` \n+\n+### 3.1 `VEX/UpdateQuotes`\n+\n+- `IQuoteUpdateAction` 4.1\n+-  `quoteState.update(action)` \n+-  `OK`\n+\n+ VEX \n+\n+### 3.2 `VEX/QueryQuotes`\n+\n+- \n+  - `product_ids: string[]`\n+  - `fields: IQuoteKey[]`\n+  - `updated_at: number`\n+- \n+  1.  product+field `cacheMissed`\n+  2.  `quoteState.filter(product_ids, fields, updated_at)` \n+\n+ ** `updated_at`** \n+\n+### 3.3 `VEX/DumpQuoteState`\n+\n+- `quoteState.dumpAsObject()` \n+- /\n+\n+## 4. \n+\n+### 4.1 `IQuoteUpdateAction`\n+\n+ `apps/virtual-exchange/src/quote/types.ts`\n+\n+- `product_id -> field -> [value: string, updated_at: number]`\n+- \n+  - ****\n+  - ****\n+  - ** string** `@yuants/data-quote` /\n+\n+### 4.2 `IQuoteState`\n+\n+ `apps/virtual-exchange/src/quote/types.ts`\n+\n+- `update(action)`\n+- `getValueTuple(product_id, field)`\n+- `filter(product_ids, fields, updated_at)`\n+- `dumpAsObject()`\n+\n+`apps/virtual-exchange/src/quote/state.ts`  `v1`\n+\n+## 5. v0~v3\n+\n+ `apps/virtual-exchange/src/quote/implementations/*` `apps/virtual-exchange/src/quote/implementations/README.md`\n+\n+### 5.1 v0 Map\n+\n+- `Map<product_id, Map<field, [value, updated_at]>>`\n+- \n+- /Map  GC \n+- \n+\n+### 5.2 v1\n+\n+ product  **** Map/Object \n+\n+-  `FIELDS` `mapFieldNameToOffset`\n+-  2 `[value, updated_at]`\n+-  product `baseIndex + fieldOffset`\n+\n+\n+\n+- **** >= \n+- **/**\n+\n+\n+\n+- /\n+- \n+-  CPU cache \n+\n+### 5.3 v2\n+\n+-  `value`  `timestamp`  `string[]`  `number[]`\n+- \n+- / 6\n+\n+### 5.4 v3 + Float64Array\n+\n+ value \n+\n+- `Float64Array`  `[poolIndex, timestamp]` \n+- \n+\n+\n+\n+## 6. \n+\n+### 6.1 \n+\n+- `apps/virtual-exchange/src/quote/QUOTE_STATE_PERFORMANCE_REPORT.md`\n+- \n+  - v1  Map\n+  - / O(1)/\n+  - `dumpAsObject`  GC\n+\n+### 6.2 \n+\n+`apps/virtual-exchange/src/quote/benchmark/*`\n+\n+- `ForkedQuoteStateComparisonTest` GC /\n+- `worker.ts` JSON\n+- \n+\n+## 7. \n+\n+### 7.1 \n+\n+/\n+\n+- \n+- `QueryQuotes(updated_at)` \n+- \n+\n+### 7.2  Map/Object\n+\n+100K~1M \n+\n+- Map/Object /\n+- GC \n+-  CPU cache \n+\n+## 8. \n+\n+### 8.1  product DoS\n+\n+ v1/v2 `getFieldOffset`  `product_id`  `product_id`  `products`  `mapProductIdToIndex` \n+\n+\n+\n+-  `VEX/QueryQuotes`  `product_ids`\n+- \n+\n+\n+\n+1. **/** product `update` \n+2. ** `VEX/QueryQuotes` ** `product_ids` \n+3. **** TTL/LRU\n+\n+### 8.2 `dumpAsObject` \n+\n+\n+\n+- \n+- /\n+\n+### 8.3 `QueryQuotes`  cacheMissed \n+\n+\n+\n+- `QueryQuotes` \n+-  miss  `UpdateQuotes`\n+\n+## 9. \n+\n+1.  `QueryQuotes`  vs  in-flight \n+2.  `QueryQuotes` \n+3.  `IQuoteState` / `size()``hasProduct()``getStats()`\n+4.  v3 \n+\n+## 10. `QueryQuotes` TODO \n+\n+ `apps/virtual-exchange/src/quote/service.ts`  `VEX/QueryQuotes`  TODO\n+\n+### 10.1  vendor \n+\n+ vendor  quote \n+\n+-  RxJS  `(datasource_id, product_id)`  `Partial<IQuote>` \n+-  `terminal.channel.publishChannel('quote', { pattern: '^<DS>/' }, ...)`  quote \n+-  SQL `WRITE_QUOTE_TO_SQL` \n+\n+\n+\n+- `apps/vendor-okx/src/public-data/quote.ts`\n+- `apps/vendor-gate/src/services/markets/quote.ts`\n+- `apps/vendor-bitget/src/services/markets/quote.ts`\n+- `apps/vendor-huobi/src/services/market-data/quote.ts`\n+\n+\n+\n+- ** vendor  QueryQuotes RPC** push channel/SQL\n+-  `VEX/QueryQuotes`  miss Provider RPC  channel/SQL  Provider \n+\n+### 10.2 \n+\n+-  `QueryQuote Provider` Provider  OKXBBO open_interest \n+- VEX  ****  Provider \n+-  in-flight \n+-  `IQuoteUpdateAction`  `quoteState`\n+\n+### 10.3 `product_id` \n+\n+VEX  `product_id`  `datasource_id`\n+\n+`product_id`  `encodePath` 1  `datasource_id`\n+\n+- `OKX/SWAP/BTC-USDT-SWAP`\n+- `GATE/SPOT/BTC_USDT`\n+\n+VEX `decodePath(product_id)[0]`\n+\n+ `VEX/QueryQuotes`  `datasource_id` \n+\n+### 10.4 Provider RPC \n+\n+ method`Quote/QueryQuotes`\n+\n+- \n+  - `datasource_id: string`\n+  - `product_ids: string[]` product_id  datasource\n+  - `fields: IQuoteKey[]` Provider \n+  - `updated_at: number`\n+  - `timeout_ms?: number` Provider \n+- \n+  - `IQuoteUpdateAction` Provider VEX  merge  Provider \n+\n+Provider  JSON Schema  registry \n+\n+#### 10.4.1  JSON Schema \n+\n+`@yuants/protocol`  JSON Schema  Host`TerminalClient`  schema `libraries/protocol/src/client.ts`\n+\n+ Provider  schema  VEX \n+\n+OKX  BBO Provider schema\n+\n+```json\n+{\n+  \"type\": \"object\",\n+  \"required\": [\"datasource_id\", \"product_ids\", \"fields\", \"updated_at\"],\n+  \"properties\": {\n+    \"datasource_id\": { \"const\": \"OKX\" },\n+    \"product_ids\": { \"type\": \"array\", \"items\": { \"type\": \"string\", \"pattern\": \"^OKX/\" } },\n+    \"fields\": {\n+      \"type\": \"array\",\n+      \"items\": { \"enum\": [\"ask_price\", \"bid_price\", \"ask_volume\", \"bid_volume\"] }\n+    },\n+    \"updated_at\": { \"type\": \"number\" }\n+  }\n+}\n+```\n+\n+ OKX  Provider `open_interest` Provider \n+\n+#### 10.4.2 Provider Schema  VEX \n+\n+ VEX Provider  schema  VEX  JSON Schema \n+\n+ Provider \n+\n+- `properties.datasource_id.const`  datasource `\"OKX\"`\n+- `properties.fields.items.enum`  Provider \n+- `properties.product_ids.items.pattern`  `^<DS>/` Provider \n+\n+VEX \n+\n+-  `terminalInfo.serviceInfo[service_id].schema`  `datasource_id`  `fieldSet` ProviderRegistry\n+-  `TerminalClient`  schema \n+\n+### 10.5 VEX \n+\n+ `VEX/QueryQuotes` \n+\n+1. **** `(product_id, field)`  `cacheMissed`\n+2. ** datasource ** `cacheMissed`  `decodePath(product_id)[0]` \n+3. ** Provider**\n+   -  Provider  set cover\n+   -  Provider Provider \n+4. **** Provider \n+   - `datasource_id` \n+   - `product_ids`  datasource  miss \n+   - `fields`  Provider \n+   - `updated_at` \n+5. **merge ** Provider  `IQuoteUpdateAction`  `quoteState.update(...)`\n+6. **** `quoteState.filter(product_ids, fields, updated_at)` \n+\n+### 10.6 in-flight \n+\n+miss \n+\n+- **in-flight ** `(datasource_id, provider_fields, product_ids_hash, updated_at_bucket)`  Promise/Observable\n+- **** miss  provider  10~50ms \n+- **** per-provider  32per-provider 4\n+- ****\n+  - Provider /\n+  -  provider  1~5s\n+\n+### 10.7  `quoteState` \n+\n+ v1/v2  product 8.1\n+\n+ `VEX/QueryQuotes`  miss  `product_id` \n+\n+\n+\n+- miss  product `peekValueTuple`/`hasProduct`  `getValueTuple` \n+-  product \n+\n+### 10.8 Provider \n+\n+Provider  push \n+\n+-  vendor  publish `quote` channelProvider / quote$ `Quote/QueryQuotes` \n+-  vendor  SQLProvider  SQL \n+\n+## 11. \n+\n+- 2025-12-13\n+  -  `QueryQuotes`  vendor/protocol \n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 23,
          "path": "apps/virtual-exchange/src/quote/request-key.ts",
          "changeType": "deleted",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/apps/virtual-exchange/src/quote/request-key.ts b/apps/virtual-exchange/src/quote/request-key.ts\ndeleted file mode 100644\nindex 600a2fbfe..000000000\n--- a/apps/virtual-exchange/src/quote/request-key.ts\n+++ /dev/null\n@@ -1,23 +0,0 @@\n-import { TextEncoder } from 'util';\n-\n-import { fnv1a64Hex } from '@yuants/utils';\n-\n-const SEP_BYTE = new Uint8Array([0xff]);\n-\n-const encodeStrings = (parts: string[]): Uint8Array => {\n-  const buffers: Uint8Array[] = [];\n-  for (const part of parts) {\n-    buffers.push(new TextEncoder().encode(part));\n-    buffers.push(SEP_BYTE);\n-  }\n-  const totalLength = buffers.reduce((sum, b) => sum + b.length, 0);\n-  const result = new Uint8Array(totalLength);\n-  let offset = 0;\n-  for (const b of buffers) {\n-    result.set(b, offset);\n-    offset += b.length;\n-  }\n-  return result;\n-};\n-\n-export const fnv1a64HexFromStrings = (parts: string[]): string => fnv1a64Hex(encodeStrings(parts));\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 5,
          "path": "apps/virtual-exchange/src/quote/service.ts",
          "changeType": "modified",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/apps/virtual-exchange/src/quote/service.ts b/apps/virtual-exchange/src/quote/service.ts\nindex 21b00f9c4..6ef9b1676 100644\n--- a/apps/virtual-exchange/src/quote/service.ts\n+++ b/apps/virtual-exchange/src/quote/service.ts\n@@ -4,2 +4,2 @@ import { createQuoteState } from './state';\n-import { IQuoteKey, IQuoteState, IQuoteUpdateAction } from './types';\n-import { fillQuoteStateFromUpstream, IQuoteMiss } from './upstream-routing';\n+import { IQuoteKey, IQuoteRequire, IQuoteState, IQuoteUpdateAction } from './types';\n+import { createQuoteProviderRegistry } from './upstream';\n@@ -9,0 +10 @@ const quoteState = createQuoteState();\n+const quoteProviderRegistry = createQuoteProviderRegistry(terminal);\n@@ -52,2 +53,2 @@ const computeCacheMissed = (\n-): IQuoteMiss[] => {\n-  const cacheMissed: IQuoteMiss[] = [];\n+): IQuoteRequire[] => {\n+  const cacheMissed: IQuoteRequire[] = [];\n@@ -89 +90 @@ terminal.server.provideService<\n-    await fillQuoteStateFromUpstream({ terminal, quoteState, cacheMissed, updated_at });\n+    await quoteProviderRegistry.fillQuoteStateFromUpstream({ quoteState, cacheMissed, updated_at });\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "quoteProviderRegistry",
              "code": "const quoteProviderRegistry = createQuoteProviderRegistry(terminal);\n): IQuoteRequire[] => {",
              "lineStart": 10,
              "lineEnd": 53
            },
            {
              "type": "function",
              "name": "cacheMissed",
              "code": "const cacheMissed: IQuoteRequire[] = [];\n  await quoteProviderRegistry.fillQuoteStateFromUpstream({ quoteState, cacheMissed, updated_at });",
              "lineStart": 54,
              "lineEnd": 91
            }
          ]
        },
        {
          "additions": 21,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/quote/types.ts",
          "changeType": "added",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/apps/virtual-exchange/src/quote/types.ts b/apps/virtual-exchange/src/quote/types.ts\nindex e07316e2e..b81ffc066 100644\n--- a/apps/virtual-exchange/src/quote/types.ts\n+++ b/apps/virtual-exchange/src/quote/types.ts\n@@ -1,0 +2 @@ import { IQuote } from '@yuants/data-quote';\n+import { IQuoteServiceMetadata } from '@yuants/exchange';\n@@ -34,0 +36,20 @@ export interface IQuoteState {\n+\n+export interface IQuoteProviderInstance {\n+  terminal_id: string;\n+  service_id: string;\n+}\n+\n+/**\n+ * A \"provider group\" is a capability signature of `GetQuotes`.\n+ * Multiple vendor terminals may provide the same capability; VEX load-balances across instances.\n+ */\n+export interface IQuoteProviderGroup {\n+  group_id: string;\n+  meta: IQuoteServiceMetadata;\n+  mapTerminalIdToInstance: Map<string, IQuoteProviderInstance>;\n+}\n+\n+export interface IQuoteRequire {\n+  product_id: string;\n+  field: IQuoteKey;\n+}\n",
          "codeSnippets": [
            {
              "type": "interface",
              "name": "IQuoteProviderInstance",
              "code": "export interface IQuoteProviderInstance {\n  terminal_id: string;\n  service_id: string;\n}\n\n/**\n * A \"provider group\" is a capability signature of `GetQuotes`.\n * Multiple vendor terminals may provide the same capability; VEX load-balances across instances.\n */",
              "lineStart": 37,
              "lineEnd": 45
            },
            {
              "type": "interface",
              "name": "IQuoteProviderGroup",
              "code": "export interface IQuoteProviderGroup {\n  group_id: string;\n  meta: IQuoteServiceMetadata;\n  mapTerminalIdToInstance: Map<string, IQuoteProviderInstance>;\n}\n",
              "lineStart": 46,
              "lineEnd": 51
            },
            {
              "type": "interface",
              "name": "IQuoteRequire",
              "code": "export interface IQuoteRequire {\n  product_id: string;\n  field: IQuoteKey;\n}",
              "lineStart": 52,
              "lineEnd": 56
            }
          ]
        },
        {
          "additions": 0,
          "deletions": 452,
          "path": "apps/virtual-exchange/src/quote/upstream-routing.ts",
          "changeType": "deleted",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/apps/virtual-exchange/src/quote/upstream-routing.ts b/apps/virtual-exchange/src/quote/upstream-routing.ts\ndeleted file mode 100644\nindex ca026c8dc..000000000\n--- a/apps/virtual-exchange/src/quote/upstream-routing.ts\n+++ /dev/null\n@@ -1,452 +0,0 @@\n-import {\n-  IQuoteUpdateAction as IExchangeQuoteUpdateAction,\n-  IQuoteServiceMetadata,\n-  IQuoteServiceRequestByVEX,\n-  parseQuoteServiceMetadataFromSchema,\n-} from '@yuants/exchange';\n-import { Terminal } from '@yuants/protocol';\n-import { encodePath, formatTime, listWatch, newError } from '@yuants/utils';\n-import { EMPTY, filter, firstValueFrom, from, map, mergeMap, of, tap, timer, toArray } from 'rxjs';\n-import { createSortedPrefixMatcher } from './prefix-matcher';\n-import { fnv1a64HexFromStrings } from './request-key';\n-import { IQuoteKey, IQuoteState, IQuoteUpdateAction } from './types';\n-\n-export interface IQuoteMiss {\n-  product_id: string;\n-  field: IQuoteKey;\n-}\n-\n-// -----------------------------------------------------------------------------\n-// Provider discovery (schema-driven)\n-// -----------------------------------------------------------------------------\n-\n-interface IQuoteProviderInstance {\n-  terminal_id: string;\n-  service_id: string;\n-}\n-\n-/**\n- * A \"provider group\" is a capability signature of `GetQuotes`.\n- * Multiple vendor terminals may provide the same capability; VEX load-balances across instances.\n- */\n-interface IQuoteProviderGroup {\n-  group_id: string;\n-  meta: IQuoteServiceMetadata;\n-  mapTerminalIdToInstance: Map<string, IQuoteProviderInstance>;\n-}\n-\n-type IPlannedRequest = {\n-  group_id: string;\n-  instances: IQuoteProviderInstance[];\n-  req: IQuoteServiceRequestByVEX;\n-};\n-\n-const terminal = Terminal.fromNodeEnv();\n-\n-const quoteServiceInfos$ = terminal.terminalInfos$.pipe(\n-  mergeMap((infos) =>\n-    from(infos).pipe(\n-      //\n-      mergeMap((info) =>\n-        from(Object.values(info.serviceInfo ?? {})).pipe(\n-          filter((serviceInfo) => serviceInfo.method === 'GetQuotes'),\n-          map((serviceInfo) => ({\n-            terminal_id: info.terminal_id,\n-            serviceInfo,\n-          })),\n-          toArray(),\n-        ),\n-      ),\n-    ),\n-  ),\n-);\n-\n-const mapGroupIdToGroup = new Map<string, IQuoteProviderGroup>();\n-\n-/**\n- * Build provider groups from runtime terminal infos.\n- *\n- * Note: `fields` is schema `const`, so VEX must keep a stable order (lexicographical sort).\n- */\n-quoteServiceInfos$\n-  .pipe(\n-    listWatch(\n-      (v) => v.serviceInfo.service_id,\n-      (v) => {\n-        console.info(\n-          formatTime(Date.now()),\n-          `[VEX][QUOTE]DiscoveringGetQuotesProvider...`,\n-          `from terminal ${v.terminal_id}`,\n-          `service ${v.serviceInfo.service_id}`,\n-          `schema:  ${JSON.stringify(v.serviceInfo.schema)}`,\n-        );\n-        try {\n-          const metadata = parseQuoteServiceMetadataFromSchema(v.serviceInfo.schema);\n-          const fields = [...(metadata.fields as unknown as IQuoteKey[])].sort();\n-          const group_id = encodePath(\n-            metadata.product_id_prefix,\n-            fields.join(','),\n-            metadata.max_products_per_request ?? '',\n-          );\n-          const provider: IQuoteProviderInstance = {\n-            terminal_id: v.terminal_id,\n-            service_id: v.serviceInfo.service_id || v.serviceInfo.method,\n-          };\n-          if (mapGroupIdToGroup.get(group_id)) {\n-            mapGroupIdToGroup.get(group_id)!.mapTerminalIdToInstance.set(provider.terminal_id, provider);\n-          } else {\n-            const next: IQuoteProviderGroup = {\n-              group_id,\n-              meta: metadata,\n-              mapTerminalIdToInstance: new Map([[provider.terminal_id, provider]]),\n-            };\n-            mapGroupIdToGroup.set(group_id, next);\n-            console.info('11111111', [...mapGroupIdToGroup.values()]);\n-          }\n-          return of(void 0).pipe(\n-            //\n-            tap({\n-              unsubscribe: () => {\n-                mapGroupIdToGroup.get(group_id)?.mapTerminalIdToInstance.delete(v.terminal_id);\n-                if (mapGroupIdToGroup.get(group_id)?.mapTerminalIdToInstance.size === 0) {\n-                  mapGroupIdToGroup.delete(group_id);\n-                }\n-              },\n-            }),\n-          );\n-        } catch {\n-          // Ignore invalid schemas/providers\n-          console.info(\n-            `[VEX][Quote] Ignored GetQuotes provider from terminal ${v.terminal_id} `,\n-            `service ${v.serviceInfo.service_id} due to invalid schema.`,\n-          );\n-          return EMPTY;\n-        }\n-      },\n-    ),\n-  )\n-  .subscribe();\n-\n-// -----------------------------------------------------------------------------\n-// Load balancing & upstream request execution\n-// -----------------------------------------------------------------------------\n-\n-const mapGroupIdToRoundRobinIndex = new Map<string, number>();\n-const pickInstance = (group_id: string, instances: IQuoteProviderInstance[]): IQuoteProviderInstance => {\n-  if (instances.length === 0) throw newError('VEX_QUOTE_PROVIDER_INSTANCE_EMPTY', { group_id });\n-  const nextIndex = (mapGroupIdToRoundRobinIndex.get(group_id) ?? 0) % instances.length;\n-  mapGroupIdToRoundRobinIndex.set(group_id, nextIndex + 1);\n-  return instances[nextIndex];\n-};\n-\n-/**\n- * Call a specified vendor terminal + service instance.\n- *\n- * Any non-0 response is treated as fatal (strict freshness requirement).\n- */\n-const requestGetQuotes = async (\n-  terminal: Terminal,\n-  instance: IQuoteProviderInstance,\n-  req: IQuoteServiceRequestByVEX,\n-): Promise<IExchangeQuoteUpdateAction> => {\n-  const res = await firstValueFrom(\n-    terminal.client\n-      .request<IQuoteServiceRequestByVEX, IExchangeQuoteUpdateAction>(\n-        'GetQuotes',\n-        instance.terminal_id,\n-        req,\n-        instance.service_id,\n-      )\n-      .pipe(\n-        map((msg) => msg.res),\n-        filter((v): v is Exclude<typeof v, undefined> => v !== undefined),\n-      ),\n-  );\n-  if (res.code !== 0) {\n-    throw newError('VEX_QUOTE_PROVIDER_ERROR', { instance, res });\n-  }\n-  if (res.data === undefined) {\n-    throw newError('VEX_QUOTE_PROVIDER_DATA_MISSING', { instance, res });\n-  }\n-  return res.data as any;\n-};\n-\n-/**\n- * Per-provider (group_id) concurrency limit: 1.\n- * Implemented as a per-group promise tail.\n- */\n-const mapGroupIdToTailPromise = new Map<string, Promise<void>>();\n-const runWithProviderGroupConcurrencyLimit1 = async <T>(\n-  group_id: string,\n-  fn: () => Promise<T>,\n-): Promise<T> => {\n-  const prev = mapGroupIdToTailPromise.get(group_id) ?? Promise.resolve();\n-  let resolveCurrent: () => void = () => {};\n-  const current = new Promise<void>((resolve) => {\n-    resolveCurrent = resolve;\n-  });\n-  mapGroupIdToTailPromise.set(\n-    group_id,\n-    prev.then(() => current),\n-  );\n-  await prev;\n-  try {\n-    return await fn();\n-  } finally {\n-    resolveCurrent();\n-  }\n-};\n-\n-/**\n- * A tiny async limiter: used as a global concurrency cap to avoid request explosions.\n- */\n-const createConcurrencyLimiter = (concurrency: number) => {\n-  const queue: Array<() => void> = [];\n-  let active = 0;\n-  const next = () => {\n-    if (active >= concurrency) return;\n-    const task = queue.shift();\n-    if (!task) return;\n-    active++;\n-    task();\n-  };\n-  return async <T>(fn: () => Promise<T>): Promise<T> => {\n-    return await new Promise<T>((resolve, reject) => {\n-      queue.push(async () => {\n-        try {\n-          resolve(await fn());\n-        } catch (e) {\n-          reject(e);\n-        } finally {\n-          active--;\n-          next();\n-        }\n-      });\n-      next();\n-    });\n-  };\n-};\n-\n-// Global concurrency cap for upstream `GetQuotes` calls (provider-level cap is handled separately).\n-const limitGetQuotes = createConcurrencyLimiter(32);\n-\n-/**\n- * In-flight dedup:\n- * Same (provider group + product batch) should share a single upstream request promise.\n- */\n-const mapKeyToInFlightGetQuotesPromise = new Map<string, Promise<IExchangeQuoteUpdateAction>>();\n-const requestGetQuotesInFlight = (terminal: Terminal, key: string, planned: IPlannedRequest) => {\n-  const existing = mapKeyToInFlightGetQuotesPromise.get(key);\n-  if (existing) return existing;\n-  const promise = limitGetQuotes(() =>\n-    runWithProviderGroupConcurrencyLimit1(planned.group_id, async () => {\n-      const instance = pickInstance(planned.group_id, planned.instances);\n-      return await requestGetQuotes(terminal, instance, planned.req);\n-    }),\n-  ).finally(() => {\n-    mapKeyToInFlightGetQuotesPromise.delete(key);\n-  });\n-  mapKeyToInFlightGetQuotesPromise.set(key, promise);\n-  return promise;\n-};\n-\n-// -----------------------------------------------------------------------------\n-// Routing indices (prefix + field inverted index)\n-// -----------------------------------------------------------------------------\n-\n-type IProviderIndices = ReturnType<typeof buildProviderIndices>;\n-\n-const buildProviderIndices = (groups: IQuoteProviderGroup[]) => {\n-  const mapGroupIdToGroup = new Map(groups.map((x) => [x.group_id, x] as const));\n-  const prefixMatcher = createSortedPrefixMatcher(\n-    groups.map((group) => ({ prefix: group.meta.product_id_prefix, value: group.group_id })),\n-  );\n-  const mapFieldToGroupIds = new Map<IQuoteKey, Set<string>>();\n-  for (const group of groups) {\n-    for (const field of group.meta.fields) {\n-      let groupIds = mapFieldToGroupIds.get(field);\n-      if (!groupIds) {\n-        groupIds = new Set<string>();\n-        mapFieldToGroupIds.set(field, groupIds);\n-      }\n-      groupIds.add(group.group_id);\n-    }\n-  }\n-  return { mapGroupIdToGroup, prefixMatcher, mapFieldToGroupIds };\n-};\n-\n-/**\n- * L1 quote routing (per `docs/zh-Hans/code-guidelines/exchange.md`):\n- * For each missed (product_id, field), route to `S_product_id  S_field`.\n- */\n-const routeMisses = (\n-  cacheMissed: IQuoteMiss[],\n-  indices: IProviderIndices,\n-  updated_at: number,\n-): {\n-  productsByGroupId: Map<string, Set<string>>;\n-  unavailableAction: IQuoteUpdateAction;\n-  unroutableProducts: Set<string>;\n-} => {\n-  const { prefixMatcher, mapFieldToGroupIds } = indices;\n-\n-  const mapProductIdToGroupIds = new Map<string, string[]>();\n-\n-  const productsByGroupId = new Map<string, Set<string>>();\n-  const unroutableProducts = new Set<string>();\n-  // Field unavailable: return \"\" but keep updated_at satisfied to avoid repeated misses.\n-  const unavailableAction: IQuoteUpdateAction = {};\n-\n-  for (const miss of cacheMissed) {\n-    const { product_id, field } = miss;\n-\n-    let productGroupIds = mapProductIdToGroupIds.get(product_id);\n-    if (!productGroupIds) {\n-      productGroupIds = prefixMatcher.match(product_id);\n-      mapProductIdToGroupIds.set(product_id, productGroupIds);\n-    }\n-    if (productGroupIds.length === 0) {\n-      unroutableProducts.add(product_id);\n-      continue;\n-    }\n-\n-    const fieldGroupIds = mapFieldToGroupIds.get(field);\n-    if (!fieldGroupIds) {\n-      if (!unavailableAction[product_id]) unavailableAction[product_id] = {};\n-      unavailableAction[product_id]![field] = ['', updated_at];\n-      continue;\n-    }\n-\n-    let matched = false;\n-    for (const group_id of productGroupIds) {\n-      if (!fieldGroupIds.has(group_id)) continue;\n-      matched = true;\n-      let productIds = productsByGroupId.get(group_id);\n-      if (!productIds) {\n-        productIds = new Set<string>();\n-        productsByGroupId.set(group_id, productIds);\n-      }\n-      productIds.add(product_id);\n-    }\n-\n-    if (!matched) {\n-      if (!unavailableAction[product_id]) unavailableAction[product_id] = {};\n-      unavailableAction[product_id]![field] = ['', updated_at];\n-    }\n-  }\n-\n-  return { productsByGroupId, unavailableAction, unroutableProducts };\n-};\n-\n-const createRequestKey = (group_id: string, batchProductIds: string[]) =>\n-  encodePath(group_id, fnv1a64HexFromStrings(batchProductIds));\n-\n-const planRequests = (\n-  productsByGroupId: Map<string, Set<string>>,\n-  mapGroupIdToGroup: Map<string, IQuoteProviderGroup>,\n-): Array<{ key: string; planned: IPlannedRequest }> => {\n-  const plannedRequests: Array<{ key: string; planned: IPlannedRequest }> = [];\n-  for (const [group_id, productIdSet] of productsByGroupId) {\n-    const group = mapGroupIdToGroup.get(group_id);\n-    if (!group) continue;\n-    const sortedProductIds = [...productIdSet].sort();\n-    const max = group.meta.max_products_per_request ?? sortedProductIds.length;\n-    for (let i = 0; i < sortedProductIds.length; i += max) {\n-      const batchProductIds = sortedProductIds.slice(i, i + max);\n-      const key = createRequestKey(group_id, batchProductIds);\n-      plannedRequests.push({\n-        key,\n-        planned: {\n-          group_id,\n-          instances: Array.from(group.mapTerminalIdToInstance.values()),\n-          req: { product_ids: batchProductIds, fields: group.meta.fields as any },\n-        },\n-      });\n-    }\n-  }\n-  return plannedRequests;\n-};\n-\n-export const fillQuoteStateFromUpstream = async (params: {\n-  terminal: Terminal;\n-  quoteState: IQuoteState;\n-  cacheMissed: IQuoteMiss[];\n-  updated_at: number;\n-}): Promise<void> => {\n-  const { terminal, quoteState, cacheMissed, updated_at } = params;\n-  if (cacheMissed.length === 0) return;\n-\n-  const providerGroups = Array.from(mapGroupIdToGroup.values());\n-  console.info(\n-    formatTime(Date.now()),\n-    `[VEX][Quote]UpstreamProviderDiscovery`,\n-    ` Discovered ${providerGroups.length} GetQuotes provider groups from terminal infos.`,\n-    JSON.stringify(providerGroups),\n-  );\n-  if (providerGroups.length === 0) {\n-    throw newError('VEX_QUOTE_PROVIDER_NOT_FOUND', { method: 'GetQuotes' });\n-  }\n-\n-  const indices = buildProviderIndices(providerGroups);\n-  const { productsByGroupId, unavailableAction, unroutableProducts } = routeMisses(\n-    cacheMissed,\n-    indices,\n-    updated_at,\n-  );\n-\n-  console.info(\n-    formatTime(Date.now()),\n-    `[VEX][Quote]RouteDispatched`,\n-    ` Routed ${cacheMissed.length} missed quotes to ${productsByGroupId.size} provider groups, ` +\n-      `${unroutableProducts.size} unroutable products.`,\n-    JSON.stringify({\n-      productsByGroupId: [...productsByGroupId.entries()].map(([group_id, productIds]) => ({\n-        group_id,\n-        product_ids: [...productIds],\n-      })),\n-      unroutable_products: [...unroutableProducts],\n-      unavailable_action: unavailableAction,\n-    }),\n-  );\n-\n-  if (unroutableProducts.size !== 0) {\n-    throw newError('VEX_QUOTE_PRODUCT_UNROUTABLE', {\n-      updated_at,\n-      unroutable_products: [...unroutableProducts].slice(0, 200),\n-      unroutable_products_total: unroutableProducts.size,\n-    });\n-  }\n-\n-  quoteState.update(unavailableAction);\n-\n-  const plannedRequests = planRequests(productsByGroupId, indices.mapGroupIdToGroup);\n-\n-  console.info(\n-    formatTime(Date.now()),\n-    `[VEX][Quote]RequestPlanned`,\n-    `Planned ${plannedRequests.length} upstream GetQuotes requests.`,\n-    JSON.stringify(\n-      plannedRequests.map(({ key, planned }) => ({\n-        key,\n-        group_id: planned.group_id,\n-        product_ids: planned.req.product_ids,\n-        fields: planned.req.fields,\n-      })),\n-    ),\n-  );\n-\n-  const actions = await Promise.all(\n-    plannedRequests.map(async ({ key, planned }) => await requestGetQuotesInFlight(terminal, key, planned)),\n-  );\n-\n-  console.debug(\n-    formatTime(Date.now()),\n-    `[VEX][Quote]RequestReceived`,\n-    `Received ${actions.length} upstream GetQuotes responses.`,\n-    // JSON.stringify(actions),\n-  );\n-\n-  for (const action of actions) {\n-    quoteState.update(action as unknown as IQuoteUpdateAction);\n-  }\n-};\n",
          "codeSnippets": []
        },
        {
          "additions": 137,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/quote/upstream/executor.ts",
          "changeType": "added",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/apps/virtual-exchange/src/quote/upstream/executor.ts b/apps/virtual-exchange/src/quote/upstream/executor.ts\nnew file mode 100644\nindex 000000000..f7acd3ced\n--- /dev/null\n+++ b/apps/virtual-exchange/src/quote/upstream/executor.ts\n@@ -0,0 +1,137 @@\n+import {\n+  IQuoteUpdateAction as IExchangeQuoteUpdateAction,\n+  IQuoteServiceRequestByVEX,\n+} from '@yuants/exchange';\n+import { Terminal } from '@yuants/protocol';\n+import { newError } from '@yuants/utils';\n+import { filter, firstValueFrom, map } from 'rxjs';\n+import { IQuoteProviderInstance } from '../types';\n+import { IPlannedRequestWithKey } from './router';\n+\n+type IPlannedRequest = IPlannedRequestWithKey['planned'];\n+\n+const createConcurrencyLimiter = (concurrency: number) => {\n+  const queue: Array<() => void> = [];\n+  let active = 0;\n+  const next = () => {\n+    if (active >= concurrency) return;\n+    const task = queue.shift();\n+    if (!task) return;\n+    active++;\n+    task();\n+  };\n+  return async <T>(fn: () => Promise<T>): Promise<T> =>\n+    await new Promise<T>((resolve, reject) => {\n+      queue.push(async () => {\n+        try {\n+          resolve(await fn());\n+        } catch (e) {\n+          reject(e);\n+        } finally {\n+          active--;\n+          next();\n+        }\n+      });\n+      next();\n+    });\n+};\n+\n+const pickInstance = (params: {\n+  group_id: string;\n+  instances: IQuoteProviderInstance[];\n+  mapGroupIdToRoundRobinIndex: Map<string, number>;\n+}): IQuoteProviderInstance => {\n+  const { group_id, instances, mapGroupIdToRoundRobinIndex } = params;\n+  if (instances.length === 0) throw newError('VEX_QUOTE_PROVIDER_INSTANCE_EMPTY', { group_id });\n+  const nextIndex = (mapGroupIdToRoundRobinIndex.get(group_id) ?? 0) % instances.length;\n+  mapGroupIdToRoundRobinIndex.set(group_id, nextIndex + 1);\n+  return instances[nextIndex];\n+};\n+\n+const requestGetQuotes = async (params: {\n+  terminal: Terminal;\n+  instance: IQuoteProviderInstance;\n+  req: IQuoteServiceRequestByVEX;\n+}): Promise<IExchangeQuoteUpdateAction> => {\n+  const { terminal, instance, req } = params;\n+  const res = await firstValueFrom(\n+    terminal.client\n+      .request<IQuoteServiceRequestByVEX, IExchangeQuoteUpdateAction>(\n+        'GetQuotes',\n+        instance.terminal_id,\n+        req,\n+        instance.service_id,\n+      )\n+      .pipe(\n+        map((msg) => msg.res),\n+        filter((v): v is Exclude<typeof v, undefined> => v !== undefined),\n+      ),\n+  );\n+  if (res.code !== 0) throw newError('VEX_QUOTE_PROVIDER_ERROR', { instance, res });\n+  if (res.data === undefined) throw newError('VEX_QUOTE_PROVIDER_DATA_MISSING', { instance, res });\n+  return res.data as any;\n+};\n+\n+const runWithProviderGroupConcurrencyLimit1 = async <T>(params: {\n+  group_id: string;\n+  mapGroupIdToTailPromise: Map<string, Promise<void>>;\n+  fn: () => Promise<T>;\n+}): Promise<T> => {\n+  const { group_id, mapGroupIdToTailPromise, fn } = params;\n+  const prev = mapGroupIdToTailPromise.get(group_id) ?? Promise.resolve();\n+  let resolveCurrent: () => void = () => {};\n+  const current = new Promise<void>((resolve) => {\n+    resolveCurrent = resolve;\n+  });\n+  mapGroupIdToTailPromise.set(\n+    group_id,\n+    prev.then(() => current),\n+  );\n+  await prev;\n+  try {\n+    return await fn();\n+  } finally {\n+    resolveCurrent();\n+  }\n+};\n+\n+export interface IGetQuotesExecutor {\n+  execute: (requests: IPlannedRequestWithKey[]) => Promise<IExchangeQuoteUpdateAction[]>;\n+}\n+\n+export const createGetQuotesExecutor = (terminal: Terminal): IGetQuotesExecutor => {\n+  const mapGroupIdToRoundRobinIndex = new Map<string, number>();\n+  const mapGroupIdToTailPromise = new Map<string, Promise<void>>();\n+  const limitGetQuotes = createConcurrencyLimiter(32);\n+\n+  const mapKeyToInFlightGetQuotesPromise = new Map<string, Promise<IExchangeQuoteUpdateAction>>();\n+  const requestGetQuotesInFlight = (key: string, planned: IPlannedRequest) => {\n+    const existing = mapKeyToInFlightGetQuotesPromise.get(key);\n+    if (existing) return existing;\n+    const promise = limitGetQuotes(() =>\n+      runWithProviderGroupConcurrencyLimit1({\n+        group_id: planned.group_id,\n+        mapGroupIdToTailPromise,\n+        fn: async () => {\n+          const instance = pickInstance({\n+            group_id: planned.group_id,\n+            instances: planned.instances,\n+            mapGroupIdToRoundRobinIndex,\n+          });\n+          return await requestGetQuotes({ terminal, instance, req: planned.req });\n+        },\n+      }),\n+    ).finally(() => {\n+      mapKeyToInFlightGetQuotesPromise.delete(key);\n+    });\n+    mapKeyToInFlightGetQuotesPromise.set(key, promise);\n+    return promise;\n+  };\n+\n+  return {\n+    execute: async (requests) =>\n+      await Promise.all(\n+        requests.map(async ({ key, planned }) => await requestGetQuotesInFlight(key, planned)),\n+      ),\n+  };\n+};\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "createConcurrencyLimiter",
              "code": "const createConcurrencyLimiter = (concurrency: number) => {",
              "lineStart": 13,
              "lineEnd": 13
            },
            {
              "type": "function",
              "name": "queue",
              "code": "const queue: Array<() => void> = [];",
              "lineStart": 14,
              "lineEnd": 14
            },
            {
              "type": "function",
              "name": "active",
              "code": "let active = 0;",
              "lineStart": 15,
              "lineEnd": 15
            },
            {
              "type": "function",
              "name": "next",
              "code": "const next = () => {\n  if (active >= concurrency) return;",
              "lineStart": 16,
              "lineEnd": 17
            },
            {
              "type": "function",
              "name": "task",
              "code": "  const task = queue.shift();\n  if (!task) return;\n  active++;\n  task();\n};\nreturn async <T>(fn: () => Promise<T>): Promise<T> =>\n  await new Promise<T>((resolve, reject) => {\n    queue.push(async () => {\n      try {\n        resolve(await fn());\n      } catch (e) {\n        reject(e);\n      } finally {\n        active--;\n        next();",
              "lineStart": 18,
              "lineEnd": 38
            },
            {
              "type": "function",
              "name": "pickInstance",
              "code": "const pickInstance = (params: {\n  group_id: string;\n  instances: IQuoteProviderInstance[];\n  mapGroupIdToRoundRobinIndex: Map<string, number>;\n}): IQuoteProviderInstance => {\n  const { group_id, instances, mapGroupIdToRoundRobinIndex } = params;\n  if (instances.length === 0) throw newError('VEX_QUOTE_PROVIDER_INSTANCE_EMPTY', { group_id });",
              "lineStart": 39,
              "lineEnd": 45
            },
            {
              "type": "function",
              "name": "nextIndex",
              "code": "  const nextIndex = (mapGroupIdToRoundRobinIndex.get(group_id) ?? 0) % instances.length;\n  mapGroupIdToRoundRobinIndex.set(group_id, nextIndex + 1);\n  return instances[nextIndex];\n};\n",
              "lineStart": 46,
              "lineEnd": 50
            },
            {
              "type": "function",
              "name": "requestGetQuotes",
              "code": "const requestGetQuotes = async (params: {\n  terminal: Terminal;\n  instance: IQuoteProviderInstance;\n  req: IQuoteServiceRequestByVEX;\n}): Promise<IExchangeQuoteUpdateAction> => {\n  const { terminal, instance, req } = params;",
              "lineStart": 51,
              "lineEnd": 56
            },
            {
              "type": "function",
              "name": "res",
              "code": "const res = await firstValueFrom(\n  terminal.client\n    .request<IQuoteServiceRequestByVEX, IExchangeQuoteUpdateAction>(\n      'GetQuotes',\n      instance.terminal_id,\n      req,\n      instance.service_id,\n    )\n    .pipe(\n      map((msg) => msg.res),\n      filter((v): v is Exclude<typeof v, undefined> => v !== undefined),\n    ),\n);\nif (res.code !== 0) throw newError('VEX_QUOTE_PROVIDER_ERROR', { instance, res });\nif (res.data === undefined) throw newError('VEX_QUOTE_PROVIDER_DATA_MISSING', { instance, res });",
              "lineStart": 57,
              "lineEnd": 74
            },
            {
              "type": "function",
              "name": "runWithProviderGroupConcurrencyLimit1",
              "code": "const runWithProviderGroupConcurrencyLimit1 = async <T>(params: {\n  group_id: string;\n  mapGroupIdToTailPromise: Map<string, Promise<void>>;\n  fn: () => Promise<T>;\n}): Promise<T> => {\n  const { group_id, mapGroupIdToTailPromise, fn } = params;",
              "lineStart": 75,
              "lineEnd": 80
            },
            {
              "type": "function",
              "name": "prev",
              "code": "const prev = mapGroupIdToTailPromise.get(group_id) ?? Promise.resolve();",
              "lineStart": 81,
              "lineEnd": 81
            },
            {
              "type": "function",
              "name": "resolveCurrent",
              "code": "let resolveCurrent: () => void = () => {};",
              "lineStart": 82,
              "lineEnd": 82
            },
            {
              "type": "function",
              "name": "current",
              "code": "  const current = new Promise<void>((resolve) => {\n    resolveCurrent = resolve;\n  });\n  mapGroupIdToTailPromise.set(\n    group_id,\n    prev.then(() => current),\n  );\n  await prev;\n  try {\n    return await fn();\n  } finally {\n    resolveCurrent();\n  }\n};\n",
              "lineStart": 83,
              "lineEnd": 97
            },
            {
              "type": "interface",
              "name": "IGetQuotesExecutor",
              "code": "export interface IGetQuotesExecutor {\n  execute: (requests: IPlannedRequestWithKey[]) => Promise<IExchangeQuoteUpdateAction[]>;\n}\n",
              "lineStart": 98,
              "lineEnd": 101
            },
            {
              "type": "function",
              "name": "createGetQuotesExecutor",
              "code": "export const createGetQuotesExecutor = (terminal: Terminal): IGetQuotesExecutor => {",
              "lineStart": 102,
              "lineEnd": 102
            },
            {
              "type": "function",
              "name": "mapGroupIdToRoundRobinIndex",
              "code": "const mapGroupIdToRoundRobinIndex = new Map<string, number>();",
              "lineStart": 103,
              "lineEnd": 103
            },
            {
              "type": "function",
              "name": "mapGroupIdToTailPromise",
              "code": "const mapGroupIdToTailPromise = new Map<string, Promise<void>>();",
              "lineStart": 104,
              "lineEnd": 104
            },
            {
              "type": "function",
              "name": "limitGetQuotes",
              "code": "const limitGetQuotes = createConcurrencyLimiter(32);\n",
              "lineStart": 105,
              "lineEnd": 106
            },
            {
              "type": "function",
              "name": "mapKeyToInFlightGetQuotesPromise",
              "code": "const mapKeyToInFlightGetQuotesPromise = new Map<string, Promise<IExchangeQuoteUpdateAction>>();",
              "lineStart": 107,
              "lineEnd": 107
            },
            {
              "type": "function",
              "name": "requestGetQuotesInFlight",
              "code": "const requestGetQuotesInFlight = (key: string, planned: IPlannedRequest) => {",
              "lineStart": 108,
              "lineEnd": 108
            },
            {
              "type": "function",
              "name": "existing",
              "code": "const existing = mapKeyToInFlightGetQuotesPromise.get(key);\nif (existing) return existing;",
              "lineStart": 109,
              "lineEnd": 110
            },
            {
              "type": "function",
              "name": "promise",
              "code": "const promise = limitGetQuotes(() =>\n  runWithProviderGroupConcurrencyLimit1({\n    group_id: planned.group_id,\n    mapGroupIdToTailPromise,\n    fn: async () => {",
              "lineStart": 111,
              "lineEnd": 115
            },
            {
              "type": "function",
              "name": "instance",
              "code": "        const instance = pickInstance({\n          group_id: planned.group_id,\n          instances: planned.instances,\n          mapGroupIdToRoundRobinIndex,\n        });\n        return await requestGetQuotes({ terminal, instance, req: planned.req });\n      },\n    }),\n  ).finally(() => {\n    mapKeyToInFlightGetQuotesPromise.delete(key);\n  });\n  mapKeyToInFlightGetQuotesPromise.set(key, promise);\n  return promise;\n};\n",
              "lineStart": 116,
              "lineEnd": 138
            }
          ]
        },
        {
          "additions": 2,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/quote/upstream/index.ts",
          "changeType": "added",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/apps/virtual-exchange/src/quote/upstream/index.ts b/apps/virtual-exchange/src/quote/upstream/index.ts\nnew file mode 100644\nindex 000000000..10439c0fa\n--- /dev/null\n+++ b/apps/virtual-exchange/src/quote/upstream/index.ts\n@@ -0,0 +1,2 @@\n+export { createQuoteProviderRegistry } from './registry';\n+export type { IQuoteProviderRegistry } from './registry';\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/quote/{ => upstream}/prefix-matcher.ts",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 204,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/quote/upstream/registry.ts",
          "changeType": "added",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/apps/virtual-exchange/src/quote/upstream/registry.ts b/apps/virtual-exchange/src/quote/upstream/registry.ts\nnew file mode 100644\nindex 000000000..c4ce97bd6\n--- /dev/null\n+++ b/apps/virtual-exchange/src/quote/upstream/registry.ts\n@@ -0,0 +1,204 @@\n+import { IQuoteServiceMetadata, parseQuoteServiceMetadataFromSchema } from '@yuants/exchange';\n+import { Terminal } from '@yuants/protocol';\n+import { encodePath, formatTime, listWatch, newError } from '@yuants/utils';\n+import { EMPTY, map, of, tap } from 'rxjs';\n+import {\n+  IQuoteKey,\n+  IQuoteProviderGroup,\n+  IQuoteProviderInstance,\n+  IQuoteRequire,\n+  IQuoteState,\n+  IQuoteUpdateAction,\n+} from '../types';\n+import { createGetQuotesExecutor } from './executor';\n+import {\n+  buildProviderIndices,\n+  createQuoteRouter,\n+  IProviderIndices,\n+  IPlannedRequestWithKey,\n+  QuoteUpstreamPlan,\n+} from './router';\n+\n+export interface IQuoteProviderRegistry {\n+  snapshot: () => { groups: IQuoteProviderGroup[]; indices: IProviderIndices };\n+  planOrThrow: (misses: IQuoteRequire[], updated_at: number) => QuoteUpstreamPlan;\n+  execute: (requests: IPlannedRequestWithKey[]) => Promise<IQuoteUpdateAction[]>;\n+  fillQuoteStateFromUpstream: (params: {\n+    quoteState: IQuoteState;\n+    cacheMissed: IQuoteRequire[];\n+    updated_at: number;\n+  }) => Promise<void>;\n+}\n+\n+const normalizeMetadataForGroup = (metadata: IQuoteServiceMetadata): IQuoteServiceMetadata => {\n+  const fields = [...(metadata.fields as unknown as IQuoteKey[])].sort();\n+  return { ...metadata, fields };\n+};\n+\n+export const createQuoteProviderRegistry = (terminal: Terminal): IQuoteProviderRegistry => {\n+  const router = createQuoteRouter();\n+  const executor = createGetQuotesExecutor(terminal);\n+\n+  const mapGroupIdToGroup = new Map<string, IQuoteProviderGroup>();\n+  let version = 0;\n+  let cachedIndices: { version: number; indices: IProviderIndices } | undefined;\n+\n+  const quoteServiceInfos$ = terminal.terminalInfos$.pipe(\n+    map((infos) =>\n+      infos.flatMap((info) =>\n+        Object.values(info.serviceInfo ?? {})\n+          .filter((serviceInfo) => serviceInfo.method === 'GetQuotes')\n+          .map((serviceInfo) => ({ terminal_id: info.terminal_id, serviceInfo })),\n+      ),\n+    ),\n+  );\n+\n+  quoteServiceInfos$\n+    .pipe(\n+      listWatch(\n+        (v) => v.serviceInfo.service_id,\n+        (v) => {\n+          console.info(\n+            formatTime(Date.now()),\n+            `[VEX][Quote]DiscoveringGetQuotesProvider...`,\n+            `from terminal ${v.terminal_id}`,\n+            `service ${v.serviceInfo.service_id}`,\n+            `schema:  ${JSON.stringify(v.serviceInfo.schema)}`,\n+          );\n+          try {\n+            const metadata = normalizeMetadataForGroup(\n+              parseQuoteServiceMetadataFromSchema(v.serviceInfo.schema),\n+            );\n+            const group_id = encodePath(\n+              metadata.product_id_prefix,\n+              (metadata.fields as any[]).join(','),\n+              metadata.max_products_per_request ?? '',\n+            );\n+            const provider: IQuoteProviderInstance = {\n+              terminal_id: v.terminal_id,\n+              service_id: v.serviceInfo.service_id || v.serviceInfo.method,\n+            };\n+            const group =\n+              mapGroupIdToGroup.get(group_id) ??\n+              (() => {\n+                const next: IQuoteProviderGroup = {\n+                  group_id,\n+                  meta: metadata,\n+                  mapTerminalIdToInstance: new Map<string, IQuoteProviderInstance>(),\n+                };\n+                mapGroupIdToGroup.set(group_id, next);\n+                return next;\n+              })();\n+            group.mapTerminalIdToInstance.set(provider.terminal_id, provider);\n+            version++;\n+            return of(void 0).pipe(\n+              tap({\n+                unsubscribe: () => {\n+                  mapGroupIdToGroup.get(group_id)?.mapTerminalIdToInstance.delete(v.terminal_id);\n+                  if (mapGroupIdToGroup.get(group_id)?.mapTerminalIdToInstance.size === 0) {\n+                    mapGroupIdToGroup.delete(group_id);\n+                  }\n+                  version++;\n+                },\n+              }),\n+            );\n+          } catch {\n+            console.info(\n+              formatTime(Date.now()),\n+              `[VEX][Quote]IgnoredGetQuotesProvider`,\n+              `Ignored GetQuotes provider from terminal ${v.terminal_id}`,\n+              `service ${v.serviceInfo.service_id} due to invalid schema.`,\n+            );\n+            return EMPTY;\n+          }\n+        },\n+      ),\n+    )\n+    .subscribe();\n+\n+  const snapshot = () => {\n+    const groups = Array.from(mapGroupIdToGroup.values());\n+    if (!cachedIndices || cachedIndices.version !== version) {\n+      cachedIndices = { version, indices: buildProviderIndices(groups) };\n+    }\n+    return { groups, indices: cachedIndices.indices };\n+  };\n+\n+  const planOrThrow = (misses: IQuoteRequire[], updated_at: number): QuoteUpstreamPlan => {\n+    const { groups, indices } = snapshot();\n+    if (groups.length === 0) throw newError('VEX_QUOTE_PROVIDER_NOT_FOUND', { method: 'GetQuotes' });\n+    return router.planOrThrow(misses, indices, updated_at);\n+  };\n+\n+  const execute = async (requests: IPlannedRequestWithKey[]): Promise<IQuoteUpdateAction[]> =>\n+    (await executor.execute(requests)) as any;\n+\n+  const fillQuoteStateFromUpstream: IQuoteProviderRegistry['fillQuoteStateFromUpstream'] = async (params) => {\n+    const { quoteState, cacheMissed, updated_at } = params;\n+    if (cacheMissed.length === 0) return;\n+\n+    const { groups } = snapshot();\n+    console.info(\n+      formatTime(Date.now()),\n+      `[VEX][Quote]UpstreamProviderDiscovery`,\n+      ` Discovered ${groups.length} GetQuotes provider groups from terminal infos.`,\n+      JSON.stringify(groups),\n+    );\n+\n+    const plan = planOrThrow(cacheMissed, updated_at);\n+\n+    const mapGroupIdToProductIds = new Map<string, Set<string>>();\n+    for (const { planned } of plan.requests) {\n+      let productIds = mapGroupIdToProductIds.get(planned.group_id);\n+      if (!productIds) {\n+        productIds = new Set<string>();\n+        mapGroupIdToProductIds.set(planned.group_id, productIds);\n+      }\n+      for (const product_id of planned.req.product_ids) productIds.add(product_id);\n+    }\n+    console.info(\n+      formatTime(Date.now()),\n+      `[VEX][Quote]RouteDispatched`,\n+      ` Routed ${cacheMissed.length} missed quotes to ${mapGroupIdToProductIds.size} provider groups.`,\n+      JSON.stringify({\n+        productsByGroupId: [...mapGroupIdToProductIds.entries()].map(([group_id, productIds]) => ({\n+          group_id,\n+          product_ids: [...productIds],\n+        })),\n+        default_action: plan.defaultAction,\n+      }),\n+    );\n+\n+    if (Object.keys(plan.defaultAction).length > 0) {\n+      quoteState.update(plan.defaultAction);\n+    }\n+\n+    console.info(\n+      formatTime(Date.now()),\n+      `[VEX][Quote]RequestPlanned`,\n+      `Planned ${plan.requests.length} upstream GetQuotes requests.`,\n+      JSON.stringify(\n+        plan.requests.map(({ key, planned }) => ({\n+          key,\n+          group_id: planned.group_id,\n+          product_ids: planned.req.product_ids,\n+          fields: planned.req.fields,\n+        })),\n+      ),\n+    );\n+\n+    const actions = await execute(plan.requests);\n+    console.debug(\n+      formatTime(Date.now()),\n+      `[VEX][Quote]RequestReceived`,\n+      `Received ${actions.length} upstream GetQuotes responses.`,\n+      JSON.stringify(actions),\n+    );\n+\n+    for (const action of actions) {\n+      quoteState.update(action);\n+    }\n+  };\n+\n+  return { snapshot, planOrThrow, execute, fillQuoteStateFromUpstream };\n+};\n",
          "codeSnippets": [
            {
              "type": "interface",
              "name": "IQuoteProviderRegistry",
              "code": "export interface IQuoteProviderRegistry {\n  snapshot: () => { groups: IQuoteProviderGroup[]; indices: IProviderIndices };\n  planOrThrow: (misses: IQuoteRequire[], updated_at: number) => QuoteUpstreamPlan;\n  execute: (requests: IPlannedRequestWithKey[]) => Promise<IQuoteUpdateAction[]>;\n  fillQuoteStateFromUpstream: (params: {\n    quoteState: IQuoteState;\n    cacheMissed: IQuoteRequire[];\n    updated_at: number;\n  }) => Promise<void>;\n}\n",
              "lineStart": 22,
              "lineEnd": 32
            },
            {
              "type": "function",
              "name": "normalizeMetadataForGroup",
              "code": "const normalizeMetadataForGroup = (metadata: IQuoteServiceMetadata): IQuoteServiceMetadata => {",
              "lineStart": 33,
              "lineEnd": 33
            },
            {
              "type": "function",
              "name": "fields",
              "code": "  const fields = [...(metadata.fields as unknown as IQuoteKey[])].sort();\n  return { ...metadata, fields };\n};\n",
              "lineStart": 34,
              "lineEnd": 37
            },
            {
              "type": "function",
              "name": "createQuoteProviderRegistry",
              "code": "export const createQuoteProviderRegistry = (terminal: Terminal): IQuoteProviderRegistry => {",
              "lineStart": 38,
              "lineEnd": 38
            },
            {
              "type": "function",
              "name": "router",
              "code": "const router = createQuoteRouter();",
              "lineStart": 39,
              "lineEnd": 39
            },
            {
              "type": "function",
              "name": "executor",
              "code": "const executor = createGetQuotesExecutor(terminal);\n",
              "lineStart": 40,
              "lineEnd": 41
            },
            {
              "type": "function",
              "name": "mapGroupIdToGroup",
              "code": "const mapGroupIdToGroup = new Map<string, IQuoteProviderGroup>();",
              "lineStart": 42,
              "lineEnd": 42
            },
            {
              "type": "function",
              "name": "version",
              "code": "let version = 0;",
              "lineStart": 43,
              "lineEnd": 43
            },
            {
              "type": "function",
              "name": "cachedIndices",
              "code": "let cachedIndices: { version: number; indices: IProviderIndices } | undefined;\n",
              "lineStart": 44,
              "lineEnd": 45
            },
            {
              "type": "function",
              "name": "quoteServiceInfos",
              "code": "const quoteServiceInfos$ = terminal.terminalInfos$.pipe(\n  map((infos) =>\n    infos.flatMap((info) =>\n      Object.values(info.serviceInfo ?? {})\n        .filter((serviceInfo) => serviceInfo.method === 'GetQuotes')\n        .map((serviceInfo) => ({ terminal_id: info.terminal_id, serviceInfo })),\n    ),\n  ),\n);\n\nquoteServiceInfos$\n  .pipe(\n    listWatch(\n      (v) => v.serviceInfo.service_id,\n      (v) => {",
              "lineStart": 46,
              "lineEnd": 68
            },
            {
              "type": "function",
              "name": "metadata",
              "code": "const metadata = normalizeMetadataForGroup(\n  parseQuoteServiceMetadataFromSchema(v.serviceInfo.schema),\n);",
              "lineStart": 69,
              "lineEnd": 71
            },
            {
              "type": "function",
              "name": "group_id",
              "code": "const group_id = encodePath(\n  metadata.product_id_prefix,\n  (metadata.fields as any[]).join(','),\n  metadata.max_products_per_request ?? '',\n);",
              "lineStart": 72,
              "lineEnd": 76
            },
            {
              "type": "function",
              "name": "provider",
              "code": "const provider: IQuoteProviderInstance = {\n  terminal_id: v.terminal_id,\n  service_id: v.serviceInfo.service_id || v.serviceInfo.method,\n};",
              "lineStart": 77,
              "lineEnd": 80
            },
            {
              "type": "function",
              "name": "group",
              "code": "const group =\n  mapGroupIdToGroup.get(group_id) ??\n  (() => {",
              "lineStart": 81,
              "lineEnd": 83
            },
            {
              "type": "function",
              "name": "next",
              "code": "    const next: IQuoteProviderGroup = {\n      group_id,\n      meta: metadata,\n      mapTerminalIdToInstance: new Map<string, IQuoteProviderInstance>(),\n    };\n    mapGroupIdToGroup.set(group_id, next);\n    return next;\n  })();\ngroup.mapTerminalIdToInstance.set(provider.terminal_id, provider);\nversion++;\nreturn of(void 0).pipe(\n  tap({\n    unsubscribe: () => {\n      mapGroupIdToGroup.get(group_id)?.mapTerminalIdToInstance.delete(v.terminal_id);\n      if (mapGroupIdToGroup.get(group_id)?.mapTerminalIdToInstance.size === 0) {",
              "lineStart": 84,
              "lineEnd": 118
            },
            {
              "type": "function",
              "name": "snapshot",
              "code": "const snapshot = () => {",
              "lineStart": 119,
              "lineEnd": 119
            },
            {
              "type": "function",
              "name": "groups",
              "code": "  const groups = Array.from(mapGroupIdToGroup.values());\n  if (!cachedIndices || cachedIndices.version !== version) {\n    cachedIndices = { version, indices: buildProviderIndices(groups) };\n  }\n  return { groups, indices: cachedIndices.indices };\n};\n",
              "lineStart": 120,
              "lineEnd": 126
            },
            {
              "type": "function",
              "name": "planOrThrow",
              "code": "const planOrThrow = (misses: IQuoteRequire[], updated_at: number): QuoteUpstreamPlan => {\n  const { groups, indices } = snapshot();\n  if (groups.length === 0) throw newError('VEX_QUOTE_PROVIDER_NOT_FOUND', { method: 'GetQuotes' });\n  return router.planOrThrow(misses, indices, updated_at);\n};\n",
              "lineStart": 127,
              "lineEnd": 132
            },
            {
              "type": "function",
              "name": "execute",
              "code": "const execute = async (requests: IPlannedRequestWithKey[]): Promise<IQuoteUpdateAction[]> =>\n  (await executor.execute(requests)) as any;\n",
              "lineStart": 133,
              "lineEnd": 135
            },
            {
              "type": "function",
              "name": "fillQuoteStateFromUpstream",
              "code": "const fillQuoteStateFromUpstream: IQuoteProviderRegistry['fillQuoteStateFromUpstream'] = async (params) => {\n  const { quoteState, cacheMissed, updated_at } = params;\n  if (cacheMissed.length === 0) return;\n\n  const { groups } = snapshot();\n  console.info(\n    formatTime(Date.now()),\n    `[VEX][Quote]UpstreamProviderDiscovery`,\n    ` Discovered ${groups.length} GetQuotes provider groups from terminal infos.`,\n    JSON.stringify(groups),\n  );\n",
              "lineStart": 136,
              "lineEnd": 147
            },
            {
              "type": "function",
              "name": "plan",
              "code": "const plan = planOrThrow(cacheMissed, updated_at);\n",
              "lineStart": 148,
              "lineEnd": 149
            },
            {
              "type": "function",
              "name": "mapGroupIdToProductIds",
              "code": "const mapGroupIdToProductIds = new Map<string, Set<string>>();\nfor (const { planned } of plan.requests) {",
              "lineStart": 150,
              "lineEnd": 151
            },
            {
              "type": "function",
              "name": "productIds",
              "code": "let productIds = mapGroupIdToProductIds.get(planned.group_id);\nif (!productIds) {\n  productIds = new Set<string>();\n  mapGroupIdToProductIds.set(planned.group_id, productIds);\n}",
              "lineStart": 152,
              "lineEnd": 156
            },
            {
              "type": "function",
              "name": "product_id",
              "code": "  for (const product_id of planned.req.product_ids) productIds.add(product_id);\n}\nconsole.info(\n  formatTime(Date.now()),\n  `[VEX][Quote]RouteDispatched`,\n  ` Routed ${cacheMissed.length} missed quotes to ${mapGroupIdToProductIds.size} provider groups.`,\n  JSON.stringify({\n    productsByGroupId: [...mapGroupIdToProductIds.entries()].map(([group_id, productIds]) => ({\n      group_id,\n      product_ids: [...productIds],\n    })),\n    default_action: plan.defaultAction,\n  }),\n);\n",
              "lineStart": 157,
              "lineEnd": 189
            },
            {
              "type": "function",
              "name": "actions",
              "code": "const actions = await execute(plan.requests);\nconsole.debug(\n  formatTime(Date.now()),\n  `[VEX][Quote]RequestReceived`,\n  `Received ${actions.length} upstream GetQuotes responses.`,\n  JSON.stringify(actions),\n);\n",
              "lineStart": 190,
              "lineEnd": 197
            },
            {
              "type": "function",
              "name": "action",
              "code": "    for (const action of actions) {\n      quoteState.update(action);\n    }\n  };\n\n  return { snapshot, planOrThrow, execute, fillQuoteStateFromUpstream };\n};",
              "lineStart": 198,
              "lineEnd": 205
            }
          ]
        },
        {
          "additions": 166,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/quote/upstream/router.ts",
          "changeType": "added",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/apps/virtual-exchange/src/quote/upstream/router.ts b/apps/virtual-exchange/src/quote/upstream/router.ts\nnew file mode 100644\nindex 000000000..d34853aba\n--- /dev/null\n+++ b/apps/virtual-exchange/src/quote/upstream/router.ts\n@@ -0,0 +1,166 @@\n+import { TextEncoder } from 'util';\n+\n+import { IQuoteServiceRequestByVEX } from '@yuants/exchange';\n+import { encodePath, fnv1a64Hex, newError } from '@yuants/utils';\n+import { createSortedPrefixMatcher, IPrefixMatcher } from './prefix-matcher';\n+import {\n+  IQuoteKey,\n+  IQuoteProviderGroup,\n+  IQuoteProviderInstance,\n+  IQuoteRequire,\n+  IQuoteUpdateAction,\n+} from '../types';\n+\n+const SEP_BYTE = new Uint8Array([0xff]);\n+\n+const encodeStrings = (parts: string[]): Uint8Array => {\n+  const buffers: Uint8Array[] = [];\n+  for (const part of parts) {\n+    buffers.push(new TextEncoder().encode(part));\n+    buffers.push(SEP_BYTE);\n+  }\n+  const totalLength = buffers.reduce((sum, b) => sum + b.length, 0);\n+  const result = new Uint8Array(totalLength);\n+  let offset = 0;\n+  for (const b of buffers) {\n+    result.set(b, offset);\n+    offset += b.length;\n+  }\n+  return result;\n+};\n+\n+const fnv1a64HexFromStrings = (parts: string[]): string => fnv1a64Hex(encodeStrings(parts));\n+\n+export type IPlannedRequest = {\n+  group_id: string;\n+  instances: IQuoteProviderInstance[];\n+  req: IQuoteServiceRequestByVEX;\n+};\n+\n+export type IPlannedRequestWithKey = { key: string; planned: IPlannedRequest };\n+\n+export type QuoteUpstreamPlan = {\n+  defaultAction: IQuoteUpdateAction;\n+  requests: IPlannedRequestWithKey[];\n+};\n+\n+export type IProviderIndices = {\n+  mapGroupIdToGroup: Map<string, IQuoteProviderGroup>;\n+  prefixMatcher: IPrefixMatcher<string>;\n+  mapFieldToGroupIds: Map<IQuoteKey, Set<string>>;\n+};\n+\n+export const buildProviderIndices = (groups: IQuoteProviderGroup[]): IProviderIndices => {\n+  const mapGroupIdToGroup = new Map(groups.map((x) => [x.group_id, x] as const));\n+  const prefixMatcher = createSortedPrefixMatcher(\n+    groups.map((group) => ({ prefix: group.meta.product_id_prefix, value: group.group_id })),\n+  );\n+  const mapFieldToGroupIds = new Map<IQuoteKey, Set<string>>();\n+  for (const group of groups) {\n+    for (const field of group.meta.fields as IQuoteKey[]) {\n+      let groupIds = mapFieldToGroupIds.get(field);\n+      if (!groupIds) {\n+        groupIds = new Set<string>();\n+        mapFieldToGroupIds.set(field, groupIds);\n+      }\n+      groupIds.add(group.group_id);\n+    }\n+  }\n+  return { mapGroupIdToGroup, prefixMatcher, mapFieldToGroupIds };\n+};\n+\n+const createRequestKey = (group_id: string, batchProductIds: string[]) =>\n+  encodePath(group_id, fnv1a64HexFromStrings(batchProductIds));\n+\n+const planRequests = (params: {\n+  productsByGroupId: Map<string, Set<string>>;\n+  mapGroupIdToGroup: Map<string, IQuoteProviderGroup>;\n+}): IPlannedRequestWithKey[] => {\n+  const { productsByGroupId, mapGroupIdToGroup } = params;\n+  const plannedRequests: IPlannedRequestWithKey[] = [];\n+  for (const [group_id, productIdSet] of productsByGroupId) {\n+    const group = mapGroupIdToGroup.get(group_id);\n+    if (!group) continue;\n+    const sortedProductIds = [...productIdSet].sort();\n+    const max = group.meta.max_products_per_request ?? sortedProductIds.length;\n+    for (let i = 0; i < sortedProductIds.length; i += max) {\n+      const batchProductIds = sortedProductIds.slice(i, i + max);\n+      const key = createRequestKey(group_id, batchProductIds);\n+      plannedRequests.push({\n+        key,\n+        planned: {\n+          group_id,\n+          instances: Array.from(group.mapTerminalIdToInstance.values()),\n+          req: { product_ids: batchProductIds, fields: group.meta.fields as any },\n+        },\n+      });\n+    }\n+  }\n+  return plannedRequests;\n+};\n+\n+export interface IQuoteRouter {\n+  planOrThrow: (misses: IQuoteRequire[], indices: IProviderIndices, updated_at: number) => QuoteUpstreamPlan;\n+}\n+\n+export const createQuoteRouter = (): IQuoteRouter => ({\n+  planOrThrow: (misses, indices, updated_at) => {\n+    const { prefixMatcher, mapFieldToGroupIds, mapGroupIdToGroup } = indices;\n+    const productsByGroupId = new Map<string, Set<string>>();\n+    const defaultAction: IQuoteUpdateAction = {};\n+    const unroutableProducts = new Set<string>();\n+\n+    const mapProductIdToGroupIds = new Map<string, string[]>();\n+\n+    for (const miss of misses) {\n+      const { product_id, field } = miss;\n+\n+      let productGroupIds = mapProductIdToGroupIds.get(product_id);\n+      if (!productGroupIds) {\n+        productGroupIds = prefixMatcher.match(product_id);\n+        mapProductIdToGroupIds.set(product_id, productGroupIds);\n+      }\n+      if (productGroupIds.length === 0) {\n+        unroutableProducts.add(product_id);\n+        continue;\n+      }\n+\n+      const fieldGroupIds = mapFieldToGroupIds.get(field);\n+      if (!fieldGroupIds) {\n+        if (!defaultAction[product_id]) defaultAction[product_id] = {};\n+        defaultAction[product_id]![field] = ['', updated_at];\n+        continue;\n+      }\n+\n+      let matched = false;\n+      for (const group_id of productGroupIds) {\n+        if (!fieldGroupIds.has(group_id)) continue;\n+        matched = true;\n+        let productIds = productsByGroupId.get(group_id);\n+        if (!productIds) {\n+          productIds = new Set<string>();\n+          productsByGroupId.set(group_id, productIds);\n+        }\n+        productIds.add(product_id);\n+      }\n+\n+      if (!matched) {\n+        if (!defaultAction[product_id]) defaultAction[product_id] = {};\n+        defaultAction[product_id]![field] = ['', updated_at];\n+      }\n+    }\n+\n+    if (unroutableProducts.size !== 0) {\n+      throw newError('VEX_QUOTE_PRODUCT_UNROUTABLE', {\n+        updated_at,\n+        unroutable_products: [...unroutableProducts].slice(0, 200),\n+        unroutable_products_total: unroutableProducts.size,\n+      });\n+    }\n+\n+    return {\n+      defaultAction,\n+      requests: planRequests({ productsByGroupId, mapGroupIdToGroup }),\n+    };\n+  },\n+});\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "SEP_BYTE",
              "code": "const SEP_BYTE = new Uint8Array([0xff]);\n",
              "lineStart": 14,
              "lineEnd": 15
            },
            {
              "type": "function",
              "name": "encodeStrings",
              "code": "const encodeStrings = (parts: string[]): Uint8Array => {",
              "lineStart": 16,
              "lineEnd": 16
            },
            {
              "type": "function",
              "name": "buffers",
              "code": "const buffers: Uint8Array[] = [];",
              "lineStart": 17,
              "lineEnd": 17
            },
            {
              "type": "function",
              "name": "part",
              "code": "for (const part of parts) {\n  buffers.push(new TextEncoder().encode(part));\n  buffers.push(SEP_BYTE);\n}",
              "lineStart": 18,
              "lineEnd": 21
            },
            {
              "type": "function",
              "name": "totalLength",
              "code": "const totalLength = buffers.reduce((sum, b) => sum + b.length, 0);",
              "lineStart": 22,
              "lineEnd": 22
            },
            {
              "type": "function",
              "name": "result",
              "code": "const result = new Uint8Array(totalLength);",
              "lineStart": 23,
              "lineEnd": 23
            },
            {
              "type": "function",
              "name": "offset",
              "code": "let offset = 0;",
              "lineStart": 24,
              "lineEnd": 24
            },
            {
              "type": "function",
              "name": "b",
              "code": "  for (const b of buffers) {\n    result.set(b, offset);\n    offset += b.length;\n  }\n  return result;\n};\n",
              "lineStart": 25,
              "lineEnd": 31
            },
            {
              "type": "function",
              "name": "fnv1a64HexFromStrings",
              "code": "const fnv1a64HexFromStrings = (parts: string[]): string => fnv1a64Hex(encodeStrings(parts));\n\nexport type IPlannedRequest = {\n  group_id: string;\n  instances: IQuoteProviderInstance[];\n  req: IQuoteServiceRequestByVEX;\n};\n\nexport type IPlannedRequestWithKey = { key: string; planned: IPlannedRequest };\n\nexport type QuoteUpstreamPlan = {\n  defaultAction: IQuoteUpdateAction;\n  requests: IPlannedRequestWithKey[];\n};\n",
              "lineStart": 32,
              "lineEnd": 52
            },
            {
              "type": "function",
              "name": "buildProviderIndices",
              "code": "export const buildProviderIndices = (groups: IQuoteProviderGroup[]): IProviderIndices => {",
              "lineStart": 53,
              "lineEnd": 53
            },
            {
              "type": "function",
              "name": "mapGroupIdToGroup",
              "code": "const mapGroupIdToGroup = new Map(groups.map((x) => [x.group_id, x] as const));",
              "lineStart": 54,
              "lineEnd": 54
            },
            {
              "type": "function",
              "name": "prefixMatcher",
              "code": "const prefixMatcher = createSortedPrefixMatcher(\n  groups.map((group) => ({ prefix: group.meta.product_id_prefix, value: group.group_id })),\n);",
              "lineStart": 55,
              "lineEnd": 57
            },
            {
              "type": "function",
              "name": "mapFieldToGroupIds",
              "code": "const mapFieldToGroupIds = new Map<IQuoteKey, Set<string>>();",
              "lineStart": 58,
              "lineEnd": 58
            },
            {
              "type": "function",
              "name": "group",
              "code": "for (const group of groups) {",
              "lineStart": 59,
              "lineEnd": 59
            },
            {
              "type": "function",
              "name": "field",
              "code": "for (const field of group.meta.fields as IQuoteKey[]) {",
              "lineStart": 60,
              "lineEnd": 60
            },
            {
              "type": "function",
              "name": "groupIds",
              "code": "      let groupIds = mapFieldToGroupIds.get(field);\n      if (!groupIds) {\n        groupIds = new Set<string>();\n        mapFieldToGroupIds.set(field, groupIds);\n      }\n      groupIds.add(group.group_id);\n    }\n  }\n  return { mapGroupIdToGroup, prefixMatcher, mapFieldToGroupIds };\n};\n",
              "lineStart": 61,
              "lineEnd": 71
            },
            {
              "type": "function",
              "name": "createRequestKey",
              "code": "const createRequestKey = (group_id: string, batchProductIds: string[]) =>\n  encodePath(group_id, fnv1a64HexFromStrings(batchProductIds));\n",
              "lineStart": 72,
              "lineEnd": 74
            },
            {
              "type": "function",
              "name": "planRequests",
              "code": "const planRequests = (params: {\n  productsByGroupId: Map<string, Set<string>>;\n  mapGroupIdToGroup: Map<string, IQuoteProviderGroup>;\n}): IPlannedRequestWithKey[] => {\n  const { productsByGroupId, mapGroupIdToGroup } = params;",
              "lineStart": 75,
              "lineEnd": 79
            },
            {
              "type": "function",
              "name": "plannedRequests",
              "code": "const plannedRequests: IPlannedRequestWithKey[] = [];\nfor (const [group_id, productIdSet] of productsByGroupId) {",
              "lineStart": 80,
              "lineEnd": 81
            },
            {
              "type": "function",
              "name": "group",
              "code": "const group = mapGroupIdToGroup.get(group_id);\nif (!group) continue;",
              "lineStart": 82,
              "lineEnd": 83
            },
            {
              "type": "function",
              "name": "sortedProductIds",
              "code": "const sortedProductIds = [...productIdSet].sort();",
              "lineStart": 84,
              "lineEnd": 84
            },
            {
              "type": "function",
              "name": "max",
              "code": "const max = group.meta.max_products_per_request ?? sortedProductIds.length;",
              "lineStart": 85,
              "lineEnd": 85
            },
            {
              "type": "function",
              "name": "i",
              "code": "for (let i = 0; i < sortedProductIds.length; i += max) {",
              "lineStart": 86,
              "lineEnd": 86
            },
            {
              "type": "function",
              "name": "batchProductIds",
              "code": "const batchProductIds = sortedProductIds.slice(i, i + max);",
              "lineStart": 87,
              "lineEnd": 87
            },
            {
              "type": "function",
              "name": "key",
              "code": "      const key = createRequestKey(group_id, batchProductIds);\n      plannedRequests.push({\n        key,\n        planned: {\n          group_id,\n          instances: Array.from(group.mapTerminalIdToInstance.values()),\n          req: { product_ids: batchProductIds, fields: group.meta.fields as any },\n        },\n      });\n    }\n  }\n  return plannedRequests;\n};\n",
              "lineStart": 88,
              "lineEnd": 101
            },
            {
              "type": "interface",
              "name": "IQuoteRouter",
              "code": "export interface IQuoteRouter {\n  planOrThrow: (misses: IQuoteRequire[], indices: IProviderIndices, updated_at: number) => QuoteUpstreamPlan;\n}\n",
              "lineStart": 102,
              "lineEnd": 105
            },
            {
              "type": "function",
              "name": "createQuoteRouter",
              "code": "export const createQuoteRouter = (): IQuoteRouter => ({\n  planOrThrow: (misses, indices, updated_at) => {\n    const { prefixMatcher, mapFieldToGroupIds, mapGroupIdToGroup } = indices;",
              "lineStart": 106,
              "lineEnd": 108
            },
            {
              "type": "function",
              "name": "productsByGroupId",
              "code": "const productsByGroupId = new Map<string, Set<string>>();",
              "lineStart": 109,
              "lineEnd": 109
            },
            {
              "type": "function",
              "name": "defaultAction",
              "code": "const defaultAction: IQuoteUpdateAction = {};",
              "lineStart": 110,
              "lineEnd": 110
            },
            {
              "type": "function",
              "name": "unroutableProducts",
              "code": "const unroutableProducts = new Set<string>();\n",
              "lineStart": 111,
              "lineEnd": 112
            },
            {
              "type": "function",
              "name": "mapProductIdToGroupIds",
              "code": "const mapProductIdToGroupIds = new Map<string, string[]>();\n",
              "lineStart": 113,
              "lineEnd": 114
            },
            {
              "type": "function",
              "name": "miss",
              "code": "for (const miss of misses) {\n  const { product_id, field } = miss;\n",
              "lineStart": 115,
              "lineEnd": 117
            },
            {
              "type": "function",
              "name": "productGroupIds",
              "code": "let productGroupIds = mapProductIdToGroupIds.get(product_id);\nif (!productGroupIds) {\n  productGroupIds = prefixMatcher.match(product_id);\n  mapProductIdToGroupIds.set(product_id, productGroupIds);\n}\nif (productGroupIds.length === 0) {\n  unroutableProducts.add(product_id);\n  continue;\n}\n",
              "lineStart": 118,
              "lineEnd": 127
            },
            {
              "type": "function",
              "name": "fieldGroupIds",
              "code": "const fieldGroupIds = mapFieldToGroupIds.get(field);\nif (!fieldGroupIds) {\n  if (!defaultAction[product_id]) defaultAction[product_id] = {};\n  defaultAction[product_id]![field] = ['', updated_at];\n  continue;\n}\n",
              "lineStart": 128,
              "lineEnd": 134
            },
            {
              "type": "function",
              "name": "matched",
              "code": "let matched = false;",
              "lineStart": 135,
              "lineEnd": 135
            },
            {
              "type": "function",
              "name": "group_id",
              "code": "for (const group_id of productGroupIds) {\n  if (!fieldGroupIds.has(group_id)) continue;\n  matched = true;",
              "lineStart": 136,
              "lineEnd": 138
            },
            {
              "type": "function",
              "name": "productIds",
              "code": "    let productIds = productsByGroupId.get(group_id);\n    if (!productIds) {\n      productIds = new Set<string>();\n      productsByGroupId.set(group_id, productIds);\n    }\n    productIds.add(product_id);\n  }\n\n  if (!matched) {\n    if (!defaultAction[product_id]) defaultAction[product_id] = {};\n    defaultAction[product_id]![field] = ['', updated_at];\n  }\n}\n\nif (unroutableProducts.size !== 0) {",
              "lineStart": 139,
              "lineEnd": 167
            }
          ]
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-17-08-27.json",
          "changeType": "added",
          "patch": "commit 4e876a865a75363f0ab8610acda3a1e1565d4f78\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 16:39:39 2025 +0800\n\n    refactor(vex): introduce new executor and registry for quote provider management (#2353)\n    \n    - Deleted `request-key.ts` as it was no longer needed.\n    - Removed `upstream-routing.ts` and its associated logic.\n    - Added `executor.ts` to handle quote requests with concurrency limits.\n    - Created `registry.ts` to manage quote provider instances and metadata.\n    - Introduced `router.ts` for planning upstream requests based on missed quotes.\n    - Updated types in `types.ts` to reflect changes in quote handling.\n    - Enhanced logging and error handling in the new modules.\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-17-08-27.json b/common/changes/@yuants/app-virtual-exchange/2025-12-17-08-27.json\nnew file mode 100644\nindex 000000000..3fbb4de15\n--- /dev/null\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-17-08-27.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-virtual-exchange\",\n+      \"comment\": \"refactor quote routing\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-virtual-exchange\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "179fcb0ac0ba01e6524dca1ef27d05c599995cc0",
      "short": "179fcb0ac",
      "author": "Siyuan Wang",
      "email": "c.one@thrimbda.com",
      "authoredAt": "2025-12-17 23:16:11 +0800",
      "subject": "feat(vex): Implement SWR for VEX/QueryQuotes with background updates (#2354)",
      "conventionalCommit": {
        "type": "feat",
        "scope": "vex",
        "breaking": false
      },
      "files": [
        {
          "additions": 9,
          "deletions": 156,
          "path": ".claude/skills/git-changes-reporter/SKILL.md",
          "changeType": "modified",
          "patch": "commit 179fcb0ac0ba01e6524dca1ef27d05c599995cc0\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 23:16:11 2025 +0800\n\n    feat(vex): Implement SWR for VEX/QueryQuotes with background updates (#2354)\n    \n    - Introduced SWR (stale-while-revalidate) semantics for the VEX/QueryQuotes service.\n    - Updated the service to immediately return cached results while enqueuing background updates for stale or missing quotes.\n    - Added a new queue management system using RxJS to handle update tasks in a serial manner.\n    - Implemented a new service endpoint VEX/QuoteUpdateQueueStatus to provide queue status metrics.\n    - Removed the strict freshness check and adjusted the error handling to differentiate between stale and missing data.\n    - Enhanced logging and error summarization for better observability.\n\ndiff --git a/.claude/skills/git-changes-reporter/SKILL.md b/.claude/skills/git-changes-reporter/SKILL.md\nindex 82f540c4c..c68e41008 100644\n--- a/.claude/skills/git-changes-reporter/SKILL.md\n+++ b/.claude/skills/git-changes-reporter/SKILL.md\n@@ -3 +3 @@ name: git-changes-reporter\n-description:  git  JSON  Markdown  Agent CI \n+description:  git JSON + Markdown\"git \"\"commit \"\"\"\"release note\"\"\"\"\" commit CI/CD \n@@ -121 +121 @@ Read JSON offset=X limit=200  #  commit \n-## \n+## \n@@ -123 +123 @@ Read JSON offset=X limit=200  #  commit \n-Agent \n+Agent ** + **\n@@ -125 +125,4 @@ Agent \n->  [references/report-template.md](references/report-template.md)\n+1. **** 50 \n+2. ****5-15  + \n+3. ****\n+4. **** commit `hash: `\n@@ -127,2 +130 @@ Agent \n-````markdown\n-# Git <old_commit>..<new_commit>\n+** ** commit\n@@ -130,150 +132 @@ Agent \n-> ****YYYY-MM-DD  YYYY-MM-DD\n-> ****Level 2\n-\n-## 1. \n-\n-- ****N\n-- ****Author1 (X commits), Author2 (Y commits)\n-- ****`apps/vendor-okx` (N ), `libraries/protocol` (M )\n-- **** N \n-\n-## 2. \n-\n-### 2.1 [/]\n-\n-****`hash1`, `hash2`\n-****Author Name\n-\n-****\n-[ 50 ]\n-\n-****\n-[file.ts:L42-L58](path/to/file.ts#L42-L58)\n-\n-```typescript\n-//  5-15 \n-const example = () => {\n-  // ...\n-};\n-```\n-````\n-\n-****\n-\n-- `module-a`, `module-b`\n-- []\n-\n-### 2.2 []\n-\n-...\n-\n-## 3. \n-\n-|  |  |  |  |\n-| ---- | ------ | -------- | -------- |\n-| Name | N      |  | `hash`   |\n-\n-## 4. \n-\n-### \n-\n-[ API /]\n-\n-### \n-\n-[]\n-\n-### \n-\n-[]\n-\n-### \n-\n-[]\n-\n-````\n-\n-## \n-\n-### 1. \n-\n-- ****\n-- 5-15 \n-- ****\n-\n-### 2. \n-\n-- ****\"\"\n-- ****\"\"\n--  50 \n-\n-### 3. \n-\n-****`[file.ts:L42-L58](path/to/file.ts#L42-L58)`\n-\n-**Commit ** JSON  `short`  `a9300e76f`\n-\n-### 4. \n-\n-Agent \n-\n-1. **Breaking changes**API \n-2. ****feat \n-3. **** bug fix\n-4. ****refactor \n-\n-****\n-- chore: bump version\n-- \n--  CHANGELOG\n-\n-## \n-\n-### \n-\n-```markdown\n-### 2.1 Binance \n-\n-****`b285cde59`\n-****Siyuan Wang\n-\n-****\n- API \n- 500ms\n-rateLimits duration/limit\n-\n-****\n-[quote.ts:L65-L78](apps/vendor-binance/src/public-data/quote.ts#L65-L78)\n-```typescript\n-const getRequestIntervalMs = (rateLimits: IRateLimit[], fallbackMs: number) => {\n-  const intervals: number[] = [];\n-  for (const item of rateLimits ?? []) {\n-    if (item.rateLimitType !== 'REQUEST_WEIGHT') continue;\n-    const duration = toIntervalMs(item.interval, item.intervalNum);\n-    const limit = item.limit;\n-    if (duration == null || limit == null) continue;\n-    intervals.push(Math.ceil(duration / limit));\n-  }\n-  return Math.max(fallbackMs, Math.max(...intervals));\n-};\n-````\n-\n-****\n-\n-- `vendor-binance`, `vendor-aster`\n-- \n-\n-````\n-\n-### \n-\n-```markdown\n-### 2.1 \n-\n-****`1279`, `703`    commit hash\n-\n-****\n- getRequestIntervalMs    \n-\n-****   \n-````\n+> **** [references/report-template.md](references/report-template.md) > **** [references/bad-examples.md](references/bad-examples.md)\n",
          "codeSnippets": []
        },
        {
          "additions": 222,
          "deletions": 0,
          "path": ".claude/skills/git-changes-reporter/references/bad-examples.md",
          "changeType": "added",
          "patch": "commit 179fcb0ac0ba01e6524dca1ef27d05c599995cc0\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 23:16:11 2025 +0800\n\n    feat(vex): Implement SWR for VEX/QueryQuotes with background updates (#2354)\n    \n    - Introduced SWR (stale-while-revalidate) semantics for the VEX/QueryQuotes service.\n    - Updated the service to immediately return cached results while enqueuing background updates for stale or missing quotes.\n    - Added a new queue management system using RxJS to handle update tasks in a serial manner.\n    - Implemented a new service endpoint VEX/QuoteUpdateQueueStatus to provide queue status metrics.\n    - Removed the strict freshness check and adjusted the error handling to differentiate between stale and missing data.\n    - Enhanced logging and error summarization for better observability.\n\ndiff --git a/.claude/skills/git-changes-reporter/references/bad-examples.md b/.claude/skills/git-changes-reporter/references/bad-examples.md\nindex 1b983a158..9c544819a 100644\n--- a/.claude/skills/git-changes-reporter/references/bad-examples.md\n+++ b/.claude/skills/git-changes-reporter/references/bad-examples.md\n@@ -12,0 +13,3 @@\n+7. [](#7-)\n+8. [](#8-)\n+9. [](#9-)\n@@ -271,0 +275,209 @@\n+## 7. \n+\n+###  \n+\n+```markdown\n+## 2. \n+\n+### 2.1 \n+\n+****`b285cde59`\n+...\n+\n+### 2.2 \n+\n+****`03a48cfc4`\n+...\n+\n+<!--  2  5  -->\n+```\n+\n+### \n+\n+- \n+- \n+- \n+\n+###  \n+\n+```markdown\n+## 2. \n+\n+### 2.1 \n+\n+****`b285cde59`, `76802e0c0`\n+...\n+\n+### 2.2 \n+\n+****`03a48cfc4`\n+...\n+\n+### 2.3 \n+\n+****`c36262cad`, `a1b2c3d4e`\n+\n+****\n+\n+- `c36262cad`:  1.2.0\n+- `a1b2c3d4e`:  README \n+\n+### \n+\n+|  | Commit      |  |\n+| ---- | ----------- | -------- |\n+| 1    | `b285cde59` | 2.1      |\n+| 2    | `76802e0c0` | 2.1      |\n+| 3    | `03a48cfc4` | 2.2      |\n+| 4    | `c36262cad` | 2.3      |\n+| 5    | `a1b2c3d4e` | 2.3      |\n+\n+>   5 \n+```\n+\n+### \n+\n+-  JSON  `commits` \n+- \"\"\"\"\n+- \"\"\n+\n+---\n+\n+## 8. \n+\n+###  \n+\n+```markdown\n+### 2.1 \n+\n+****`b285cde59`, `76802e0c0`\n+****Siyuan Wang\n+\n+****\n+ API ...\n+\n+****\n+...\n+\n+****\n+...\n+\n+<!--  commit  -->\n+```\n+\n+\n+\n+```markdown\n+****\n+\n+- b285cde59   \n+- `76802e0c0` -   \n+```\n+\n+### \n+\n+-  commit \n+- \n+\n+###  \n+\n+```markdown\n+### 2.1 \n+\n+****`b285cde59`, `76802e0c0`\n+****Siyuan Wang\n+\n+****\n+ API ...\n+\n+****\n+...\n+\n+****\n+...\n+\n+****\n+\n+- `b285cde59`:  getRequestIntervalMs  Binance \n+- `76802e0c0`:  Aster vendor\n+```\n+\n+### \n+\n+```\n+- `<commit_hash>`: < commit >\n+```\n+\n+-  commit hash\n+-  `:` \n+- \n+\n+---\n+\n+## 9. \n+\n+###  \n+\n+```markdown\n+## 2. \n+\n+### 2.1  A\n+\n+...\n+\n+### 2.2  B\n+\n+...\n+\n+## 3. \n+\n+...\n+\n+<!--  -->\n+```\n+\n+### \n+\n+- \n+- \n+- \n+\n+###  \n+\n+```markdown\n+## 2. \n+\n+### 2.1  A\n+\n+...\n+\n+### 2.2  B\n+\n+...\n+\n+### \n+\n+****\n+\n+|  | Commit      |         |                        |  |\n+| ---- | ----------- | ----------- | -------------------------- | -------- |\n+| 1    | `b285cde59` | Siyuan Wang | feat: add request interval | 2.1      |\n+| 2    | `76802e0c0` | Siyuan Wang | feat: apply to aster       | 2.1      |\n+| 3    | `03a48cfc4` | CZ          | feat: enforce terminal_id  | 2.2      |\n+\n+>   3 \n+\n+## 3. \n+\n+...\n+```\n+\n+### \n+\n+- \"\"\n+- \n+- \"\"\n+- \n+\n+---\n+\n@@ -275,0 +488,2 @@\n+****\n+\n@@ -283,0 +498,8 @@\n+****\n+\n+- [ ] \n+- [ ] \"\"`hash: `\n+- [ ] \"\"\n+- [ ]  JSON  `commits` \n+- [ ] \"\"\n+\n",
          "codeSnippets": []
        },
        {
          "additions": 145,
          "deletions": 60,
          "path": ".claude/skills/git-changes-reporter/references/report-template.md",
          "changeType": "modified",
          "patch": "commit 179fcb0ac0ba01e6524dca1ef27d05c599995cc0\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 23:16:11 2025 +0800\n\n    feat(vex): Implement SWR for VEX/QueryQuotes with background updates (#2354)\n    \n    - Introduced SWR (stale-while-revalidate) semantics for the VEX/QueryQuotes service.\n    - Updated the service to immediately return cached results while enqueuing background updates for stale or missing quotes.\n    - Added a new queue management system using RxJS to handle update tasks in a serial manner.\n    - Implemented a new service endpoint VEX/QuoteUpdateQueueStatus to provide queue status metrics.\n    - Removed the strict freshness check and adjusted the error handling to differentiate between stale and missing data.\n    - Enhanced logging and error summarization for better observability.\n\ndiff --git a/.claude/skills/git-changes-reporter/references/report-template.md b/.claude/skills/git-changes-reporter/references/report-template.md\nindex 8caf8c68c..b0e40a132 100644\n--- a/.claude/skills/git-changes-reporter/references/report-template.md\n+++ b/.claude/skills/git-changes-reporter/references/report-template.md\n@@ -18 +18 @@\n-## 2. \n+## 2. \n@@ -20 +20 @@\n-### 2.1 <>\n+>  **** commit\n@@ -22,8 +22 @@\n-- ****<>\n-- ****\n-  - `<commit.short>``<commit.subject>`\n-  - `<commit.short>``<commit.subject>`\n-- ****\n-  - `<file.path>`< patch >\n-  - `<file.path>`<>\n-- ****<>\n+### 2.1 </>\n@@ -31 +24,27 @@\n-### 2.2 <>\n+****`<commit.short>`, `<commit.short>`\n+****<contributor.name>\n+\n+****\n+< 50 >\n+\n+****\n+[file.ts:L42-L58](path/to/file.ts#L42-L58)\n+\n+```typescript\n+//  5-15 \n+const example = () => {\n+  // ...\n+};\n+```\n+\n+****\n+\n+- `module-a`, `module-b`\n+- <>\n+\n+****\n+\n+- `<commit.short>`: < commit >\n+- `<commit.short>`: < commit >\n+\n+### 2.2 <>\n@@ -34,0 +54,12 @@\n+### \n+\n+****\n+\n+|  | Commit           |      |       |  |\n+| ---- | ---------------- | -------- | --------- | -------- |\n+| 1    | `<commit.short>` | <author> | <subject> | 2.1      |\n+| 2    | `<commit.short>` | <author> | <subject> | 2.2      |\n+| ...  | ...              | ...      | ...       | ...      |\n+\n+>   N \n+\n@@ -61,23 +91,0 @@\n-## 5. \n-\n-### <commit.short> <commit.author> | <commit.authoredAt> | <>\n-\n-****`<commit.subject>`\n-\n-****\n-\n-- **/**`<file.path>` - <>\n-- **/**<>\n-- **/**<>\n-- **/**<>\n-\n-**/**\n-\n-- <>\n-- <>\n-- <>\n-\n-****\n-\n-- <>  \"\"\n-\n@@ -181,0 +190 @@\n+- \n@@ -208 +217 @@\n-- [ ] **commit  JSON **\n+- [ ] **commit  JSON **\n@@ -225 +234 @@\n-### \n+### \n@@ -227,11 +236,26 @@\n-```markdown\n-### 2.1 \n-\n-- ****`libraries/protocol/`, `apps/vendor-aster/`\n-- ****\n-  - `03a48cfc4``feat: enforce terminal_id to be derived from public_key`\n-  - `1b4e97ac5``fix: improve error handling in quote service`\n-- ****\n-  - `libraries/protocol/src/terminal.ts:138-143` URL  `terminal_id` ID \n-  - `apps/vendor-aster/src/quote.ts:45-60`\n-- ****\n+````markdown\n+### 2.1 Binance \n+\n+****`b285cde59`, `76802e0c0`\n+****Siyuan Wang\n+\n+****\n+ API \n+ 500ms\n+rateLimits duration/limit\n+\n+****\n+[quote.ts:L65-L78](apps/vendor-binance/src/public-data/quote.ts#L65-L78)\n+\n+```typescript\n+const getRequestIntervalMs = (rateLimits: IRateLimit[], fallbackMs: number) => {\n+  const intervals: number[] = [];\n+  for (const item of rateLimits ?? []) {\n+    if (item.rateLimitType !== 'REQUEST_WEIGHT') continue;\n+    const duration = toIntervalMs(item.interval, item.intervalNum);\n+    const limit = item.limit;\n+    if (duration == null || limit == null) continue;\n+    intervals.push(Math.ceil(duration / limit));\n+  }\n+  return Math.max(fallbackMs, Math.max(...intervals));\n+};\n@@ -238,0 +263 @@\n+````\n@@ -240 +265,13 @@\n-### \n+****\n+\n+- `vendor-binance`, `vendor-aster`\n+- \n+\n+****\n+\n+- `b285cde59`:  getRequestIntervalMs  Binance /\n+- `76802e0c0`:  Aster vendor\n+\n+````\n+\n+### \n@@ -243 +280 @@\n-### 03a48cfc4 CZ | 2025-11-22T01:07:13+08:00 | \n+### \n@@ -245 +282 @@\n-****`feat: enforce terminal_id to be derived from public_key in Terminal...`\n+****\n@@ -247 +284,6 @@\n-****\n+|  | Commit |  |  |  |\n+|------|--------|------|------|----------|\n+| 1 | `b285cde59` | Siyuan Wang | feat: add request interval for binance | 2.1 |\n+| 2 | `76802e0c0` | Siyuan Wang | feat: add request interval for aster | 2.1 |\n+| 3 | `03a48cfc4` | CZ | feat: enforce terminal_id derivation | 2.2 |\n+| 4 | `c36262cad` | bot | chore: bump version to 1.2.0 | 2.3 |\n@@ -249,4 +291,2 @@\n-- **/**`libraries/protocol/src/terminal.ts:138` -  URL  `terminal_id` ID \n-- **/**`terminal.ts:140-143` -  `host_token` \n-- **/** ID\n-- **/**/\n+>   4 \n+````\n@@ -254 +294 @@\n-**/**\n+---\n@@ -256,2 +296 @@\n--  `terminal_id` \n-- \n+## \n@@ -259,2 +298,48 @@\n-****\n-```\n+### 1. \n+\n+****\n+\n+1. ****\n+\n+   - ****\"\"\n+   - ****\"\"\n+   -  50 \n+   - \n+\n+2. ****\n+\n+   - ****\n+   - 5-15 \n+   - ****\n+   - \n+\n+3. ****\n+   - /\n+   - \n+   - \n+\n+### 2. \n+\n+****`[file.ts:L42-L58](path/to/file.ts#L42-L58)`\n+\n+**Commit ** JSON  `short`  `a9300e76f`\n+\n+### 3. \n+\n+**** commit\n+\n+****\n+\n+- /\n+- `commit_hash: `\n+- \"\"\n+\n+****\n+\n+1. **Breaking changes**\n+2. ****\n+3. ****\n+4. ****\n+5. ****CHANGELOG\n+\n+>  \n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "example",
              "code": "const example = () => {\n  // ...\n};\n```\n\n****\n\n- `module-a`, `module-b`\n- <>\n\n****\n\n- `<commit.short>`: < commit >\n- `<commit.short>`: < commit >\n",
              "lineStart": 35,
              "lineEnd": 250
            },
            {
              "type": "function",
              "name": "getRequestIntervalMs",
              "code": "const getRequestIntervalMs = (rateLimits: IRateLimit[], fallbackMs: number) => {",
              "lineStart": 251,
              "lineEnd": 251
            },
            {
              "type": "function",
              "name": "intervals",
              "code": "const intervals: number[] = [];",
              "lineStart": 252,
              "lineEnd": 252
            },
            {
              "type": "function",
              "name": "item",
              "code": "for (const item of rateLimits ?? []) {\n  if (item.rateLimitType !== 'REQUEST_WEIGHT') continue;",
              "lineStart": 253,
              "lineEnd": 254
            },
            {
              "type": "function",
              "name": "duration",
              "code": "const duration = toIntervalMs(item.interval, item.intervalNum);",
              "lineStart": 255,
              "lineEnd": 255
            },
            {
              "type": "function",
              "name": "limit",
              "code": "    const limit = item.limit;\n    if (duration == null || limit == null) continue;\n    intervals.push(Math.ceil(duration / limit));\n  }\n  return Math.max(fallbackMs, Math.max(...intervals));\n};\n````\n****\n\n- `vendor-binance`, `vendor-aster`\n- \n\n****\n\n- `b285cde59`:  getRequestIntervalMs  Binance /",
              "lineStart": 256,
              "lineEnd": 346
            }
          ]
        },
        {
          "additions": 68,
          "deletions": 1,
          "path": ".legion/config.json",
          "changeType": "modified",
          "patch": "commit 179fcb0ac0ba01e6524dca1ef27d05c599995cc0\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 23:16:11 2025 +0800\n\n    feat(vex): Implement SWR for VEX/QueryQuotes with background updates (#2354)\n    \n    - Introduced SWR (stale-while-revalidate) semantics for the VEX/QueryQuotes service.\n    - Updated the service to immediately return cached results while enqueuing background updates for stale or missing quotes.\n    - Added a new queue management system using RxJS to handle update tasks in a serial manner.\n    - Implemented a new service endpoint VEX/QuoteUpdateQueueStatus to provide queue status metrics.\n    - Removed the strict freshness check and adjusted the error handling to differentiate between stale and missing data.\n    - Enhanced logging and error summarization for better observability.\n\ndiff --git a/.legion/config.json b/.legion/config.json\nindex 11403c859..1bef36ad5 100644\n--- a/.legion/config.json\n+++ b/.legion/config.json\n@@ -3 +3 @@\n-  \"currentTask\": null,\n+  \"currentTask\": \"task-vex-queryquotes-swr\",\n@@ -29,0 +30,7 @@\n+    },\n+    {\n+      \"id\": \"task-vex-queryquotes-swr\",\n+      \"name\": \"task-vex-queryquotes-swr\",\n+      \"status\": \"active\",\n+      \"createdAt\": \"2025-12-17T08:48:48.898Z\",\n+      \"updatedAt\": \"2025-12-17T14:52:53.384Z\"\n@@ -278,0 +286,60 @@\n+    },\n+    {\n+      \"id\": \"proposal-mj9rk1aj-0b08f4\",\n+      \"name\": \"task-vex-queryquotes-swr\",\n+      \"goal\": \" `apps/virtual-exchange/src/quote/service.ts`  `VEX/QueryQuotes`  SWR\",\n+      \"rationale\": \" `VEX/QueryQuotes`  stale-while-revalidate GetQuotes  RxJS  miss \",\n+      \"points\": [\n+        \" `computeCacheMissed` miss  `Subject.next(updateTask)` miss  `quoteState.filter(product_ids, fields, updated_at)`  freshness\",\n+        \" RxJS `Subject<UpdateTask>`  `concatMap` \",\n+        \"UpdateTask `{ product_ids: string[]; fields: IQuoteKey[]; updated_at: number }` `product_ids/fields` +\",\n+        \" `computeCacheMissed(quoteState, task.product_ids, task.fields, task.updated_at)` `quoteProviderRegistry.fillQuoteStateFromUpstream({ quoteState, cacheMissed, updated_at: task.updated_at })` no-op\",\n+        \" `fillQuoteStateFromUpstream`  inner observable `catchError`  `product_ids/actions` JSON\",\n+        \"`updated_at`  SWR  `min_updated_at`/ miss  `max_staleness_ms` \",\n+        \" await miss  RPC miss no-op/\"\n+      ],\n+      \"scope\": [\"apps/virtual-exchange/src/quote/service.ts\"],\n+      \"phases\": [\n+        {\n+          \"name\": \"Discovery\",\n+          \"tasks\": [\n+            {\n+              \"description\": \"\\n- `VEX/QueryQuotes`  updated_at freshness `assertFreshnessSatisfied`  `VEX_QUOTE_FRESHNESS_NOT_SATISFIED`\\n-  `.c1-cellar/vex-query-quotes.ts`/\\n- `quoteProviderRegistry.fillQuoteStateFromUpstream`  `defaultAction` `\\\"\\\"` + `updated_at` miss\\n/ strict \",\n+              \"acceptance\": \"context.md strict vs best-effort SWR \"\n+            }\n+          ]\n+        },\n+        {\n+          \"name\": \"Design\",\n+          \"tasks\": [\n+            {\n+              \"description\": \" SWR //\\n\\n## 1.  `VEX/QueryQuotes` \\n- `{ product_ids, fields, updated_at }`\\n- \\n  1) `cacheMissed = computeCacheMissed(quoteState, product_ids, fields, updated_at)`\\n  2)  `cacheMissed.length > 0``updateQueue$.next({ product_ids, fields, updated_at })`\\n  3)  `return quoteState.filter(product_ids, fields, updated_at)`\\n- SWR/best-effort freshness assert/throw\\n\\n## 2. UpdateTask \\n- `type UpdateTask = { product_ids: string[]; fields: IQuoteKey[]; updated_at: number }`\\n- \\n  - `product_ids = uniq(sort(product_ids))`\\n  - `fields = uniq(sort(fields))`\\n  -  filter \\n\\n## 3. \\n- `const updateQueue$ = new Subject<UpdateTask>()`\\n- `updateQueue$.pipe(concatMap(task => defer(() => processTask(task)).pipe(catchError(...))))\\n  .subscribe()`\\n- `processTask(task)`\\n  1) `cacheMissed2 = computeCacheMissed(quoteState, task.product_ids, task.fields, task.updated_at)`\\n  2) returnno-op\\n  3) `await quoteProviderRegistry.fillQuoteStateFromUpstream({ quoteState, cacheMissed: cacheMissed2, updated_at: task.updated_at })`\\n-  task error code\\n\\n## 4.  `updated_at` \\n- \\n  -  `Date.now() - ` \\n  -  VEX miss filter\\n-  `Date.now()`  miss quote.updated_at  >= now/\\n- \\n  -  `min_updated_at` `updated_at`  `max_staleness_ms` VEX  `min_updated_at = Date.now() - max_staleness_ms`\\n\\n## 5. \\n-  `QueryQuotes` p99  await \\n- \\n  -  miss O(product_ids * fields) RPC \\n  -  backlog + \\n- \\n  - +/\\n  -  union  push\\n\\nplan.md  strict  `VEX/QueryQuotesStrict`\",\n+              \"acceptance\": \"plan.md ///updated_at /\"\n+            }\n+          ]\n+        },\n+        {\n+          \"name\": \"Implementation\",\n+          \"tasks\": [\n+            {\n+              \"description\": \" `apps/virtual-exchange/src/quote/service.ts`  SWR `Subject<UpdateTask>` +  `VEX/QueryQuotes`  await  enqueue  filter \",\n+              \"acceptance\": \" `updated_at` \"\n+            }\n+          ]\n+        },\n+        {\n+          \"name\": \"Validation\",\n+          \"tasks\": [\n+            {\n+              \"description\": \" prettier `.c1-cellar/vex-query-quotes.ts` /\",\n+              \"acceptance\": \" SWR /\"\n+            }\n+          ]\n+        }\n+      ],\n+      \"proposedBy\": \"Claude\",\n+      \"proposedAt\": \"2025-12-17T08:42:34.507Z\",\n+      \"status\": \"approved\",\n+      \"decidedAt\": \"2025-12-17T08:48:48.898Z\",\n+      \"decidedBy\": \"Claude\",\n+      \"createdTaskId\": \"task-vex-queryquotes-swr\"\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "updateQueue",
              "code": "      \"description\": \" SWR //\\n\\n## 1.  `VEX/QueryQuotes` \\n- `{ product_ids, fields, updated_at }`\\n- \\n  1) `cacheMissed = computeCacheMissed(quoteState, product_ids, fields, updated_at)`\\n  2)  `cacheMissed.length > 0``updateQueue$.next({ product_ids, fields, updated_at })`\\n  3)  `return quoteState.filter(product_ids, fields, updated_at)`\\n- SWR/best-effort freshness assert/throw\\n\\n## 2. UpdateTask \\n- `type UpdateTask = { product_ids: string[]; fields: IQuoteKey[]; updated_at: number }`\\n- \\n  - `product_ids = uniq(sort(product_ids))`\\n  - `fields = uniq(sort(fields))`\\n  -  filter \\n\\n## 3. \\n- `const updateQueue$ = new Subject<UpdateTask>()`\\n- `updateQueue$.pipe(concatMap(task => defer(() => processTask(task)).pipe(catchError(...))))\\n  .subscribe()`\\n- `processTask(task)`\\n  1) `cacheMissed2 = computeCacheMissed(quoteState, task.product_ids, task.fields, task.updated_at)`\\n  2) returnno-op\\n  3) `await quoteProviderRegistry.fillQuoteStateFromUpstream({ quoteState, cacheMissed: cacheMissed2, updated_at: task.updated_at })`\\n-  task error code\\n\\n## 4.  `updated_at` \\n- \\n  -  `Date.now() - ` \\n  -  VEX miss filter\\n-  `Date.now()`  miss quote.updated_at  >= now/\\n- \\n  -  `min_updated_at` `updated_at`  `max_staleness_ms` VEX  `min_updated_at = Date.now() - max_staleness_ms`\\n\\n## 5. \\n-  `QueryQuotes` p99  await \\n- \\n  -  miss O(product_ids * fields) RPC \\n  -  backlog + \\n- \\n  - +/\\n  -  union  push\\n\\nplan.md  strict  `VEX/QueryQuotesStrict`\",\n      \"acceptance\": \"plan.md ///updated_at /\"\n    }\n  ]\n},\n{\n  \"name\": \"Implementation\",\n  \"tasks\": [\n    {\n      \"description\": \" `apps/virtual-exchange/src/quote/service.ts`  SWR `Subject<UpdateTask>` +  `VEX/QueryQuotes`  await  enqueue  filter \",\n      \"acceptance\": \" `updated_at` \"\n    }\n  ]\n},\n{",
              "lineStart": 316,
              "lineEnd": 346
            }
          ]
        },
        {
          "additions": 37,
          "deletions": 0,
          "path": ".legion/ledger.csv",
          "changeType": "added",
          "patch": "commit 179fcb0ac0ba01e6524dca1ef27d05c599995cc0\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 23:16:11 2025 +0800\n\n    feat(vex): Implement SWR for VEX/QueryQuotes with background updates (#2354)\n    \n    - Introduced SWR (stale-while-revalidate) semantics for the VEX/QueryQuotes service.\n    - Updated the service to immediately return cached results while enqueuing background updates for stale or missing quotes.\n    - Added a new queue management system using RxJS to handle update tasks in a serial manner.\n    - Implemented a new service endpoint VEX/QuoteUpdateQueueStatus to provide queue status metrics.\n    - Removed the strict freshness check and adjusted the error handling to differentiate between stale and missing data.\n    - Enhanced logging and error summarization for better observability.\n\ndiff --git a/.legion/ledger.csv b/.legion/ledger.csv\nindex 9fbb742fd..bbb2841b4 100644\n--- a/.legion/ledger.csv\n+++ b/.legion/ledger.csv\n@@ -121,0 +122,37 @@\n+2025-12-17T08:38:44.885Z,legion_get_status,,,Claude,,success\n+2025-12-17T08:38:49.855Z,legion_list_tasks,,,Claude,,success\n+2025-12-17T08:38:55.853Z,legion_read_context,task-vex-quote-upstream-refactor,task-vex-quote-upstream-refactor,Claude,\"section: all, includeReviews: true\",success\n+2025-12-17T08:38:55.858Z,legion_read_context,task-vex-quote-routing,task-vex-quote-routing,Claude,\"section: all, includeReviews: true\",success\n+2025-12-17T08:42:34.508Z,legion_propose_task,,,Claude,name: task-vex-queryquotes-swr,success\n+2025-12-17T08:48:48.901Z,legion_approve_proposal,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,proposalId: proposal-mj9rk1aj-0b08f4,success\n+2025-12-17T08:50:28.998Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,progress.completed:  `VEX/QueryQuotes`  SWRstale-while-revalidate `plan.md` +  RxJS  +  miss + ,success\n+2025-12-17T08:59:16.900Z,legion_list_reviews,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,\"status: open, type: all\",success\n+2025-12-17T09:00:30.391Z,legion_respond_review,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,\"file: plan.md, reviewId: R1, status: resolved\",success\n+2025-12-17T09:00:38.400Z,legion_respond_review,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,\"file: plan.md, reviewId: R2, status: resolved\",success\n+2025-12-17T09:00:43.481Z,legion_respond_review,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,\"file: plan.md, reviewId: R3, status: resolved\",success\n+2025-12-17T09:00:47.457Z,legion_respond_review,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,\"file: tasks.md, reviewId: R4, status: resolved\",success\n+2025-12-17T09:00:53.272Z,legion_respond_review,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,\"file: tasks.md, reviewId: R5, status: resolved\",success\n+2025-12-17T09:03:06.528Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,addDecision: SWR  `VEX/QueryQuotes` stale-OK + miss-error stalemiss,success\n+2025-12-17T09:03:09.435Z,legion_list_reviews,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,\"status: open, type: all\",success\n+2025-12-17T09:04:05.173Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,\"handoff:  `plan.md`  `apps/virtual-exchange/src/quote/service.ts`  `Subject<UpdateTask>`  `concatMap`  `filterLatest(product_ids, fields)` `getValu\",success\n+2025-12-17T14:31:56.065Z,legion_init,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,workingDirectory: /Users/c1/Work/Yuan,success\n+2025-12-17T14:32:00.624Z,legion_list_reviews,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,\"status: open, type: all\",success\n+2025-12-17T14:32:00.631Z,legion_get_status,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,,success\n+2025-12-17T14:32:00.638Z,legion_read_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,\"section: all, includeReviews: true\",success\n+2025-12-17T14:34:40.630Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,progress.completed: `apps/virtual-exchange/src/quote/service.ts`QueryQuotes  await  + strict freshness assert`apps/virtual-exchange/src/quote/upstream/registry.ts`f,success\n+2025-12-17T14:34:49.793Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,addFile: apps/virtual-exchange/src/quote/implementations/v1.ts,success\n+2025-12-17T14:34:49.879Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,addFile: apps/virtual-exchange/src/quote/service.ts,success\n+2025-12-17T14:34:49.897Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,addFile: apps/virtual-exchange/src/quote/types.ts,success\n+2025-12-17T14:34:49.922Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,addFile: apps/virtual-exchange/src/quote/upstream/registry.ts,success\n+2025-12-17T14:36:53.934Z,legion_init,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,workingDirectory: /Users/c1/Work/Yuan,success\n+2025-12-17T14:36:57.347Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,progress.completed:  `VEX/QueryQuotes` /,success\n+2025-12-17T14:39:40.275Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,addDecision:  `VEX/QueryQuotes`  SWRstale-OK + miss-error `VEX/QueryQuotesStrict`  strict freshness ,success\n+2025-12-17T14:39:45.286Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,addDecision: SWR  miss  `VEX_QUOTE_FRESHNESS_NOT_SATISFIED` tupleundefinedstale ,success\n+2025-12-17T14:39:50.400Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,addDecision:  `VEX/QuoteUpdateQueueStatus` pending/in_flight/last_error/last_processed_at ,success\n+2025-12-17T14:43:21.776Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,progress.completed:  `apps/virtual-exchange/src/quote/service.ts` `VEX/QueryQuotes`  SWR filterLatest + miss  +  `VEX/QueryQuotesStrict`  `VEX/QuoteU,success\n+2025-12-17T14:43:34.823Z,legion_get_status,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,,success\n+2025-12-17T14:43:48.518Z,legion_update_tasks,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,completeTask: phase 3,success\n+2025-12-17T14:43:55.272Z,legion_update_tasks,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,setCurrentTask: phase 4,success\n+2025-12-17T14:44:18.399Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,handoff:  `VEX/QueryQuotes` miss  `VEX_QUOTE_FRESHNESS_NOT_SATISFIED`stale ,success\n+2025-12-17T14:52:53.382Z,legion_update_tasks,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,addDiscoveredTask: / `VEX/QueryQuotesStrict`  context  tasks ,success\n+2025-12-17T14:52:53.385Z,legion_update_context,task-vex-queryquotes-swr,task-vex-queryquotes-swr,Claude,addDecision:  `VEX/QueryQuotesStrict` `VEX/QueryQuotes`  SWR  `VEX/QuoteUpdateQueueStatus` ,success\n",
          "codeSnippets": []
        },
        {
          "additions": 53,
          "deletions": 0,
          "path": ".legion/tasks/task-vex-queryquotes-swr/context.md",
          "changeType": "added",
          "patch": "commit 179fcb0ac0ba01e6524dca1ef27d05c599995cc0\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 23:16:11 2025 +0800\n\n    feat(vex): Implement SWR for VEX/QueryQuotes with background updates (#2354)\n    \n    - Introduced SWR (stale-while-revalidate) semantics for the VEX/QueryQuotes service.\n    - Updated the service to immediately return cached results while enqueuing background updates for stale or missing quotes.\n    - Added a new queue management system using RxJS to handle update tasks in a serial manner.\n    - Implemented a new service endpoint VEX/QuoteUpdateQueueStatus to provide queue status metrics.\n    - Removed the strict freshness check and adjusted the error handling to differentiate between stale and missing data.\n    - Enhanced logging and error summarization for better observability.\n\ndiff --git a/.legion/tasks/task-vex-queryquotes-swr/context.md b/.legion/tasks/task-vex-queryquotes-swr/context.md\nnew file mode 100644\nindex 000000000..7b8aa4a68\n--- /dev/null\n+++ b/.legion/tasks/task-vex-queryquotes-swr/context.md\n@@ -0,0 +1,53 @@\n+# task-vex-queryquotes-swr - \n+\n+##  (2025-12-17)\n+\n+###  \n+\n+-  `VEX/QueryQuotes`  SWRstale-while-revalidate `plan.md` +  RxJS  +  miss + \n+- `apps/virtual-exchange/src/quote/service.ts`QueryQuotes  await  + strict freshness assert`apps/virtual-exchange/src/quote/upstream/registry.ts`fillQuoteStateFromUpstream///`apps/virtual-exchange/src/quote/types.ts``apps/virtual-exchange/src/quote/implementations/v1.ts`\n+-  `VEX/QueryQuotes` /\n+-  `apps/virtual-exchange/src/quote/service.ts` `VEX/QueryQuotes`  SWR filterLatest + miss  +  `VEX/QuoteUpdateQueueStatus`  `VEX/QueryQuotesStrict`\n+-  prettier`common/autoinstallers/rush-prettier/node_modules/.bin/prettier --write apps/virtual-exchange/src/quote/service.ts`\n+\n+###  \n+\n+()\n+\n+###  /\n+\n+-  `node ../../common/scripts/install-run-rushx.js build`apps/virtual-exchange TypeScript `apps/virtual-exchange/src/position.ts`  `apps/virtual-exchange/src/quote/upstream/router.ts` build \n+\n+---\n+\n+## \n+\n+()\n+\n+---\n+\n+## \n+\n+|                                                                                                                                                                |                                                                                                                                                                                            |                                                                                                    |        |\n+| ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------- | ---------- |\n+| SWR  `VEX/QueryQuotes` stale-OK + miss-error stalemiss |  stale  stale miss  backlog  |  best-effortstale  miss  strict freshness stale    | 2025-12-17 |\n+|  `VEX/QueryQuotesStrict` `VEX/QueryQuotes`  SWR                                                                                            |  strict                                                                                                                  |  `VEX/QueryQuotesStrict`  `VEX/QueryQuotes` strict  `VEX/QueryQuotesSWR` | 2025-12-17 |\n+\n+---\n+\n+## \n+\n+****\n+\n+1.  `VEX/QueryQuotes` miss  `VEX_QUOTE_FRESHNESS_NOT_SATISFIED`stale \n+2.  `VEX/QuoteUpdateQueueStatus`  `pending/in_flight/last_error/last_processed_at`\n+3.  `.c1-cellar/vex-query-quotes.ts` /\n+\n+****\n+\n+-  build  TS `apps/virtual-exchange/src/position.ts``apps/virtual-exchange/src/quote/upstream/router.ts` `apps/virtual-exchange`  `build` \n+-  `updated_at = Date.now()`SWR  `Date.now() - ` /\n+\n+---\n+\n+_: 2025-12-17 22:53 by Codex_\n",
          "codeSnippets": []
        },
        {
          "additions": 222,
          "deletions": 0,
          "path": ".legion/tasks/task-vex-queryquotes-swr/plan.md",
          "changeType": "added",
          "patch": "commit 179fcb0ac0ba01e6524dca1ef27d05c599995cc0\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 23:16:11 2025 +0800\n\n    feat(vex): Implement SWR for VEX/QueryQuotes with background updates (#2354)\n    \n    - Introduced SWR (stale-while-revalidate) semantics for the VEX/QueryQuotes service.\n    - Updated the service to immediately return cached results while enqueuing background updates for stale or missing quotes.\n    - Added a new queue management system using RxJS to handle update tasks in a serial manner.\n    - Implemented a new service endpoint VEX/QuoteUpdateQueueStatus to provide queue status metrics.\n    - Removed the strict freshness check and adjusted the error handling to differentiate between stale and missing data.\n    - Enhanced logging and error summarization for better observability.\n\ndiff --git a/.legion/tasks/task-vex-queryquotes-swr/plan.md b/.legion/tasks/task-vex-queryquotes-swr/plan.md\nnew file mode 100644\nindex 000000000..02ef0a2fb\n--- /dev/null\n+++ b/.legion/tasks/task-vex-queryquotes-swr/plan.md\n@@ -0,0 +1,222 @@\n+# task-vex-queryquotes-swr\n+\n+## \n+\n+ `apps/virtual-exchange/src/quote/service.ts`  `VEX/QueryQuotes`  SWR\n+\n+## \n+\n+ `VEX/QueryQuotes` `apps/virtual-exchange/src/quote/service.ts`\n+\n+-  `cacheMissed`\n+-  miss `await quoteProviderRegistry.fillQuoteStateFromUpstream(...)`  `quoteState`\n+-  `quoteState.filter(...)`  `assertFreshnessSatisfied(...)` `VEX_QUOTE_FRESHNESS_NOT_SATISFIED`\n+\n+ `apps/virtual-exchange/src/quote/upstream/registry.ts`\n+\n+- `fillQuoteStateFromUpstream` prefix + field  +    LB /  / in-flight   `quoteState`\n+\n+`QueryQuotes`  `await`  freshness \n+\n+## SWR \n+\n+ `VEX/QueryQuotes`  stale-while-revalidatebest-effort\n+\n+- ****\n+- **** `stale/miss`  `quoteState` \n+\n+### \n+\n+- / `quoteProviderRegistry.fillQuoteStateFromUpstream` \n+- // plan \n+-  `VEX/UpdateQuotes` / `VEX/DumpQuoteState` \n+\n+## \n+\n+### 1) QueryQuotes \n+\n+\n+\n+- `product_ids: string[]`\n+- `fields: IQuoteKey[]`\n+- `updated_at: number`\n+\n+> `updated_at` min_updated_at\n+\n+### 2) UpdateTask\n+\n+`UpdateTask` \n+\n+- `product_ids + fields + updated_at`\n+\n+\n+\n+```ts\n+type UpdateTask = { product_ids: string[]; fields: IQuoteKey[]; updated_at: number };\n+```\n+\n+\n+\n+- `product_ids = uniq(sort(product_ids))`\n+- `fields = uniq(sort(fields))`\n+\n+## \n+\n+-  `(product_id, field)`\n+  - `fresh` `tuple.updated_at >= req.updated_at`\n+  - `stale` `tuple.updated_at < req.updated_at` stale \n+  - `miss`\n+-  `stale`  `miss` `Subject.next(updateTask)`updateTask  `product_ids + fields + updated_at`\n+-  updated_at  `filterLatest` tuple stale  tuple = miss `assertFreshnessSatisfied`  miss\n+-  RxJS `Subject<UpdateTask>`  `concatMap` \n+- UpdateTask `{ product_ids: string[]; fields: IQuoteKey[]; updated_at: number }` `product_ids/fields` +\n+- `stale + miss` `quoteProviderRegistry.fillQuoteStateFromUpstream({ quoteState, cacheMissed, updated_at: task.updated_at })` no-op\n+-  `fillQuoteStateFromUpstream`  inner observable `catchError`  `product_ids/actions` JSON\n+- `updated_at`  SWR  `min_updated_at`/ `fresh/stale`  `max_staleness_ms` \n+-  await miss  RPC miss no-op/\n+\n+> [REVIEW] quoteState.filter  updated_at  updated_at  filter  assert \n+>\n+> [RESPONSE] SWR  stale \n+>\n+> -  `stale` `miss`\n+> -  updated_at  `filterLatest` tuple stale \n+> -  `filterLatest`  requested tuple = miss assert update  `IQuoteState` `service.ts`  `getValueTuple`  `filterLatest`\n+>   [STATUS:resolved]\n+\n+### 1) VEX/QueryQuotes\n+\n+`{ product_ids, fields, updated_at }`\n+\n+\n+\n+1.  `(product_id, field)` `quoteState.getValueTuple` \n+   - `missing`: tuple miss\n+   - `needUpdate`: tuple miss + stale\n+2.  `needUpdate.length > 0` `updateQueue$.next({ product_ids, fields, updated_at })`\n+3.  `data = filterLatest(product_ids, fields)` `updated_at`  tuple \n+4.  `missing.length > 0` `missing`  `data`\n+\n+\n+\n+- strict freshness stale-OK + miss-errorstale  miss \n+- freshness miss\n+\n+### 2) RxJS\n+\n+**** RxJS  Promise \n+\n+\n+\n+- `updateQueue$ = new Subject<UpdateTask>()`\n+- `updateQueue$.pipe(concatMap(task => processTask$(task)))`\n+- `processTask$`  `defer/from(Promise)` \n+-  `catchError` `EMPTY`\n+\n+ **UpdateTask ** `fillQuoteStateFromUpstream`  executor  provider group  +  32\n+\n+### 3)  miss\n+\n+`processTask(task)` stale + miss\n+\n+\n+\n+1. `needUpdate2 = computeCacheMissed(quoteState, task.product_ids, task.fields, task.updated_at)`stale + miss\n+2.  `needUpdate2.length === 0`no-op\n+3. `await quoteProviderRegistry.fillQuoteStateFromUpstream({ quoteState, cacheMissed: needUpdate2, updated_at: task.updated_at })`\n+\n+\n+\n+-  no-op\n+-  `VEX/UpdateQuotes` \n+\n+## `updated_at` \n+\n+###  min_updated_at \n+\n+\n+\n+-  VEX  freshness  `fresh/stale`\n+-  updated_at = Date.now()` `updated_at`  miss  now\n+\n+### \n+\n+ `updated_at` \n+\n+- `Date.now() - 1000` 1s \n+-  `Date.now() - polling_interval_ms - jitter_ms`\n+\n+### \n+\n+\n+\n+-  `updated_at`  `min_updated_at`\n+-  `updated_at`  `max_staleness_ms`VEX  `min_updated_at = Date.now() - max_staleness_ms`\n+\n+/ SWR \n+\n+## \n+\n+### \n+\n+- `VEX/QueryQuotes`  `await fillQuoteStateFromUpstream`\n+- \n+\n+### \n+\n+-  `computeCacheMissed` `O(|product_ids| * |fields|)`\n+-  miss miss  RPC \n+\n+### backlog\n+\n+ + /\n+\n+/\n+\n+- / silent backlog\n+-  union  push \n+\n+> [REVIEW]  ProvideService rxjs Subject \n+>\n+> [RESPONSE] RxJS `Subject`  `service.ts` \n+>\n+> - `pendingCount` `+1`success/error `finalize`  `-1`\n+> - `inFlight` 0/1\n+> -  `provideService` `VEX/QuoteUpdateQueueStatus` `{ pending, in_flight, last_error?, last_processed_at? }` \n+>    Subject /\n+>   [STATUS:resolved]\n+\n+## \n+\n+ `product_ids/actions` \n+\n+- `missing_count``stale_count`task \n+- // miss/stale \n+-  `provideService` `VEX/QuoteUpdateQueueStatus``pending/in_flight/last_error/last_processed_at`  backlog \n+  > [REVIEW] \n+  >\n+  > [RESPONSE] \n+  > [STATUS:resolved]\n+\n+## \n+\n+- `VEX/QueryQuotes`  stale  stale \n+- `VEX/QueryQuotes`  miss \n+-  `(product_ids, fields, updated_at)`miss fresh  stale\n+- \n+- /\n+\n+## \n+\n+- apps/virtual-exchange/src/quote/service.ts\n+\n+## \n+\n+1. **Discovery** - 1 \n+2. **Design** - 1 \n+3. **Implementation** - 1 \n+4. **Validation** - 1 \n+\n+---\n+\n+_: 2025-12-17 | : 2025-12-17_\n",
          "codeSnippets": []
        },
        {
          "additions": 115,
          "deletions": 0,
          "path": ".legion/tasks/task-vex-queryquotes-swr/tasks.md",
          "changeType": "added",
          "patch": "commit 179fcb0ac0ba01e6524dca1ef27d05c599995cc0\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 23:16:11 2025 +0800\n\n    feat(vex): Implement SWR for VEX/QueryQuotes with background updates (#2354)\n    \n    - Introduced SWR (stale-while-revalidate) semantics for the VEX/QueryQuotes service.\n    - Updated the service to immediately return cached results while enqueuing background updates for stale or missing quotes.\n    - Added a new queue management system using RxJS to handle update tasks in a serial manner.\n    - Implemented a new service endpoint VEX/QuoteUpdateQueueStatus to provide queue status metrics.\n    - Removed the strict freshness check and adjusted the error handling to differentiate between stale and missing data.\n    - Enhanced logging and error summarization for better observability.\n\ndiff --git a/.legion/tasks/task-vex-queryquotes-swr/tasks.md b/.legion/tasks/task-vex-queryquotes-swr/tasks.md\nnew file mode 100644\nindex 000000000..dadb0eb52\n--- /dev/null\n+++ b/.legion/tasks/task-vex-queryquotes-swr/tasks.md\n@@ -0,0 +1,115 @@\n+# task-vex-queryquotes-swr - \n+\n+## \n+\n+****:  4 - Validation\n+****:  prettier `.c1-cellar/vex-query-quotes.ts` stale  fresh miss \n+\n+- `VEX/QueryQuotes`  updated_at freshness `assertFreshnessSatisfied`  `VEX_QUOTE_FRESHNESS_NOT_SATISFIED`\n+  > [REVIEW] quoteState.filter  updated_at  updated_at  filter  assert \n+  >\n+  > [RESPONSE]  plan.md  stale `filterLatest`/ updated_at  miss\n+  > [STATUS:resolved]\n+-  `.c1-cellar/vex-query-quotes.ts`/\n+- `quoteProviderRegistry.fillQuoteStateFromUpstream`  `defaultAction` `\"\"` + `updated_at` miss\n+  / strict \n+  ****: 1/2 \n+\n+---\n+\n+##  1: Discovery  COMPLETE\n+\n+- [x] \n+- `VEX/QueryQuotes`  updated_at freshness `assertFreshnessSatisfied`  `VEX_QUOTE_FRESHNESS_NOT_SATISFIED`\n+-  `.c1-cellar/vex-query-quotes.ts`/\n+- `quoteProviderRegistry.fillQuoteStateFromUpstream`  `defaultAction` `\"\"` + `updated_at` miss\n+  / strict  | : context.md strict vs stale-OK+miss-error SWR \n+\n+---\n+\n+##  2: Design  COMPLETE\n+\n+- [x]  SWR //\n+\n+## 1.  `VEX/QueryQuotes` \n+\n+- `{ product_ids, fields, updated_at }`\n+- \n+  1.  `quoteState.getValueTuple`  `(product_id, field)`\n+     - `missing`miss\n+     - `needUpdate`miss + stale\n+  2.  `needUpdate.length > 0``updateQueue$.next({ product_ids, fields, updated_at })`\n+  3.  `data = filterLatest(product_ids, fields)` `updated_at`  tuple\n+  4.  `missing.length > 0` `return data`\n+- stale-OK + miss-errorstale miss \n+\n+> [REVIEW]  stale  missstale miss \n+>\n+> [RESPONSE]  SWR \n+>\n+> - `stale` `tuple.updated_at < req.updated_at`\n+> - `miss``getValueTuple`  undefined\n+>    `filterLatest` updated_at \n+>   [STATUS:resolved]\n+\n+## 2. UpdateTask \n+\n+- `type UpdateTask = { product_ids: string[]; fields: IQuoteKey[]; updated_at: number }`\n+- \n+  - `product_ids = uniq(sort(product_ids))`\n+  - `fields = uniq(sort(fields))`\n+  -  filter \n+\n+## 3. \n+\n+- `const updateQueue$ = new Subject<UpdateTask>()`\n+- `updateQueue$.pipe(concatMap(task => defer(() => processTask(task)).pipe(catchError(...))))\n+.subscribe()`\n+- `processTask(task)`\n+  1. `needUpdate2 = computeCacheMissed(quoteState, task.product_ids, task.fields, task.updated_at)`stale + miss\n+  2. returnno-op\n+  3. `await quoteProviderRegistry.fillQuoteStateFromUpstream({ quoteState, cacheMissed: needUpdate2, updated_at: task.updated_at })`\n+-  task error code\n+\n+## 4.  `updated_at` \n+\n+- \n+  -  `Date.now() - ` \n+  -  VEX  `fresh/stale` \n+-  `Date.now()`  miss quote.updated_at  >= now/\n+- \n+  -  `min_updated_at` `updated_at`  `max_staleness_ms` VEX  `min_updated_at = Date.now() - max_staleness_ms`\n+\n+## 5. \n+\n+-  `QueryQuotes` p99  await \n+- \n+  -  miss O(product_ids \\* fields) RPC \n+  -  backlog + \n+- \n+  - +/\n+  -  union  push\n+\n+plan.md  strict  | : plan.md ///updated_at /\n+\n+---\n+\n+##  3: Implementation  COMPLETE\n+\n+- [x]  `apps/virtual-exchange/src/quote/service.ts`  SWR `Subject<UpdateTask>` +  `VEX/QueryQuotes`  await  enqueue  `filterLatest`  miss  `provideService` / `VEX/QuoteUpdateQueueStatus` | : stale miss \n+\n+---\n+\n+##  4: Validation  IN PROGRESS\n+\n+- [ ]  prettier `.c1-cellar/vex-query-quotes.ts` stale  fresh miss  | :  SWR /  CURRENT\n+\n+---\n+\n+## \n+\n+- [x] / `VEX/QueryQuotesStrict`  context  tasks  | :  strict \n+\n+---\n+\n+_: 2025-12-17 22:54_\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "updateQueue",
              "code": "- `const updateQueue$ = new Subject<UpdateTask>()`\n- `updateQueue$.pipe(concatMap(task => defer(() => processTask(task)).pipe(catchError(...))))\n.subscribe()`\n- `processTask(task)`\n  1. `needUpdate2 = computeCacheMissed(quoteState, task.product_ids, task.fields, task.updated_at)`stale + miss\n  2. returnno-op\n  3. `await quoteProviderRegistry.fillQuoteStateFromUpstream({ quoteState, cacheMissed: needUpdate2, updated_at: task.updated_at })`\n-  task error code\n\n## 4.  `updated_at` \n\n- \n  -  `Date.now() - ` \n  -  VEX  `fresh/stale` \n-  `Date.now()`  miss quote.updated_at  >= now/",
              "lineStart": 65,
              "lineEnd": 116
            }
          ]
        },
        {
          "additions": 145,
          "deletions": 41,
          "path": "apps/virtual-exchange/src/quote/service.ts",
          "changeType": "modified",
          "patch": "commit 179fcb0ac0ba01e6524dca1ef27d05c599995cc0\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 23:16:11 2025 +0800\n\n    feat(vex): Implement SWR for VEX/QueryQuotes with background updates (#2354)\n    \n    - Introduced SWR (stale-while-revalidate) semantics for the VEX/QueryQuotes service.\n    - Updated the service to immediately return cached results while enqueuing background updates for stale or missing quotes.\n    - Added a new queue management system using RxJS to handle update tasks in a serial manner.\n    - Implemented a new service endpoint VEX/QuoteUpdateQueueStatus to provide queue status metrics.\n    - Removed the strict freshness check and adjusted the error handling to differentiate between stale and missing data.\n    - Enhanced logging and error summarization for better observability.\n\ndiff --git a/apps/virtual-exchange/src/quote/service.ts b/apps/virtual-exchange/src/quote/service.ts\nindex 6ef9b1676..9147045c8 100644\n--- a/apps/virtual-exchange/src/quote/service.ts\n+++ b/apps/virtual-exchange/src/quote/service.ts\n@@ -2 +2,2 @@ import { Terminal } from '@yuants/protocol';\n-import { newError } from '@yuants/utils';\n+import { formatTime, newError } from '@yuants/utils';\n+import { Subject, concatMap, defer } from 'rxjs';\n@@ -12,11 +13,47 @@ const quoteProviderRegistry = createQuoteProviderRegistry(terminal);\n-const assertFreshnessSatisfied = (\n-  data: IQuoteUpdateAction,\n-  params: { product_ids: string[]; fields: IQuoteKey[]; updated_at: number },\n-) => {\n-  console.info(\n-    '[VEX][Quote] Asserting freshness satisfied for requested quotes.',\n-    JSON.stringify(params),\n-    JSON.stringify(data),\n-  );\n-  const { product_ids, fields, updated_at } = params;\n-  const stillMissed: Array<{ product_id: string; field: IQuoteKey }> = [];\n+type UpdateTask = { product_ids: string[]; fields: IQuoteKey[]; updated_at: number };\n+\n+type IQuoteUpdateQueueStatus = {\n+  pending: number;\n+  in_flight: number;\n+  queued_total: number;\n+  started_total: number;\n+  processed_total: number;\n+  last_enqueued_at?: number;\n+  last_started_at?: number;\n+  last_processed_at?: number;\n+  last_error?: { at: number; code?: string; message?: string };\n+};\n+\n+const normalizeStrings = (values: string[]) => [...new Set(values)].sort();\n+const normalizeFields = (values: IQuoteKey[]) => [...new Set(values)].sort();\n+\n+const analyzeRequestedQuotes = (\n+  quoteState: IQuoteState,\n+  product_ids: string[],\n+  fields: IQuoteKey[],\n+  updated_at: number,\n+): { missing: IQuoteRequire[]; needUpdate: IQuoteRequire[] } => {\n+  const missing: IQuoteRequire[] = [];\n+  const needUpdate: IQuoteRequire[] = [];\n+  for (const product_id of product_ids) {\n+    for (const field of fields) {\n+      const tuple = quoteState.getValueTuple(product_id, field);\n+      if (tuple === undefined) {\n+        missing.push({ product_id, field });\n+        needUpdate.push({ product_id, field });\n+        continue;\n+      }\n+      if (tuple[1] < updated_at) {\n+        needUpdate.push({ product_id, field });\n+      }\n+    }\n+  }\n+  return { missing, needUpdate };\n+};\n+\n+const filterLatest = (\n+  quoteState: IQuoteState,\n+  product_ids: string[],\n+  fields: IQuoteKey[],\n+): IQuoteUpdateAction => {\n+  const result: IQuoteUpdateAction = {};\n@@ -23,0 +61 @@ const assertFreshnessSatisfied = (\n+    result[product_id] = {};\n@@ -25,2 +63,3 @@ const assertFreshnessSatisfied = (\n-      if (!data[product_id]?.[field]) {\n-        stillMissed.push({ product_id, field });\n+      const tuple = quoteState.getValueTuple(product_id, field);\n+      if (tuple) {\n+        result[product_id][field] = tuple;\n@@ -30 +69,5 @@ const assertFreshnessSatisfied = (\n-  if (stillMissed.length > 0) {\n+  return result;\n+};\n+\n+const assertNotMissing = (missing: IQuoteRequire[], updated_at: number) => {\n+  if (missing.length > 0) {\n@@ -33,2 +76,2 @@ const assertFreshnessSatisfied = (\n-      missed: stillMissed.slice(0, 200),\n-      missed_total: stillMissed.length,\n+      missed: missing.slice(0, 200),\n+      missed_total: missing.length,\n@@ -38,0 +82,71 @@ const assertFreshnessSatisfied = (\n+const updateQueue$ = new Subject<UpdateTask>();\n+const updateQueueStats: Omit<IQuoteUpdateQueueStatus, 'pending' | 'in_flight'> = {\n+  queued_total: 0,\n+  started_total: 0,\n+  processed_total: 0,\n+};\n+\n+const getQueueStatus = (): IQuoteUpdateQueueStatus => {\n+  const pending = updateQueueStats.queued_total - updateQueueStats.started_total;\n+  const in_flight = updateQueueStats.started_total - updateQueueStats.processed_total;\n+  return {\n+    pending,\n+    in_flight,\n+    ...updateQueueStats,\n+  };\n+};\n+\n+const enqueueUpdateTask = (task: UpdateTask) => {\n+  updateQueueStats.queued_total++;\n+  updateQueueStats.last_enqueued_at = Date.now();\n+  updateQueue$.next(task);\n+};\n+\n+const summarizeError = (error: unknown): { code?: string; message?: string } => {\n+  if (typeof error === 'object' && error !== null) {\n+    const code = 'code' in error ? (error as any).code : undefined;\n+    const message = 'message' in error ? (error as any).message : undefined;\n+    return {\n+      code: typeof code === 'string' ? code : undefined,\n+      message: typeof message === 'string' ? message : undefined,\n+    };\n+  }\n+  return {};\n+};\n+\n+const processUpdateTask = async (task: UpdateTask) => {\n+  const { needUpdate } = analyzeRequestedQuotes(quoteState, task.product_ids, task.fields, task.updated_at);\n+  await quoteProviderRegistry.fillQuoteStateFromUpstream({\n+    quoteState,\n+    cacheMissed: needUpdate,\n+    updated_at: task.updated_at,\n+  });\n+};\n+\n+updateQueue$\n+  .pipe(\n+    concatMap((task) =>\n+      defer(async () => {\n+        updateQueueStats.started_total++;\n+        updateQueueStats.last_started_at = Date.now();\n+\n+        try {\n+          await processUpdateTask(task);\n+        } catch (error) {\n+          const summary = summarizeError(error);\n+          updateQueueStats.last_error = { at: Date.now(), ...summary };\n+          console.info(\n+            formatTime(Date.now()),\n+            `[VEX][Quote]UpdateQueueTaskFailed`,\n+            `product_ids=${task.product_ids.length} fields=${task.fields.length} updated_at=${task.updated_at}`,\n+            JSON.stringify(summary),\n+          );\n+        } finally {\n+          updateQueueStats.processed_total++;\n+          updateQueueStats.last_processed_at = Date.now();\n+        }\n+      }),\n+    ),\n+  )\n+  .subscribe();\n+\n@@ -48,18 +161,0 @@ terminal.server.provideService<{}, IQuoteUpdateAction>('VEX/DumpQuoteState', {},\n-const computeCacheMissed = (\n-  quoteState: IQuoteState,\n-  product_ids: string[],\n-  fields: IQuoteKey[],\n-  updated_at: number,\n-): IQuoteRequire[] => {\n-  const cacheMissed: IQuoteRequire[] = [];\n-  for (const product_id of product_ids) {\n-    for (const field of fields) {\n-      const tuple = quoteState.getValueTuple(product_id, field);\n-      if (tuple === undefined || tuple[1] < updated_at) {\n-        cacheMissed.push({ product_id, field });\n-      }\n-    }\n-  }\n-  return cacheMissed;\n-};\n-\n@@ -70 +166 @@ terminal.server.provideService<\n-  'VEX/QueryQuotes',\n+  'VEX/QueryQuotes/C1',\n@@ -87 +183,3 @@ terminal.server.provideService<\n-    const { product_ids, fields, updated_at } = msg.req;\n+    const product_ids = normalizeStrings(msg.req.product_ids);\n+    const fields = normalizeFields(msg.req.fields);\n+    const { updated_at } = msg.req;\n@@ -89,2 +187,4 @@ terminal.server.provideService<\n-    const cacheMissed = computeCacheMissed(quoteState, product_ids, fields, updated_at);\n-    await quoteProviderRegistry.fillQuoteStateFromUpstream({ quoteState, cacheMissed, updated_at });\n+    const { missing, needUpdate } = analyzeRequestedQuotes(quoteState, product_ids, fields, updated_at);\n+    if (needUpdate.length > 0) {\n+      enqueueUpdateTask({ product_ids, fields, updated_at });\n+    }\n@@ -92,2 +192,2 @@ terminal.server.provideService<\n-    const data = quoteState.filter(product_ids, fields, updated_at);\n-    assertFreshnessSatisfied(data, { product_ids, fields, updated_at });\n+    const data = filterLatest(quoteState, product_ids, fields);\n+    assertNotMissing(missing, updated_at);\n@@ -96,0 +197,4 @@ terminal.server.provideService<\n+\n+terminal.server.provideService<{}, IQuoteUpdateQueueStatus>('VEX/QuoteUpdateQueueStatus', {}, async () => {\n+  return { res: { code: 0, message: 'OK', data: getQueueStatus() } };\n+});\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "normalizeStrings",
              "code": "const normalizeStrings = (values: string[]) => [...new Set(values)].sort();",
              "lineStart": 27,
              "lineEnd": 27
            },
            {
              "type": "function",
              "name": "normalizeFields",
              "code": "const normalizeFields = (values: IQuoteKey[]) => [...new Set(values)].sort();\n",
              "lineStart": 28,
              "lineEnd": 29
            },
            {
              "type": "function",
              "name": "analyzeRequestedQuotes",
              "code": "const analyzeRequestedQuotes = (\n  quoteState: IQuoteState,\n  product_ids: string[],\n  fields: IQuoteKey[],\n  updated_at: number,\n): { missing: IQuoteRequire[]; needUpdate: IQuoteRequire[] } => {",
              "lineStart": 30,
              "lineEnd": 35
            },
            {
              "type": "function",
              "name": "missing",
              "code": "const missing: IQuoteRequire[] = [];",
              "lineStart": 36,
              "lineEnd": 36
            },
            {
              "type": "function",
              "name": "needUpdate",
              "code": "const needUpdate: IQuoteRequire[] = [];",
              "lineStart": 37,
              "lineEnd": 37
            },
            {
              "type": "function",
              "name": "product_id",
              "code": "for (const product_id of product_ids) {",
              "lineStart": 38,
              "lineEnd": 38
            },
            {
              "type": "function",
              "name": "field",
              "code": "for (const field of fields) {",
              "lineStart": 39,
              "lineEnd": 39
            },
            {
              "type": "function",
              "name": "tuple",
              "code": "      const tuple = quoteState.getValueTuple(product_id, field);\n      if (tuple === undefined) {\n        missing.push({ product_id, field });\n        needUpdate.push({ product_id, field });\n        continue;\n      }\n      if (tuple[1] < updated_at) {\n        needUpdate.push({ product_id, field });\n      }\n    }\n  }\n  return { missing, needUpdate };\n};\n",
              "lineStart": 40,
              "lineEnd": 53
            },
            {
              "type": "function",
              "name": "filterLatest",
              "code": "const filterLatest = (\n  quoteState: IQuoteState,\n  product_ids: string[],\n  fields: IQuoteKey[],\n): IQuoteUpdateAction => {",
              "lineStart": 54,
              "lineEnd": 58
            },
            {
              "type": "function",
              "name": "result",
              "code": "const result: IQuoteUpdateAction = {};\n  result[product_id] = {};",
              "lineStart": 59,
              "lineEnd": 62
            },
            {
              "type": "function",
              "name": "tuple",
              "code": "      const tuple = quoteState.getValueTuple(product_id, field);\n      if (tuple) {\n        result[product_id][field] = tuple;\n  return result;\n};\n",
              "lineStart": 63,
              "lineEnd": 71
            },
            {
              "type": "function",
              "name": "assertNotMissing",
              "code": "const assertNotMissing = (missing: IQuoteRequire[], updated_at: number) => {\n  if (missing.length > 0) {\n      missed: missing.slice(0, 200),\n      missed_total: missing.length,",
              "lineStart": 72,
              "lineEnd": 81
            },
            {
              "type": "function",
              "name": "updateQueue",
              "code": "const updateQueue$ = new Subject<UpdateTask>();",
              "lineStart": 82,
              "lineEnd": 82
            },
            {
              "type": "function",
              "name": "updateQueueStats",
              "code": "const updateQueueStats: Omit<IQuoteUpdateQueueStatus, 'pending' | 'in_flight'> = {\n  queued_total: 0,\n  started_total: 0,\n  processed_total: 0,\n};\n",
              "lineStart": 83,
              "lineEnd": 88
            },
            {
              "type": "function",
              "name": "getQueueStatus",
              "code": "const getQueueStatus = (): IQuoteUpdateQueueStatus => {",
              "lineStart": 89,
              "lineEnd": 89
            },
            {
              "type": "function",
              "name": "pending",
              "code": "const pending = updateQueueStats.queued_total - updateQueueStats.started_total;",
              "lineStart": 90,
              "lineEnd": 90
            },
            {
              "type": "function",
              "name": "in_flight",
              "code": "  const in_flight = updateQueueStats.started_total - updateQueueStats.processed_total;\n  return {\n    pending,\n    in_flight,\n    ...updateQueueStats,\n  };\n};\n",
              "lineStart": 91,
              "lineEnd": 98
            },
            {
              "type": "function",
              "name": "enqueueUpdateTask",
              "code": "const enqueueUpdateTask = (task: UpdateTask) => {\n  updateQueueStats.queued_total++;\n  updateQueueStats.last_enqueued_at = Date.now();\n  updateQueue$.next(task);\n};\n",
              "lineStart": 99,
              "lineEnd": 104
            },
            {
              "type": "function",
              "name": "summarizeError",
              "code": "const summarizeError = (error: unknown): { code?: string; message?: string } => {\n  if (typeof error === 'object' && error !== null) {",
              "lineStart": 105,
              "lineEnd": 106
            },
            {
              "type": "function",
              "name": "code",
              "code": "const code = 'code' in error ? (error as any).code : undefined;",
              "lineStart": 107,
              "lineEnd": 107
            },
            {
              "type": "function",
              "name": "message",
              "code": "    const message = 'message' in error ? (error as any).message : undefined;\n    return {\n      code: typeof code === 'string' ? code : undefined,\n      message: typeof message === 'string' ? message : undefined,\n    };\n  }\n  return {};\n};\n",
              "lineStart": 108,
              "lineEnd": 116
            },
            {
              "type": "function",
              "name": "processUpdateTask",
              "code": "const processUpdateTask = async (task: UpdateTask) => {\n  const { needUpdate } = analyzeRequestedQuotes(quoteState, task.product_ids, task.fields, task.updated_at);\n  await quoteProviderRegistry.fillQuoteStateFromUpstream({\n    quoteState,\n    cacheMissed: needUpdate,\n    updated_at: task.updated_at,\n  });\n};\n\nupdateQueue$\n  .pipe(\n    concatMap((task) =>\n      defer(async () => {\n        updateQueueStats.started_total++;\n        updateQueueStats.last_started_at = Date.now();",
              "lineStart": 117,
              "lineEnd": 135
            },
            {
              "type": "function",
              "name": "summary",
              "code": "        const summary = summarizeError(error);\n        updateQueueStats.last_error = { at: Date.now(), ...summary };\n        console.info(\n          formatTime(Date.now()),\n          `[VEX][Quote]UpdateQueueTaskFailed`,\n          `product_ids=${task.product_ids.length} fields=${task.fields.length} updated_at=${task.updated_at}`,\n          JSON.stringify(summary),\n        );\n      } finally {\n        updateQueueStats.processed_total++;\n        updateQueueStats.last_processed_at = Date.now();\n      }\n    }),\n  ),\n)",
              "lineStart": 136,
              "lineEnd": 182
            },
            {
              "type": "function",
              "name": "product_ids",
              "code": "const product_ids = normalizeStrings(msg.req.product_ids);",
              "lineStart": 183,
              "lineEnd": 183
            },
            {
              "type": "function",
              "name": "fields",
              "code": "const fields = normalizeFields(msg.req.fields);\nconst { updated_at } = msg.req;\nconst { missing, needUpdate } = analyzeRequestedQuotes(quoteState, product_ids, fields, updated_at);\nif (needUpdate.length > 0) {\n  enqueueUpdateTask({ product_ids, fields, updated_at });\n}",
              "lineStart": 184,
              "lineEnd": 191
            },
            {
              "type": "function",
              "name": "data",
              "code": "    const data = filterLatest(quoteState, product_ids, fields);\n    assertNotMissing(missing, updated_at);\n\nterminal.server.provideService<{}, IQuoteUpdateQueueStatus>('VEX/QuoteUpdateQueueStatus', {}, async () => {\n  return { res: { code: 0, message: 'OK', data: getQueueStatus() } };\n});",
              "lineStart": 192,
              "lineEnd": 201
            }
          ]
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-17-15-14.json",
          "changeType": "added",
          "patch": "commit 179fcb0ac0ba01e6524dca1ef27d05c599995cc0\nAuthor: Siyuan Wang <c.one@thrimbda.com>\nDate:   Wed Dec 17 23:16:11 2025 +0800\n\n    feat(vex): Implement SWR for VEX/QueryQuotes with background updates (#2354)\n    \n    - Introduced SWR (stale-while-revalidate) semantics for the VEX/QueryQuotes service.\n    - Updated the service to immediately return cached results while enqueuing background updates for stale or missing quotes.\n    - Added a new queue management system using RxJS to handle update tasks in a serial manner.\n    - Implemented a new service endpoint VEX/QuoteUpdateQueueStatus to provide queue status metrics.\n    - Removed the strict freshness check and adjusted the error handling to differentiate between stale and missing data.\n    - Enhanced logging and error summarization for better observability.\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-17-15-14.json b/common/changes/@yuants/app-virtual-exchange/2025-12-17-15-14.json\nnew file mode 100644\nindex 000000000..1ba589e03\n--- /dev/null\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-17-15-14.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-virtual-exchange\",\n+      \"comment\": \"Implement SWR for VEX/QueryQuotes with background updates\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-virtual-exchange\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "bce08cb2d663d420efc88c2a354575c0789616f5",
      "short": "bce08cb2d",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-18 05:40:34 +0800",
      "subject": "chore: bump version (#2355)",
      "conventionalCommit": {
        "type": "chore",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/virtual-exchange/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit bce08cb2d663d420efc88c2a354575c0789616f5\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 18 05:40:34 2025 +0800\n\n    chore: bump version (#2355)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\nindex 0816daf2f..1098440b6 100644\n--- a/apps/virtual-exchange/CHANGELOG.json\n+++ b/apps/virtual-exchange/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.10.1\",\n+      \"tag\": \"@yuants/app-virtual-exchange_v0.10.1\",\n+      \"date\": \"Wed, 17 Dec 2025 15:18:39 GMT\",\n+      \"comments\": {\n+        \"patch\": [\n+          {\n+            \"comment\": \"refactor quote routing\"\n+          },\n+          {\n+            \"comment\": \"Implement SWR for VEX/QueryQuotes with background updates\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 9,
          "deletions": 1,
          "path": "apps/virtual-exchange/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit bce08cb2d663d420efc88c2a354575c0789616f5\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 18 05:40:34 2025 +0800\n\n    chore: bump version (#2355)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\nindex dd8c65787..886890730 100644\n--- a/apps/virtual-exchange/CHANGELOG.md\n+++ b/apps/virtual-exchange/CHANGELOG.md\n@@ -3 +3,9 @@\n-This log was last generated on Wed, 17 Dec 2025 05:52:34 GMT and should not be manually modified.\n+This log was last generated on Wed, 17 Dec 2025 15:18:39 GMT and should not be manually modified.\n+\n+## 0.10.1\n+Wed, 17 Dec 2025 15:18:39 GMT\n+\n+### Patches\n+\n+- refactor quote routing\n+- Implement SWR for VEX/QueryQuotes with background updates\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/virtual-exchange/package.json",
          "changeType": "modified",
          "patch": "commit bce08cb2d663d420efc88c2a354575c0789616f5\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 18 05:40:34 2025 +0800\n\n    chore: bump version (#2355)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\nindex 6cf684a5c..165dee6f4 100644\n--- a/apps/virtual-exchange/package.json\n+++ b/apps/virtual-exchange/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.10.0\",\n+  \"version\": \"0.10.1\",\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-17-08-27.json",
          "changeType": "deleted",
          "patch": "commit bce08cb2d663d420efc88c2a354575c0789616f5\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 18 05:40:34 2025 +0800\n\n    chore: bump version (#2355)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-17-08-27.json b/common/changes/@yuants/app-virtual-exchange/2025-12-17-08-27.json\ndeleted file mode 100644\nindex 3fbb4de15..000000000\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-17-08-27.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/app-virtual-exchange\",\n-      \"comment\": \"refactor quote routing\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/app-virtual-exchange\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-17-15-14.json",
          "changeType": "deleted",
          "patch": "commit bce08cb2d663d420efc88c2a354575c0789616f5\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Thu Dec 18 05:40:34 2025 +0800\n\n    chore: bump version (#2355)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-17-15-14.json b/common/changes/@yuants/app-virtual-exchange/2025-12-17-15-14.json\ndeleted file mode 100644\nindex 1ba589e03..000000000\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-17-15-14.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/app-virtual-exchange\",\n-      \"comment\": \"Implement SWR for VEX/QueryQuotes with background updates\",\n-      \"type\": \"patch\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/app-virtual-exchange\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/{main_2025-12-17-05-52.json => main_2025-12-17-15-18.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        }
      ]
    }
  ],
  "analysis": {
    "domains": [
      {
        "name": "",
        "commits": [
          "8a3e2452a",
          "961f628e3",
          "56a6b7c06",
          "0232b58ad",
          "570bbcccd",
          "179fcb0ac"
        ],
        "files": [
          "apps/trade-copier/package.json",
          "common/changes/@yuants/app-trade-copier/2025-12-17-00-11.json",
          "common/config/rush/pnpm-lock.yaml",
          "libraries/order/CHANGELOG.json",
          "libraries/order/CHANGELOG.md",
          "libraries/order/api-extractor.json",
          "libraries/order/config/jest.config.json",
          "libraries/order/config/rig.json",
          "libraries/order/config/typescript.json",
          "libraries/order/etc/order.api.md"
        ]
      },
      {
        "name": "",
        "commits": [
          "8a3e2452a",
          "0232b58ad",
          "4e876a865"
        ],
        "files": [
          "apps/trade-copier/package.json",
          "common/changes/@yuants/app-trade-copier/2025-12-17-00-11.json",
          "common/config/rush/pnpm-lock.yaml",
          "libraries/order/CHANGELOG.json",
          "libraries/order/CHANGELOG.md",
          "libraries/order/api-extractor.json",
          "libraries/order/config/jest.config.json",
          "libraries/order/config/rig.json",
          "libraries/order/config/typescript.json",
          "libraries/order/etc/order.api.md"
        ]
      },
      {
        "name": "",
        "commits": [
          "8a3e2452a",
          "961f628e3",
          "56a6b7c06",
          "0232b58ad",
          "570bbcccd",
          "4e876a865",
          "179fcb0ac",
          "bce08cb2d"
        ],
        "files": [
          "apps/trade-copier/package.json",
          "common/changes/@yuants/app-trade-copier/2025-12-17-00-11.json",
          "common/config/rush/pnpm-lock.yaml",
          "libraries/order/CHANGELOG.json",
          "libraries/order/CHANGELOG.md",
          "libraries/order/api-extractor.json",
          "libraries/order/config/jest.config.json",
          "libraries/order/config/rig.json",
          "libraries/order/config/typescript.json",
          "libraries/order/etc/order.api.md"
        ]
      },
      {
        "name": "",
        "commits": [
          "8a3e2452a",
          "961f628e3",
          "0232b58ad",
          "570bbcccd",
          "4e876a865",
          "179fcb0ac",
          "bce08cb2d"
        ],
        "files": [
          "apps/trade-copier/package.json",
          "common/changes/@yuants/app-trade-copier/2025-12-17-00-11.json",
          "common/config/rush/pnpm-lock.yaml",
          "libraries/order/CHANGELOG.json",
          "libraries/order/CHANGELOG.md",
          "libraries/order/api-extractor.json",
          "libraries/order/config/jest.config.json",
          "libraries/order/config/rig.json",
          "libraries/order/config/typescript.json",
          "libraries/order/etc/order.api.md"
        ]
      },
      {
        "name": "API",
        "commits": [
          "961f628e3",
          "0232b58ad",
          "179fcb0ac"
        ],
        "files": [
          "docs/reports/git-changes-2025-12-17.json",
          "docs/reports/git-changes-report-2025-12-17.md",
          "apps/virtual-exchange/src/position.ts",
          "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-31.json",
          "common/changes/@yuants/data-account/2025-12-17-02-31.json",
          "common/changes/@yuants/exchange/2025-12-17-02-31.json",
          "libraries/data-account/etc/data-account.api.md",
          "libraries/data-account/src/interface.ts",
          "libraries/exchange/etc/exchange.api.md",
          "libraries/exchange/src/index.ts"
        ]
      },
      {
        "name": "",
        "commits": [
          "961f628e3",
          "56a6b7c06",
          "0232b58ad",
          "179fcb0ac"
        ],
        "files": [
          "docs/reports/git-changes-2025-12-17.json",
          "docs/reports/git-changes-report-2025-12-17.md",
          "apps/virtual-exchange/src/quote/__tests__/implementations.test.ts",
          "apps/virtual-exchange/src/quote/implementations/v0.ts",
          "apps/virtual-exchange/src/quote/implementations/v1.ts",
          "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json",
          "apps/virtual-exchange/src/position.ts",
          "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-31.json",
          "common/changes/@yuants/data-account/2025-12-17-02-31.json",
          "common/changes/@yuants/exchange/2025-12-17-02-31.json"
        ]
      },
      {
        "name": "",
        "commits": [
          "961f628e3",
          "56a6b7c06",
          "0232b58ad",
          "570bbcccd",
          "179fcb0ac"
        ],
        "files": [
          "docs/reports/git-changes-2025-12-17.json",
          "docs/reports/git-changes-report-2025-12-17.md",
          "apps/virtual-exchange/src/quote/__tests__/implementations.test.ts",
          "apps/virtual-exchange/src/quote/implementations/v0.ts",
          "apps/virtual-exchange/src/quote/implementations/v1.ts",
          "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json",
          "apps/virtual-exchange/src/position.ts",
          "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-31.json",
          "common/changes/@yuants/data-account/2025-12-17-02-31.json",
          "common/changes/@yuants/exchange/2025-12-17-02-31.json"
        ]
      },
      {
        "name": "",
        "commits": [
          "961f628e3",
          "56a6b7c06",
          "0232b58ad",
          "4e876a865",
          "179fcb0ac"
        ],
        "files": [
          "docs/reports/git-changes-2025-12-17.json",
          "docs/reports/git-changes-report-2025-12-17.md",
          "apps/virtual-exchange/src/quote/__tests__/implementations.test.ts",
          "apps/virtual-exchange/src/quote/implementations/v0.ts",
          "apps/virtual-exchange/src/quote/implementations/v1.ts",
          "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json",
          "apps/virtual-exchange/src/position.ts",
          "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-31.json",
          "common/changes/@yuants/data-account/2025-12-17-02-31.json",
          "common/changes/@yuants/exchange/2025-12-17-02-31.json"
        ]
      },
      {
        "name": "",
        "commits": [
          "56a6b7c06",
          "4e876a865"
        ],
        "files": [
          "apps/virtual-exchange/src/quote/__tests__/implementations.test.ts",
          "apps/virtual-exchange/src/quote/implementations/v0.ts",
          "apps/virtual-exchange/src/quote/implementations/v1.ts",
          "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json",
          ".legion/config.json",
          ".legion/ledger.csv",
          ".legion/tasks/task-vex-quote-upstream-refactor/context.md",
          ".legion/tasks/task-vex-quote-upstream-refactor/plan.md",
          ".legion/tasks/task-vex-quote-upstream-refactor/tasks.md",
          "apps/AGENTS.md"
        ]
      },
      {
        "name": "",
        "commits": [
          "56a6b7c06"
        ],
        "files": [
          "apps/virtual-exchange/src/quote/__tests__/implementations.test.ts",
          "apps/virtual-exchange/src/quote/implementations/v0.ts",
          "apps/virtual-exchange/src/quote/implementations/v1.ts",
          "common/changes/@yuants/app-virtual-exchange/2025-12-17-02-24.json"
        ]
      }
    ],
    "riskIndicators": [
      {
        "type": "large_refactor",
        "severity": "medium",
        "details": "1 100",
        "commits": [
          "4e876a865"
        ]
      },
      {
        "type": "api_change",
        "severity": "high",
        "details": "2 API",
        "commits": [
          "8a3e2452a",
          "0232b58ad"
        ]
      }
    ]
  },
  "metadata": {
    "tool": "git-changes-reporter",
    "version": "3.0.0",
    "repository": "/home/runner/work/Yuan/Yuan"
  }
}