{
  "range": {
    "old": "38bf668bd5c72f4ba031682f6b394f5e9e2280be",
    "new": "57eb64f3f68f1c8226229a12070961a49bfca221",
    "label": "38bf668bd..57eb64f3f",
    "startDate": "2025-12-29",
    "endDate": "2025-12-30",
    "commitCount": 5,
    "generatedAt": "2025-12-30T00:06:14.740Z"
  },
  "contributors": [
    {
      "name": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "commits": 3
    },
    {
      "name": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "commits": 2
    }
  ],
  "directoryAnalysis": {
    "topLevel": [
      {
        "dir": "apps",
        "fileCount": 46
      },
      {
        "dir": "libraries",
        "fileCount": 40
      },
      {
        "dir": "common",
        "fileCount": 24
      },
      {
        "dir": "distributions",
        "fileCount": 5
      },
      {
        "dir": "ui",
        "fileCount": 3
      }
    ],
    "projects": [
      {
        "project": "common",
        "fileCount": 24,
        "marker": null
      },
      {
        "project": "libraries/kernel",
        "fileCount": 19,
        "marker": "package.json"
      },
      {
        "project": "libraries/agent",
        "fileCount": 10,
        "marker": "package.json"
      },
      {
        "project": "libraries/data-ohlc",
        "fileCount": 8,
        "marker": "package.json"
      },
      {
        "project": "apps/virtual-exchange",
        "fileCount": 6,
        "marker": "package.json"
      },
      {
        "project": "distributions/origin",
        "fileCount": 5,
        "marker": "package.json"
      },
      {
        "project": "apps/postgres-storage",
        "fileCount": 4,
        "marker": "package.json"
      },
      {
        "project": "apps/agent",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/trade-copier",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-aster",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-binance",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-bitget",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-gate",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-huobi",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-hyperliquid",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-okx",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-tq",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-trading-view",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "apps/vendor-turboflow",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "libraries/exchange",
        "fileCount": 3,
        "marker": "package.json"
      },
      {
        "project": "ui/web",
        "fileCount": 3,
        "marker": "package.json"
      }
    ],
    "markersUsed": [
      "package.json",
      "Cargo.toml",
      "go.mod",
      "requirements.txt",
      "pyproject.toml",
      "setup.py",
      "pom.xml",
      "build.gradle",
      "build.gradle.kts",
      "CMakeLists.txt",
      "Makefile",
      "pubspec.yaml",
      "mix.exs",
      "Gemfile",
      "composer.json"
    ]
  },
  "commits": [
    {
      "hash": "cc55da276032ad94ff58df6316adcd6f1b459f39",
      "short": "cc55da276",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-29 16:47:42 +0800",
      "subject": "feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 53,
          "deletions": 0,
          "path": "apps/postgres-storage/src/index.ts",
          "changeType": "added",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/apps/postgres-storage/src/index.ts b/apps/postgres-storage/src/index.ts\nindex 492295e38..1d0189ed6 100644\n--- a/apps/postgres-storage/src/index.ts\n+++ b/apps/postgres-storage/src/index.ts\n@@ -86,0 +87,53 @@ terminal.server.provideService(\n+\n+// SQL v2: 支持流式返回结果，需要在 requestSQL 中使用 for await 进行迭代\n+terminal.server.provideService(\n+  'SQL/v2',\n+  {\n+    required: ['query'],\n+    properties: {\n+      query: {\n+        type: 'string',\n+        description: 'SQL query to execute',\n+      },\n+    },\n+  },\n+  async function* (msg, { isAborted$ }) {\n+    console.info(formatTime(Date.now()), 'SQL REQUEST', msg.trace_id);\n+    const startTime = Date.now();\n+    // 从msg中获取source_terminal_id\n+    const source_terminal_id = msg.source_terminal_id || 'unknown';\n+    // @ts-ignore\n+    const query = sql.unsafe(msg.req.query);\n+\n+    from(isAborted$)\n+      .pipe(\n+        //\n+        first((x) => x),\n+        tap(() => {\n+          console.info(formatTime(Date.now()), 'SQL ABORTED', msg.trace_id);\n+          // ISSUE: cancel will break the sql query, which will cause the query to fail and be caught in the catch block\n+          query.cancel();\n+        }),\n+      )\n+      .subscribe();\n+\n+    try {\n+      const cursor = query.cursor(1000);\n+      for await (const rows of cursor) {\n+        yield { frame: { data: rows } };\n+      }\n+      // 记录成功请求，添加source_terminal_id标签\n+      totalSuccess.inc();\n+      return { res: { code: 0, message: 'OK' } };\n+    } catch (e) {\n+      const duration = Date.now() - startTime;\n+      console.error(formatTime(Date.now()), 'SQL ERROR', msg.trace_id, e);\n+\n+      // 记录失败请求，添加source_terminal_id标签\n+      totalError.inc();\n+      durationWhenError.observe(duration);\n+\n+      throw e;\n+    }\n+  },\n+);\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "startTime",
              "code": "const startTime = Date.now();\n// 从msg中获取source_terminal_id",
              "lineStart": 102,
              "lineEnd": 103
            },
            {
              "type": "function",
              "name": "source_terminal_id",
              "code": "const source_terminal_id = msg.source_terminal_id || 'unknown';\n// @ts-ignore",
              "lineStart": 104,
              "lineEnd": 105
            },
            {
              "type": "function",
              "name": "query",
              "code": "const query = sql.unsafe(msg.req.query);\n\nfrom(isAborted$)\n  .pipe(\n    //\n    first((x) => x),\n    tap(() => {\n      console.info(formatTime(Date.now()), 'SQL ABORTED', msg.trace_id);\n      // ISSUE: cancel will break the sql query, which will cause the query to fail and be caught in the catch block\n      query.cancel();\n    }),\n  )\n  .subscribe();\n\ntry {",
              "lineStart": 106,
              "lineEnd": 120
            },
            {
              "type": "function",
              "name": "cursor",
              "code": "const cursor = query.cursor(1000);",
              "lineStart": 121,
              "lineEnd": 121
            },
            {
              "type": "function",
              "name": "rows",
              "code": "  for await (const rows of cursor) {\n    yield { frame: { data: rows } };\n  }\n  // 记录成功请求，添加source_terminal_id标签\n  totalSuccess.inc();\n  return { res: { code: 0, message: 'OK' } };\n} catch (e) {",
              "lineStart": 122,
              "lineEnd": 128
            },
            {
              "type": "function",
              "name": "duration",
              "code": "      const duration = Date.now() - startTime;\n      console.error(formatTime(Date.now()), 'SQL ERROR', msg.trace_id, e);\n\n      // 记录失败请求，添加source_terminal_id标签\n      totalError.inc();\n      durationWhenError.observe(duration);\n\n      throw e;\n    }\n  },\n);",
              "lineStart": 129,
              "lineEnd": 140
            }
          ]
        },
        {
          "additions": 120,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/series-collector/forwards-ohlc.ts",
          "changeType": "added",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/apps/virtual-exchange/src/series-collector/forwards-ohlc.ts b/apps/virtual-exchange/src/series-collector/forwards-ohlc.ts\nnew file mode 100644\nindex 000000000..5392defdb\n--- /dev/null\n+++ b/apps/virtual-exchange/src/series-collector/forwards-ohlc.ts\n@@ -0,0 +1,120 @@\n+// 解决 Forwards 拉取历史数据的调度器\n+// 该文件会定期扫描所有 Terminal 的 ServiceInfo，提取出所有支持 Forwards 拉取的序列。\n+// 然后对每个序列，向对应的 IngestOHLC Service 发送拉取请求，补齐历史数据。\n+// 使用 Token Bucket 控制每个数据源的请求速率，避免过载。\n+\n+import { decodeOHLCSeriesId, encodeOHLCSeriesId } from '@yuants/data-ohlc';\n+import {\n+  IIngestOHLCRequest,\n+  ISeriesIngestResult,\n+  parseOHLCServiceMetadataFromSchema,\n+} from '@yuants/exchange';\n+import { Terminal } from '@yuants/protocol';\n+import { escapeSQL, requestSQL } from '@yuants/sql';\n+import { decodePath, formatTime, tokenBucket } from '@yuants/utils';\n+import { defer, repeat, retry } from 'rxjs';\n+\n+const terminal = Terminal.fromNodeEnv();\n+\n+const listForwardSeriesIds = async () => {\n+  const product_ids = await requestSQL<{ product_id: string }[]>(terminal, `select product_id from product`);\n+\n+  console.time('[SeriesCollector][OHLC][Forwards] calc');\n+\n+  const series_ids = new Set<string>();\n+  for (const terminalInfo of terminal.terminalInfos) {\n+    for (const serviceInfo of Object.values(terminalInfo.serviceInfo || {})) {\n+      if (serviceInfo.method !== 'IngestOHLC') continue;\n+      try {\n+        const meta = parseOHLCServiceMetadataFromSchema(serviceInfo.schema);\n+        if (meta.direction !== 'forward') continue;\n+\n+        for (const { product_id } of product_ids) {\n+          if (!product_id.startsWith(meta.product_id_prefix)) continue;\n+          for (const duration of meta.duration_list) {\n+            const series_id = encodeOHLCSeriesId(product_id, duration);\n+            series_ids.add(series_id);\n+          }\n+        }\n+      } finally {\n+      }\n+    }\n+  }\n+\n+  console.timeEnd('[SeriesCollector][OHLC][Forwards] calc');\n+\n+  return series_ids;\n+};\n+\n+defer(async () => {\n+  const time = Date.now();\n+  const series_ids = await listForwardSeriesIds();\n+  console.log(\n+    `[SeriesCollector][OHLC][Forwards] Found ${\n+      series_ids.size\n+    } series to collect forwards data for. (${formatTime(Date.now() - time)})`,\n+  );\n+\n+  await Promise.all(\n+    [...series_ids].map(async (series_id) => {\n+      try {\n+        const { product_id, duration } = decodeOHLCSeriesId(series_id);\n+        const [datasource_id] = decodePath(product_id);\n+        // 控制速率：每个数据源每秒钟只能请求一次\n+        await tokenBucket(`ohlc_forwards_target_${datasource_id}`, {\n+          refillInterval: 1000,\n+          capacity: 1,\n+        }).acquire();\n+        {\n+          const [record] = await requestSQL<\n+            {\n+              end_time: string;\n+            }[]\n+          >(\n+            terminal,\n+            `select end_time from series_data_range where series_id = ${escapeSQL(\n+              series_id,\n+            )} and table_name = 'ohlc_v2' order by end_time desc limit 1`,\n+          );\n+\n+          const time = record ? new Date(record.end_time).getTime() : 0;\n+\n+          const req: IIngestOHLCRequest = {\n+            product_id,\n+            duration,\n+            direction: 'forward',\n+            time,\n+          };\n+\n+          console.info(\n+            formatTime(Date.now()),\n+            'DispatchIngestOHLC_Forwards',\n+            `product_id=${product_id}, duration=${duration}, time=${formatTime(time)}`,\n+          );\n+\n+          const res = await terminal.client.requestForResponseData<IIngestOHLCRequest, ISeriesIngestResult>(\n+            'IngestOHLC',\n+            req,\n+          );\n+\n+          terminal.metrics\n+            .counter('series_collector_forwards_ingest_count', '')\n+            .labels({ terminal_id: terminal.terminal_id, type: 'ohlc' })\n+            .inc(res.wrote_count || 0);\n+\n+          console.info(\n+            formatTime(Date.now()),\n+            'DispatchIngestOHLCResult_Forwards',\n+            `series_id=${series_id}, ingested_count=${res.wrote_count}, start_time=${formatTime(\n+              res.range?.start_time ?? NaN,\n+            )}, end_time=${formatTime(res.range?.end_time ?? NaN)}`,\n+          );\n+        }\n+      } catch (e) {\n+        console.info(formatTime(Date.now()), 'DispatchIngestOHLCError_Forwards', `series_id=${series_id}`, e);\n+      }\n+    }),\n+  );\n+})\n+  .pipe(retry({ delay: 1000 }), repeat({ delay: 1000 }))\n+  .subscribe();\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "terminal",
              "code": "const terminal = Terminal.fromNodeEnv();\n",
              "lineStart": 17,
              "lineEnd": 18
            },
            {
              "type": "function",
              "name": "listForwardSeriesIds",
              "code": "const listForwardSeriesIds = async () => {",
              "lineStart": 19,
              "lineEnd": 19
            },
            {
              "type": "function",
              "name": "product_ids",
              "code": "const product_ids = await requestSQL<{ product_id: string }[]>(terminal, `select product_id from product`);\n\nconsole.time('[SeriesCollector][OHLC][Forwards] calc');\n",
              "lineStart": 20,
              "lineEnd": 23
            },
            {
              "type": "function",
              "name": "series_ids",
              "code": "const series_ids = new Set<string>();",
              "lineStart": 24,
              "lineEnd": 24
            },
            {
              "type": "function",
              "name": "terminalInfo",
              "code": "for (const terminalInfo of terminal.terminalInfos) {",
              "lineStart": 25,
              "lineEnd": 25
            },
            {
              "type": "function",
              "name": "serviceInfo",
              "code": "for (const serviceInfo of Object.values(terminalInfo.serviceInfo || {})) {\n  if (serviceInfo.method !== 'IngestOHLC') continue;\n  try {",
              "lineStart": 26,
              "lineEnd": 28
            },
            {
              "type": "function",
              "name": "meta",
              "code": "const meta = parseOHLCServiceMetadataFromSchema(serviceInfo.schema);\nif (meta.direction !== 'forward') continue;\n\nfor (const { product_id } of product_ids) {\n  if (!product_id.startsWith(meta.product_id_prefix)) continue;",
              "lineStart": 29,
              "lineEnd": 33
            },
            {
              "type": "function",
              "name": "duration",
              "code": "for (const duration of meta.duration_list) {",
              "lineStart": 34,
              "lineEnd": 34
            },
            {
              "type": "function",
              "name": "series_id",
              "code": "            const series_id = encodeOHLCSeriesId(product_id, duration);\n            series_ids.add(series_id);\n          }\n        }\n      } finally {\n      }\n    }\n  }\n\n  console.timeEnd('[SeriesCollector][OHLC][Forwards] calc');\n\n  return series_ids;\n};\n\ndefer(async () => {",
              "lineStart": 35,
              "lineEnd": 49
            },
            {
              "type": "function",
              "name": "time",
              "code": "const time = Date.now();",
              "lineStart": 50,
              "lineEnd": 50
            },
            {
              "type": "function",
              "name": "series_ids",
              "code": "const series_ids = await listForwardSeriesIds();\nconsole.log(\n  `[SeriesCollector][OHLC][Forwards] Found ${\n    series_ids.size\n  } series to collect forwards data for. (${formatTime(Date.now() - time)})`,\n);\n\nawait Promise.all(\n  [...series_ids].map(async (series_id) => {\n    try {\n      const { product_id, duration } = decodeOHLCSeriesId(series_id);\n      const [datasource_id] = decodePath(product_id);\n      // 控制速率：每个数据源每秒钟只能请求一次\n      await tokenBucket(`ohlc_forwards_target_${datasource_id}`, {\n        refillInterval: 1000,",
              "lineStart": 51,
              "lineEnd": 79
            },
            {
              "type": "function",
              "name": "time",
              "code": "const time = record ? new Date(record.end_time).getTime() : 0;\n",
              "lineStart": 80,
              "lineEnd": 81
            },
            {
              "type": "function",
              "name": "req",
              "code": "const req: IIngestOHLCRequest = {\n  product_id,\n  duration,\n  direction: 'forward',\n  time,\n};\n\nconsole.info(\n  formatTime(Date.now()),\n  'DispatchIngestOHLC_Forwards',\n  `product_id=${product_id}, duration=${duration}, time=${formatTime(time)}`,\n);\n",
              "lineStart": 82,
              "lineEnd": 94
            },
            {
              "type": "function",
              "name": "res",
              "code": "const res = await terminal.client.requestForResponseData<IIngestOHLCRequest, ISeriesIngestResult>(\n  'IngestOHLC',\n  req,\n);\n\nterminal.metrics\n  .counter('series_collector_forwards_ingest_count', '')\n  .labels({ terminal_id: terminal.terminal_id, type: 'ohlc' })\n  .inc(res.wrote_count || 0);\n\nconsole.info(\n  formatTime(Date.now()),\n  'DispatchIngestOHLCResult_Forwards',\n  `series_id=${series_id}, ingested_count=${res.wrote_count}, start_time=${formatTime(\n    res.range?.start_time ?? NaN,",
              "lineStart": 95,
              "lineEnd": 121
            }
          ]
        },
        {
          "additions": 1,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/series-collector/index.ts",
          "changeType": "added",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/apps/virtual-exchange/src/series-collector/index.ts b/apps/virtual-exchange/src/series-collector/index.ts\nindex c5706dddb..6f6ca646a 100644\n--- a/apps/virtual-exchange/src/series-collector/index.ts\n+++ b/apps/virtual-exchange/src/series-collector/index.ts\n@@ -2,0 +3 @@ import './backwards-ohlc';\n+import './forwards-ohlc';\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json",
          "changeType": "added",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json b/common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json\nnew file mode 100644\nindex 000000000..63436efad\n--- /dev/null\n+++ b/common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-postgres-storage\",\n+      \"comment\": \"support v2 API: return in cursor style\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-postgres-storage\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json",
          "changeType": "added",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json b/common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json\nnew file mode 100644\nindex 000000000..7c2957d3d\n--- /dev/null\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-virtual-exchange\",\n+      \"comment\": \"support forward ohlc\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-virtual-exchange\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/data-ohlc/2025-12-29-08-41.json",
          "changeType": "added",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/common/changes/@yuants/data-ohlc/2025-12-29-08-41.json b/common/changes/@yuants/data-ohlc/2025-12-29-08-41.json\nnew file mode 100644\nindex 000000000..2d89dc8d8\n--- /dev/null\n+++ b/common/changes/@yuants/data-ohlc/2025-12-29-08-41.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/data-ohlc\",\n+      \"comment\": \"add loadOHLC utils\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/data-ohlc\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 2,
          "deletions": 0,
          "path": "common/config/rush/pnpm-lock.yaml",
          "changeType": "added",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/common/config/rush/pnpm-lock.yaml b/common/config/rush/pnpm-lock.yaml\nindex 2b08090ee..7f8e35252 100644\n--- a/common/config/rush/pnpm-lock.yaml\n+++ b/common/config/rush/pnpm-lock.yaml\n@@ -1775,0 +1776 @@ importers:\n+      '@yuants/utils': workspace:*\n@@ -1783,0 +1785 @@ importers:\n+      '@yuants/utils': link:../utils\n",
          "codeSnippets": []
        },
        {
          "additions": 22,
          "deletions": 0,
          "path": "libraries/data-ohlc/etc/data-ohlc.api.md",
          "changeType": "added",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/libraries/data-ohlc/etc/data-ohlc.api.md b/libraries/data-ohlc/etc/data-ohlc.api.md\nindex c705855f5..392bd52e2 100644\n--- a/libraries/data-ohlc/etc/data-ohlc.api.md\n+++ b/libraries/data-ohlc/etc/data-ohlc.api.md\n@@ -33,0 +34,22 @@ export interface IOHLC {\n+// @public\r\n+export const listOHLCSeriesIds: (terminal: Terminal, ctx: {\r\n+    series_id_pattern?: string;\r\n+    limit?: number;\r\n+}) => Promise<string[]>;\r\n+\r\n+// @public\r\n+export const loadOHLCBackward: (terminal: Terminal, ctx: {\r\n+    product_id: string;\r\n+    duration: string;\r\n+    end_time: number;\r\n+    limit?: number;\r\n+}) => Promise<IOHLC[]>;\r\n+\r\n+// @public\r\n+export const loadOHLCForward: (terminal: Terminal, ctx: {\r\n+    product_id: string;\r\n+    duration: string;\r\n+    start_time: number;\r\n+    limit?: number;\r\n+}) => Promise<IOHLC[]>;\r\n+\r\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "listOHLCSeriesIds",
              "code": "export const listOHLCSeriesIds: (terminal: Terminal, ctx: {\r\n    series_id_pattern?: string;\r\n    limit?: number;\r\n}) => Promise<string[]>;\r\n\r\n// @public\r",
              "lineStart": 35,
              "lineEnd": 40
            },
            {
              "type": "function",
              "name": "loadOHLCBackward",
              "code": "export const loadOHLCBackward: (terminal: Terminal, ctx: {\r\n    product_id: string;\r\n    duration: string;\r\n    end_time: number;\r\n    limit?: number;\r\n}) => Promise<IOHLC[]>;\r\n\r\n// @public\r",
              "lineStart": 41,
              "lineEnd": 48
            },
            {
              "type": "function",
              "name": "loadOHLCForward",
              "code": "export const loadOHLCForward: (terminal: Terminal, ctx: {\r\n    product_id: string;\r\n    duration: string;\r\n    start_time: number;\r\n    limit?: number;\r\n}) => Promise<IOHLC[]>;\r\n\r",
              "lineStart": 49,
              "lineEnd": 56
            }
          ]
        },
        {
          "additions": 1,
          "deletions": 0,
          "path": "libraries/data-ohlc/package.json",
          "changeType": "added",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/libraries/data-ohlc/package.json b/libraries/data-ohlc/package.json\nindex fd6f47e82..dcf0af91b 100644\n--- a/libraries/data-ohlc/package.json\n+++ b/libraries/data-ohlc/package.json\n@@ -32,0 +33 @@\n+    \"@yuants/utils\": \"workspace:*\",\n",
          "codeSnippets": []
        },
        {
          "additions": 3,
          "deletions": 103,
          "path": "libraries/data-ohlc/src/index.ts",
          "changeType": "modified",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/libraries/data-ohlc/src/index.ts b/libraries/data-ohlc/src/index.ts\nindex 1e48ec617..49f1d9812 100644\n--- a/libraries/data-ohlc/src/index.ts\n+++ b/libraries/data-ohlc/src/index.ts\n@@ -1,103 +1 @@\n-/**\n- * OHLC: Open-High-Low-Close\n- *\n- * @public\n- */\n-export interface IOHLC {\n-  /**\n-   * Series ID (Encoded as `${product_id}/${duration}`)\n-   */\n-  series_id: string;\n-  /**\n-   * OHLC Opened TimestampTz (inclusive)\n-   */\n-  created_at: string;\n-  /**\n-   * Data source ID\n-   * 数据源 ID\n-   */\n-  datasource_id: string;\n-  /**\n-   * Product ID\n-   * 品种 ID\n-   */\n-  product_id: string;\n-  /**\n-   * duration, in RFC3339 Duration format\n-   *\n-   * @see https://www.ietf.org/rfc/rfc3339.txt\n-   *\n-   * @example\n-   * - `PT1M`: 1 minute\n-   * - `PT5M`: 5 minutes\n-   * - `PT15M`: 15 minutes\n-   * - `PT30M`: 30 minutes\n-   * - `PT1H`: 1 hour\n-   * - `PT2H`: 2 hours\n-   * - `PT4H`: 4 hours\n-   * - `P1D`: 1 day\n-   * - `P1W`: 1 week\n-   * - `P1M`: 1 month\n-   * - `P1Y`: 1 year\n-   */\n-  duration: string;\n-  /**\n-   * OHLC Closed TimestampTZ (exclusive)\n-   */\n-  closed_at: string;\n-  /**\n-   * Open Price\n-   * 开盘价\n-   */\n-  open: string;\n-  /**\n-   * High Price\n-   * 最高价\n-   */\n-  high: string;\n-  /**\n-   * Low Price\n-   * 最低价\n-   */\n-  low: string;\n-  /**\n-   * Close Price\n-   * 收盘价\n-   */\n-  close: string;\n-  /**\n-   * Volume\n-   * 成交量\n-   */\n-  volume: string;\n-  /**\n-   * Open interest\n-   * 持仓量\n-   */\n-  open_interest: string;\n-}\n-\n-/**\n- * @public\n- */\n-export const encodeOHLCSeriesId = (product_id: string, duration: string): string => {\n-  return `${product_id}/${duration}`;\n-};\n-\n-/**\n- * @public\n- */\n-export const decodeOHLCSeriesId = (series_id: string): { product_id: string; duration: string } => {\n-  const parts = series_id.split('/');\n-  const duration = parts.pop() ?? '';\n-  const rawProductId = parts.join('/');\n-  const product_id = (() => {\n-    try {\n-      return decodeURIComponent(rawProductId);\n-    } catch {\n-      return rawProductId;\n-    }\n-  })();\n-  return { product_id, duration };\n-};\n-\n+export * from './loadOHLC';\n@@ -104,0 +3,2 @@ export * from './provideOHLCDurationService';\n+export * from './series_id';\n+export * from './types';\n",
          "codeSnippets": []
        },
        {
          "additions": 89,
          "deletions": 0,
          "path": "libraries/data-ohlc/src/loadOHLC.ts",
          "changeType": "added",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/libraries/data-ohlc/src/loadOHLC.ts b/libraries/data-ohlc/src/loadOHLC.ts\nnew file mode 100644\nindex 000000000..a9b064ded\n--- /dev/null\n+++ b/libraries/data-ohlc/src/loadOHLC.ts\n@@ -0,0 +1,89 @@\n+import { Terminal } from '@yuants/protocol';\n+import { escapeSQL, requestSQL } from '@yuants/sql';\n+import { decodePath, formatTime } from '@yuants/utils';\n+import { encodeOHLCSeriesId } from './series_id';\n+import { IOHLC } from './types';\n+\n+/**\n+ * 向未来方向 (Forward) 加载 OHLC 数据，加载给定开始时间之后的数据\n+ * @public\n+ */\n+export const loadOHLCForward = async (\n+  terminal: Terminal,\n+  ctx: {\n+    product_id: string;\n+    duration: string;\n+    start_time: number;\n+    limit?: number;\n+  },\n+): Promise<IOHLC[]> => {\n+  const { product_id, duration, start_time, limit } = ctx;\n+  const [datasource_id] = decodePath(product_id);\n+  const series_id = encodeOHLCSeriesId(product_id, duration);\n+  const sql = `select * from ohlc_v2 where series_id = ${escapeSQL(series_id)} and created_at >= ${escapeSQL(\n+    formatTime(start_time),\n+  )} order by created_at ${limit !== undefined ? `limit ${+limit}` : ''}`;\n+  const res = await requestSQL<Array<Omit<IOHLC, 'datasource_id' | 'product_id' | 'duration'>>>(\n+    terminal,\n+    sql,\n+  );\n+  return res.map((row) => ({\n+    ...row,\n+    datasource_id,\n+    product_id,\n+    duration,\n+  }));\n+};\n+\n+/**\n+ * 向过去方向 (Backward) 加载 OHLC 数据，加载给定结束时间之前的数据\n+ * @public\n+ */\n+export const loadOHLCBackward = async (\n+  terminal: Terminal,\n+  ctx: {\n+    product_id: string;\n+    duration: string;\n+    end_time: number;\n+    limit?: number;\n+  },\n+): Promise<IOHLC[]> => {\n+  const { product_id, duration, end_time, limit } = ctx;\n+  const [datasource_id] = decodePath(product_id);\n+  const series_id = encodeOHLCSeriesId(product_id, duration);\n+  const sql = `select * from ohlc_v2 where series_id = ${escapeSQL(series_id)} and created_at <= ${escapeSQL(\n+    formatTime(end_time),\n+  )} order by created_at desc ${limit !== undefined ? `limit ${+limit}` : ''}`;\n+  const res = await requestSQL<Array<Omit<IOHLC, 'datasource_id' | 'product_id' | 'duration'>>>(\n+    terminal,\n+    sql,\n+  );\n+  return res.map((row) => ({\n+    ...row,\n+    datasource_id,\n+    product_id,\n+    duration,\n+  }));\n+};\n+\n+/**\n+ * 列出所有存在 OHLC 数据的 series_id 列表\n+ *\n+ * @public\n+ */\n+export const listOHLCSeriesIds = async (\n+  terminal: Terminal,\n+  ctx: {\n+    series_id_pattern?: string;\n+    limit?: number;\n+  },\n+): Promise<string[]> => {\n+  const { series_id_pattern } = ctx;\n+  const records = await requestSQL<{ series_id: string }[]>(\n+    terminal,\n+    `select distinct series_id from series_data_range where table_name = 'ohlc_v2' ${\n+      ctx.series_id_pattern ? `and series_id ~ ${escapeSQL(series_id_pattern)}` : ''\n+    } order by series_id ${ctx.limit ? `limit ${+ctx.limit}` : ''}`,\n+  );\n+  return records.map((r) => r.series_id);\n+};\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "loadOHLCForward",
              "code": "export const loadOHLCForward = async (\n  terminal: Terminal,\n  ctx: {\n    product_id: string;\n    duration: string;\n    start_time: number;\n    limit?: number;\n  },\n): Promise<IOHLC[]> => {\n  const { product_id, duration, start_time, limit } = ctx;\n  const [datasource_id] = decodePath(product_id);",
              "lineStart": 11,
              "lineEnd": 21
            },
            {
              "type": "function",
              "name": "series_id",
              "code": "const series_id = encodeOHLCSeriesId(product_id, duration);",
              "lineStart": 22,
              "lineEnd": 22
            },
            {
              "type": "function",
              "name": "sql",
              "code": "const sql = `select * from ohlc_v2 where series_id = ${escapeSQL(series_id)} and created_at >= ${escapeSQL(\n  formatTime(start_time),\n)} order by created_at ${limit !== undefined ? `limit ${+limit}` : ''}`;",
              "lineStart": 23,
              "lineEnd": 25
            },
            {
              "type": "function",
              "name": "res",
              "code": "  const res = await requestSQL<Array<Omit<IOHLC, 'datasource_id' | 'product_id' | 'duration'>>>(\n    terminal,\n    sql,\n  );\n  return res.map((row) => ({\n    ...row,\n    datasource_id,\n    product_id,\n    duration,\n  }));\n};\n\n/**\n * 向过去方向 (Backward) 加载 OHLC 数据，加载给定结束时间之前的数据\n * @public",
              "lineStart": 26,
              "lineEnd": 41
            },
            {
              "type": "function",
              "name": "loadOHLCBackward",
              "code": "export const loadOHLCBackward = async (\n  terminal: Terminal,\n  ctx: {\n    product_id: string;\n    duration: string;\n    end_time: number;\n    limit?: number;\n  },\n): Promise<IOHLC[]> => {\n  const { product_id, duration, end_time, limit } = ctx;\n  const [datasource_id] = decodePath(product_id);",
              "lineStart": 42,
              "lineEnd": 52
            },
            {
              "type": "function",
              "name": "series_id",
              "code": "const series_id = encodeOHLCSeriesId(product_id, duration);",
              "lineStart": 53,
              "lineEnd": 53
            },
            {
              "type": "function",
              "name": "sql",
              "code": "const sql = `select * from ohlc_v2 where series_id = ${escapeSQL(series_id)} and created_at <= ${escapeSQL(\n  formatTime(end_time),\n)} order by created_at desc ${limit !== undefined ? `limit ${+limit}` : ''}`;",
              "lineStart": 54,
              "lineEnd": 56
            },
            {
              "type": "function",
              "name": "res",
              "code": "  const res = await requestSQL<Array<Omit<IOHLC, 'datasource_id' | 'product_id' | 'duration'>>>(\n    terminal,\n    sql,\n  );\n  return res.map((row) => ({\n    ...row,\n    datasource_id,\n    product_id,\n    duration,\n  }));\n};\n\n/**\n * 列出所有存在 OHLC 数据的 series_id 列表\n *",
              "lineStart": 57,
              "lineEnd": 73
            },
            {
              "type": "function",
              "name": "listOHLCSeriesIds",
              "code": "export const listOHLCSeriesIds = async (\n  terminal: Terminal,\n  ctx: {\n    series_id_pattern?: string;\n    limit?: number;\n  },\n): Promise<string[]> => {\n  const { series_id_pattern } = ctx;",
              "lineStart": 74,
              "lineEnd": 81
            },
            {
              "type": "function",
              "name": "records",
              "code": "  const records = await requestSQL<{ series_id: string }[]>(\n    terminal,\n    `select distinct series_id from series_data_range where table_name = 'ohlc_v2' ${\n      ctx.series_id_pattern ? `and series_id ~ ${escapeSQL(series_id_pattern)}` : ''\n    } order by series_id ${ctx.limit ? `limit ${+ctx.limit}` : ''}`,\n  );\n  return records.map((r) => r.series_id);\n};",
              "lineStart": 82,
              "lineEnd": 90
            }
          ]
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "libraries/data-ohlc/src/series_id.ts",
          "changeType": "added",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/libraries/data-ohlc/src/series_id.ts b/libraries/data-ohlc/src/series_id.ts\nnew file mode 100644\nindex 000000000..d2832daba\n--- /dev/null\n+++ b/libraries/data-ohlc/src/series_id.ts\n@@ -0,0 +1,17 @@\n+import { decodePath, encodePath } from '@yuants/utils';\n+\n+/**\n+ * @public\n+ */\n+export const encodeOHLCSeriesId = (product_id: string, duration: string): string => {\n+  return `${product_id}/${duration}`;\n+};\n+\n+/**\n+ * @public\n+ */\n+export const decodeOHLCSeriesId = (series_id: string): { product_id: string; duration: string } => {\n+  const parts = decodePath(series_id);\n+  const product_id = encodePath(...parts.slice(0, -1));\n+  return { product_id, duration: parts[parts.length - 1] };\n+};\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "encodeOHLCSeriesId",
              "code": "export const encodeOHLCSeriesId = (product_id: string, duration: string): string => {\n  return `${product_id}/${duration}`;\n};\n\n/**\n * @public\n */",
              "lineStart": 6,
              "lineEnd": 12
            },
            {
              "type": "function",
              "name": "decodeOHLCSeriesId",
              "code": "export const decodeOHLCSeriesId = (series_id: string): { product_id: string; duration: string } => {",
              "lineStart": 13,
              "lineEnd": 13
            },
            {
              "type": "function",
              "name": "parts",
              "code": "const parts = decodePath(series_id);",
              "lineStart": 14,
              "lineEnd": 14
            },
            {
              "type": "function",
              "name": "product_id",
              "code": "  const product_id = encodePath(...parts.slice(0, -1));\n  return { product_id, duration: parts[parts.length - 1] };\n};",
              "lineStart": 15,
              "lineEnd": 18
            }
          ]
        },
        {
          "additions": 78,
          "deletions": 0,
          "path": "libraries/data-ohlc/src/types.ts",
          "changeType": "added",
          "patch": "commit cc55da276032ad94ff58df6316adcd6f1b459f39\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 16:47:42 2025 +0800\n\n    feat: implement SQL v2 service with streaming results and add forwards OHLC data collector (#2425)\n\ndiff --git a/libraries/data-ohlc/src/types.ts b/libraries/data-ohlc/src/types.ts\nnew file mode 100644\nindex 000000000..2f5c482a5\n--- /dev/null\n+++ b/libraries/data-ohlc/src/types.ts\n@@ -0,0 +1,78 @@\n+/**\n+ * OHLC: Open-High-Low-Close\n+ *\n+ * @public\n+ */\n+export interface IOHLC {\n+  /**\n+   * Series ID (Encoded as `${product_id}/${duration}`)\n+   */\n+  series_id: string;\n+  /**\n+   * OHLC Opened TimestampTz (inclusive)\n+   */\n+  created_at: string;\n+  /**\n+   * Data source ID\n+   * 数据源 ID\n+   */\n+  datasource_id: string;\n+  /**\n+   * Product ID\n+   * 品种 ID\n+   */\n+  product_id: string;\n+  /**\n+   * duration, in RFC3339 Duration format\n+   *\n+   * @see https://www.ietf.org/rfc/rfc3339.txt\n+   *\n+   * @example\n+   * - `PT1M`: 1 minute\n+   * - `PT5M`: 5 minutes\n+   * - `PT15M`: 15 minutes\n+   * - `PT30M`: 30 minutes\n+   * - `PT1H`: 1 hour\n+   * - `PT2H`: 2 hours\n+   * - `PT4H`: 4 hours\n+   * - `P1D`: 1 day\n+   * - `P1W`: 1 week\n+   * - `P1M`: 1 month\n+   * - `P1Y`: 1 year\n+   */\n+  duration: string;\n+  /**\n+   * OHLC Closed TimestampTZ (exclusive)\n+   */\n+  closed_at: string;\n+  /**\n+   * Open Price\n+   * 开盘价\n+   */\n+  open: string;\n+  /**\n+   * High Price\n+   * 最高价\n+   */\n+  high: string;\n+  /**\n+   * Low Price\n+   * 最低价\n+   */\n+  low: string;\n+  /**\n+   * Close Price\n+   * 收盘价\n+   */\n+  close: string;\n+  /**\n+   * Volume\n+   * 成交量\n+   */\n+  volume: string;\n+  /**\n+   * Open interest\n+   * 持仓量\n+   */\n+  open_interest: string;\n+}\n",
          "codeSnippets": [
            {
              "type": "interface",
              "name": "IOHLC",
              "code": "export interface IOHLC {\n  /**\n   * Series ID (Encoded as `${product_id}/${duration}`)\n   */\n  series_id: string;\n  /**\n   * OHLC Opened TimestampTz (inclusive)\n   */\n  created_at: string;\n  /**\n   * Data source ID\n   * 数据源 ID\n   */\n  datasource_id: string;\n  /**",
              "lineStart": 6,
              "lineEnd": 79
            }
          ]
        }
      ]
    },
    {
      "hash": "e025bb65c29037457e9d474575c4ee793c290cf7",
      "short": "e025bb65c",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-29 16:54:04 +0800",
      "subject": "chore: bump version (#2426)",
      "conventionalCommit": {
        "type": "chore",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/agent/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/agent/CHANGELOG.json b/apps/agent/CHANGELOG.json\nindex b8f6ca761..c51ecff0f 100644\n--- a/apps/agent/CHANGELOG.json\n+++ b/apps/agent/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.8.35\",\n+      \"tag\": \"@yuants/app-agent_v0.8.35\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/agent\\\" to `0.13.157`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/kernel\\\" to `0.15.73`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/agent/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/agent/CHANGELOG.md b/apps/agent/CHANGELOG.md\nindex 836334dd0..24193e515 100644\n--- a/apps/agent/CHANGELOG.md\n+++ b/apps/agent/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.8.35\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/agent/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/agent/package.json b/apps/agent/package.json\nindex c9fd5cded..f11f733ad 100644\n--- a/apps/agent/package.json\n+++ b/apps/agent/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.8.34\",\n+  \"version\": \"0.8.35\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/postgres-storage/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/postgres-storage/CHANGELOG.json b/apps/postgres-storage/CHANGELOG.json\nindex 9bc615f1d..a04626ec1 100644\n--- a/apps/postgres-storage/CHANGELOG.json\n+++ b/apps/postgres-storage/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.3.0\",\n+      \"tag\": \"@yuants/app-postgres-storage_v0.3.0\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"minor\": [\n+          {\n+            \"comment\": \"support v2 API: return in cursor style\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/postgres-storage/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/postgres-storage/CHANGELOG.md b/apps/postgres-storage/CHANGELOG.md\nindex 196ae1d5d..218b0d1b2 100644\n--- a/apps/postgres-storage/CHANGELOG.md\n+++ b/apps/postgres-storage/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.3.0\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+### Minor changes\n+\n+- support v2 API: return in cursor style\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/postgres-storage/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/postgres-storage/package.json b/apps/postgres-storage/package.json\nindex a4f024c1b..7aae55817 100644\n--- a/apps/postgres-storage/package.json\n+++ b/apps/postgres-storage/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.2.43\",\n+  \"version\": \"0.3.0\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/trade-copier/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/trade-copier/CHANGELOG.json b/apps/trade-copier/CHANGELOG.json\nindex 97f5e4f4c..7982f8e97 100644\n--- a/apps/trade-copier/CHANGELOG.json\n+++ b/apps/trade-copier/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.11.49\",\n+      \"tag\": \"@yuants/app-trade-copier_v0.11.49\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/kernel\\\" to `0.15.73`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/trade-copier/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/trade-copier/CHANGELOG.md b/apps/trade-copier/CHANGELOG.md\nindex aa19ce88e..f9612db55 100644\n--- a/apps/trade-copier/CHANGELOG.md\n+++ b/apps/trade-copier/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.11.49\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/trade-copier/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/trade-copier/package.json b/apps/trade-copier/package.json\nindex 40cca6ddb..f75a41d83 100644\n--- a/apps/trade-copier/package.json\n+++ b/apps/trade-copier/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.11.48\",\n+  \"version\": \"0.11.49\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-aster/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/CHANGELOG.json b/apps/vendor-aster/CHANGELOG.json\nindex c4b649662..b59800329 100644\n--- a/apps/vendor-aster/CHANGELOG.json\n+++ b/apps/vendor-aster/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.9.7\",\n+      \"tag\": \"@yuants/vendor-aster_v0.9.7\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-ohlc\\\" to `0.6.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.8.6`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-aster/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/CHANGELOG.md b/apps/vendor-aster/CHANGELOG.md\nindex 0f5eafbba..485f63cac 100644\n--- a/apps/vendor-aster/CHANGELOG.md\n+++ b/apps/vendor-aster/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.9.7\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-aster/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-aster/package.json b/apps/vendor-aster/package.json\nindex 3744e74b3..e5420a8e5 100644\n--- a/apps/vendor-aster/package.json\n+++ b/apps/vendor-aster/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.9.6\",\n+  \"version\": \"0.9.7\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-binance/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/CHANGELOG.json b/apps/vendor-binance/CHANGELOG.json\nindex 16da9a0f9..a8a662587 100644\n--- a/apps/vendor-binance/CHANGELOG.json\n+++ b/apps/vendor-binance/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.12.6\",\n+      \"tag\": \"@yuants/vendor-binance_v0.12.6\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-ohlc\\\" to `0.6.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.8.6`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-binance/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/CHANGELOG.md b/apps/vendor-binance/CHANGELOG.md\nindex 8ce7c6937..be02cb6bb 100644\n--- a/apps/vendor-binance/CHANGELOG.md\n+++ b/apps/vendor-binance/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.12.6\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-binance/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-binance/package.json b/apps/vendor-binance/package.json\nindex ea1fbadec..137888271 100644\n--- a/apps/vendor-binance/package.json\n+++ b/apps/vendor-binance/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.12.5\",\n+  \"version\": \"0.12.6\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-bitget/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/CHANGELOG.json b/apps/vendor-bitget/CHANGELOG.json\nindex 440343389..5ef119b1f 100644\n--- a/apps/vendor-bitget/CHANGELOG.json\n+++ b/apps/vendor-bitget/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.13.5\",\n+      \"tag\": \"@yuants/vendor-bitget_v0.13.5\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-ohlc\\\" to `0.6.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.8.6`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-bitget/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/CHANGELOG.md b/apps/vendor-bitget/CHANGELOG.md\nindex b093df0aa..0f4c9ec67 100644\n--- a/apps/vendor-bitget/CHANGELOG.md\n+++ b/apps/vendor-bitget/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.13.5\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-bitget/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-bitget/package.json b/apps/vendor-bitget/package.json\nindex 1588858d9..cd184dbf0 100644\n--- a/apps/vendor-bitget/package.json\n+++ b/apps/vendor-bitget/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.13.4\",\n+  \"version\": \"0.13.5\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-gate/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-gate/CHANGELOG.json b/apps/vendor-gate/CHANGELOG.json\nindex 01a72e829..69f4906a6 100644\n--- a/apps/vendor-gate/CHANGELOG.json\n+++ b/apps/vendor-gate/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.6.5\",\n+      \"tag\": \"@yuants/vendor-gate_v0.6.5\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-ohlc\\\" to `0.6.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.8.6`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-gate/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-gate/CHANGELOG.md b/apps/vendor-gate/CHANGELOG.md\nindex ef48d000f..63aa34813 100644\n--- a/apps/vendor-gate/CHANGELOG.md\n+++ b/apps/vendor-gate/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.6.5\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-gate/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-gate/package.json b/apps/vendor-gate/package.json\nindex 9670bbe2d..29530222e 100644\n--- a/apps/vendor-gate/package.json\n+++ b/apps/vendor-gate/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.6.4\",\n+  \"version\": \"0.6.5\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-huobi/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-huobi/CHANGELOG.json b/apps/vendor-huobi/CHANGELOG.json\nindex a436aa555..fee2dddd9 100644\n--- a/apps/vendor-huobi/CHANGELOG.json\n+++ b/apps/vendor-huobi/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.18.5\",\n+      \"tag\": \"@yuants/vendor-huobi_v0.18.5\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-ohlc\\\" to `0.6.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.8.6`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-huobi/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-huobi/CHANGELOG.md b/apps/vendor-huobi/CHANGELOG.md\nindex 558cf94f6..0ae00192f 100644\n--- a/apps/vendor-huobi/CHANGELOG.md\n+++ b/apps/vendor-huobi/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.18.5\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-huobi/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-huobi/package.json b/apps/vendor-huobi/package.json\nindex 325907129..dcfd52bbc 100644\n--- a/apps/vendor-huobi/package.json\n+++ b/apps/vendor-huobi/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.18.4\",\n+  \"version\": \"0.18.5\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-hyperliquid/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.json b/apps/vendor-hyperliquid/CHANGELOG.json\nindex 76c1c1fd9..cf3854ea0 100644\n--- a/apps/vendor-hyperliquid/CHANGELOG.json\n+++ b/apps/vendor-hyperliquid/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.9.5\",\n+      \"tag\": \"@yuants/vendor-hyperliquid_v0.9.5\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.8.6`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-ohlc\\\" to `0.6.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-hyperliquid/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-hyperliquid/CHANGELOG.md b/apps/vendor-hyperliquid/CHANGELOG.md\nindex bf7a5b282..50c512c53 100644\n--- a/apps/vendor-hyperliquid/CHANGELOG.md\n+++ b/apps/vendor-hyperliquid/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.9.5\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-hyperliquid/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-hyperliquid/package.json b/apps/vendor-hyperliquid/package.json\nindex e0090fec3..41776c575 100644\n--- a/apps/vendor-hyperliquid/package.json\n+++ b/apps/vendor-hyperliquid/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.9.4\",\n+  \"version\": \"0.9.5\",\n",
          "codeSnippets": []
        },
        {
          "additions": 20,
          "deletions": 0,
          "path": "apps/vendor-okx/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.json b/apps/vendor-okx/CHANGELOG.json\nindex 02d25831e..92b041fb5 100644\n--- a/apps/vendor-okx/CHANGELOG.json\n+++ b/apps/vendor-okx/CHANGELOG.json\n@@ -3,0 +4,20 @@\n+    {\n+      \"version\": \"0.31.5\",\n+      \"tag\": \"@yuants/vendor-okx_v0.31.5\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-ohlc\\\" to `0.6.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.8.6`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-okx/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/CHANGELOG.md b/apps/vendor-okx/CHANGELOG.md\nindex 9173f67d9..13eacde64 100644\n--- a/apps/vendor-okx/CHANGELOG.md\n+++ b/apps/vendor-okx/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.31.5\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-okx/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-okx/package.json b/apps/vendor-okx/package.json\nindex d733a545c..a6f8c5f68 100644\n--- a/apps/vendor-okx/package.json\n+++ b/apps/vendor-okx/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.31.4\",\n+  \"version\": \"0.31.5\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-tq/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-tq/CHANGELOG.json b/apps/vendor-tq/CHANGELOG.json\nindex d797ce0e6..0021ffdf4 100644\n--- a/apps/vendor-tq/CHANGELOG.json\n+++ b/apps/vendor-tq/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.4.50\",\n+      \"tag\": \"@yuants/vendor-tq_v0.4.50\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-ohlc\\\" to `0.6.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-tq/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-tq/CHANGELOG.md b/apps/vendor-tq/CHANGELOG.md\nindex d05b1b4a5..fafdfc5a5 100644\n--- a/apps/vendor-tq/CHANGELOG.md\n+++ b/apps/vendor-tq/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.4.50\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-tq/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-tq/package.json b/apps/vendor-tq/package.json\nindex bfbc8df2b..181df6cd4 100644\n--- a/apps/vendor-tq/package.json\n+++ b/apps/vendor-tq/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.4.49\",\n+  \"version\": \"0.4.50\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-trading-view/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-trading-view/CHANGELOG.json b/apps/vendor-trading-view/CHANGELOG.json\nindex e58fbfb82..15105fe15 100644\n--- a/apps/vendor-trading-view/CHANGELOG.json\n+++ b/apps/vendor-trading-view/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.3.49\",\n+      \"tag\": \"@yuants/vendor-trading-view_v0.3.49\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-ohlc\\\" to `0.6.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-trading-view/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-trading-view/CHANGELOG.md b/apps/vendor-trading-view/CHANGELOG.md\nindex 3748494a6..421665933 100644\n--- a/apps/vendor-trading-view/CHANGELOG.md\n+++ b/apps/vendor-trading-view/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.3.49\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-trading-view/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-trading-view/package.json b/apps/vendor-trading-view/package.json\nindex ce2bfcf71..0799a8bc5 100644\n--- a/apps/vendor-trading-view/package.json\n+++ b/apps/vendor-trading-view/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.3.48\",\n+  \"version\": \"0.3.49\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/vendor-turboflow/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-turboflow/CHANGELOG.json b/apps/vendor-turboflow/CHANGELOG.json\nindex ecba48236..b383730ef 100644\n--- a/apps/vendor-turboflow/CHANGELOG.json\n+++ b/apps/vendor-turboflow/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"1.2.24\",\n+      \"tag\": \"@yuants/vendor-turboflow_v1.2.24\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.8.6`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "apps/vendor-turboflow/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-turboflow/CHANGELOG.md b/apps/vendor-turboflow/CHANGELOG.md\nindex f451d4cac..413556231 100644\n--- a/apps/vendor-turboflow/CHANGELOG.md\n+++ b/apps/vendor-turboflow/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 1.2.24\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/vendor-turboflow/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/vendor-turboflow/package.json b/apps/vendor-turboflow/package.json\nindex 680df0e2d..467a4642a 100644\n--- a/apps/vendor-turboflow/package.json\n+++ b/apps/vendor-turboflow/package.json\n@@ -3 +3 @@\n-  \"version\": \"1.2.23\",\n+  \"version\": \"1.2.24\",\n",
          "codeSnippets": []
        },
        {
          "additions": 25,
          "deletions": 0,
          "path": "apps/virtual-exchange/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\nindex d5c4b7750..1e76540c3 100644\n--- a/apps/virtual-exchange/CHANGELOG.json\n+++ b/apps/virtual-exchange/CHANGELOG.json\n@@ -3,0 +4,25 @@\n+    {\n+      \"version\": \"0.14.0\",\n+      \"tag\": \"@yuants/app-virtual-exchange_v0.14.0\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"minor\": [\n+          {\n+            \"comment\": \"support forward ohlc\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-ohlc\\\" to `0.6.0`\"\n+          },\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/exchange\\\" to `0.8.6`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/virtual-exchange/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\nindex 55a8cd789..51035e2fd 100644\n--- a/apps/virtual-exchange/CHANGELOG.md\n+++ b/apps/virtual-exchange/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.14.0\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+### Minor changes\n+\n+- support forward ohlc\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/virtual-exchange/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\nindex fa07f41f4..038d09abc 100644\n--- a/apps/virtual-exchange/package.json\n+++ b/apps/virtual-exchange/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.13.0\",\n+  \"version\": \"0.14.0\",\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/agent/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-agent/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json",
          "changeType": "deleted",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json b/common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json\ndeleted file mode 100644\nindex 63436efad..000000000\n--- a/common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/app-postgres-storage\",\n-      \"comment\": \"support v2 API: return in cursor style\",\n-      \"type\": \"minor\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/app-postgres-storage\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-postgres-storage/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-trade-copier/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json",
          "changeType": "deleted",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json b/common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json\ndeleted file mode 100644\nindex 7c2957d3d..000000000\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/app-virtual-exchange\",\n-      \"comment\": \"support forward ohlc\",\n-      \"type\": \"minor\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/app-virtual-exchange\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/data-ohlc/2025-12-29-08-41.json",
          "changeType": "deleted",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/data-ohlc/2025-12-29-08-41.json b/common/changes/@yuants/data-ohlc/2025-12-29-08-41.json\ndeleted file mode 100644\nindex 2d89dc8d8..000000000\n--- a/common/changes/@yuants/data-ohlc/2025-12-29-08-41.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/data-ohlc\",\n-      \"comment\": \"add loadOHLC utils\",\n-      \"type\": \"minor\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/data-ohlc\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/data-ohlc/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/dist-origin/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/exchange/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/kernel/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-aster/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-binance/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-bitget/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-gate/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-huobi/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-hyperliquid/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-okx/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-tq/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-trading-view/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/vendor-turboflow/{main_2025-12-28-14-51.json => main_2025-12-29-08-52.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "distributions/origin/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/distributions/origin/CHANGELOG.json b/distributions/origin/CHANGELOG.json\nindex b4c65acae..b203896a0 100644\n--- a/distributions/origin/CHANGELOG.json\n+++ b/distributions/origin/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.1.133\",\n+      \"tag\": \"@yuants/dist-origin_v0.1.133\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/agent\\\" to `0.13.157`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "distributions/origin/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/distributions/origin/CHANGELOG.md b/distributions/origin/CHANGELOG.md\nindex 1b5d3e916..bf44a4424 100644\n--- a/distributions/origin/CHANGELOG.md\n+++ b/distributions/origin/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.1.133\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "distributions/origin/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/distributions/origin/package.json b/distributions/origin/package.json\nindex 4681a19f9..a1155d6b9 100644\n--- a/distributions/origin/package.json\n+++ b/distributions/origin/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.1.132\",\n+  \"version\": \"0.1.133\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "libraries/agent/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/agent/CHANGELOG.json b/libraries/agent/CHANGELOG.json\nindex 578212963..5b11939e5 100644\n--- a/libraries/agent/CHANGELOG.json\n+++ b/libraries/agent/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.13.157\",\n+      \"tag\": \"@yuants/agent_v0.13.157\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/kernel\\\" to `0.15.73`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "libraries/agent/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/agent/CHANGELOG.md b/libraries/agent/CHANGELOG.md\nindex 566c04867..cf2e04593 100644\n--- a/libraries/agent/CHANGELOG.md\n+++ b/libraries/agent/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.13.157\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/agent/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/agent/package.json b/libraries/agent/package.json\nindex cfa8da03f..d0f51690d 100644\n--- a/libraries/agent/package.json\n+++ b/libraries/agent/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.13.156\",\n+  \"version\": \"0.13.157\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "libraries/data-ohlc/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/data-ohlc/CHANGELOG.json b/libraries/data-ohlc/CHANGELOG.json\nindex 8a8db78b2..bd7751611 100644\n--- a/libraries/data-ohlc/CHANGELOG.json\n+++ b/libraries/data-ohlc/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.6.0\",\n+      \"tag\": \"@yuants/data-ohlc_v0.6.0\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"minor\": [\n+          {\n+            \"comment\": \"add loadOHLC utils\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "libraries/data-ohlc/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/data-ohlc/CHANGELOG.md b/libraries/data-ohlc/CHANGELOG.md\nindex eb8bb8da8..24ded993f 100644\n--- a/libraries/data-ohlc/CHANGELOG.md\n+++ b/libraries/data-ohlc/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.6.0\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+### Minor changes\n+\n+- add loadOHLC utils\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/data-ohlc/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/data-ohlc/package.json b/libraries/data-ohlc/package.json\nindex dcf0af91b..dd13b6271 100644\n--- a/libraries/data-ohlc/package.json\n+++ b/libraries/data-ohlc/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.5.3\",\n+  \"version\": \"0.6.0\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "libraries/exchange/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/exchange/CHANGELOG.json b/libraries/exchange/CHANGELOG.json\nindex 88e1ec13d..56170f5d5 100644\n--- a/libraries/exchange/CHANGELOG.json\n+++ b/libraries/exchange/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.8.6\",\n+      \"tag\": \"@yuants/exchange_v0.8.6\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-ohlc\\\" to `0.6.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "libraries/exchange/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/exchange/CHANGELOG.md b/libraries/exchange/CHANGELOG.md\nindex 2c2e0d72a..5584c91a2 100644\n--- a/libraries/exchange/CHANGELOG.md\n+++ b/libraries/exchange/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.8.6\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/exchange/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/exchange/package.json b/libraries/exchange/package.json\nindex 0cfa655af..8c42c7030 100644\n--- a/libraries/exchange/package.json\n+++ b/libraries/exchange/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.8.5\",\n+  \"version\": \"0.8.6\",\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 0,
          "path": "libraries/kernel/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/kernel/CHANGELOG.json b/libraries/kernel/CHANGELOG.json\nindex e6e943661..dd6a1a192 100644\n--- a/libraries/kernel/CHANGELOG.json\n+++ b/libraries/kernel/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.15.73\",\n+      \"tag\": \"@yuants/kernel_v0.15.73\",\n+      \"date\": \"Mon, 29 Dec 2025 08:52:40 GMT\",\n+      \"comments\": {\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ],\n+        \"dependency\": [\n+          {\n+            \"comment\": \"Updating dependency \\\"@yuants/data-ohlc\\\" to `0.6.0`\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "libraries/kernel/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/kernel/CHANGELOG.md b/libraries/kernel/CHANGELOG.md\nindex d2d39eee4..8809cd641 100644\n--- a/libraries/kernel/CHANGELOG.md\n+++ b/libraries/kernel/CHANGELOG.md\n@@ -3 +3,6 @@\n-This log was last generated on Sun, 28 Dec 2025 14:50:18 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+\n+## 0.15.73\n+Mon, 29 Dec 2025 08:52:40 GMT\n+\n+_Version update only_\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "libraries/kernel/package.json",
          "changeType": "modified",
          "patch": "commit e025bb65c29037457e9d474575c4ee793c290cf7\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 16:54:04 2025 +0800\n\n    chore: bump version (#2426)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/libraries/kernel/package.json b/libraries/kernel/package.json\nindex e9737cb22..ce7c53cec 100644\n--- a/libraries/kernel/package.json\n+++ b/libraries/kernel/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.15.72\",\n+  \"version\": \"0.15.73\",\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "fbb62b881ffe2cb2bf78efbe70ca79d81ae99b62",
      "short": "fbb62b881",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-29 17:23:55 +0800",
      "subject": "feat: add forwards interest rate data collector and integrate into series collector (#2427)",
      "conventionalCommit": {
        "type": "feat",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 118,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/series-collector/forwards-interest-rate.ts",
          "changeType": "added",
          "patch": "commit fbb62b881ffe2cb2bf78efbe70ca79d81ae99b62\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 17:23:55 2025 +0800\n\n    feat: add forwards interest rate data collector and integrate into series collector (#2427)\n\ndiff --git a/apps/virtual-exchange/src/series-collector/forwards-interest-rate.ts b/apps/virtual-exchange/src/series-collector/forwards-interest-rate.ts\nnew file mode 100644\nindex 000000000..38a2db54a\n--- /dev/null\n+++ b/apps/virtual-exchange/src/series-collector/forwards-interest-rate.ts\n@@ -0,0 +1,118 @@\n+// 解决 Forwards 拉取历史数据的调度器\n+// 该文件会定期扫描所有 Terminal 的 ServiceInfo，提取出所有支持 Forwards 拉取的序列。\n+// 然后对每个序列，向对应的 IngestInterestRate Service 发送拉取请求，补齐历史数据。\n+// 使用 Token Bucket 控制每个数据源的请求速率，避免过载。\n+\n+import {\n+  IIngestInterestRateRequest,\n+  ISeriesIngestResult,\n+  parseInterestRateServiceMetadataFromSchema,\n+} from '@yuants/exchange';\n+import { Terminal } from '@yuants/protocol';\n+import { escapeSQL, requestSQL } from '@yuants/sql';\n+import { decodePath, formatTime, tokenBucket } from '@yuants/utils';\n+import { defer, repeat, retry } from 'rxjs';\n+\n+const terminal = Terminal.fromNodeEnv();\n+\n+const listBackwardSeriesIds = async () => {\n+  const product_ids = await requestSQL<{ product_id: string }[]>(terminal, `select product_id from product`);\n+\n+  console.time('[SeriesCollector][InterestRate][Forwards] calc');\n+\n+  const series_ids = new Set<string>();\n+  for (const terminalInfo of terminal.terminalInfos) {\n+    for (const serviceInfo of Object.values(terminalInfo.serviceInfo || {})) {\n+      if (serviceInfo.method !== 'IngestInterestRate') continue;\n+      try {\n+        const meta = parseInterestRateServiceMetadataFromSchema(serviceInfo.schema);\n+        if (meta.direction !== 'forward') continue;\n+\n+        for (const { product_id } of product_ids) {\n+          if (!product_id.startsWith(meta.product_id_prefix)) continue;\n+          series_ids.add(product_id);\n+        }\n+      } finally {\n+      }\n+    }\n+  }\n+\n+  console.timeEnd('[SeriesCollector][InterestRate][Forwards] calc');\n+\n+  return series_ids;\n+};\n+\n+defer(async () => {\n+  const time = Date.now();\n+  const series_ids = await listBackwardSeriesIds();\n+  console.log(\n+    `[SeriesCollector][InterestRate][Forwards] Found ${\n+      series_ids.size\n+    } series to collect forwards data for. (${formatTime(Date.now() - time)})`,\n+  );\n+\n+  await Promise.all(\n+    [...series_ids].map(async (product_id) => {\n+      try {\n+        const [datasource_id] = decodePath(product_id);\n+        // 控制速率：每个数据源每秒钟只能请求一次\n+        await tokenBucket(`interest_rate_forwards:${datasource_id}`, {\n+          refillInterval: 1000,\n+          capacity: 1,\n+        }).acquire();\n+        {\n+          const [record] = await requestSQL<\n+            {\n+              end_time: string;\n+            }[]\n+          >(\n+            terminal,\n+            `select end_time from series_data_range where series_id = ${escapeSQL(\n+              product_id,\n+            )} and table_name = 'interest_rate' order by end_time desc limit 1`,\n+          );\n+          const time = record ? new Date(record.end_time).getTime() : 0;\n+\n+          const req: IIngestInterestRateRequest = {\n+            product_id: product_id,\n+            direction: 'forward',\n+            time,\n+          };\n+\n+          console.info(\n+            formatTime(Date.now()),\n+            'DispatchIngestInterestRateRequestForwards',\n+            `product_id=${product_id}, time=${formatTime(time)}`,\n+          );\n+\n+          const res = await terminal.client.requestForResponseData<\n+            IIngestInterestRateRequest,\n+            ISeriesIngestResult\n+          >('IngestInterestRate', req);\n+\n+          terminal.metrics\n+            .counter('series_collector_forwards_ingest_count', '')\n+            .labels({ terminal_id: terminal.terminal_id, type: 'interest_rate' })\n+            .inc(res.wrote_count || 0);\n+\n+          console.info(\n+            formatTime(Date.now()),\n+            'DispatchIngestInterestRateResultForwards',\n+            `series_id=${product_id}, ingested_count=${res.wrote_count}, start_time=${formatTime(\n+              res.range?.start_time ?? NaN,\n+            )}, end_time=${formatTime(res.range?.end_time ?? NaN)}`,\n+          );\n+        }\n+      } catch (e) {\n+        console.info(\n+          formatTime(Date.now()),\n+          'DispatchIngestInterestRateErrorForwards',\n+          `series_id=${product_id}`,\n+          e,\n+        );\n+      }\n+    }),\n+  );\n+})\n+  .pipe(retry({ delay: 1000 }), repeat({ delay: 1000 }))\n+  .subscribe();\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "terminal",
              "code": "const terminal = Terminal.fromNodeEnv();\n",
              "lineStart": 16,
              "lineEnd": 17
            },
            {
              "type": "function",
              "name": "listBackwardSeriesIds",
              "code": "const listBackwardSeriesIds = async () => {",
              "lineStart": 18,
              "lineEnd": 18
            },
            {
              "type": "function",
              "name": "product_ids",
              "code": "const product_ids = await requestSQL<{ product_id: string }[]>(terminal, `select product_id from product`);\n\nconsole.time('[SeriesCollector][InterestRate][Forwards] calc');\n",
              "lineStart": 19,
              "lineEnd": 22
            },
            {
              "type": "function",
              "name": "series_ids",
              "code": "const series_ids = new Set<string>();",
              "lineStart": 23,
              "lineEnd": 23
            },
            {
              "type": "function",
              "name": "terminalInfo",
              "code": "for (const terminalInfo of terminal.terminalInfos) {",
              "lineStart": 24,
              "lineEnd": 24
            },
            {
              "type": "function",
              "name": "serviceInfo",
              "code": "for (const serviceInfo of Object.values(terminalInfo.serviceInfo || {})) {\n  if (serviceInfo.method !== 'IngestInterestRate') continue;\n  try {",
              "lineStart": 25,
              "lineEnd": 27
            },
            {
              "type": "function",
              "name": "meta",
              "code": "      const meta = parseInterestRateServiceMetadataFromSchema(serviceInfo.schema);\n      if (meta.direction !== 'forward') continue;\n\n      for (const { product_id } of product_ids) {\n        if (!product_id.startsWith(meta.product_id_prefix)) continue;\n        series_ids.add(product_id);\n      }\n    } finally {\n    }\n  }\n}\n\nconsole.timeEnd('[SeriesCollector][InterestRate][Forwards] calc');\n\nreturn series_ids;",
              "lineStart": 28,
              "lineEnd": 45
            },
            {
              "type": "function",
              "name": "time",
              "code": "const time = Date.now();",
              "lineStart": 46,
              "lineEnd": 46
            },
            {
              "type": "function",
              "name": "series_ids",
              "code": "const series_ids = await listBackwardSeriesIds();\nconsole.log(\n  `[SeriesCollector][InterestRate][Forwards] Found ${\n    series_ids.size\n  } series to collect forwards data for. (${formatTime(Date.now() - time)})`,\n);\n\nawait Promise.all(\n  [...series_ids].map(async (product_id) => {\n    try {\n      const [datasource_id] = decodePath(product_id);\n      // 控制速率：每个数据源每秒钟只能请求一次\n      await tokenBucket(`interest_rate_forwards:${datasource_id}`, {\n        refillInterval: 1000,\n        capacity: 1,",
              "lineStart": 47,
              "lineEnd": 73
            },
            {
              "type": "function",
              "name": "time",
              "code": "const time = record ? new Date(record.end_time).getTime() : 0;\n",
              "lineStart": 74,
              "lineEnd": 75
            },
            {
              "type": "function",
              "name": "req",
              "code": "const req: IIngestInterestRateRequest = {\n  product_id: product_id,\n  direction: 'forward',\n  time,\n};\n\nconsole.info(\n  formatTime(Date.now()),\n  'DispatchIngestInterestRateRequestForwards',\n  `product_id=${product_id}, time=${formatTime(time)}`,\n);\n",
              "lineStart": 76,
              "lineEnd": 87
            },
            {
              "type": "function",
              "name": "res",
              "code": "const res = await terminal.client.requestForResponseData<\n  IIngestInterestRateRequest,\n  ISeriesIngestResult\n>('IngestInterestRate', req);\n\nterminal.metrics\n  .counter('series_collector_forwards_ingest_count', '')\n  .labels({ terminal_id: terminal.terminal_id, type: 'interest_rate' })\n  .inc(res.wrote_count || 0);\n\nconsole.info(\n  formatTime(Date.now()),\n  'DispatchIngestInterestRateResultForwards',\n  `series_id=${product_id}, ingested_count=${res.wrote_count}, start_time=${formatTime(\n    res.range?.start_time ?? NaN,",
              "lineStart": 88,
              "lineEnd": 119
            }
          ]
        },
        {
          "additions": 1,
          "deletions": 0,
          "path": "apps/virtual-exchange/src/series-collector/index.ts",
          "changeType": "added",
          "patch": "commit fbb62b881ffe2cb2bf78efbe70ca79d81ae99b62\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 17:23:55 2025 +0800\n\n    feat: add forwards interest rate data collector and integrate into series collector (#2427)\n\ndiff --git a/apps/virtual-exchange/src/series-collector/index.ts b/apps/virtual-exchange/src/series-collector/index.ts\nindex 6f6ca646a..2471ef43e 100644\n--- a/apps/virtual-exchange/src/series-collector/index.ts\n+++ b/apps/virtual-exchange/src/series-collector/index.ts\n@@ -2,0 +3 @@ import './backwards-ohlc';\n+import './forwards-interest-rate';\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-29-09-21.json",
          "changeType": "added",
          "patch": "commit fbb62b881ffe2cb2bf78efbe70ca79d81ae99b62\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Mon Dec 29 17:23:55 2025 +0800\n\n    feat: add forwards interest rate data collector and integrate into series collector (#2427)\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-29-09-21.json b/common/changes/@yuants/app-virtual-exchange/2025-12-29-09-21.json\nnew file mode 100644\nindex 000000000..f7e25a5a8\n--- /dev/null\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-29-09-21.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-virtual-exchange\",\n+      \"comment\": \"add forward interest_rate\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-virtual-exchange\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "f757624f247ea567d341fa5e6f98ebf90e58e1e2",
      "short": "f757624f2",
      "author": "humblelittlec1[bot]",
      "email": "208195530+humblelittlec1[bot]@users.noreply.github.com",
      "authoredAt": "2025-12-29 17:52:55 +0800",
      "subject": "chore: bump version (#2428)",
      "conventionalCommit": {
        "type": "chore",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 17,
          "deletions": 0,
          "path": "apps/virtual-exchange/CHANGELOG.json",
          "changeType": "added",
          "patch": "commit f757624f247ea567d341fa5e6f98ebf90e58e1e2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 17:52:55 2025 +0800\n\n    chore: bump version (#2428)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.json b/apps/virtual-exchange/CHANGELOG.json\nindex 1e76540c3..bd184b075 100644\n--- a/apps/virtual-exchange/CHANGELOG.json\n+++ b/apps/virtual-exchange/CHANGELOG.json\n@@ -3,0 +4,17 @@\n+    {\n+      \"version\": \"0.15.0\",\n+      \"tag\": \"@yuants/app-virtual-exchange_v0.15.0\",\n+      \"date\": \"Mon, 29 Dec 2025 09:49:47 GMT\",\n+      \"comments\": {\n+        \"minor\": [\n+          {\n+            \"comment\": \"add forward interest_rate\"\n+          }\n+        ],\n+        \"none\": [\n+          {\n+            \"comment\": \"Bump Version\"\n+          }\n+        ]\n+      }\n+    },\n",
          "codeSnippets": []
        },
        {
          "additions": 8,
          "deletions": 1,
          "path": "apps/virtual-exchange/CHANGELOG.md",
          "changeType": "modified",
          "patch": "commit f757624f247ea567d341fa5e6f98ebf90e58e1e2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 17:52:55 2025 +0800\n\n    chore: bump version (#2428)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/CHANGELOG.md b/apps/virtual-exchange/CHANGELOG.md\nindex 51035e2fd..baff3ea8e 100644\n--- a/apps/virtual-exchange/CHANGELOG.md\n+++ b/apps/virtual-exchange/CHANGELOG.md\n@@ -3 +3,8 @@\n-This log was last generated on Mon, 29 Dec 2025 08:52:40 GMT and should not be manually modified.\n+This log was last generated on Mon, 29 Dec 2025 09:49:47 GMT and should not be manually modified.\n+\n+## 0.15.0\n+Mon, 29 Dec 2025 09:49:47 GMT\n+\n+### Minor changes\n+\n+- add forward interest_rate\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 1,
          "path": "apps/virtual-exchange/package.json",
          "changeType": "modified",
          "patch": "commit f757624f247ea567d341fa5e6f98ebf90e58e1e2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 17:52:55 2025 +0800\n\n    chore: bump version (#2428)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/apps/virtual-exchange/package.json b/apps/virtual-exchange/package.json\nindex 038d09abc..7ecb360b9 100644\n--- a/apps/virtual-exchange/package.json\n+++ b/apps/virtual-exchange/package.json\n@@ -3 +3 @@\n-  \"version\": \"0.14.0\",\n+  \"version\": \"0.15.0\",\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 10,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-29-09-21.json",
          "changeType": "deleted",
          "patch": "commit f757624f247ea567d341fa5e6f98ebf90e58e1e2\nAuthor: humblelittlec1[bot] <208195530+humblelittlec1[bot]@users.noreply.github.com>\nDate:   Mon Dec 29 17:52:55 2025 +0800\n\n    chore: bump version (#2428)\n    \n    Co-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-29-09-21.json b/common/changes/@yuants/app-virtual-exchange/2025-12-29-09-21.json\ndeleted file mode 100644\nindex f7e25a5a8..000000000\n--- a/common/changes/@yuants/app-virtual-exchange/2025-12-29-09-21.json\n+++ /dev/null\n@@ -1,10 +0,0 @@\n-{\n-  \"changes\": [\n-    {\n-      \"packageName\": \"@yuants/app-virtual-exchange\",\n-      \"comment\": \"add forward interest_rate\",\n-      \"type\": \"minor\"\n-    }\n-  ],\n-  \"packageName\": \"@yuants/app-virtual-exchange\"\n-}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/{main_2025-12-29-08-52.json => main_2025-12-29-09-49.json}",
          "changeType": "renamed",
          "patch": "",
          "codeSnippets": []
        }
      ]
    },
    {
      "hash": "57eb64f3f68f1c8226229a12070961a49bfca221",
      "short": "57eb64f3f",
      "author": "CZ",
      "email": "zheng.chen@no-trade-no.life",
      "authoredAt": "2025-12-30 04:32:48 +0800",
      "subject": "refactor: remove ProductDataUnit and related code (#2430)",
      "conventionalCommit": {
        "type": "refactor",
        "scope": null,
        "breaking": false
      },
      "files": [
        {
          "additions": 34,
          "deletions": 28,
          "path": "apps/virtual-exchange/src/series-collector/forwards-interest-rate.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/apps/virtual-exchange/src/series-collector/forwards-interest-rate.ts b/apps/virtual-exchange/src/series-collector/forwards-interest-rate.ts\nindex 38a2db54a..c4c07a5f9 100644\n--- a/apps/virtual-exchange/src/series-collector/forwards-interest-rate.ts\n+++ b/apps/virtual-exchange/src/series-collector/forwards-interest-rate.ts\n@@ -7,0 +8 @@ import {\n+  IInterestRateServiceMetadata,\n@@ -23 +24 @@ const listBackwardSeriesIds = async () => {\n-  const series_ids = new Set<string>();\n+  const series_ids = new Map<string, IInterestRateServiceMetadata>();\n@@ -29 +29,0 @@ const listBackwardSeriesIds = async () => {\n-        if (meta.direction !== 'forward') continue;\n@@ -33 +33 @@ const listBackwardSeriesIds = async () => {\n-          series_ids.add(product_id);\n+          series_ids.set(product_id, meta);\n@@ -46 +45,0 @@ defer(async () => {\n-  const time = Date.now();\n@@ -49,3 +48 @@ defer(async () => {\n-    `[SeriesCollector][InterestRate][Forwards] Found ${\n-      series_ids.size\n-    } series to collect forwards data for. (${formatTime(Date.now() - time)})`,\n+    `[SeriesCollector][InterestRate][Forwards] Found ${series_ids.size} series to collect forwards data for. `,\n@@ -55 +52 @@ defer(async () => {\n-    [...series_ids].map(async (product_id) => {\n+    [...series_ids].map(async ([product_id, meta]) => {\n@@ -64,11 +61,13 @@ defer(async () => {\n-          const [record] = await requestSQL<\n-            {\n-              end_time: string;\n-            }[]\n-          >(\n-            terminal,\n-            `select end_time from series_data_range where series_id = ${escapeSQL(\n-              product_id,\n-            )} and table_name = 'interest_rate' order by end_time desc limit 1`,\n-          );\n-          const time = record ? new Date(record.end_time).getTime() : 0;\n+          let req: IIngestInterestRateRequest;\n+          if (meta.direction === 'forward') {\n+            const [record] = await requestSQL<\n+              {\n+                end_time: string;\n+              }[]\n+            >(\n+              terminal,\n+              `select end_time from series_data_range where series_id = ${escapeSQL(\n+                product_id,\n+              )} and table_name = 'interest_rate' order by end_time desc limit 1`,\n+            );\n+            const time = record ? new Date(record.end_time).getTime() : 0;\n@@ -76,5 +75,13 @@ defer(async () => {\n-          const req: IIngestInterestRateRequest = {\n-            product_id: product_id,\n-            direction: 'forward',\n-            time,\n-          };\n+            req = {\n+              product_id: product_id,\n+              direction: 'forward',\n+              time,\n+            };\n+          } else {\n+            // backward\n+            req = {\n+              product_id,\n+              direction: 'backward',\n+              time: Date.now(),\n+            };\n+          }\n@@ -84,2 +91,2 @@ defer(async () => {\n-            'DispatchIngestInterestRateRequestForwards',\n-            `product_id=${product_id}, time=${formatTime(time)}`,\n+            'DispatchIngestInterestRateRequestForwardTask',\n+            `product_id=${req.product_id}, direction=${req.direction}, time=${formatTime(req.time)}`,\n@@ -87 +93,0 @@ defer(async () => {\n-\n@@ -100 +106 @@ defer(async () => {\n-            'DispatchIngestInterestRateResultForwards',\n+            'DispatchIngestInterestRateRequestForwardTaskResult',\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "series_ids",
              "code": "const series_ids = new Map<string, IInterestRateServiceMetadata>();\n        series_ids.set(product_id, meta);\n  `[SeriesCollector][InterestRate][Forwards] Found ${series_ids.size} series to collect forwards data for. `,\n  [...series_ids].map(async ([product_id, meta]) => {",
              "lineStart": 24,
              "lineEnd": 60
            },
            {
              "type": "function",
              "name": "req",
              "code": "let req: IIngestInterestRateRequest;\nif (meta.direction === 'forward') {\n  const [record] = await requestSQL<\n    {\n      end_time: string;\n    }[]\n  >(\n    terminal,\n    `select end_time from series_data_range where series_id = ${escapeSQL(\n      product_id,\n    )} and table_name = 'interest_rate' order by end_time desc limit 1`,\n  );",
              "lineStart": 61,
              "lineEnd": 72
            },
            {
              "type": "function",
              "name": "time",
              "code": "  const time = record ? new Date(record.end_time).getTime() : 0;\n  req = {\n    product_id: product_id,\n    direction: 'forward',\n    time,\n  };\n} else {\n  // backward\n  req = {\n    product_id,\n    direction: 'backward',\n    time: Date.now(),\n  };\n}\n  'DispatchIngestInterestRateRequestForwardTask',",
              "lineStart": 73,
              "lineEnd": 107
            }
          ]
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/agent/2025-12-29-20-27.json",
          "changeType": "added",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/common/changes/@yuants/agent/2025-12-29-20-27.json b/common/changes/@yuants/agent/2025-12-29-20-27.json\nnew file mode 100644\nindex 000000000..36dcb5e6c\n--- /dev/null\n+++ b/common/changes/@yuants/agent/2025-12-29-20-27.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/agent\",\n+      \"comment\": \"refactor product and ohlc loading\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/agent\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/app-virtual-exchange/2025-12-29-20-27.json",
          "changeType": "added",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/common/changes/@yuants/app-virtual-exchange/2025-12-29-20-27.json b/common/changes/@yuants/app-virtual-exchange/2025-12-29-20-27.json\nnew file mode 100644\nindex 000000000..338f0cd9f\n--- /dev/null\n+++ b/common/changes/@yuants/app-virtual-exchange/2025-12-29-20-27.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/app-virtual-exchange\",\n+      \"comment\": \"enhance forward interest_rate with backward method\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/app-virtual-exchange\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/dist-origin/2025-12-29-20-27.json",
          "changeType": "added",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/common/changes/@yuants/dist-origin/2025-12-29-20-27.json b/common/changes/@yuants/dist-origin/2025-12-29-20-27.json\nnew file mode 100644\nindex 000000000..8cdaec8b4\n--- /dev/null\n+++ b/common/changes/@yuants/dist-origin/2025-12-29-20-27.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/dist-origin\",\n+      \"comment\": \"fix\",\n+      \"type\": \"patch\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/dist-origin\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 10,
          "deletions": 0,
          "path": "common/changes/@yuants/kernel/2025-12-29-20-27.json",
          "changeType": "added",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/common/changes/@yuants/kernel/2025-12-29-20-27.json b/common/changes/@yuants/kernel/2025-12-29-20-27.json\nnew file mode 100644\nindex 000000000..6bfb74aa6\n--- /dev/null\n+++ b/common/changes/@yuants/kernel/2025-12-29-20-27.json\n@@ -0,0 +1,10 @@\n+{\n+  \"changes\": [\n+    {\n+      \"packageName\": \"@yuants/kernel\",\n+      \"comment\": \"remove product info unit\",\n+      \"type\": \"minor\"\n+    }\n+  ],\n+  \"packageName\": \"@yuants/kernel\"\n+}\n\\ No newline at end of file\n",
          "codeSnippets": []
        },
        {
          "additions": 2,
          "deletions": 0,
          "path": "common/config/rush/pnpm-lock.yaml",
          "changeType": "added",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/common/config/rush/pnpm-lock.yaml b/common/config/rush/pnpm-lock.yaml\nindex 7f8e35252..f4511e68a 100644\n--- a/common/config/rush/pnpm-lock.yaml\n+++ b/common/config/rush/pnpm-lock.yaml\n@@ -1626,0 +1627 @@ importers:\n+      '@yuants/data-ohlc': workspace:*\n@@ -1638,0 +1640 @@ importers:\n+      '@yuants/data-ohlc': link:../data-ohlc\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 1,
          "path": "distributions/origin/@libs/global.ts",
          "changeType": "deleted",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/distributions/origin/@libs/global.ts b/distributions/origin/@libs/global.ts\nindex 5b57fd182..5a02a0af7 100644\n--- a/distributions/origin/@libs/global.ts\n+++ b/distributions/origin/@libs/global.ts\n@@ -8 +7,0 @@ export const global = {\n-  useProduct,\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 4,
          "path": "distributions/origin/global.d.ts",
          "changeType": "deleted",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/distributions/origin/global.d.ts b/distributions/origin/global.d.ts\nindex 8608c14cd..1b53787fc 100644\n--- a/distributions/origin/global.d.ts\n+++ b/distributions/origin/global.d.ts\n@@ -518,4 +517,0 @@ declare const useSeries: (name: string, parent: Series | undefined, tags?: Recor\n-// Business class Hook\n-/** Use product information */\n-declare const useProduct: (datasource_id: string, product_id: string) => IProduct;\n-\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 12,
          "path": "libraries/agent/etc/agent.api.md",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/agent/etc/agent.api.md b/libraries/agent/etc/agent.api.md\nindex d9a463b43..b9225914f 100644\n--- a/libraries/agent/etc/agent.api.md\n+++ b/libraries/agent/etc/agent.api.md\n@@ -14 +13,0 @@ import { IOrder } from '@yuants/data-order';\n-import { IProduct } from '@yuants/data-product';\r\n@@ -19,2 +17,0 @@ import { PeriodDataUnit } from '@yuants/kernel';\n-import { ProductDataUnit } from '@yuants/kernel';\r\n-import { ProductLoadingUnit } from '@yuants/kernel';\r\n@@ -36 +32,0 @@ export const AgentScene: (terminal: Terminal, agentConf: IAgentConf) => Promise<\n-    productDataUnit: ProductDataUnit;\r\n@@ -83,4 +78,0 @@ export class AgentUnit extends BasicUnit {\n-    productDataUnit: ProductDataUnit;\r\n-    // (undocumented)\r\n-    productLoadingUnit?: ProductLoadingUnit;\r\n-    // (undocumented)\r\n@@ -155 +147 @@ export const useMetric: (name: string, value: number, labels?: Record<string, st\n-export const useOHLC: (datasource_id: string, product_id: string, duration: string) => {\r\n+export const useOHLC: (product_id: string, duration: string) => {\r\n@@ -167,3 +158,0 @@ export const useParamSchema: <T>(key: string, schema: JSONSchema7) => T;\n-// @public\r\n-export const useProduct: (datasource_id: string, product_id: string) => IProduct;\r\n-\r\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "useOHLC",
              "code": "export const useOHLC: (product_id: string, duration: string) => {\r",
              "lineStart": 147,
              "lineEnd": 158
            }
          ]
        },
        {
          "additions": 1,
          "deletions": 0,
          "path": "libraries/agent/package.json",
          "changeType": "added",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/agent/package.json b/libraries/agent/package.json\nindex d0f51690d..e90ebc929 100644\n--- a/libraries/agent/package.json\n+++ b/libraries/agent/package.json\n@@ -20,0 +21 @@\n+    \"@yuants/data-ohlc\": \"workspace:*\",\n",
          "codeSnippets": []
        },
        {
          "additions": 4,
          "deletions": 17,
          "path": "libraries/agent/src/AgentScene.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/agent/src/AgentScene.ts b/libraries/agent/src/AgentScene.ts\nindex 56f3e04e6..65d468b7f 100644\n--- a/libraries/agent/src/AgentScene.ts\n+++ b/libraries/agent/src/AgentScene.ts\n@@ -14 +13,0 @@ import {\n-  PeriodDataCheckingUnit,\n@@ -17,2 +15,0 @@ import {\n-  ProductDataUnit,\n-  ProductLoadingUnit,\n@@ -118,2 +114,0 @@ export const AgentScene = async (terminal: Terminal, agentConf: IAgentConf) => {\n-  const productDataUnit = new ProductDataUnit(kernel);\n-  const productLoadingUnit = new ProductLoadingUnit(kernel, terminal, productDataUnit);\n@@ -131 +126 @@ export const AgentScene = async (terminal: Terminal, agentConf: IAgentConf) => {\n-  const periodLoadingUnit = new HistoryPeriodLoadingUnit(kernel, terminal, productDataUnit, periodDataUnit);\n+  const periodLoadingUnit = new HistoryPeriodLoadingUnit(kernel, terminal, periodDataUnit);\n@@ -138,6 +133 @@ export const AgentScene = async (terminal: Terminal, agentConf: IAgentConf) => {\n-    const realtimePeriodLoadingUnit = new RealtimePeriodLoadingUnit(\n-      kernel,\n-      terminal,\n-      productDataUnit,\n-      periodDataUnit,\n-    );\n+    const realtimePeriodLoadingUnit = new RealtimePeriodLoadingUnit(kernel, terminal, periodDataUnit);\n@@ -152,2 +142,2 @@ export const AgentScene = async (terminal: Terminal, agentConf: IAgentConf) => {\n-  const historyOrderUnit = new HistoryOrderUnit(kernel, quoteDataUnit, productDataUnit);\n-  const accountInfoUnit = new AccountInfoUnit(kernel, productDataUnit, quoteDataUnit, historyOrderUnit);\n+  const historyOrderUnit = new HistoryOrderUnit(kernel, quoteDataUnit);\n+  const accountInfoUnit = new AccountInfoUnit(kernel, quoteDataUnit, historyOrderUnit);\n@@ -156 +145,0 @@ export const AgentScene = async (terminal: Terminal, agentConf: IAgentConf) => {\n-    productDataUnit,\n@@ -211,2 +199,0 @@ export const AgentScene = async (terminal: Terminal, agentConf: IAgentConf) => {\n-    productDataUnit,\n-\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "periodLoadingUnit",
              "code": "const periodLoadingUnit = new HistoryPeriodLoadingUnit(kernel, terminal, periodDataUnit);",
              "lineStart": 126,
              "lineEnd": 132
            },
            {
              "type": "function",
              "name": "realtimePeriodLoadingUnit",
              "code": "const realtimePeriodLoadingUnit = new RealtimePeriodLoadingUnit(kernel, terminal, periodDataUnit);",
              "lineStart": 133,
              "lineEnd": 141
            },
            {
              "type": "function",
              "name": "historyOrderUnit",
              "code": "const historyOrderUnit = new HistoryOrderUnit(kernel, quoteDataUnit);",
              "lineStart": 142,
              "lineEnd": 142
            },
            {
              "type": "function",
              "name": "accountInfoUnit",
              "code": "const accountInfoUnit = new AccountInfoUnit(kernel, quoteDataUnit, historyOrderUnit);",
              "lineStart": 143,
              "lineEnd": 199
            }
          ]
        },
        {
          "additions": 0,
          "deletions": 12,
          "path": "libraries/agent/src/AgentUnit.ts",
          "changeType": "deleted",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/agent/src/AgentUnit.ts b/libraries/agent/src/AgentUnit.ts\nindex 8f56b8c7f..fbfb34e5e 100644\n--- a/libraries/agent/src/AgentUnit.ts\n+++ b/libraries/agent/src/AgentUnit.ts\n@@ -9,2 +8,0 @@ import {\n-  ProductDataUnit,\n-  ProductLoadingUnit,\n@@ -27 +24,0 @@ import {\n-  useProduct,\n@@ -44,2 +40,0 @@ export class AgentUnit extends BasicUnit {\n-  productDataUnit: ProductDataUnit;\n-  productLoadingUnit?: ProductLoadingUnit;\n@@ -73,3 +67,0 @@ export class AgentUnit extends BasicUnit {\n-    this.productDataUnit = kernel.units.find(\n-      (unit): unit is ProductDataUnit => unit instanceof ProductDataUnit,\n-    )!;\n@@ -81,3 +72,0 @@ export class AgentUnit extends BasicUnit {\n-    this.productLoadingUnit = kernel.units.find(\n-      (unit): unit is ProductLoadingUnit => unit instanceof ProductLoadingUnit,\n-    );\n@@ -157 +145,0 @@ function makeScriptRunner(script: string): () => any {\n-    useProduct,\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 1,
          "path": "libraries/agent/src/hooks/index.ts",
          "changeType": "deleted",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/agent/src/hooks/index.ts b/libraries/agent/src/hooks/index.ts\nindex d59e9bbd2..ab51e0cfe 100644\n--- a/libraries/agent/src/hooks/index.ts\n+++ b/libraries/agent/src/hooks/index.ts\n@@ -8 +7,0 @@ export * from './useParamSchema';\n-export * from './useProduct';\n",
          "codeSnippets": []
        },
        {
          "additions": 3,
          "deletions": 8,
          "path": "libraries/agent/src/hooks/useOHLC.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/agent/src/hooks/useOHLC.ts b/libraries/agent/src/hooks/useOHLC.ts\nindex 1406d1c50..8f5459639 100644\n--- a/libraries/agent/src/hooks/useOHLC.ts\n+++ b/libraries/agent/src/hooks/useOHLC.ts\n@@ -1 +0,0 @@\n-import { encodePath } from '@yuants/utils';\n@@ -2,0 +2 @@ import { useAgent, useEffect, useSeries } from '.';\n+import { encodeOHLCSeriesId } from '@yuants/data-ohlc';\n@@ -12 +12 @@ import { useAgent, useEffect, useSeries } from '.';\n-export const useOHLC = (datasource_id: string, product_id: string, duration: string) => {\n+export const useOHLC = (product_id: string, duration: string) => {\n@@ -14 +14 @@ export const useOHLC = (datasource_id: string, product_id: string, duration: str\n-  const series_id = encodePath(datasource_id, product_id, duration);\n+  const series_id = encodeOHLCSeriesId(product_id, duration);\n@@ -19 +18,0 @@ export const useOHLC = (datasource_id: string, product_id: string, duration: str\n-    datasource_id,\n@@ -30,4 +28,0 @@ export const useOHLC = (datasource_id: string, product_id: string, duration: str\n-    agent.productLoadingUnit?.productTasks.push({\n-      datasource_id,\n-      product_id,\n-    });\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "useOHLC",
              "code": "export const useOHLC = (product_id: string, duration: string) => {",
              "lineStart": 12,
              "lineEnd": 13
            },
            {
              "type": "function",
              "name": "series_id",
              "code": "const series_id = encodeOHLCSeriesId(product_id, duration);",
              "lineStart": 14,
              "lineEnd": 28
            }
          ]
        },
        {
          "additions": 0,
          "deletions": 38,
          "path": "libraries/agent/src/hooks/useProduct.ts",
          "changeType": "deleted",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/agent/src/hooks/useProduct.ts b/libraries/agent/src/hooks/useProduct.ts\ndeleted file mode 100644\nindex 08e112899..000000000\n--- a/libraries/agent/src/hooks/useProduct.ts\n+++ /dev/null\n@@ -1,38 +0,0 @@\n-import { IProduct } from '@yuants/data-product';\n-import { useAgent, useEffect } from './basic-set';\n-\n-/**\n- * 使用品种信息\n- * @param datasource_id - 数据源ID\n- * @param product_id - 品种ID\n- * @public\n- */\n-export const useProduct = (datasource_id: string, product_id: string): IProduct => {\n-  const agent = useAgent();\n-  useEffect(() => {\n-    agent.productLoadingUnit?.productTasks.push({\n-      datasource_id,\n-      product_id,\n-    });\n-  }, []);\n-  return (\n-    agent.productDataUnit.getProduct(datasource_id, product_id) || {\n-      datasource_id,\n-      product_id,\n-      name: '',\n-      quote_currency: '',\n-      value_scale: 1,\n-      value_scale_unit: '',\n-      volume_step: 1,\n-      price_step: 1,\n-      allow_long: true,\n-      allow_short: true,\n-      margin_rate: 1,\n-      base_currency: '',\n-      value_based_cost: 0,\n-      volume_based_cost: 0,\n-      max_position: 0,\n-      max_volume: 0,\n-    }\n-  );\n-};\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 3,
          "path": "libraries/agent/src/hooks/useTick.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/agent/src/hooks/useTick.ts b/libraries/agent/src/hooks/useTick.ts\nindex 6a6bae7ca..75d877cde 100644\n--- a/libraries/agent/src/hooks/useTick.ts\n+++ b/libraries/agent/src/hooks/useTick.ts\n@@ -2 +2 @@ import { RealtimeTickLoadingUnit } from '@yuants/kernel';\n-import { useAgent, useEffect, useProduct } from '.';\n+import { useAgent, useEffect } from '.';\n@@ -16,2 +15,0 @@ export const useTick = (\n-  useProduct(datasource_id, product_id);\n-\n",
          "codeSnippets": []
        },
        {
          "additions": 9,
          "deletions": 71,
          "path": "libraries/kernel/etc/kernel.api.md",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/etc/kernel.api.md b/libraries/kernel/etc/kernel.api.md\nindex 9ad07555b..8bae8e0a4 100644\n--- a/libraries/kernel/etc/kernel.api.md\n+++ b/libraries/kernel/etc/kernel.api.md\n@@ -33 +33 @@ export class AccountInfoUnit extends BasicUnit {\n-    constructor(kernel: Kernel, productDataUnit: ProductDataUnit, quoteDataUnit: QuoteDataUnit, historyOrderUnit: HistoryOrderUnit);\r\n+    constructor(kernel: Kernel, quoteDataUnit: QuoteDataUnit, historyOrderUnit: HistoryOrderUnit);\r\n@@ -58,2 +57,0 @@ export class AccountInfoUnit extends BasicUnit {\n-    productDataUnit: ProductDataUnit;\r\n-    // (undocumented)\r\n@@ -131 +129 @@ export class AccountSimulatorUnit extends BasicUnit {\n-    constructor(kernel: Kernel, productDataUnit: ProductDataUnit, quoteDataUnit: QuoteDataUnit, historyOrderUnit: HistoryOrderUnit, accountInfo: IAccountInfo);\r\n+    constructor(kernel: Kernel, quoteDataUnit: QuoteDataUnit, historyOrderUnit: HistoryOrderUnit, accountInfo: IAccountInfo);\r\n@@ -145,2 +142,0 @@ export class AccountSimulatorUnit extends BasicUnit {\n-    productDataUnit: ProductDataUnit;\r\n-    // (undocumented)\r\n@@ -226 +222 @@ export const diffPosition: (source: IPosition[], target: IPosition[]) => IPositi\n-export const getMargin: (product: IProduct, openPrice: number, volume: number, direction: string, currency: string, quote: (product_id: string) => {\r\n+export const getMargin: (product: IProduct | null, openPrice: number, volume: number, direction: string, currency: string, quote: (product_id: string) => {\r\n@@ -232 +228 @@ export const getMargin: (product: IProduct, openPrice: number, volume: number, d\n-export const getProfit: (product: IProduct, openPrice: number, closePrice: number, volume: number, direction: string, currency: string, quotes: (product_id: string) => {\r\n+export const getProfit: (product: IProduct | null, openPrice: number, closePrice: number, volume: number, direction: string, currency: string, quotes: (product_id: string) => {\r\n@@ -239 +235 @@ export class HistoryOrderUnit extends BasicUnit {\n-    constructor(kernel: Kernel, quoteDataUnit: QuoteDataUnit, productDataUnit: ProductDataUnit);\r\n+    constructor(kernel: Kernel, quoteDataUnit: QuoteDataUnit);\r\n@@ -249,2 +244,0 @@ export class HistoryOrderUnit extends BasicUnit {\n-    productDataUnit: ProductDataUnit;\r\n-    // (undocumented)\r\n@@ -259 +253 @@ export class HistoryPeriodLoadingUnit extends BasicUnit {\n-    constructor(kernel: Kernel, terminal: Terminal, productDataUnit: ProductDataUnit, periodDataUnit: PeriodDataUnit);\r\n+    constructor(kernel: Kernel, terminal: Terminal, periodDataUnit: PeriodDataUnit);\r\n@@ -286,2 +279,0 @@ export class HistoryPeriodLoadingUnit extends BasicUnit {\n-    productDataUnit: ProductDataUnit;\r\n-    // (undocumented)\r\n@@ -501 +493 @@ export class OrderMatchingUnit extends BasicUnit {\n-    constructor(kernel: Kernel, productDataUnit: ProductDataUnit, periodDataUnit: PeriodDataUnit, tickDataUnit: TickDataUnit, accountInfoUnit: AccountInfoUnit, historyOrderUnit: HistoryOrderUnit, quoteDataUnit: QuoteDataUnit);\r\n+    constructor(kernel: Kernel, periodDataUnit: PeriodDataUnit, tickDataUnit: TickDataUnit, accountInfoUnit: AccountInfoUnit, historyOrderUnit: HistoryOrderUnit, quoteDataUnit: QuoteDataUnit);\r\n@@ -532,2 +523,0 @@ export class OrderMatchingUnit extends BasicUnit {\n-    productDataUnit: ProductDataUnit;\r\n-    // (undocumented)\r\n@@ -548 +537,0 @@ export const OrderMergeReplayScene: (kernel: Kernel, init_account_info: IAccount\n-    productDataUnit: ProductDataUnit;\r\n@@ -599 +588 @@ export class PortfolioSimulatorUnit extends BasicUnit {\n-    constructor(kernel: Kernel, coefficient_fn_str: string, periodDataUnit: PeriodDataUnit, productDataUnit: ProductDataUnit, mapAccountInfoToUnits: Record<string, {\r\n+    constructor(kernel: Kernel, coefficient_fn_str: string, periodDataUnit: PeriodDataUnit, mapAccountInfoToUnits: Record<string, {\r\n@@ -623,2 +611,0 @@ export class PortfolioSimulatorUnit extends BasicUnit {\n-    productDataUnit: ProductDataUnit;\r\n-    // (undocumented)\r\n@@ -634,47 +620,0 @@ export class PortfolioSimulatorUnit extends BasicUnit {\n-// @public\r\n-export class ProductDataUnit extends BasicUnit {\r\n-    // (undocumented)\r\n-    dump(): {\r\n-        mapProductIdToProduct: Record<string, Record<string, IProduct>>;\r\n-    };\r\n-    // (undocumented)\r\n-    getProduct(datasource_id: string, product_id: string): IProduct | undefined;\r\n-    // (undocumented)\r\n-    listProducts(): IProduct[];\r\n-    // (undocumented)\r\n-    onInit(): void | Promise<void>;\r\n-    // (undocumented)\r\n-    restore(state: any): void;\r\n-    // (undocumented)\r\n-    updateProduct(product: IProduct): void;\r\n-}\r\n-\r\n-// @public\r\n-export class ProductLoadingUnit extends BasicUnit {\r\n-    constructor(kernel: Kernel, terminal: Terminal, productDataUnit: ProductDataUnit, options?: {} | undefined);\r\n-    // (undocumented)\r\n-    dump(): {\r\n-        productTasks: {\r\n-            datasource_id: string;\r\n-            product_id: string;\r\n-        }[];\r\n-    };\r\n-    // (undocumented)\r\n-    kernel: Kernel;\r\n-    // (undocumented)\r\n-    onInit(): Promise<void>;\r\n-    // (undocumented)\r\n-    options?: {} | undefined;\r\n-    // (undocumented)\r\n-    productDataUnit: ProductDataUnit;\r\n-    // (undocumented)\r\n-    productTasks: {\r\n-        datasource_id: string;\r\n-        product_id: string;\r\n-    }[];\r\n-    // (undocumented)\r\n-    restore(state: any): void;\r\n-    // (undocumented)\r\n-    terminal: Terminal;\r\n-}\r\n-\r\n@@ -716 +656 @@ export class RealtimePeriodLoadingUnit extends BasicUnit {\n-    constructor(kernel: Kernel, terminal: Terminal, productDataUnit: ProductDataUnit, periodDataUnit: PeriodDataUnit);\r\n+    constructor(kernel: Kernel, terminal: Terminal, periodDataUnit: PeriodDataUnit);\r\n@@ -726,2 +665,0 @@ export class RealtimePeriodLoadingUnit extends BasicUnit {\n-    productDataUnit: ProductDataUnit;\r\n-    // (undocumented)\r\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "getMargin",
              "code": "export const getMargin: (product: IProduct | null, openPrice: number, volume: number, direction: string, currency: string, quote: (product_id: string) => {\r",
              "lineStart": 222,
              "lineEnd": 227
            },
            {
              "type": "function",
              "name": "getProfit",
              "code": "export const getProfit: (product: IProduct | null, openPrice: number, closePrice: number, volume: number, direction: string, currency: string, quotes: (product_id: string) => {\r\n    constructor(kernel: Kernel, quoteDataUnit: QuoteDataUnit);\r\n    constructor(kernel: Kernel, terminal: Terminal, periodDataUnit: PeriodDataUnit);\r\n    constructor(kernel: Kernel, periodDataUnit: PeriodDataUnit, tickDataUnit: TickDataUnit, accountInfoUnit: AccountInfoUnit, historyOrderUnit: HistoryOrderUnit, quoteDataUnit: QuoteDataUnit);\r\n    constructor(kernel: Kernel, coefficient_fn_str: string, periodDataUnit: PeriodDataUnit, mapAccountInfoToUnits: Record<string, {\r\n    constructor(kernel: Kernel, terminal: Terminal, periodDataUnit: PeriodDataUnit);\r",
              "lineStart": 228,
              "lineEnd": 665
            }
          ]
        },
        {
          "additions": 13,
          "deletions": 55,
          "path": "libraries/kernel/src/scenes/AccountReplayScene.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/scenes/AccountReplayScene.ts b/libraries/kernel/src/scenes/AccountReplayScene.ts\nindex f858a04bf..aad569c3d 100644\n--- a/libraries/kernel/src/scenes/AccountReplayScene.ts\n+++ b/libraries/kernel/src/scenes/AccountReplayScene.ts\n@@ -1 +0,0 @@\n-import { IProduct } from '@yuants/data-product';\n@@ -3,2 +1,0 @@ import { Terminal } from '@yuants/protocol';\n-import { escapeSQL, requestSQL } from '@yuants/sql';\n-import { encodePath } from '@yuants/utils';\n@@ -9 +5,0 @@ import {\n-  BasicUnit,\n@@ -14,2 +9,0 @@ import {\n-  ProductDataUnit,\n-  ProductLoadingUnit,\n@@ -37 +30,0 @@ export const AccountReplayScene = (\n-  const productDataUnit = new ProductDataUnit(kernel);\n@@ -39 +32 @@ export const AccountReplayScene = (\n-  const historyOrderUnit = new HistoryOrderUnit(kernel, quoteDataUnit, productDataUnit);\n+  const historyOrderUnit = new HistoryOrderUnit(kernel, quoteDataUnit);\n@@ -46,36 +39 @@ export const AccountReplayScene = (\n-  // Adhoc Unit: 根据订单决定所需的品种信息\n-  new BasicUnit(kernel).onInit = () => {\n-    orderLoadingUnit.relatedProductIds.forEach((product_id) => {\n-      productLoadingUnit.productTasks.push({\n-        datasource_id: datasource_id ?? account_id,\n-        product_id,\n-      });\n-    });\n-  };\n-  const productLoadingUnit = new ProductLoadingUnit(kernel, terminal, productDataUnit);\n-  // Adhoc Unit: 根据品种加载交叉盘品种\n-  new BasicUnit(kernel).onInit = async () => {\n-    for (const product of productDataUnit.listProducts()) {\n-      const quote_currency = product.quote_currency;\n-      if (quote_currency && currency && product.quote_currency !== currency) {\n-        const [productA] = await requestSQL<IProduct[]>(\n-          terminal,\n-          `select * from product where datasource_id = ${escapeSQL(\n-            datasource_id ?? account_id,\n-          )} and base_currency = ${escapeSQL(currency)} and quote_currency = ${escapeSQL(quote_currency)}`,\n-        );\n-        if (productA) {\n-          productDataUnit.updateProduct(productA);\n-        }\n-        const [productB] = await requestSQL<IProduct[]>(\n-          terminal,\n-          `select * from product where datasource_id = ${escapeSQL(\n-            datasource_id ?? account_id,\n-          )} and base_currency = ${escapeSQL(quote_currency)} and quote_currency = ${escapeSQL(currency)}`,\n-        );\n-        if (productB) {\n-          productDataUnit.updateProduct(productB);\n-        }\n-      }\n-    }\n-  };\n+\n@@ -83,9 +41,9 @@ export const AccountReplayScene = (\n-  new BasicUnit(kernel).onInit = () => {\n-    for (const product of productDataUnit.listProducts()) {\n-      periodLoadingUnit.periodTasks.push({\n-        series_id: encodePath(product.datasource_id, product.product_id, duration),\n-        start_time: start_timestamp,\n-        end_time: end_timestamp,\n-      });\n-    }\n-  };\n+  // new BasicUnit(kernel).onInit = () => {\n+  //   for (const product of productDataUnit.listProducts()) {\n+  //     periodLoadingUnit.periodTasks.push({\n+  //       series_id: encodePath(product.datasource_id, product.product_id, duration),\n+  //       start_time: start_timestamp,\n+  //       end_time: end_timestamp,\n+  //     });\n+  //   }\n+  // };\n@@ -94,2 +52,2 @@ export const AccountReplayScene = (\n-  const periodLoadingUnit = new HistoryPeriodLoadingUnit(kernel, terminal, productDataUnit, periodDataUnit);\n-  const accountInfoUnit = new AccountInfoUnit(kernel, productDataUnit, quoteDataUnit, historyOrderUnit);\n+  const periodLoadingUnit = new HistoryPeriodLoadingUnit(kernel, terminal, periodDataUnit);\n+  const accountInfoUnit = new AccountInfoUnit(kernel, quoteDataUnit, historyOrderUnit);\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "historyOrderUnit",
              "code": "const historyOrderUnit = new HistoryOrderUnit(kernel, quoteDataUnit);\n\n// new BasicUnit(kernel).onInit = () => {",
              "lineStart": 32,
              "lineEnd": 41
            },
            {
              "type": "function",
              "name": "product",
              "code": "//   for (const product of productDataUnit.listProducts()) {\n//     periodLoadingUnit.periodTasks.push({\n//       series_id: encodePath(product.datasource_id, product.product_id, duration),\n//       start_time: start_timestamp,\n//       end_time: end_timestamp,\n//     });\n//   }\n// };",
              "lineStart": 42,
              "lineEnd": 51
            },
            {
              "type": "function",
              "name": "periodLoadingUnit",
              "code": "const periodLoadingUnit = new HistoryPeriodLoadingUnit(kernel, terminal, periodDataUnit);",
              "lineStart": 52,
              "lineEnd": 52
            },
            {
              "type": "function",
              "name": "accountInfoUnit",
              "code": "const accountInfoUnit = new AccountInfoUnit(kernel, quoteDataUnit, historyOrderUnit);",
              "lineStart": 53,
              "lineEnd": 54
            }
          ]
        },
        {
          "additions": 3,
          "deletions": 10,
          "path": "libraries/kernel/src/scenes/OrderMergeReplayScene.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/scenes/OrderMergeReplayScene.ts b/libraries/kernel/src/scenes/OrderMergeReplayScene.ts\nindex bd0162117..57d4d6564 100644\n--- a/libraries/kernel/src/scenes/OrderMergeReplayScene.ts\n+++ b/libraries/kernel/src/scenes/OrderMergeReplayScene.ts\n@@ -12 +11,0 @@ import {\n-  ProductDataUnit,\n@@ -31,6 +30 @@ export const OrderMergeReplayScene = (\n-  const productDataUnit = new ProductDataUnit(kernel);\n-  {\n-    for (const product of products) {\n-      productDataUnit.updateProduct(product);\n-    }\n-  }\n+\n@@ -52 +46 @@ export const OrderMergeReplayScene = (\n-  const historyOrderUnit = new HistoryOrderUnit(kernel, quoteDataUnit, productDataUnit);\n+  const historyOrderUnit = new HistoryOrderUnit(kernel, quoteDataUnit);\n@@ -70 +63,0 @@ export const OrderMergeReplayScene = (\n-    productDataUnit,\n@@ -77 +70 @@ export const OrderMergeReplayScene = (\n-  return { kernel, accountInfoUnit, accountPerformanceUnit, productDataUnit, quoteDataUnit, periodDataUnit };\n+  return { kernel, accountInfoUnit, accountPerformanceUnit, quoteDataUnit, periodDataUnit };\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "historyOrderUnit",
              "code": "const historyOrderUnit = new HistoryOrderUnit(kernel, quoteDataUnit);\nreturn { kernel, accountInfoUnit, accountPerformanceUnit, quoteDataUnit, periodDataUnit };",
              "lineStart": 46,
              "lineEnd": 71
            }
          ]
        },
        {
          "additions": 21,
          "deletions": 33,
          "path": "libraries/kernel/src/units/AccountInfoUnit.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/units/AccountInfoUnit.ts b/libraries/kernel/src/units/AccountInfoUnit.ts\nindex c3f9de7a6..c16bb55f1 100644\n--- a/libraries/kernel/src/units/AccountInfoUnit.ts\n+++ b/libraries/kernel/src/units/AccountInfoUnit.ts\n@@ -8 +7,0 @@ import { HistoryOrderUnit } from './HistoryOrderUnit';\n-import { ProductDataUnit } from './ProductDataUnit';\n@@ -17 +15,0 @@ export class AccountInfoUnit extends BasicUnit {\n-    public productDataUnit: ProductDataUnit,\n@@ -124,2 +121,0 @@ export class AccountInfoUnit extends BasicUnit {\n-      const theProduct = this.productDataUnit.getProduct(order.account_id, order.product_id)!;\n-\n@@ -137,6 +133,4 @@ export class AccountInfoUnit extends BasicUnit {\n-          const nextVolume = roundToStep(thePosition.volume + order.volume, theProduct.volume_step ?? 1);\n-          const nextPositionPrice = theProduct.value_scale_unit\n-            ? nextVolume /\n-              (thePosition.volume / thePosition.position_price + order.volume / order.traded_price!)\n-            : (thePosition.position_price * thePosition.volume + order.traded_price! * order.volume) /\n-              nextVolume;\n+          const nextVolume = roundToStep(thePosition.volume + order.volume, 1);\n+          const nextPositionPrice =\n+            (thePosition.position_price * thePosition.volume + order.traded_price! * order.volume) /\n+            nextVolume;\n@@ -153,5 +147,2 @@ export class AccountInfoUnit extends BasicUnit {\n-          const tradedVolume = roundToStep(\n-            Math.min(order.volume, thePosition.volume),\n-            theProduct.volume_step ?? 1,\n-          );\n-          const nextVolume = roundToStep(thePosition.volume - tradedVolume, theProduct.volume_step ?? 1);\n+          const tradedVolume = roundToStep(Math.min(order.volume, thePosition.volume), 1);\n+          const nextVolume = roundToStep(thePosition.volume - tradedVolume, 1);\n@@ -164 +155 @@ export class AccountInfoUnit extends BasicUnit {\n-              theProduct,\n+              null,\n@@ -189,2 +180 @@ export class AccountInfoUnit extends BasicUnit {\n-        const product = this.productDataUnit.getProduct(accountId, product_id);\n-        if (product && quote) {\n+        if (quote) {\n@@ -194 +184 @@ export class AccountInfoUnit extends BasicUnit {\n-              product,\n+              null,\n@@ -210,14 +200,12 @@ export class AccountInfoUnit extends BasicUnit {\n-        if (product) {\n-          const used =\n-            getMargin(\n-              product,\n-              position.position_price,\n-              position.volume,\n-              position.direction!,\n-              theAccountInfo.money.currency,\n-              (product_id) => this.quoteDataUnit.getQuote(accountId, product_id),\n-            ) / (theAccountInfo.money.leverage ?? 1) || 0;\n-          theAccountInfo.money.used +=\n-            used - (this.mapAccountIdToPositionIdToUsed[accountId][position.position_id] || 0);\n-          this.mapAccountIdToPositionIdToUsed[accountId][position.position_id] = used;\n-        }\n+        const used =\n+          getMargin(\n+            null,\n+            position.position_price,\n+            position.volume,\n+            position.direction!,\n+            theAccountInfo.money.currency,\n+            (product_id) => this.quoteDataUnit.getQuote(accountId, product_id),\n+          ) / (theAccountInfo.money.leverage ?? 1) || 0;\n+        theAccountInfo.money.used +=\n+          used - (this.mapAccountIdToPositionIdToUsed[accountId][position.position_id] || 0);\n+        this.mapAccountIdToPositionIdToUsed[accountId][position.position_id] = used;\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "nextVolume",
              "code": "const nextVolume = roundToStep(thePosition.volume + order.volume, 1);",
              "lineStart": 133,
              "lineEnd": 133
            },
            {
              "type": "function",
              "name": "nextPositionPrice",
              "code": "const nextPositionPrice =\n  (thePosition.position_price * thePosition.volume + order.traded_price! * order.volume) /\n  nextVolume;",
              "lineStart": 134,
              "lineEnd": 146
            },
            {
              "type": "function",
              "name": "tradedVolume",
              "code": "const tradedVolume = roundToStep(Math.min(order.volume, thePosition.volume), 1);",
              "lineStart": 147,
              "lineEnd": 147
            },
            {
              "type": "function",
              "name": "nextVolume",
              "code": "  const nextVolume = roundToStep(thePosition.volume - tradedVolume, 1);\n      null,\nif (quote) {\n      null,",
              "lineStart": 148,
              "lineEnd": 199
            },
            {
              "type": "function",
              "name": "used",
              "code": "const used =\n  getMargin(\n    null,\n    position.position_price,\n    position.volume,\n    position.direction!,\n    theAccountInfo.money.currency,\n    (product_id) => this.quoteDataUnit.getQuote(accountId, product_id),\n  ) / (theAccountInfo.money.leverage ?? 1) || 0;\ntheAccountInfo.money.used +=\n  used - (this.mapAccountIdToPositionIdToUsed[accountId][position.position_id] || 0);\nthis.mapAccountIdToPositionIdToUsed[accountId][position.position_id] = used;",
              "lineStart": 200,
              "lineEnd": 212
            }
          ]
        },
        {
          "additions": 10,
          "deletions": 24,
          "path": "libraries/kernel/src/units/AccountSimulatorUnit.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/units/AccountSimulatorUnit.ts b/libraries/kernel/src/units/AccountSimulatorUnit.ts\nindex b526a4736..03f26eebc 100644\n--- a/libraries/kernel/src/units/AccountSimulatorUnit.ts\n+++ b/libraries/kernel/src/units/AccountSimulatorUnit.ts\n@@ -8 +7,0 @@ import { HistoryOrderUnit } from './HistoryOrderUnit';\n-import { ProductDataUnit } from './ProductDataUnit';\n@@ -19 +17,0 @@ export class AccountSimulatorUnit extends BasicUnit {\n-    public productDataUnit: ProductDataUnit,\n@@ -60,2 +57,0 @@ export class AccountSimulatorUnit extends BasicUnit {\n-      const theProduct = this.productDataUnit.getProduct(order.account_id, order.product_id)!;\n-\n@@ -72,6 +68,4 @@ export class AccountSimulatorUnit extends BasicUnit {\n-          const nextVolume = roundToStep(thePosition.volume + order.volume, theProduct?.volume_step ?? 1);\n-          const nextPositionPrice = theProduct.value_scale_unit\n-            ? nextVolume /\n-              (thePosition.volume / thePosition.position_price + order.volume / order.traded_price!)\n-            : (thePosition.position_price * thePosition.volume + order.traded_price! * order.volume) /\n-              nextVolume;\n+          const nextVolume = roundToStep(thePosition.volume + order.volume, 1);\n+          const nextPositionPrice =\n+            (thePosition.position_price * thePosition.volume + order.traded_price! * order.volume) /\n+            nextVolume;\n@@ -92,5 +86,2 @@ export class AccountSimulatorUnit extends BasicUnit {\n-          const tradedVolume = roundToStep(\n-            Math.min(order.volume, thePosition.volume),\n-            theProduct?.volume_step ?? 1,\n-          );\n-          const nextVolume = roundToStep(thePosition.volume - tradedVolume, theProduct?.volume_step ?? 1);\n+          const tradedVolume = roundToStep(Math.min(order.volume, thePosition.volume), 1);\n+          const nextVolume = roundToStep(thePosition.volume - tradedVolume, 1);\n@@ -105 +96 @@ export class AccountSimulatorUnit extends BasicUnit {\n-            theProduct,\n+            null,\n@@ -124,2 +115 @@ export class AccountSimulatorUnit extends BasicUnit {\n-        const product = this.productDataUnit.getProduct(this.accountInfo.account_id, product_id);\n-        if (product && quote) {\n+        if (quote) {\n@@ -128 +118 @@ export class AccountSimulatorUnit extends BasicUnit {\n-            product,\n+            null,\n@@ -148,4 +137,0 @@ export class AccountSimulatorUnit extends BasicUnit {\n-      const product = this.productDataUnit.getProduct(this.accountInfo.account_id, cur.product_id);\n-      if (!product) {\n-        return acc;\n-      }\n@@ -155 +141 @@ export class AccountSimulatorUnit extends BasicUnit {\n-          product,\n+          null,\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "nextVolume",
              "code": "const nextVolume = roundToStep(thePosition.volume + order.volume, 1);",
              "lineStart": 68,
              "lineEnd": 68
            },
            {
              "type": "function",
              "name": "nextPositionPrice",
              "code": "const nextPositionPrice =\n  (thePosition.position_price * thePosition.volume + order.traded_price! * order.volume) /\n  nextVolume;",
              "lineStart": 69,
              "lineEnd": 85
            },
            {
              "type": "function",
              "name": "tradedVolume",
              "code": "const tradedVolume = roundToStep(Math.min(order.volume, thePosition.volume), 1);",
              "lineStart": 86,
              "lineEnd": 86
            },
            {
              "type": "function",
              "name": "nextVolume",
              "code": "  const nextVolume = roundToStep(thePosition.volume - tradedVolume, 1);\n    null,\nif (quote) {\n    null,\n  null,",
              "lineStart": 87,
              "lineEnd": 142
            }
          ]
        },
        {
          "additions": 1,
          "deletions": 6,
          "path": "libraries/kernel/src/units/ActivePortfolioOptimizeSimulatorUnit.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/units/ActivePortfolioOptimizeSimulatorUnit.ts b/libraries/kernel/src/units/ActivePortfolioOptimizeSimulatorUnit.ts\nindex dcd67bc01..839f56351 100644\n--- a/libraries/kernel/src/units/ActivePortfolioOptimizeSimulatorUnit.ts\n+++ b/libraries/kernel/src/units/ActivePortfolioOptimizeSimulatorUnit.ts\n@@ -14 +13,0 @@ import { IPortfolioStatistics } from './PortfolioSimulatorUnit';\n-import { ProductDataUnit } from './ProductDataUnit';\n@@ -108 +106,0 @@ export class ActivePortfolioOptimizeSimulatorUnit extends BasicUnit {\n-    public productDataUnit: ProductDataUnit,\n@@ -253,4 +251 @@ export class ActivePortfolioOptimizeSimulatorUnit extends BasicUnit {\n-        volume: roundToStep(\n-          Math.abs(positionDiff.error_volume),\n-          this.productDataUnit.getProduct(account_id, product_id)?.volume_step ?? 1,\n-        ),\n+        volume: roundToStep(Math.abs(positionDiff.error_volume), 1),\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 6,
          "path": "libraries/kernel/src/units/HistoryOrderUnit.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/units/HistoryOrderUnit.ts b/libraries/kernel/src/units/HistoryOrderUnit.ts\nindex 360ae0881..deab8abb5 100644\n--- a/libraries/kernel/src/units/HistoryOrderUnit.ts\n+++ b/libraries/kernel/src/units/HistoryOrderUnit.ts\n@@ -5 +4,0 @@ import { BasicUnit } from './BasicUnit';\n-import { ProductDataUnit } from './ProductDataUnit';\n@@ -13,5 +12 @@ export class HistoryOrderUnit extends BasicUnit {\n-  constructor(\n-    public kernel: Kernel,\n-    public quoteDataUnit: QuoteDataUnit,\n-    public productDataUnit: ProductDataUnit,\n-  ) {\n+  constructor(public kernel: Kernel, public quoteDataUnit: QuoteDataUnit) {\n",
          "codeSnippets": []
        },
        {
          "additions": 17,
          "deletions": 14,
          "path": "libraries/kernel/src/units/HistoryPeriodLoadingUnit.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/units/HistoryPeriodLoadingUnit.ts b/libraries/kernel/src/units/HistoryPeriodLoadingUnit.ts\nindex d8a2d606e..3c04654a8 100644\n--- a/libraries/kernel/src/units/HistoryPeriodLoadingUnit.ts\n+++ b/libraries/kernel/src/units/HistoryPeriodLoadingUnit.ts\n@@ -1 +1 @@\n-import { IOHLC } from '@yuants/data-ohlc';\n+import { decodeOHLCSeriesId, IOHLC } from '@yuants/data-ohlc';\n@@ -9 +8,0 @@ import { PeriodDataUnit } from './PeriodDataUnit';\n-import { ProductDataUnit } from './ProductDataUnit';\n@@ -27,6 +26 @@ export class HistoryPeriodLoadingUnit extends BasicUnit {\n-  constructor(\n-    public kernel: Kernel,\n-    public terminal: Terminal,\n-    public productDataUnit: ProductDataUnit,\n-    public periodDataUnit: PeriodDataUnit,\n-  ) {\n+  constructor(public kernel: Kernel, public terminal: Terminal, public periodDataUnit: PeriodDataUnit) {\n@@ -49 +43,2 @@ export class HistoryPeriodLoadingUnit extends BasicUnit {\n-      const [, , duration] = decodePath(series_id);\n+      const { product_id, duration } = decodeOHLCSeriesId(series_id);\n+      const [datasource_id] = decodePath(series_id);\n@@ -67 +62 @@ export class HistoryPeriodLoadingUnit extends BasicUnit {\n-          const filename = `/.Y/cache/ohlc/${encodeURIComponent(series_id)}/${encodeURIComponent(\n+          const filename = `/.Y/cache/ohlc_v2/${encodeURIComponent(series_id)}/${encodeURIComponent(\n@@ -113 +108 @@ export class HistoryPeriodLoadingUnit extends BasicUnit {\n-        const _sql = `select * from ohlc where series_id=${escapeSQL(\n+        const _sql = `select * from ohlc_v2 where series_id=${escapeSQL(\n@@ -126 +121,4 @@ export class HistoryPeriodLoadingUnit extends BasicUnit {\n-          const _data = await requestSQL<IOHLC[]>(this.terminal, sql);\n+          const _data = await requestSQL<Omit<IOHLC, 'datasource_id' | 'product_id' | 'duration'>[]>(\n+            this.terminal,\n+            sql,\n+          );\n@@ -128 +126,6 @@ export class HistoryPeriodLoadingUnit extends BasicUnit {\n-            data.push(x);\n+            data.push({\n+              ...x,\n+              datasource_id,\n+              product_id,\n+              duration,\n+            });\n@@ -149 +152 @@ export class HistoryPeriodLoadingUnit extends BasicUnit {\n-            const filename = `/.Y/cache/ohlc/${encodeURIComponent(series_id)}/${encodeURIComponent(\n+            const filename = `/.Y/cache/ohlc_v2/${encodeURIComponent(series_id)}/${encodeURIComponent(\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "filename",
              "code": "const filename = `/.Y/cache/ohlc_v2/${encodeURIComponent(series_id)}/${encodeURIComponent(",
              "lineStart": 62,
              "lineEnd": 107
            },
            {
              "type": "function",
              "name": "_sql",
              "code": "const _sql = `select * from ohlc_v2 where series_id=${escapeSQL(",
              "lineStart": 108,
              "lineEnd": 120
            },
            {
              "type": "function",
              "name": "_data",
              "code": "const _data = await requestSQL<Omit<IOHLC, 'datasource_id' | 'product_id' | 'duration'>[]>(\n  this.terminal,\n  sql,\n);\n  data.push({\n    ...x,\n    datasource_id,\n    product_id,\n    duration,\n  });",
              "lineStart": 121,
              "lineEnd": 151
            },
            {
              "type": "function",
              "name": "filename",
              "code": "const filename = `/.Y/cache/ohlc_v2/${encodeURIComponent(series_id)}/${encodeURIComponent(",
              "lineStart": 152,
              "lineEnd": 153
            }
          ]
        },
        {
          "additions": 2,
          "deletions": 6,
          "path": "libraries/kernel/src/units/OrderMatchingUnit.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/units/OrderMatchingUnit.ts b/libraries/kernel/src/units/OrderMatchingUnit.ts\nindex b9b3859d6..f9a2b8f27 100644\n--- a/libraries/kernel/src/units/OrderMatchingUnit.ts\n+++ b/libraries/kernel/src/units/OrderMatchingUnit.ts\n@@ -11 +10,0 @@ import { PeriodDataUnit } from './PeriodDataUnit';\n-import { ProductDataUnit } from './ProductDataUnit';\n@@ -33 +31,0 @@ export class OrderMatchingUnit extends BasicUnit {\n-    public productDataUnit: ProductDataUnit,\n@@ -216,3 +214 @@ export class OrderMatchingUnit extends BasicUnit {\n-      const theProduct = this.productDataUnit.getProduct(order.account_id, order.product_id);\n-      const volume_step = theProduct?.volume_step ?? 1;\n-      const volume = roundToStep(order.volume, volume_step);\n+      const volume = roundToStep(order.volume, 1);\n@@ -225 +221 @@ export class OrderMatchingUnit extends BasicUnit {\n-        traded_value: tradedPrice * volume * (theProduct?.value_scale ?? 1),\n+        traded_value: tradedPrice * volume,\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "volume",
              "code": "const volume = roundToStep(order.volume, 1);\n  traded_value: tradedPrice * volume,",
              "lineStart": 214,
              "lineEnd": 222
            }
          ]
        },
        {
          "additions": 1,
          "deletions": 6,
          "path": "libraries/kernel/src/units/PortfolioSimulatorUnit.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/units/PortfolioSimulatorUnit.ts b/libraries/kernel/src/units/PortfolioSimulatorUnit.ts\nindex c35ad6e63..1ed58222e 100644\n--- a/libraries/kernel/src/units/PortfolioSimulatorUnit.ts\n+++ b/libraries/kernel/src/units/PortfolioSimulatorUnit.ts\n@@ -12 +11,0 @@ import { PeriodDataUnit } from './PeriodDataUnit';\n-import { ProductDataUnit } from './ProductDataUnit';\n@@ -47 +45,0 @@ export class PortfolioSimulatorUnit extends BasicUnit {\n-    public productDataUnit: ProductDataUnit,\n@@ -195,4 +193 @@ export class PortfolioSimulatorUnit extends BasicUnit {\n-        volume: roundToStep(\n-          Math.abs(positionDiff.error_volume),\n-          this.productDataUnit.getProduct(account_id, product_id)?.volume_step ?? 1,\n-        ),\n+        volume: roundToStep(Math.abs(positionDiff.error_volume), 1),\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 50,
          "path": "libraries/kernel/src/units/ProductDataUnit.ts",
          "changeType": "deleted",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/units/ProductDataUnit.ts b/libraries/kernel/src/units/ProductDataUnit.ts\ndeleted file mode 100644\nindex 6243d8993..000000000\n--- a/libraries/kernel/src/units/ProductDataUnit.ts\n+++ /dev/null\n@@ -1,50 +0,0 @@\n-import { IProduct } from '@yuants/data-product';\n-import { AccountDatasourceRelationUnit } from './AccountDatasouceRelationUnit';\n-import { BasicUnit } from './BasicUnit';\n-\n-/**\n- * 品种数据单元\n- * @public\n- */\n-export class ProductDataUnit extends BasicUnit {\n-  private mapProductIdToProduct: Record<string, Record<string, IProduct>> = {};\n-  private adrUnit: AccountDatasourceRelationUnit | undefined;\n-\n-  onInit(): void | Promise<void> {\n-    this.adrUnit = this.kernel.findUnit(AccountDatasourceRelationUnit);\n-  }\n-\n-  listProducts(): IProduct[] {\n-    return Object.values(this.mapProductIdToProduct).flatMap((x) => Object.values(x));\n-  }\n-\n-  getProduct(datasource_id: string, product_id: string): IProduct | undefined {\n-    return (\n-      this.mapProductIdToProduct[datasource_id]?.[product_id] ?? this.mapProductIdToProduct['']?.[product_id]\n-    );\n-  }\n-\n-  updateProduct(product: IProduct) {\n-    // Set default\n-    (this.mapProductIdToProduct[''] ??= {})[product.product_id] = product;\n-    // Set datasource_id\n-    (this.mapProductIdToProduct[product.datasource_id || ''] ??= {})[product.product_id] = product;\n-    // Copy to All Related Accounts\n-    if (this.adrUnit) {\n-      for (const relation of this.adrUnit.list()) {\n-        if (relation.datasource_id === product.datasource_id && relation.product_id === product.product_id) {\n-          (this.mapProductIdToProduct[relation.account_id] ??= {})[product.product_id] = product;\n-        }\n-      }\n-    }\n-  }\n-\n-  dump() {\n-    return {\n-      mapProductIdToProduct: this.mapProductIdToProduct,\n-    };\n-  }\n-  restore(state: any): void {\n-    this.mapProductIdToProduct = state.mapProductIdToProduct;\n-  }\n-}\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 81,
          "path": "libraries/kernel/src/units/ProductLoadingUnit.ts",
          "changeType": "deleted",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/units/ProductLoadingUnit.ts b/libraries/kernel/src/units/ProductLoadingUnit.ts\ndeleted file mode 100644\nindex 797b3e146..000000000\n--- a/libraries/kernel/src/units/ProductLoadingUnit.ts\n+++ /dev/null\n@@ -1,81 +0,0 @@\n-import { IProduct } from '@yuants/data-product';\n-import { Terminal } from '@yuants/protocol';\n-import { escapeSQL, requestSQL } from '@yuants/sql';\n-import { formatTime } from '@yuants/utils';\n-import { defaultIfEmpty, defer, lastValueFrom, mergeAll, tap } from 'rxjs';\n-import { Kernel } from '../kernel';\n-import { BasicUnit } from './BasicUnit';\n-import { ProductDataUnit } from './ProductDataUnit';\n-\n-/**\n- * Product Loading Unit: load product info from storage\n- * @public\n- */\n-export class ProductLoadingUnit extends BasicUnit {\n-  constructor(\n-    public kernel: Kernel,\n-    public terminal: Terminal,\n-    public productDataUnit: ProductDataUnit,\n-    public options?: {},\n-  ) {\n-    super(kernel);\n-  }\n-  productTasks: { datasource_id: string; product_id: string }[] = [];\n-\n-  async onInit() {\n-    this.kernel.log?.(\n-      formatTime(Date.now()),\n-      `start product loading: all ${this.productTasks.length} product(s)`,\n-    );\n-    for (const task of this.productTasks) {\n-      this.kernel.log?.(\n-        formatTime(Date.now()),\n-        `product loading: ${task.datasource_id} / ${task.product_id}`,\n-      );\n-      await lastValueFrom(\n-        defer(() =>\n-          requestSQL<IProduct[]>(\n-            this.terminal,\n-            `SELECT * FROM product WHERE datasource_id = ${escapeSQL(\n-              task.datasource_id,\n-            )} AND product_id = ${escapeSQL(task.product_id)}`,\n-          ),\n-        ).pipe(\n-          mergeAll(),\n-          defaultIfEmpty<IProduct, IProduct>({\n-            datasource_id: task.datasource_id,\n-            product_id: task.product_id,\n-            name: '',\n-            quote_currency: '',\n-            base_currency: '',\n-            price_step: 1,\n-            volume_step: 1,\n-            value_scale: 1,\n-            value_scale_unit: '',\n-            margin_rate: 1,\n-            value_based_cost: 0,\n-            volume_based_cost: 0,\n-            max_position: 0,\n-            max_volume: 0,\n-            allow_long: true,\n-            allow_short: true,\n-          }),\n-          tap((product) => {\n-            this.kernel.log?.(formatTime(Date.now()), 'product loaded', JSON.stringify(product));\n-            this.productDataUnit.updateProduct(product);\n-          }),\n-        ),\n-      );\n-    }\n-  }\n-\n-  dump() {\n-    return {\n-      productTasks: this.productTasks,\n-    };\n-  }\n-\n-  restore(state: any) {\n-    this.productTasks = state.productTasks;\n-  }\n-}\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 20,
          "path": "libraries/kernel/src/units/QuoteDataUnit.ts",
          "changeType": "deleted",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/units/QuoteDataUnit.ts b/libraries/kernel/src/units/QuoteDataUnit.ts\nindex d8887c566..a86c83a8c 100644\n--- a/libraries/kernel/src/units/QuoteDataUnit.ts\n+++ b/libraries/kernel/src/units/QuoteDataUnit.ts\n@@ -3 +2,0 @@ import { BasicUnit } from './BasicUnit';\n-import { ProductDataUnit } from './ProductDataUnit';\n@@ -18 +16,0 @@ export class QuoteDataUnit extends BasicUnit {\n-  private productDataUnit: ProductDataUnit | undefined;\n@@ -29 +26,0 @@ export class QuoteDataUnit extends BasicUnit {\n-    this.productDataUnit = this.kernel.findUnit(ProductDataUnit);\n@@ -68,17 +64,0 @@ export class QuoteDataUnit extends BasicUnit {\n-    if (this.productDataUnit) {\n-      const theProduct = this.productDataUnit.getProduct(datasource_id, product_id);\n-      if (theProduct?.base_currency && theProduct.quote_currency) {\n-        this._updateQuote({\n-          datasource_id,\n-          product_id: `${theProduct.base_currency}${theProduct.quote_currency}`,\n-          ask,\n-          bid,\n-        });\n-        this._updateQuote({\n-          datasource_id,\n-          product_id: `${theProduct.quote_currency}${theProduct.base_currency}`,\n-          ask: 1 / bid,\n-          bid: 1 / ask,\n-        });\n-      }\n-    }\n",
          "codeSnippets": []
        },
        {
          "additions": 1,
          "deletions": 7,
          "path": "libraries/kernel/src/units/RealtimePeriodLoadingUnit.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/units/RealtimePeriodLoadingUnit.ts b/libraries/kernel/src/units/RealtimePeriodLoadingUnit.ts\nindex a95738c63..ce0ff744a 100644\n--- a/libraries/kernel/src/units/RealtimePeriodLoadingUnit.ts\n+++ b/libraries/kernel/src/units/RealtimePeriodLoadingUnit.ts\n@@ -10 +9,0 @@ import { PeriodDataUnit } from './PeriodDataUnit';\n-import { ProductDataUnit } from './ProductDataUnit';\n@@ -27,6 +26 @@ export class RealtimePeriodLoadingUnit extends BasicUnit {\n-  constructor(\n-    public kernel: Kernel,\n-    public terminal: Terminal,\n-    public productDataUnit: ProductDataUnit,\n-    public periodDataUnit: PeriodDataUnit,\n-  ) {\n+  constructor(public kernel: Kernel, public terminal: Terminal, public periodDataUnit: PeriodDataUnit) {\n",
          "codeSnippets": []
        },
        {
          "additions": 0,
          "deletions": 2,
          "path": "libraries/kernel/src/units/index.ts",
          "changeType": "deleted",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/units/index.ts b/libraries/kernel/src/units/index.ts\nindex 7eac9b8a2..fe3854c0c 100644\n--- a/libraries/kernel/src/units/index.ts\n+++ b/libraries/kernel/src/units/index.ts\n@@ -17,2 +16,0 @@ export * from './PortfolioSimulatorUnit';\n-export * from './ProductDataUnit';\n-export * from './ProductLoadingUnit';\n",
          "codeSnippets": []
        },
        {
          "additions": 9,
          "deletions": 9,
          "path": "libraries/kernel/src/utils.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/libraries/kernel/src/utils.ts b/libraries/kernel/src/utils.ts\nindex 043183c23..ee5ab29e9 100644\n--- a/libraries/kernel/src/utils.ts\n+++ b/libraries/kernel/src/utils.ts\n@@ -17 +17 @@ export const getProfit = (\n-  product: IProduct,\n+  product: IProduct | null,\n@@ -28,3 +28,3 @@ export const getProfit = (\n-  (product.value_scale ?? 1) *\n-  (product.value_scale_unit ? 1 / openPrice : 1) *\n-  (product.quote_currency !== currency\n+  (product?.value_scale ?? 1) *\n+  (product?.value_scale_unit ? 1 / openPrice : 1) *\n+  (product && product.quote_currency !== currency\n@@ -48 +48 @@ export const getMargin = (\n-  product: IProduct,\n+  product: IProduct | null,\n@@ -56,4 +56,4 @@ export const getMargin = (\n-  (product.value_scale ?? 1) *\n-  (product.value_scale_unit ? 1 : openPrice) *\n-  (product.margin_rate ?? 1) *\n-  (product.quote_currency !== currency\n+  (product?.value_scale ?? 1) *\n+  (product?.value_scale_unit ? 1 : openPrice) *\n+  (product?.margin_rate ?? 1) *\n+  (product && product.quote_currency !== currency\n",
          "codeSnippets": []
        },
        {
          "additions": 7,
          "deletions": 4,
          "path": "ui/web/src/modules/Form/widgets/OHLCSelectWidget.tsx",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/ui/web/src/modules/Form/widgets/OHLCSelectWidget.tsx b/ui/web/src/modules/Form/widgets/OHLCSelectWidget.tsx\nindex 565f0cb14..d3a269365 100644\n--- a/ui/web/src/modules/Form/widgets/OHLCSelectWidget.tsx\n+++ b/ui/web/src/modules/Form/widgets/OHLCSelectWidget.tsx\n@@ -5 +4,0 @@ import { requestSQL } from '@yuants/sql';\n-import { decodePath } from '@yuants/utils';\n@@ -29 +28,6 @@ const seriesIdList$ = terminal$.pipe(\n-    defer(() => requestSQL<{ series_id: string }[]>(terminal, `select distinct(series_id) from ohlc`)).pipe(\n+    defer(() =>\n+      requestSQL<{ series_id: string }[]>(\n+        terminal,\n+        `select distinct series_id from series_data_range where table_name = 'ohlc_v2'`,\n+      ),\n+    ).pipe(\n@@ -45 +48,0 @@ export function OHLCSelectWidget<\n-      const [datasource_id, product_id, duration] = decodePath(v);\n@@ -47 +50 @@ export function OHLCSelectWidget<\n-        label: `${datasource_id} / ${product_id} / ${duration}`,\n+        label: v,\n",
          "codeSnippets": []
        },
        {
          "additions": 6,
          "deletions": 1,
          "path": "ui/web/src/modules/OHLC/index.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/ui/web/src/modules/OHLC/index.ts b/ui/web/src/modules/OHLC/index.ts\nindex 94836f54c..b6bb2b624 100644\n--- a/ui/web/src/modules/OHLC/index.ts\n+++ b/ui/web/src/modules/OHLC/index.ts\n@@ -8 +8,6 @@ export const seriesIdList$ = terminal$.pipe(\n-    defer(() => requestSQL<{ series_id: string }[]>(terminal, `select distinct(series_id) from ohlc`)).pipe(\n+    defer(() =>\n+      requestSQL<{ series_id: string }[]>(\n+        terminal,\n+        `select distinct series_id from series_data_range where table_name = 'ohlc_v2'`,\n+      ),\n+    ).pipe(\n",
          "codeSnippets": []
        },
        {
          "additions": 2,
          "deletions": 7,
          "path": "ui/web/src/modules/StaticFileServerStorage/LocalAgentScene.ts",
          "changeType": "modified",
          "patch": "commit 57eb64f3f68f1c8226229a12070961a49bfca221\nAuthor: CZ <zheng.chen@no-trade-no.life>\nDate:   Tue Dec 30 04:32:48 2025 +0800\n\n    refactor: remove ProductDataUnit and related code (#2430)\n    \n    - Eliminated ProductDataUnit and its usage across various units including AccountInfoUnit, AccountSimulatorUnit, and OrderMatchingUnit.\n    - Updated HistoryOrderUnit and other units to function without ProductDataUnit, simplifying dependencies.\n    - Adjusted profit and margin calculations to handle null product cases.\n    - Refactored SQL queries to target new series_data_range table for OHLC data.\n    - Cleaned up unused imports and commented-out code for better readability.\n\ndiff --git a/ui/web/src/modules/StaticFileServerStorage/LocalAgentScene.ts b/ui/web/src/modules/StaticFileServerStorage/LocalAgentScene.ts\nindex d1e403b46..7b53589fb 100644\n--- a/ui/web/src/modules/StaticFileServerStorage/LocalAgentScene.ts\n+++ b/ui/web/src/modules/StaticFileServerStorage/LocalAgentScene.ts\n@@ -11 +10,0 @@ import {\n-  ProductDataUnit,\n@@ -34 +32,0 @@ export const LocalAgentScene = async (agentConf: IAgentConf) => {\n-  const productDataUnit = new ProductDataUnit(kernel);\n@@ -48,2 +46,2 @@ export const LocalAgentScene = async (agentConf: IAgentConf) => {\n-  const historyOrderUnit = new HistoryOrderUnit(kernel, quoteDataUnit, productDataUnit);\n-  const accountInfoUnit = new AccountInfoUnit(kernel, productDataUnit, quoteDataUnit, historyOrderUnit);\n+  const historyOrderUnit = new HistoryOrderUnit(kernel, quoteDataUnit);\n+  const accountInfoUnit = new AccountInfoUnit(kernel, quoteDataUnit, historyOrderUnit);\n@@ -52 +49,0 @@ export const LocalAgentScene = async (agentConf: IAgentConf) => {\n-    productDataUnit,\n@@ -77,2 +73,0 @@ export const LocalAgentScene = async (agentConf: IAgentConf) => {\n-    productDataUnit,\n-\n",
          "codeSnippets": [
            {
              "type": "function",
              "name": "historyOrderUnit",
              "code": "const historyOrderUnit = new HistoryOrderUnit(kernel, quoteDataUnit);",
              "lineStart": 46,
              "lineEnd": 46
            },
            {
              "type": "function",
              "name": "accountInfoUnit",
              "code": "const accountInfoUnit = new AccountInfoUnit(kernel, quoteDataUnit, historyOrderUnit);",
              "lineStart": 47,
              "lineEnd": 73
            }
          ]
        }
      ]
    }
  ],
  "analysis": {
    "domains": [
      {
        "name": "API请求优化与限速",
        "commits": [
          "cc55da276",
          "fbb62b881"
        ],
        "files": [
          "apps/postgres-storage/src/index.ts",
          "apps/virtual-exchange/src/series-collector/forwards-ohlc.ts",
          "apps/virtual-exchange/src/series-collector/index.ts",
          "common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json",
          "common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json",
          "common/changes/@yuants/data-ohlc/2025-12-29-08-41.json",
          "common/config/rush/pnpm-lock.yaml",
          "libraries/data-ohlc/etc/data-ohlc.api.md",
          "libraries/data-ohlc/package.json",
          "libraries/data-ohlc/src/index.ts"
        ]
      },
      {
        "name": "安全与鉴权",
        "commits": [
          "cc55da276",
          "fbb62b881"
        ],
        "files": [
          "apps/postgres-storage/src/index.ts",
          "apps/virtual-exchange/src/series-collector/forwards-ohlc.ts",
          "apps/virtual-exchange/src/series-collector/index.ts",
          "common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json",
          "common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json",
          "common/changes/@yuants/data-ohlc/2025-12-29-08-41.json",
          "common/config/rush/pnpm-lock.yaml",
          "libraries/data-ohlc/etc/data-ohlc.api.md",
          "libraries/data-ohlc/package.json",
          "libraries/data-ohlc/src/index.ts"
        ]
      },
      {
        "name": "订单与交易",
        "commits": [
          "cc55da276",
          "e025bb65c",
          "fbb62b881"
        ],
        "files": [
          "apps/postgres-storage/src/index.ts",
          "apps/virtual-exchange/src/series-collector/forwards-ohlc.ts",
          "apps/virtual-exchange/src/series-collector/index.ts",
          "common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json",
          "common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json",
          "common/changes/@yuants/data-ohlc/2025-12-29-08-41.json",
          "common/config/rush/pnpm-lock.yaml",
          "libraries/data-ohlc/etc/data-ohlc.api.md",
          "libraries/data-ohlc/package.json",
          "libraries/data-ohlc/src/index.ts"
        ]
      },
      {
        "name": "账户管理",
        "commits": [
          "cc55da276",
          "fbb62b881"
        ],
        "files": [
          "apps/postgres-storage/src/index.ts",
          "apps/virtual-exchange/src/series-collector/forwards-ohlc.ts",
          "apps/virtual-exchange/src/series-collector/index.ts",
          "common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json",
          "common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json",
          "common/changes/@yuants/data-ohlc/2025-12-29-08-41.json",
          "common/config/rush/pnpm-lock.yaml",
          "libraries/data-ohlc/etc/data-ohlc.api.md",
          "libraries/data-ohlc/package.json",
          "libraries/data-ohlc/src/index.ts"
        ]
      },
      {
        "name": "市场数据",
        "commits": [
          "cc55da276",
          "e025bb65c",
          "fbb62b881"
        ],
        "files": [
          "apps/postgres-storage/src/index.ts",
          "apps/virtual-exchange/src/series-collector/forwards-ohlc.ts",
          "apps/virtual-exchange/src/series-collector/index.ts",
          "common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json",
          "common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json",
          "common/changes/@yuants/data-ohlc/2025-12-29-08-41.json",
          "common/config/rush/pnpm-lock.yaml",
          "libraries/data-ohlc/etc/data-ohlc.api.md",
          "libraries/data-ohlc/package.json",
          "libraries/data-ohlc/src/index.ts"
        ]
      },
      {
        "name": "接口重构",
        "commits": [
          "cc55da276",
          "57eb64f3f"
        ],
        "files": [
          "apps/postgres-storage/src/index.ts",
          "apps/virtual-exchange/src/series-collector/forwards-ohlc.ts",
          "apps/virtual-exchange/src/series-collector/index.ts",
          "common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json",
          "common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json",
          "common/changes/@yuants/data-ohlc/2025-12-29-08-41.json",
          "common/config/rush/pnpm-lock.yaml",
          "libraries/data-ohlc/etc/data-ohlc.api.md",
          "libraries/data-ohlc/package.json",
          "libraries/data-ohlc/src/index.ts"
        ]
      },
      {
        "name": "配置与环境",
        "commits": [
          "cc55da276",
          "e025bb65c",
          "fbb62b881",
          "f757624f2",
          "57eb64f3f"
        ],
        "files": [
          "apps/postgres-storage/src/index.ts",
          "apps/virtual-exchange/src/series-collector/forwards-ohlc.ts",
          "apps/virtual-exchange/src/series-collector/index.ts",
          "common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json",
          "common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json",
          "common/changes/@yuants/data-ohlc/2025-12-29-08-41.json",
          "common/config/rush/pnpm-lock.yaml",
          "libraries/data-ohlc/etc/data-ohlc.api.md",
          "libraries/data-ohlc/package.json",
          "libraries/data-ohlc/src/index.ts"
        ]
      },
      {
        "name": "文档",
        "commits": [
          "cc55da276",
          "e025bb65c",
          "f757624f2",
          "57eb64f3f"
        ],
        "files": [
          "apps/postgres-storage/src/index.ts",
          "apps/virtual-exchange/src/series-collector/forwards-ohlc.ts",
          "apps/virtual-exchange/src/series-collector/index.ts",
          "common/changes/@yuants/app-postgres-storage/2025-12-29-08-41.json",
          "common/changes/@yuants/app-virtual-exchange/2025-12-29-08-41.json",
          "common/changes/@yuants/data-ohlc/2025-12-29-08-41.json",
          "common/config/rush/pnpm-lock.yaml",
          "libraries/data-ohlc/etc/data-ohlc.api.md",
          "libraries/data-ohlc/package.json",
          "libraries/data-ohlc/src/index.ts"
        ]
      },
      {
        "name": "错误处理与观测",
        "commits": [
          "57eb64f3f"
        ],
        "files": [
          "apps/virtual-exchange/src/series-collector/forwards-interest-rate.ts",
          "common/changes/@yuants/agent/2025-12-29-20-27.json",
          "common/changes/@yuants/app-virtual-exchange/2025-12-29-20-27.json",
          "common/changes/@yuants/dist-origin/2025-12-29-20-27.json",
          "common/changes/@yuants/kernel/2025-12-29-20-27.json",
          "common/config/rush/pnpm-lock.yaml",
          "distributions/origin/@libs/global.ts",
          "distributions/origin/global.d.ts",
          "libraries/agent/etc/agent.api.md",
          "libraries/agent/package.json"
        ]
      }
    ],
    "riskIndicators": [
      {
        "type": "no_tests",
        "severity": "medium",
        "details": "包含功能或修复提交但未见测试文件更新",
        "commits": []
      },
      {
        "type": "api_change",
        "severity": "high",
        "details": "1 个提交修改了API或接口定义",
        "commits": [
          "57eb64f3f"
        ]
      }
    ]
  },
  "metadata": {
    "tool": "git-changes-reporter",
    "version": "3.0.0",
    "repository": "/home/runner/work/Yuan/Yuan"
  }
}