# RPC 框架

Yuan 通过一套 RPC 框架来实现分布式系统中终端之间的通信。原生支持浏览器和 NodeJS 环境。它使用星形拓扑结构，所有终端都连接到一个中心节点主机（Host）。终端可以通过 Host 发送消息给其他终端。Host 负责转发消息。同时，终端会利用 WebRTC 来建立点对点连接，以实现更高效的通信，降低 Host 的负载，Host 会充当信令服务来帮助终端建立点对点连接。

## 核心组件

### [@yuants/protocol](libraries/protocol)

网络协议、服务定义和基础设施。

### [@yuants/app-host](apps/host)

超轻量级的内存型消息代理和服务发现。连接到同一主机的终端之间可以相互发送消息。支持通过环境变量 `HOST_TOKEN` 进行连接权限控制。支持通过环境变量 `MULTI_TENANCY=ED25519` 开启多租户环境，可以自动接受符合 ED25519 签名的终端，终端不需要向主机发送私钥。

### [@yuants/app-portal](apps/portal)

这将部署一个允许将主机中已有的服务（和频道）分享给其他主机的服务。它是一个中间人，它可以将消息从一个主机转发到另一个主机。它是一个非常强大的工具，可以帮助您构建数据分享场景。

## 通信模式

1. **星形拓扑**: 所有终端连接到中心 Host
2. **消息转发**: Host 负责终端间的消息路由
3. **点对点连接**: 通过 WebRTC 建立直接连接
4. **服务发现**: 自动发现和注册可用服务

## 安全特性

- 支持连接令牌验证
- 多租户环境支持
- ED25519 签名验证
- 私钥保护机制

<p align="right">(<a href="../../README.zh-Hans.md">返回 README</a>) | <a href="architecture-overview.md">架构概述</a></p>
